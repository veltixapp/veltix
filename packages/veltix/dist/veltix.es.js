import * as C from "react";
import Me, { createContext as wl, useContext as Sl, forwardRef as Md, createElement as Nn, useMemo as xu, useCallback as nr, useState as Ce, useLayoutEffect as LS, useEffect as ze, useRef as bt, useReducer as BS, useImperativeHandle as zS, PureComponent as $S, memo as dg } from "react";
import * as Cl from "react-dom";
import GS, { createPortal as VS } from "react-dom";
var ls = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function Td(e) {
  return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e;
}
var cs = { exports: {} }, Di = {};
/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var Vh;
function US() {
  if (Vh) return Di;
  Vh = 1;
  var e = Symbol.for("react.transitional.element"), t = Symbol.for("react.fragment");
  function r(n, o, i) {
    var a = null;
    if (i !== void 0 && (a = "" + i), o.key !== void 0 && (a = "" + o.key), "key" in o) {
      i = {};
      for (var s in o)
        s !== "key" && (i[s] = o[s]);
    } else i = o;
    return o = i.ref, {
      $$typeof: e,
      type: n,
      key: a,
      ref: o !== void 0 ? o : null,
      props: i
    };
  }
  return Di.Fragment = t, Di.jsx = r, Di.jsxs = r, Di;
}
var Ri = {};
/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var Uh;
function HS() {
  return Uh || (Uh = 1, process.env.NODE_ENV !== "production" && function() {
    function e(D) {
      if (D == null) return null;
      if (typeof D == "function")
        return D.$$typeof === A ? null : D.displayName || D.name || null;
      if (typeof D == "string") return D;
      switch (D) {
        case v:
          return "Fragment";
        case x:
          return "Profiler";
        case m:
          return "StrictMode";
        case _:
          return "Suspense";
        case R:
          return "SuspenseList";
        case j:
          return "Activity";
      }
      if (typeof D == "object")
        switch (typeof D.tag == "number" && console.error(
          "Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."
        ), D.$$typeof) {
          case g:
            return "Portal";
          case b:
            return (D.displayName || "Context") + ".Provider";
          case y:
            return (D._context.displayName || "Context") + ".Consumer";
          case w:
            var N = D.render;
            return D = D.displayName, D || (D = N.displayName || N.name || "", D = D !== "" ? "ForwardRef(" + D + ")" : "ForwardRef"), D;
          case T:
            return N = D.displayName || null, N !== null ? N : e(D.type) || "Memo";
          case k:
            N = D._payload, D = D._init;
            try {
              return e(D(N));
            } catch {
            }
        }
      return null;
    }
    function t(D) {
      return "" + D;
    }
    function r(D) {
      try {
        t(D);
        var N = !1;
      } catch {
        N = !0;
      }
      if (N) {
        N = console;
        var z = N.error, Y = typeof Symbol == "function" && Symbol.toStringTag && D[Symbol.toStringTag] || D.constructor.name || "Object";
        return z.call(
          N,
          "The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",
          Y
        ), t(D);
      }
    }
    function n(D) {
      if (D === v) return "<>";
      if (typeof D == "object" && D !== null && D.$$typeof === k)
        return "<...>";
      try {
        var N = e(D);
        return N ? "<" + N + ">" : "<...>";
      } catch {
        return "<...>";
      }
    }
    function o() {
      var D = $.A;
      return D === null ? null : D.getOwner();
    }
    function i() {
      return Error("react-stack-top-frame");
    }
    function a(D) {
      if (F.call(D, "key")) {
        var N = Object.getOwnPropertyDescriptor(D, "key").get;
        if (N && N.isReactWarning) return !1;
      }
      return D.key !== void 0;
    }
    function s(D, N) {
      function z() {
        O || (O = !0, console.error(
          "%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",
          N
        ));
      }
      z.isReactWarning = !0, Object.defineProperty(D, "key", {
        get: z,
        configurable: !0
      });
    }
    function l() {
      var D = e(this.type);
      return I[D] || (I[D] = !0, console.error(
        "Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release."
      )), D = this.props.ref, D !== void 0 ? D : null;
    }
    function c(D, N, z, Y, H, X, Q, q) {
      return z = X.ref, D = {
        $$typeof: p,
        type: D,
        key: N,
        props: X,
        _owner: H
      }, (z !== void 0 ? z : null) !== null ? Object.defineProperty(D, "ref", {
        enumerable: !1,
        get: l
      }) : Object.defineProperty(D, "ref", { enumerable: !1, value: null }), D._store = {}, Object.defineProperty(D._store, "validated", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: 0
      }), Object.defineProperty(D, "_debugInfo", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: null
      }), Object.defineProperty(D, "_debugStack", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: Q
      }), Object.defineProperty(D, "_debugTask", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: q
      }), Object.freeze && (Object.freeze(D.props), Object.freeze(D)), D;
    }
    function u(D, N, z, Y, H, X, Q, q) {
      var K = N.children;
      if (K !== void 0)
        if (Y)
          if (L(K)) {
            for (Y = 0; Y < K.length; Y++)
              d(K[Y]);
            Object.freeze && Object.freeze(K);
          } else
            console.error(
              "React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead."
            );
        else d(K);
      if (F.call(N, "key")) {
        K = e(D);
        var ne = Object.keys(N).filter(function(te) {
          return te !== "key";
        });
        Y = 0 < ne.length ? "{key: someKey, " + ne.join(": ..., ") + ": ...}" : "{key: someKey}", M[K + Y] || (ne = 0 < ne.length ? "{" + ne.join(": ..., ") + ": ...}" : "{}", console.error(
          `A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,
          Y,
          K,
          ne,
          K
        ), M[K + Y] = !0);
      }
      if (K = null, z !== void 0 && (r(z), K = "" + z), a(N) && (r(N.key), K = "" + N.key), "key" in N) {
        z = {};
        for (var oe in N)
          oe !== "key" && (z[oe] = N[oe]);
      } else z = N;
      return K && s(
        z,
        typeof D == "function" ? D.displayName || D.name || "Unknown" : D
      ), c(
        D,
        K,
        X,
        H,
        o(),
        z,
        Q,
        q
      );
    }
    function d(D) {
      typeof D == "object" && D !== null && D.$$typeof === p && D._store && (D._store.validated = 1);
    }
    var h = Me, p = Symbol.for("react.transitional.element"), g = Symbol.for("react.portal"), v = Symbol.for("react.fragment"), m = Symbol.for("react.strict_mode"), x = Symbol.for("react.profiler"), y = Symbol.for("react.consumer"), b = Symbol.for("react.context"), w = Symbol.for("react.forward_ref"), _ = Symbol.for("react.suspense"), R = Symbol.for("react.suspense_list"), T = Symbol.for("react.memo"), k = Symbol.for("react.lazy"), j = Symbol.for("react.activity"), A = Symbol.for("react.client.reference"), $ = h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE, F = Object.prototype.hasOwnProperty, L = Array.isArray, P = console.createTask ? console.createTask : function() {
      return null;
    };
    h = {
      "react-stack-bottom-frame": function(D) {
        return D();
      }
    };
    var O, I = {}, E = h["react-stack-bottom-frame"].bind(
      h,
      i
    )(), S = P(n(i)), M = {};
    Ri.Fragment = v, Ri.jsx = function(D, N, z, Y, H) {
      var X = 1e4 > $.recentlyCreatedOwnerStacks++;
      return u(
        D,
        N,
        z,
        !1,
        Y,
        H,
        X ? Error("react-stack-top-frame") : E,
        X ? P(n(D)) : S
      );
    }, Ri.jsxs = function(D, N, z, Y, H) {
      var X = 1e4 > $.recentlyCreatedOwnerStacks++;
      return u(
        D,
        N,
        z,
        !0,
        Y,
        H,
        X ? Error("react-stack-top-frame") : E,
        X ? P(n(D)) : S
      );
    };
  }()), Ri;
}
var Hh;
function WS() {
  return Hh || (Hh = 1, process.env.NODE_ENV === "production" ? cs.exports = US() : cs.exports = HS()), cs.exports;
}
var f = WS();
const Wh = (e) => {
  let t;
  const r = /* @__PURE__ */ new Set(), n = (c, u) => {
    const d = typeof c == "function" ? c(t) : c;
    if (!Object.is(d, t)) {
      const h = t;
      t = u ?? (typeof d != "object" || d === null) ? d : Object.assign({}, t, d), r.forEach((p) => p(t, h));
    }
  }, o = () => t, s = { setState: n, getState: o, getInitialState: () => l, subscribe: (c) => (r.add(c), () => r.delete(c)) }, l = t = e(n, o, s);
  return s;
}, YS = (e) => e ? Wh(e) : Wh, qS = (e) => e;
function XS(e, t = qS) {
  const r = Me.useSyncExternalStore(
    e.subscribe,
    () => t(e.getState()),
    () => t(e.getInitialState())
  );
  return Me.useDebugValue(r), r;
}
const Yh = (e) => {
  const t = YS(e), r = (n) => XS(t, n);
  return Object.assign(r, t), r;
}, Mr = (e) => e ? Yh(e) : Yh, qh = { BASE_URL: "/", DEV: !1, MODE: "production", PROD: !0, SSR: !1 }, aa = /* @__PURE__ */ new Map(), us = (e) => {
  const t = aa.get(e);
  return t ? Object.fromEntries(
    Object.entries(t.stores).map(([r, n]) => [r, n.getState()])
  ) : {};
}, KS = (e, t, r) => {
  if (e === void 0)
    return {
      type: "untracked",
      connection: t.connect(r)
    };
  const n = aa.get(r.name);
  if (n)
    return { type: "tracked", store: e, ...n };
  const o = {
    connection: t.connect(r),
    stores: {}
  };
  return aa.set(r.name, o), { type: "tracked", store: e, ...o };
}, ZS = (e, t) => {
  if (t === void 0) return;
  const r = aa.get(e);
  r && (delete r.stores[t], Object.keys(r.stores).length === 0 && aa.delete(e));
}, QS = (e) => {
  var t, r;
  if (!e) return;
  const n = e.split(`
`), o = n.findIndex(
    (a) => a.includes("api.setState")
  );
  if (o < 0) return;
  const i = ((t = n[o + 1]) == null ? void 0 : t.trim()) || "";
  return (r = /.+ (.+) .+/.exec(i)) == null ? void 0 : r[1];
}, JS = (e, t = {}) => (r, n, o) => {
  const { enabled: i, anonymousActionType: a, store: s, ...l } = t;
  let c;
  try {
    c = (i ?? (qh ? "production" : void 0) !== "production") && window.__REDUX_DEVTOOLS_EXTENSION__;
  } catch {
  }
  if (!c)
    return e(r, n, o);
  const { connection: u, ...d } = KS(s, c, l);
  let h = !0;
  o.setState = (v, m, x) => {
    const y = r(v, m);
    if (!h) return y;
    const b = QS(new Error().stack), w = x === void 0 ? { type: a || b || "anonymous" } : typeof x == "string" ? { type: x } : x;
    return s === void 0 ? (u?.send(w, n()), y) : (u?.send(
      {
        ...w,
        type: `${s}/${w.type}`
      },
      {
        ...us(l.name),
        [s]: o.getState()
      }
    ), y);
  }, o.devtools = {
    cleanup: () => {
      u && typeof u.unsubscribe == "function" && u.unsubscribe(), ZS(l.name, s);
    }
  };
  const p = (...v) => {
    const m = h;
    h = !1, r(...v), h = m;
  }, g = e(o.setState, n, o);
  if (d.type === "untracked" ? u?.init(g) : (d.stores[d.store] = o, u?.init(
    Object.fromEntries(
      Object.entries(d.stores).map(([v, m]) => [
        v,
        v === d.store ? g : m.getState()
      ])
    )
  )), o.dispatchFromDevtools && typeof o.dispatch == "function") {
    let v = !1;
    const m = o.dispatch;
    o.dispatch = (...x) => {
      (qh ? "production" : void 0) !== "production" && x[0].type === "__setState" && !v && (console.warn(
        '[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'
      ), v = !0), m(...x);
    };
  }
  return u.subscribe((v) => {
    var m;
    switch (v.type) {
      case "ACTION":
        if (typeof v.payload != "string") {
          console.error(
            "[zustand devtools middleware] Unsupported action format"
          );
          return;
        }
        return Rc(
          v.payload,
          (x) => {
            if (x.type === "__setState") {
              if (s === void 0) {
                p(x.state);
                return;
              }
              Object.keys(x.state).length !== 1 && console.error(
                `
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `
              );
              const y = x.state[s];
              if (y == null)
                return;
              JSON.stringify(o.getState()) !== JSON.stringify(y) && p(y);
              return;
            }
            o.dispatchFromDevtools && typeof o.dispatch == "function" && o.dispatch(x);
          }
        );
      case "DISPATCH":
        switch (v.payload.type) {
          case "RESET":
            return p(g), s === void 0 ? u?.init(o.getState()) : u?.init(us(l.name));
          case "COMMIT":
            if (s === void 0) {
              u?.init(o.getState());
              return;
            }
            return u?.init(us(l.name));
          case "ROLLBACK":
            return Rc(v.state, (x) => {
              if (s === void 0) {
                p(x), u?.init(o.getState());
                return;
              }
              p(x[s]), u?.init(us(l.name));
            });
          case "JUMP_TO_STATE":
          case "JUMP_TO_ACTION":
            return Rc(v.state, (x) => {
              if (s === void 0) {
                p(x);
                return;
              }
              JSON.stringify(o.getState()) !== JSON.stringify(x[s]) && p(x[s]);
            });
          case "IMPORT_STATE": {
            const { nextLiftedState: x } = v.payload, y = (m = x.computedStates.slice(-1)[0]) == null ? void 0 : m.state;
            if (!y) return;
            p(s === void 0 ? y : y[s]), u?.send(
              null,
              // FIXME no-any
              x
            );
            return;
          }
          case "PAUSE_RECORDING":
            return h = !h;
        }
        return;
    }
  }), g;
}, eC = JS, Rc = (e, t) => {
  let r;
  try {
    r = JSON.parse(e);
  } catch (n) {
    console.error(
      "[zustand devtools middleware] Could not parse the received json",
      n
    );
  }
  r !== void 0 && t(r);
};
function El(e, t) {
  let r;
  try {
    r = e();
  } catch {
    return;
  }
  return {
    getItem: (o) => {
      var i;
      const a = (l) => l === null ? null : JSON.parse(l, void 0), s = (i = r.getItem(o)) != null ? i : null;
      return s instanceof Promise ? s.then(a) : a(s);
    },
    setItem: (o, i) => r.setItem(o, JSON.stringify(i, void 0)),
    removeItem: (o) => r.removeItem(o)
  };
}
const yu = (e) => (t) => {
  try {
    const r = e(t);
    return r instanceof Promise ? r : {
      then(n) {
        return yu(n)(r);
      },
      catch(n) {
        return this;
      }
    };
  } catch (r) {
    return {
      then(n) {
        return this;
      },
      catch(n) {
        return yu(n)(r);
      }
    };
  }
}, tC = (e, t) => (r, n, o) => {
  let i = {
    storage: El(() => localStorage),
    partialize: (v) => v,
    version: 0,
    merge: (v, m) => ({
      ...m,
      ...v
    }),
    ...t
  }, a = !1;
  const s = /* @__PURE__ */ new Set(), l = /* @__PURE__ */ new Set();
  let c = i.storage;
  if (!c)
    return e(
      (...v) => {
        console.warn(
          `[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`
        ), r(...v);
      },
      n,
      o
    );
  const u = () => {
    const v = i.partialize({ ...n() });
    return c.setItem(i.name, {
      state: v,
      version: i.version
    });
  }, d = o.setState;
  o.setState = (v, m) => {
    d(v, m), u();
  };
  const h = e(
    (...v) => {
      r(...v), u();
    },
    n,
    o
  );
  o.getInitialState = () => h;
  let p;
  const g = () => {
    var v, m;
    if (!c) return;
    a = !1, s.forEach((y) => {
      var b;
      return y((b = n()) != null ? b : h);
    });
    const x = ((m = i.onRehydrateStorage) == null ? void 0 : m.call(i, (v = n()) != null ? v : h)) || void 0;
    return yu(c.getItem.bind(c))(i.name).then((y) => {
      if (y)
        if (typeof y.version == "number" && y.version !== i.version) {
          if (i.migrate) {
            const b = i.migrate(
              y.state,
              y.version
            );
            return b instanceof Promise ? b.then((w) => [!0, w]) : [!0, b];
          }
          console.error(
            "State loaded from storage couldn't be migrated since no migrate function was provided"
          );
        } else
          return [!1, y.state];
      return [!1, void 0];
    }).then((y) => {
      var b;
      const [w, _] = y;
      if (p = i.merge(
        _,
        (b = n()) != null ? b : h
      ), r(p, !0), w)
        return u();
    }).then(() => {
      x?.(p, void 0), p = n(), a = !0, l.forEach((y) => y(p));
    }).catch((y) => {
      x?.(void 0, y);
    });
  };
  return o.persist = {
    setOptions: (v) => {
      i = {
        ...i,
        ...v
      }, v.storage && (c = v.storage);
    },
    clearStorage: () => {
      c?.removeItem(i.name);
    },
    getOptions: () => i,
    rehydrate: () => g(),
    hasHydrated: () => a,
    onHydrate: (v) => (s.add(v), () => {
      s.delete(v);
    }),
    onFinishHydration: (v) => (l.add(v), () => {
      l.delete(v);
    })
  }, i.skipHydration || g(), p || h;
}, jd = tC, Et = [];
for (let e = 0; e < 256; ++e)
  Et.push((e + 256).toString(16).slice(1));
function rC(e, t = 0) {
  return (Et[e[t + 0]] + Et[e[t + 1]] + Et[e[t + 2]] + Et[e[t + 3]] + "-" + Et[e[t + 4]] + Et[e[t + 5]] + "-" + Et[e[t + 6]] + Et[e[t + 7]] + "-" + Et[e[t + 8]] + Et[e[t + 9]] + "-" + Et[e[t + 10]] + Et[e[t + 11]] + Et[e[t + 12]] + Et[e[t + 13]] + Et[e[t + 14]] + Et[e[t + 15]]).toLowerCase();
}
let Mc;
const nC = new Uint8Array(16);
function oC() {
  if (!Mc) {
    if (typeof crypto > "u" || !crypto.getRandomValues)
      throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
    Mc = crypto.getRandomValues.bind(crypto);
  }
  return Mc(nC);
}
const iC = typeof crypto < "u" && crypto.randomUUID && crypto.randomUUID.bind(crypto), Xh = { randomUUID: iC };
function Io(e, t, r) {
  if (Xh.randomUUID && !e)
    return Xh.randomUUID();
  e = e || {};
  const n = e.random ?? e.rng?.() ?? oC();
  if (n.length < 16)
    throw new Error("Random bytes length must be >= 16");
  return n[6] = n[6] & 15 | 64, n[8] = n[8] & 63 | 128, rC(n);
}
const Kh = (e) => Symbol.iterator in e, Zh = (e) => (
  // HACK: avoid checking entries type
  "entries" in e
), Qh = (e, t) => {
  const r = e instanceof Map ? e : new Map(e.entries()), n = t instanceof Map ? t : new Map(t.entries());
  if (r.size !== n.size)
    return !1;
  for (const [o, i] of r)
    if (!Object.is(i, n.get(o)))
      return !1;
  return !0;
}, aC = (e, t) => {
  const r = e[Symbol.iterator](), n = t[Symbol.iterator]();
  let o = r.next(), i = n.next();
  for (; !o.done && !i.done; ) {
    if (!Object.is(o.value, i.value))
      return !1;
    o = r.next(), i = n.next();
  }
  return !!o.done && !!i.done;
};
function sC(e, t) {
  return Object.is(e, t) ? !0 : typeof e != "object" || e === null || typeof t != "object" || t === null || Object.getPrototypeOf(e) !== Object.getPrototypeOf(t) ? !1 : Kh(e) && Kh(t) ? Zh(e) && Zh(t) ? Qh(e, t) : aC(e, t) : Qh(
    { entries: () => Object.entries(e) },
    { entries: () => Object.entries(t) }
  );
}
function sa(e) {
  const t = Me.useRef(void 0);
  return (r) => {
    const n = e(r);
    return sC(t.current, n) ? t.current : t.current = n;
  };
}
const kd = wl(
  null
), Pa = () => {
  const e = Sl(kd);
  if (!e)
    throw new Error("useVeltix must be used within a VeltixProvider");
  return e;
}, lC = {
  id: Io(),
  title: "Untitled",
  docs: [
    {
      id: Io(),
      title: "Page 1",
      nodes: []
    }
  ]
}, ke = Mr((e, t) => ({
  json: lC,
  initialize: (r) => e({ json: r }),
  update: (r) => e((n) => ({
    json: n.json ? { ...n.json, ...r } : void 0
  })),
  // 页面相关操作
  addDoc: (r) => e((n) => n.json ? {
    json: {
      ...n.json,
      docs: [...n.json.docs, r]
    }
  } : { json: void 0 }),
  removeDoc: (r) => e((n) => n.json ? {
    json: {
      ...n.json,
      docs: n.json.docs.filter((o) => o.id !== r)
    }
  } : { json: void 0 }),
  updateDoc: (r, n) => e((o) => {
    if (!o.json) return { json: void 0 };
    const i = o.json.docs.map((a) => a.id === r ? { ...a, ...n } : a);
    return {
      json: {
        ...o.json,
        docs: i
      }
    };
  }),
  getDoc: (r) => {
    const n = t();
    if (n.json)
      return n.json.docs.find((o) => o.id === r);
  },
  // 组件相关操作
  updateNode: (r, n, o) => e((i) => {
    if (!i.json) return { json: void 0 };
    const a = (l) => l.map((c) => c.id === n ? { ...c, ...o } : c.children && c.children.length > 0 ? {
      ...c,
      children: a(c.children)
    } : c), s = i.json.docs.map((l) => l.id !== r ? l : {
      ...l,
      nodes: a(l.nodes)
    });
    return {
      json: {
        ...i.json,
        docs: s
      }
    };
  }),
  createNode: (r, n) => e((o) => {
    if (!o.json) return { json: void 0 };
    const i = o.json.docs.map((a) => a.id !== r ? a : {
      ...a,
      nodes: [...a.nodes, n]
    });
    return {
      json: {
        ...o.json,
        docs: i
      }
    };
  }),
  removeNode: (r, n) => e((o) => {
    if (!o.json) return { json: void 0 };
    const i = (s) => s.filter((l) => l.id === n ? !1 : (l.children && l.children.length > 0 && (l.children = i(l.children)), !0)), a = o.json.docs.map((s) => s.id !== r ? s : {
      ...s,
      nodes: i(s.nodes)
    });
    return {
      json: {
        ...o.json,
        docs: a
      }
    };
  }),
  cloneNode: (r, n) => e((o) => {
    if (!o.json) return { json: void 0 };
    const i = (u) => {
      for (const d of u) {
        if (d.id === n)
          return d;
        if (d.children && d.children.length > 0) {
          const h = i(d.children);
          if (h) return h;
        }
      }
      return null;
    }, a = o.json.docs.find((u) => u.id === r);
    if (!a) return { json: o.json };
    const s = i(a.nodes);
    if (!s) return { json: o.json };
    const l = {
      ...s,
      id: `${s.type}-${Io().substring(0, 8)}`,
      position: {
        ...s.position,
        top: s.position.top + 20,
        left: s.position.left + 20
      }
    }, c = o.json.docs.map((u) => u.id !== r ? u : {
      ...u,
      nodes: [...u.nodes, l]
    });
    return {
      json: {
        ...o.json,
        docs: c
      }
    };
  }),
  reorderNode: (r, n, o, i = []) => e((a) => {
    if (!a.json) return { json: void 0 };
    const s = (c, u) => {
      if (u.length === 0) {
        const p = [...c], [g] = p.splice(n, 1);
        return p.splice(o, 0, g), p;
      }
      const [d, ...h] = u;
      return c.map((p, g) => {
        if (g !== d) return p;
        const v = p.children || [];
        return {
          ...p,
          children: s(v, h)
        };
      });
    }, l = a.json.docs.map((c) => c.id !== r ? c : {
      ...c,
      nodes: s(c.nodes, i)
    });
    return {
      json: {
        ...a.json,
        docs: l
      }
    };
  }),
  getNode: (r, n) => {
    const o = t();
    if (!o.json) return;
    const i = o.json.docs.find((a) => a.id === r);
    if (i)
      return i.nodes.find((a) => a.id === n);
  },
  addNode: (r) => e((n) => {
    if (!n.json || !n.json.docs.length) return { json: void 0 };
    r.id || (r.id = `${r.type}-${Io().substring(0, 8)}`);
    const o = n.json.docs[0], i = n.json.docs.map((a) => a.id !== o.id ? a : {
      ...a,
      nodes: [...a.nodes, r]
    });
    return {
      json: {
        ...n.json,
        docs: i
      }
    };
  }),
  getWidget: (r) => {
    const n = t();
    return !n.json || !n.json.docs.length ? void 0 : n.json.docs[0].nodes.find((i) => i.id === r);
  },
  createNodeByManifest: (r) => {
    const n = {
      id: `${r.type}-${Io().substring(0, 8)}`,
      type: r.type,
      title: r.title,
      props: r.defaultProps || {},
      position: {
        top: 100,
        left: 100,
        width: 120,
        height: 80
      }
    };
    t().addNode(n);
  }
})), cC = (e) => ke(
  sa((t) => {
    if (!t.json) return [];
    const r = t.json.docs.find((n) => n.id === e);
    return r ? r.nodes : [];
  })
), uC = (e = 40) => {
  const t = Pa();
  return ke(
    sa((r) => {
      if (!r.json || !r.json.docs.length)
        return {
          totalWidth: 0,
          totalGap: 0,
          combinedWidth: 0
        };
      const n = r.json.docs, o = n.reduce((a, s) => a + (s.width || t.width), 0), i = n.length > 1 ? (n.length - 1) * e : 0;
      return {
        totalWidth: o,
        totalGap: i,
        combinedWidth: o + i
      };
    })
  );
}, dC = () => {
  const e = Pa();
  return ke(
    sa((t) => {
      if (!t.json || !t.json.docs.length)
        return {
          width: 0,
          height: 0
        };
      const r = t.json.docs, n = r.reduce((a, s) => a + (s.width || e.width), 0), o = Math.max(...r.map((a) => a.height || e.height || 0)), i = r.length > 1 ? (r.length - 1) * 40 : 0;
      return {
        width: n + i,
        height: o
      };
    })
  );
}, Yt = Mr()(
  jd(
    (e, t) => ({
      // 默认选中第一个文档
      activeDocId: (ke.getState().json?.docs || [])[0].id,
      selectedNodes: [],
      // Context menu initial state
      nodeContextMenu: {
        open: !1,
        position: { x: 0, y: 0 },
        node: null
      },
      // 节点选择相关方法
      setSelectedNodes: (r) => e({
        selectedNodes: r
      }),
      addSelectedNode: (r) => e((n) => {
        const o = n.selectedNodes || [];
        return o.includes(r) ? n : {
          selectedNodes: [...o, r]
        };
      }),
      selectNode: (r) => e({
        selectedNodes: [r]
      }),
      removeSelectedNode: () => e((r) => {
        const n = r.selectedNodes || [];
        if (n.length === 0) return r;
        const o = ke.getState().json.docs[0].id;
        return ke.getState().removeNode(o, n[0]), {
          selectedNodes: []
        };
      }),
      clearSelectedNodes: () => e({
        selectedNodes: []
      }),
      clearAllSelectedNodes: () => e({ selectedNodes: [] }),
      getSelectedNodes: () => t().selectedNodes || [],
      // Context menu actions
      openNodeContextMenu: (r, n) => e({ nodeContextMenu: { open: !0, position: r, node: n } }),
      closeNodeContextMenu: () => e((r) => ({ nodeContextMenu: { ...r.nodeContextMenu, open: !1 } })),
      getCurrentSelection: () => {
        const r = ke.getState(), n = t().selectedNodes, o = r.json.docs[0];
        if (n.length === 0 || !o)
          return {
            selectedDoc: o,
            selectedNodes: []
          };
        const i = n.map((a) => r.getNode(o.id, a)).filter(Boolean);
        return {
          selectedDoc: o,
          selectedNodes: i
        };
      },
      // Select all nodes in the current doc/page
      selectAll: () => {
        const n = ke.getState().json.docs;
        if (!n || n.length === 0) return;
        const o = n[0];
        if (!o) return;
        const i = o.nodes ? o.nodes.map((a) => a.id) : [];
        e({
          selectedNodes: i
        });
      },
      removeNode: (r) => {
        const n = ke.getState(), o = n.json.docs;
        if (!o || o.length === 0) return;
        const i = o[0];
        i && (n.removeNode(i.id, r), e({
          selectedNodes: []
        }));
      },
      add: (r, n) => {
        const o = ke.getState();
        n && (r.position = n), o.addNode(r);
      }
    }),
    {
      name: "veltix-editor",
      storage: El(() => localStorage),
      partialize: (e) => ({})
    }
  )
);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const fC = (e) => e.replace(/([a-z0-9])([A-Z])/g, "$1-$2").toLowerCase(), hC = (e) => e.replace(
  /^([A-Z])|[\s-_]+(\w)/g,
  (t, r, n) => n ? n.toUpperCase() : r.toLowerCase()
), Jh = (e) => {
  const t = hC(e);
  return t.charAt(0).toUpperCase() + t.slice(1);
}, fg = (...e) => e.filter((t, r, n) => !!t && t.trim() !== "" && n.indexOf(t) === r).join(" ").trim(), pC = (e) => {
  for (const t in e)
    if (t.startsWith("aria-") || t === "role" || t === "title")
      return !0;
};
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var vC = {
  xmlns: "http://www.w3.org/2000/svg",
  width: 24,
  height: 24,
  viewBox: "0 0 24 24",
  fill: "none",
  stroke: "currentColor",
  strokeWidth: 2,
  strokeLinecap: "round",
  strokeLinejoin: "round"
};
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const gC = Md(
  ({
    color: e = "currentColor",
    size: t = 24,
    strokeWidth: r = 2,
    absoluteStrokeWidth: n,
    className: o = "",
    children: i,
    iconNode: a,
    ...s
  }, l) => Nn(
    "svg",
    {
      ref: l,
      ...vC,
      width: t,
      height: t,
      stroke: e,
      strokeWidth: n ? Number(r) * 24 / Number(t) : r,
      className: fg("lucide", o),
      ...!i && !pC(s) && { "aria-hidden": "true" },
      ...s
    },
    [
      ...a.map(([c, u]) => Nn(c, u)),
      ...Array.isArray(i) ? i : [i]
    ]
  )
);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const ve = (e, t) => {
  const r = Md(
    ({ className: n, ...o }, i) => Nn(gC, {
      ref: i,
      iconNode: t,
      className: fg(
        `lucide-${fC(Jh(e))}`,
        `lucide-${e}`,
        n
      ),
      ...o
    })
  );
  return r.displayName = Jh(e), r;
};
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const mC = [
  ["path", { d: "m12 19-7-7 7-7", key: "1l729n" }],
  ["path", { d: "M19 12H5", key: "x3x0zl" }]
], xC = ve("arrow-left", mC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const yC = [
  ["path", { d: "m5 12 7-7 7 7", key: "hav0vg" }],
  ["path", { d: "M12 19V5", key: "x0mq9r" }]
], bC = ve("arrow-up", yC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const wC = [
  [
    "path",
    {
      d: "M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",
      key: "hh9hay"
    }
  ],
  ["path", { d: "m3.3 7 8.7 5 8.7-5", key: "g66t2b" }],
  ["path", { d: "M12 22V12", key: "d0xqtd" }]
], SC = ve("box", wC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const CC = [
  ["path", { d: "M8 2v4", key: "1cmpym" }],
  ["path", { d: "M16 2v4", key: "4m81vk" }],
  ["rect", { width: "18", height: "18", x: "3", y: "4", rx: "2", key: "1hopcy" }],
  ["path", { d: "M3 10h18", key: "8toen8" }]
], EC = ve("calendar", CC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const _C = [["path", { d: "M20 6 9 17l-5-5", key: "1gmf2c" }]], _l = ve("check", _C);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const NC = [["path", { d: "m6 9 6 6 6-6", key: "qrunsl" }]], kn = ve("chevron-down", NC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const DC = [["path", { d: "m15 18-6-6 6-6", key: "1wnfg3" }]], hg = ve("chevron-left", DC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const RC = [["path", { d: "m9 18 6-6-6-6", key: "mthhwq" }]], ho = ve("chevron-right", RC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const MC = [["path", { d: "m18 15-6-6-6 6", key: "153udz" }]], Pd = ve("chevron-up", MC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const TC = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["line", { x1: "12", x2: "12", y1: "8", y2: "12", key: "1pkeuh" }],
  ["line", { x1: "12", x2: "12.01", y1: "16", y2: "16", key: "4dfq90" }]
], jC = ve("circle-alert", TC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const kC = [["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }]], PC = ve("circle", kC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const AC = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["polyline", { points: "12 6 12 12 16 14", key: "68esgv" }]
], Ad = ve("clock", AC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const OC = [
  ["path", { d: "M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z", key: "p7xjir" }]
], pg = ve("cloud", OC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const IC = [
  ["path", { d: "m16 18 6-6-6-6", key: "eg8j8" }],
  ["path", { d: "m8 6-6 6 6 6", key: "ppft3o" }]
], ep = ve("code", IC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const FC = [
  [
    "path",
    {
      d: "M15.536 11.293a1 1 0 0 0 0 1.414l2.376 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z",
      key: "1uwlt4"
    }
  ],
  [
    "path",
    {
      d: "M2.297 11.293a1 1 0 0 0 0 1.414l2.377 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414L6.088 8.916a1 1 0 0 0-1.414 0z",
      key: "10291m"
    }
  ],
  [
    "path",
    {
      d: "M8.916 17.912a1 1 0 0 0 0 1.415l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.415l-2.377-2.376a1 1 0 0 0-1.414 0z",
      key: "1tqoq1"
    }
  ],
  [
    "path",
    {
      d: "M8.916 4.674a1 1 0 0 0 0 1.414l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z",
      key: "1x6lto"
    }
  ]
], vg = ve("component", FC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const LC = [
  ["path", { d: "m12 15 2 2 4-4", key: "2c609p" }],
  ["rect", { width: "14", height: "14", x: "8", y: "8", rx: "2", ry: "2", key: "17jyea" }],
  ["path", { d: "M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2", key: "zix9uf" }]
], BC = ve("copy-check", LC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const zC = [
  ["rect", { width: "14", height: "14", x: "8", y: "8", rx: "2", ry: "2", key: "17jyea" }],
  ["path", { d: "M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2", key: "zix9uf" }]
], $C = ve("copy", zC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const GC = [
  ["ellipse", { cx: "12", cy: "5", rx: "9", ry: "3", key: "msslwz" }],
  ["path", { d: "M3 5V19A9 3 0 0 0 21 19V5", key: "1wlel7" }],
  ["path", { d: "M3 12A9 3 0 0 0 21 12", key: "mv7ke4" }]
], VC = ve("database", GC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const UC = [
  ["path", { d: "M12 15V3", key: "m9g1x1" }],
  ["path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4", key: "ih7n3h" }],
  ["path", { d: "m7 10 5 5 5-5", key: "brsn70" }]
], gg = ve("download", UC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const HC = [
  ["circle", { cx: "12", cy: "12", r: "1", key: "41hilf" }],
  ["circle", { cx: "19", cy: "12", r: "1", key: "1wjl8i" }],
  ["circle", { cx: "5", cy: "12", r: "1", key: "1pcz8c" }]
], WC = ve("ellipsis", HC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const YC = [
  [
    "path",
    {
      d: "M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",
      key: "ct8e1f"
    }
  ],
  ["path", { d: "M14.084 14.158a3 3 0 0 1-4.242-4.242", key: "151rxh" }],
  [
    "path",
    {
      d: "M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",
      key: "13bj9a"
    }
  ],
  ["path", { d: "m2 2 20 20", key: "1ooewy" }]
], qC = ve("eye-off", YC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const XC = [
  [
    "path",
    {
      d: "M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",
      key: "1nclc0"
    }
  ],
  ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]
], Od = ve("eye", XC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const KC = [
  ["path", { d: "M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z", key: "1rqfz7" }],
  ["path", { d: "M14 2v4a2 2 0 0 0 2 2h4", key: "tnqrlb" }],
  ["path", { d: "M8 13h2", key: "yr2amv" }],
  ["path", { d: "M14 13h2", key: "un5t4a" }],
  ["path", { d: "M8 17h2", key: "2yhykz" }],
  ["path", { d: "M14 17h2", key: "10kma7" }]
], tp = ve("file-spreadsheet", KC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const ZC = [
  ["path", { d: "M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z", key: "1rqfz7" }],
  ["path", { d: "M14 2v4a2 2 0 0 0 2 2h4", key: "tnqrlb" }],
  ["path", { d: "M10 9H8", key: "b1mrlr" }],
  ["path", { d: "M16 13H8", key: "t4e002" }],
  ["path", { d: "M16 17H8", key: "z1uh3a" }]
], QC = ve("file-text", ZC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const JC = [
  ["path", { d: "M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z", key: "1rqfz7" }],
  ["path", { d: "M14 2v4a2 2 0 0 0 2 2h4", key: "tnqrlb" }],
  ["path", { d: "m10 11 5 3-5 3v-6Z", key: "7ntvm4" }]
], mg = ve("file-video", JC);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const eE = [
  [
    "path",
    {
      d: "M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",
      key: "sc7q7i"
    }
  ]
], xg = ve("funnel", eE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const tE = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20", key: "13o1zl" }],
  ["path", { d: "M2 12h20", key: "9i4pu4" }]
], rE = ve("globe", tE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const nE = [
  ["rect", { width: "18", height: "18", x: "3", y: "3", rx: "2", key: "afitv7" }],
  ["path", { d: "M3 9h18", key: "1pudct" }],
  ["path", { d: "M3 15h18", key: "5xshup" }],
  ["path", { d: "M9 3v18", key: "fh3hqa" }],
  ["path", { d: "M15 3v18", key: "14nvp0" }]
], rp = ve("grid-3x3", nE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const oE = [
  ["circle", { cx: "9", cy: "12", r: "1", key: "1vctgf" }],
  ["circle", { cx: "9", cy: "5", r: "1", key: "hp0tcf" }],
  ["circle", { cx: "9", cy: "19", r: "1", key: "fkjjf6" }],
  ["circle", { cx: "15", cy: "12", r: "1", key: "1tmaij" }],
  ["circle", { cx: "15", cy: "5", r: "1", key: "19l28e" }],
  ["circle", { cx: "15", cy: "19", r: "1", key: "f4zoj3" }]
], yg = ve("grip-vertical", oE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const iE = [
  ["path", { d: "m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9", key: "eefl8a" }],
  ["path", { d: "m18 15 4-4", key: "16gjal" }],
  [
    "path",
    {
      d: "m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",
      key: "b7pghm"
    }
  ]
], aE = ve("hammer", iE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const sE = [
  ["path", { d: "M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2", key: "1fvzgz" }],
  ["path", { d: "M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2", key: "1kc0my" }],
  ["path", { d: "M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8", key: "10h0bg" }],
  [
    "path",
    {
      d: "M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",
      key: "1s1gnw"
    }
  ]
], lE = ve("hand", sE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const cE = [
  [
    "path",
    {
      d: "M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",
      key: "1xhozi"
    }
  ]
], uE = ve("headphones", cE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const dE = [
  ["rect", { width: "18", height: "18", x: "3", y: "3", rx: "2", ry: "2", key: "1m3agn" }],
  ["circle", { cx: "9", cy: "9", r: "2", key: "af1f0g" }],
  ["path", { d: "m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21", key: "1xmnt7" }]
], bg = ve("image", dE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const fE = [
  [
    "path",
    {
      d: "M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",
      key: "zw3jo"
    }
  ],
  [
    "path",
    {
      d: "M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",
      key: "1wduqc"
    }
  ],
  [
    "path",
    {
      d: "M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",
      key: "kqbvx6"
    }
  ]
], wg = ve("layers", fE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const hE = [
  ["rect", { width: "7", height: "7", x: "3", y: "3", rx: "1", key: "1g98yp" }],
  ["rect", { width: "7", height: "7", x: "14", y: "3", rx: "1", key: "6d4xhi" }],
  ["rect", { width: "7", height: "7", x: "14", y: "14", rx: "1", key: "nxv5o0" }],
  ["rect", { width: "7", height: "7", x: "3", y: "14", rx: "1", key: "1bb6yr" }]
], pE = ve("layout-grid", hE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const vE = [
  ["path", { d: "M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71", key: "1cjeqo" }],
  ["path", { d: "M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71", key: "19qd67" }]
], Sg = ve("link", vE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const gE = [["path", { d: "M21 12a9 9 0 1 1-6.219-8.56", key: "13zald" }]], Cg = ve("loader-circle", gE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const mE = [
  ["rect", { width: "18", height: "11", x: "3", y: "11", rx: "2", ry: "2", key: "1w4ew1" }],
  ["path", { d: "M7 11V7a5 5 0 0 1 9.9-1", key: "1mm8w8" }]
], xE = ve("lock-open", mE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const yE = [
  ["rect", { width: "18", height: "11", x: "3", y: "11", rx: "2", ry: "2", key: "1w4ew1" }],
  ["path", { d: "M7 11V7a5 5 0 0 1 10 0v4", key: "fwvmzm" }]
], Id = ve("lock", yE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const bE = [
  [
    "path",
    {
      d: "m6 15-4-4 6.75-6.77a7.79 7.79 0 0 1 11 11L13 22l-4-4 6.39-6.36a2.14 2.14 0 0 0-3-3L6 15",
      key: "1i3lhw"
    }
  ],
  ["path", { d: "m5 8 4 4", key: "j6kj7e" }],
  ["path", { d: "m12 15 4 4", key: "lnac28" }]
], wE = ve("magnet", bE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const SE = [
  ["path", { d: "M7.9 20A9 9 0 1 0 4 16.1L2 22Z", key: "vv11sd" }],
  ["path", { d: "M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3", key: "1u773s" }],
  ["path", { d: "M12 17h.01", key: "p32p05" }]
], CE = ve("message-circle-question-mark", SE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const EE = [
  ["path", { d: "M12 19v3", key: "npa21l" }],
  ["path", { d: "M19 10v2a7 7 0 0 1-14 0v-2", key: "1vc78b" }],
  ["rect", { x: "9", y: "2", width: "6", height: "13", rx: "3", key: "s6n7sd" }]
], _E = ve("mic", EE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const NE = [
  ["path", { d: "M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z", key: "a7tn18" }]
], DE = ve("moon", NE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const RE = [
  [
    "path",
    {
      d: "M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",
      key: "edeuup"
    }
  ]
], ME = ve("mouse-pointer-2", RE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const TE = [
  ["path", { d: "M12.586 12.586 19 19", key: "ea5xo7" }],
  [
    "path",
    {
      d: "M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",
      key: "277e5u"
    }
  ]
], np = ve("mouse-pointer", TE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const jE = [
  ["path", { d: "M12 2v20", key: "t6zp3m" }],
  ["path", { d: "m15 19-3 3-3-3", key: "11eu04" }],
  ["path", { d: "m19 9 3 3-3 3", key: "1mg7y2" }],
  ["path", { d: "M2 12h20", key: "9i4pu4" }],
  ["path", { d: "m5 9-3 3 3 3", key: "j64kie" }],
  ["path", { d: "m9 5 3-3 3 3", key: "l8vdw6" }]
], Nl = ve("move", jE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const kE = [
  ["path", { d: "M9 18V5l12-2v13", key: "1jmyc2" }],
  ["circle", { cx: "6", cy: "18", r: "3", key: "fqmcym" }],
  ["circle", { cx: "18", cy: "16", r: "3", key: "1hluhg" }]
], Eg = ve("music", kE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const PE = [
  [
    "path",
    {
      d: "M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",
      key: "1a0edw"
    }
  ],
  ["path", { d: "M12 22V12", key: "d0xqtd" }],
  ["polyline", { points: "3.29 7 12 12 20.71 7", key: "ousv84" }],
  ["path", { d: "m7.5 4.27 9 5.15", key: "1c824w" }]
], AE = ve("package", PE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const OE = [
  [
    "path",
    {
      d: "M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",
      key: "e79jfc"
    }
  ],
  ["circle", { cx: "13.5", cy: "6.5", r: ".5", fill: "currentColor", key: "1okk4w" }],
  ["circle", { cx: "17.5", cy: "10.5", r: ".5", fill: "currentColor", key: "f64h9f" }],
  ["circle", { cx: "6.5", cy: "12.5", r: ".5", fill: "currentColor", key: "qy21gx" }],
  ["circle", { cx: "8.5", cy: "7.5", r: ".5", fill: "currentColor", key: "fotxhn" }]
], _g = ve("palette", OE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const IE = [
  ["rect", { x: "14", y: "4", width: "4", height: "16", rx: "1", key: "zuxfzm" }],
  ["rect", { x: "6", y: "4", width: "4", height: "16", rx: "1", key: "1okwgv" }]
], Ng = ve("pause", IE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const FE = [["polygon", { points: "6 3 20 12 6 21 6 3", key: "1oa8hb" }]], Zn = ve("play", FE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const LE = [
  ["path", { d: "M5 12h14", key: "1ays0h" }],
  ["path", { d: "M12 5v14", key: "s699le" }]
], Vo = ve("plus", LE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const BE = [
  ["rect", { width: "5", height: "5", x: "3", y: "3", rx: "1", key: "1tu5fj" }],
  ["rect", { width: "5", height: "5", x: "16", y: "3", rx: "1", key: "1v8r4q" }],
  ["rect", { width: "5", height: "5", x: "3", y: "16", rx: "1", key: "1x03jg" }],
  ["path", { d: "M21 16h-3a2 2 0 0 0-2 2v3", key: "177gqh" }],
  ["path", { d: "M21 21v.01", key: "ents32" }],
  ["path", { d: "M12 7v3a2 2 0 0 1-2 2H7", key: "8crl2c" }],
  ["path", { d: "M3 12h.01", key: "nlz23k" }],
  ["path", { d: "M12 3h.01", key: "n36tog" }],
  ["path", { d: "M12 16v.01", key: "133mhm" }],
  ["path", { d: "M16 12h1", key: "1slzba" }],
  ["path", { d: "M21 12v.01", key: "1lwtk9" }],
  ["path", { d: "M12 21v-1", key: "1880an" }]
], Pr = ve("qr-code", BE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const zE = [
  ["path", { d: "M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8", key: "1357e3" }],
  ["path", { d: "M3 3v5h5", key: "1xhq8a" }]
], $E = ve("rotate-ccw", zE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const GE = [
  ["path", { d: "m21 21-4.34-4.34", key: "14j7rj" }],
  ["circle", { cx: "11", cy: "11", r: "8", key: "4ej97u" }]
], Dg = ve("search", GE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const VE = [
  [
    "path",
    {
      d: "M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",
      key: "1qme2f"
    }
  ],
  ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]
], ci = ve("settings", VE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const UE = [
  ["circle", { cx: "18", cy: "5", r: "3", key: "gq8acd" }],
  ["circle", { cx: "6", cy: "12", r: "3", key: "w7nqdw" }],
  ["circle", { cx: "18", cy: "19", r: "3", key: "1xt0gg" }],
  ["line", { x1: "8.59", x2: "15.42", y1: "13.51", y2: "17.49", key: "47mynk" }],
  ["line", { x1: "15.41", x2: "8.59", y1: "6.51", y2: "10.49", key: "1n3mei" }]
], op = ve("share-2", UE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const HE = [
  [
    "path",
    {
      d: "M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",
      key: "4pj2yx"
    }
  ],
  ["path", { d: "M20 3v4", key: "1olli1" }],
  ["path", { d: "M22 5h-4", key: "1gvqau" }],
  ["path", { d: "M4 17v2", key: "vumght" }],
  ["path", { d: "M5 18H3", key: "zchphs" }]
], la = ve("sparkles", HE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const WE = [
  ["circle", { cx: "12", cy: "12", r: "4", key: "4exip2" }],
  ["path", { d: "M12 2v2", key: "tus03m" }],
  ["path", { d: "M12 20v2", key: "1lh1kg" }],
  ["path", { d: "m4.93 4.93 1.41 1.41", key: "149t6j" }],
  ["path", { d: "m17.66 17.66 1.41 1.41", key: "ptbguv" }],
  ["path", { d: "M2 12h2", key: "1t8f8n" }],
  ["path", { d: "M20 12h2", key: "1q8mjw" }],
  ["path", { d: "m6.34 17.66-1.41 1.41", key: "1m8zz5" }],
  ["path", { d: "m19.07 4.93-1.41 1.41", key: "1shlcs" }]
], ip = ve("sun", WE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const YE = [
  ["path", { d: "M3 6h18", key: "d0wm0j" }],
  ["path", { d: "M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6", key: "4alrt4" }],
  ["path", { d: "M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2", key: "v07s0e" }],
  ["line", { x1: "10", x2: "10", y1: "11", y2: "17", key: "1uufr5" }],
  ["line", { x1: "14", x2: "14", y1: "11", y2: "17", key: "xtxkd" }]
], Dl = ve("trash-2", YE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const qE = [
  ["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }],
  ["path", { d: "M16 3.128a4 4 0 0 1 0 7.744", key: "16gr8j" }],
  ["path", { d: "M22 21v-2a4 4 0 0 0-3-3.87", key: "kshegd" }],
  ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }]
], XE = ve("users", qE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const KE = [
  ["path", { d: "M18 6 6 18", key: "1bl5f8" }],
  ["path", { d: "m6 6 12 12", key: "d8bk6v" }]
], Rl = ve("x", KE);
/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const ZE = [
  [
    "path",
    {
      d: "M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",
      key: "1xq2db"
    }
  ]
], Fd = ve("zap", ZE);
var At = /* @__PURE__ */ ((e) => (e.Sidebar = "sidebar", e.Panel = "panel", e.AuxiliaryBar = "auxiliarybar", e.TitleBar = "titlebar", e))(At || {});
const ap = (e) => ({
  id: e.id,
  title: e.title,
  order: e.order,
  isDefault: !0,
  isRemovable: !1,
  viewContainer: ({ context: t }) => {
    const r = e.viewContainer;
    return Me.createElement(r, { context: t });
  }
}), or = Mr((e, t) => ({
  views: {
    sidebar: [],
    panel: [],
    auxiliarybar: [],
    titlebar: []
  },
  initialized: !1,
  initialize: (r) => {
    if (t().initialized || !r?.viewsContainers) return;
    const n = r.viewsContainers, o = t().views;
    if (n.sidebar) {
      const i = n.sidebar.map(ap).sort((a, s) => (a.order ?? 0) - (s.order ?? 0));
      o.sidebar = [
        ...o.sidebar,
        ...i
      ];
    }
    if (n.titlebar) {
      const i = n.titlebar.map(ap).sort((a, s) => (a.order ?? 0) - (s.order ?? 0));
      o.titlebar = [
        ...o.titlebar,
        ...i
      ];
    }
    e({ views: o, initialized: !0 });
  },
  registerViewContainer: (r, n) => e((o) => o.views[n] && o.views[n].some((i) => i.id === r.id) ? o : {
    views: {
      ...o.views,
      [n]: [...o.views[n], r]
    }
  }),
  registerExtensionViewContainer: (r) => e((n) => n.views.sidebar && n.views.sidebar.some((o) => o.id === r.id) ? n : {
    views: {
      ...n.views,
      sidebar: [
        ...n.views.sidebar,
        {
          ...r,
          isRemovable: !0
        }
      ]
    }
  }),
  getViewsByLocation: (r) => {
    const i = [...(t().views[r] ?? []).filter((l) => !l.hidden)].sort((l, c) => l.order !== void 0 && c.order !== void 0 ? l.order - c.order : l.order !== void 0 ? -1 : c.order !== void 0 ? 1 : 0), a = i.filter((l) => l.isRemovable);
    return [...i.filter((l) => !l.isRemovable), ...a];
  },
  getViewContainer: (r) => t().views.sidebar.find((i) => i.id === r),
  unregisterViewContainer(r) {
    e((n) => {
      const o = n.views.sidebar, i = o.findIndex((a) => a.id === r);
      return i !== -1 && o.splice(i, 1), {
        views: {
          ...n.views,
          sidebar: o
        }
      };
    });
  }
})), QE = () => or.getState().getViewsByLocation(
  "sidebar"
  /* Sidebar */
), JE = (e) => or.getState().getViewContainer(e);
function Tr(e, t) {
  or.getState().registerViewContainer(e, t);
}
const e2 = ({ icon: e }) => {
  let t = null;
  if (typeof e == "string") {
    const r = e.startsWith("data:") || e.startsWith("http");
    t = /* @__PURE__ */ f.jsx("span", { className: "w-8 h-8 text-lg inline-flex items-center justify-center", children: r ? /* @__PURE__ */ f.jsx("img", { src: e, alt: "Chart icon", className: "w-10 h-10 object-contain" }) : e });
  } else {
    const r = e;
    e && (t = /* @__PURE__ */ f.jsx("span", { className: "w-10 h-10 text-lg inline-flex items-center justify-center", children: /* @__PURE__ */ f.jsx(r, { className: "w-8 h-8" }) }));
  }
  return /* @__PURE__ */ f.jsx("div", { className: "flex justify-center items-center", children: t });
}, t2 = ({
  chart: e,
  onDragStart: t,
  onClick: r
}) => /* @__PURE__ */ f.jsxs(
  "div",
  {
    className: "rounded-lg p-1.5 cursor-move hover:bg-gray-100/50 transition-colors border border-gray-200",
    draggable: !0,
    onDragStart: (n) => t(n, e),
    onClick: () => r(e),
    children: [
      /* @__PURE__ */ f.jsx(e2, { icon: e.icon }),
      /* @__PURE__ */ f.jsxs("div", { className: "mt-1 text-center", children: [
        /* @__PURE__ */ f.jsx("div", { className: "font-medium text-sm leading-tight", children: e.title }),
        /* @__PURE__ */ f.jsx("div", { className: "text-xs text-gray-500 mt-0.5 line-clamp-1", title: e.description, children: e.description })
      ] })
    ]
  },
  e.type
), Rg = ({ components: e, handleDragStart: t, handleAddChart: r }) => /* @__PURE__ */ f.jsx("div", { className: "space-y-4", children: /* @__PURE__ */ f.jsx("div", { className: "grid grid-cols-2 sm:grid-cols-2 md:grid-cols-2 gap-3", children: e.map((n) => /* @__PURE__ */ f.jsx(
  t2,
  {
    chart: n,
    onDragStart: t,
    onClick: r
  },
  n.type
)) }) }), r2 = () => {
  const e = br(), { createNodeByManifest: t } = ke(), r = xu(() => e.all(), [e]), n = nr((i, a) => {
    i.dataTransfer.setData("chart-type", a.type);
  }, []), o = nr(
    (i) => {
      t(i);
    },
    [t]
  );
  return /* @__PURE__ */ f.jsxs("div", { className: "pb-4 flex flex-col h-full", children: [
    /* @__PURE__ */ f.jsx("h2", { className: "text-xl font-bold sticky top-0 z-20 bg-white py-2", children: "Components" }),
    /* @__PURE__ */ f.jsx("div", { className: "space-y-6 flex-1 overflow-y-auto veltix-scrollbar", children: /* @__PURE__ */ f.jsx(Rg, { components: r, handleDragStart: n, handleAddChart: o }) })
  ] });
}, n2 = () => {
  Tr(
    {
      id: "components",
      title: "Components",
      icon: vg,
      viewContainer: () => /* @__PURE__ */ f.jsx(r2, {}),
      order: 1
    },
    At.Sidebar
  );
}, o2 = ({ components: e, title: t }) => {
  const { createNodeByManifest: r } = ke(), n = nr((i, a) => {
    i.dataTransfer.setData("chart-type", a.type);
  }, []), o = nr(
    (i) => {
      r(i);
    },
    [r]
  );
  return /* @__PURE__ */ f.jsxs("div", { className: "pb-4 flex flex-col h-full", children: [
    /* @__PURE__ */ f.jsx("h2", { className: "text-xl font-bold sticky top-0 z-20 bg-white py-2", children: t }),
    /* @__PURE__ */ f.jsx("div", { className: "space-y-6 flex-1 overflow-y-auto veltix-scrollbar", children: /* @__PURE__ */ f.jsx(Rg, { components: e, handleDragStart: n, handleAddChart: o }) })
  ] });
}, i2 = (e) => {
  if (!e || e.length === 0) return { flattenedComponents: [], groups: [] };
  const t = [], r = [];
  for (const n of e)
    "type" in n ? t.push(n) : (t.push(...n.components), r.push(n));
  return { flattenedComponents: t, groups: r };
}, a2 = (e) => () => Me.createElement(o2, { components: e.components, title: e.title });
function s2(e) {
  const t = or.getState();
  e.forEach((r, n) => {
    t.registerViewContainer(
      {
        id: `group-${r.id}`,
        title: r.title,
        icon: r.icon,
        viewContainer: a2(r),
        order: n + 1,
        isRemovable: !1
      },
      At.Sidebar
    );
  });
}
const br = Mr((e, t) => ({
  initialize: (r) => {
    const { flattenedComponents: n, groups: o } = i2(r);
    o.length === 0 && n.length > 0 && n2();
    const i = /* @__PURE__ */ new Map();
    o.forEach((a) => {
      a.components.forEach((s) => {
        i.set(s.type, a.id);
      });
    }), e((a) => {
      const s = new Map(a.components);
      return n.forEach((l) => {
        s.set(l.type, l);
      }), {
        components: s,
        componentGroups: i
      };
    }), s2(o);
  },
  components: /* @__PURE__ */ new Map(),
  componentGroups: /* @__PURE__ */ new Map(),
  register: (r) => {
    if (t().components.has(r.type))
      throw new Error(`Component "${r.type}" is already registered`);
    e((o) => {
      const i = new Map(o.components);
      return i.set(r.type, r), { components: i };
    });
  },
  get: (r) => t().components.get(r),
  has: (r) => t().components.has(r),
  unregister: (r) => {
    if (!t().components.has(r))
      throw new Error(`Component "${r}" is not registered`);
    e((o) => {
      const i = new Map(o.components);
      return i.delete(r), { components: i };
    });
  },
  getRegisteredNames: () => {
    const r = t();
    return Array.from(r.components.keys());
  },
  clear: () => {
    e({ components: /* @__PURE__ */ new Map(), componentGroups: /* @__PURE__ */ new Map() });
  },
  all: (r = !0) => {
    const n = t(), i = Array.from(n.components.values()).filter((a) => !a.hidden);
    return r ? i.filter((a) => !n.componentGroups.get(a.type)) : i;
  }
})), l2 = (e) => br().get(e)?.eventConfigSchema, Mg = (e) => br().get(e), Ml = Mr((e) => ({
  api: null,
  initialize: (t) => e({ api: t })
}));
function Tg(e, t) {
  const r = [], n = [], o = [], i = [], a = (h, p = "") => {
    const g = [];
    return h == null ? [p] : typeof h != "object" ? [p] : (Array.isArray(h) ? h.forEach((v, m) => {
      const x = p ? `${p}[${m}]` : `[${m}]`;
      g.push(x), g.push(...a(v, x));
    }) : Object.keys(h).forEach((v) => {
      const m = p ? `${p}.${v}` : v;
      g.push(m), g.push(...a(h[v], m));
    }), g);
  }, s = (h, p) => {
    if (!p) return h;
    const g = p.split(/[.\[\]]/).filter(Boolean);
    let v = h;
    for (const m of g) {
      if (v == null) return;
      if (Array.isArray(v)) {
        const x = parseInt(m);
        if (isNaN(x)) return;
        v = v[x];
      } else
        v = v[m];
    }
    return v;
  }, l = (h, p) => h === p ? !0 : h === null || p === null ? h === p : typeof h != typeof p ? !1 : typeof h == "object" ? JSON.stringify(h) === JSON.stringify(p) : !1, c = new Set(a(e)), u = new Set(a(t)), d = /* @__PURE__ */ new Set([...c, ...u]);
  for (const h of d) {
    const p = s(e, h), g = s(t, h), v = c.has(h), m = u.has(h);
    !v && m ? r.push(h) : v && !m ? n.push(h) : v && m && (l(p, g) ? i.push(h) : o.push(h));
  }
  return {
    added: r,
    removed: n,
    modified: o,
    unchanged: i,
    summary: {
      totalChanges: r.length + n.length + o.length,
      additions: r.length,
      deletions: n.length,
      modifications: o.length
    }
  };
}
function c2(e) {
  const { summary: t, added: r, removed: n, modified: o } = e;
  if (t.totalChanges === 0)
    return "No changes detected";
  const i = [];
  return t.additions > 0 && i.push(`${t.additions} addition${t.additions > 1 ? "s" : ""}`), t.deletions > 0 && i.push(`${t.deletions} deletion${t.deletions > 1 ? "s" : ""}`), t.modifications > 0 && i.push(`${t.modifications} modification${t.modifications > 1 ? "s" : ""}`), i.join(", ");
}
function u2(e, t) {
  return Tg(e, t).summary.totalChanges > 0;
}
const Tc = {
  compareJson: Tg,
  getDiffSummary: c2,
  hasChanges: u2
}, Ld = Mr((e, t) => {
  const r = () => {
    const { unsubscribe: n } = t();
    n && n();
    const o = ke.subscribe(
      // This callback will be called whenever the json state changes
      () => {
        t().projectId && !t().isInitialLoad && t().markForSave(), t().isInitialLoad && e({ isInitialLoad: !1 });
      }
    );
    e({ unsubscribe: o });
  };
  return {
    status: "idle",
    lastSaved: null,
    error: null,
    pendingSave: !1,
    saveTimeout: null,
    projectId: null,
    unsubscribe: null,
    isInitialLoad: !0,
    lastSavedJson: null,
    diffResult: null,
    watch: (n) => {
      e({ projectId: n });
      const { json: o } = ke.getState();
      o && e({ lastSavedJson: o }), r();
    },
    markForSave: () => {
      const { saveTimeout: n, pendingSave: o, lastSavedJson: i } = t(), { json: a } = ke.getState();
      if (o) return;
      if (i && a) {
        const l = Tc.compareJson(i, a);
        if (l.summary.totalChanges === 0) {
          console.log("No changes detected, skipping save");
          return;
        }
        console.log("Changes detected:", Tc.getDiffSummary(l)), console.log("Detailed changes:", l), e({ diffResult: l });
      }
      n && clearTimeout(n);
      const s = setTimeout(() => {
        t().saveNow();
      }, 2e3);
      e({
        pendingSave: !0,
        saveTimeout: s,
        status: "idle"
      });
    },
    saveNow: async () => {
      const { projectId: n, saveTimeout: o } = t(), { api: i } = Ml.getState(), a = ke.getState().json;
      if (!(!n || !a || !i)) {
        o && clearTimeout(o), e({ status: "saving", saveTimeout: null });
        try {
          await i.updateProject(n, a), e({
            status: "saved",
            lastSaved: /* @__PURE__ */ new Date(),
            pendingSave: !1,
            error: null,
            lastSavedJson: a,
            diffResult: null
          }), setTimeout(() => {
            e((s) => s.status === "saved" ? { status: "idle" } : {});
          }, 3e3);
        } catch (s) {
          e({
            status: "error",
            pendingSave: !1,
            error: s
          });
        }
      }
    },
    clearSaveState: () => {
      const { saveTimeout: n, unsubscribe: o } = t();
      n && clearTimeout(n), o && o(), e({
        status: "idle",
        pendingSave: !1,
        saveTimeout: null,
        error: null,
        unsubscribe: null,
        isInitialLoad: !0,
        lastSavedJson: null,
        diffResult: null
      });
    },
    getDiffSummary: () => {
      const { diffResult: n } = t();
      return n ? Tc.getDiffSummary(n) : "No changes detected";
    }
  };
}), Bt = Mr()(
  jd(
    (e) => ({
      activePanelId: null,
      layout: {
        sidebar: {
          visible: !0
        }
      },
      setActivePanel: (t) => e({
        activePanelId: t,
        layout: {
          sidebar: {
            visible: t !== ""
          }
        }
      }),
      // 选中的目标元素 (来自 Editor.tsx)
      selectedTargets: [],
      // 初始缩放状态 (来自 canvasStore)
      zoom: 1,
      isPinching: !1,
      isDragging: !1,
      // 画布位置和状态初始值
      position: { x: 0, y: 0 },
      spacePressed: !1,
      dragStart: { x: 0, y: 0 },
      isTouchPadDragging: !1,
      cursorMode: "arrow",
      // 初始辅助线状态 (来自 guidesStore)
      guidesSize: 20,
      showHorizontalGuides: !0,
      showVerticalGuides: !0,
      horizontalGuides: [],
      verticalGuides: [],
      // 默认选择模式
      mode: "select",
      // AI 聊天状态
      isAiChatOpen: !1,
      setIsAiChatOpen: (t) => e({ isAiChatOpen: t }),
      // 选中目标操作方法
      setSelectedTargets: (t) => e({ selectedTargets: t }),
      // 缩放操作方法 (来自 canvasStore)
      setZoom: (t) => e({ zoom: t }),
      zoomIn: () => e((t) => ({
        zoom: Math.min(t.zoom + 0.1, 3)
      })),
      zoomOut: () => e((t) => ({
        zoom: Math.max(t.zoom - 0.1, 0.1)
      })),
      resetZoom: () => e({ zoom: 1 }),
      setPinching: (t) => e({ isPinching: t }),
      handlePinch: (t) => e((r) => ({
        zoom: Math.max(0.1, Math.min(3, r.zoom * t))
      })),
      setDragging: (t) => e({ isDragging: t }),
      // 画布位置和状态控制方法
      setCanvasState: (t) => e((r) => ({
        ...r,
        ...t
      })),
      setSpacePressed: (t) => e({ spacePressed: t }),
      setDragStart: (t) => e({ dragStart: t }),
      setIsTouchPadDragging: (t) => e({ isTouchPadDragging: t }),
      setCursorMode: (t) => e({ cursorMode: t }),
      // 设置操作模式
      setMode: (t) => e({ mode: t }),
      // 辅助线操作方法 (来自 guidesStore)
      toggleHorizontalGuides: () => e((t) => ({
        showHorizontalGuides: !t.showHorizontalGuides
      })),
      toggleVerticalGuides: () => e((t) => ({
        showVerticalGuides: !t.showVerticalGuides
      })),
      setHorizontalGuides: (t) => e({ horizontalGuides: t }),
      setVerticalGuides: (t) => e({ verticalGuides: t }),
      // 新增：从 Editor.tsx 移植的方法
      checkBlur: () => {
      },
      setSelectedTargetsElements: async (t, r = !1, n, o) => {
        console.log("isRestore", r), t = t.filter((a) => t.every((s) => s === a || !s.contains(a)));
        const i = t.map((a) => a.dataset.scenaElementId);
        return e({ selectedTargets: i }), o && o.setSelectedTargets(t), n && n.setSelectedTargets(t), t;
      },
      selectEndMaker: (t, r) => {
        if (!r) return !1;
        const n = r.getSelected?.(), o = t.width, i = t.height;
        return !(!n || !n.maker || !o || !i);
      },
      toggleGuides: () => {
        e((t) => ({
          showHorizontalGuides: !t.showHorizontalGuides,
          showVerticalGuides: !t.showVerticalGuides
        }));
      },
      setIsDragging(t) {
        e({ isDragging: t });
      }
    }),
    {
      name: "veltix-ui",
      storage: El(() => localStorage),
      partialize: (e) => ({
        zoom: e.zoom,
        // showHorizontalGuides: state.showHorizontalGuides,
        // showVerticalGuides: state.showVerticalGuides,
        // horizontalGuides: state.horizontalGuides,
        // verticalGuides: state.verticalGuides,
        // selectedTargets: state.selectedTargets,
        mode: e.mode,
        cursorMode: e.cursorMode,
        position: e.position,
        activePanelId: e.activePanelId
      })
      // 持久化 zoom、辅助线相关状态、选中目标、光标模式、位置和活动面板ID
    }
  )
);
function jg(e) {
  var t, r, n = "";
  if (typeof e == "string" || typeof e == "number") n += e;
  else if (typeof e == "object") if (Array.isArray(e)) {
    var o = e.length;
    for (t = 0; t < o; t++) e[t] && (r = jg(e[t])) && (n && (n += " "), n += r);
  } else for (r in e) e[r] && (n && (n += " "), n += r);
  return n;
}
function ca() {
  for (var e, t, r = 0, n = "", o = arguments.length; r < o; r++) (e = arguments[r]) && (t = jg(e)) && (n && (n += " "), n += t);
  return n;
}
const Bd = "-", d2 = (e) => {
  const t = h2(e), {
    conflictingClassGroups: r,
    conflictingClassGroupModifiers: n
  } = e;
  return {
    getClassGroupId: (a) => {
      const s = a.split(Bd);
      return s[0] === "" && s.length !== 1 && s.shift(), kg(s, t) || f2(a);
    },
    getConflictingClassGroupIds: (a, s) => {
      const l = r[a] || [];
      return s && n[a] ? [...l, ...n[a]] : l;
    }
  };
}, kg = (e, t) => {
  if (e.length === 0)
    return t.classGroupId;
  const r = e[0], n = t.nextPart.get(r), o = n ? kg(e.slice(1), n) : void 0;
  if (o)
    return o;
  if (t.validators.length === 0)
    return;
  const i = e.join(Bd);
  return t.validators.find(({
    validator: a
  }) => a(i))?.classGroupId;
}, sp = /^\[(.+)\]$/, f2 = (e) => {
  if (sp.test(e)) {
    const t = sp.exec(e)[1], r = t?.substring(0, t.indexOf(":"));
    if (r)
      return "arbitrary.." + r;
  }
}, h2 = (e) => {
  const {
    theme: t,
    prefix: r
  } = e, n = {
    nextPart: /* @__PURE__ */ new Map(),
    validators: []
  };
  return v2(Object.entries(e.classGroups), r).forEach(([i, a]) => {
    bu(a, n, i, t);
  }), n;
}, bu = (e, t, r, n) => {
  e.forEach((o) => {
    if (typeof o == "string") {
      const i = o === "" ? t : lp(t, o);
      i.classGroupId = r;
      return;
    }
    if (typeof o == "function") {
      if (p2(o)) {
        bu(o(n), t, r, n);
        return;
      }
      t.validators.push({
        validator: o,
        classGroupId: r
      });
      return;
    }
    Object.entries(o).forEach(([i, a]) => {
      bu(a, lp(t, i), r, n);
    });
  });
}, lp = (e, t) => {
  let r = e;
  return t.split(Bd).forEach((n) => {
    r.nextPart.has(n) || r.nextPart.set(n, {
      nextPart: /* @__PURE__ */ new Map(),
      validators: []
    }), r = r.nextPart.get(n);
  }), r;
}, p2 = (e) => e.isThemeGetter, v2 = (e, t) => t ? e.map(([r, n]) => {
  const o = n.map((i) => typeof i == "string" ? t + i : typeof i == "object" ? Object.fromEntries(Object.entries(i).map(([a, s]) => [t + a, s])) : i);
  return [r, o];
}) : e, g2 = (e) => {
  if (e < 1)
    return {
      get: () => {
      },
      set: () => {
      }
    };
  let t = 0, r = /* @__PURE__ */ new Map(), n = /* @__PURE__ */ new Map();
  const o = (i, a) => {
    r.set(i, a), t++, t > e && (t = 0, n = r, r = /* @__PURE__ */ new Map());
  };
  return {
    get(i) {
      let a = r.get(i);
      if (a !== void 0)
        return a;
      if ((a = n.get(i)) !== void 0)
        return o(i, a), a;
    },
    set(i, a) {
      r.has(i) ? r.set(i, a) : o(i, a);
    }
  };
}, Pg = "!", m2 = (e) => {
  const {
    separator: t,
    experimentalParseClassName: r
  } = e, n = t.length === 1, o = t[0], i = t.length, a = (s) => {
    const l = [];
    let c = 0, u = 0, d;
    for (let m = 0; m < s.length; m++) {
      let x = s[m];
      if (c === 0) {
        if (x === o && (n || s.slice(m, m + i) === t)) {
          l.push(s.slice(u, m)), u = m + i;
          continue;
        }
        if (x === "/") {
          d = m;
          continue;
        }
      }
      x === "[" ? c++ : x === "]" && c--;
    }
    const h = l.length === 0 ? s : s.substring(u), p = h.startsWith(Pg), g = p ? h.substring(1) : h, v = d && d > u ? d - u : void 0;
    return {
      modifiers: l,
      hasImportantModifier: p,
      baseClassName: g,
      maybePostfixModifierPosition: v
    };
  };
  return r ? (s) => r({
    className: s,
    parseClassName: a
  }) : a;
}, x2 = (e) => {
  if (e.length <= 1)
    return e;
  const t = [];
  let r = [];
  return e.forEach((n) => {
    n[0] === "[" ? (t.push(...r.sort(), n), r = []) : r.push(n);
  }), t.push(...r.sort()), t;
}, y2 = (e) => ({
  cache: g2(e.cacheSize),
  parseClassName: m2(e),
  ...d2(e)
}), b2 = /\s+/, w2 = (e, t) => {
  const {
    parseClassName: r,
    getClassGroupId: n,
    getConflictingClassGroupIds: o
  } = t, i = [], a = e.trim().split(b2);
  let s = "";
  for (let l = a.length - 1; l >= 0; l -= 1) {
    const c = a[l], {
      modifiers: u,
      hasImportantModifier: d,
      baseClassName: h,
      maybePostfixModifierPosition: p
    } = r(c);
    let g = !!p, v = n(g ? h.substring(0, p) : h);
    if (!v) {
      if (!g) {
        s = c + (s.length > 0 ? " " + s : s);
        continue;
      }
      if (v = n(h), !v) {
        s = c + (s.length > 0 ? " " + s : s);
        continue;
      }
      g = !1;
    }
    const m = x2(u).join(":"), x = d ? m + Pg : m, y = x + v;
    if (i.includes(y))
      continue;
    i.push(y);
    const b = o(v, g);
    for (let w = 0; w < b.length; ++w) {
      const _ = b[w];
      i.push(x + _);
    }
    s = c + (s.length > 0 ? " " + s : s);
  }
  return s;
};
function S2() {
  let e = 0, t, r, n = "";
  for (; e < arguments.length; )
    (t = arguments[e++]) && (r = Ag(t)) && (n && (n += " "), n += r);
  return n;
}
const Ag = (e) => {
  if (typeof e == "string")
    return e;
  let t, r = "";
  for (let n = 0; n < e.length; n++)
    e[n] && (t = Ag(e[n])) && (r && (r += " "), r += t);
  return r;
};
function C2(e, ...t) {
  let r, n, o, i = a;
  function a(l) {
    const c = t.reduce((u, d) => d(u), e());
    return r = y2(c), n = r.cache.get, o = r.cache.set, i = s, s(l);
  }
  function s(l) {
    const c = n(l);
    if (c)
      return c;
    const u = w2(l, r);
    return o(l, u), u;
  }
  return function() {
    return i(S2.apply(null, arguments));
  };
}
const Ze = (e) => {
  const t = (r) => r[e] || [];
  return t.isThemeGetter = !0, t;
}, Og = /^\[(?:([a-z-]+):)?(.+)\]$/i, E2 = /^\d+\/\d+$/, _2 = /* @__PURE__ */ new Set(["px", "full", "screen"]), N2 = /^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/, D2 = /\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/, R2 = /^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/, M2 = /^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/, T2 = /^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/, en = (e) => Fo(e) || _2.has(e) || E2.test(e), dn = (e) => ui(e, "length", L2), Fo = (e) => !!e && !Number.isNaN(Number(e)), jc = (e) => ui(e, "number", Fo), Mi = (e) => !!e && Number.isInteger(Number(e)), j2 = (e) => e.endsWith("%") && Fo(e.slice(0, -1)), Oe = (e) => Og.test(e), fn = (e) => N2.test(e), k2 = /* @__PURE__ */ new Set(["length", "size", "percentage"]), P2 = (e) => ui(e, k2, Ig), A2 = (e) => ui(e, "position", Ig), O2 = /* @__PURE__ */ new Set(["image", "url"]), I2 = (e) => ui(e, O2, z2), F2 = (e) => ui(e, "", B2), Ti = () => !0, ui = (e, t, r) => {
  const n = Og.exec(e);
  return n ? n[1] ? typeof t == "string" ? n[1] === t : t.has(n[1]) : r(n[2]) : !1;
}, L2 = (e) => (
  // `colorFunctionRegex` check is necessary because color functions can have percentages in them which which would be incorrectly classified as lengths.
  // For example, `hsl(0 0% 0%)` would be classified as a length without this check.
  // I could also use lookbehind assertion in `lengthUnitRegex` but that isn't supported widely enough.
  D2.test(e) && !R2.test(e)
), Ig = () => !1, B2 = (e) => M2.test(e), z2 = (e) => T2.test(e), $2 = () => {
  const e = Ze("colors"), t = Ze("spacing"), r = Ze("blur"), n = Ze("brightness"), o = Ze("borderColor"), i = Ze("borderRadius"), a = Ze("borderSpacing"), s = Ze("borderWidth"), l = Ze("contrast"), c = Ze("grayscale"), u = Ze("hueRotate"), d = Ze("invert"), h = Ze("gap"), p = Ze("gradientColorStops"), g = Ze("gradientColorStopPositions"), v = Ze("inset"), m = Ze("margin"), x = Ze("opacity"), y = Ze("padding"), b = Ze("saturate"), w = Ze("scale"), _ = Ze("sepia"), R = Ze("skew"), T = Ze("space"), k = Ze("translate"), j = () => ["auto", "contain", "none"], A = () => ["auto", "hidden", "clip", "visible", "scroll"], $ = () => ["auto", Oe, t], F = () => [Oe, t], L = () => ["", en, dn], P = () => ["auto", Fo, Oe], O = () => ["bottom", "center", "left", "left-bottom", "left-top", "right", "right-bottom", "right-top", "top"], I = () => ["solid", "dashed", "dotted", "double", "none"], E = () => ["normal", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "hue", "saturation", "color", "luminosity"], S = () => ["start", "end", "center", "between", "around", "evenly", "stretch"], M = () => ["", "0", Oe], D = () => ["auto", "avoid", "all", "avoid-page", "page", "left", "right", "column"], N = () => [Fo, Oe];
  return {
    cacheSize: 500,
    separator: ":",
    theme: {
      colors: [Ti],
      spacing: [en, dn],
      blur: ["none", "", fn, Oe],
      brightness: N(),
      borderColor: [e],
      borderRadius: ["none", "", "full", fn, Oe],
      borderSpacing: F(),
      borderWidth: L(),
      contrast: N(),
      grayscale: M(),
      hueRotate: N(),
      invert: M(),
      gap: F(),
      gradientColorStops: [e],
      gradientColorStopPositions: [j2, dn],
      inset: $(),
      margin: $(),
      opacity: N(),
      padding: F(),
      saturate: N(),
      scale: N(),
      sepia: M(),
      skew: N(),
      space: F(),
      translate: F()
    },
    classGroups: {
      // Layout
      /**
       * Aspect Ratio
       * @see https://tailwindcss.com/docs/aspect-ratio
       */
      aspect: [{
        aspect: ["auto", "square", "video", Oe]
      }],
      /**
       * Container
       * @see https://tailwindcss.com/docs/container
       */
      container: ["container"],
      /**
       * Columns
       * @see https://tailwindcss.com/docs/columns
       */
      columns: [{
        columns: [fn]
      }],
      /**
       * Break After
       * @see https://tailwindcss.com/docs/break-after
       */
      "break-after": [{
        "break-after": D()
      }],
      /**
       * Break Before
       * @see https://tailwindcss.com/docs/break-before
       */
      "break-before": [{
        "break-before": D()
      }],
      /**
       * Break Inside
       * @see https://tailwindcss.com/docs/break-inside
       */
      "break-inside": [{
        "break-inside": ["auto", "avoid", "avoid-page", "avoid-column"]
      }],
      /**
       * Box Decoration Break
       * @see https://tailwindcss.com/docs/box-decoration-break
       */
      "box-decoration": [{
        "box-decoration": ["slice", "clone"]
      }],
      /**
       * Box Sizing
       * @see https://tailwindcss.com/docs/box-sizing
       */
      box: [{
        box: ["border", "content"]
      }],
      /**
       * Display
       * @see https://tailwindcss.com/docs/display
       */
      display: ["block", "inline-block", "inline", "flex", "inline-flex", "table", "inline-table", "table-caption", "table-cell", "table-column", "table-column-group", "table-footer-group", "table-header-group", "table-row-group", "table-row", "flow-root", "grid", "inline-grid", "contents", "list-item", "hidden"],
      /**
       * Floats
       * @see https://tailwindcss.com/docs/float
       */
      float: [{
        float: ["right", "left", "none", "start", "end"]
      }],
      /**
       * Clear
       * @see https://tailwindcss.com/docs/clear
       */
      clear: [{
        clear: ["left", "right", "both", "none", "start", "end"]
      }],
      /**
       * Isolation
       * @see https://tailwindcss.com/docs/isolation
       */
      isolation: ["isolate", "isolation-auto"],
      /**
       * Object Fit
       * @see https://tailwindcss.com/docs/object-fit
       */
      "object-fit": [{
        object: ["contain", "cover", "fill", "none", "scale-down"]
      }],
      /**
       * Object Position
       * @see https://tailwindcss.com/docs/object-position
       */
      "object-position": [{
        object: [...O(), Oe]
      }],
      /**
       * Overflow
       * @see https://tailwindcss.com/docs/overflow
       */
      overflow: [{
        overflow: A()
      }],
      /**
       * Overflow X
       * @see https://tailwindcss.com/docs/overflow
       */
      "overflow-x": [{
        "overflow-x": A()
      }],
      /**
       * Overflow Y
       * @see https://tailwindcss.com/docs/overflow
       */
      "overflow-y": [{
        "overflow-y": A()
      }],
      /**
       * Overscroll Behavior
       * @see https://tailwindcss.com/docs/overscroll-behavior
       */
      overscroll: [{
        overscroll: j()
      }],
      /**
       * Overscroll Behavior X
       * @see https://tailwindcss.com/docs/overscroll-behavior
       */
      "overscroll-x": [{
        "overscroll-x": j()
      }],
      /**
       * Overscroll Behavior Y
       * @see https://tailwindcss.com/docs/overscroll-behavior
       */
      "overscroll-y": [{
        "overscroll-y": j()
      }],
      /**
       * Position
       * @see https://tailwindcss.com/docs/position
       */
      position: ["static", "fixed", "absolute", "relative", "sticky"],
      /**
       * Top / Right / Bottom / Left
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      inset: [{
        inset: [v]
      }],
      /**
       * Right / Left
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      "inset-x": [{
        "inset-x": [v]
      }],
      /**
       * Top / Bottom
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      "inset-y": [{
        "inset-y": [v]
      }],
      /**
       * Start
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      start: [{
        start: [v]
      }],
      /**
       * End
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      end: [{
        end: [v]
      }],
      /**
       * Top
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      top: [{
        top: [v]
      }],
      /**
       * Right
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      right: [{
        right: [v]
      }],
      /**
       * Bottom
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      bottom: [{
        bottom: [v]
      }],
      /**
       * Left
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      left: [{
        left: [v]
      }],
      /**
       * Visibility
       * @see https://tailwindcss.com/docs/visibility
       */
      visibility: ["visible", "invisible", "collapse"],
      /**
       * Z-Index
       * @see https://tailwindcss.com/docs/z-index
       */
      z: [{
        z: ["auto", Mi, Oe]
      }],
      // Flexbox and Grid
      /**
       * Flex Basis
       * @see https://tailwindcss.com/docs/flex-basis
       */
      basis: [{
        basis: $()
      }],
      /**
       * Flex Direction
       * @see https://tailwindcss.com/docs/flex-direction
       */
      "flex-direction": [{
        flex: ["row", "row-reverse", "col", "col-reverse"]
      }],
      /**
       * Flex Wrap
       * @see https://tailwindcss.com/docs/flex-wrap
       */
      "flex-wrap": [{
        flex: ["wrap", "wrap-reverse", "nowrap"]
      }],
      /**
       * Flex
       * @see https://tailwindcss.com/docs/flex
       */
      flex: [{
        flex: ["1", "auto", "initial", "none", Oe]
      }],
      /**
       * Flex Grow
       * @see https://tailwindcss.com/docs/flex-grow
       */
      grow: [{
        grow: M()
      }],
      /**
       * Flex Shrink
       * @see https://tailwindcss.com/docs/flex-shrink
       */
      shrink: [{
        shrink: M()
      }],
      /**
       * Order
       * @see https://tailwindcss.com/docs/order
       */
      order: [{
        order: ["first", "last", "none", Mi, Oe]
      }],
      /**
       * Grid Template Columns
       * @see https://tailwindcss.com/docs/grid-template-columns
       */
      "grid-cols": [{
        "grid-cols": [Ti]
      }],
      /**
       * Grid Column Start / End
       * @see https://tailwindcss.com/docs/grid-column
       */
      "col-start-end": [{
        col: ["auto", {
          span: ["full", Mi, Oe]
        }, Oe]
      }],
      /**
       * Grid Column Start
       * @see https://tailwindcss.com/docs/grid-column
       */
      "col-start": [{
        "col-start": P()
      }],
      /**
       * Grid Column End
       * @see https://tailwindcss.com/docs/grid-column
       */
      "col-end": [{
        "col-end": P()
      }],
      /**
       * Grid Template Rows
       * @see https://tailwindcss.com/docs/grid-template-rows
       */
      "grid-rows": [{
        "grid-rows": [Ti]
      }],
      /**
       * Grid Row Start / End
       * @see https://tailwindcss.com/docs/grid-row
       */
      "row-start-end": [{
        row: ["auto", {
          span: [Mi, Oe]
        }, Oe]
      }],
      /**
       * Grid Row Start
       * @see https://tailwindcss.com/docs/grid-row
       */
      "row-start": [{
        "row-start": P()
      }],
      /**
       * Grid Row End
       * @see https://tailwindcss.com/docs/grid-row
       */
      "row-end": [{
        "row-end": P()
      }],
      /**
       * Grid Auto Flow
       * @see https://tailwindcss.com/docs/grid-auto-flow
       */
      "grid-flow": [{
        "grid-flow": ["row", "col", "dense", "row-dense", "col-dense"]
      }],
      /**
       * Grid Auto Columns
       * @see https://tailwindcss.com/docs/grid-auto-columns
       */
      "auto-cols": [{
        "auto-cols": ["auto", "min", "max", "fr", Oe]
      }],
      /**
       * Grid Auto Rows
       * @see https://tailwindcss.com/docs/grid-auto-rows
       */
      "auto-rows": [{
        "auto-rows": ["auto", "min", "max", "fr", Oe]
      }],
      /**
       * Gap
       * @see https://tailwindcss.com/docs/gap
       */
      gap: [{
        gap: [h]
      }],
      /**
       * Gap X
       * @see https://tailwindcss.com/docs/gap
       */
      "gap-x": [{
        "gap-x": [h]
      }],
      /**
       * Gap Y
       * @see https://tailwindcss.com/docs/gap
       */
      "gap-y": [{
        "gap-y": [h]
      }],
      /**
       * Justify Content
       * @see https://tailwindcss.com/docs/justify-content
       */
      "justify-content": [{
        justify: ["normal", ...S()]
      }],
      /**
       * Justify Items
       * @see https://tailwindcss.com/docs/justify-items
       */
      "justify-items": [{
        "justify-items": ["start", "end", "center", "stretch"]
      }],
      /**
       * Justify Self
       * @see https://tailwindcss.com/docs/justify-self
       */
      "justify-self": [{
        "justify-self": ["auto", "start", "end", "center", "stretch"]
      }],
      /**
       * Align Content
       * @see https://tailwindcss.com/docs/align-content
       */
      "align-content": [{
        content: ["normal", ...S(), "baseline"]
      }],
      /**
       * Align Items
       * @see https://tailwindcss.com/docs/align-items
       */
      "align-items": [{
        items: ["start", "end", "center", "baseline", "stretch"]
      }],
      /**
       * Align Self
       * @see https://tailwindcss.com/docs/align-self
       */
      "align-self": [{
        self: ["auto", "start", "end", "center", "stretch", "baseline"]
      }],
      /**
       * Place Content
       * @see https://tailwindcss.com/docs/place-content
       */
      "place-content": [{
        "place-content": [...S(), "baseline"]
      }],
      /**
       * Place Items
       * @see https://tailwindcss.com/docs/place-items
       */
      "place-items": [{
        "place-items": ["start", "end", "center", "baseline", "stretch"]
      }],
      /**
       * Place Self
       * @see https://tailwindcss.com/docs/place-self
       */
      "place-self": [{
        "place-self": ["auto", "start", "end", "center", "stretch"]
      }],
      // Spacing
      /**
       * Padding
       * @see https://tailwindcss.com/docs/padding
       */
      p: [{
        p: [y]
      }],
      /**
       * Padding X
       * @see https://tailwindcss.com/docs/padding
       */
      px: [{
        px: [y]
      }],
      /**
       * Padding Y
       * @see https://tailwindcss.com/docs/padding
       */
      py: [{
        py: [y]
      }],
      /**
       * Padding Start
       * @see https://tailwindcss.com/docs/padding
       */
      ps: [{
        ps: [y]
      }],
      /**
       * Padding End
       * @see https://tailwindcss.com/docs/padding
       */
      pe: [{
        pe: [y]
      }],
      /**
       * Padding Top
       * @see https://tailwindcss.com/docs/padding
       */
      pt: [{
        pt: [y]
      }],
      /**
       * Padding Right
       * @see https://tailwindcss.com/docs/padding
       */
      pr: [{
        pr: [y]
      }],
      /**
       * Padding Bottom
       * @see https://tailwindcss.com/docs/padding
       */
      pb: [{
        pb: [y]
      }],
      /**
       * Padding Left
       * @see https://tailwindcss.com/docs/padding
       */
      pl: [{
        pl: [y]
      }],
      /**
       * Margin
       * @see https://tailwindcss.com/docs/margin
       */
      m: [{
        m: [m]
      }],
      /**
       * Margin X
       * @see https://tailwindcss.com/docs/margin
       */
      mx: [{
        mx: [m]
      }],
      /**
       * Margin Y
       * @see https://tailwindcss.com/docs/margin
       */
      my: [{
        my: [m]
      }],
      /**
       * Margin Start
       * @see https://tailwindcss.com/docs/margin
       */
      ms: [{
        ms: [m]
      }],
      /**
       * Margin End
       * @see https://tailwindcss.com/docs/margin
       */
      me: [{
        me: [m]
      }],
      /**
       * Margin Top
       * @see https://tailwindcss.com/docs/margin
       */
      mt: [{
        mt: [m]
      }],
      /**
       * Margin Right
       * @see https://tailwindcss.com/docs/margin
       */
      mr: [{
        mr: [m]
      }],
      /**
       * Margin Bottom
       * @see https://tailwindcss.com/docs/margin
       */
      mb: [{
        mb: [m]
      }],
      /**
       * Margin Left
       * @see https://tailwindcss.com/docs/margin
       */
      ml: [{
        ml: [m]
      }],
      /**
       * Space Between X
       * @see https://tailwindcss.com/docs/space
       */
      "space-x": [{
        "space-x": [T]
      }],
      /**
       * Space Between X Reverse
       * @see https://tailwindcss.com/docs/space
       */
      "space-x-reverse": ["space-x-reverse"],
      /**
       * Space Between Y
       * @see https://tailwindcss.com/docs/space
       */
      "space-y": [{
        "space-y": [T]
      }],
      /**
       * Space Between Y Reverse
       * @see https://tailwindcss.com/docs/space
       */
      "space-y-reverse": ["space-y-reverse"],
      // Sizing
      /**
       * Width
       * @see https://tailwindcss.com/docs/width
       */
      w: [{
        w: ["auto", "min", "max", "fit", "svw", "lvw", "dvw", Oe, t]
      }],
      /**
       * Min-Width
       * @see https://tailwindcss.com/docs/min-width
       */
      "min-w": [{
        "min-w": [Oe, t, "min", "max", "fit"]
      }],
      /**
       * Max-Width
       * @see https://tailwindcss.com/docs/max-width
       */
      "max-w": [{
        "max-w": [Oe, t, "none", "full", "min", "max", "fit", "prose", {
          screen: [fn]
        }, fn]
      }],
      /**
       * Height
       * @see https://tailwindcss.com/docs/height
       */
      h: [{
        h: [Oe, t, "auto", "min", "max", "fit", "svh", "lvh", "dvh"]
      }],
      /**
       * Min-Height
       * @see https://tailwindcss.com/docs/min-height
       */
      "min-h": [{
        "min-h": [Oe, t, "min", "max", "fit", "svh", "lvh", "dvh"]
      }],
      /**
       * Max-Height
       * @see https://tailwindcss.com/docs/max-height
       */
      "max-h": [{
        "max-h": [Oe, t, "min", "max", "fit", "svh", "lvh", "dvh"]
      }],
      /**
       * Size
       * @see https://tailwindcss.com/docs/size
       */
      size: [{
        size: [Oe, t, "auto", "min", "max", "fit"]
      }],
      // Typography
      /**
       * Font Size
       * @see https://tailwindcss.com/docs/font-size
       */
      "font-size": [{
        text: ["base", fn, dn]
      }],
      /**
       * Font Smoothing
       * @see https://tailwindcss.com/docs/font-smoothing
       */
      "font-smoothing": ["antialiased", "subpixel-antialiased"],
      /**
       * Font Style
       * @see https://tailwindcss.com/docs/font-style
       */
      "font-style": ["italic", "not-italic"],
      /**
       * Font Weight
       * @see https://tailwindcss.com/docs/font-weight
       */
      "font-weight": [{
        font: ["thin", "extralight", "light", "normal", "medium", "semibold", "bold", "extrabold", "black", jc]
      }],
      /**
       * Font Family
       * @see https://tailwindcss.com/docs/font-family
       */
      "font-family": [{
        font: [Ti]
      }],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-normal": ["normal-nums"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-ordinal": ["ordinal"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-slashed-zero": ["slashed-zero"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-figure": ["lining-nums", "oldstyle-nums"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-spacing": ["proportional-nums", "tabular-nums"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-fraction": ["diagonal-fractions", "stacked-fractions"],
      /**
       * Letter Spacing
       * @see https://tailwindcss.com/docs/letter-spacing
       */
      tracking: [{
        tracking: ["tighter", "tight", "normal", "wide", "wider", "widest", Oe]
      }],
      /**
       * Line Clamp
       * @see https://tailwindcss.com/docs/line-clamp
       */
      "line-clamp": [{
        "line-clamp": ["none", Fo, jc]
      }],
      /**
       * Line Height
       * @see https://tailwindcss.com/docs/line-height
       */
      leading: [{
        leading: ["none", "tight", "snug", "normal", "relaxed", "loose", en, Oe]
      }],
      /**
       * List Style Image
       * @see https://tailwindcss.com/docs/list-style-image
       */
      "list-image": [{
        "list-image": ["none", Oe]
      }],
      /**
       * List Style Type
       * @see https://tailwindcss.com/docs/list-style-type
       */
      "list-style-type": [{
        list: ["none", "disc", "decimal", Oe]
      }],
      /**
       * List Style Position
       * @see https://tailwindcss.com/docs/list-style-position
       */
      "list-style-position": [{
        list: ["inside", "outside"]
      }],
      /**
       * Placeholder Color
       * @deprecated since Tailwind CSS v3.0.0
       * @see https://tailwindcss.com/docs/placeholder-color
       */
      "placeholder-color": [{
        placeholder: [e]
      }],
      /**
       * Placeholder Opacity
       * @see https://tailwindcss.com/docs/placeholder-opacity
       */
      "placeholder-opacity": [{
        "placeholder-opacity": [x]
      }],
      /**
       * Text Alignment
       * @see https://tailwindcss.com/docs/text-align
       */
      "text-alignment": [{
        text: ["left", "center", "right", "justify", "start", "end"]
      }],
      /**
       * Text Color
       * @see https://tailwindcss.com/docs/text-color
       */
      "text-color": [{
        text: [e]
      }],
      /**
       * Text Opacity
       * @see https://tailwindcss.com/docs/text-opacity
       */
      "text-opacity": [{
        "text-opacity": [x]
      }],
      /**
       * Text Decoration
       * @see https://tailwindcss.com/docs/text-decoration
       */
      "text-decoration": ["underline", "overline", "line-through", "no-underline"],
      /**
       * Text Decoration Style
       * @see https://tailwindcss.com/docs/text-decoration-style
       */
      "text-decoration-style": [{
        decoration: [...I(), "wavy"]
      }],
      /**
       * Text Decoration Thickness
       * @see https://tailwindcss.com/docs/text-decoration-thickness
       */
      "text-decoration-thickness": [{
        decoration: ["auto", "from-font", en, dn]
      }],
      /**
       * Text Underline Offset
       * @see https://tailwindcss.com/docs/text-underline-offset
       */
      "underline-offset": [{
        "underline-offset": ["auto", en, Oe]
      }],
      /**
       * Text Decoration Color
       * @see https://tailwindcss.com/docs/text-decoration-color
       */
      "text-decoration-color": [{
        decoration: [e]
      }],
      /**
       * Text Transform
       * @see https://tailwindcss.com/docs/text-transform
       */
      "text-transform": ["uppercase", "lowercase", "capitalize", "normal-case"],
      /**
       * Text Overflow
       * @see https://tailwindcss.com/docs/text-overflow
       */
      "text-overflow": ["truncate", "text-ellipsis", "text-clip"],
      /**
       * Text Wrap
       * @see https://tailwindcss.com/docs/text-wrap
       */
      "text-wrap": [{
        text: ["wrap", "nowrap", "balance", "pretty"]
      }],
      /**
       * Text Indent
       * @see https://tailwindcss.com/docs/text-indent
       */
      indent: [{
        indent: F()
      }],
      /**
       * Vertical Alignment
       * @see https://tailwindcss.com/docs/vertical-align
       */
      "vertical-align": [{
        align: ["baseline", "top", "middle", "bottom", "text-top", "text-bottom", "sub", "super", Oe]
      }],
      /**
       * Whitespace
       * @see https://tailwindcss.com/docs/whitespace
       */
      whitespace: [{
        whitespace: ["normal", "nowrap", "pre", "pre-line", "pre-wrap", "break-spaces"]
      }],
      /**
       * Word Break
       * @see https://tailwindcss.com/docs/word-break
       */
      break: [{
        break: ["normal", "words", "all", "keep"]
      }],
      /**
       * Hyphens
       * @see https://tailwindcss.com/docs/hyphens
       */
      hyphens: [{
        hyphens: ["none", "manual", "auto"]
      }],
      /**
       * Content
       * @see https://tailwindcss.com/docs/content
       */
      content: [{
        content: ["none", Oe]
      }],
      // Backgrounds
      /**
       * Background Attachment
       * @see https://tailwindcss.com/docs/background-attachment
       */
      "bg-attachment": [{
        bg: ["fixed", "local", "scroll"]
      }],
      /**
       * Background Clip
       * @see https://tailwindcss.com/docs/background-clip
       */
      "bg-clip": [{
        "bg-clip": ["border", "padding", "content", "text"]
      }],
      /**
       * Background Opacity
       * @deprecated since Tailwind CSS v3.0.0
       * @see https://tailwindcss.com/docs/background-opacity
       */
      "bg-opacity": [{
        "bg-opacity": [x]
      }],
      /**
       * Background Origin
       * @see https://tailwindcss.com/docs/background-origin
       */
      "bg-origin": [{
        "bg-origin": ["border", "padding", "content"]
      }],
      /**
       * Background Position
       * @see https://tailwindcss.com/docs/background-position
       */
      "bg-position": [{
        bg: [...O(), A2]
      }],
      /**
       * Background Repeat
       * @see https://tailwindcss.com/docs/background-repeat
       */
      "bg-repeat": [{
        bg: ["no-repeat", {
          repeat: ["", "x", "y", "round", "space"]
        }]
      }],
      /**
       * Background Size
       * @see https://tailwindcss.com/docs/background-size
       */
      "bg-size": [{
        bg: ["auto", "cover", "contain", P2]
      }],
      /**
       * Background Image
       * @see https://tailwindcss.com/docs/background-image
       */
      "bg-image": [{
        bg: ["none", {
          "gradient-to": ["t", "tr", "r", "br", "b", "bl", "l", "tl"]
        }, I2]
      }],
      /**
       * Background Color
       * @see https://tailwindcss.com/docs/background-color
       */
      "bg-color": [{
        bg: [e]
      }],
      /**
       * Gradient Color Stops From Position
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-from-pos": [{
        from: [g]
      }],
      /**
       * Gradient Color Stops Via Position
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-via-pos": [{
        via: [g]
      }],
      /**
       * Gradient Color Stops To Position
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-to-pos": [{
        to: [g]
      }],
      /**
       * Gradient Color Stops From
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-from": [{
        from: [p]
      }],
      /**
       * Gradient Color Stops Via
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-via": [{
        via: [p]
      }],
      /**
       * Gradient Color Stops To
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-to": [{
        to: [p]
      }],
      // Borders
      /**
       * Border Radius
       * @see https://tailwindcss.com/docs/border-radius
       */
      rounded: [{
        rounded: [i]
      }],
      /**
       * Border Radius Start
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-s": [{
        "rounded-s": [i]
      }],
      /**
       * Border Radius End
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-e": [{
        "rounded-e": [i]
      }],
      /**
       * Border Radius Top
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-t": [{
        "rounded-t": [i]
      }],
      /**
       * Border Radius Right
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-r": [{
        "rounded-r": [i]
      }],
      /**
       * Border Radius Bottom
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-b": [{
        "rounded-b": [i]
      }],
      /**
       * Border Radius Left
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-l": [{
        "rounded-l": [i]
      }],
      /**
       * Border Radius Start Start
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-ss": [{
        "rounded-ss": [i]
      }],
      /**
       * Border Radius Start End
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-se": [{
        "rounded-se": [i]
      }],
      /**
       * Border Radius End End
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-ee": [{
        "rounded-ee": [i]
      }],
      /**
       * Border Radius End Start
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-es": [{
        "rounded-es": [i]
      }],
      /**
       * Border Radius Top Left
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-tl": [{
        "rounded-tl": [i]
      }],
      /**
       * Border Radius Top Right
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-tr": [{
        "rounded-tr": [i]
      }],
      /**
       * Border Radius Bottom Right
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-br": [{
        "rounded-br": [i]
      }],
      /**
       * Border Radius Bottom Left
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-bl": [{
        "rounded-bl": [i]
      }],
      /**
       * Border Width
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w": [{
        border: [s]
      }],
      /**
       * Border Width X
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-x": [{
        "border-x": [s]
      }],
      /**
       * Border Width Y
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-y": [{
        "border-y": [s]
      }],
      /**
       * Border Width Start
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-s": [{
        "border-s": [s]
      }],
      /**
       * Border Width End
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-e": [{
        "border-e": [s]
      }],
      /**
       * Border Width Top
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-t": [{
        "border-t": [s]
      }],
      /**
       * Border Width Right
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-r": [{
        "border-r": [s]
      }],
      /**
       * Border Width Bottom
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-b": [{
        "border-b": [s]
      }],
      /**
       * Border Width Left
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-l": [{
        "border-l": [s]
      }],
      /**
       * Border Opacity
       * @see https://tailwindcss.com/docs/border-opacity
       */
      "border-opacity": [{
        "border-opacity": [x]
      }],
      /**
       * Border Style
       * @see https://tailwindcss.com/docs/border-style
       */
      "border-style": [{
        border: [...I(), "hidden"]
      }],
      /**
       * Divide Width X
       * @see https://tailwindcss.com/docs/divide-width
       */
      "divide-x": [{
        "divide-x": [s]
      }],
      /**
       * Divide Width X Reverse
       * @see https://tailwindcss.com/docs/divide-width
       */
      "divide-x-reverse": ["divide-x-reverse"],
      /**
       * Divide Width Y
       * @see https://tailwindcss.com/docs/divide-width
       */
      "divide-y": [{
        "divide-y": [s]
      }],
      /**
       * Divide Width Y Reverse
       * @see https://tailwindcss.com/docs/divide-width
       */
      "divide-y-reverse": ["divide-y-reverse"],
      /**
       * Divide Opacity
       * @see https://tailwindcss.com/docs/divide-opacity
       */
      "divide-opacity": [{
        "divide-opacity": [x]
      }],
      /**
       * Divide Style
       * @see https://tailwindcss.com/docs/divide-style
       */
      "divide-style": [{
        divide: I()
      }],
      /**
       * Border Color
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color": [{
        border: [o]
      }],
      /**
       * Border Color X
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-x": [{
        "border-x": [o]
      }],
      /**
       * Border Color Y
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-y": [{
        "border-y": [o]
      }],
      /**
       * Border Color S
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-s": [{
        "border-s": [o]
      }],
      /**
       * Border Color E
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-e": [{
        "border-e": [o]
      }],
      /**
       * Border Color Top
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-t": [{
        "border-t": [o]
      }],
      /**
       * Border Color Right
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-r": [{
        "border-r": [o]
      }],
      /**
       * Border Color Bottom
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-b": [{
        "border-b": [o]
      }],
      /**
       * Border Color Left
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-l": [{
        "border-l": [o]
      }],
      /**
       * Divide Color
       * @see https://tailwindcss.com/docs/divide-color
       */
      "divide-color": [{
        divide: [o]
      }],
      /**
       * Outline Style
       * @see https://tailwindcss.com/docs/outline-style
       */
      "outline-style": [{
        outline: ["", ...I()]
      }],
      /**
       * Outline Offset
       * @see https://tailwindcss.com/docs/outline-offset
       */
      "outline-offset": [{
        "outline-offset": [en, Oe]
      }],
      /**
       * Outline Width
       * @see https://tailwindcss.com/docs/outline-width
       */
      "outline-w": [{
        outline: [en, dn]
      }],
      /**
       * Outline Color
       * @see https://tailwindcss.com/docs/outline-color
       */
      "outline-color": [{
        outline: [e]
      }],
      /**
       * Ring Width
       * @see https://tailwindcss.com/docs/ring-width
       */
      "ring-w": [{
        ring: L()
      }],
      /**
       * Ring Width Inset
       * @see https://tailwindcss.com/docs/ring-width
       */
      "ring-w-inset": ["ring-inset"],
      /**
       * Ring Color
       * @see https://tailwindcss.com/docs/ring-color
       */
      "ring-color": [{
        ring: [e]
      }],
      /**
       * Ring Opacity
       * @see https://tailwindcss.com/docs/ring-opacity
       */
      "ring-opacity": [{
        "ring-opacity": [x]
      }],
      /**
       * Ring Offset Width
       * @see https://tailwindcss.com/docs/ring-offset-width
       */
      "ring-offset-w": [{
        "ring-offset": [en, dn]
      }],
      /**
       * Ring Offset Color
       * @see https://tailwindcss.com/docs/ring-offset-color
       */
      "ring-offset-color": [{
        "ring-offset": [e]
      }],
      // Effects
      /**
       * Box Shadow
       * @see https://tailwindcss.com/docs/box-shadow
       */
      shadow: [{
        shadow: ["", "inner", "none", fn, F2]
      }],
      /**
       * Box Shadow Color
       * @see https://tailwindcss.com/docs/box-shadow-color
       */
      "shadow-color": [{
        shadow: [Ti]
      }],
      /**
       * Opacity
       * @see https://tailwindcss.com/docs/opacity
       */
      opacity: [{
        opacity: [x]
      }],
      /**
       * Mix Blend Mode
       * @see https://tailwindcss.com/docs/mix-blend-mode
       */
      "mix-blend": [{
        "mix-blend": [...E(), "plus-lighter", "plus-darker"]
      }],
      /**
       * Background Blend Mode
       * @see https://tailwindcss.com/docs/background-blend-mode
       */
      "bg-blend": [{
        "bg-blend": E()
      }],
      // Filters
      /**
       * Filter
       * @deprecated since Tailwind CSS v3.0.0
       * @see https://tailwindcss.com/docs/filter
       */
      filter: [{
        filter: ["", "none"]
      }],
      /**
       * Blur
       * @see https://tailwindcss.com/docs/blur
       */
      blur: [{
        blur: [r]
      }],
      /**
       * Brightness
       * @see https://tailwindcss.com/docs/brightness
       */
      brightness: [{
        brightness: [n]
      }],
      /**
       * Contrast
       * @see https://tailwindcss.com/docs/contrast
       */
      contrast: [{
        contrast: [l]
      }],
      /**
       * Drop Shadow
       * @see https://tailwindcss.com/docs/drop-shadow
       */
      "drop-shadow": [{
        "drop-shadow": ["", "none", fn, Oe]
      }],
      /**
       * Grayscale
       * @see https://tailwindcss.com/docs/grayscale
       */
      grayscale: [{
        grayscale: [c]
      }],
      /**
       * Hue Rotate
       * @see https://tailwindcss.com/docs/hue-rotate
       */
      "hue-rotate": [{
        "hue-rotate": [u]
      }],
      /**
       * Invert
       * @see https://tailwindcss.com/docs/invert
       */
      invert: [{
        invert: [d]
      }],
      /**
       * Saturate
       * @see https://tailwindcss.com/docs/saturate
       */
      saturate: [{
        saturate: [b]
      }],
      /**
       * Sepia
       * @see https://tailwindcss.com/docs/sepia
       */
      sepia: [{
        sepia: [_]
      }],
      /**
       * Backdrop Filter
       * @deprecated since Tailwind CSS v3.0.0
       * @see https://tailwindcss.com/docs/backdrop-filter
       */
      "backdrop-filter": [{
        "backdrop-filter": ["", "none"]
      }],
      /**
       * Backdrop Blur
       * @see https://tailwindcss.com/docs/backdrop-blur
       */
      "backdrop-blur": [{
        "backdrop-blur": [r]
      }],
      /**
       * Backdrop Brightness
       * @see https://tailwindcss.com/docs/backdrop-brightness
       */
      "backdrop-brightness": [{
        "backdrop-brightness": [n]
      }],
      /**
       * Backdrop Contrast
       * @see https://tailwindcss.com/docs/backdrop-contrast
       */
      "backdrop-contrast": [{
        "backdrop-contrast": [l]
      }],
      /**
       * Backdrop Grayscale
       * @see https://tailwindcss.com/docs/backdrop-grayscale
       */
      "backdrop-grayscale": [{
        "backdrop-grayscale": [c]
      }],
      /**
       * Backdrop Hue Rotate
       * @see https://tailwindcss.com/docs/backdrop-hue-rotate
       */
      "backdrop-hue-rotate": [{
        "backdrop-hue-rotate": [u]
      }],
      /**
       * Backdrop Invert
       * @see https://tailwindcss.com/docs/backdrop-invert
       */
      "backdrop-invert": [{
        "backdrop-invert": [d]
      }],
      /**
       * Backdrop Opacity
       * @see https://tailwindcss.com/docs/backdrop-opacity
       */
      "backdrop-opacity": [{
        "backdrop-opacity": [x]
      }],
      /**
       * Backdrop Saturate
       * @see https://tailwindcss.com/docs/backdrop-saturate
       */
      "backdrop-saturate": [{
        "backdrop-saturate": [b]
      }],
      /**
       * Backdrop Sepia
       * @see https://tailwindcss.com/docs/backdrop-sepia
       */
      "backdrop-sepia": [{
        "backdrop-sepia": [_]
      }],
      // Tables
      /**
       * Border Collapse
       * @see https://tailwindcss.com/docs/border-collapse
       */
      "border-collapse": [{
        border: ["collapse", "separate"]
      }],
      /**
       * Border Spacing
       * @see https://tailwindcss.com/docs/border-spacing
       */
      "border-spacing": [{
        "border-spacing": [a]
      }],
      /**
       * Border Spacing X
       * @see https://tailwindcss.com/docs/border-spacing
       */
      "border-spacing-x": [{
        "border-spacing-x": [a]
      }],
      /**
       * Border Spacing Y
       * @see https://tailwindcss.com/docs/border-spacing
       */
      "border-spacing-y": [{
        "border-spacing-y": [a]
      }],
      /**
       * Table Layout
       * @see https://tailwindcss.com/docs/table-layout
       */
      "table-layout": [{
        table: ["auto", "fixed"]
      }],
      /**
       * Caption Side
       * @see https://tailwindcss.com/docs/caption-side
       */
      caption: [{
        caption: ["top", "bottom"]
      }],
      // Transitions and Animation
      /**
       * Tranisition Property
       * @see https://tailwindcss.com/docs/transition-property
       */
      transition: [{
        transition: ["none", "all", "", "colors", "opacity", "shadow", "transform", Oe]
      }],
      /**
       * Transition Duration
       * @see https://tailwindcss.com/docs/transition-duration
       */
      duration: [{
        duration: N()
      }],
      /**
       * Transition Timing Function
       * @see https://tailwindcss.com/docs/transition-timing-function
       */
      ease: [{
        ease: ["linear", "in", "out", "in-out", Oe]
      }],
      /**
       * Transition Delay
       * @see https://tailwindcss.com/docs/transition-delay
       */
      delay: [{
        delay: N()
      }],
      /**
       * Animation
       * @see https://tailwindcss.com/docs/animation
       */
      animate: [{
        animate: ["none", "spin", "ping", "pulse", "bounce", Oe]
      }],
      // Transforms
      /**
       * Transform
       * @see https://tailwindcss.com/docs/transform
       */
      transform: [{
        transform: ["", "gpu", "none"]
      }],
      /**
       * Scale
       * @see https://tailwindcss.com/docs/scale
       */
      scale: [{
        scale: [w]
      }],
      /**
       * Scale X
       * @see https://tailwindcss.com/docs/scale
       */
      "scale-x": [{
        "scale-x": [w]
      }],
      /**
       * Scale Y
       * @see https://tailwindcss.com/docs/scale
       */
      "scale-y": [{
        "scale-y": [w]
      }],
      /**
       * Rotate
       * @see https://tailwindcss.com/docs/rotate
       */
      rotate: [{
        rotate: [Mi, Oe]
      }],
      /**
       * Translate X
       * @see https://tailwindcss.com/docs/translate
       */
      "translate-x": [{
        "translate-x": [k]
      }],
      /**
       * Translate Y
       * @see https://tailwindcss.com/docs/translate
       */
      "translate-y": [{
        "translate-y": [k]
      }],
      /**
       * Skew X
       * @see https://tailwindcss.com/docs/skew
       */
      "skew-x": [{
        "skew-x": [R]
      }],
      /**
       * Skew Y
       * @see https://tailwindcss.com/docs/skew
       */
      "skew-y": [{
        "skew-y": [R]
      }],
      /**
       * Transform Origin
       * @see https://tailwindcss.com/docs/transform-origin
       */
      "transform-origin": [{
        origin: ["center", "top", "top-right", "right", "bottom-right", "bottom", "bottom-left", "left", "top-left", Oe]
      }],
      // Interactivity
      /**
       * Accent Color
       * @see https://tailwindcss.com/docs/accent-color
       */
      accent: [{
        accent: ["auto", e]
      }],
      /**
       * Appearance
       * @see https://tailwindcss.com/docs/appearance
       */
      appearance: [{
        appearance: ["none", "auto"]
      }],
      /**
       * Cursor
       * @see https://tailwindcss.com/docs/cursor
       */
      cursor: [{
        cursor: ["auto", "default", "pointer", "wait", "text", "move", "help", "not-allowed", "none", "context-menu", "progress", "cell", "crosshair", "vertical-text", "alias", "copy", "no-drop", "grab", "grabbing", "all-scroll", "col-resize", "row-resize", "n-resize", "e-resize", "s-resize", "w-resize", "ne-resize", "nw-resize", "se-resize", "sw-resize", "ew-resize", "ns-resize", "nesw-resize", "nwse-resize", "zoom-in", "zoom-out", Oe]
      }],
      /**
       * Caret Color
       * @see https://tailwindcss.com/docs/just-in-time-mode#caret-color-utilities
       */
      "caret-color": [{
        caret: [e]
      }],
      /**
       * Pointer Events
       * @see https://tailwindcss.com/docs/pointer-events
       */
      "pointer-events": [{
        "pointer-events": ["none", "auto"]
      }],
      /**
       * Resize
       * @see https://tailwindcss.com/docs/resize
       */
      resize: [{
        resize: ["none", "y", "x", ""]
      }],
      /**
       * Scroll Behavior
       * @see https://tailwindcss.com/docs/scroll-behavior
       */
      "scroll-behavior": [{
        scroll: ["auto", "smooth"]
      }],
      /**
       * Scroll Margin
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-m": [{
        "scroll-m": F()
      }],
      /**
       * Scroll Margin X
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-mx": [{
        "scroll-mx": F()
      }],
      /**
       * Scroll Margin Y
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-my": [{
        "scroll-my": F()
      }],
      /**
       * Scroll Margin Start
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-ms": [{
        "scroll-ms": F()
      }],
      /**
       * Scroll Margin End
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-me": [{
        "scroll-me": F()
      }],
      /**
       * Scroll Margin Top
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-mt": [{
        "scroll-mt": F()
      }],
      /**
       * Scroll Margin Right
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-mr": [{
        "scroll-mr": F()
      }],
      /**
       * Scroll Margin Bottom
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-mb": [{
        "scroll-mb": F()
      }],
      /**
       * Scroll Margin Left
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-ml": [{
        "scroll-ml": F()
      }],
      /**
       * Scroll Padding
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-p": [{
        "scroll-p": F()
      }],
      /**
       * Scroll Padding X
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-px": [{
        "scroll-px": F()
      }],
      /**
       * Scroll Padding Y
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-py": [{
        "scroll-py": F()
      }],
      /**
       * Scroll Padding Start
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-ps": [{
        "scroll-ps": F()
      }],
      /**
       * Scroll Padding End
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pe": [{
        "scroll-pe": F()
      }],
      /**
       * Scroll Padding Top
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pt": [{
        "scroll-pt": F()
      }],
      /**
       * Scroll Padding Right
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pr": [{
        "scroll-pr": F()
      }],
      /**
       * Scroll Padding Bottom
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pb": [{
        "scroll-pb": F()
      }],
      /**
       * Scroll Padding Left
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pl": [{
        "scroll-pl": F()
      }],
      /**
       * Scroll Snap Align
       * @see https://tailwindcss.com/docs/scroll-snap-align
       */
      "snap-align": [{
        snap: ["start", "end", "center", "align-none"]
      }],
      /**
       * Scroll Snap Stop
       * @see https://tailwindcss.com/docs/scroll-snap-stop
       */
      "snap-stop": [{
        snap: ["normal", "always"]
      }],
      /**
       * Scroll Snap Type
       * @see https://tailwindcss.com/docs/scroll-snap-type
       */
      "snap-type": [{
        snap: ["none", "x", "y", "both"]
      }],
      /**
       * Scroll Snap Type Strictness
       * @see https://tailwindcss.com/docs/scroll-snap-type
       */
      "snap-strictness": [{
        snap: ["mandatory", "proximity"]
      }],
      /**
       * Touch Action
       * @see https://tailwindcss.com/docs/touch-action
       */
      touch: [{
        touch: ["auto", "none", "manipulation"]
      }],
      /**
       * Touch Action X
       * @see https://tailwindcss.com/docs/touch-action
       */
      "touch-x": [{
        "touch-pan": ["x", "left", "right"]
      }],
      /**
       * Touch Action Y
       * @see https://tailwindcss.com/docs/touch-action
       */
      "touch-y": [{
        "touch-pan": ["y", "up", "down"]
      }],
      /**
       * Touch Action Pinch Zoom
       * @see https://tailwindcss.com/docs/touch-action
       */
      "touch-pz": ["touch-pinch-zoom"],
      /**
       * User Select
       * @see https://tailwindcss.com/docs/user-select
       */
      select: [{
        select: ["none", "text", "all", "auto"]
      }],
      /**
       * Will Change
       * @see https://tailwindcss.com/docs/will-change
       */
      "will-change": [{
        "will-change": ["auto", "scroll", "contents", "transform", Oe]
      }],
      // SVG
      /**
       * Fill
       * @see https://tailwindcss.com/docs/fill
       */
      fill: [{
        fill: [e, "none"]
      }],
      /**
       * Stroke Width
       * @see https://tailwindcss.com/docs/stroke-width
       */
      "stroke-w": [{
        stroke: [en, dn, jc]
      }],
      /**
       * Stroke
       * @see https://tailwindcss.com/docs/stroke
       */
      stroke: [{
        stroke: [e, "none"]
      }],
      // Accessibility
      /**
       * Screen Readers
       * @see https://tailwindcss.com/docs/screen-readers
       */
      sr: ["sr-only", "not-sr-only"],
      /**
       * Forced Color Adjust
       * @see https://tailwindcss.com/docs/forced-color-adjust
       */
      "forced-color-adjust": [{
        "forced-color-adjust": ["auto", "none"]
      }]
    },
    conflictingClassGroups: {
      overflow: ["overflow-x", "overflow-y"],
      overscroll: ["overscroll-x", "overscroll-y"],
      inset: ["inset-x", "inset-y", "start", "end", "top", "right", "bottom", "left"],
      "inset-x": ["right", "left"],
      "inset-y": ["top", "bottom"],
      flex: ["basis", "grow", "shrink"],
      gap: ["gap-x", "gap-y"],
      p: ["px", "py", "ps", "pe", "pt", "pr", "pb", "pl"],
      px: ["pr", "pl"],
      py: ["pt", "pb"],
      m: ["mx", "my", "ms", "me", "mt", "mr", "mb", "ml"],
      mx: ["mr", "ml"],
      my: ["mt", "mb"],
      size: ["w", "h"],
      "font-size": ["leading"],
      "fvn-normal": ["fvn-ordinal", "fvn-slashed-zero", "fvn-figure", "fvn-spacing", "fvn-fraction"],
      "fvn-ordinal": ["fvn-normal"],
      "fvn-slashed-zero": ["fvn-normal"],
      "fvn-figure": ["fvn-normal"],
      "fvn-spacing": ["fvn-normal"],
      "fvn-fraction": ["fvn-normal"],
      "line-clamp": ["display", "overflow"],
      rounded: ["rounded-s", "rounded-e", "rounded-t", "rounded-r", "rounded-b", "rounded-l", "rounded-ss", "rounded-se", "rounded-ee", "rounded-es", "rounded-tl", "rounded-tr", "rounded-br", "rounded-bl"],
      "rounded-s": ["rounded-ss", "rounded-es"],
      "rounded-e": ["rounded-se", "rounded-ee"],
      "rounded-t": ["rounded-tl", "rounded-tr"],
      "rounded-r": ["rounded-tr", "rounded-br"],
      "rounded-b": ["rounded-br", "rounded-bl"],
      "rounded-l": ["rounded-tl", "rounded-bl"],
      "border-spacing": ["border-spacing-x", "border-spacing-y"],
      "border-w": ["border-w-s", "border-w-e", "border-w-t", "border-w-r", "border-w-b", "border-w-l"],
      "border-w-x": ["border-w-r", "border-w-l"],
      "border-w-y": ["border-w-t", "border-w-b"],
      "border-color": ["border-color-s", "border-color-e", "border-color-t", "border-color-r", "border-color-b", "border-color-l"],
      "border-color-x": ["border-color-r", "border-color-l"],
      "border-color-y": ["border-color-t", "border-color-b"],
      "scroll-m": ["scroll-mx", "scroll-my", "scroll-ms", "scroll-me", "scroll-mt", "scroll-mr", "scroll-mb", "scroll-ml"],
      "scroll-mx": ["scroll-mr", "scroll-ml"],
      "scroll-my": ["scroll-mt", "scroll-mb"],
      "scroll-p": ["scroll-px", "scroll-py", "scroll-ps", "scroll-pe", "scroll-pt", "scroll-pr", "scroll-pb", "scroll-pl"],
      "scroll-px": ["scroll-pr", "scroll-pl"],
      "scroll-py": ["scroll-pt", "scroll-pb"],
      touch: ["touch-x", "touch-y", "touch-pz"],
      "touch-x": ["touch"],
      "touch-y": ["touch"],
      "touch-pz": ["touch"]
    },
    conflictingClassGroupModifiers: {
      "font-size": ["leading"]
    }
  };
}, Fg = /* @__PURE__ */ C2($2), di = "data-veltix-node-id";
function Lg(e) {
  return e.contentEditable === "inherit" ? Lg(e.parentElement) : e.contentEditable === "true" ? e : null;
}
function Bg(e) {
  return e.getAttribute(di);
}
function Ir(...e) {
  return Fg(ca(e));
}
const G2 = ({ icon: e, title: t, active: r, isRemovable: n, onClick: o, onRemove: i }) => {
  const a = (s) => {
    s.stopPropagation(), i?.();
  };
  return /* @__PURE__ */ f.jsxs(
    "button",
    {
      className: Ir(
        "w-16 h-16 flex-shrink-0 flex flex-col items-center justify-center relative group transition-all duration-200",
        r ? "text-purple-600 dark:text-white" : "text-foreground hover:text-foreground/90"
      ),
      onClick: o,
      title: t,
      children: [
        n && r && /* @__PURE__ */ f.jsx(
          "div",
          {
            className: "absolute top-0 left-2 w-3 h-3 bg-gray-300 hover:bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center text-xs font-bold z-10",
            onClick: a,
            title: "Remove",
            children: "×"
          }
        ),
        /* @__PURE__ */ f.jsx("div", { className: "flex items-center justify-center", children: /* @__PURE__ */ f.jsx(
          "span",
          {
            className: Ir(
              "flex items-center justify-center overflow-hidden p-1 rounded-lg w-8 h-8",
              "group-hover:bg-gray-100 group-hover:text-[#4a53fa]",
              r ? "text-[#4a53fa] bg-white dark:bg-gray-200 shadow-[0px_0px_0px_1px_rgba(64,87,109,0.04),0px_6px_20px_-4px_rgba(64,87,109,0.3)]" : ""
            ),
            children: e ? Me.isValidElement(e) ? e : Me.createElement(e, { className: "w-5 h-5" }) : /* @__PURE__ */ f.jsx("div", { className: "w-5 h-5 bg-gray-200 rounded-sm" })
          }
        ) }),
        /* @__PURE__ */ f.jsx("div", { className: "text-[11px] mt-1 font-medium truncate w-full text-center whitespace-nowrap overflow-hidden px-0.5", children: t })
      ]
    }
  );
};
function cp(e, t) {
  if (typeof e == "function")
    return e(t);
  e != null && (e.current = t);
}
function Tl(...e) {
  return (t) => {
    let r = !1;
    const n = e.map((o) => {
      const i = cp(o, t);
      return !r && typeof i == "function" && (r = !0), i;
    });
    if (r)
      return () => {
        for (let o = 0; o < n.length; o++) {
          const i = n[o];
          typeof i == "function" ? i() : cp(e[o], null);
        }
      };
  };
}
function _e(...e) {
  return C.useCallback(Tl(...e), e);
}
// @__NO_SIDE_EFFECTS__
function Qn(e) {
  const t = /* @__PURE__ */ U2(e), r = C.forwardRef((n, o) => {
    const { children: i, ...a } = n, s = C.Children.toArray(i), l = s.find(W2);
    if (l) {
      const c = l.props.children, u = s.map((d) => d === l ? C.Children.count(c) > 1 ? C.Children.only(null) : C.isValidElement(c) ? c.props.children : null : d);
      return /* @__PURE__ */ f.jsx(t, { ...a, ref: o, children: C.isValidElement(c) ? C.cloneElement(c, void 0, u) : null });
    }
    return /* @__PURE__ */ f.jsx(t, { ...a, ref: o, children: i });
  });
  return r.displayName = `${e}.Slot`, r;
}
var V2 = /* @__PURE__ */ Qn("Slot");
// @__NO_SIDE_EFFECTS__
function U2(e) {
  const t = C.forwardRef((r, n) => {
    const { children: o, ...i } = r;
    if (C.isValidElement(o)) {
      const a = q2(o), s = Y2(i, o.props);
      return o.type !== C.Fragment && (s.ref = n ? Tl(n, a) : a), C.cloneElement(o, s);
    }
    return C.Children.count(o) > 1 ? C.Children.only(null) : null;
  });
  return t.displayName = `${e}.SlotClone`, t;
}
var zg = Symbol("radix.slottable");
// @__NO_SIDE_EFFECTS__
function H2(e) {
  const t = ({ children: r }) => /* @__PURE__ */ f.jsx(f.Fragment, { children: r });
  return t.displayName = `${e}.Slottable`, t.__radixId = zg, t;
}
function W2(e) {
  return C.isValidElement(e) && typeof e.type == "function" && "__radixId" in e.type && e.type.__radixId === zg;
}
function Y2(e, t) {
  const r = { ...t };
  for (const n in t) {
    const o = e[n], i = t[n];
    /^on[A-Z]/.test(n) ? o && i ? r[n] = (...s) => {
      const l = i(...s);
      return o(...s), l;
    } : o && (r[n] = o) : n === "style" ? r[n] = { ...o, ...i } : n === "className" && (r[n] = [o, i].filter(Boolean).join(" "));
  }
  return { ...e, ...r };
}
function q2(e) {
  let t = Object.getOwnPropertyDescriptor(e.props, "ref")?.get, r = t && "isReactWarning" in t && t.isReactWarning;
  return r ? e.ref : (t = Object.getOwnPropertyDescriptor(e, "ref")?.get, r = t && "isReactWarning" in t && t.isReactWarning, r ? e.props.ref : e.props.ref || e.ref);
}
const up = (e) => typeof e == "boolean" ? `${e}` : e === 0 ? "0" : e, dp = ca, zd = (e, t) => (r) => {
  var n;
  if (t?.variants == null) return dp(e, r?.class, r?.className);
  const { variants: o, defaultVariants: i } = t, a = Object.keys(o).map((c) => {
    const u = r?.[c], d = i?.[c];
    if (u === null) return null;
    const h = up(u) || up(d);
    return o[c][h];
  }), s = r && Object.entries(r).reduce((c, u) => {
    let [d, h] = u;
    return h === void 0 || (c[d] = h), c;
  }, {}), l = t == null || (n = t.compoundVariants) === null || n === void 0 ? void 0 : n.reduce((c, u) => {
    let { class: d, className: h, ...p } = u;
    return Object.entries(p).every((g) => {
      let [v, m] = g;
      return Array.isArray(m) ? m.includes({
        ...i,
        ...s
      }[v]) : {
        ...i,
        ...s
      }[v] === m;
    }) ? [
      ...c,
      d,
      h
    ] : c;
  }, []);
  return dp(e, a, l, r?.class, r?.className);
};
function Ee(...e) {
  return Fg(ca(e));
}
const X2 = zd(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",
        destructive: "bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline: "border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",
        secondary: "bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",
        link: "text-primary underline-offset-4 hover:underline"
      },
      size: {
        default: "h-9 px-4 py-2 has-[>svg]:px-3",
        sm: "h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",
        lg: "h-10 rounded-md px-6 has-[>svg]:px-4",
        icon: "size-9"
      }
    },
    defaultVariants: {
      variant: "default",
      size: "default"
    }
  }
);
function Fe({
  className: e,
  variant: t,
  size: r,
  asChild: n = !1,
  ...o
}) {
  const i = n ? V2 : "button";
  return /* @__PURE__ */ f.jsx(
    i,
    {
      "data-slot": "button",
      className: Ee(X2({ variant: t, size: r, className: e })),
      ...o
    }
  );
}
const Jn = C.forwardRef(({ className: e, ...t }, r) => /* @__PURE__ */ f.jsx(
  "div",
  {
    ref: r,
    className: Ee(
      "rounded-xl border bg-card text-card-foreground shadow",
      e
    ),
    ...t
  }
));
Jn.displayName = "Card";
const $g = C.forwardRef(({ className: e, ...t }, r) => /* @__PURE__ */ f.jsx(
  "div",
  {
    ref: r,
    className: Ee("flex flex-col space-y-1.5 p-6", e),
    ...t
  }
));
$g.displayName = "CardHeader";
const Gg = C.forwardRef(({ className: e, ...t }, r) => /* @__PURE__ */ f.jsx(
  "div",
  {
    ref: r,
    className: Ee("font-semibold leading-none tracking-tight", e),
    ...t
  }
));
Gg.displayName = "CardTitle";
const K2 = C.forwardRef(({ className: e, ...t }, r) => /* @__PURE__ */ f.jsx(
  "div",
  {
    ref: r,
    className: Ee("text-sm text-muted-foreground", e),
    ...t
  }
));
K2.displayName = "CardDescription";
const Uo = C.forwardRef(({ className: e, ...t }, r) => /* @__PURE__ */ f.jsx("div", { ref: r, className: Ee("p-6 pt-0", e), ...t }));
Uo.displayName = "CardContent";
const Z2 = C.forwardRef(({ className: e, ...t }, r) => /* @__PURE__ */ f.jsx(
  "div",
  {
    ref: r,
    className: Ee("flex items-center p-6 pt-0", e),
    ...t
  }
));
Z2.displayName = "CardFooter";
function ue(e, t, { checkForDefaultPrevented: r = !0 } = {}) {
  return function(o) {
    if (e?.(o), r === !1 || !o.defaultPrevented)
      return t?.(o);
  };
}
function Q2(e, t) {
  const r = C.createContext(t), n = (i) => {
    const { children: a, ...s } = i, l = C.useMemo(() => s, Object.values(s));
    return /* @__PURE__ */ f.jsx(r.Provider, { value: l, children: a });
  };
  n.displayName = e + "Provider";
  function o(i) {
    const a = C.useContext(r);
    if (a) return a;
    if (t !== void 0) return t;
    throw new Error(`\`${i}\` must be used within \`${e}\``);
  }
  return [n, o];
}
function Gt(e, t = []) {
  let r = [];
  function n(i, a) {
    const s = C.createContext(a), l = r.length;
    r = [...r, a];
    const c = (d) => {
      const { scope: h, children: p, ...g } = d, v = h?.[e]?.[l] || s, m = C.useMemo(() => g, Object.values(g));
      return /* @__PURE__ */ f.jsx(v.Provider, { value: m, children: p });
    };
    c.displayName = i + "Provider";
    function u(d, h) {
      const p = h?.[e]?.[l] || s, g = C.useContext(p);
      if (g) return g;
      if (a !== void 0) return a;
      throw new Error(`\`${d}\` must be used within \`${i}\``);
    }
    return [c, u];
  }
  const o = () => {
    const i = r.map((a) => C.createContext(a));
    return function(s) {
      const l = s?.[e] || i;
      return C.useMemo(
        () => ({ [`__scope${e}`]: { ...s, [e]: l } }),
        [s, l]
      );
    };
  };
  return o.scopeName = e, [n, J2(o, ...t)];
}
function J2(...e) {
  const t = e[0];
  if (e.length === 1) return t;
  const r = () => {
    const n = e.map((o) => ({
      useScope: o(),
      scopeName: o.scopeName
    }));
    return function(i) {
      const a = n.reduce((s, { useScope: l, scopeName: c }) => {
        const d = l(i)[`__scope${c}`];
        return { ...s, ...d };
      }, {});
      return C.useMemo(() => ({ [`__scope${t.scopeName}`]: a }), [a]);
    };
  };
  return r.scopeName = t.scopeName, r;
}
var wt = globalThis?.document ? C.useLayoutEffect : () => {
}, e_ = C[" useId ".trim().toString()] || (() => {
}), t_ = 0;
function ir(e) {
  const [t, r] = C.useState(e_());
  return wt(() => {
    r((n) => n ?? String(t_++));
  }, [e]), t ? `radix-${t}` : "";
}
var r_ = C[" useInsertionEffect ".trim().toString()] || wt;
function Sr({
  prop: e,
  defaultProp: t,
  onChange: r = () => {
  },
  caller: n
}) {
  const [o, i, a] = n_({
    defaultProp: t,
    onChange: r
  }), s = e !== void 0, l = s ? e : o;
  {
    const u = C.useRef(e !== void 0);
    C.useEffect(() => {
      const d = u.current;
      d !== s && console.warn(
        `${n} is changing from ${d ? "controlled" : "uncontrolled"} to ${s ? "controlled" : "uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`
      ), u.current = s;
    }, [s, n]);
  }
  const c = C.useCallback(
    (u) => {
      if (s) {
        const d = o_(u) ? u(e) : u;
        d !== e && a.current?.(d);
      } else
        i(u);
    },
    [s, e, i, a]
  );
  return [l, c];
}
function n_({
  defaultProp: e,
  onChange: t
}) {
  const [r, n] = C.useState(e), o = C.useRef(r), i = C.useRef(t);
  return r_(() => {
    i.current = t;
  }, [t]), C.useEffect(() => {
    o.current !== r && (i.current?.(r), o.current = r);
  }, [r, o]), [r, n, i];
}
function o_(e) {
  return typeof e == "function";
}
var i_ = [
  "a",
  "button",
  "div",
  "form",
  "h2",
  "h3",
  "img",
  "input",
  "label",
  "li",
  "nav",
  "ol",
  "p",
  "select",
  "span",
  "svg",
  "ul"
], me = i_.reduce((e, t) => {
  const r = /* @__PURE__ */ Qn(`Primitive.${t}`), n = C.forwardRef((o, i) => {
    const { asChild: a, ...s } = o, l = a ? r : t;
    return typeof window < "u" && (window[Symbol.for("radix-ui")] = !0), /* @__PURE__ */ f.jsx(l, { ...s, ref: i });
  });
  return n.displayName = `Primitive.${t}`, { ...e, [t]: n };
}, {});
function Vg(e, t) {
  e && Cl.flushSync(() => e.dispatchEvent(t));
}
function _t(e) {
  const t = C.useRef(e);
  return C.useEffect(() => {
    t.current = e;
  }), C.useMemo(() => (...r) => t.current?.(...r), []);
}
function a_(e, t = globalThis?.document) {
  const r = _t(e);
  C.useEffect(() => {
    const n = (o) => {
      o.key === "Escape" && r(o);
    };
    return t.addEventListener("keydown", n, { capture: !0 }), () => t.removeEventListener("keydown", n, { capture: !0 });
  }, [r, t]);
}
var s_ = "DismissableLayer", wu = "dismissableLayer.update", l_ = "dismissableLayer.pointerDownOutside", c_ = "dismissableLayer.focusOutside", fp, Ug = C.createContext({
  layers: /* @__PURE__ */ new Set(),
  layersWithOutsidePointerEventsDisabled: /* @__PURE__ */ new Set(),
  branches: /* @__PURE__ */ new Set()
}), Aa = C.forwardRef(
  (e, t) => {
    const {
      disableOutsidePointerEvents: r = !1,
      onEscapeKeyDown: n,
      onPointerDownOutside: o,
      onFocusOutside: i,
      onInteractOutside: a,
      onDismiss: s,
      ...l
    } = e, c = C.useContext(Ug), [u, d] = C.useState(null), h = u?.ownerDocument ?? globalThis?.document, [, p] = C.useState({}), g = _e(t, (T) => d(T)), v = Array.from(c.layers), [m] = [...c.layersWithOutsidePointerEventsDisabled].slice(-1), x = v.indexOf(m), y = u ? v.indexOf(u) : -1, b = c.layersWithOutsidePointerEventsDisabled.size > 0, w = y >= x, _ = f_((T) => {
      const k = T.target, j = [...c.branches].some((A) => A.contains(k));
      !w || j || (o?.(T), a?.(T), T.defaultPrevented || s?.());
    }, h), R = h_((T) => {
      const k = T.target;
      [...c.branches].some((A) => A.contains(k)) || (i?.(T), a?.(T), T.defaultPrevented || s?.());
    }, h);
    return a_((T) => {
      y === c.layers.size - 1 && (n?.(T), !T.defaultPrevented && s && (T.preventDefault(), s()));
    }, h), C.useEffect(() => {
      if (u)
        return r && (c.layersWithOutsidePointerEventsDisabled.size === 0 && (fp = h.body.style.pointerEvents, h.body.style.pointerEvents = "none"), c.layersWithOutsidePointerEventsDisabled.add(u)), c.layers.add(u), hp(), () => {
          r && c.layersWithOutsidePointerEventsDisabled.size === 1 && (h.body.style.pointerEvents = fp);
        };
    }, [u, h, r, c]), C.useEffect(() => () => {
      u && (c.layers.delete(u), c.layersWithOutsidePointerEventsDisabled.delete(u), hp());
    }, [u, c]), C.useEffect(() => {
      const T = () => p({});
      return document.addEventListener(wu, T), () => document.removeEventListener(wu, T);
    }, []), /* @__PURE__ */ f.jsx(
      me.div,
      {
        ...l,
        ref: g,
        style: {
          pointerEvents: b ? w ? "auto" : "none" : void 0,
          ...e.style
        },
        onFocusCapture: ue(e.onFocusCapture, R.onFocusCapture),
        onBlurCapture: ue(e.onBlurCapture, R.onBlurCapture),
        onPointerDownCapture: ue(
          e.onPointerDownCapture,
          _.onPointerDownCapture
        )
      }
    );
  }
);
Aa.displayName = s_;
var u_ = "DismissableLayerBranch", d_ = C.forwardRef((e, t) => {
  const r = C.useContext(Ug), n = C.useRef(null), o = _e(t, n);
  return C.useEffect(() => {
    const i = n.current;
    if (i)
      return r.branches.add(i), () => {
        r.branches.delete(i);
      };
  }, [r.branches]), /* @__PURE__ */ f.jsx(me.div, { ...e, ref: o });
});
d_.displayName = u_;
function f_(e, t = globalThis?.document) {
  const r = _t(e), n = C.useRef(!1), o = C.useRef(() => {
  });
  return C.useEffect(() => {
    const i = (s) => {
      if (s.target && !n.current) {
        let l = function() {
          Hg(
            l_,
            r,
            c,
            { discrete: !0 }
          );
        };
        const c = { originalEvent: s };
        s.pointerType === "touch" ? (t.removeEventListener("click", o.current), o.current = l, t.addEventListener("click", o.current, { once: !0 })) : l();
      } else
        t.removeEventListener("click", o.current);
      n.current = !1;
    }, a = window.setTimeout(() => {
      t.addEventListener("pointerdown", i);
    }, 0);
    return () => {
      window.clearTimeout(a), t.removeEventListener("pointerdown", i), t.removeEventListener("click", o.current);
    };
  }, [t, r]), {
    // ensures we check React component tree (not just DOM tree)
    onPointerDownCapture: () => n.current = !0
  };
}
function h_(e, t = globalThis?.document) {
  const r = _t(e), n = C.useRef(!1);
  return C.useEffect(() => {
    const o = (i) => {
      i.target && !n.current && Hg(c_, r, { originalEvent: i }, {
        discrete: !1
      });
    };
    return t.addEventListener("focusin", o), () => t.removeEventListener("focusin", o);
  }, [t, r]), {
    onFocusCapture: () => n.current = !0,
    onBlurCapture: () => n.current = !1
  };
}
function hp() {
  const e = new CustomEvent(wu);
  document.dispatchEvent(e);
}
function Hg(e, t, r, { discrete: n }) {
  const o = r.originalEvent.target, i = new CustomEvent(e, { bubbles: !1, cancelable: !0, detail: r });
  t && o.addEventListener(e, t, { once: !0 }), n ? Vg(o, i) : o.dispatchEvent(i);
}
var kc = "focusScope.autoFocusOnMount", Pc = "focusScope.autoFocusOnUnmount", pp = { bubbles: !1, cancelable: !0 }, p_ = "FocusScope", jl = C.forwardRef((e, t) => {
  const {
    loop: r = !1,
    trapped: n = !1,
    onMountAutoFocus: o,
    onUnmountAutoFocus: i,
    ...a
  } = e, [s, l] = C.useState(null), c = _t(o), u = _t(i), d = C.useRef(null), h = _e(t, (v) => l(v)), p = C.useRef({
    paused: !1,
    pause() {
      this.paused = !0;
    },
    resume() {
      this.paused = !1;
    }
  }).current;
  C.useEffect(() => {
    if (n) {
      let v = function(b) {
        if (p.paused || !s) return;
        const w = b.target;
        s.contains(w) ? d.current = w : vn(d.current, { select: !0 });
      }, m = function(b) {
        if (p.paused || !s) return;
        const w = b.relatedTarget;
        w !== null && (s.contains(w) || vn(d.current, { select: !0 }));
      }, x = function(b) {
        if (document.activeElement === document.body)
          for (const _ of b)
            _.removedNodes.length > 0 && vn(s);
      };
      document.addEventListener("focusin", v), document.addEventListener("focusout", m);
      const y = new MutationObserver(x);
      return s && y.observe(s, { childList: !0, subtree: !0 }), () => {
        document.removeEventListener("focusin", v), document.removeEventListener("focusout", m), y.disconnect();
      };
    }
  }, [n, s, p.paused]), C.useEffect(() => {
    if (s) {
      gp.add(p);
      const v = document.activeElement;
      if (!s.contains(v)) {
        const x = new CustomEvent(kc, pp);
        s.addEventListener(kc, c), s.dispatchEvent(x), x.defaultPrevented || (v_(b_(Wg(s)), { select: !0 }), document.activeElement === v && vn(s));
      }
      return () => {
        s.removeEventListener(kc, c), setTimeout(() => {
          const x = new CustomEvent(Pc, pp);
          s.addEventListener(Pc, u), s.dispatchEvent(x), x.defaultPrevented || vn(v ?? document.body, { select: !0 }), s.removeEventListener(Pc, u), gp.remove(p);
        }, 0);
      };
    }
  }, [s, c, u, p]);
  const g = C.useCallback(
    (v) => {
      if (!r && !n || p.paused) return;
      const m = v.key === "Tab" && !v.altKey && !v.ctrlKey && !v.metaKey, x = document.activeElement;
      if (m && x) {
        const y = v.currentTarget, [b, w] = g_(y);
        b && w ? !v.shiftKey && x === w ? (v.preventDefault(), r && vn(b, { select: !0 })) : v.shiftKey && x === b && (v.preventDefault(), r && vn(w, { select: !0 })) : x === y && v.preventDefault();
      }
    },
    [r, n, p.paused]
  );
  return /* @__PURE__ */ f.jsx(me.div, { tabIndex: -1, ...a, ref: h, onKeyDown: g });
});
jl.displayName = p_;
function v_(e, { select: t = !1 } = {}) {
  const r = document.activeElement;
  for (const n of e)
    if (vn(n, { select: t }), document.activeElement !== r) return;
}
function g_(e) {
  const t = Wg(e), r = vp(t, e), n = vp(t.reverse(), e);
  return [r, n];
}
function Wg(e) {
  const t = [], r = document.createTreeWalker(e, NodeFilter.SHOW_ELEMENT, {
    acceptNode: (n) => {
      const o = n.tagName === "INPUT" && n.type === "hidden";
      return n.disabled || n.hidden || o ? NodeFilter.FILTER_SKIP : n.tabIndex >= 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;
    }
  });
  for (; r.nextNode(); ) t.push(r.currentNode);
  return t;
}
function vp(e, t) {
  for (const r of e)
    if (!m_(r, { upTo: t })) return r;
}
function m_(e, { upTo: t }) {
  if (getComputedStyle(e).visibility === "hidden") return !0;
  for (; e; ) {
    if (t !== void 0 && e === t) return !1;
    if (getComputedStyle(e).display === "none") return !0;
    e = e.parentElement;
  }
  return !1;
}
function x_(e) {
  return e instanceof HTMLInputElement && "select" in e;
}
function vn(e, { select: t = !1 } = {}) {
  if (e && e.focus) {
    const r = document.activeElement;
    e.focus({ preventScroll: !0 }), e !== r && x_(e) && t && e.select();
  }
}
var gp = y_();
function y_() {
  let e = [];
  return {
    add(t) {
      const r = e[0];
      t !== r && r?.pause(), e = mp(e, t), e.unshift(t);
    },
    remove(t) {
      e = mp(e, t), e[0]?.resume();
    }
  };
}
function mp(e, t) {
  const r = [...e], n = r.indexOf(t);
  return n !== -1 && r.splice(n, 1), r;
}
function b_(e) {
  return e.filter((t) => t.tagName !== "A");
}
var w_ = "Portal", Oa = C.forwardRef((e, t) => {
  const { container: r, ...n } = e, [o, i] = C.useState(!1);
  wt(() => i(!0), []);
  const a = r || o && globalThis?.document?.body;
  return a ? GS.createPortal(/* @__PURE__ */ f.jsx(me.div, { ...n, ref: t }), a) : null;
});
Oa.displayName = w_;
function S_(e, t) {
  return C.useReducer((r, n) => t[r][n] ?? r, e);
}
var Nt = (e) => {
  const { present: t, children: r } = e, n = C_(t), o = typeof r == "function" ? r({ present: n.isPresent }) : C.Children.only(r), i = _e(n.ref, E_(o));
  return typeof r == "function" || n.isPresent ? C.cloneElement(o, { ref: i }) : null;
};
Nt.displayName = "Presence";
function C_(e) {
  const [t, r] = C.useState(), n = C.useRef(null), o = C.useRef(e), i = C.useRef("none"), a = e ? "mounted" : "unmounted", [s, l] = S_(a, {
    mounted: {
      UNMOUNT: "unmounted",
      ANIMATION_OUT: "unmountSuspended"
    },
    unmountSuspended: {
      MOUNT: "mounted",
      ANIMATION_END: "unmounted"
    },
    unmounted: {
      MOUNT: "mounted"
    }
  });
  return C.useEffect(() => {
    const c = ds(n.current);
    i.current = s === "mounted" ? c : "none";
  }, [s]), wt(() => {
    const c = n.current, u = o.current;
    if (u !== e) {
      const h = i.current, p = ds(c);
      e ? l("MOUNT") : p === "none" || c?.display === "none" ? l("UNMOUNT") : l(u && h !== p ? "ANIMATION_OUT" : "UNMOUNT"), o.current = e;
    }
  }, [e, l]), wt(() => {
    if (t) {
      let c;
      const u = t.ownerDocument.defaultView ?? window, d = (p) => {
        const v = ds(n.current).includes(p.animationName);
        if (p.target === t && v && (l("ANIMATION_END"), !o.current)) {
          const m = t.style.animationFillMode;
          t.style.animationFillMode = "forwards", c = u.setTimeout(() => {
            t.style.animationFillMode === "forwards" && (t.style.animationFillMode = m);
          });
        }
      }, h = (p) => {
        p.target === t && (i.current = ds(n.current));
      };
      return t.addEventListener("animationstart", h), t.addEventListener("animationcancel", d), t.addEventListener("animationend", d), () => {
        u.clearTimeout(c), t.removeEventListener("animationstart", h), t.removeEventListener("animationcancel", d), t.removeEventListener("animationend", d);
      };
    } else
      l("ANIMATION_END");
  }, [t, l]), {
    isPresent: ["mounted", "unmountSuspended"].includes(s),
    ref: C.useCallback((c) => {
      n.current = c ? getComputedStyle(c) : null, r(c);
    }, [])
  };
}
function ds(e) {
  return e?.animationName || "none";
}
function E_(e) {
  let t = Object.getOwnPropertyDescriptor(e.props, "ref")?.get, r = t && "isReactWarning" in t && t.isReactWarning;
  return r ? e.ref : (t = Object.getOwnPropertyDescriptor(e, "ref")?.get, r = t && "isReactWarning" in t && t.isReactWarning, r ? e.props.ref : e.props.ref || e.ref);
}
var Ac = 0;
function $d() {
  C.useEffect(() => {
    const e = document.querySelectorAll("[data-radix-focus-guard]");
    return document.body.insertAdjacentElement("afterbegin", e[0] ?? xp()), document.body.insertAdjacentElement("beforeend", e[1] ?? xp()), Ac++, () => {
      Ac === 1 && document.querySelectorAll("[data-radix-focus-guard]").forEach((t) => t.remove()), Ac--;
    };
  }, []);
}
function xp() {
  const e = document.createElement("span");
  return e.setAttribute("data-radix-focus-guard", ""), e.tabIndex = 0, e.style.outline = "none", e.style.opacity = "0", e.style.position = "fixed", e.style.pointerEvents = "none", e;
}
var Ar = function() {
  return Ar = Object.assign || function(t) {
    for (var r, n = 1, o = arguments.length; n < o; n++) {
      r = arguments[n];
      for (var i in r) Object.prototype.hasOwnProperty.call(r, i) && (t[i] = r[i]);
    }
    return t;
  }, Ar.apply(this, arguments);
};
function Yg(e, t) {
  var r = {};
  for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);
  if (e != null && typeof Object.getOwnPropertySymbols == "function")
    for (var o = 0, n = Object.getOwnPropertySymbols(e); o < n.length; o++)
      t.indexOf(n[o]) < 0 && Object.prototype.propertyIsEnumerable.call(e, n[o]) && (r[n[o]] = e[n[o]]);
  return r;
}
function __(e, t, r) {
  if (r || arguments.length === 2) for (var n = 0, o = t.length, i; n < o; n++)
    (i || !(n in t)) && (i || (i = Array.prototype.slice.call(t, 0, n)), i[n] = t[n]);
  return e.concat(i || Array.prototype.slice.call(t));
}
var Bs = "right-scroll-bar-position", zs = "width-before-scroll-bar", N_ = "with-scroll-bars-hidden", D_ = "--removed-body-scroll-bar-size";
function Oc(e, t) {
  return typeof e == "function" ? e(t) : e && (e.current = t), e;
}
function R_(e, t) {
  var r = Ce(function() {
    return {
      // value
      value: e,
      // last callback
      callback: t,
      // "memoized" public interface
      facade: {
        get current() {
          return r.value;
        },
        set current(n) {
          var o = r.value;
          o !== n && (r.value = n, r.callback(n, o));
        }
      }
    };
  })[0];
  return r.callback = t, r.facade;
}
var M_ = typeof window < "u" ? C.useLayoutEffect : C.useEffect, yp = /* @__PURE__ */ new WeakMap();
function T_(e, t) {
  var r = R_(null, function(n) {
    return e.forEach(function(o) {
      return Oc(o, n);
    });
  });
  return M_(function() {
    var n = yp.get(r);
    if (n) {
      var o = new Set(n), i = new Set(e), a = r.current;
      o.forEach(function(s) {
        i.has(s) || Oc(s, null);
      }), i.forEach(function(s) {
        o.has(s) || Oc(s, a);
      });
    }
    yp.set(r, e);
  }, [e]), r;
}
function j_(e) {
  return e;
}
function k_(e, t) {
  t === void 0 && (t = j_);
  var r = [], n = !1, o = {
    read: function() {
      if (n)
        throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");
      return r.length ? r[r.length - 1] : e;
    },
    useMedium: function(i) {
      var a = t(i, n);
      return r.push(a), function() {
        r = r.filter(function(s) {
          return s !== a;
        });
      };
    },
    assignSyncMedium: function(i) {
      for (n = !0; r.length; ) {
        var a = r;
        r = [], a.forEach(i);
      }
      r = {
        push: function(s) {
          return i(s);
        },
        filter: function() {
          return r;
        }
      };
    },
    assignMedium: function(i) {
      n = !0;
      var a = [];
      if (r.length) {
        var s = r;
        r = [], s.forEach(i), a = r;
      }
      var l = function() {
        var u = a;
        a = [], u.forEach(i);
      }, c = function() {
        return Promise.resolve().then(l);
      };
      c(), r = {
        push: function(u) {
          a.push(u), c();
        },
        filter: function(u) {
          return a = a.filter(u), r;
        }
      };
    }
  };
  return o;
}
function P_(e) {
  e === void 0 && (e = {});
  var t = k_(null);
  return t.options = Ar({ async: !0, ssr: !1 }, e), t;
}
var qg = function(e) {
  var t = e.sideCar, r = Yg(e, ["sideCar"]);
  if (!t)
    throw new Error("Sidecar: please provide `sideCar` property to import the right car");
  var n = t.read();
  if (!n)
    throw new Error("Sidecar medium not found");
  return C.createElement(n, Ar({}, r));
};
qg.isSideCarExport = !0;
function A_(e, t) {
  return e.useMedium(t), qg;
}
var Xg = P_(), Ic = function() {
}, kl = C.forwardRef(function(e, t) {
  var r = C.useRef(null), n = C.useState({
    onScrollCapture: Ic,
    onWheelCapture: Ic,
    onTouchMoveCapture: Ic
  }), o = n[0], i = n[1], a = e.forwardProps, s = e.children, l = e.className, c = e.removeScrollBar, u = e.enabled, d = e.shards, h = e.sideCar, p = e.noRelative, g = e.noIsolation, v = e.inert, m = e.allowPinchZoom, x = e.as, y = x === void 0 ? "div" : x, b = e.gapMode, w = Yg(e, ["forwardProps", "children", "className", "removeScrollBar", "enabled", "shards", "sideCar", "noRelative", "noIsolation", "inert", "allowPinchZoom", "as", "gapMode"]), _ = h, R = T_([r, t]), T = Ar(Ar({}, w), o);
  return C.createElement(
    C.Fragment,
    null,
    u && C.createElement(_, { sideCar: Xg, removeScrollBar: c, shards: d, noRelative: p, noIsolation: g, inert: v, setCallbacks: i, allowPinchZoom: !!m, lockRef: r, gapMode: b }),
    a ? C.cloneElement(C.Children.only(s), Ar(Ar({}, T), { ref: R })) : C.createElement(y, Ar({}, T, { className: l, ref: R }), s)
  );
});
kl.defaultProps = {
  enabled: !0,
  removeScrollBar: !0,
  inert: !1
};
kl.classNames = {
  fullWidth: zs,
  zeroRight: Bs
};
var O_ = function() {
  if (typeof __webpack_nonce__ < "u")
    return __webpack_nonce__;
};
function I_() {
  if (!document)
    return null;
  var e = document.createElement("style");
  e.type = "text/css";
  var t = O_();
  return t && e.setAttribute("nonce", t), e;
}
function F_(e, t) {
  e.styleSheet ? e.styleSheet.cssText = t : e.appendChild(document.createTextNode(t));
}
function L_(e) {
  var t = document.head || document.getElementsByTagName("head")[0];
  t.appendChild(e);
}
var B_ = function() {
  var e = 0, t = null;
  return {
    add: function(r) {
      e == 0 && (t = I_()) && (F_(t, r), L_(t)), e++;
    },
    remove: function() {
      e--, !e && t && (t.parentNode && t.parentNode.removeChild(t), t = null);
    }
  };
}, z_ = function() {
  var e = B_();
  return function(t, r) {
    C.useEffect(function() {
      return e.add(t), function() {
        e.remove();
      };
    }, [t && r]);
  };
}, Kg = function() {
  var e = z_(), t = function(r) {
    var n = r.styles, o = r.dynamic;
    return e(n, o), null;
  };
  return t;
}, $_ = {
  left: 0,
  top: 0,
  right: 0,
  gap: 0
}, Fc = function(e) {
  return parseInt(e || "", 10) || 0;
}, G_ = function(e) {
  var t = window.getComputedStyle(document.body), r = t[e === "padding" ? "paddingLeft" : "marginLeft"], n = t[e === "padding" ? "paddingTop" : "marginTop"], o = t[e === "padding" ? "paddingRight" : "marginRight"];
  return [Fc(r), Fc(n), Fc(o)];
}, V_ = function(e) {
  if (e === void 0 && (e = "margin"), typeof window > "u")
    return $_;
  var t = G_(e), r = document.documentElement.clientWidth, n = window.innerWidth;
  return {
    left: t[0],
    top: t[1],
    right: t[2],
    gap: Math.max(0, n - r + t[2] - t[0])
  };
}, U_ = Kg(), Lo = "data-scroll-locked", H_ = function(e, t, r, n) {
  var o = e.left, i = e.top, a = e.right, s = e.gap;
  return r === void 0 && (r = "margin"), `
  .`.concat(N_, ` {
   overflow: hidden `).concat(n, `;
   padding-right: `).concat(s, "px ").concat(n, `;
  }
  body[`).concat(Lo, `] {
    overflow: hidden `).concat(n, `;
    overscroll-behavior: contain;
    `).concat([
    t && "position: relative ".concat(n, ";"),
    r === "margin" && `
    padding-left: `.concat(o, `px;
    padding-top: `).concat(i, `px;
    padding-right: `).concat(a, `px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s, "px ").concat(n, `;
    `),
    r === "padding" && "padding-right: ".concat(s, "px ").concat(n, ";")
  ].filter(Boolean).join(""), `
  }
  
  .`).concat(Bs, ` {
    right: `).concat(s, "px ").concat(n, `;
  }
  
  .`).concat(zs, ` {
    margin-right: `).concat(s, "px ").concat(n, `;
  }
  
  .`).concat(Bs, " .").concat(Bs, ` {
    right: 0 `).concat(n, `;
  }
  
  .`).concat(zs, " .").concat(zs, ` {
    margin-right: 0 `).concat(n, `;
  }
  
  body[`).concat(Lo, `] {
    `).concat(D_, ": ").concat(s, `px;
  }
`);
}, bp = function() {
  var e = parseInt(document.body.getAttribute(Lo) || "0", 10);
  return isFinite(e) ? e : 0;
}, W_ = function() {
  C.useEffect(function() {
    return document.body.setAttribute(Lo, (bp() + 1).toString()), function() {
      var e = bp() - 1;
      e <= 0 ? document.body.removeAttribute(Lo) : document.body.setAttribute(Lo, e.toString());
    };
  }, []);
}, Y_ = function(e) {
  var t = e.noRelative, r = e.noImportant, n = e.gapMode, o = n === void 0 ? "margin" : n;
  W_();
  var i = C.useMemo(function() {
    return V_(o);
  }, [o]);
  return C.createElement(U_, { styles: H_(i, !t, o, r ? "" : "!important") });
}, Su = !1;
if (typeof window < "u")
  try {
    var fs = Object.defineProperty({}, "passive", {
      get: function() {
        return Su = !0, !0;
      }
    });
    window.addEventListener("test", fs, fs), window.removeEventListener("test", fs, fs);
  } catch {
    Su = !1;
  }
var bo = Su ? { passive: !1 } : !1, q_ = function(e) {
  return e.tagName === "TEXTAREA";
}, Zg = function(e, t) {
  if (!(e instanceof Element))
    return !1;
  var r = window.getComputedStyle(e);
  return (
    // not-not-scrollable
    r[t] !== "hidden" && // contains scroll inside self
    !(r.overflowY === r.overflowX && !q_(e) && r[t] === "visible")
  );
}, X_ = function(e) {
  return Zg(e, "overflowY");
}, K_ = function(e) {
  return Zg(e, "overflowX");
}, wp = function(e, t) {
  var r = t.ownerDocument, n = t;
  do {
    typeof ShadowRoot < "u" && n instanceof ShadowRoot && (n = n.host);
    var o = Qg(e, n);
    if (o) {
      var i = Jg(e, n), a = i[1], s = i[2];
      if (a > s)
        return !0;
    }
    n = n.parentNode;
  } while (n && n !== r.body);
  return !1;
}, Z_ = function(e) {
  var t = e.scrollTop, r = e.scrollHeight, n = e.clientHeight;
  return [
    t,
    r,
    n
  ];
}, Q_ = function(e) {
  var t = e.scrollLeft, r = e.scrollWidth, n = e.clientWidth;
  return [
    t,
    r,
    n
  ];
}, Qg = function(e, t) {
  return e === "v" ? X_(t) : K_(t);
}, Jg = function(e, t) {
  return e === "v" ? Z_(t) : Q_(t);
}, J_ = function(e, t) {
  return e === "h" && t === "rtl" ? -1 : 1;
}, eN = function(e, t, r, n, o) {
  var i = J_(e, window.getComputedStyle(t).direction), a = i * n, s = r.target, l = t.contains(s), c = !1, u = a > 0, d = 0, h = 0;
  do {
    if (!s)
      break;
    var p = Jg(e, s), g = p[0], v = p[1], m = p[2], x = v - m - i * g;
    (g || x) && Qg(e, s) && (d += x, h += g);
    var y = s.parentNode;
    s = y && y.nodeType === Node.DOCUMENT_FRAGMENT_NODE ? y.host : y;
  } while (
    // portaled content
    !l && s !== document.body || // self content
    l && (t.contains(s) || t === s)
  );
  return (u && Math.abs(d) < 1 || !u && Math.abs(h) < 1) && (c = !0), c;
}, hs = function(e) {
  return "changedTouches" in e ? [e.changedTouches[0].clientX, e.changedTouches[0].clientY] : [0, 0];
}, Sp = function(e) {
  return [e.deltaX, e.deltaY];
}, Cp = function(e) {
  return e && "current" in e ? e.current : e;
}, tN = function(e, t) {
  return e[0] === t[0] && e[1] === t[1];
}, rN = function(e) {
  return `
  .block-interactivity-`.concat(e, ` {pointer-events: none;}
  .allow-interactivity-`).concat(e, ` {pointer-events: all;}
`);
}, nN = 0, wo = [];
function oN(e) {
  var t = C.useRef([]), r = C.useRef([0, 0]), n = C.useRef(), o = C.useState(nN++)[0], i = C.useState(Kg)[0], a = C.useRef(e);
  C.useEffect(function() {
    a.current = e;
  }, [e]), C.useEffect(function() {
    if (e.inert) {
      document.body.classList.add("block-interactivity-".concat(o));
      var v = __([e.lockRef.current], (e.shards || []).map(Cp), !0).filter(Boolean);
      return v.forEach(function(m) {
        return m.classList.add("allow-interactivity-".concat(o));
      }), function() {
        document.body.classList.remove("block-interactivity-".concat(o)), v.forEach(function(m) {
          return m.classList.remove("allow-interactivity-".concat(o));
        });
      };
    }
  }, [e.inert, e.lockRef.current, e.shards]);
  var s = C.useCallback(function(v, m) {
    if ("touches" in v && v.touches.length === 2 || v.type === "wheel" && v.ctrlKey)
      return !a.current.allowPinchZoom;
    var x = hs(v), y = r.current, b = "deltaX" in v ? v.deltaX : y[0] - x[0], w = "deltaY" in v ? v.deltaY : y[1] - x[1], _, R = v.target, T = Math.abs(b) > Math.abs(w) ? "h" : "v";
    if ("touches" in v && T === "h" && R.type === "range")
      return !1;
    var k = wp(T, R);
    if (!k)
      return !0;
    if (k ? _ = T : (_ = T === "v" ? "h" : "v", k = wp(T, R)), !k)
      return !1;
    if (!n.current && "changedTouches" in v && (b || w) && (n.current = _), !_)
      return !0;
    var j = n.current || _;
    return eN(j, m, v, j === "h" ? b : w);
  }, []), l = C.useCallback(function(v) {
    var m = v;
    if (!(!wo.length || wo[wo.length - 1] !== i)) {
      var x = "deltaY" in m ? Sp(m) : hs(m), y = t.current.filter(function(_) {
        return _.name === m.type && (_.target === m.target || m.target === _.shadowParent) && tN(_.delta, x);
      })[0];
      if (y && y.should) {
        m.cancelable && m.preventDefault();
        return;
      }
      if (!y) {
        var b = (a.current.shards || []).map(Cp).filter(Boolean).filter(function(_) {
          return _.contains(m.target);
        }), w = b.length > 0 ? s(m, b[0]) : !a.current.noIsolation;
        w && m.cancelable && m.preventDefault();
      }
    }
  }, []), c = C.useCallback(function(v, m, x, y) {
    var b = { name: v, delta: m, target: x, should: y, shadowParent: iN(x) };
    t.current.push(b), setTimeout(function() {
      t.current = t.current.filter(function(w) {
        return w !== b;
      });
    }, 1);
  }, []), u = C.useCallback(function(v) {
    r.current = hs(v), n.current = void 0;
  }, []), d = C.useCallback(function(v) {
    c(v.type, Sp(v), v.target, s(v, e.lockRef.current));
  }, []), h = C.useCallback(function(v) {
    c(v.type, hs(v), v.target, s(v, e.lockRef.current));
  }, []);
  C.useEffect(function() {
    return wo.push(i), e.setCallbacks({
      onScrollCapture: d,
      onWheelCapture: d,
      onTouchMoveCapture: h
    }), document.addEventListener("wheel", l, bo), document.addEventListener("touchmove", l, bo), document.addEventListener("touchstart", u, bo), function() {
      wo = wo.filter(function(v) {
        return v !== i;
      }), document.removeEventListener("wheel", l, bo), document.removeEventListener("touchmove", l, bo), document.removeEventListener("touchstart", u, bo);
    };
  }, []);
  var p = e.removeScrollBar, g = e.inert;
  return C.createElement(
    C.Fragment,
    null,
    g ? C.createElement(i, { styles: rN(o) }) : null,
    p ? C.createElement(Y_, { noRelative: e.noRelative, gapMode: e.gapMode }) : null
  );
}
function iN(e) {
  for (var t = null; e !== null; )
    e instanceof ShadowRoot && (t = e.host, e = e.host), e = e.parentNode;
  return t;
}
const aN = A_(Xg, oN);
var Pl = C.forwardRef(function(e, t) {
  return C.createElement(kl, Ar({}, e, { ref: t, sideCar: aN }));
});
Pl.classNames = kl.classNames;
var sN = function(e) {
  if (typeof document > "u")
    return null;
  var t = Array.isArray(e) ? e[0] : e;
  return t.ownerDocument.body;
}, So = /* @__PURE__ */ new WeakMap(), ps = /* @__PURE__ */ new WeakMap(), vs = {}, Lc = 0, em = function(e) {
  return e && (e.host || em(e.parentNode));
}, lN = function(e, t) {
  return t.map(function(r) {
    if (e.contains(r))
      return r;
    var n = em(r);
    return n && e.contains(n) ? n : (console.error("aria-hidden", r, "in not contained inside", e, ". Doing nothing"), null);
  }).filter(function(r) {
    return !!r;
  });
}, cN = function(e, t, r, n) {
  var o = lN(t, Array.isArray(e) ? e : [e]);
  vs[r] || (vs[r] = /* @__PURE__ */ new WeakMap());
  var i = vs[r], a = [], s = /* @__PURE__ */ new Set(), l = new Set(o), c = function(d) {
    !d || s.has(d) || (s.add(d), c(d.parentNode));
  };
  o.forEach(c);
  var u = function(d) {
    !d || l.has(d) || Array.prototype.forEach.call(d.children, function(h) {
      if (s.has(h))
        u(h);
      else
        try {
          var p = h.getAttribute(n), g = p !== null && p !== "false", v = (So.get(h) || 0) + 1, m = (i.get(h) || 0) + 1;
          So.set(h, v), i.set(h, m), a.push(h), v === 1 && g && ps.set(h, !0), m === 1 && h.setAttribute(r, "true"), g || h.setAttribute(n, "true");
        } catch (x) {
          console.error("aria-hidden: cannot operate on ", h, x);
        }
    });
  };
  return u(t), s.clear(), Lc++, function() {
    a.forEach(function(d) {
      var h = So.get(d) - 1, p = i.get(d) - 1;
      So.set(d, h), i.set(d, p), h || (ps.has(d) || d.removeAttribute(n), ps.delete(d)), p || d.removeAttribute(r);
    }), Lc--, Lc || (So = /* @__PURE__ */ new WeakMap(), So = /* @__PURE__ */ new WeakMap(), ps = /* @__PURE__ */ new WeakMap(), vs = {});
  };
}, Gd = function(e, t, r) {
  r === void 0 && (r = "data-aria-hidden");
  var n = Array.from(Array.isArray(e) ? e : [e]), o = sN(e);
  return o ? (n.push.apply(n, Array.from(o.querySelectorAll("[aria-live], script"))), cN(n, o, r, "aria-hidden")) : function() {
    return null;
  };
}, Al = "Dialog", [tm, dF] = Gt(Al), [uN, jr] = tm(Al), rm = (e) => {
  const {
    __scopeDialog: t,
    children: r,
    open: n,
    defaultOpen: o,
    onOpenChange: i,
    modal: a = !0
  } = e, s = C.useRef(null), l = C.useRef(null), [c, u] = Sr({
    prop: n,
    defaultProp: o ?? !1,
    onChange: i,
    caller: Al
  });
  return /* @__PURE__ */ f.jsx(
    uN,
    {
      scope: t,
      triggerRef: s,
      contentRef: l,
      contentId: ir(),
      titleId: ir(),
      descriptionId: ir(),
      open: c,
      onOpenChange: u,
      onOpenToggle: C.useCallback(() => u((d) => !d), [u]),
      modal: a,
      children: r
    }
  );
};
rm.displayName = Al;
var nm = "DialogTrigger", om = C.forwardRef(
  (e, t) => {
    const { __scopeDialog: r, ...n } = e, o = jr(nm, r), i = _e(t, o.triggerRef);
    return /* @__PURE__ */ f.jsx(
      me.button,
      {
        type: "button",
        "aria-haspopup": "dialog",
        "aria-expanded": o.open,
        "aria-controls": o.contentId,
        "data-state": Hd(o.open),
        ...n,
        ref: i,
        onClick: ue(e.onClick, o.onOpenToggle)
      }
    );
  }
);
om.displayName = nm;
var Vd = "DialogPortal", [dN, im] = tm(Vd, {
  forceMount: void 0
}), am = (e) => {
  const { __scopeDialog: t, forceMount: r, children: n, container: o } = e, i = jr(Vd, t);
  return /* @__PURE__ */ f.jsx(dN, { scope: t, forceMount: r, children: C.Children.map(n, (a) => /* @__PURE__ */ f.jsx(Nt, { present: r || i.open, children: /* @__PURE__ */ f.jsx(Oa, { asChild: !0, container: o, children: a }) })) });
};
am.displayName = Vd;
var Xs = "DialogOverlay", sm = C.forwardRef(
  (e, t) => {
    const r = im(Xs, e.__scopeDialog), { forceMount: n = r.forceMount, ...o } = e, i = jr(Xs, e.__scopeDialog);
    return i.modal ? /* @__PURE__ */ f.jsx(Nt, { present: n || i.open, children: /* @__PURE__ */ f.jsx(hN, { ...o, ref: t }) }) : null;
  }
);
sm.displayName = Xs;
var fN = /* @__PURE__ */ Qn("DialogOverlay.RemoveScroll"), hN = C.forwardRef(
  (e, t) => {
    const { __scopeDialog: r, ...n } = e, o = jr(Xs, r);
    return (
      // Make sure `Content` is scrollable even when it doesn't live inside `RemoveScroll`
      // ie. when `Overlay` and `Content` are siblings
      /* @__PURE__ */ f.jsx(Pl, { as: fN, allowPinchZoom: !0, shards: [o.contentRef], children: /* @__PURE__ */ f.jsx(
        me.div,
        {
          "data-state": Hd(o.open),
          ...n,
          ref: t,
          style: { pointerEvents: "auto", ...n.style }
        }
      ) })
    );
  }
), eo = "DialogContent", lm = C.forwardRef(
  (e, t) => {
    const r = im(eo, e.__scopeDialog), { forceMount: n = r.forceMount, ...o } = e, i = jr(eo, e.__scopeDialog);
    return /* @__PURE__ */ f.jsx(Nt, { present: n || i.open, children: i.modal ? /* @__PURE__ */ f.jsx(pN, { ...o, ref: t }) : /* @__PURE__ */ f.jsx(vN, { ...o, ref: t }) });
  }
);
lm.displayName = eo;
var pN = C.forwardRef(
  (e, t) => {
    const r = jr(eo, e.__scopeDialog), n = C.useRef(null), o = _e(t, r.contentRef, n);
    return C.useEffect(() => {
      const i = n.current;
      if (i) return Gd(i);
    }, []), /* @__PURE__ */ f.jsx(
      cm,
      {
        ...e,
        ref: o,
        trapFocus: r.open,
        disableOutsidePointerEvents: !0,
        onCloseAutoFocus: ue(e.onCloseAutoFocus, (i) => {
          i.preventDefault(), r.triggerRef.current?.focus();
        }),
        onPointerDownOutside: ue(e.onPointerDownOutside, (i) => {
          const a = i.detail.originalEvent, s = a.button === 0 && a.ctrlKey === !0;
          (a.button === 2 || s) && i.preventDefault();
        }),
        onFocusOutside: ue(
          e.onFocusOutside,
          (i) => i.preventDefault()
        )
      }
    );
  }
), vN = C.forwardRef(
  (e, t) => {
    const r = jr(eo, e.__scopeDialog), n = C.useRef(!1), o = C.useRef(!1);
    return /* @__PURE__ */ f.jsx(
      cm,
      {
        ...e,
        ref: t,
        trapFocus: !1,
        disableOutsidePointerEvents: !1,
        onCloseAutoFocus: (i) => {
          e.onCloseAutoFocus?.(i), i.defaultPrevented || (n.current || r.triggerRef.current?.focus(), i.preventDefault()), n.current = !1, o.current = !1;
        },
        onInteractOutside: (i) => {
          e.onInteractOutside?.(i), i.defaultPrevented || (n.current = !0, i.detail.originalEvent.type === "pointerdown" && (o.current = !0));
          const a = i.target;
          r.triggerRef.current?.contains(a) && i.preventDefault(), i.detail.originalEvent.type === "focusin" && o.current && i.preventDefault();
        }
      }
    );
  }
), cm = C.forwardRef(
  (e, t) => {
    const { __scopeDialog: r, trapFocus: n, onOpenAutoFocus: o, onCloseAutoFocus: i, ...a } = e, s = jr(eo, r), l = C.useRef(null), c = _e(t, l);
    return $d(), /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
      /* @__PURE__ */ f.jsx(
        jl,
        {
          asChild: !0,
          loop: !0,
          trapped: n,
          onMountAutoFocus: o,
          onUnmountAutoFocus: i,
          children: /* @__PURE__ */ f.jsx(
            Aa,
            {
              role: "dialog",
              id: s.contentId,
              "aria-describedby": s.descriptionId,
              "aria-labelledby": s.titleId,
              "data-state": Hd(s.open),
              ...a,
              ref: c,
              onDismiss: () => s.onOpenChange(!1)
            }
          )
        }
      ),
      /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
        /* @__PURE__ */ f.jsx(mN, { titleId: s.titleId }),
        /* @__PURE__ */ f.jsx(yN, { contentRef: l, descriptionId: s.descriptionId })
      ] })
    ] });
  }
), Ud = "DialogTitle", um = C.forwardRef(
  (e, t) => {
    const { __scopeDialog: r, ...n } = e, o = jr(Ud, r);
    return /* @__PURE__ */ f.jsx(me.h2, { id: o.titleId, ...n, ref: t });
  }
);
um.displayName = Ud;
var dm = "DialogDescription", gN = C.forwardRef(
  (e, t) => {
    const { __scopeDialog: r, ...n } = e, o = jr(dm, r);
    return /* @__PURE__ */ f.jsx(me.p, { id: o.descriptionId, ...n, ref: t });
  }
);
gN.displayName = dm;
var fm = "DialogClose", hm = C.forwardRef(
  (e, t) => {
    const { __scopeDialog: r, ...n } = e, o = jr(fm, r);
    return /* @__PURE__ */ f.jsx(
      me.button,
      {
        type: "button",
        ...n,
        ref: t,
        onClick: ue(e.onClick, () => o.onOpenChange(!1))
      }
    );
  }
);
hm.displayName = fm;
function Hd(e) {
  return e ? "open" : "closed";
}
var pm = "DialogTitleWarning", [fF, vm] = Q2(pm, {
  contentName: eo,
  titleName: Ud,
  docsSlug: "dialog"
}), mN = ({ titleId: e }) => {
  const t = vm(pm), r = `\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;
  return C.useEffect(() => {
    e && (document.getElementById(e) || console.error(r));
  }, [r, e]), null;
}, xN = "DialogDescriptionWarning", yN = ({ contentRef: e, descriptionId: t }) => {
  const n = `Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${vm(xN).contentName}}.`;
  return C.useEffect(() => {
    const o = e.current?.getAttribute("aria-describedby");
    t && o && (document.getElementById(t) || console.warn(n));
  }, [n, e, t]), null;
}, bN = rm, wN = om, SN = am, CN = sm, EN = lm, _N = um, NN = hm;
function gm({
  ...e
}) {
  return /* @__PURE__ */ f.jsx(bN, { "data-slot": "dialog", ...e });
}
function mm({
  ...e
}) {
  return /* @__PURE__ */ f.jsx(wN, { "data-slot": "dialog-trigger", ...e });
}
function DN({
  ...e
}) {
  return /* @__PURE__ */ f.jsx(SN, { "data-slot": "dialog-portal", ...e });
}
function RN({
  className: e,
  ...t
}) {
  return /* @__PURE__ */ f.jsx(
    CN,
    {
      "data-slot": "dialog-overlay",
      className: Ee(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        e
      ),
      ...t
    }
  );
}
function xm({
  className: e,
  children: t,
  showCloseButton: r = !0,
  ...n
}) {
  return /* @__PURE__ */ f.jsxs(DN, { "data-slot": "dialog-portal", children: [
    /* @__PURE__ */ f.jsx(RN, {}),
    /* @__PURE__ */ f.jsxs(
      EN,
      {
        "data-slot": "dialog-content",
        className: Ee(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",
          e
        ),
        ...n,
        children: [
          t,
          r && /* @__PURE__ */ f.jsxs(
            NN,
            {
              "data-slot": "dialog-close",
              className: "ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
              children: [
                /* @__PURE__ */ f.jsx(Rl, {}),
                /* @__PURE__ */ f.jsx("span", { className: "sr-only", children: "Close" })
              ]
            }
          )
        ]
      }
    )
  ] });
}
function MN({ className: e, ...t }) {
  return /* @__PURE__ */ f.jsx(
    "div",
    {
      "data-slot": "dialog-header",
      className: Ee("flex flex-col gap-2 text-center sm:text-left", e),
      ...t
    }
  );
}
function ym({
  className: e,
  ...t
}) {
  return /* @__PURE__ */ f.jsx(
    _N,
    {
      "data-slot": "dialog-title",
      className: Ee("text-lg leading-none font-semibold", e),
      ...t
    }
  );
}
const TN = ["top", "right", "bottom", "left"], Dn = Math.min, Ut = Math.max, Ks = Math.round, gs = Math.floor, Lr = (e) => ({
  x: e,
  y: e
}), jN = {
  left: "right",
  right: "left",
  bottom: "top",
  top: "bottom"
}, kN = {
  start: "end",
  end: "start"
};
function Cu(e, t, r) {
  return Ut(e, Dn(t, r));
}
function nn(e, t) {
  return typeof e == "function" ? e(t) : e;
}
function on(e) {
  return e.split("-")[0];
}
function fi(e) {
  return e.split("-")[1];
}
function Wd(e) {
  return e === "x" ? "y" : "x";
}
function Yd(e) {
  return e === "y" ? "height" : "width";
}
function Fr(e) {
  return ["top", "bottom"].includes(on(e)) ? "y" : "x";
}
function qd(e) {
  return Wd(Fr(e));
}
function PN(e, t, r) {
  r === void 0 && (r = !1);
  const n = fi(e), o = qd(e), i = Yd(o);
  let a = o === "x" ? n === (r ? "end" : "start") ? "right" : "left" : n === "start" ? "bottom" : "top";
  return t.reference[i] > t.floating[i] && (a = Zs(a)), [a, Zs(a)];
}
function AN(e) {
  const t = Zs(e);
  return [Eu(e), t, Eu(t)];
}
function Eu(e) {
  return e.replace(/start|end/g, (t) => kN[t]);
}
function ON(e, t, r) {
  const n = ["left", "right"], o = ["right", "left"], i = ["top", "bottom"], a = ["bottom", "top"];
  switch (e) {
    case "top":
    case "bottom":
      return r ? t ? o : n : t ? n : o;
    case "left":
    case "right":
      return t ? i : a;
    default:
      return [];
  }
}
function IN(e, t, r, n) {
  const o = fi(e);
  let i = ON(on(e), r === "start", n);
  return o && (i = i.map((a) => a + "-" + o), t && (i = i.concat(i.map(Eu)))), i;
}
function Zs(e) {
  return e.replace(/left|right|bottom|top/g, (t) => jN[t]);
}
function FN(e) {
  return {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0,
    ...e
  };
}
function bm(e) {
  return typeof e != "number" ? FN(e) : {
    top: e,
    right: e,
    bottom: e,
    left: e
  };
}
function Qs(e) {
  const {
    x: t,
    y: r,
    width: n,
    height: o
  } = e;
  return {
    width: n,
    height: o,
    top: r,
    left: t,
    right: t + n,
    bottom: r + o,
    x: t,
    y: r
  };
}
function Ep(e, t, r) {
  let {
    reference: n,
    floating: o
  } = e;
  const i = Fr(t), a = qd(t), s = Yd(a), l = on(t), c = i === "y", u = n.x + n.width / 2 - o.width / 2, d = n.y + n.height / 2 - o.height / 2, h = n[s] / 2 - o[s] / 2;
  let p;
  switch (l) {
    case "top":
      p = {
        x: u,
        y: n.y - o.height
      };
      break;
    case "bottom":
      p = {
        x: u,
        y: n.y + n.height
      };
      break;
    case "right":
      p = {
        x: n.x + n.width,
        y: d
      };
      break;
    case "left":
      p = {
        x: n.x - o.width,
        y: d
      };
      break;
    default:
      p = {
        x: n.x,
        y: n.y
      };
  }
  switch (fi(t)) {
    case "start":
      p[a] -= h * (r && c ? -1 : 1);
      break;
    case "end":
      p[a] += h * (r && c ? -1 : 1);
      break;
  }
  return p;
}
const LN = async (e, t, r) => {
  const {
    placement: n = "bottom",
    strategy: o = "absolute",
    middleware: i = [],
    platform: a
  } = r, s = i.filter(Boolean), l = await (a.isRTL == null ? void 0 : a.isRTL(t));
  let c = await a.getElementRects({
    reference: e,
    floating: t,
    strategy: o
  }), {
    x: u,
    y: d
  } = Ep(c, n, l), h = n, p = {}, g = 0;
  for (let v = 0; v < s.length; v++) {
    const {
      name: m,
      fn: x
    } = s[v], {
      x: y,
      y: b,
      data: w,
      reset: _
    } = await x({
      x: u,
      y: d,
      initialPlacement: n,
      placement: h,
      strategy: o,
      middlewareData: p,
      rects: c,
      platform: a,
      elements: {
        reference: e,
        floating: t
      }
    });
    u = y ?? u, d = b ?? d, p = {
      ...p,
      [m]: {
        ...p[m],
        ...w
      }
    }, _ && g <= 50 && (g++, typeof _ == "object" && (_.placement && (h = _.placement), _.rects && (c = _.rects === !0 ? await a.getElementRects({
      reference: e,
      floating: t,
      strategy: o
    }) : _.rects), {
      x: u,
      y: d
    } = Ep(c, h, l)), v = -1);
  }
  return {
    x: u,
    y: d,
    placement: h,
    strategy: o,
    middlewareData: p
  };
};
async function ua(e, t) {
  var r;
  t === void 0 && (t = {});
  const {
    x: n,
    y: o,
    platform: i,
    rects: a,
    elements: s,
    strategy: l
  } = e, {
    boundary: c = "clippingAncestors",
    rootBoundary: u = "viewport",
    elementContext: d = "floating",
    altBoundary: h = !1,
    padding: p = 0
  } = nn(t, e), g = bm(p), m = s[h ? d === "floating" ? "reference" : "floating" : d], x = Qs(await i.getClippingRect({
    element: (r = await (i.isElement == null ? void 0 : i.isElement(m))) == null || r ? m : m.contextElement || await (i.getDocumentElement == null ? void 0 : i.getDocumentElement(s.floating)),
    boundary: c,
    rootBoundary: u,
    strategy: l
  })), y = d === "floating" ? {
    x: n,
    y: o,
    width: a.floating.width,
    height: a.floating.height
  } : a.reference, b = await (i.getOffsetParent == null ? void 0 : i.getOffsetParent(s.floating)), w = await (i.isElement == null ? void 0 : i.isElement(b)) ? await (i.getScale == null ? void 0 : i.getScale(b)) || {
    x: 1,
    y: 1
  } : {
    x: 1,
    y: 1
  }, _ = Qs(i.convertOffsetParentRelativeRectToViewportRelativeRect ? await i.convertOffsetParentRelativeRectToViewportRelativeRect({
    elements: s,
    rect: y,
    offsetParent: b,
    strategy: l
  }) : y);
  return {
    top: (x.top - _.top + g.top) / w.y,
    bottom: (_.bottom - x.bottom + g.bottom) / w.y,
    left: (x.left - _.left + g.left) / w.x,
    right: (_.right - x.right + g.right) / w.x
  };
}
const BN = (e) => ({
  name: "arrow",
  options: e,
  async fn(t) {
    const {
      x: r,
      y: n,
      placement: o,
      rects: i,
      platform: a,
      elements: s,
      middlewareData: l
    } = t, {
      element: c,
      padding: u = 0
    } = nn(e, t) || {};
    if (c == null)
      return {};
    const d = bm(u), h = {
      x: r,
      y: n
    }, p = qd(o), g = Yd(p), v = await a.getDimensions(c), m = p === "y", x = m ? "top" : "left", y = m ? "bottom" : "right", b = m ? "clientHeight" : "clientWidth", w = i.reference[g] + i.reference[p] - h[p] - i.floating[g], _ = h[p] - i.reference[p], R = await (a.getOffsetParent == null ? void 0 : a.getOffsetParent(c));
    let T = R ? R[b] : 0;
    (!T || !await (a.isElement == null ? void 0 : a.isElement(R))) && (T = s.floating[b] || i.floating[g]);
    const k = w / 2 - _ / 2, j = T / 2 - v[g] / 2 - 1, A = Dn(d[x], j), $ = Dn(d[y], j), F = A, L = T - v[g] - $, P = T / 2 - v[g] / 2 + k, O = Cu(F, P, L), I = !l.arrow && fi(o) != null && P !== O && i.reference[g] / 2 - (P < F ? A : $) - v[g] / 2 < 0, E = I ? P < F ? P - F : P - L : 0;
    return {
      [p]: h[p] + E,
      data: {
        [p]: O,
        centerOffset: P - O - E,
        ...I && {
          alignmentOffset: E
        }
      },
      reset: I
    };
  }
}), zN = function(e) {
  return e === void 0 && (e = {}), {
    name: "flip",
    options: e,
    async fn(t) {
      var r, n;
      const {
        placement: o,
        middlewareData: i,
        rects: a,
        initialPlacement: s,
        platform: l,
        elements: c
      } = t, {
        mainAxis: u = !0,
        crossAxis: d = !0,
        fallbackPlacements: h,
        fallbackStrategy: p = "bestFit",
        fallbackAxisSideDirection: g = "none",
        flipAlignment: v = !0,
        ...m
      } = nn(e, t);
      if ((r = i.arrow) != null && r.alignmentOffset)
        return {};
      const x = on(o), y = Fr(s), b = on(s) === s, w = await (l.isRTL == null ? void 0 : l.isRTL(c.floating)), _ = h || (b || !v ? [Zs(s)] : AN(s)), R = g !== "none";
      !h && R && _.push(...IN(s, v, g, w));
      const T = [s, ..._], k = await ua(t, m), j = [];
      let A = ((n = i.flip) == null ? void 0 : n.overflows) || [];
      if (u && j.push(k[x]), d) {
        const P = PN(o, a, w);
        j.push(k[P[0]], k[P[1]]);
      }
      if (A = [...A, {
        placement: o,
        overflows: j
      }], !j.every((P) => P <= 0)) {
        var $, F;
        const P = ((($ = i.flip) == null ? void 0 : $.index) || 0) + 1, O = T[P];
        if (O && (!(d === "alignment" ? y !== Fr(O) : !1) || // We leave the current main axis only if every placement on that axis
        // overflows the main axis.
        A.every((S) => S.overflows[0] > 0 && Fr(S.placement) === y)))
          return {
            data: {
              index: P,
              overflows: A
            },
            reset: {
              placement: O
            }
          };
        let I = (F = A.filter((E) => E.overflows[0] <= 0).sort((E, S) => E.overflows[1] - S.overflows[1])[0]) == null ? void 0 : F.placement;
        if (!I)
          switch (p) {
            case "bestFit": {
              var L;
              const E = (L = A.filter((S) => {
                if (R) {
                  const M = Fr(S.placement);
                  return M === y || // Create a bias to the `y` side axis due to horizontal
                  // reading directions favoring greater width.
                  M === "y";
                }
                return !0;
              }).map((S) => [S.placement, S.overflows.filter((M) => M > 0).reduce((M, D) => M + D, 0)]).sort((S, M) => S[1] - M[1])[0]) == null ? void 0 : L[0];
              E && (I = E);
              break;
            }
            case "initialPlacement":
              I = s;
              break;
          }
        if (o !== I)
          return {
            reset: {
              placement: I
            }
          };
      }
      return {};
    }
  };
};
function _p(e, t) {
  return {
    top: e.top - t.height,
    right: e.right - t.width,
    bottom: e.bottom - t.height,
    left: e.left - t.width
  };
}
function Np(e) {
  return TN.some((t) => e[t] >= 0);
}
const $N = function(e) {
  return e === void 0 && (e = {}), {
    name: "hide",
    options: e,
    async fn(t) {
      const {
        rects: r
      } = t, {
        strategy: n = "referenceHidden",
        ...o
      } = nn(e, t);
      switch (n) {
        case "referenceHidden": {
          const i = await ua(t, {
            ...o,
            elementContext: "reference"
          }), a = _p(i, r.reference);
          return {
            data: {
              referenceHiddenOffsets: a,
              referenceHidden: Np(a)
            }
          };
        }
        case "escaped": {
          const i = await ua(t, {
            ...o,
            altBoundary: !0
          }), a = _p(i, r.floating);
          return {
            data: {
              escapedOffsets: a,
              escaped: Np(a)
            }
          };
        }
        default:
          return {};
      }
    }
  };
};
async function GN(e, t) {
  const {
    placement: r,
    platform: n,
    elements: o
  } = e, i = await (n.isRTL == null ? void 0 : n.isRTL(o.floating)), a = on(r), s = fi(r), l = Fr(r) === "y", c = ["left", "top"].includes(a) ? -1 : 1, u = i && l ? -1 : 1, d = nn(t, e);
  let {
    mainAxis: h,
    crossAxis: p,
    alignmentAxis: g
  } = typeof d == "number" ? {
    mainAxis: d,
    crossAxis: 0,
    alignmentAxis: null
  } : {
    mainAxis: d.mainAxis || 0,
    crossAxis: d.crossAxis || 0,
    alignmentAxis: d.alignmentAxis
  };
  return s && typeof g == "number" && (p = s === "end" ? g * -1 : g), l ? {
    x: p * u,
    y: h * c
  } : {
    x: h * c,
    y: p * u
  };
}
const VN = function(e) {
  return e === void 0 && (e = 0), {
    name: "offset",
    options: e,
    async fn(t) {
      var r, n;
      const {
        x: o,
        y: i,
        placement: a,
        middlewareData: s
      } = t, l = await GN(t, e);
      return a === ((r = s.offset) == null ? void 0 : r.placement) && (n = s.arrow) != null && n.alignmentOffset ? {} : {
        x: o + l.x,
        y: i + l.y,
        data: {
          ...l,
          placement: a
        }
      };
    }
  };
}, UN = function(e) {
  return e === void 0 && (e = {}), {
    name: "shift",
    options: e,
    async fn(t) {
      const {
        x: r,
        y: n,
        placement: o
      } = t, {
        mainAxis: i = !0,
        crossAxis: a = !1,
        limiter: s = {
          fn: (m) => {
            let {
              x,
              y
            } = m;
            return {
              x,
              y
            };
          }
        },
        ...l
      } = nn(e, t), c = {
        x: r,
        y: n
      }, u = await ua(t, l), d = Fr(on(o)), h = Wd(d);
      let p = c[h], g = c[d];
      if (i) {
        const m = h === "y" ? "top" : "left", x = h === "y" ? "bottom" : "right", y = p + u[m], b = p - u[x];
        p = Cu(y, p, b);
      }
      if (a) {
        const m = d === "y" ? "top" : "left", x = d === "y" ? "bottom" : "right", y = g + u[m], b = g - u[x];
        g = Cu(y, g, b);
      }
      const v = s.fn({
        ...t,
        [h]: p,
        [d]: g
      });
      return {
        ...v,
        data: {
          x: v.x - r,
          y: v.y - n,
          enabled: {
            [h]: i,
            [d]: a
          }
        }
      };
    }
  };
}, HN = function(e) {
  return e === void 0 && (e = {}), {
    options: e,
    fn(t) {
      const {
        x: r,
        y: n,
        placement: o,
        rects: i,
        middlewareData: a
      } = t, {
        offset: s = 0,
        mainAxis: l = !0,
        crossAxis: c = !0
      } = nn(e, t), u = {
        x: r,
        y: n
      }, d = Fr(o), h = Wd(d);
      let p = u[h], g = u[d];
      const v = nn(s, t), m = typeof v == "number" ? {
        mainAxis: v,
        crossAxis: 0
      } : {
        mainAxis: 0,
        crossAxis: 0,
        ...v
      };
      if (l) {
        const b = h === "y" ? "height" : "width", w = i.reference[h] - i.floating[b] + m.mainAxis, _ = i.reference[h] + i.reference[b] - m.mainAxis;
        p < w ? p = w : p > _ && (p = _);
      }
      if (c) {
        var x, y;
        const b = h === "y" ? "width" : "height", w = ["top", "left"].includes(on(o)), _ = i.reference[d] - i.floating[b] + (w && ((x = a.offset) == null ? void 0 : x[d]) || 0) + (w ? 0 : m.crossAxis), R = i.reference[d] + i.reference[b] + (w ? 0 : ((y = a.offset) == null ? void 0 : y[d]) || 0) - (w ? m.crossAxis : 0);
        g < _ ? g = _ : g > R && (g = R);
      }
      return {
        [h]: p,
        [d]: g
      };
    }
  };
}, WN = function(e) {
  return e === void 0 && (e = {}), {
    name: "size",
    options: e,
    async fn(t) {
      var r, n;
      const {
        placement: o,
        rects: i,
        platform: a,
        elements: s
      } = t, {
        apply: l = () => {
        },
        ...c
      } = nn(e, t), u = await ua(t, c), d = on(o), h = fi(o), p = Fr(o) === "y", {
        width: g,
        height: v
      } = i.floating;
      let m, x;
      d === "top" || d === "bottom" ? (m = d, x = h === (await (a.isRTL == null ? void 0 : a.isRTL(s.floating)) ? "start" : "end") ? "left" : "right") : (x = d, m = h === "end" ? "top" : "bottom");
      const y = v - u.top - u.bottom, b = g - u.left - u.right, w = Dn(v - u[m], y), _ = Dn(g - u[x], b), R = !t.middlewareData.shift;
      let T = w, k = _;
      if ((r = t.middlewareData.shift) != null && r.enabled.x && (k = b), (n = t.middlewareData.shift) != null && n.enabled.y && (T = y), R && !h) {
        const A = Ut(u.left, 0), $ = Ut(u.right, 0), F = Ut(u.top, 0), L = Ut(u.bottom, 0);
        p ? k = g - 2 * (A !== 0 || $ !== 0 ? A + $ : Ut(u.left, u.right)) : T = v - 2 * (F !== 0 || L !== 0 ? F + L : Ut(u.top, u.bottom));
      }
      await l({
        ...t,
        availableWidth: k,
        availableHeight: T
      });
      const j = await a.getDimensions(s.floating);
      return g !== j.width || v !== j.height ? {
        reset: {
          rects: !0
        }
      } : {};
    }
  };
};
function Ol() {
  return typeof window < "u";
}
function hi(e) {
  return wm(e) ? (e.nodeName || "").toLowerCase() : "#document";
}
function Wt(e) {
  var t;
  return (e == null || (t = e.ownerDocument) == null ? void 0 : t.defaultView) || window;
}
function qr(e) {
  var t;
  return (t = (wm(e) ? e.ownerDocument : e.document) || window.document) == null ? void 0 : t.documentElement;
}
function wm(e) {
  return Ol() ? e instanceof Node || e instanceof Wt(e).Node : !1;
}
function Cr(e) {
  return Ol() ? e instanceof Element || e instanceof Wt(e).Element : !1;
}
function Vr(e) {
  return Ol() ? e instanceof HTMLElement || e instanceof Wt(e).HTMLElement : !1;
}
function Dp(e) {
  return !Ol() || typeof ShadowRoot > "u" ? !1 : e instanceof ShadowRoot || e instanceof Wt(e).ShadowRoot;
}
function Ia(e) {
  const {
    overflow: t,
    overflowX: r,
    overflowY: n,
    display: o
  } = Er(e);
  return /auto|scroll|overlay|hidden|clip/.test(t + n + r) && !["inline", "contents"].includes(o);
}
function YN(e) {
  return ["table", "td", "th"].includes(hi(e));
}
function Il(e) {
  return [":popover-open", ":modal"].some((t) => {
    try {
      return e.matches(t);
    } catch {
      return !1;
    }
  });
}
function Xd(e) {
  const t = Kd(), r = Cr(e) ? Er(e) : e;
  return ["transform", "translate", "scale", "rotate", "perspective"].some((n) => r[n] ? r[n] !== "none" : !1) || (r.containerType ? r.containerType !== "normal" : !1) || !t && (r.backdropFilter ? r.backdropFilter !== "none" : !1) || !t && (r.filter ? r.filter !== "none" : !1) || ["transform", "translate", "scale", "rotate", "perspective", "filter"].some((n) => (r.willChange || "").includes(n)) || ["paint", "layout", "strict", "content"].some((n) => (r.contain || "").includes(n));
}
function qN(e) {
  let t = Rn(e);
  for (; Vr(t) && !Ho(t); ) {
    if (Xd(t))
      return t;
    if (Il(t))
      return null;
    t = Rn(t);
  }
  return null;
}
function Kd() {
  return typeof CSS > "u" || !CSS.supports ? !1 : CSS.supports("-webkit-backdrop-filter", "none");
}
function Ho(e) {
  return ["html", "body", "#document"].includes(hi(e));
}
function Er(e) {
  return Wt(e).getComputedStyle(e);
}
function Fl(e) {
  return Cr(e) ? {
    scrollLeft: e.scrollLeft,
    scrollTop: e.scrollTop
  } : {
    scrollLeft: e.scrollX,
    scrollTop: e.scrollY
  };
}
function Rn(e) {
  if (hi(e) === "html")
    return e;
  const t = (
    // Step into the shadow DOM of the parent of a slotted node.
    e.assignedSlot || // DOM Element detected.
    e.parentNode || // ShadowRoot detected.
    Dp(e) && e.host || // Fallback.
    qr(e)
  );
  return Dp(t) ? t.host : t;
}
function Sm(e) {
  const t = Rn(e);
  return Ho(t) ? e.ownerDocument ? e.ownerDocument.body : e.body : Vr(t) && Ia(t) ? t : Sm(t);
}
function da(e, t, r) {
  var n;
  t === void 0 && (t = []), r === void 0 && (r = !0);
  const o = Sm(e), i = o === ((n = e.ownerDocument) == null ? void 0 : n.body), a = Wt(o);
  if (i) {
    const s = _u(a);
    return t.concat(a, a.visualViewport || [], Ia(o) ? o : [], s && r ? da(s) : []);
  }
  return t.concat(o, da(o, [], r));
}
function _u(e) {
  return e.parent && Object.getPrototypeOf(e.parent) ? e.frameElement : null;
}
function Cm(e) {
  const t = Er(e);
  let r = parseFloat(t.width) || 0, n = parseFloat(t.height) || 0;
  const o = Vr(e), i = o ? e.offsetWidth : r, a = o ? e.offsetHeight : n, s = Ks(r) !== i || Ks(n) !== a;
  return s && (r = i, n = a), {
    width: r,
    height: n,
    $: s
  };
}
function Zd(e) {
  return Cr(e) ? e : e.contextElement;
}
function Bo(e) {
  const t = Zd(e);
  if (!Vr(t))
    return Lr(1);
  const r = t.getBoundingClientRect(), {
    width: n,
    height: o,
    $: i
  } = Cm(t);
  let a = (i ? Ks(r.width) : r.width) / n, s = (i ? Ks(r.height) : r.height) / o;
  return (!a || !Number.isFinite(a)) && (a = 1), (!s || !Number.isFinite(s)) && (s = 1), {
    x: a,
    y: s
  };
}
const XN = /* @__PURE__ */ Lr(0);
function Em(e) {
  const t = Wt(e);
  return !Kd() || !t.visualViewport ? XN : {
    x: t.visualViewport.offsetLeft,
    y: t.visualViewport.offsetTop
  };
}
function KN(e, t, r) {
  return t === void 0 && (t = !1), !r || t && r !== Wt(e) ? !1 : t;
}
function to(e, t, r, n) {
  t === void 0 && (t = !1), r === void 0 && (r = !1);
  const o = e.getBoundingClientRect(), i = Zd(e);
  let a = Lr(1);
  t && (n ? Cr(n) && (a = Bo(n)) : a = Bo(e));
  const s = KN(i, r, n) ? Em(i) : Lr(0);
  let l = (o.left + s.x) / a.x, c = (o.top + s.y) / a.y, u = o.width / a.x, d = o.height / a.y;
  if (i) {
    const h = Wt(i), p = n && Cr(n) ? Wt(n) : n;
    let g = h, v = _u(g);
    for (; v && n && p !== g; ) {
      const m = Bo(v), x = v.getBoundingClientRect(), y = Er(v), b = x.left + (v.clientLeft + parseFloat(y.paddingLeft)) * m.x, w = x.top + (v.clientTop + parseFloat(y.paddingTop)) * m.y;
      l *= m.x, c *= m.y, u *= m.x, d *= m.y, l += b, c += w, g = Wt(v), v = _u(g);
    }
  }
  return Qs({
    width: u,
    height: d,
    x: l,
    y: c
  });
}
function Qd(e, t) {
  const r = Fl(e).scrollLeft;
  return t ? t.left + r : to(qr(e)).left + r;
}
function _m(e, t, r) {
  r === void 0 && (r = !1);
  const n = e.getBoundingClientRect(), o = n.left + t.scrollLeft - (r ? 0 : (
    // RTL <body> scrollbar.
    Qd(e, n)
  )), i = n.top + t.scrollTop;
  return {
    x: o,
    y: i
  };
}
function ZN(e) {
  let {
    elements: t,
    rect: r,
    offsetParent: n,
    strategy: o
  } = e;
  const i = o === "fixed", a = qr(n), s = t ? Il(t.floating) : !1;
  if (n === a || s && i)
    return r;
  let l = {
    scrollLeft: 0,
    scrollTop: 0
  }, c = Lr(1);
  const u = Lr(0), d = Vr(n);
  if ((d || !d && !i) && ((hi(n) !== "body" || Ia(a)) && (l = Fl(n)), Vr(n))) {
    const p = to(n);
    c = Bo(n), u.x = p.x + n.clientLeft, u.y = p.y + n.clientTop;
  }
  const h = a && !d && !i ? _m(a, l, !0) : Lr(0);
  return {
    width: r.width * c.x,
    height: r.height * c.y,
    x: r.x * c.x - l.scrollLeft * c.x + u.x + h.x,
    y: r.y * c.y - l.scrollTop * c.y + u.y + h.y
  };
}
function QN(e) {
  return Array.from(e.getClientRects());
}
function JN(e) {
  const t = qr(e), r = Fl(e), n = e.ownerDocument.body, o = Ut(t.scrollWidth, t.clientWidth, n.scrollWidth, n.clientWidth), i = Ut(t.scrollHeight, t.clientHeight, n.scrollHeight, n.clientHeight);
  let a = -r.scrollLeft + Qd(e);
  const s = -r.scrollTop;
  return Er(n).direction === "rtl" && (a += Ut(t.clientWidth, n.clientWidth) - o), {
    width: o,
    height: i,
    x: a,
    y: s
  };
}
function eD(e, t) {
  const r = Wt(e), n = qr(e), o = r.visualViewport;
  let i = n.clientWidth, a = n.clientHeight, s = 0, l = 0;
  if (o) {
    i = o.width, a = o.height;
    const c = Kd();
    (!c || c && t === "fixed") && (s = o.offsetLeft, l = o.offsetTop);
  }
  return {
    width: i,
    height: a,
    x: s,
    y: l
  };
}
function tD(e, t) {
  const r = to(e, !0, t === "fixed"), n = r.top + e.clientTop, o = r.left + e.clientLeft, i = Vr(e) ? Bo(e) : Lr(1), a = e.clientWidth * i.x, s = e.clientHeight * i.y, l = o * i.x, c = n * i.y;
  return {
    width: a,
    height: s,
    x: l,
    y: c
  };
}
function Rp(e, t, r) {
  let n;
  if (t === "viewport")
    n = eD(e, r);
  else if (t === "document")
    n = JN(qr(e));
  else if (Cr(t))
    n = tD(t, r);
  else {
    const o = Em(e);
    n = {
      x: t.x - o.x,
      y: t.y - o.y,
      width: t.width,
      height: t.height
    };
  }
  return Qs(n);
}
function Nm(e, t) {
  const r = Rn(e);
  return r === t || !Cr(r) || Ho(r) ? !1 : Er(r).position === "fixed" || Nm(r, t);
}
function rD(e, t) {
  const r = t.get(e);
  if (r)
    return r;
  let n = da(e, [], !1).filter((s) => Cr(s) && hi(s) !== "body"), o = null;
  const i = Er(e).position === "fixed";
  let a = i ? Rn(e) : e;
  for (; Cr(a) && !Ho(a); ) {
    const s = Er(a), l = Xd(a);
    !l && s.position === "fixed" && (o = null), (i ? !l && !o : !l && s.position === "static" && !!o && ["absolute", "fixed"].includes(o.position) || Ia(a) && !l && Nm(e, a)) ? n = n.filter((u) => u !== a) : o = s, a = Rn(a);
  }
  return t.set(e, n), n;
}
function nD(e) {
  let {
    element: t,
    boundary: r,
    rootBoundary: n,
    strategy: o
  } = e;
  const a = [...r === "clippingAncestors" ? Il(t) ? [] : rD(t, this._c) : [].concat(r), n], s = a[0], l = a.reduce((c, u) => {
    const d = Rp(t, u, o);
    return c.top = Ut(d.top, c.top), c.right = Dn(d.right, c.right), c.bottom = Dn(d.bottom, c.bottom), c.left = Ut(d.left, c.left), c;
  }, Rp(t, s, o));
  return {
    width: l.right - l.left,
    height: l.bottom - l.top,
    x: l.left,
    y: l.top
  };
}
function oD(e) {
  const {
    width: t,
    height: r
  } = Cm(e);
  return {
    width: t,
    height: r
  };
}
function iD(e, t, r) {
  const n = Vr(t), o = qr(t), i = r === "fixed", a = to(e, !0, i, t);
  let s = {
    scrollLeft: 0,
    scrollTop: 0
  };
  const l = Lr(0);
  function c() {
    l.x = Qd(o);
  }
  if (n || !n && !i)
    if ((hi(t) !== "body" || Ia(o)) && (s = Fl(t)), n) {
      const p = to(t, !0, i, t);
      l.x = p.x + t.clientLeft, l.y = p.y + t.clientTop;
    } else o && c();
  i && !n && o && c();
  const u = o && !n && !i ? _m(o, s) : Lr(0), d = a.left + s.scrollLeft - l.x - u.x, h = a.top + s.scrollTop - l.y - u.y;
  return {
    x: d,
    y: h,
    width: a.width,
    height: a.height
  };
}
function Bc(e) {
  return Er(e).position === "static";
}
function Mp(e, t) {
  if (!Vr(e) || Er(e).position === "fixed")
    return null;
  if (t)
    return t(e);
  let r = e.offsetParent;
  return qr(e) === r && (r = r.ownerDocument.body), r;
}
function Dm(e, t) {
  const r = Wt(e);
  if (Il(e))
    return r;
  if (!Vr(e)) {
    let o = Rn(e);
    for (; o && !Ho(o); ) {
      if (Cr(o) && !Bc(o))
        return o;
      o = Rn(o);
    }
    return r;
  }
  let n = Mp(e, t);
  for (; n && YN(n) && Bc(n); )
    n = Mp(n, t);
  return n && Ho(n) && Bc(n) && !Xd(n) ? r : n || qN(e) || r;
}
const aD = async function(e) {
  const t = this.getOffsetParent || Dm, r = this.getDimensions, n = await r(e.floating);
  return {
    reference: iD(e.reference, await t(e.floating), e.strategy),
    floating: {
      x: 0,
      y: 0,
      width: n.width,
      height: n.height
    }
  };
};
function sD(e) {
  return Er(e).direction === "rtl";
}
const lD = {
  convertOffsetParentRelativeRectToViewportRelativeRect: ZN,
  getDocumentElement: qr,
  getClippingRect: nD,
  getOffsetParent: Dm,
  getElementRects: aD,
  getClientRects: QN,
  getDimensions: oD,
  getScale: Bo,
  isElement: Cr,
  isRTL: sD
};
function Rm(e, t) {
  return e.x === t.x && e.y === t.y && e.width === t.width && e.height === t.height;
}
function cD(e, t) {
  let r = null, n;
  const o = qr(e);
  function i() {
    var s;
    clearTimeout(n), (s = r) == null || s.disconnect(), r = null;
  }
  function a(s, l) {
    s === void 0 && (s = !1), l === void 0 && (l = 1), i();
    const c = e.getBoundingClientRect(), {
      left: u,
      top: d,
      width: h,
      height: p
    } = c;
    if (s || t(), !h || !p)
      return;
    const g = gs(d), v = gs(o.clientWidth - (u + h)), m = gs(o.clientHeight - (d + p)), x = gs(u), b = {
      rootMargin: -g + "px " + -v + "px " + -m + "px " + -x + "px",
      threshold: Ut(0, Dn(1, l)) || 1
    };
    let w = !0;
    function _(R) {
      const T = R[0].intersectionRatio;
      if (T !== l) {
        if (!w)
          return a();
        T ? a(!1, T) : n = setTimeout(() => {
          a(!1, 1e-7);
        }, 1e3);
      }
      T === 1 && !Rm(c, e.getBoundingClientRect()) && a(), w = !1;
    }
    try {
      r = new IntersectionObserver(_, {
        ...b,
        // Handle <iframe>s
        root: o.ownerDocument
      });
    } catch {
      r = new IntersectionObserver(_, b);
    }
    r.observe(e);
  }
  return a(!0), i;
}
function uD(e, t, r, n) {
  n === void 0 && (n = {});
  const {
    ancestorScroll: o = !0,
    ancestorResize: i = !0,
    elementResize: a = typeof ResizeObserver == "function",
    layoutShift: s = typeof IntersectionObserver == "function",
    animationFrame: l = !1
  } = n, c = Zd(e), u = o || i ? [...c ? da(c) : [], ...da(t)] : [];
  u.forEach((x) => {
    o && x.addEventListener("scroll", r, {
      passive: !0
    }), i && x.addEventListener("resize", r);
  });
  const d = c && s ? cD(c, r) : null;
  let h = -1, p = null;
  a && (p = new ResizeObserver((x) => {
    let [y] = x;
    y && y.target === c && p && (p.unobserve(t), cancelAnimationFrame(h), h = requestAnimationFrame(() => {
      var b;
      (b = p) == null || b.observe(t);
    })), r();
  }), c && !l && p.observe(c), p.observe(t));
  let g, v = l ? to(e) : null;
  l && m();
  function m() {
    const x = to(e);
    v && !Rm(v, x) && r(), v = x, g = requestAnimationFrame(m);
  }
  return r(), () => {
    var x;
    u.forEach((y) => {
      o && y.removeEventListener("scroll", r), i && y.removeEventListener("resize", r);
    }), d?.(), (x = p) == null || x.disconnect(), p = null, l && cancelAnimationFrame(g);
  };
}
const dD = VN, fD = UN, hD = zN, pD = WN, vD = $N, Tp = BN, gD = HN, mD = (e, t, r) => {
  const n = /* @__PURE__ */ new Map(), o = {
    platform: lD,
    ...r
  }, i = {
    ...o.platform,
    _c: n
  };
  return LN(e, t, {
    ...o,
    platform: i
  });
};
var xD = typeof document < "u", yD = function() {
}, $s = xD ? LS : yD;
function Js(e, t) {
  if (e === t)
    return !0;
  if (typeof e != typeof t)
    return !1;
  if (typeof e == "function" && e.toString() === t.toString())
    return !0;
  let r, n, o;
  if (e && t && typeof e == "object") {
    if (Array.isArray(e)) {
      if (r = e.length, r !== t.length) return !1;
      for (n = r; n-- !== 0; )
        if (!Js(e[n], t[n]))
          return !1;
      return !0;
    }
    if (o = Object.keys(e), r = o.length, r !== Object.keys(t).length)
      return !1;
    for (n = r; n-- !== 0; )
      if (!{}.hasOwnProperty.call(t, o[n]))
        return !1;
    for (n = r; n-- !== 0; ) {
      const i = o[n];
      if (!(i === "_owner" && e.$$typeof) && !Js(e[i], t[i]))
        return !1;
    }
    return !0;
  }
  return e !== e && t !== t;
}
function Mm(e) {
  return typeof window > "u" ? 1 : (e.ownerDocument.defaultView || window).devicePixelRatio || 1;
}
function jp(e, t) {
  const r = Mm(e);
  return Math.round(t * r) / r;
}
function zc(e) {
  const t = C.useRef(e);
  return $s(() => {
    t.current = e;
  }), t;
}
function bD(e) {
  e === void 0 && (e = {});
  const {
    placement: t = "bottom",
    strategy: r = "absolute",
    middleware: n = [],
    platform: o,
    elements: {
      reference: i,
      floating: a
    } = {},
    transform: s = !0,
    whileElementsMounted: l,
    open: c
  } = e, [u, d] = C.useState({
    x: 0,
    y: 0,
    strategy: r,
    placement: t,
    middlewareData: {},
    isPositioned: !1
  }), [h, p] = C.useState(n);
  Js(h, n) || p(n);
  const [g, v] = C.useState(null), [m, x] = C.useState(null), y = C.useCallback((S) => {
    S !== R.current && (R.current = S, v(S));
  }, []), b = C.useCallback((S) => {
    S !== T.current && (T.current = S, x(S));
  }, []), w = i || g, _ = a || m, R = C.useRef(null), T = C.useRef(null), k = C.useRef(u), j = l != null, A = zc(l), $ = zc(o), F = zc(c), L = C.useCallback(() => {
    if (!R.current || !T.current)
      return;
    const S = {
      placement: t,
      strategy: r,
      middleware: h
    };
    $.current && (S.platform = $.current), mD(R.current, T.current, S).then((M) => {
      const D = {
        ...M,
        // The floating element's position may be recomputed while it's closed
        // but still mounted (such as when transitioning out). To ensure
        // `isPositioned` will be `false` initially on the next open, avoid
        // setting it to `true` when `open === false` (must be specified).
        isPositioned: F.current !== !1
      };
      P.current && !Js(k.current, D) && (k.current = D, Cl.flushSync(() => {
        d(D);
      }));
    });
  }, [h, t, r, $, F]);
  $s(() => {
    c === !1 && k.current.isPositioned && (k.current.isPositioned = !1, d((S) => ({
      ...S,
      isPositioned: !1
    })));
  }, [c]);
  const P = C.useRef(!1);
  $s(() => (P.current = !0, () => {
    P.current = !1;
  }), []), $s(() => {
    if (w && (R.current = w), _ && (T.current = _), w && _) {
      if (A.current)
        return A.current(w, _, L);
      L();
    }
  }, [w, _, L, A, j]);
  const O = C.useMemo(() => ({
    reference: R,
    floating: T,
    setReference: y,
    setFloating: b
  }), [y, b]), I = C.useMemo(() => ({
    reference: w,
    floating: _
  }), [w, _]), E = C.useMemo(() => {
    const S = {
      position: r,
      left: 0,
      top: 0
    };
    if (!I.floating)
      return S;
    const M = jp(I.floating, u.x), D = jp(I.floating, u.y);
    return s ? {
      ...S,
      transform: "translate(" + M + "px, " + D + "px)",
      ...Mm(I.floating) >= 1.5 && {
        willChange: "transform"
      }
    } : {
      position: r,
      left: M,
      top: D
    };
  }, [r, s, I.floating, u.x, u.y]);
  return C.useMemo(() => ({
    ...u,
    update: L,
    refs: O,
    elements: I,
    floatingStyles: E
  }), [u, L, O, I, E]);
}
const wD = (e) => {
  function t(r) {
    return {}.hasOwnProperty.call(r, "current");
  }
  return {
    name: "arrow",
    options: e,
    fn(r) {
      const {
        element: n,
        padding: o
      } = typeof e == "function" ? e(r) : e;
      return n && t(n) ? n.current != null ? Tp({
        element: n.current,
        padding: o
      }).fn(r) : {} : n ? Tp({
        element: n,
        padding: o
      }).fn(r) : {};
    }
  };
}, SD = (e, t) => ({
  ...dD(e),
  options: [e, t]
}), CD = (e, t) => ({
  ...fD(e),
  options: [e, t]
}), ED = (e, t) => ({
  ...gD(e),
  options: [e, t]
}), _D = (e, t) => ({
  ...hD(e),
  options: [e, t]
}), ND = (e, t) => ({
  ...pD(e),
  options: [e, t]
}), DD = (e, t) => ({
  ...vD(e),
  options: [e, t]
}), RD = (e, t) => ({
  ...wD(e),
  options: [e, t]
});
var MD = "Arrow", Tm = C.forwardRef((e, t) => {
  const { children: r, width: n = 10, height: o = 5, ...i } = e;
  return /* @__PURE__ */ f.jsx(
    me.svg,
    {
      ...i,
      ref: t,
      width: n,
      height: o,
      viewBox: "0 0 30 10",
      preserveAspectRatio: "none",
      children: e.asChild ? r : /* @__PURE__ */ f.jsx("polygon", { points: "0,0 30,0 15,10" })
    }
  );
});
Tm.displayName = MD;
var TD = Tm;
function Ll(e) {
  const [t, r] = C.useState(void 0);
  return wt(() => {
    if (e) {
      r({ width: e.offsetWidth, height: e.offsetHeight });
      const n = new ResizeObserver((o) => {
        if (!Array.isArray(o) || !o.length)
          return;
        const i = o[0];
        let a, s;
        if ("borderBoxSize" in i) {
          const l = i.borderBoxSize, c = Array.isArray(l) ? l[0] : l;
          a = c.inlineSize, s = c.blockSize;
        } else
          a = e.offsetWidth, s = e.offsetHeight;
        r({ width: a, height: s });
      });
      return n.observe(e, { box: "border-box" }), () => n.unobserve(e);
    } else
      r(void 0);
  }, [e]), t;
}
var Jd = "Popper", [jm, pi] = Gt(Jd), [jD, km] = jm(Jd), Pm = (e) => {
  const { __scopePopper: t, children: r } = e, [n, o] = C.useState(null);
  return /* @__PURE__ */ f.jsx(jD, { scope: t, anchor: n, onAnchorChange: o, children: r });
};
Pm.displayName = Jd;
var Am = "PopperAnchor", Om = C.forwardRef(
  (e, t) => {
    const { __scopePopper: r, virtualRef: n, ...o } = e, i = km(Am, r), a = C.useRef(null), s = _e(t, a);
    return C.useEffect(() => {
      i.onAnchorChange(n?.current || a.current);
    }), n ? null : /* @__PURE__ */ f.jsx(me.div, { ...o, ref: s });
  }
);
Om.displayName = Am;
var ef = "PopperContent", [kD, PD] = jm(ef), Im = C.forwardRef(
  (e, t) => {
    const {
      __scopePopper: r,
      side: n = "bottom",
      sideOffset: o = 0,
      align: i = "center",
      alignOffset: a = 0,
      arrowPadding: s = 0,
      avoidCollisions: l = !0,
      collisionBoundary: c = [],
      collisionPadding: u = 0,
      sticky: d = "partial",
      hideWhenDetached: h = !1,
      updatePositionStrategy: p = "optimized",
      onPlaced: g,
      ...v
    } = e, m = km(ef, r), [x, y] = C.useState(null), b = _e(t, (q) => y(q)), [w, _] = C.useState(null), R = Ll(w), T = R?.width ?? 0, k = R?.height ?? 0, j = n + (i !== "center" ? "-" + i : ""), A = typeof u == "number" ? u : { top: 0, right: 0, bottom: 0, left: 0, ...u }, $ = Array.isArray(c) ? c : [c], F = $.length > 0, L = {
      padding: A,
      boundary: $.filter(OD),
      // with `strategy: 'fixed'`, this is the only way to get it to respect boundaries
      altBoundary: F
    }, { refs: P, floatingStyles: O, placement: I, isPositioned: E, middlewareData: S } = bD({
      // default to `fixed` strategy so users don't have to pick and we also avoid focus scroll issues
      strategy: "fixed",
      placement: j,
      whileElementsMounted: (...q) => uD(...q, {
        animationFrame: p === "always"
      }),
      elements: {
        reference: m.anchor
      },
      middleware: [
        SD({ mainAxis: o + k, alignmentAxis: a }),
        l && CD({
          mainAxis: !0,
          crossAxis: !1,
          limiter: d === "partial" ? ED() : void 0,
          ...L
        }),
        l && _D({ ...L }),
        ND({
          ...L,
          apply: ({ elements: q, rects: K, availableWidth: ne, availableHeight: oe }) => {
            const { width: te, height: G } = K.reference, ee = q.floating.style;
            ee.setProperty("--radix-popper-available-width", `${ne}px`), ee.setProperty("--radix-popper-available-height", `${oe}px`), ee.setProperty("--radix-popper-anchor-width", `${te}px`), ee.setProperty("--radix-popper-anchor-height", `${G}px`);
          }
        }),
        w && RD({ element: w, padding: s }),
        ID({ arrowWidth: T, arrowHeight: k }),
        h && DD({ strategy: "referenceHidden", ...L })
      ]
    }), [M, D] = Bm(I), N = _t(g);
    wt(() => {
      E && N?.();
    }, [E, N]);
    const z = S.arrow?.x, Y = S.arrow?.y, H = S.arrow?.centerOffset !== 0, [X, Q] = C.useState();
    return wt(() => {
      x && Q(window.getComputedStyle(x).zIndex);
    }, [x]), /* @__PURE__ */ f.jsx(
      "div",
      {
        ref: P.setFloating,
        "data-radix-popper-content-wrapper": "",
        style: {
          ...O,
          transform: E ? O.transform : "translate(0, -200%)",
          // keep off the page when measuring
          minWidth: "max-content",
          zIndex: X,
          "--radix-popper-transform-origin": [
            S.transformOrigin?.x,
            S.transformOrigin?.y
          ].join(" "),
          // hide the content if using the hide middleware and should be hidden
          // set visibility to hidden and disable pointer events so the UI behaves
          // as if the PopperContent isn't there at all
          ...S.hide?.referenceHidden && {
            visibility: "hidden",
            pointerEvents: "none"
          }
        },
        dir: e.dir,
        children: /* @__PURE__ */ f.jsx(
          kD,
          {
            scope: r,
            placedSide: M,
            onArrowChange: _,
            arrowX: z,
            arrowY: Y,
            shouldHideArrow: H,
            children: /* @__PURE__ */ f.jsx(
              me.div,
              {
                "data-side": M,
                "data-align": D,
                ...v,
                ref: b,
                style: {
                  ...v.style,
                  // if the PopperContent hasn't been placed yet (not all measurements done)
                  // we prevent animations so that users's animation don't kick in too early referring wrong sides
                  animation: E ? void 0 : "none"
                }
              }
            )
          }
        )
      }
    );
  }
);
Im.displayName = ef;
var Fm = "PopperArrow", AD = {
  top: "bottom",
  right: "left",
  bottom: "top",
  left: "right"
}, Lm = C.forwardRef(function(t, r) {
  const { __scopePopper: n, ...o } = t, i = PD(Fm, n), a = AD[i.placedSide];
  return (
    // we have to use an extra wrapper because `ResizeObserver` (used by `useSize`)
    // doesn't report size as we'd expect on SVG elements.
    // it reports their bounding box which is effectively the largest path inside the SVG.
    /* @__PURE__ */ f.jsx(
      "span",
      {
        ref: i.onArrowChange,
        style: {
          position: "absolute",
          left: i.arrowX,
          top: i.arrowY,
          [a]: 0,
          transformOrigin: {
            top: "",
            right: "0 0",
            bottom: "center 0",
            left: "100% 0"
          }[i.placedSide],
          transform: {
            top: "translateY(100%)",
            right: "translateY(50%) rotate(90deg) translateX(-50%)",
            bottom: "rotate(180deg)",
            left: "translateY(50%) rotate(-90deg) translateX(50%)"
          }[i.placedSide],
          visibility: i.shouldHideArrow ? "hidden" : void 0
        },
        children: /* @__PURE__ */ f.jsx(
          TD,
          {
            ...o,
            ref: r,
            style: {
              ...o.style,
              // ensures the element can be measured correctly (mostly for if SVG)
              display: "block"
            }
          }
        )
      }
    )
  );
});
Lm.displayName = Fm;
function OD(e) {
  return e !== null;
}
var ID = (e) => ({
  name: "transformOrigin",
  options: e,
  fn(t) {
    const { placement: r, rects: n, middlewareData: o } = t, a = o.arrow?.centerOffset !== 0, s = a ? 0 : e.arrowWidth, l = a ? 0 : e.arrowHeight, [c, u] = Bm(r), d = { start: "0%", center: "50%", end: "100%" }[u], h = (o.arrow?.x ?? 0) + s / 2, p = (o.arrow?.y ?? 0) + l / 2;
    let g = "", v = "";
    return c === "bottom" ? (g = a ? d : `${h}px`, v = `${-l}px`) : c === "top" ? (g = a ? d : `${h}px`, v = `${n.floating.height + l}px`) : c === "right" ? (g = `${-l}px`, v = a ? d : `${p}px`) : c === "left" && (g = `${n.floating.width + l}px`, v = a ? d : `${p}px`), { data: { x: g, y: v } };
  }
});
function Bm(e) {
  const [t, r = "center"] = e.split("-");
  return [t, r];
}
var tf = Pm, rf = Om, nf = Im, of = Lm, zm = Object.freeze({
  // See: https://github.com/twbs/bootstrap/blob/main/scss/mixins/_visually-hidden.scss
  position: "absolute",
  border: 0,
  width: 1,
  height: 1,
  padding: 0,
  margin: -1,
  overflow: "hidden",
  clip: "rect(0, 0, 0, 0)",
  whiteSpace: "nowrap",
  wordWrap: "normal"
}), FD = "VisuallyHidden", $m = C.forwardRef(
  (e, t) => /* @__PURE__ */ f.jsx(
    me.span,
    {
      ...e,
      ref: t,
      style: { ...zm, ...e.style }
    }
  )
);
$m.displayName = FD;
var LD = $m, [Bl, hF] = Gt("Tooltip", [
  pi
]), zl = pi(), Gm = "TooltipProvider", BD = 700, Nu = "tooltip.open", [zD, af] = Bl(Gm), Vm = (e) => {
  const {
    __scopeTooltip: t,
    delayDuration: r = BD,
    skipDelayDuration: n = 300,
    disableHoverableContent: o = !1,
    children: i
  } = e, a = C.useRef(!0), s = C.useRef(!1), l = C.useRef(0);
  return C.useEffect(() => {
    const c = l.current;
    return () => window.clearTimeout(c);
  }, []), /* @__PURE__ */ f.jsx(
    zD,
    {
      scope: t,
      isOpenDelayedRef: a,
      delayDuration: r,
      onOpen: C.useCallback(() => {
        window.clearTimeout(l.current), a.current = !1;
      }, []),
      onClose: C.useCallback(() => {
        window.clearTimeout(l.current), l.current = window.setTimeout(
          () => a.current = !0,
          n
        );
      }, [n]),
      isPointerInTransitRef: s,
      onPointerInTransitChange: C.useCallback((c) => {
        s.current = c;
      }, []),
      disableHoverableContent: o,
      children: i
    }
  );
};
Vm.displayName = Gm;
var fa = "Tooltip", [$D, Fa] = Bl(fa), Um = (e) => {
  const {
    __scopeTooltip: t,
    children: r,
    open: n,
    defaultOpen: o,
    onOpenChange: i,
    disableHoverableContent: a,
    delayDuration: s
  } = e, l = af(fa, e.__scopeTooltip), c = zl(t), [u, d] = C.useState(null), h = ir(), p = C.useRef(0), g = a ?? l.disableHoverableContent, v = s ?? l.delayDuration, m = C.useRef(!1), [x, y] = Sr({
    prop: n,
    defaultProp: o ?? !1,
    onChange: (T) => {
      T ? (l.onOpen(), document.dispatchEvent(new CustomEvent(Nu))) : l.onClose(), i?.(T);
    },
    caller: fa
  }), b = C.useMemo(() => x ? m.current ? "delayed-open" : "instant-open" : "closed", [x]), w = C.useCallback(() => {
    window.clearTimeout(p.current), p.current = 0, m.current = !1, y(!0);
  }, [y]), _ = C.useCallback(() => {
    window.clearTimeout(p.current), p.current = 0, y(!1);
  }, [y]), R = C.useCallback(() => {
    window.clearTimeout(p.current), p.current = window.setTimeout(() => {
      m.current = !0, y(!0), p.current = 0;
    }, v);
  }, [v, y]);
  return C.useEffect(() => () => {
    p.current && (window.clearTimeout(p.current), p.current = 0);
  }, []), /* @__PURE__ */ f.jsx(tf, { ...c, children: /* @__PURE__ */ f.jsx(
    $D,
    {
      scope: t,
      contentId: h,
      open: x,
      stateAttribute: b,
      trigger: u,
      onTriggerChange: d,
      onTriggerEnter: C.useCallback(() => {
        l.isOpenDelayedRef.current ? R() : w();
      }, [l.isOpenDelayedRef, R, w]),
      onTriggerLeave: C.useCallback(() => {
        g ? _() : (window.clearTimeout(p.current), p.current = 0);
      }, [_, g]),
      onOpen: w,
      onClose: _,
      disableHoverableContent: g,
      children: r
    }
  ) });
};
Um.displayName = fa;
var Du = "TooltipTrigger", Hm = C.forwardRef(
  (e, t) => {
    const { __scopeTooltip: r, ...n } = e, o = Fa(Du, r), i = af(Du, r), a = zl(r), s = C.useRef(null), l = _e(t, s, o.onTriggerChange), c = C.useRef(!1), u = C.useRef(!1), d = C.useCallback(() => c.current = !1, []);
    return C.useEffect(() => () => document.removeEventListener("pointerup", d), [d]), /* @__PURE__ */ f.jsx(rf, { asChild: !0, ...a, children: /* @__PURE__ */ f.jsx(
      me.button,
      {
        "aria-describedby": o.open ? o.contentId : void 0,
        "data-state": o.stateAttribute,
        ...n,
        ref: l,
        onPointerMove: ue(e.onPointerMove, (h) => {
          h.pointerType !== "touch" && !u.current && !i.isPointerInTransitRef.current && (o.onTriggerEnter(), u.current = !0);
        }),
        onPointerLeave: ue(e.onPointerLeave, () => {
          o.onTriggerLeave(), u.current = !1;
        }),
        onPointerDown: ue(e.onPointerDown, () => {
          o.open && o.onClose(), c.current = !0, document.addEventListener("pointerup", d, { once: !0 });
        }),
        onFocus: ue(e.onFocus, () => {
          c.current || o.onOpen();
        }),
        onBlur: ue(e.onBlur, o.onClose),
        onClick: ue(e.onClick, o.onClose)
      }
    ) });
  }
);
Hm.displayName = Du;
var sf = "TooltipPortal", [GD, VD] = Bl(sf, {
  forceMount: void 0
}), Wm = (e) => {
  const { __scopeTooltip: t, forceMount: r, children: n, container: o } = e, i = Fa(sf, t);
  return /* @__PURE__ */ f.jsx(GD, { scope: t, forceMount: r, children: /* @__PURE__ */ f.jsx(Nt, { present: r || i.open, children: /* @__PURE__ */ f.jsx(Oa, { asChild: !0, container: o, children: n }) }) });
};
Wm.displayName = sf;
var Wo = "TooltipContent", Ym = C.forwardRef(
  (e, t) => {
    const r = VD(Wo, e.__scopeTooltip), { forceMount: n = r.forceMount, side: o = "top", ...i } = e, a = Fa(Wo, e.__scopeTooltip);
    return /* @__PURE__ */ f.jsx(Nt, { present: n || a.open, children: a.disableHoverableContent ? /* @__PURE__ */ f.jsx(qm, { side: o, ...i, ref: t }) : /* @__PURE__ */ f.jsx(UD, { side: o, ...i, ref: t }) });
  }
), UD = C.forwardRef((e, t) => {
  const r = Fa(Wo, e.__scopeTooltip), n = af(Wo, e.__scopeTooltip), o = C.useRef(null), i = _e(t, o), [a, s] = C.useState(null), { trigger: l, onClose: c } = r, u = o.current, { onPointerInTransitChange: d } = n, h = C.useCallback(() => {
    s(null), d(!1);
  }, [d]), p = C.useCallback(
    (g, v) => {
      const m = g.currentTarget, x = { x: g.clientX, y: g.clientY }, y = qD(x, m.getBoundingClientRect()), b = XD(x, y), w = KD(v.getBoundingClientRect()), _ = QD([...b, ...w]);
      s(_), d(!0);
    },
    [d]
  );
  return C.useEffect(() => () => h(), [h]), C.useEffect(() => {
    if (l && u) {
      const g = (m) => p(m, u), v = (m) => p(m, l);
      return l.addEventListener("pointerleave", g), u.addEventListener("pointerleave", v), () => {
        l.removeEventListener("pointerleave", g), u.removeEventListener("pointerleave", v);
      };
    }
  }, [l, u, p, h]), C.useEffect(() => {
    if (a) {
      const g = (v) => {
        const m = v.target, x = { x: v.clientX, y: v.clientY }, y = l?.contains(m) || u?.contains(m), b = !ZD(x, a);
        y ? h() : b && (h(), c());
      };
      return document.addEventListener("pointermove", g), () => document.removeEventListener("pointermove", g);
    }
  }, [l, u, a, c, h]), /* @__PURE__ */ f.jsx(qm, { ...e, ref: i });
}), [HD, WD] = Bl(fa, { isInside: !1 }), YD = /* @__PURE__ */ H2("TooltipContent"), qm = C.forwardRef(
  (e, t) => {
    const {
      __scopeTooltip: r,
      children: n,
      "aria-label": o,
      onEscapeKeyDown: i,
      onPointerDownOutside: a,
      ...s
    } = e, l = Fa(Wo, r), c = zl(r), { onClose: u } = l;
    return C.useEffect(() => (document.addEventListener(Nu, u), () => document.removeEventListener(Nu, u)), [u]), C.useEffect(() => {
      if (l.trigger) {
        const d = (h) => {
          h.target?.contains(l.trigger) && u();
        };
        return window.addEventListener("scroll", d, { capture: !0 }), () => window.removeEventListener("scroll", d, { capture: !0 });
      }
    }, [l.trigger, u]), /* @__PURE__ */ f.jsx(
      Aa,
      {
        asChild: !0,
        disableOutsidePointerEvents: !1,
        onEscapeKeyDown: i,
        onPointerDownOutside: a,
        onFocusOutside: (d) => d.preventDefault(),
        onDismiss: u,
        children: /* @__PURE__ */ f.jsxs(
          nf,
          {
            "data-state": l.stateAttribute,
            ...c,
            ...s,
            ref: t,
            style: {
              ...s.style,
              "--radix-tooltip-content-transform-origin": "var(--radix-popper-transform-origin)",
              "--radix-tooltip-content-available-width": "var(--radix-popper-available-width)",
              "--radix-tooltip-content-available-height": "var(--radix-popper-available-height)",
              "--radix-tooltip-trigger-width": "var(--radix-popper-anchor-width)",
              "--radix-tooltip-trigger-height": "var(--radix-popper-anchor-height)"
            },
            children: [
              /* @__PURE__ */ f.jsx(YD, { children: n }),
              /* @__PURE__ */ f.jsx(HD, { scope: r, isInside: !0, children: /* @__PURE__ */ f.jsx(LD, { id: l.contentId, role: "tooltip", children: o || n }) })
            ]
          }
        )
      }
    );
  }
);
Ym.displayName = Wo;
var Xm = "TooltipArrow", Km = C.forwardRef(
  (e, t) => {
    const { __scopeTooltip: r, ...n } = e, o = zl(r);
    return WD(
      Xm,
      r
    ).isInside ? null : /* @__PURE__ */ f.jsx(of, { ...o, ...n, ref: t });
  }
);
Km.displayName = Xm;
function qD(e, t) {
  const r = Math.abs(t.top - e.y), n = Math.abs(t.bottom - e.y), o = Math.abs(t.right - e.x), i = Math.abs(t.left - e.x);
  switch (Math.min(r, n, o, i)) {
    case i:
      return "left";
    case o:
      return "right";
    case r:
      return "top";
    case n:
      return "bottom";
    default:
      throw new Error("unreachable");
  }
}
function XD(e, t, r = 5) {
  const n = [];
  switch (t) {
    case "top":
      n.push(
        { x: e.x - r, y: e.y + r },
        { x: e.x + r, y: e.y + r }
      );
      break;
    case "bottom":
      n.push(
        { x: e.x - r, y: e.y - r },
        { x: e.x + r, y: e.y - r }
      );
      break;
    case "left":
      n.push(
        { x: e.x + r, y: e.y - r },
        { x: e.x + r, y: e.y + r }
      );
      break;
    case "right":
      n.push(
        { x: e.x - r, y: e.y - r },
        { x: e.x - r, y: e.y + r }
      );
      break;
  }
  return n;
}
function KD(e) {
  const { top: t, right: r, bottom: n, left: o } = e;
  return [
    { x: o, y: t },
    { x: r, y: t },
    { x: r, y: n },
    { x: o, y: n }
  ];
}
function ZD(e, t) {
  const { x: r, y: n } = e;
  let o = !1;
  for (let i = 0, a = t.length - 1; i < t.length; a = i++) {
    const s = t[i], l = t[a], c = s.x, u = s.y, d = l.x, h = l.y;
    u > n != h > n && r < (d - c) * (n - u) / (h - u) + c && (o = !o);
  }
  return o;
}
function QD(e) {
  const t = e.slice();
  return t.sort((r, n) => r.x < n.x ? -1 : r.x > n.x ? 1 : r.y < n.y ? -1 : r.y > n.y ? 1 : 0), JD(t);
}
function JD(e) {
  if (e.length <= 1) return e.slice();
  const t = [];
  for (let n = 0; n < e.length; n++) {
    const o = e[n];
    for (; t.length >= 2; ) {
      const i = t[t.length - 1], a = t[t.length - 2];
      if ((i.x - a.x) * (o.y - a.y) >= (i.y - a.y) * (o.x - a.x)) t.pop();
      else break;
    }
    t.push(o);
  }
  t.pop();
  const r = [];
  for (let n = e.length - 1; n >= 0; n--) {
    const o = e[n];
    for (; r.length >= 2; ) {
      const i = r[r.length - 1], a = r[r.length - 2];
      if ((i.x - a.x) * (o.y - a.y) >= (i.y - a.y) * (o.x - a.x)) r.pop();
      else break;
    }
    r.push(o);
  }
  return r.pop(), t.length === 1 && r.length === 1 && t[0].x === r[0].x && t[0].y === r[0].y ? t : t.concat(r);
}
var eR = Vm, tR = Um, rR = Hm, nR = Wm, oR = Ym, iR = Km;
function aR({
  delayDuration: e = 0,
  ...t
}) {
  return /* @__PURE__ */ f.jsx(
    eR,
    {
      "data-slot": "tooltip-provider",
      delayDuration: e,
      ...t
    }
  );
}
function Yo({
  ...e
}) {
  return /* @__PURE__ */ f.jsx(aR, { children: /* @__PURE__ */ f.jsx(tR, { "data-slot": "tooltip", ...e }) });
}
function qo({
  ...e
}) {
  return /* @__PURE__ */ f.jsx(rR, { "data-slot": "tooltip-trigger", ...e });
}
function Xo({
  className: e,
  sideOffset: t = 0,
  children: r,
  ...n
}) {
  return /* @__PURE__ */ f.jsx(nR, { children: /* @__PURE__ */ f.jsxs(
    oR,
    {
      "data-slot": "tooltip-content",
      sideOffset: t,
      className: Ee(
        "bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",
        e
      ),
      ...n,
      children: [
        r,
        /* @__PURE__ */ f.jsx(iR, { className: "bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]" })
      ]
    }
  ) });
}
const sR = () => {
  const { json: e } = ke(), [t, r] = Ce(!1);
  if (!e) return null;
  const n = (i, a = 0) => {
    const s = "  ".repeat(a);
    if (typeof i == "object" && i !== null) {
      if (Array.isArray(i))
        return i.length === 0 ? "[]" : `[
${i.map((l) => s + "  " + n(l, a + 1)).join(`,
`)}
${s}]`;
      {
        const l = Object.keys(i);
        return l.length === 0 ? "{}" : `{
${l.map((c) => {
          const u = n(i[c], a + 1);
          return `${s}  "${c}": ${u}`;
        }).join(`,
`)}
${s}}`;
      }
    } else return typeof i == "string" ? `"${i}"` : String(i);
  }, o = n(e);
  return /* @__PURE__ */ f.jsxs(gm, { open: t, onOpenChange: r, children: [
    /* @__PURE__ */ f.jsx(mm, { asChild: !0, children: /* @__PURE__ */ f.jsxs(Yo, { children: [
      /* @__PURE__ */ f.jsx(qo, { asChild: !0, children: /* @__PURE__ */ f.jsx(Fe, { variant: "outline", size: "sm", className: "h-6 px-2 py-1", onClick: () => r(!0), children: /* @__PURE__ */ f.jsx(QC, { className: "h-4 w-4" }) }) }),
      /* @__PURE__ */ f.jsx(Xo, { children: "View Project Schema" })
    ] }) }),
    /* @__PURE__ */ f.jsxs(xm, { className: "!w-[80vw] !h-[80vh] !max-w-none overflow-hidden flex flex-col", children: [
      /* @__PURE__ */ f.jsx(MN, { children: /* @__PURE__ */ f.jsx(ym, { className: "flex items-center justify-between", children: /* @__PURE__ */ f.jsx("span", { children: "Project Schema" }) }) }),
      /* @__PURE__ */ f.jsx("div", { className: "flex-1 overflow-auto", children: /* @__PURE__ */ f.jsx("pre", { className: "text-sm bg-gray-50 p-4 rounded-md overflow-auto max-h-[60vh]", children: /* @__PURE__ */ f.jsx("code", { children: o }) }) })
    ] })
  ] });
}, lR = ({ isOpen: e, onClose: t, position: r = { bottom: 20, left: 6 } }) => {
  const [n, o] = Ce(!1);
  return ze(() => {
    o(!0);
  }, []), !e || !n ? null : VS(
    /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
      /* @__PURE__ */ f.jsx("div", { className: "fixed inset-0 z-40", onClick: t }),
      /* @__PURE__ */ f.jsxs(
        Jn,
        {
          className: "fixed w-80 max-h-96 overflow-auto shadow-xl z-50",
          style: {
            bottom: `${r.bottom}px`,
            left: `${r.left}px`
          },
          children: [
            /* @__PURE__ */ f.jsxs($g, { className: "flex flex-row items-center justify-between space-y-0 !p-4 !py-2 sticky top-0 bg-white", children: [
              /* @__PURE__ */ f.jsx(Gg, { className: "text-lg", children: "Help & Support" }),
              /* @__PURE__ */ f.jsx(Fe, { variant: "ghost", size: "sm", onClick: t, className: "h-8 w-8 p-0", children: /* @__PURE__ */ f.jsx(Rl, { className: "w-4 h-4" }) })
            ] }),
            /* @__PURE__ */ f.jsxs(Uo, { className: "space-y-4 !p-4", children: [
              /* @__PURE__ */ f.jsxs("div", { children: [
                /* @__PURE__ */ f.jsx("h3", { className: "font-semibold mb-2", children: "Getting Started" }),
                /* @__PURE__ */ f.jsx("p", { className: "text-sm text-gray-600 mb-3", children: "Welcome to our application! Here are some quick tips to get you started." })
              ] }),
              /* @__PURE__ */ f.jsxs("div", { children: [
                /* @__PURE__ */ f.jsx("h3", { className: "font-semibold mb-2", children: "Project Tools" }),
                /* @__PURE__ */ f.jsx("div", { className: "space-y-2", children: /* @__PURE__ */ f.jsx(sR, {}) })
              ] }),
              /* @__PURE__ */ f.jsx("div", { className: "pt-4 border-t", children: /* @__PURE__ */ f.jsx("p", { className: "text-xs text-gray-500 text-center", children: "Version 0.0.0" }) })
            ] })
          ]
        }
      )
    ] }),
    document.body
  );
}, cR = () => {
  const [e, t] = Ce(!1);
  return /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
    /* @__PURE__ */ f.jsx(
      Fe,
      {
        variant: "ghost",
        size: "icon",
        className: "size-8 group",
        onClick: () => t(!0),
        children: /* @__PURE__ */ f.jsx(CE, { className: "!w-6 !h-6 group-hover:scale-110 transform" })
      }
    ),
    /* @__PURE__ */ f.jsx(
      lR,
      {
        isOpen: e,
        onClose: () => t(!1),
        position: { bottom: 32, left: 32 }
      }
    )
  ] });
}, uR = ({ children: e }) => {
  const { activePanelId: t, setActivePanel: r } = Bt(), n = QE(), [o, i] = Me.useState(!1), a = (l) => {
    t === l ? (i(!0), r("")) : (i(!1), r(l));
  };
  ze(() => {
    if (!t && !o && n.length > 0) {
      const l = n[0]?.id;
      r(l);
    }
  }, [t, o, n]);
  const s = (l) => {
    or.getState().unregisterViewContainer(l);
    const u = n.length > 0 && n.length > 1 ? n[n.length - 2].id : "";
    a(u);
  };
  return /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
    /* @__PURE__ */ f.jsxs("div", { className: "flex-1 flex flex-col items-center space-y-2 w-full", children: [
      n.map((l) => /* @__PURE__ */ f.jsx(G2, { ...l, active: t === l.id, onClick: () => a(l.id), onRemove: () => s(l.id) }, l.id)),
      e
    ] }),
    /* @__PURE__ */ f.jsx("div", { children: /* @__PURE__ */ f.jsx(cR, {}) })
  ] });
};
function $l(e) {
  const t = e + "CollectionProvider", [r, n] = Gt(t), [o, i] = r(
    t,
    { collectionRef: { current: null }, itemMap: /* @__PURE__ */ new Map() }
  ), a = (v) => {
    const { scope: m, children: x } = v, y = Me.useRef(null), b = Me.useRef(/* @__PURE__ */ new Map()).current;
    return /* @__PURE__ */ f.jsx(o, { scope: m, itemMap: b, collectionRef: y, children: x });
  };
  a.displayName = t;
  const s = e + "CollectionSlot", l = /* @__PURE__ */ Qn(s), c = Me.forwardRef(
    (v, m) => {
      const { scope: x, children: y } = v, b = i(s, x), w = _e(m, b.collectionRef);
      return /* @__PURE__ */ f.jsx(l, { ref: w, children: y });
    }
  );
  c.displayName = s;
  const u = e + "CollectionItemSlot", d = "data-radix-collection-item", h = /* @__PURE__ */ Qn(u), p = Me.forwardRef(
    (v, m) => {
      const { scope: x, children: y, ...b } = v, w = Me.useRef(null), _ = _e(m, w), R = i(u, x);
      return Me.useEffect(() => (R.itemMap.set(w, { ref: w, ...b }), () => void R.itemMap.delete(w))), /* @__PURE__ */ f.jsx(h, { [d]: "", ref: _, children: y });
    }
  );
  p.displayName = u;
  function g(v) {
    const m = i(e + "CollectionConsumer", v);
    return Me.useCallback(() => {
      const y = m.collectionRef.current;
      if (!y) return [];
      const b = Array.from(y.querySelectorAll(`[${d}]`));
      return Array.from(m.itemMap.values()).sort(
        (R, T) => b.indexOf(R.ref.current) - b.indexOf(T.ref.current)
      );
    }, [m.collectionRef, m.itemMap]);
  }
  return [
    { Provider: a, Slot: c, ItemSlot: p },
    g,
    n
  ];
}
var dR = C.createContext(void 0);
function vi(e) {
  const t = C.useContext(dR);
  return e || t || "ltr";
}
var $c = "rovingFocusGroup.onEntryFocus", fR = { bubbles: !1, cancelable: !0 }, La = "RovingFocusGroup", [Ru, Zm, hR] = $l(La), [pR, Gl] = Gt(
  La,
  [hR]
), [vR, gR] = pR(La), Qm = C.forwardRef(
  (e, t) => /* @__PURE__ */ f.jsx(Ru.Provider, { scope: e.__scopeRovingFocusGroup, children: /* @__PURE__ */ f.jsx(Ru.Slot, { scope: e.__scopeRovingFocusGroup, children: /* @__PURE__ */ f.jsx(mR, { ...e, ref: t }) }) })
);
Qm.displayName = La;
var mR = C.forwardRef((e, t) => {
  const {
    __scopeRovingFocusGroup: r,
    orientation: n,
    loop: o = !1,
    dir: i,
    currentTabStopId: a,
    defaultCurrentTabStopId: s,
    onCurrentTabStopIdChange: l,
    onEntryFocus: c,
    preventScrollOnEntryFocus: u = !1,
    ...d
  } = e, h = C.useRef(null), p = _e(t, h), g = vi(i), [v, m] = Sr({
    prop: a,
    defaultProp: s ?? null,
    onChange: l,
    caller: La
  }), [x, y] = C.useState(!1), b = _t(c), w = Zm(r), _ = C.useRef(!1), [R, T] = C.useState(0);
  return C.useEffect(() => {
    const k = h.current;
    if (k)
      return k.addEventListener($c, b), () => k.removeEventListener($c, b);
  }, [b]), /* @__PURE__ */ f.jsx(
    vR,
    {
      scope: r,
      orientation: n,
      dir: g,
      loop: o,
      currentTabStopId: v,
      onItemFocus: C.useCallback(
        (k) => m(k),
        [m]
      ),
      onItemShiftTab: C.useCallback(() => y(!0), []),
      onFocusableItemAdd: C.useCallback(
        () => T((k) => k + 1),
        []
      ),
      onFocusableItemRemove: C.useCallback(
        () => T((k) => k - 1),
        []
      ),
      children: /* @__PURE__ */ f.jsx(
        me.div,
        {
          tabIndex: x || R === 0 ? -1 : 0,
          "data-orientation": n,
          ...d,
          ref: p,
          style: { outline: "none", ...e.style },
          onMouseDown: ue(e.onMouseDown, () => {
            _.current = !0;
          }),
          onFocus: ue(e.onFocus, (k) => {
            const j = !_.current;
            if (k.target === k.currentTarget && j && !x) {
              const A = new CustomEvent($c, fR);
              if (k.currentTarget.dispatchEvent(A), !A.defaultPrevented) {
                const $ = w().filter((I) => I.focusable), F = $.find((I) => I.active), L = $.find((I) => I.id === v), O = [F, L, ...$].filter(
                  Boolean
                ).map((I) => I.ref.current);
                t0(O, u);
              }
            }
            _.current = !1;
          }),
          onBlur: ue(e.onBlur, () => y(!1))
        }
      )
    }
  );
}), Jm = "RovingFocusGroupItem", e0 = C.forwardRef(
  (e, t) => {
    const {
      __scopeRovingFocusGroup: r,
      focusable: n = !0,
      active: o = !1,
      tabStopId: i,
      children: a,
      ...s
    } = e, l = ir(), c = i || l, u = gR(Jm, r), d = u.currentTabStopId === c, h = Zm(r), { onFocusableItemAdd: p, onFocusableItemRemove: g, currentTabStopId: v } = u;
    return C.useEffect(() => {
      if (n)
        return p(), () => g();
    }, [n, p, g]), /* @__PURE__ */ f.jsx(
      Ru.ItemSlot,
      {
        scope: r,
        id: c,
        focusable: n,
        active: o,
        children: /* @__PURE__ */ f.jsx(
          me.span,
          {
            tabIndex: d ? 0 : -1,
            "data-orientation": u.orientation,
            ...s,
            ref: t,
            onMouseDown: ue(e.onMouseDown, (m) => {
              n ? u.onItemFocus(c) : m.preventDefault();
            }),
            onFocus: ue(e.onFocus, () => u.onItemFocus(c)),
            onKeyDown: ue(e.onKeyDown, (m) => {
              if (m.key === "Tab" && m.shiftKey) {
                u.onItemShiftTab();
                return;
              }
              if (m.target !== m.currentTarget) return;
              const x = bR(m, u.orientation, u.dir);
              if (x !== void 0) {
                if (m.metaKey || m.ctrlKey || m.altKey || m.shiftKey) return;
                m.preventDefault();
                let b = h().filter((w) => w.focusable).map((w) => w.ref.current);
                if (x === "last") b.reverse();
                else if (x === "prev" || x === "next") {
                  x === "prev" && b.reverse();
                  const w = b.indexOf(m.currentTarget);
                  b = u.loop ? wR(b, w + 1) : b.slice(w + 1);
                }
                setTimeout(() => t0(b));
              }
            }),
            children: typeof a == "function" ? a({ isCurrentTabStop: d, hasTabStop: v != null }) : a
          }
        )
      }
    );
  }
);
e0.displayName = Jm;
var xR = {
  ArrowLeft: "prev",
  ArrowUp: "prev",
  ArrowRight: "next",
  ArrowDown: "next",
  PageUp: "first",
  Home: "first",
  PageDown: "last",
  End: "last"
};
function yR(e, t) {
  return t !== "rtl" ? e : e === "ArrowLeft" ? "ArrowRight" : e === "ArrowRight" ? "ArrowLeft" : e;
}
function bR(e, t, r) {
  const n = yR(e.key, r);
  if (!(t === "vertical" && ["ArrowLeft", "ArrowRight"].includes(n)) && !(t === "horizontal" && ["ArrowUp", "ArrowDown"].includes(n)))
    return xR[n];
}
function t0(e, t = !1) {
  const r = document.activeElement;
  for (const n of e)
    if (n === r || (n.focus({ preventScroll: t }), document.activeElement !== r)) return;
}
function wR(e, t) {
  return e.map((r, n) => e[(t + n) % e.length]);
}
var r0 = Qm, n0 = e0, Vl = "Tabs", [SR, pF] = Gt(Vl, [
  Gl
]), o0 = Gl(), [CR, lf] = SR(Vl), i0 = C.forwardRef(
  (e, t) => {
    const {
      __scopeTabs: r,
      value: n,
      onValueChange: o,
      defaultValue: i,
      orientation: a = "horizontal",
      dir: s,
      activationMode: l = "automatic",
      ...c
    } = e, u = vi(s), [d, h] = Sr({
      prop: n,
      onChange: o,
      defaultProp: i ?? "",
      caller: Vl
    });
    return /* @__PURE__ */ f.jsx(
      CR,
      {
        scope: r,
        baseId: ir(),
        value: d,
        onValueChange: h,
        orientation: a,
        dir: u,
        activationMode: l,
        children: /* @__PURE__ */ f.jsx(
          me.div,
          {
            dir: u,
            "data-orientation": a,
            ...c,
            ref: t
          }
        )
      }
    );
  }
);
i0.displayName = Vl;
var a0 = "TabsList", s0 = C.forwardRef(
  (e, t) => {
    const { __scopeTabs: r, loop: n = !0, ...o } = e, i = lf(a0, r), a = o0(r);
    return /* @__PURE__ */ f.jsx(
      r0,
      {
        asChild: !0,
        ...a,
        orientation: i.orientation,
        dir: i.dir,
        loop: n,
        children: /* @__PURE__ */ f.jsx(
          me.div,
          {
            role: "tablist",
            "aria-orientation": i.orientation,
            ...o,
            ref: t
          }
        )
      }
    );
  }
);
s0.displayName = a0;
var l0 = "TabsTrigger", c0 = C.forwardRef(
  (e, t) => {
    const { __scopeTabs: r, value: n, disabled: o = !1, ...i } = e, a = lf(l0, r), s = o0(r), l = f0(a.baseId, n), c = h0(a.baseId, n), u = n === a.value;
    return /* @__PURE__ */ f.jsx(
      n0,
      {
        asChild: !0,
        ...s,
        focusable: !o,
        active: u,
        children: /* @__PURE__ */ f.jsx(
          me.button,
          {
            type: "button",
            role: "tab",
            "aria-selected": u,
            "aria-controls": c,
            "data-state": u ? "active" : "inactive",
            "data-disabled": o ? "" : void 0,
            disabled: o,
            id: l,
            ...i,
            ref: t,
            onMouseDown: ue(e.onMouseDown, (d) => {
              !o && d.button === 0 && d.ctrlKey === !1 ? a.onValueChange(n) : d.preventDefault();
            }),
            onKeyDown: ue(e.onKeyDown, (d) => {
              [" ", "Enter"].includes(d.key) && a.onValueChange(n);
            }),
            onFocus: ue(e.onFocus, () => {
              const d = a.activationMode !== "manual";
              !u && !o && d && a.onValueChange(n);
            })
          }
        )
      }
    );
  }
);
c0.displayName = l0;
var u0 = "TabsContent", d0 = C.forwardRef(
  (e, t) => {
    const { __scopeTabs: r, value: n, forceMount: o, children: i, ...a } = e, s = lf(u0, r), l = f0(s.baseId, n), c = h0(s.baseId, n), u = n === s.value, d = C.useRef(u);
    return C.useEffect(() => {
      const h = requestAnimationFrame(() => d.current = !1);
      return () => cancelAnimationFrame(h);
    }, []), /* @__PURE__ */ f.jsx(Nt, { present: o || u, children: ({ present: h }) => /* @__PURE__ */ f.jsx(
      me.div,
      {
        "data-state": u ? "active" : "inactive",
        "data-orientation": s.orientation,
        role: "tabpanel",
        "aria-labelledby": l,
        hidden: !h,
        id: c,
        tabIndex: 0,
        ...a,
        ref: t,
        style: {
          ...e.style,
          animationDuration: d.current ? "0s" : void 0
        },
        children: h && i
      }
    ) });
  }
);
d0.displayName = u0;
function f0(e, t) {
  return `${e}-trigger-${t}`;
}
function h0(e, t) {
  return `${e}-content-${t}`;
}
var ER = i0, p0 = s0, v0 = c0, g0 = d0;
const m0 = ER, cf = C.forwardRef(({ className: e, ...t }, r) => /* @__PURE__ */ f.jsx(
  p0,
  {
    ref: r,
    className: Ee(
      "inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",
      e
    ),
    ...t
  }
));
cf.displayName = p0.displayName;
const Hi = C.forwardRef(({ className: e, ...t }, r) => /* @__PURE__ */ f.jsx(
  v0,
  {
    ref: r,
    className: Ee(
      "inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",
      e
    ),
    ...t
  }
));
Hi.displayName = v0.displayName;
const Wi = C.forwardRef(({ className: e, ...t }, r) => /* @__PURE__ */ f.jsx(
  g0,
  {
    ref: r,
    className: Ee(
      "mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",
      e
    ),
    ...t
  }
));
Wi.displayName = g0.displayName;
function _R() {
  const { api: e } = Ml(), [t, r] = Ce([]), [n, o] = Ce(null), [i, a] = Ce(!0), [s, l] = Ce(null), c = async () => {
    try {
      a(!0);
      const p = await e.getAllDataSources();
      r(p), p.length > 0 && o(p[0]), l(null);
    } catch (p) {
      l(p instanceof Error ? p.message : "Failed to load data sources");
    } finally {
      a(!1);
    }
  };
  return ze(() => {
    c();
  }, []), {
    dataSources: t,
    selectedSource: n,
    loading: i,
    error: s,
    setSelectedSource: o,
    loadDataSources: c,
    saveDataSource: async (p, g) => {
      try {
        if (g === "add") {
          const v = await e.createDataSource({
            name: p.name,
            type: p.type,
            status: p.status,
            config: p.config
          });
          r([...t, v]), o(v);
        } else {
          const v = await e.updateDataSource(p.id, {
            name: p.name,
            type: p.type,
            status: p.status,
            config: p.config
          });
          r(t.map((m) => m.id === v.id ? v : m)), o(v);
        }
        l(null);
      } catch (v) {
        throw l(v instanceof Error ? v.message : "Failed to save data source"), v;
      }
    },
    removeDataSource: async (p) => {
      try {
        await e.deleteDataSource(p);
        const g = t.filter((v) => v.id !== p);
        r(g), n?.id === p && g.length > 0 ? o(g[0]) : g.length === 0 && o(null), l(null);
      } catch (g) {
        throw l(g instanceof Error ? g.message : "Failed to delete data source"), g;
      }
    },
    testConnection: async (p) => {
      try {
        const g = await e.testDataSourceConnection(p), v = {
          ...p,
          status: g.status
        };
        return r(t.map((m) => m.id === v.id ? v : m)), o(v), l(null), g;
      } catch (g) {
        throw l(g instanceof Error ? g.message : "Failed to test connection"), g;
      }
    },
    setError: l
  };
}
function NR() {
  const { api: e } = Ml(), [t, r] = Ce([]), [n, o] = Ce(null), i = nr(async (l) => {
    try {
      const c = await e.getDatasetsByDataSource(l);
      r(c), o(null);
    } catch (c) {
      throw o(c instanceof Error ? c.message : "Failed to load datasets"), c;
    }
  }, []);
  return {
    datasets: t,
    error: n,
    loadDatasets: i,
    saveDataset: async (l, c) => {
      try {
        if (c === "add") {
          const u = await e.createDataset({
            name: l.name,
            query: l.query,
            fields: l.fields,
            transform: l.transform,
            previewData: l.previewData,
            status: l.status,
            dataSourceId: l.dataSourceId
          });
          r([...t, u]);
        } else {
          const u = await e.updateDataset(l.id, {
            name: l.name,
            query: l.query,
            fields: l.fields,
            transform: l.transform,
            previewData: l.previewData,
            status: l.status
          });
          r(t.map((d) => d.id === u.id ? u : d));
        }
        o(null);
      } catch (u) {
        throw o(u instanceof Error ? u.message : "Failed to save dataset"), u;
      }
    },
    removeDataset: async (l) => {
      try {
        await e.deleteDataset(l), r(t.filter((c) => c.id !== l)), o(null);
      } catch (c) {
        throw o(c instanceof Error ? c.message : "Failed to delete dataset"), c;
      }
    },
    setError: o
  };
}
const x0 = wl(null);
function DR({ children: e, initialValues: t, onConfigChange: r }) {
  const { dataSources: n } = _R(), { datasets: o, loadDatasets: i } = NR(), [a, s] = Ce(null), [l, c] = Ce(!1), [u, d] = Ce(
    t || {
      sourceId: "",
      mode: "static",
      fieldMapping: {}
    }
  ), h = u.sourceId, p = u.datasetId;
  ze(() => {
    h && i(h);
  }, [h, i]), ze(() => {
    if (p) {
      const R = o.find((T) => T.id === p) || null;
      s(R);
    } else
      s(null);
  }, [p, o]), ze(() => {
    t && d(t);
  }, [t]);
  const g = bt(null), v = bt(!0);
  ze(() => {
    if (v.current) {
      v.current = !1, g.current = { ...u };
      return;
    }
    !(JSON.stringify(g.current) === JSON.stringify(u)) && r && (r(u), g.current = { ...u });
  }, [u, r]);
  const m = nr((R, T) => {
    d((k) => ({
      ...k,
      [R]: T
    }));
  }, []), x = nr((R, T) => {
    d((k) => ({
      ...k,
      fieldMapping: {
        ...k.fieldMapping,
        [R]: T
      }
    }));
  }, []), y = () => a ? a.fields && Array.isArray(a.fields) ? a.fields : a.previewData && a.previewData.length > 0 ? Object.keys(a.previewData[0]) : [] : [], b = y(), _ = {
    formValues: u,
    setFormValue: m,
    setFieldMapping: x,
    dataSources: n,
    datasets: o,
    selectedDataset: a,
    sourceId: h,
    datasetId: p,
    showFormOutput: l,
    setShowFormOutput: c,
    copyFormValues: async () => {
      try {
        await navigator.clipboard.writeText(JSON.stringify(u, null, 2));
      } catch (R) {
        console.error("Copy failed:", R);
      }
    },
    getAvailableFields: y,
    availableFields: b
  };
  return /* @__PURE__ */ f.jsx(x0.Provider, { value: _, children: e });
}
function Ba() {
  const e = Sl(x0);
  if (!e)
    throw new Error("useDataBinding must be used within a DataBindingProvider");
  return e;
}
var RR = "Label", y0 = C.forwardRef((e, t) => /* @__PURE__ */ f.jsx(
  me.label,
  {
    ...e,
    ref: t,
    onMouseDown: (r) => {
      r.target.closest("button, input, select, textarea") || (e.onMouseDown?.(r), !r.defaultPrevented && r.detail > 1 && r.preventDefault());
    }
  }
));
y0.displayName = RR;
var b0 = y0;
const MR = zd(
  "text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
), Te = C.forwardRef(({ className: e, ...t }, r) => /* @__PURE__ */ f.jsx(
  b0,
  {
    ref: r,
    className: Ee(MR(), e),
    ...t
  }
));
Te.displayName = b0.displayName;
function ha(e, [t, r]) {
  return Math.min(r, Math.max(t, e));
}
function Ul(e) {
  const t = C.useRef({ value: e, previous: e });
  return C.useMemo(() => (t.current.value !== e && (t.current.previous = t.current.value, t.current.value = e), t.current.previous), [e]);
}
var TR = [" ", "Enter", "ArrowUp", "ArrowDown"], jR = [" ", "Enter"], ro = "Select", [Hl, Wl, kR] = $l(ro), [gi, vF] = Gt(ro, [
  kR,
  pi
]), Yl = pi(), [PR, Pn] = gi(ro), [AR, OR] = gi(ro), w0 = (e) => {
  const {
    __scopeSelect: t,
    children: r,
    open: n,
    defaultOpen: o,
    onOpenChange: i,
    value: a,
    defaultValue: s,
    onValueChange: l,
    dir: c,
    name: u,
    autoComplete: d,
    disabled: h,
    required: p,
    form: g
  } = e, v = Yl(t), [m, x] = C.useState(null), [y, b] = C.useState(null), [w, _] = C.useState(!1), R = vi(c), [T, k] = Sr({
    prop: n,
    defaultProp: o ?? !1,
    onChange: i,
    caller: ro
  }), [j, A] = Sr({
    prop: a,
    defaultProp: s,
    onChange: l,
    caller: ro
  }), $ = C.useRef(null), F = m ? g || !!m.closest("form") : !0, [L, P] = C.useState(/* @__PURE__ */ new Set()), O = Array.from(L).map((I) => I.props.value).join(";");
  return /* @__PURE__ */ f.jsx(tf, { ...v, children: /* @__PURE__ */ f.jsxs(
    PR,
    {
      required: p,
      scope: t,
      trigger: m,
      onTriggerChange: x,
      valueNode: y,
      onValueNodeChange: b,
      valueNodeHasChildren: w,
      onValueNodeHasChildrenChange: _,
      contentId: ir(),
      value: j,
      onValueChange: A,
      open: T,
      onOpenChange: k,
      dir: R,
      triggerPointerDownPosRef: $,
      disabled: h,
      children: [
        /* @__PURE__ */ f.jsx(Hl.Provider, { scope: t, children: /* @__PURE__ */ f.jsx(
          AR,
          {
            scope: e.__scopeSelect,
            onNativeOptionAdd: C.useCallback((I) => {
              P((E) => new Set(E).add(I));
            }, []),
            onNativeOptionRemove: C.useCallback((I) => {
              P((E) => {
                const S = new Set(E);
                return S.delete(I), S;
              });
            }, []),
            children: r
          }
        ) }),
        F ? /* @__PURE__ */ f.jsxs(
          H0,
          {
            "aria-hidden": !0,
            required: p,
            tabIndex: -1,
            name: u,
            autoComplete: d,
            value: j,
            onChange: (I) => A(I.target.value),
            disabled: h,
            form: g,
            children: [
              j === void 0 ? /* @__PURE__ */ f.jsx("option", { value: "" }) : null,
              Array.from(L)
            ]
          },
          O
        ) : null
      ]
    }
  ) });
};
w0.displayName = ro;
var S0 = "SelectTrigger", C0 = C.forwardRef(
  (e, t) => {
    const { __scopeSelect: r, disabled: n = !1, ...o } = e, i = Yl(r), a = Pn(S0, r), s = a.disabled || n, l = _e(t, a.onTriggerChange), c = Wl(r), u = C.useRef("touch"), [d, h, p] = Y0((v) => {
      const m = c().filter((b) => !b.disabled), x = m.find((b) => b.value === a.value), y = q0(m, v, x);
      y !== void 0 && a.onValueChange(y.value);
    }), g = (v) => {
      s || (a.onOpenChange(!0), p()), v && (a.triggerPointerDownPosRef.current = {
        x: Math.round(v.pageX),
        y: Math.round(v.pageY)
      });
    };
    return /* @__PURE__ */ f.jsx(rf, { asChild: !0, ...i, children: /* @__PURE__ */ f.jsx(
      me.button,
      {
        type: "button",
        role: "combobox",
        "aria-controls": a.contentId,
        "aria-expanded": a.open,
        "aria-required": a.required,
        "aria-autocomplete": "none",
        dir: a.dir,
        "data-state": a.open ? "open" : "closed",
        disabled: s,
        "data-disabled": s ? "" : void 0,
        "data-placeholder": W0(a.value) ? "" : void 0,
        ...o,
        ref: l,
        onClick: ue(o.onClick, (v) => {
          v.currentTarget.focus(), u.current !== "mouse" && g(v);
        }),
        onPointerDown: ue(o.onPointerDown, (v) => {
          u.current = v.pointerType;
          const m = v.target;
          m.hasPointerCapture(v.pointerId) && m.releasePointerCapture(v.pointerId), v.button === 0 && v.ctrlKey === !1 && v.pointerType === "mouse" && (g(v), v.preventDefault());
        }),
        onKeyDown: ue(o.onKeyDown, (v) => {
          const m = d.current !== "";
          !(v.ctrlKey || v.altKey || v.metaKey) && v.key.length === 1 && h(v.key), !(m && v.key === " ") && TR.includes(v.key) && (g(), v.preventDefault());
        })
      }
    ) });
  }
);
C0.displayName = S0;
var E0 = "SelectValue", _0 = C.forwardRef(
  (e, t) => {
    const { __scopeSelect: r, className: n, style: o, children: i, placeholder: a = "", ...s } = e, l = Pn(E0, r), { onValueNodeHasChildrenChange: c } = l, u = i !== void 0, d = _e(t, l.onValueNodeChange);
    return wt(() => {
      c(u);
    }, [c, u]), /* @__PURE__ */ f.jsx(
      me.span,
      {
        ...s,
        ref: d,
        style: { pointerEvents: "none" },
        children: W0(l.value) ? /* @__PURE__ */ f.jsx(f.Fragment, { children: a }) : i
      }
    );
  }
);
_0.displayName = E0;
var IR = "SelectIcon", N0 = C.forwardRef(
  (e, t) => {
    const { __scopeSelect: r, children: n, ...o } = e;
    return /* @__PURE__ */ f.jsx(me.span, { "aria-hidden": !0, ...o, ref: t, children: n || "▼" });
  }
);
N0.displayName = IR;
var FR = "SelectPortal", D0 = (e) => /* @__PURE__ */ f.jsx(Oa, { asChild: !0, ...e });
D0.displayName = FR;
var no = "SelectContent", R0 = C.forwardRef(
  (e, t) => {
    const r = Pn(no, e.__scopeSelect), [n, o] = C.useState();
    if (wt(() => {
      o(new DocumentFragment());
    }, []), !r.open) {
      const i = n;
      return i ? Cl.createPortal(
        /* @__PURE__ */ f.jsx(M0, { scope: e.__scopeSelect, children: /* @__PURE__ */ f.jsx(Hl.Slot, { scope: e.__scopeSelect, children: /* @__PURE__ */ f.jsx("div", { children: e.children }) }) }),
        i
      ) : null;
    }
    return /* @__PURE__ */ f.jsx(T0, { ...e, ref: t });
  }
);
R0.displayName = no;
var pr = 10, [M0, An] = gi(no), LR = "SelectContentImpl", BR = /* @__PURE__ */ Qn("SelectContent.RemoveScroll"), T0 = C.forwardRef(
  (e, t) => {
    const {
      __scopeSelect: r,
      position: n = "item-aligned",
      onCloseAutoFocus: o,
      onEscapeKeyDown: i,
      onPointerDownOutside: a,
      //
      // PopperContent props
      side: s,
      sideOffset: l,
      align: c,
      alignOffset: u,
      arrowPadding: d,
      collisionBoundary: h,
      collisionPadding: p,
      sticky: g,
      hideWhenDetached: v,
      avoidCollisions: m,
      //
      ...x
    } = e, y = Pn(no, r), [b, w] = C.useState(null), [_, R] = C.useState(null), T = _e(t, (q) => w(q)), [k, j] = C.useState(null), [A, $] = C.useState(
      null
    ), F = Wl(r), [L, P] = C.useState(!1), O = C.useRef(!1);
    C.useEffect(() => {
      if (b) return Gd(b);
    }, [b]), $d();
    const I = C.useCallback(
      (q) => {
        const [K, ...ne] = F().map((G) => G.ref.current), [oe] = ne.slice(-1), te = document.activeElement;
        for (const G of q)
          if (G === te || (G?.scrollIntoView({ block: "nearest" }), G === K && _ && (_.scrollTop = 0), G === oe && _ && (_.scrollTop = _.scrollHeight), G?.focus(), document.activeElement !== te)) return;
      },
      [F, _]
    ), E = C.useCallback(
      () => I([k, b]),
      [I, k, b]
    );
    C.useEffect(() => {
      L && E();
    }, [L, E]);
    const { onOpenChange: S, triggerPointerDownPosRef: M } = y;
    C.useEffect(() => {
      if (b) {
        let q = { x: 0, y: 0 };
        const K = (oe) => {
          q = {
            x: Math.abs(Math.round(oe.pageX) - (M.current?.x ?? 0)),
            y: Math.abs(Math.round(oe.pageY) - (M.current?.y ?? 0))
          };
        }, ne = (oe) => {
          q.x <= 10 && q.y <= 10 ? oe.preventDefault() : b.contains(oe.target) || S(!1), document.removeEventListener("pointermove", K), M.current = null;
        };
        return M.current !== null && (document.addEventListener("pointermove", K), document.addEventListener("pointerup", ne, { capture: !0, once: !0 })), () => {
          document.removeEventListener("pointermove", K), document.removeEventListener("pointerup", ne, { capture: !0 });
        };
      }
    }, [b, S, M]), C.useEffect(() => {
      const q = () => S(!1);
      return window.addEventListener("blur", q), window.addEventListener("resize", q), () => {
        window.removeEventListener("blur", q), window.removeEventListener("resize", q);
      };
    }, [S]);
    const [D, N] = Y0((q) => {
      const K = F().filter((te) => !te.disabled), ne = K.find((te) => te.ref.current === document.activeElement), oe = q0(K, q, ne);
      oe && setTimeout(() => oe.ref.current.focus());
    }), z = C.useCallback(
      (q, K, ne) => {
        const oe = !O.current && !ne;
        (y.value !== void 0 && y.value === K || oe) && (j(q), oe && (O.current = !0));
      },
      [y.value]
    ), Y = C.useCallback(() => b?.focus(), [b]), H = C.useCallback(
      (q, K, ne) => {
        const oe = !O.current && !ne;
        (y.value !== void 0 && y.value === K || oe) && $(q);
      },
      [y.value]
    ), X = n === "popper" ? Mu : j0, Q = X === Mu ? {
      side: s,
      sideOffset: l,
      align: c,
      alignOffset: u,
      arrowPadding: d,
      collisionBoundary: h,
      collisionPadding: p,
      sticky: g,
      hideWhenDetached: v,
      avoidCollisions: m
    } : {};
    return /* @__PURE__ */ f.jsx(
      M0,
      {
        scope: r,
        content: b,
        viewport: _,
        onViewportChange: R,
        itemRefCallback: z,
        selectedItem: k,
        onItemLeave: Y,
        itemTextRefCallback: H,
        focusSelectedItem: E,
        selectedItemText: A,
        position: n,
        isPositioned: L,
        searchRef: D,
        children: /* @__PURE__ */ f.jsx(Pl, { as: BR, allowPinchZoom: !0, children: /* @__PURE__ */ f.jsx(
          jl,
          {
            asChild: !0,
            trapped: y.open,
            onMountAutoFocus: (q) => {
              q.preventDefault();
            },
            onUnmountAutoFocus: ue(o, (q) => {
              y.trigger?.focus({ preventScroll: !0 }), q.preventDefault();
            }),
            children: /* @__PURE__ */ f.jsx(
              Aa,
              {
                asChild: !0,
                disableOutsidePointerEvents: !0,
                onEscapeKeyDown: i,
                onPointerDownOutside: a,
                onFocusOutside: (q) => q.preventDefault(),
                onDismiss: () => y.onOpenChange(!1),
                children: /* @__PURE__ */ f.jsx(
                  X,
                  {
                    role: "listbox",
                    id: y.contentId,
                    "data-state": y.open ? "open" : "closed",
                    dir: y.dir,
                    onContextMenu: (q) => q.preventDefault(),
                    ...x,
                    ...Q,
                    onPlaced: () => P(!0),
                    ref: T,
                    style: {
                      // flex layout so we can place the scroll buttons properly
                      display: "flex",
                      flexDirection: "column",
                      // reset the outline by default as the content MAY get focused
                      outline: "none",
                      ...x.style
                    },
                    onKeyDown: ue(x.onKeyDown, (q) => {
                      const K = q.ctrlKey || q.altKey || q.metaKey;
                      if (q.key === "Tab" && q.preventDefault(), !K && q.key.length === 1 && N(q.key), ["ArrowUp", "ArrowDown", "Home", "End"].includes(q.key)) {
                        let oe = F().filter((te) => !te.disabled).map((te) => te.ref.current);
                        if (["ArrowUp", "End"].includes(q.key) && (oe = oe.slice().reverse()), ["ArrowUp", "ArrowDown"].includes(q.key)) {
                          const te = q.target, G = oe.indexOf(te);
                          oe = oe.slice(G + 1);
                        }
                        setTimeout(() => I(oe)), q.preventDefault();
                      }
                    })
                  }
                )
              }
            )
          }
        ) })
      }
    );
  }
);
T0.displayName = LR;
var zR = "SelectItemAlignedPosition", j0 = C.forwardRef((e, t) => {
  const { __scopeSelect: r, onPlaced: n, ...o } = e, i = Pn(no, r), a = An(no, r), [s, l] = C.useState(null), [c, u] = C.useState(null), d = _e(t, (T) => u(T)), h = Wl(r), p = C.useRef(!1), g = C.useRef(!0), { viewport: v, selectedItem: m, selectedItemText: x, focusSelectedItem: y } = a, b = C.useCallback(() => {
    if (i.trigger && i.valueNode && s && c && v && m && x) {
      const T = i.trigger.getBoundingClientRect(), k = c.getBoundingClientRect(), j = i.valueNode.getBoundingClientRect(), A = x.getBoundingClientRect();
      if (i.dir !== "rtl") {
        const te = A.left - k.left, G = j.left - te, ee = T.left - G, U = T.width + ee, J = Math.max(U, k.width), re = window.innerWidth - pr, se = ha(G, [
          pr,
          // Prevents the content from going off the starting edge of the
          // viewport. It may still go off the ending edge, but this can be
          // controlled by the user since they may want to manage overflow in a
          // specific way.
          // https://github.com/radix-ui/primitives/issues/2049
          Math.max(pr, re - J)
        ]);
        s.style.minWidth = U + "px", s.style.left = se + "px";
      } else {
        const te = k.right - A.right, G = window.innerWidth - j.right - te, ee = window.innerWidth - T.right - G, U = T.width + ee, J = Math.max(U, k.width), re = window.innerWidth - pr, se = ha(G, [
          pr,
          Math.max(pr, re - J)
        ]);
        s.style.minWidth = U + "px", s.style.right = se + "px";
      }
      const $ = h(), F = window.innerHeight - pr * 2, L = v.scrollHeight, P = window.getComputedStyle(c), O = parseInt(P.borderTopWidth, 10), I = parseInt(P.paddingTop, 10), E = parseInt(P.borderBottomWidth, 10), S = parseInt(P.paddingBottom, 10), M = O + I + L + S + E, D = Math.min(m.offsetHeight * 5, M), N = window.getComputedStyle(v), z = parseInt(N.paddingTop, 10), Y = parseInt(N.paddingBottom, 10), H = T.top + T.height / 2 - pr, X = F - H, Q = m.offsetHeight / 2, q = m.offsetTop + Q, K = O + I + q, ne = M - K;
      if (K <= H) {
        const te = $.length > 0 && m === $[$.length - 1].ref.current;
        s.style.bottom = "0px";
        const G = c.clientHeight - v.offsetTop - v.offsetHeight, ee = Math.max(
          X,
          Q + // viewport might have padding bottom, include it to avoid a scrollable viewport
          (te ? Y : 0) + G + E
        ), U = K + ee;
        s.style.height = U + "px";
      } else {
        const te = $.length > 0 && m === $[0].ref.current;
        s.style.top = "0px";
        const ee = Math.max(
          H,
          O + v.offsetTop + // viewport might have padding top, include it to avoid a scrollable viewport
          (te ? z : 0) + Q
        ) + ne;
        s.style.height = ee + "px", v.scrollTop = K - H + v.offsetTop;
      }
      s.style.margin = `${pr}px 0`, s.style.minHeight = D + "px", s.style.maxHeight = F + "px", n?.(), requestAnimationFrame(() => p.current = !0);
    }
  }, [
    h,
    i.trigger,
    i.valueNode,
    s,
    c,
    v,
    m,
    x,
    i.dir,
    n
  ]);
  wt(() => b(), [b]);
  const [w, _] = C.useState();
  wt(() => {
    c && _(window.getComputedStyle(c).zIndex);
  }, [c]);
  const R = C.useCallback(
    (T) => {
      T && g.current === !0 && (b(), y?.(), g.current = !1);
    },
    [b, y]
  );
  return /* @__PURE__ */ f.jsx(
    GR,
    {
      scope: r,
      contentWrapper: s,
      shouldExpandOnScrollRef: p,
      onScrollButtonChange: R,
      children: /* @__PURE__ */ f.jsx(
        "div",
        {
          ref: l,
          style: {
            display: "flex",
            flexDirection: "column",
            position: "fixed",
            zIndex: w
          },
          children: /* @__PURE__ */ f.jsx(
            me.div,
            {
              ...o,
              ref: d,
              style: {
                // When we get the height of the content, it includes borders. If we were to set
                // the height without having `boxSizing: 'border-box'` it would be too big.
                boxSizing: "border-box",
                // We need to ensure the content doesn't get taller than the wrapper
                maxHeight: "100%",
                ...o.style
              }
            }
          )
        }
      )
    }
  );
});
j0.displayName = zR;
var $R = "SelectPopperPosition", Mu = C.forwardRef((e, t) => {
  const {
    __scopeSelect: r,
    align: n = "start",
    collisionPadding: o = pr,
    ...i
  } = e, a = Yl(r);
  return /* @__PURE__ */ f.jsx(
    nf,
    {
      ...a,
      ...i,
      ref: t,
      align: n,
      collisionPadding: o,
      style: {
        // Ensure border-box for floating-ui calculations
        boxSizing: "border-box",
        ...i.style,
        "--radix-select-content-transform-origin": "var(--radix-popper-transform-origin)",
        "--radix-select-content-available-width": "var(--radix-popper-available-width)",
        "--radix-select-content-available-height": "var(--radix-popper-available-height)",
        "--radix-select-trigger-width": "var(--radix-popper-anchor-width)",
        "--radix-select-trigger-height": "var(--radix-popper-anchor-height)"
      }
    }
  );
});
Mu.displayName = $R;
var [GR, uf] = gi(no, {}), Tu = "SelectViewport", k0 = C.forwardRef(
  (e, t) => {
    const { __scopeSelect: r, nonce: n, ...o } = e, i = An(Tu, r), a = uf(Tu, r), s = _e(t, i.onViewportChange), l = C.useRef(0);
    return /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
      /* @__PURE__ */ f.jsx(
        "style",
        {
          dangerouslySetInnerHTML: {
            __html: "[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"
          },
          nonce: n
        }
      ),
      /* @__PURE__ */ f.jsx(Hl.Slot, { scope: r, children: /* @__PURE__ */ f.jsx(
        me.div,
        {
          "data-radix-select-viewport": "",
          role: "presentation",
          ...o,
          ref: s,
          style: {
            // we use position: 'relative' here on the `viewport` so that when we call
            // `selectedItem.offsetTop` in calculations, the offset is relative to the viewport
            // (independent of the scrollUpButton).
            position: "relative",
            flex: 1,
            // Viewport should only be scrollable in the vertical direction.
            // This won't work in vertical writing modes, so we'll need to
            // revisit this if/when that is supported
            // https://developer.chrome.com/blog/vertical-form-controls
            overflow: "hidden auto",
            ...o.style
          },
          onScroll: ue(o.onScroll, (c) => {
            const u = c.currentTarget, { contentWrapper: d, shouldExpandOnScrollRef: h } = a;
            if (h?.current && d) {
              const p = Math.abs(l.current - u.scrollTop);
              if (p > 0) {
                const g = window.innerHeight - pr * 2, v = parseFloat(d.style.minHeight), m = parseFloat(d.style.height), x = Math.max(v, m);
                if (x < g) {
                  const y = x + p, b = Math.min(g, y), w = y - b;
                  d.style.height = b + "px", d.style.bottom === "0px" && (u.scrollTop = w > 0 ? w : 0, d.style.justifyContent = "flex-end");
                }
              }
            }
            l.current = u.scrollTop;
          })
        }
      ) })
    ] });
  }
);
k0.displayName = Tu;
var P0 = "SelectGroup", [VR, UR] = gi(P0), HR = C.forwardRef(
  (e, t) => {
    const { __scopeSelect: r, ...n } = e, o = ir();
    return /* @__PURE__ */ f.jsx(VR, { scope: r, id: o, children: /* @__PURE__ */ f.jsx(me.div, { role: "group", "aria-labelledby": o, ...n, ref: t }) });
  }
);
HR.displayName = P0;
var A0 = "SelectLabel", O0 = C.forwardRef(
  (e, t) => {
    const { __scopeSelect: r, ...n } = e, o = UR(A0, r);
    return /* @__PURE__ */ f.jsx(me.div, { id: o.id, ...n, ref: t });
  }
);
O0.displayName = A0;
var el = "SelectItem", [WR, I0] = gi(el), F0 = C.forwardRef(
  (e, t) => {
    const {
      __scopeSelect: r,
      value: n,
      disabled: o = !1,
      textValue: i,
      ...a
    } = e, s = Pn(el, r), l = An(el, r), c = s.value === n, [u, d] = C.useState(i ?? ""), [h, p] = C.useState(!1), g = _e(
      t,
      (y) => l.itemRefCallback?.(y, n, o)
    ), v = ir(), m = C.useRef("touch"), x = () => {
      o || (s.onValueChange(n), s.onOpenChange(!1));
    };
    if (n === "")
      throw new Error(
        "A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder."
      );
    return /* @__PURE__ */ f.jsx(
      WR,
      {
        scope: r,
        value: n,
        disabled: o,
        textId: v,
        isSelected: c,
        onItemTextChange: C.useCallback((y) => {
          d((b) => b || (y?.textContent ?? "").trim());
        }, []),
        children: /* @__PURE__ */ f.jsx(
          Hl.ItemSlot,
          {
            scope: r,
            value: n,
            disabled: o,
            textValue: u,
            children: /* @__PURE__ */ f.jsx(
              me.div,
              {
                role: "option",
                "aria-labelledby": v,
                "data-highlighted": h ? "" : void 0,
                "aria-selected": c && h,
                "data-state": c ? "checked" : "unchecked",
                "aria-disabled": o || void 0,
                "data-disabled": o ? "" : void 0,
                tabIndex: o ? void 0 : -1,
                ...a,
                ref: g,
                onFocus: ue(a.onFocus, () => p(!0)),
                onBlur: ue(a.onBlur, () => p(!1)),
                onClick: ue(a.onClick, () => {
                  m.current !== "mouse" && x();
                }),
                onPointerUp: ue(a.onPointerUp, () => {
                  m.current === "mouse" && x();
                }),
                onPointerDown: ue(a.onPointerDown, (y) => {
                  m.current = y.pointerType;
                }),
                onPointerMove: ue(a.onPointerMove, (y) => {
                  m.current = y.pointerType, o ? l.onItemLeave?.() : m.current === "mouse" && y.currentTarget.focus({ preventScroll: !0 });
                }),
                onPointerLeave: ue(a.onPointerLeave, (y) => {
                  y.currentTarget === document.activeElement && l.onItemLeave?.();
                }),
                onKeyDown: ue(a.onKeyDown, (y) => {
                  l.searchRef?.current !== "" && y.key === " " || (jR.includes(y.key) && x(), y.key === " " && y.preventDefault());
                })
              }
            )
          }
        )
      }
    );
  }
);
F0.displayName = el;
var Ai = "SelectItemText", L0 = C.forwardRef(
  (e, t) => {
    const { __scopeSelect: r, className: n, style: o, ...i } = e, a = Pn(Ai, r), s = An(Ai, r), l = I0(Ai, r), c = OR(Ai, r), [u, d] = C.useState(null), h = _e(
      t,
      (x) => d(x),
      l.onItemTextChange,
      (x) => s.itemTextRefCallback?.(x, l.value, l.disabled)
    ), p = u?.textContent, g = C.useMemo(
      () => /* @__PURE__ */ f.jsx("option", { value: l.value, disabled: l.disabled, children: p }, l.value),
      [l.disabled, l.value, p]
    ), { onNativeOptionAdd: v, onNativeOptionRemove: m } = c;
    return wt(() => (v(g), () => m(g)), [v, m, g]), /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
      /* @__PURE__ */ f.jsx(me.span, { id: l.textId, ...i, ref: h }),
      l.isSelected && a.valueNode && !a.valueNodeHasChildren ? Cl.createPortal(i.children, a.valueNode) : null
    ] });
  }
);
L0.displayName = Ai;
var B0 = "SelectItemIndicator", z0 = C.forwardRef(
  (e, t) => {
    const { __scopeSelect: r, ...n } = e;
    return I0(B0, r).isSelected ? /* @__PURE__ */ f.jsx(me.span, { "aria-hidden": !0, ...n, ref: t }) : null;
  }
);
z0.displayName = B0;
var ju = "SelectScrollUpButton", $0 = C.forwardRef((e, t) => {
  const r = An(ju, e.__scopeSelect), n = uf(ju, e.__scopeSelect), [o, i] = C.useState(!1), a = _e(t, n.onScrollButtonChange);
  return wt(() => {
    if (r.viewport && r.isPositioned) {
      let s = function() {
        const c = l.scrollTop > 0;
        i(c);
      };
      const l = r.viewport;
      return s(), l.addEventListener("scroll", s), () => l.removeEventListener("scroll", s);
    }
  }, [r.viewport, r.isPositioned]), o ? /* @__PURE__ */ f.jsx(
    V0,
    {
      ...e,
      ref: a,
      onAutoScroll: () => {
        const { viewport: s, selectedItem: l } = r;
        s && l && (s.scrollTop = s.scrollTop - l.offsetHeight);
      }
    }
  ) : null;
});
$0.displayName = ju;
var ku = "SelectScrollDownButton", G0 = C.forwardRef((e, t) => {
  const r = An(ku, e.__scopeSelect), n = uf(ku, e.__scopeSelect), [o, i] = C.useState(!1), a = _e(t, n.onScrollButtonChange);
  return wt(() => {
    if (r.viewport && r.isPositioned) {
      let s = function() {
        const c = l.scrollHeight - l.clientHeight, u = Math.ceil(l.scrollTop) < c;
        i(u);
      };
      const l = r.viewport;
      return s(), l.addEventListener("scroll", s), () => l.removeEventListener("scroll", s);
    }
  }, [r.viewport, r.isPositioned]), o ? /* @__PURE__ */ f.jsx(
    V0,
    {
      ...e,
      ref: a,
      onAutoScroll: () => {
        const { viewport: s, selectedItem: l } = r;
        s && l && (s.scrollTop = s.scrollTop + l.offsetHeight);
      }
    }
  ) : null;
});
G0.displayName = ku;
var V0 = C.forwardRef((e, t) => {
  const { __scopeSelect: r, onAutoScroll: n, ...o } = e, i = An("SelectScrollButton", r), a = C.useRef(null), s = Wl(r), l = C.useCallback(() => {
    a.current !== null && (window.clearInterval(a.current), a.current = null);
  }, []);
  return C.useEffect(() => () => l(), [l]), wt(() => {
    s().find((u) => u.ref.current === document.activeElement)?.ref.current?.scrollIntoView({ block: "nearest" });
  }, [s]), /* @__PURE__ */ f.jsx(
    me.div,
    {
      "aria-hidden": !0,
      ...o,
      ref: t,
      style: { flexShrink: 0, ...o.style },
      onPointerDown: ue(o.onPointerDown, () => {
        a.current === null && (a.current = window.setInterval(n, 50));
      }),
      onPointerMove: ue(o.onPointerMove, () => {
        i.onItemLeave?.(), a.current === null && (a.current = window.setInterval(n, 50));
      }),
      onPointerLeave: ue(o.onPointerLeave, () => {
        l();
      })
    }
  );
}), YR = "SelectSeparator", U0 = C.forwardRef(
  (e, t) => {
    const { __scopeSelect: r, ...n } = e;
    return /* @__PURE__ */ f.jsx(me.div, { "aria-hidden": !0, ...n, ref: t });
  }
);
U0.displayName = YR;
var Pu = "SelectArrow", qR = C.forwardRef(
  (e, t) => {
    const { __scopeSelect: r, ...n } = e, o = Yl(r), i = Pn(Pu, r), a = An(Pu, r);
    return i.open && a.position === "popper" ? /* @__PURE__ */ f.jsx(of, { ...o, ...n, ref: t }) : null;
  }
);
qR.displayName = Pu;
var XR = "SelectBubbleInput", H0 = C.forwardRef(
  ({ __scopeSelect: e, value: t, ...r }, n) => {
    const o = C.useRef(null), i = _e(n, o), a = Ul(t);
    return C.useEffect(() => {
      const s = o.current;
      if (!s) return;
      const l = window.HTMLSelectElement.prototype, u = Object.getOwnPropertyDescriptor(
        l,
        "value"
      ).set;
      if (a !== t && u) {
        const d = new Event("change", { bubbles: !0 });
        u.call(s, t), s.dispatchEvent(d);
      }
    }, [a, t]), /* @__PURE__ */ f.jsx(
      me.select,
      {
        ...r,
        style: { ...zm, ...r.style },
        ref: i,
        defaultValue: t
      }
    );
  }
);
H0.displayName = XR;
function W0(e) {
  return e === "" || e === void 0;
}
function Y0(e) {
  const t = _t(e), r = C.useRef(""), n = C.useRef(0), o = C.useCallback(
    (a) => {
      const s = r.current + a;
      t(s), function l(c) {
        r.current = c, window.clearTimeout(n.current), c !== "" && (n.current = window.setTimeout(() => l(""), 1e3));
      }(s);
    },
    [t]
  ), i = C.useCallback(() => {
    r.current = "", window.clearTimeout(n.current);
  }, []);
  return C.useEffect(() => () => window.clearTimeout(n.current), []), [r, o, i];
}
function q0(e, t, r) {
  const o = t.length > 1 && Array.from(t).every((c) => c === t[0]) ? t[0] : t, i = r ? e.indexOf(r) : -1;
  let a = KR(e, Math.max(i, 0));
  o.length === 1 && (a = a.filter((c) => c !== r));
  const l = a.find(
    (c) => c.textValue.toLowerCase().startsWith(o.toLowerCase())
  );
  return l !== r ? l : void 0;
}
function KR(e, t) {
  return e.map((r, n) => e[(t + n) % e.length]);
}
var ZR = w0, X0 = C0, QR = _0, JR = N0, eM = D0, K0 = R0, tM = k0, Z0 = O0, Q0 = F0, rM = L0, nM = z0, J0 = $0, e1 = G0, t1 = U0;
const Ur = ZR, Mn = QR, _r = C.forwardRef(({ className: e, children: t, ...r }, n) => /* @__PURE__ */ f.jsxs(
  X0,
  {
    ref: n,
    className: Ee(
      "flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",
      e
    ),
    ...r,
    children: [
      t,
      /* @__PURE__ */ f.jsx(JR, { asChild: !0, children: /* @__PURE__ */ f.jsx(kn, { className: "h-4 w-4 opacity-50" }) })
    ]
  }
));
_r.displayName = X0.displayName;
const r1 = C.forwardRef(({ className: e, ...t }, r) => /* @__PURE__ */ f.jsx(
  J0,
  {
    ref: r,
    className: Ee(
      "flex cursor-default items-center justify-center py-1",
      e
    ),
    ...t,
    children: /* @__PURE__ */ f.jsx(Pd, { className: "h-4 w-4" })
  }
));
r1.displayName = J0.displayName;
const n1 = C.forwardRef(({ className: e, ...t }, r) => /* @__PURE__ */ f.jsx(
  e1,
  {
    ref: r,
    className: Ee(
      "flex cursor-default items-center justify-center py-1",
      e
    ),
    ...t,
    children: /* @__PURE__ */ f.jsx(kn, { className: "h-4 w-4" })
  }
));
n1.displayName = e1.displayName;
const Nr = C.forwardRef(({ className: e, children: t, position: r = "popper", ...n }, o) => /* @__PURE__ */ f.jsx(eM, { children: /* @__PURE__ */ f.jsxs(
  K0,
  {
    ref: o,
    className: Ee(
      "relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      r === "popper" && "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
      e
    ),
    position: r,
    ...n,
    children: [
      /* @__PURE__ */ f.jsx(r1, {}),
      /* @__PURE__ */ f.jsx(
        tM,
        {
          className: Ee(
            "p-1",
            r === "popper" && "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"
          ),
          children: t
        }
      ),
      /* @__PURE__ */ f.jsx(n1, {})
    ]
  }
) }));
Nr.displayName = K0.displayName;
const oM = C.forwardRef(({ className: e, ...t }, r) => /* @__PURE__ */ f.jsx(
  Z0,
  {
    ref: r,
    className: Ee("px-2 py-1.5 text-sm font-semibold", e),
    ...t
  }
));
oM.displayName = Z0.displayName;
const vt = C.forwardRef(({ className: e, children: t, ...r }, n) => /* @__PURE__ */ f.jsxs(
  Q0,
  {
    ref: n,
    className: Ee(
      "relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      e
    ),
    ...r,
    children: [
      /* @__PURE__ */ f.jsx("span", { className: "absolute right-2 flex h-3.5 w-3.5 items-center justify-center", children: /* @__PURE__ */ f.jsx(nM, { children: /* @__PURE__ */ f.jsx(_l, { className: "h-4 w-4" }) }) }),
      /* @__PURE__ */ f.jsx(rM, { children: t })
    ]
  }
));
vt.displayName = Q0.displayName;
const iM = C.forwardRef(({ className: e, ...t }, r) => /* @__PURE__ */ f.jsx(
  t1,
  {
    ref: r,
    className: Ee("-mx-1 my-1 h-px bg-muted", e),
    ...t
  }
));
iM.displayName = t1.displayName;
var ql = "Collapsible", [aM, gF] = Gt(ql), [sM, df] = aM(ql), o1 = C.forwardRef(
  (e, t) => {
    const {
      __scopeCollapsible: r,
      open: n,
      defaultOpen: o,
      disabled: i,
      onOpenChange: a,
      ...s
    } = e, [l, c] = Sr({
      prop: n,
      defaultProp: o ?? !1,
      onChange: a,
      caller: ql
    });
    return /* @__PURE__ */ f.jsx(
      sM,
      {
        scope: r,
        disabled: i,
        contentId: ir(),
        open: l,
        onOpenToggle: C.useCallback(() => c((u) => !u), [c]),
        children: /* @__PURE__ */ f.jsx(
          me.div,
          {
            "data-state": hf(l),
            "data-disabled": i ? "" : void 0,
            ...s,
            ref: t
          }
        )
      }
    );
  }
);
o1.displayName = ql;
var i1 = "CollapsibleTrigger", a1 = C.forwardRef(
  (e, t) => {
    const { __scopeCollapsible: r, ...n } = e, o = df(i1, r);
    return /* @__PURE__ */ f.jsx(
      me.button,
      {
        type: "button",
        "aria-controls": o.contentId,
        "aria-expanded": o.open || !1,
        "data-state": hf(o.open),
        "data-disabled": o.disabled ? "" : void 0,
        disabled: o.disabled,
        ...n,
        ref: t,
        onClick: ue(e.onClick, o.onOpenToggle)
      }
    );
  }
);
a1.displayName = i1;
var ff = "CollapsibleContent", s1 = C.forwardRef(
  (e, t) => {
    const { forceMount: r, ...n } = e, o = df(ff, e.__scopeCollapsible);
    return /* @__PURE__ */ f.jsx(Nt, { present: r || o.open, children: ({ present: i }) => /* @__PURE__ */ f.jsx(lM, { ...n, ref: t, present: i }) });
  }
);
s1.displayName = ff;
var lM = C.forwardRef((e, t) => {
  const { __scopeCollapsible: r, present: n, children: o, ...i } = e, a = df(ff, r), [s, l] = C.useState(n), c = C.useRef(null), u = _e(t, c), d = C.useRef(0), h = d.current, p = C.useRef(0), g = p.current, v = a.open || s, m = C.useRef(v), x = C.useRef(void 0);
  return C.useEffect(() => {
    const y = requestAnimationFrame(() => m.current = !1);
    return () => cancelAnimationFrame(y);
  }, []), wt(() => {
    const y = c.current;
    if (y) {
      x.current = x.current || {
        transitionDuration: y.style.transitionDuration,
        animationName: y.style.animationName
      }, y.style.transitionDuration = "0s", y.style.animationName = "none";
      const b = y.getBoundingClientRect();
      d.current = b.height, p.current = b.width, m.current || (y.style.transitionDuration = x.current.transitionDuration, y.style.animationName = x.current.animationName), l(n);
    }
  }, [a.open, n]), /* @__PURE__ */ f.jsx(
    me.div,
    {
      "data-state": hf(a.open),
      "data-disabled": a.disabled ? "" : void 0,
      id: a.contentId,
      hidden: !v,
      ...i,
      ref: u,
      style: {
        "--radix-collapsible-content-height": h ? `${h}px` : void 0,
        "--radix-collapsible-content-width": g ? `${g}px` : void 0,
        ...e.style
      },
      children: v && o
    }
  );
});
function hf(e) {
  return e ? "open" : "closed";
}
var cM = o1;
function uM({
  ...e
}) {
  return /* @__PURE__ */ f.jsx(cM, { "data-slot": "collapsible", ...e });
}
function dM({
  ...e
}) {
  return /* @__PURE__ */ f.jsx(
    a1,
    {
      "data-slot": "collapsible-trigger",
      ...e
    }
  );
}
function fM({
  ...e
}) {
  return /* @__PURE__ */ f.jsx(
    s1,
    {
      "data-slot": "collapsible-content",
      ...e
    }
  );
}
function Xl({ title: e, icon: t, children: r, defaultOpen: n = !0, className: o }) {
  const [i, a] = C.useState(n);
  return /* @__PURE__ */ f.jsxs(uM, { open: i, onOpenChange: a, className: o, children: [
    /* @__PURE__ */ f.jsx(dM, { asChild: !0, children: /* @__PURE__ */ f.jsxs(Fe, { variant: "ghost", className: "w-full justify-between p-2 h-auto font-medium text-sm", children: [
      /* @__PURE__ */ f.jsxs("div", { className: "flex items-center", children: [
        t ? /* @__PURE__ */ f.jsx("span", { className: "mr-2", children: t }) : null,
        /* @__PURE__ */ f.jsx("span", { children: e })
      ] }),
      i ? /* @__PURE__ */ f.jsx(kn, { className: "h-4 w-4" }) : /* @__PURE__ */ f.jsx(ho, { className: "h-4 w-4" })
    ] }) }),
    /* @__PURE__ */ f.jsx(fM, { className: "px-3 pb-3 pt-2", children: /* @__PURE__ */ f.jsx("div", { className: "space-y-2", children: r }) })
  ] });
}
function hM() {
  const { dataSources: e, datasets: t, sourceId: r, formValues: n, setFormValue: o } = Ba();
  return /* @__PURE__ */ f.jsx(Xl, { title: "Data Source", icon: /* @__PURE__ */ f.jsx(VC, { className: "h-4 w-4" }), children: /* @__PURE__ */ f.jsxs("div", { className: "space-y-3", children: [
    /* @__PURE__ */ f.jsxs("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ f.jsx(Te, { className: "text-xs font-medium", children: "Data Source" }),
      /* @__PURE__ */ f.jsxs(
        Ur,
        {
          onValueChange: (i) => o("sourceId", i),
          value: r || "",
          children: [
            /* @__PURE__ */ f.jsx(_r, { className: "w-40 h-7 text-xs", children: /* @__PURE__ */ f.jsx(Mn, { placeholder: "Select data source" }) }),
            /* @__PURE__ */ f.jsx(Nr, { children: e.map((i) => /* @__PURE__ */ f.jsx(vt, { value: i.id, children: i.name }, i.id)) })
          ]
        }
      )
    ] }),
    /* @__PURE__ */ f.jsxs("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ f.jsx(Te, { className: "text-xs font-medium", children: "Dataset" }),
      /* @__PURE__ */ f.jsxs(
        Ur,
        {
          onValueChange: (i) => o("datasetId", i),
          value: n.datasetId || "",
          disabled: !r || t.length === 0,
          children: [
            /* @__PURE__ */ f.jsx(_r, { className: "w-40 h-7 text-xs", children: /* @__PURE__ */ f.jsx(Mn, { placeholder: "Select dataset" }) }),
            /* @__PURE__ */ f.jsx(Nr, { children: t.map((i) => /* @__PURE__ */ f.jsx(vt, { value: i.id, children: i.name }, i.id)) })
          ]
        }
      )
    ] })
  ] }) });
}
const We = C.forwardRef(
  ({ className: e, type: t, ...r }, n) => /* @__PURE__ */ f.jsx(
    "input",
    {
      type: t,
      className: Ee(
        "flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
        e
      ),
      ref: n,
      ...r
    }
  )
);
We.displayName = "Input";
function pM({ fieldConfig: e, availableFields: t }) {
  const [r, n] = Ce(!1), { formValues: o, setFieldMapping: i } = Ba(), a = (u) => typeof u == "string" ? u : typeof u == "object" && u !== null && (u.name || u.label || u.key) || String(u), s = (u) => typeof u == "string" ? u : typeof u == "object" && u !== null && (u.name || u.value || u.key) || String(u), l = o.fieldMapping?.[e.key]?.sourceField || "", c = (u) => {
    const d = u.dataProcessing;
    return /* @__PURE__ */ f.jsxs("div", { className: "grid grid-cols-2 gap-4", children: [
      d?.dataType && /* @__PURE__ */ f.jsxs("div", { className: "space-y-1", children: [
        /* @__PURE__ */ f.jsx(Te, { className: "text-xs", children: "字段类型" }),
        /* @__PURE__ */ f.jsxs(Ur, { defaultValue: d.dataType, children: [
          /* @__PURE__ */ f.jsx(_r, { className: "h-6 text-xs", children: /* @__PURE__ */ f.jsx(Mn, { placeholder: "选择数据类型" }) }),
          /* @__PURE__ */ f.jsxs(Nr, { children: [
            /* @__PURE__ */ f.jsx(vt, { value: "string", children: "文本" }),
            /* @__PURE__ */ f.jsx(vt, { value: "number", children: "数字" }),
            /* @__PURE__ */ f.jsx(vt, { value: "date", children: "日期" }),
            /* @__PURE__ */ f.jsx(vt, { value: "datetime", children: "日期时间" }),
            /* @__PURE__ */ f.jsx(vt, { value: "boolean", children: "布尔值" }),
            /* @__PURE__ */ f.jsx(vt, { value: "currency", children: "货币" }),
            /* @__PURE__ */ f.jsx(vt, { value: "percentage", children: "百分比" })
          ] })
        ] })
      ] }),
      d?.format?.dateFormat && /* @__PURE__ */ f.jsxs("div", { className: "space-y-1", children: [
        /* @__PURE__ */ f.jsx(Te, { className: "text-xs", children: "日期格式" }),
        /* @__PURE__ */ f.jsx(
          We,
          {
            className: "h-6 text-xs",
            placeholder: "YYYY-MM-DD",
            defaultValue: d.format.dateFormat
          }
        )
      ] }),
      d?.format?.numberFormat && /* @__PURE__ */ f.jsxs("div", { className: "space-y-1", children: [
        /* @__PURE__ */ f.jsx(Te, { className: "text-xs", children: "小数位数" }),
        /* @__PURE__ */ f.jsx(
          We,
          {
            className: "h-6 text-xs",
            type: "number",
            defaultValue: d.format.numberFormat.decimals || 0
          }
        )
      ] })
    ] });
  };
  return /* @__PURE__ */ f.jsxs("div", { className: "space-y-2", children: [
    /* @__PURE__ */ f.jsxs(Te, { className: "text-xs font-medium", children: [
      e.label,
      e.required && /* @__PURE__ */ f.jsx("span", { className: "text-red-500 ml-1", children: "*" })
    ] }),
    e.description && /* @__PURE__ */ f.jsx("p", { className: "text-xs text-muted-foreground", children: e.description }),
    /* @__PURE__ */ f.jsxs("div", { className: "flex items-center gap-2", children: [
      /* @__PURE__ */ f.jsxs(
        Ur,
        {
          onValueChange: (u) => i(e.key, { sourceField: u }),
          value: l,
          children: [
            /* @__PURE__ */ f.jsx(_r, { className: "h-7 text-xs flex-1", children: /* @__PURE__ */ f.jsx(Mn, { placeholder: e.placeholder || `Select ${e.label} Field` }) }),
            /* @__PURE__ */ f.jsxs(Nr, { children: [
              /* @__PURE__ */ f.jsx(vt, { value: "none", children: "Select" }),
              e.options ? e.options.map((u) => /* @__PURE__ */ f.jsx(vt, { value: u.value, children: u.label }, u.value)) : t.map((u, d) => /* @__PURE__ */ f.jsx(vt, { value: s(u), children: a(u) }, d))
            ] })
          ]
        }
      ),
      /* @__PURE__ */ f.jsx(
        "button",
        {
          type: "button",
          className: "p-1 rounded hover:bg-muted flex-shrink-0",
          onClick: () => n((u) => !u),
          "aria-label": "配置数据处理",
          children: /* @__PURE__ */ f.jsx(ci, { className: `h-4 w-4 ${r ? "text-primary" : "text-muted-foreground"}` })
        }
      )
    ] }),
    /* @__PURE__ */ f.jsxs("div", { className: `mt-2 p-2 bg-muted rounded text-xs transition-all duration-200 ${r ? "" : "hidden"}`, children: [
      /* @__PURE__ */ f.jsx("div", { className: "font-medium mb-2", children: "数据处理配置" }),
      r && c(e)
    ] })
  ] });
}
function vM({ schema: e }) {
  const { availableFields: t } = Ba(), r = e || [
    { key: "xField", label: "横轴字段 (xField)", type: "select", required: !0 },
    { key: "yField", label: "纵轴字段 (yField)", type: "select", required: !0 },
    { key: "seriesField", label: "系列字段 (seriesField)", type: "select", required: !1 }
  ];
  return /* @__PURE__ */ f.jsx(Xl, { title: "Field Mapping", icon: /* @__PURE__ */ f.jsx(Sg, { className: "h-4 w-4" }), children: r.map((n) => /* @__PURE__ */ f.jsx(pM, { fieldConfig: n, availableFields: t }, n.key)) });
}
const mi = C.forwardRef(({ className: e, ...t }, r) => /* @__PURE__ */ f.jsx(
  "textarea",
  {
    className: Ee(
      "flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
      e
    ),
    ref: r,
    ...t
  }
));
mi.displayName = "Textarea";
function gM({ watchedValues: e }) {
  return /* @__PURE__ */ f.jsx(
    mi,
    {
      className: "text-xs overflow-auto h-60 bg-white dark:bg-gray-800 rounded border ",
      value: JSON.stringify(e, null, 2),
      readOnly: !0
    }
  );
}
function mM() {
  const { showFormOutput: e, setShowFormOutput: t, copyFormValues: r, formValues: n } = Ba();
  return /* @__PURE__ */ f.jsxs("div", { className: "p-3", children: [
    /* @__PURE__ */ f.jsxs("div", { className: "flex items-center mb-2", children: [
      /* @__PURE__ */ f.jsx("h2", { className: "text-lg font-semibold" }),
      /* @__PURE__ */ f.jsx("div", { className: "flex gap-2", children: /* @__PURE__ */ f.jsx(Fe, { variant: "ghost", size: "sm", onClick: () => t(!e), title: e ? "Hide Output" : "Show Output", children: e ? /* @__PURE__ */ f.jsx(ep, {}) : /* @__PURE__ */ f.jsx(ep, {}) }) })
    ] }),
    e && /* @__PURE__ */ f.jsx("div", { className: "mb-4", children: /* @__PURE__ */ f.jsx(gM, { watchedValues: n }) })
  ] });
}
function xM() {
  return /* @__PURE__ */ f.jsx(f.Fragment, {});
}
function yM({ schema: e }) {
  const { selectedDataset: t } = Ba();
  return /* @__PURE__ */ f.jsxs("div", { className: "h-full", children: [
    /* @__PURE__ */ f.jsx(xM, {}),
    /* @__PURE__ */ f.jsxs("div", { className: "divide-y divide-border", children: [
      /* @__PURE__ */ f.jsx(hM, {}),
      /* @__PURE__ */ f.jsx(vM, { schema: e?.fieldMapping }),
      t && /* @__PURE__ */ f.jsx(f.Fragment, {})
    ] }),
    process.env.NODE_ENV === "development" && /* @__PURE__ */ f.jsx(mM, {})
  ] });
}
const bM = ({ initialValues: e, onConfigChange: t, schema: r }) => /* @__PURE__ */ f.jsx(DR, { initialValues: e, onConfigChange: t, schema: r, children: /* @__PURE__ */ f.jsx(yM, { schema: r }) }), kp = (e) => {
  let t;
  const r = /* @__PURE__ */ new Set(), n = (c, u) => {
    const d = typeof c == "function" ? c(t) : c;
    if (!Object.is(d, t)) {
      const h = t;
      t = u ?? (typeof d != "object" || d === null) ? d : Object.assign({}, t, d), r.forEach((p) => p(t, h));
    }
  }, o = () => t, s = { setState: n, getState: o, getInitialState: () => l, subscribe: (c) => (r.add(c), () => r.delete(c)) }, l = t = e(n, o, s);
  return s;
}, wM = (e) => e ? kp(e) : kp, SM = (e) => e;
function CM(e, t = SM) {
  const r = Me.useSyncExternalStore(
    e.subscribe,
    () => t(e.getState()),
    () => t(e.getInitialState())
  );
  return Me.useDebugValue(r), r;
}
const Pp = (e) => {
  const t = wM(e), r = (n) => CM(t, n);
  return Object.assign(r, t), r;
}, EM = (e) => e ? Pp(e) : Pp;
EM((e, t) => ({
  errors: [],
  addError: (r, n) => {
    e((o) => {
      const i = o.errors.filter((s) => s.id !== r), a = {
        ...n,
        id: r,
        timestamp: /* @__PURE__ */ new Date(),
        isRead: !1
      };
      return { errors: [...i, a] };
    });
  },
  removeError: (r) => {
    e((n) => ({ errors: n.errors.filter((i) => i.id !== r) }));
  },
  clearErrors: () => {
    e({ errors: [] });
  },
  getError: (r) => t().errors.find((n) => n.id === r),
  hasErrors: () => t().errors.length > 0,
  getErrorsByType: (r) => t().errors.filter((n) => n.type === r),
  markAsRead: (r) => {
    e((n) => ({ errors: n.errors.map(
      (i) => i.id === r ? { ...i, isRead: !0 } : i
    ) }));
  },
  markAllAsRead: () => {
    e((r) => ({ errors: r.errors.map((o) => ({ ...o, isRead: !0 })) }));
  },
  getUnreadCount: () => t().errors.filter((r) => !r.isRead).length
}));
const Hr = /* @__PURE__ */ Object.create(null);
Hr.open = "0";
Hr.close = "1";
Hr.ping = "2";
Hr.pong = "3";
Hr.message = "4";
Hr.upgrade = "5";
Hr.noop = "6";
const Gs = /* @__PURE__ */ Object.create(null);
Object.keys(Hr).forEach((e) => {
  Gs[Hr[e]] = e;
});
const Au = { type: "error", data: "parser error" }, l1 = typeof Blob == "function" || typeof Blob < "u" && Object.prototype.toString.call(Blob) === "[object BlobConstructor]", c1 = typeof ArrayBuffer == "function", u1 = (e) => typeof ArrayBuffer.isView == "function" ? ArrayBuffer.isView(e) : e && e.buffer instanceof ArrayBuffer, pf = ({ type: e, data: t }, r, n) => l1 && t instanceof Blob ? r ? n(t) : Ap(t, n) : c1 && (t instanceof ArrayBuffer || u1(t)) ? r ? n(t) : Ap(new Blob([t]), n) : n(Hr[e] + (t || "")), Ap = (e, t) => {
  const r = new FileReader();
  return r.onload = function() {
    const n = r.result.split(",")[1];
    t("b" + (n || ""));
  }, r.readAsDataURL(e);
};
function Op(e) {
  return e instanceof Uint8Array ? e : e instanceof ArrayBuffer ? new Uint8Array(e) : new Uint8Array(e.buffer, e.byteOffset, e.byteLength);
}
let Gc;
function _M(e, t) {
  if (l1 && e.data instanceof Blob)
    return e.data.arrayBuffer().then(Op).then(t);
  if (c1 && (e.data instanceof ArrayBuffer || u1(e.data)))
    return t(Op(e.data));
  pf(e, !1, (r) => {
    Gc || (Gc = new TextEncoder()), t(Gc.encode(r));
  });
}
const Ip = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", Oi = typeof Uint8Array > "u" ? [] : new Uint8Array(256);
for (let e = 0; e < Ip.length; e++)
  Oi[Ip.charCodeAt(e)] = e;
const NM = (e) => {
  let t = e.length * 0.75, r = e.length, n, o = 0, i, a, s, l;
  e[e.length - 1] === "=" && (t--, e[e.length - 2] === "=" && t--);
  const c = new ArrayBuffer(t), u = new Uint8Array(c);
  for (n = 0; n < r; n += 4)
    i = Oi[e.charCodeAt(n)], a = Oi[e.charCodeAt(n + 1)], s = Oi[e.charCodeAt(n + 2)], l = Oi[e.charCodeAt(n + 3)], u[o++] = i << 2 | a >> 4, u[o++] = (a & 15) << 4 | s >> 2, u[o++] = (s & 3) << 6 | l & 63;
  return c;
}, DM = typeof ArrayBuffer == "function", vf = (e, t) => {
  if (typeof e != "string")
    return {
      type: "message",
      data: d1(e, t)
    };
  const r = e.charAt(0);
  return r === "b" ? {
    type: "message",
    data: RM(e.substring(1), t)
  } : Gs[r] ? e.length > 1 ? {
    type: Gs[r],
    data: e.substring(1)
  } : {
    type: Gs[r]
  } : Au;
}, RM = (e, t) => {
  if (DM) {
    const r = NM(e);
    return d1(r, t);
  } else
    return { base64: !0, data: e };
}, d1 = (e, t) => {
  switch (t) {
    case "blob":
      return e instanceof Blob ? e : new Blob([e]);
    case "arraybuffer":
    default:
      return e instanceof ArrayBuffer ? e : e.buffer;
  }
}, f1 = "", MM = (e, t) => {
  const r = e.length, n = new Array(r);
  let o = 0;
  e.forEach((i, a) => {
    pf(i, !1, (s) => {
      n[a] = s, ++o === r && t(n.join(f1));
    });
  });
}, TM = (e, t) => {
  const r = e.split(f1), n = [];
  for (let o = 0; o < r.length; o++) {
    const i = vf(r[o], t);
    if (n.push(i), i.type === "error")
      break;
  }
  return n;
};
function jM() {
  return new TransformStream({
    transform(e, t) {
      _M(e, (r) => {
        const n = r.length;
        let o;
        if (n < 126)
          o = new Uint8Array(1), new DataView(o.buffer).setUint8(0, n);
        else if (n < 65536) {
          o = new Uint8Array(3);
          const i = new DataView(o.buffer);
          i.setUint8(0, 126), i.setUint16(1, n);
        } else {
          o = new Uint8Array(9);
          const i = new DataView(o.buffer);
          i.setUint8(0, 127), i.setBigUint64(1, BigInt(n));
        }
        e.data && typeof e.data != "string" && (o[0] |= 128), t.enqueue(o), t.enqueue(r);
      });
    }
  });
}
let Vc;
function ms(e) {
  return e.reduce((t, r) => t + r.length, 0);
}
function xs(e, t) {
  if (e[0].length === t)
    return e.shift();
  const r = new Uint8Array(t);
  let n = 0;
  for (let o = 0; o < t; o++)
    r[o] = e[0][n++], n === e[0].length && (e.shift(), n = 0);
  return e.length && n < e[0].length && (e[0] = e[0].slice(n)), r;
}
function kM(e, t) {
  Vc || (Vc = new TextDecoder());
  const r = [];
  let n = 0, o = -1, i = !1;
  return new TransformStream({
    transform(a, s) {
      for (r.push(a); ; ) {
        if (n === 0) {
          if (ms(r) < 1)
            break;
          const l = xs(r, 1);
          i = (l[0] & 128) === 128, o = l[0] & 127, o < 126 ? n = 3 : o === 126 ? n = 1 : n = 2;
        } else if (n === 1) {
          if (ms(r) < 2)
            break;
          const l = xs(r, 2);
          o = new DataView(l.buffer, l.byteOffset, l.length).getUint16(0), n = 3;
        } else if (n === 2) {
          if (ms(r) < 8)
            break;
          const l = xs(r, 8), c = new DataView(l.buffer, l.byteOffset, l.length), u = c.getUint32(0);
          if (u > Math.pow(2, 21) - 1) {
            s.enqueue(Au);
            break;
          }
          o = u * Math.pow(2, 32) + c.getUint32(4), n = 3;
        } else {
          if (ms(r) < o)
            break;
          const l = xs(r, o);
          s.enqueue(vf(i ? l : Vc.decode(l), t)), n = 0;
        }
        if (o === 0 || o > e) {
          s.enqueue(Au);
          break;
        }
      }
    }
  });
}
const h1 = 4;
function mt(e) {
  if (e) return PM(e);
}
function PM(e) {
  for (var t in mt.prototype)
    e[t] = mt.prototype[t];
  return e;
}
mt.prototype.on = mt.prototype.addEventListener = function(e, t) {
  return this._callbacks = this._callbacks || {}, (this._callbacks["$" + e] = this._callbacks["$" + e] || []).push(t), this;
};
mt.prototype.once = function(e, t) {
  function r() {
    this.off(e, r), t.apply(this, arguments);
  }
  return r.fn = t, this.on(e, r), this;
};
mt.prototype.off = mt.prototype.removeListener = mt.prototype.removeAllListeners = mt.prototype.removeEventListener = function(e, t) {
  if (this._callbacks = this._callbacks || {}, arguments.length == 0)
    return this._callbacks = {}, this;
  var r = this._callbacks["$" + e];
  if (!r) return this;
  if (arguments.length == 1)
    return delete this._callbacks["$" + e], this;
  for (var n, o = 0; o < r.length; o++)
    if (n = r[o], n === t || n.fn === t) {
      r.splice(o, 1);
      break;
    }
  return r.length === 0 && delete this._callbacks["$" + e], this;
};
mt.prototype.emit = function(e) {
  this._callbacks = this._callbacks || {};
  for (var t = new Array(arguments.length - 1), r = this._callbacks["$" + e], n = 1; n < arguments.length; n++)
    t[n - 1] = arguments[n];
  if (r) {
    r = r.slice(0);
    for (var n = 0, o = r.length; n < o; ++n)
      r[n].apply(this, t);
  }
  return this;
};
mt.prototype.emitReserved = mt.prototype.emit;
mt.prototype.listeners = function(e) {
  return this._callbacks = this._callbacks || {}, this._callbacks["$" + e] || [];
};
mt.prototype.hasListeners = function(e) {
  return !!this.listeners(e).length;
};
const Kl = typeof Promise == "function" && typeof Promise.resolve == "function" ? (t) => Promise.resolve().then(t) : (t, r) => r(t, 0), Qt = typeof self < "u" ? self : typeof window < "u" ? window : Function("return this")(), AM = "arraybuffer";
function p1(e, ...t) {
  return t.reduce((r, n) => (e.hasOwnProperty(n) && (r[n] = e[n]), r), {});
}
const OM = Qt.setTimeout, IM = Qt.clearTimeout;
function Zl(e, t) {
  t.useNativeTimers ? (e.setTimeoutFn = OM.bind(Qt), e.clearTimeoutFn = IM.bind(Qt)) : (e.setTimeoutFn = Qt.setTimeout.bind(Qt), e.clearTimeoutFn = Qt.clearTimeout.bind(Qt));
}
const FM = 1.33;
function LM(e) {
  return typeof e == "string" ? BM(e) : Math.ceil((e.byteLength || e.size) * FM);
}
function BM(e) {
  let t = 0, r = 0;
  for (let n = 0, o = e.length; n < o; n++)
    t = e.charCodeAt(n), t < 128 ? r += 1 : t < 2048 ? r += 2 : t < 55296 || t >= 57344 ? r += 3 : (n++, r += 4);
  return r;
}
function v1() {
  return Date.now().toString(36).substring(3) + Math.random().toString(36).substring(2, 5);
}
function zM(e) {
  let t = "";
  for (let r in e)
    e.hasOwnProperty(r) && (t.length && (t += "&"), t += encodeURIComponent(r) + "=" + encodeURIComponent(e[r]));
  return t;
}
function $M(e) {
  let t = {}, r = e.split("&");
  for (let n = 0, o = r.length; n < o; n++) {
    let i = r[n].split("=");
    t[decodeURIComponent(i[0])] = decodeURIComponent(i[1]);
  }
  return t;
}
class GM extends Error {
  constructor(t, r, n) {
    super(t), this.description = r, this.context = n, this.type = "TransportError";
  }
}
class gf extends mt {
  /**
   * Transport abstract constructor.
   *
   * @param {Object} opts - options
   * @protected
   */
  constructor(t) {
    super(), this.writable = !1, Zl(this, t), this.opts = t, this.query = t.query, this.socket = t.socket, this.supportsBinary = !t.forceBase64;
  }
  /**
   * Emits an error.
   *
   * @param {String} reason
   * @param description
   * @param context - the error context
   * @return {Transport} for chaining
   * @protected
   */
  onError(t, r, n) {
    return super.emitReserved("error", new GM(t, r, n)), this;
  }
  /**
   * Opens the transport.
   */
  open() {
    return this.readyState = "opening", this.doOpen(), this;
  }
  /**
   * Closes the transport.
   */
  close() {
    return (this.readyState === "opening" || this.readyState === "open") && (this.doClose(), this.onClose()), this;
  }
  /**
   * Sends multiple packets.
   *
   * @param {Array} packets
   */
  send(t) {
    this.readyState === "open" && this.write(t);
  }
  /**
   * Called upon open
   *
   * @protected
   */
  onOpen() {
    this.readyState = "open", this.writable = !0, super.emitReserved("open");
  }
  /**
   * Called with data.
   *
   * @param {String} data
   * @protected
   */
  onData(t) {
    const r = vf(t, this.socket.binaryType);
    this.onPacket(r);
  }
  /**
   * Called with a decoded packet.
   *
   * @protected
   */
  onPacket(t) {
    super.emitReserved("packet", t);
  }
  /**
   * Called upon close.
   *
   * @protected
   */
  onClose(t) {
    this.readyState = "closed", super.emitReserved("close", t);
  }
  /**
   * Pauses the transport, in order not to lose packets during an upgrade.
   *
   * @param onPause
   */
  pause(t) {
  }
  createUri(t, r = {}) {
    return t + "://" + this._hostname() + this._port() + this.opts.path + this._query(r);
  }
  _hostname() {
    const t = this.opts.hostname;
    return t.indexOf(":") === -1 ? t : "[" + t + "]";
  }
  _port() {
    return this.opts.port && (this.opts.secure && +(this.opts.port !== 443) || !this.opts.secure && Number(this.opts.port) !== 80) ? ":" + this.opts.port : "";
  }
  _query(t) {
    const r = zM(t);
    return r.length ? "?" + r : "";
  }
}
class VM extends gf {
  constructor() {
    super(...arguments), this._polling = !1;
  }
  get name() {
    return "polling";
  }
  /**
   * Opens the socket (triggers polling). We write a PING message to determine
   * when the transport is open.
   *
   * @protected
   */
  doOpen() {
    this._poll();
  }
  /**
   * Pauses polling.
   *
   * @param {Function} onPause - callback upon buffers are flushed and transport is paused
   * @package
   */
  pause(t) {
    this.readyState = "pausing";
    const r = () => {
      this.readyState = "paused", t();
    };
    if (this._polling || !this.writable) {
      let n = 0;
      this._polling && (n++, this.once("pollComplete", function() {
        --n || r();
      })), this.writable || (n++, this.once("drain", function() {
        --n || r();
      }));
    } else
      r();
  }
  /**
   * Starts polling cycle.
   *
   * @private
   */
  _poll() {
    this._polling = !0, this.doPoll(), this.emitReserved("poll");
  }
  /**
   * Overloads onData to detect payloads.
   *
   * @protected
   */
  onData(t) {
    const r = (n) => {
      if (this.readyState === "opening" && n.type === "open" && this.onOpen(), n.type === "close")
        return this.onClose({ description: "transport closed by the server" }), !1;
      this.onPacket(n);
    };
    TM(t, this.socket.binaryType).forEach(r), this.readyState !== "closed" && (this._polling = !1, this.emitReserved("pollComplete"), this.readyState === "open" && this._poll());
  }
  /**
   * For polling, send a close packet.
   *
   * @protected
   */
  doClose() {
    const t = () => {
      this.write([{ type: "close" }]);
    };
    this.readyState === "open" ? t() : this.once("open", t);
  }
  /**
   * Writes a packets payload.
   *
   * @param {Array} packets - data packets
   * @protected
   */
  write(t) {
    this.writable = !1, MM(t, (r) => {
      this.doWrite(r, () => {
        this.writable = !0, this.emitReserved("drain");
      });
    });
  }
  /**
   * Generates uri for connection.
   *
   * @private
   */
  uri() {
    const t = this.opts.secure ? "https" : "http", r = this.query || {};
    return this.opts.timestampRequests !== !1 && (r[this.opts.timestampParam] = v1()), !this.supportsBinary && !r.sid && (r.b64 = 1), this.createUri(t, r);
  }
}
let g1 = !1;
try {
  g1 = typeof XMLHttpRequest < "u" && "withCredentials" in new XMLHttpRequest();
} catch {
}
const UM = g1;
function HM() {
}
class WM extends VM {
  /**
   * XHR Polling constructor.
   *
   * @param {Object} opts
   * @package
   */
  constructor(t) {
    if (super(t), typeof location < "u") {
      const r = location.protocol === "https:";
      let n = location.port;
      n || (n = r ? "443" : "80"), this.xd = typeof location < "u" && t.hostname !== location.hostname || n !== t.port;
    }
  }
  /**
   * Sends data.
   *
   * @param {String} data to send.
   * @param {Function} called upon flush.
   * @private
   */
  doWrite(t, r) {
    const n = this.request({
      method: "POST",
      data: t
    });
    n.on("success", r), n.on("error", (o, i) => {
      this.onError("xhr post error", o, i);
    });
  }
  /**
   * Starts a poll cycle.
   *
   * @private
   */
  doPoll() {
    const t = this.request();
    t.on("data", this.onData.bind(this)), t.on("error", (r, n) => {
      this.onError("xhr poll error", r, n);
    }), this.pollXhr = t;
  }
}
class Br extends mt {
  /**
   * Request constructor
   *
   * @param {Object} options
   * @package
   */
  constructor(t, r, n) {
    super(), this.createRequest = t, Zl(this, n), this._opts = n, this._method = n.method || "GET", this._uri = r, this._data = n.data !== void 0 ? n.data : null, this._create();
  }
  /**
   * Creates the XHR object and sends the request.
   *
   * @private
   */
  _create() {
    var t;
    const r = p1(this._opts, "agent", "pfx", "key", "passphrase", "cert", "ca", "ciphers", "rejectUnauthorized", "autoUnref");
    r.xdomain = !!this._opts.xd;
    const n = this._xhr = this.createRequest(r);
    try {
      n.open(this._method, this._uri, !0);
      try {
        if (this._opts.extraHeaders) {
          n.setDisableHeaderCheck && n.setDisableHeaderCheck(!0);
          for (let o in this._opts.extraHeaders)
            this._opts.extraHeaders.hasOwnProperty(o) && n.setRequestHeader(o, this._opts.extraHeaders[o]);
        }
      } catch {
      }
      if (this._method === "POST")
        try {
          n.setRequestHeader("Content-type", "text/plain;charset=UTF-8");
        } catch {
        }
      try {
        n.setRequestHeader("Accept", "*/*");
      } catch {
      }
      (t = this._opts.cookieJar) === null || t === void 0 || t.addCookies(n), "withCredentials" in n && (n.withCredentials = this._opts.withCredentials), this._opts.requestTimeout && (n.timeout = this._opts.requestTimeout), n.onreadystatechange = () => {
        var o;
        n.readyState === 3 && ((o = this._opts.cookieJar) === null || o === void 0 || o.parseCookies(
          // @ts-ignore
          n.getResponseHeader("set-cookie")
        )), n.readyState === 4 && (n.status === 200 || n.status === 1223 ? this._onLoad() : this.setTimeoutFn(() => {
          this._onError(typeof n.status == "number" ? n.status : 0);
        }, 0));
      }, n.send(this._data);
    } catch (o) {
      this.setTimeoutFn(() => {
        this._onError(o);
      }, 0);
      return;
    }
    typeof document < "u" && (this._index = Br.requestsCount++, Br.requests[this._index] = this);
  }
  /**
   * Called upon error.
   *
   * @private
   */
  _onError(t) {
    this.emitReserved("error", t, this._xhr), this._cleanup(!0);
  }
  /**
   * Cleans up house.
   *
   * @private
   */
  _cleanup(t) {
    if (!(typeof this._xhr > "u" || this._xhr === null)) {
      if (this._xhr.onreadystatechange = HM, t)
        try {
          this._xhr.abort();
        } catch {
        }
      typeof document < "u" && delete Br.requests[this._index], this._xhr = null;
    }
  }
  /**
   * Called upon load.
   *
   * @private
   */
  _onLoad() {
    const t = this._xhr.responseText;
    t !== null && (this.emitReserved("data", t), this.emitReserved("success"), this._cleanup());
  }
  /**
   * Aborts the request.
   *
   * @package
   */
  abort() {
    this._cleanup();
  }
}
Br.requestsCount = 0;
Br.requests = {};
if (typeof document < "u") {
  if (typeof attachEvent == "function")
    attachEvent("onunload", Fp);
  else if (typeof addEventListener == "function") {
    const e = "onpagehide" in Qt ? "pagehide" : "unload";
    addEventListener(e, Fp, !1);
  }
}
function Fp() {
  for (let e in Br.requests)
    Br.requests.hasOwnProperty(e) && Br.requests[e].abort();
}
const YM = function() {
  const e = m1({
    xdomain: !1
  });
  return e && e.responseType !== null;
}();
class qM extends WM {
  constructor(t) {
    super(t);
    const r = t && t.forceBase64;
    this.supportsBinary = YM && !r;
  }
  request(t = {}) {
    return Object.assign(t, { xd: this.xd }, this.opts), new Br(m1, this.uri(), t);
  }
}
function m1(e) {
  const t = e.xdomain;
  try {
    if (typeof XMLHttpRequest < "u" && (!t || UM))
      return new XMLHttpRequest();
  } catch {
  }
  if (!t)
    try {
      return new Qt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP");
    } catch {
    }
}
const x1 = typeof navigator < "u" && typeof navigator.product == "string" && navigator.product.toLowerCase() === "reactnative";
class XM extends gf {
  get name() {
    return "websocket";
  }
  doOpen() {
    const t = this.uri(), r = this.opts.protocols, n = x1 ? {} : p1(this.opts, "agent", "perMessageDeflate", "pfx", "key", "passphrase", "cert", "ca", "ciphers", "rejectUnauthorized", "localAddress", "protocolVersion", "origin", "maxPayload", "family", "checkServerIdentity");
    this.opts.extraHeaders && (n.headers = this.opts.extraHeaders);
    try {
      this.ws = this.createSocket(t, r, n);
    } catch (o) {
      return this.emitReserved("error", o);
    }
    this.ws.binaryType = this.socket.binaryType, this.addEventListeners();
  }
  /**
   * Adds event listeners to the socket
   *
   * @private
   */
  addEventListeners() {
    this.ws.onopen = () => {
      this.opts.autoUnref && this.ws._socket.unref(), this.onOpen();
    }, this.ws.onclose = (t) => this.onClose({
      description: "websocket connection closed",
      context: t
    }), this.ws.onmessage = (t) => this.onData(t.data), this.ws.onerror = (t) => this.onError("websocket error", t);
  }
  write(t) {
    this.writable = !1;
    for (let r = 0; r < t.length; r++) {
      const n = t[r], o = r === t.length - 1;
      pf(n, this.supportsBinary, (i) => {
        try {
          this.doWrite(n, i);
        } catch {
        }
        o && Kl(() => {
          this.writable = !0, this.emitReserved("drain");
        }, this.setTimeoutFn);
      });
    }
  }
  doClose() {
    typeof this.ws < "u" && (this.ws.onerror = () => {
    }, this.ws.close(), this.ws = null);
  }
  /**
   * Generates uri for connection.
   *
   * @private
   */
  uri() {
    const t = this.opts.secure ? "wss" : "ws", r = this.query || {};
    return this.opts.timestampRequests && (r[this.opts.timestampParam] = v1()), this.supportsBinary || (r.b64 = 1), this.createUri(t, r);
  }
}
const Uc = Qt.WebSocket || Qt.MozWebSocket;
class KM extends XM {
  createSocket(t, r, n) {
    return x1 ? new Uc(t, r, n) : r ? new Uc(t, r) : new Uc(t);
  }
  doWrite(t, r) {
    this.ws.send(r);
  }
}
class ZM extends gf {
  get name() {
    return "webtransport";
  }
  doOpen() {
    try {
      this._transport = new WebTransport(this.createUri("https"), this.opts.transportOptions[this.name]);
    } catch (t) {
      return this.emitReserved("error", t);
    }
    this._transport.closed.then(() => {
      this.onClose();
    }).catch((t) => {
      this.onError("webtransport error", t);
    }), this._transport.ready.then(() => {
      this._transport.createBidirectionalStream().then((t) => {
        const r = kM(Number.MAX_SAFE_INTEGER, this.socket.binaryType), n = t.readable.pipeThrough(r).getReader(), o = jM();
        o.readable.pipeTo(t.writable), this._writer = o.writable.getWriter();
        const i = () => {
          n.read().then(({ done: s, value: l }) => {
            s || (this.onPacket(l), i());
          }).catch((s) => {
          });
        };
        i();
        const a = { type: "open" };
        this.query.sid && (a.data = `{"sid":"${this.query.sid}"}`), this._writer.write(a).then(() => this.onOpen());
      });
    });
  }
  write(t) {
    this.writable = !1;
    for (let r = 0; r < t.length; r++) {
      const n = t[r], o = r === t.length - 1;
      this._writer.write(n).then(() => {
        o && Kl(() => {
          this.writable = !0, this.emitReserved("drain");
        }, this.setTimeoutFn);
      });
    }
  }
  doClose() {
    var t;
    (t = this._transport) === null || t === void 0 || t.close();
  }
}
const QM = {
  websocket: KM,
  webtransport: ZM,
  polling: qM
}, JM = /^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/, eT = [
  "source",
  "protocol",
  "authority",
  "userInfo",
  "user",
  "password",
  "host",
  "port",
  "relative",
  "path",
  "directory",
  "file",
  "query",
  "anchor"
];
function Ou(e) {
  if (e.length > 8e3)
    throw "URI too long";
  const t = e, r = e.indexOf("["), n = e.indexOf("]");
  r != -1 && n != -1 && (e = e.substring(0, r) + e.substring(r, n).replace(/:/g, ";") + e.substring(n, e.length));
  let o = JM.exec(e || ""), i = {}, a = 14;
  for (; a--; )
    i[eT[a]] = o[a] || "";
  return r != -1 && n != -1 && (i.source = t, i.host = i.host.substring(1, i.host.length - 1).replace(/;/g, ":"), i.authority = i.authority.replace("[", "").replace("]", "").replace(/;/g, ":"), i.ipv6uri = !0), i.pathNames = tT(i, i.path), i.queryKey = rT(i, i.query), i;
}
function tT(e, t) {
  const r = /\/{2,9}/g, n = t.replace(r, "/").split("/");
  return (t.slice(0, 1) == "/" || t.length === 0) && n.splice(0, 1), t.slice(-1) == "/" && n.splice(n.length - 1, 1), n;
}
function rT(e, t) {
  const r = {};
  return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function(n, o, i) {
    o && (r[o] = i);
  }), r;
}
const Iu = typeof addEventListener == "function" && typeof removeEventListener == "function", Vs = [];
Iu && addEventListener("offline", () => {
  Vs.forEach((e) => e());
}, !1);
class yn extends mt {
  /**
   * Socket constructor.
   *
   * @param {String|Object} uri - uri or options
   * @param {Object} opts - options
   */
  constructor(t, r) {
    if (super(), this.binaryType = AM, this.writeBuffer = [], this._prevBufferLen = 0, this._pingInterval = -1, this._pingTimeout = -1, this._maxPayload = -1, this._pingTimeoutTime = 1 / 0, t && typeof t == "object" && (r = t, t = null), t) {
      const n = Ou(t);
      r.hostname = n.host, r.secure = n.protocol === "https" || n.protocol === "wss", r.port = n.port, n.query && (r.query = n.query);
    } else r.host && (r.hostname = Ou(r.host).host);
    Zl(this, r), this.secure = r.secure != null ? r.secure : typeof location < "u" && location.protocol === "https:", r.hostname && !r.port && (r.port = this.secure ? "443" : "80"), this.hostname = r.hostname || (typeof location < "u" ? location.hostname : "localhost"), this.port = r.port || (typeof location < "u" && location.port ? location.port : this.secure ? "443" : "80"), this.transports = [], this._transportsByName = {}, r.transports.forEach((n) => {
      const o = n.prototype.name;
      this.transports.push(o), this._transportsByName[o] = n;
    }), this.opts = Object.assign({
      path: "/engine.io",
      agent: !1,
      withCredentials: !1,
      upgrade: !0,
      timestampParam: "t",
      rememberUpgrade: !1,
      addTrailingSlash: !0,
      rejectUnauthorized: !0,
      perMessageDeflate: {
        threshold: 1024
      },
      transportOptions: {},
      closeOnBeforeunload: !1
    }, r), this.opts.path = this.opts.path.replace(/\/$/, "") + (this.opts.addTrailingSlash ? "/" : ""), typeof this.opts.query == "string" && (this.opts.query = $M(this.opts.query)), Iu && (this.opts.closeOnBeforeunload && (this._beforeunloadEventListener = () => {
      this.transport && (this.transport.removeAllListeners(), this.transport.close());
    }, addEventListener("beforeunload", this._beforeunloadEventListener, !1)), this.hostname !== "localhost" && (this._offlineEventListener = () => {
      this._onClose("transport close", {
        description: "network connection lost"
      });
    }, Vs.push(this._offlineEventListener))), this.opts.withCredentials && (this._cookieJar = void 0), this._open();
  }
  /**
   * Creates transport of the given type.
   *
   * @param {String} name - transport name
   * @return {Transport}
   * @private
   */
  createTransport(t) {
    const r = Object.assign({}, this.opts.query);
    r.EIO = h1, r.transport = t, this.id && (r.sid = this.id);
    const n = Object.assign({}, this.opts, {
      query: r,
      socket: this,
      hostname: this.hostname,
      secure: this.secure,
      port: this.port
    }, this.opts.transportOptions[t]);
    return new this._transportsByName[t](n);
  }
  /**
   * Initializes transport to use and starts probe.
   *
   * @private
   */
  _open() {
    if (this.transports.length === 0) {
      this.setTimeoutFn(() => {
        this.emitReserved("error", "No transports available");
      }, 0);
      return;
    }
    const t = this.opts.rememberUpgrade && yn.priorWebsocketSuccess && this.transports.indexOf("websocket") !== -1 ? "websocket" : this.transports[0];
    this.readyState = "opening";
    const r = this.createTransport(t);
    r.open(), this.setTransport(r);
  }
  /**
   * Sets the current transport. Disables the existing one (if any).
   *
   * @private
   */
  setTransport(t) {
    this.transport && this.transport.removeAllListeners(), this.transport = t, t.on("drain", this._onDrain.bind(this)).on("packet", this._onPacket.bind(this)).on("error", this._onError.bind(this)).on("close", (r) => this._onClose("transport close", r));
  }
  /**
   * Called when connection is deemed open.
   *
   * @private
   */
  onOpen() {
    this.readyState = "open", yn.priorWebsocketSuccess = this.transport.name === "websocket", this.emitReserved("open"), this.flush();
  }
  /**
   * Handles a packet.
   *
   * @private
   */
  _onPacket(t) {
    if (this.readyState === "opening" || this.readyState === "open" || this.readyState === "closing")
      switch (this.emitReserved("packet", t), this.emitReserved("heartbeat"), t.type) {
        case "open":
          this.onHandshake(JSON.parse(t.data));
          break;
        case "ping":
          this._sendPacket("pong"), this.emitReserved("ping"), this.emitReserved("pong"), this._resetPingTimeout();
          break;
        case "error":
          const r = new Error("server error");
          r.code = t.data, this._onError(r);
          break;
        case "message":
          this.emitReserved("data", t.data), this.emitReserved("message", t.data);
          break;
      }
  }
  /**
   * Called upon handshake completion.
   *
   * @param {Object} data - handshake obj
   * @private
   */
  onHandshake(t) {
    this.emitReserved("handshake", t), this.id = t.sid, this.transport.query.sid = t.sid, this._pingInterval = t.pingInterval, this._pingTimeout = t.pingTimeout, this._maxPayload = t.maxPayload, this.onOpen(), this.readyState !== "closed" && this._resetPingTimeout();
  }
  /**
   * Sets and resets ping timeout timer based on server pings.
   *
   * @private
   */
  _resetPingTimeout() {
    this.clearTimeoutFn(this._pingTimeoutTimer);
    const t = this._pingInterval + this._pingTimeout;
    this._pingTimeoutTime = Date.now() + t, this._pingTimeoutTimer = this.setTimeoutFn(() => {
      this._onClose("ping timeout");
    }, t), this.opts.autoUnref && this._pingTimeoutTimer.unref();
  }
  /**
   * Called on `drain` event
   *
   * @private
   */
  _onDrain() {
    this.writeBuffer.splice(0, this._prevBufferLen), this._prevBufferLen = 0, this.writeBuffer.length === 0 ? this.emitReserved("drain") : this.flush();
  }
  /**
   * Flush write buffers.
   *
   * @private
   */
  flush() {
    if (this.readyState !== "closed" && this.transport.writable && !this.upgrading && this.writeBuffer.length) {
      const t = this._getWritablePackets();
      this.transport.send(t), this._prevBufferLen = t.length, this.emitReserved("flush");
    }
  }
  /**
   * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP
   * long-polling)
   *
   * @private
   */
  _getWritablePackets() {
    if (!(this._maxPayload && this.transport.name === "polling" && this.writeBuffer.length > 1))
      return this.writeBuffer;
    let r = 1;
    for (let n = 0; n < this.writeBuffer.length; n++) {
      const o = this.writeBuffer[n].data;
      if (o && (r += LM(o)), n > 0 && r > this._maxPayload)
        return this.writeBuffer.slice(0, n);
      r += 2;
    }
    return this.writeBuffer;
  }
  /**
   * Checks whether the heartbeat timer has expired but the socket has not yet been notified.
   *
   * Note: this method is private for now because it does not really fit the WebSocket API, but if we put it in the
   * `write()` method then the message would not be buffered by the Socket.IO client.
   *
   * @return {boolean}
   * @private
   */
  /* private */
  _hasPingExpired() {
    if (!this._pingTimeoutTime)
      return !0;
    const t = Date.now() > this._pingTimeoutTime;
    return t && (this._pingTimeoutTime = 0, Kl(() => {
      this._onClose("ping timeout");
    }, this.setTimeoutFn)), t;
  }
  /**
   * Sends a message.
   *
   * @param {String} msg - message.
   * @param {Object} options.
   * @param {Function} fn - callback function.
   * @return {Socket} for chaining.
   */
  write(t, r, n) {
    return this._sendPacket("message", t, r, n), this;
  }
  /**
   * Sends a message. Alias of {@link Socket#write}.
   *
   * @param {String} msg - message.
   * @param {Object} options.
   * @param {Function} fn - callback function.
   * @return {Socket} for chaining.
   */
  send(t, r, n) {
    return this._sendPacket("message", t, r, n), this;
  }
  /**
   * Sends a packet.
   *
   * @param {String} type: packet type.
   * @param {String} data.
   * @param {Object} options.
   * @param {Function} fn - callback function.
   * @private
   */
  _sendPacket(t, r, n, o) {
    if (typeof r == "function" && (o = r, r = void 0), typeof n == "function" && (o = n, n = null), this.readyState === "closing" || this.readyState === "closed")
      return;
    n = n || {}, n.compress = n.compress !== !1;
    const i = {
      type: t,
      data: r,
      options: n
    };
    this.emitReserved("packetCreate", i), this.writeBuffer.push(i), o && this.once("flush", o), this.flush();
  }
  /**
   * Closes the connection.
   */
  close() {
    const t = () => {
      this._onClose("forced close"), this.transport.close();
    }, r = () => {
      this.off("upgrade", r), this.off("upgradeError", r), t();
    }, n = () => {
      this.once("upgrade", r), this.once("upgradeError", r);
    };
    return (this.readyState === "opening" || this.readyState === "open") && (this.readyState = "closing", this.writeBuffer.length ? this.once("drain", () => {
      this.upgrading ? n() : t();
    }) : this.upgrading ? n() : t()), this;
  }
  /**
   * Called upon transport error
   *
   * @private
   */
  _onError(t) {
    if (yn.priorWebsocketSuccess = !1, this.opts.tryAllTransports && this.transports.length > 1 && this.readyState === "opening")
      return this.transports.shift(), this._open();
    this.emitReserved("error", t), this._onClose("transport error", t);
  }
  /**
   * Called upon transport close.
   *
   * @private
   */
  _onClose(t, r) {
    if (this.readyState === "opening" || this.readyState === "open" || this.readyState === "closing") {
      if (this.clearTimeoutFn(this._pingTimeoutTimer), this.transport.removeAllListeners("close"), this.transport.close(), this.transport.removeAllListeners(), Iu && (this._beforeunloadEventListener && removeEventListener("beforeunload", this._beforeunloadEventListener, !1), this._offlineEventListener)) {
        const n = Vs.indexOf(this._offlineEventListener);
        n !== -1 && Vs.splice(n, 1);
      }
      this.readyState = "closed", this.id = null, this.emitReserved("close", t, r), this.writeBuffer = [], this._prevBufferLen = 0;
    }
  }
}
yn.protocol = h1;
class nT extends yn {
  constructor() {
    super(...arguments), this._upgrades = [];
  }
  onOpen() {
    if (super.onOpen(), this.readyState === "open" && this.opts.upgrade)
      for (let t = 0; t < this._upgrades.length; t++)
        this._probe(this._upgrades[t]);
  }
  /**
   * Probes a transport.
   *
   * @param {String} name - transport name
   * @private
   */
  _probe(t) {
    let r = this.createTransport(t), n = !1;
    yn.priorWebsocketSuccess = !1;
    const o = () => {
      n || (r.send([{ type: "ping", data: "probe" }]), r.once("packet", (d) => {
        if (!n)
          if (d.type === "pong" && d.data === "probe") {
            if (this.upgrading = !0, this.emitReserved("upgrading", r), !r)
              return;
            yn.priorWebsocketSuccess = r.name === "websocket", this.transport.pause(() => {
              n || this.readyState !== "closed" && (u(), this.setTransport(r), r.send([{ type: "upgrade" }]), this.emitReserved("upgrade", r), r = null, this.upgrading = !1, this.flush());
            });
          } else {
            const h = new Error("probe error");
            h.transport = r.name, this.emitReserved("upgradeError", h);
          }
      }));
    };
    function i() {
      n || (n = !0, u(), r.close(), r = null);
    }
    const a = (d) => {
      const h = new Error("probe error: " + d);
      h.transport = r.name, i(), this.emitReserved("upgradeError", h);
    };
    function s() {
      a("transport closed");
    }
    function l() {
      a("socket closed");
    }
    function c(d) {
      r && d.name !== r.name && i();
    }
    const u = () => {
      r.removeListener("open", o), r.removeListener("error", a), r.removeListener("close", s), this.off("close", l), this.off("upgrading", c);
    };
    r.once("open", o), r.once("error", a), r.once("close", s), this.once("close", l), this.once("upgrading", c), this._upgrades.indexOf("webtransport") !== -1 && t !== "webtransport" ? this.setTimeoutFn(() => {
      n || r.open();
    }, 200) : r.open();
  }
  onHandshake(t) {
    this._upgrades = this._filterUpgrades(t.upgrades), super.onHandshake(t);
  }
  /**
   * Filters upgrades, returning only those matching client transports.
   *
   * @param {Array} upgrades - server upgrades
   * @private
   */
  _filterUpgrades(t) {
    const r = [];
    for (let n = 0; n < t.length; n++)
      ~this.transports.indexOf(t[n]) && r.push(t[n]);
    return r;
  }
}
let oT = class extends nT {
  constructor(t, r = {}) {
    const n = typeof t == "object" ? t : r;
    (!n.transports || n.transports && typeof n.transports[0] == "string") && (n.transports = (n.transports || ["polling", "websocket", "webtransport"]).map((o) => QM[o]).filter((o) => !!o)), super(t, n);
  }
};
function iT(e, t = "", r) {
  let n = e;
  r = r || typeof location < "u" && location, e == null && (e = r.protocol + "//" + r.host), typeof e == "string" && (e.charAt(0) === "/" && (e.charAt(1) === "/" ? e = r.protocol + e : e = r.host + e), /^(https?|wss?):\/\//.test(e) || (typeof r < "u" ? e = r.protocol + "//" + e : e = "https://" + e), n = Ou(e)), n.port || (/^(http|ws)$/.test(n.protocol) ? n.port = "80" : /^(http|ws)s$/.test(n.protocol) && (n.port = "443")), n.path = n.path || "/";
  const i = n.host.indexOf(":") !== -1 ? "[" + n.host + "]" : n.host;
  return n.id = n.protocol + "://" + i + ":" + n.port + t, n.href = n.protocol + "://" + i + (r && r.port === n.port ? "" : ":" + n.port), n;
}
const aT = typeof ArrayBuffer == "function", sT = (e) => typeof ArrayBuffer.isView == "function" ? ArrayBuffer.isView(e) : e.buffer instanceof ArrayBuffer, y1 = Object.prototype.toString, lT = typeof Blob == "function" || typeof Blob < "u" && y1.call(Blob) === "[object BlobConstructor]", cT = typeof File == "function" || typeof File < "u" && y1.call(File) === "[object FileConstructor]";
function mf(e) {
  return aT && (e instanceof ArrayBuffer || sT(e)) || lT && e instanceof Blob || cT && e instanceof File;
}
function Us(e, t) {
  if (!e || typeof e != "object")
    return !1;
  if (Array.isArray(e)) {
    for (let r = 0, n = e.length; r < n; r++)
      if (Us(e[r]))
        return !0;
    return !1;
  }
  if (mf(e))
    return !0;
  if (e.toJSON && typeof e.toJSON == "function" && arguments.length === 1)
    return Us(e.toJSON(), !0);
  for (const r in e)
    if (Object.prototype.hasOwnProperty.call(e, r) && Us(e[r]))
      return !0;
  return !1;
}
function uT(e) {
  const t = [], r = e.data, n = e;
  return n.data = Fu(r, t), n.attachments = t.length, { packet: n, buffers: t };
}
function Fu(e, t) {
  if (!e)
    return e;
  if (mf(e)) {
    const r = { _placeholder: !0, num: t.length };
    return t.push(e), r;
  } else if (Array.isArray(e)) {
    const r = new Array(e.length);
    for (let n = 0; n < e.length; n++)
      r[n] = Fu(e[n], t);
    return r;
  } else if (typeof e == "object" && !(e instanceof Date)) {
    const r = {};
    for (const n in e)
      Object.prototype.hasOwnProperty.call(e, n) && (r[n] = Fu(e[n], t));
    return r;
  }
  return e;
}
function dT(e, t) {
  return e.data = Lu(e.data, t), delete e.attachments, e;
}
function Lu(e, t) {
  if (!e)
    return e;
  if (e && e._placeholder === !0) {
    if (typeof e.num == "number" && e.num >= 0 && e.num < t.length)
      return t[e.num];
    throw new Error("illegal attachments");
  } else if (Array.isArray(e))
    for (let r = 0; r < e.length; r++)
      e[r] = Lu(e[r], t);
  else if (typeof e == "object")
    for (const r in e)
      Object.prototype.hasOwnProperty.call(e, r) && (e[r] = Lu(e[r], t));
  return e;
}
const fT = [
  "connect",
  "connect_error",
  "disconnect",
  "disconnecting",
  "newListener",
  "removeListener"
  // used by the Node.js EventEmitter
], hT = 5;
var Be;
(function(e) {
  e[e.CONNECT = 0] = "CONNECT", e[e.DISCONNECT = 1] = "DISCONNECT", e[e.EVENT = 2] = "EVENT", e[e.ACK = 3] = "ACK", e[e.CONNECT_ERROR = 4] = "CONNECT_ERROR", e[e.BINARY_EVENT = 5] = "BINARY_EVENT", e[e.BINARY_ACK = 6] = "BINARY_ACK";
})(Be || (Be = {}));
class pT {
  /**
   * Encoder constructor
   *
   * @param {function} replacer - custom replacer to pass down to JSON.parse
   */
  constructor(t) {
    this.replacer = t;
  }
  /**
   * Encode a packet as a single string if non-binary, or as a
   * buffer sequence, depending on packet type.
   *
   * @param {Object} obj - packet object
   */
  encode(t) {
    return (t.type === Be.EVENT || t.type === Be.ACK) && Us(t) ? this.encodeAsBinary({
      type: t.type === Be.EVENT ? Be.BINARY_EVENT : Be.BINARY_ACK,
      nsp: t.nsp,
      data: t.data,
      id: t.id
    }) : [this.encodeAsString(t)];
  }
  /**
   * Encode packet as string.
   */
  encodeAsString(t) {
    let r = "" + t.type;
    return (t.type === Be.BINARY_EVENT || t.type === Be.BINARY_ACK) && (r += t.attachments + "-"), t.nsp && t.nsp !== "/" && (r += t.nsp + ","), t.id != null && (r += t.id), t.data != null && (r += JSON.stringify(t.data, this.replacer)), r;
  }
  /**
   * Encode packet as 'buffer sequence' by removing blobs, and
   * deconstructing packet into object with placeholders and
   * a list of buffers.
   */
  encodeAsBinary(t) {
    const r = uT(t), n = this.encodeAsString(r.packet), o = r.buffers;
    return o.unshift(n), o;
  }
}
function Lp(e) {
  return Object.prototype.toString.call(e) === "[object Object]";
}
class xf extends mt {
  /**
   * Decoder constructor
   *
   * @param {function} reviver - custom reviver to pass down to JSON.stringify
   */
  constructor(t) {
    super(), this.reviver = t;
  }
  /**
   * Decodes an encoded packet string into packet JSON.
   *
   * @param {String} obj - encoded packet
   */
  add(t) {
    let r;
    if (typeof t == "string") {
      if (this.reconstructor)
        throw new Error("got plaintext data when reconstructing a packet");
      r = this.decodeString(t);
      const n = r.type === Be.BINARY_EVENT;
      n || r.type === Be.BINARY_ACK ? (r.type = n ? Be.EVENT : Be.ACK, this.reconstructor = new vT(r), r.attachments === 0 && super.emitReserved("decoded", r)) : super.emitReserved("decoded", r);
    } else if (mf(t) || t.base64)
      if (this.reconstructor)
        r = this.reconstructor.takeBinaryData(t), r && (this.reconstructor = null, super.emitReserved("decoded", r));
      else
        throw new Error("got binary data when not reconstructing a packet");
    else
      throw new Error("Unknown type: " + t);
  }
  /**
   * Decode a packet String (JSON data)
   *
   * @param {String} str
   * @return {Object} packet
   */
  decodeString(t) {
    let r = 0;
    const n = {
      type: Number(t.charAt(0))
    };
    if (Be[n.type] === void 0)
      throw new Error("unknown packet type " + n.type);
    if (n.type === Be.BINARY_EVENT || n.type === Be.BINARY_ACK) {
      const i = r + 1;
      for (; t.charAt(++r) !== "-" && r != t.length; )
        ;
      const a = t.substring(i, r);
      if (a != Number(a) || t.charAt(r) !== "-")
        throw new Error("Illegal attachments");
      n.attachments = Number(a);
    }
    if (t.charAt(r + 1) === "/") {
      const i = r + 1;
      for (; ++r && !(t.charAt(r) === "," || r === t.length); )
        ;
      n.nsp = t.substring(i, r);
    } else
      n.nsp = "/";
    const o = t.charAt(r + 1);
    if (o !== "" && Number(o) == o) {
      const i = r + 1;
      for (; ++r; ) {
        const a = t.charAt(r);
        if (a == null || Number(a) != a) {
          --r;
          break;
        }
        if (r === t.length)
          break;
      }
      n.id = Number(t.substring(i, r + 1));
    }
    if (t.charAt(++r)) {
      const i = this.tryParse(t.substr(r));
      if (xf.isPayloadValid(n.type, i))
        n.data = i;
      else
        throw new Error("invalid payload");
    }
    return n;
  }
  tryParse(t) {
    try {
      return JSON.parse(t, this.reviver);
    } catch {
      return !1;
    }
  }
  static isPayloadValid(t, r) {
    switch (t) {
      case Be.CONNECT:
        return Lp(r);
      case Be.DISCONNECT:
        return r === void 0;
      case Be.CONNECT_ERROR:
        return typeof r == "string" || Lp(r);
      case Be.EVENT:
      case Be.BINARY_EVENT:
        return Array.isArray(r) && (typeof r[0] == "number" || typeof r[0] == "string" && fT.indexOf(r[0]) === -1);
      case Be.ACK:
      case Be.BINARY_ACK:
        return Array.isArray(r);
    }
  }
  /**
   * Deallocates a parser's resources
   */
  destroy() {
    this.reconstructor && (this.reconstructor.finishedReconstruction(), this.reconstructor = null);
  }
}
class vT {
  constructor(t) {
    this.packet = t, this.buffers = [], this.reconPack = t;
  }
  /**
   * Method to be called when binary data received from connection
   * after a BINARY_EVENT packet.
   *
   * @param {Buffer | ArrayBuffer} binData - the raw binary data received
   * @return {null | Object} returns null if more binary data is expected or
   *   a reconstructed packet object if all buffers have been received.
   */
  takeBinaryData(t) {
    if (this.buffers.push(t), this.buffers.length === this.reconPack.attachments) {
      const r = dT(this.reconPack, this.buffers);
      return this.finishedReconstruction(), r;
    }
    return null;
  }
  /**
   * Cleans up binary packet reconstruction variables.
   */
  finishedReconstruction() {
    this.reconPack = null, this.buffers = [];
  }
}
const gT = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  Decoder: xf,
  Encoder: pT,
  get PacketType() {
    return Be;
  },
  protocol: hT
}, Symbol.toStringTag, { value: "Module" }));
function vr(e, t, r) {
  return e.on(t, r), function() {
    e.off(t, r);
  };
}
const mT = Object.freeze({
  connect: 1,
  connect_error: 1,
  disconnect: 1,
  disconnecting: 1,
  // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener
  newListener: 1,
  removeListener: 1
});
class b1 extends mt {
  /**
   * `Socket` constructor.
   */
  constructor(t, r, n) {
    super(), this.connected = !1, this.recovered = !1, this.receiveBuffer = [], this.sendBuffer = [], this._queue = [], this._queueSeq = 0, this.ids = 0, this.acks = {}, this.flags = {}, this.io = t, this.nsp = r, n && n.auth && (this.auth = n.auth), this._opts = Object.assign({}, n), this.io._autoConnect && this.open();
  }
  /**
   * Whether the socket is currently disconnected
   *
   * @example
   * const socket = io();
   *
   * socket.on("connect", () => {
   *   console.log(socket.disconnected); // false
   * });
   *
   * socket.on("disconnect", () => {
   *   console.log(socket.disconnected); // true
   * });
   */
  get disconnected() {
    return !this.connected;
  }
  /**
   * Subscribe to open, close and packet events
   *
   * @private
   */
  subEvents() {
    if (this.subs)
      return;
    const t = this.io;
    this.subs = [
      vr(t, "open", this.onopen.bind(this)),
      vr(t, "packet", this.onpacket.bind(this)),
      vr(t, "error", this.onerror.bind(this)),
      vr(t, "close", this.onclose.bind(this))
    ];
  }
  /**
   * Whether the Socket will try to reconnect when its Manager connects or reconnects.
   *
   * @example
   * const socket = io();
   *
   * console.log(socket.active); // true
   *
   * socket.on("disconnect", (reason) => {
   *   if (reason === "io server disconnect") {
   *     // the disconnection was initiated by the server, you need to manually reconnect
   *     console.log(socket.active); // false
   *   }
   *   // else the socket will automatically try to reconnect
   *   console.log(socket.active); // true
   * });
   */
  get active() {
    return !!this.subs;
  }
  /**
   * "Opens" the socket.
   *
   * @example
   * const socket = io({
   *   autoConnect: false
   * });
   *
   * socket.connect();
   */
  connect() {
    return this.connected ? this : (this.subEvents(), this.io._reconnecting || this.io.open(), this.io._readyState === "open" && this.onopen(), this);
  }
  /**
   * Alias for {@link connect()}.
   */
  open() {
    return this.connect();
  }
  /**
   * Sends a `message` event.
   *
   * This method mimics the WebSocket.send() method.
   *
   * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send
   *
   * @example
   * socket.send("hello");
   *
   * // this is equivalent to
   * socket.emit("message", "hello");
   *
   * @return self
   */
  send(...t) {
    return t.unshift("message"), this.emit.apply(this, t), this;
  }
  /**
   * Override `emit`.
   * If the event is in `events`, it's emitted normally.
   *
   * @example
   * socket.emit("hello", "world");
   *
   * // all serializable datastructures are supported (no need to call JSON.stringify)
   * socket.emit("hello", 1, "2", { 3: ["4"], 5: Uint8Array.from([6]) });
   *
   * // with an acknowledgement from the server
   * socket.emit("hello", "world", (val) => {
   *   // ...
   * });
   *
   * @return self
   */
  emit(t, ...r) {
    var n, o, i;
    if (mT.hasOwnProperty(t))
      throw new Error('"' + t.toString() + '" is a reserved event name');
    if (r.unshift(t), this._opts.retries && !this.flags.fromQueue && !this.flags.volatile)
      return this._addToQueue(r), this;
    const a = {
      type: Be.EVENT,
      data: r
    };
    if (a.options = {}, a.options.compress = this.flags.compress !== !1, typeof r[r.length - 1] == "function") {
      const u = this.ids++, d = r.pop();
      this._registerAckCallback(u, d), a.id = u;
    }
    const s = (o = (n = this.io.engine) === null || n === void 0 ? void 0 : n.transport) === null || o === void 0 ? void 0 : o.writable, l = this.connected && !(!((i = this.io.engine) === null || i === void 0) && i._hasPingExpired());
    return this.flags.volatile && !s || (l ? (this.notifyOutgoingListeners(a), this.packet(a)) : this.sendBuffer.push(a)), this.flags = {}, this;
  }
  /**
   * @private
   */
  _registerAckCallback(t, r) {
    var n;
    const o = (n = this.flags.timeout) !== null && n !== void 0 ? n : this._opts.ackTimeout;
    if (o === void 0) {
      this.acks[t] = r;
      return;
    }
    const i = this.io.setTimeoutFn(() => {
      delete this.acks[t];
      for (let s = 0; s < this.sendBuffer.length; s++)
        this.sendBuffer[s].id === t && this.sendBuffer.splice(s, 1);
      r.call(this, new Error("operation has timed out"));
    }, o), a = (...s) => {
      this.io.clearTimeoutFn(i), r.apply(this, s);
    };
    a.withError = !0, this.acks[t] = a;
  }
  /**
   * Emits an event and waits for an acknowledgement
   *
   * @example
   * // without timeout
   * const response = await socket.emitWithAck("hello", "world");
   *
   * // with a specific timeout
   * try {
   *   const response = await socket.timeout(1000).emitWithAck("hello", "world");
   * } catch (err) {
   *   // the server did not acknowledge the event in the given delay
   * }
   *
   * @return a Promise that will be fulfilled when the server acknowledges the event
   */
  emitWithAck(t, ...r) {
    return new Promise((n, o) => {
      const i = (a, s) => a ? o(a) : n(s);
      i.withError = !0, r.push(i), this.emit(t, ...r);
    });
  }
  /**
   * Add the packet to the queue.
   * @param args
   * @private
   */
  _addToQueue(t) {
    let r;
    typeof t[t.length - 1] == "function" && (r = t.pop());
    const n = {
      id: this._queueSeq++,
      tryCount: 0,
      pending: !1,
      args: t,
      flags: Object.assign({ fromQueue: !0 }, this.flags)
    };
    t.push((o, ...i) => n !== this._queue[0] ? void 0 : (o !== null ? n.tryCount > this._opts.retries && (this._queue.shift(), r && r(o)) : (this._queue.shift(), r && r(null, ...i)), n.pending = !1, this._drainQueue())), this._queue.push(n), this._drainQueue();
  }
  /**
   * Send the first packet of the queue, and wait for an acknowledgement from the server.
   * @param force - whether to resend a packet that has not been acknowledged yet
   *
   * @private
   */
  _drainQueue(t = !1) {
    if (!this.connected || this._queue.length === 0)
      return;
    const r = this._queue[0];
    r.pending && !t || (r.pending = !0, r.tryCount++, this.flags = r.flags, this.emit.apply(this, r.args));
  }
  /**
   * Sends a packet.
   *
   * @param packet
   * @private
   */
  packet(t) {
    t.nsp = this.nsp, this.io._packet(t);
  }
  /**
   * Called upon engine `open`.
   *
   * @private
   */
  onopen() {
    typeof this.auth == "function" ? this.auth((t) => {
      this._sendConnectPacket(t);
    }) : this._sendConnectPacket(this.auth);
  }
  /**
   * Sends a CONNECT packet to initiate the Socket.IO session.
   *
   * @param data
   * @private
   */
  _sendConnectPacket(t) {
    this.packet({
      type: Be.CONNECT,
      data: this._pid ? Object.assign({ pid: this._pid, offset: this._lastOffset }, t) : t
    });
  }
  /**
   * Called upon engine or manager `error`.
   *
   * @param err
   * @private
   */
  onerror(t) {
    this.connected || this.emitReserved("connect_error", t);
  }
  /**
   * Called upon engine `close`.
   *
   * @param reason
   * @param description
   * @private
   */
  onclose(t, r) {
    this.connected = !1, delete this.id, this.emitReserved("disconnect", t, r), this._clearAcks();
  }
  /**
   * Clears the acknowledgement handlers upon disconnection, since the client will never receive an acknowledgement from
   * the server.
   *
   * @private
   */
  _clearAcks() {
    Object.keys(this.acks).forEach((t) => {
      if (!this.sendBuffer.some((n) => String(n.id) === t)) {
        const n = this.acks[t];
        delete this.acks[t], n.withError && n.call(this, new Error("socket has been disconnected"));
      }
    });
  }
  /**
   * Called with socket packet.
   *
   * @param packet
   * @private
   */
  onpacket(t) {
    if (t.nsp === this.nsp)
      switch (t.type) {
        case Be.CONNECT:
          t.data && t.data.sid ? this.onconnect(t.data.sid, t.data.pid) : this.emitReserved("connect_error", new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));
          break;
        case Be.EVENT:
        case Be.BINARY_EVENT:
          this.onevent(t);
          break;
        case Be.ACK:
        case Be.BINARY_ACK:
          this.onack(t);
          break;
        case Be.DISCONNECT:
          this.ondisconnect();
          break;
        case Be.CONNECT_ERROR:
          this.destroy();
          const n = new Error(t.data.message);
          n.data = t.data.data, this.emitReserved("connect_error", n);
          break;
      }
  }
  /**
   * Called upon a server event.
   *
   * @param packet
   * @private
   */
  onevent(t) {
    const r = t.data || [];
    t.id != null && r.push(this.ack(t.id)), this.connected ? this.emitEvent(r) : this.receiveBuffer.push(Object.freeze(r));
  }
  emitEvent(t) {
    if (this._anyListeners && this._anyListeners.length) {
      const r = this._anyListeners.slice();
      for (const n of r)
        n.apply(this, t);
    }
    super.emit.apply(this, t), this._pid && t.length && typeof t[t.length - 1] == "string" && (this._lastOffset = t[t.length - 1]);
  }
  /**
   * Produces an ack callback to emit with an event.
   *
   * @private
   */
  ack(t) {
    const r = this;
    let n = !1;
    return function(...o) {
      n || (n = !0, r.packet({
        type: Be.ACK,
        id: t,
        data: o
      }));
    };
  }
  /**
   * Called upon a server acknowledgement.
   *
   * @param packet
   * @private
   */
  onack(t) {
    const r = this.acks[t.id];
    typeof r == "function" && (delete this.acks[t.id], r.withError && t.data.unshift(null), r.apply(this, t.data));
  }
  /**
   * Called upon server connect.
   *
   * @private
   */
  onconnect(t, r) {
    this.id = t, this.recovered = r && this._pid === r, this._pid = r, this.connected = !0, this.emitBuffered(), this.emitReserved("connect"), this._drainQueue(!0);
  }
  /**
   * Emit buffered events (received and emitted).
   *
   * @private
   */
  emitBuffered() {
    this.receiveBuffer.forEach((t) => this.emitEvent(t)), this.receiveBuffer = [], this.sendBuffer.forEach((t) => {
      this.notifyOutgoingListeners(t), this.packet(t);
    }), this.sendBuffer = [];
  }
  /**
   * Called upon server disconnect.
   *
   * @private
   */
  ondisconnect() {
    this.destroy(), this.onclose("io server disconnect");
  }
  /**
   * Called upon forced client/server side disconnections,
   * this method ensures the manager stops tracking us and
   * that reconnections don't get triggered for this.
   *
   * @private
   */
  destroy() {
    this.subs && (this.subs.forEach((t) => t()), this.subs = void 0), this.io._destroy(this);
  }
  /**
   * Disconnects the socket manually. In that case, the socket will not try to reconnect.
   *
   * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.
   *
   * @example
   * const socket = io();
   *
   * socket.on("disconnect", (reason) => {
   *   // console.log(reason); prints "io client disconnect"
   * });
   *
   * socket.disconnect();
   *
   * @return self
   */
  disconnect() {
    return this.connected && this.packet({ type: Be.DISCONNECT }), this.destroy(), this.connected && this.onclose("io client disconnect"), this;
  }
  /**
   * Alias for {@link disconnect()}.
   *
   * @return self
   */
  close() {
    return this.disconnect();
  }
  /**
   * Sets the compress flag.
   *
   * @example
   * socket.compress(false).emit("hello");
   *
   * @param compress - if `true`, compresses the sending data
   * @return self
   */
  compress(t) {
    return this.flags.compress = t, this;
  }
  /**
   * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not
   * ready to send messages.
   *
   * @example
   * socket.volatile.emit("hello"); // the server may or may not receive it
   *
   * @returns self
   */
  get volatile() {
    return this.flags.volatile = !0, this;
  }
  /**
   * Sets a modifier for a subsequent event emission that the callback will be called with an error when the
   * given number of milliseconds have elapsed without an acknowledgement from the server:
   *
   * @example
   * socket.timeout(5000).emit("my-event", (err) => {
   *   if (err) {
   *     // the server did not acknowledge the event in the given delay
   *   }
   * });
   *
   * @returns self
   */
  timeout(t) {
    return this.flags.timeout = t, this;
  }
  /**
   * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the
   * callback.
   *
   * @example
   * socket.onAny((event, ...args) => {
   *   console.log(`got ${event}`);
   * });
   *
   * @param listener
   */
  onAny(t) {
    return this._anyListeners = this._anyListeners || [], this._anyListeners.push(t), this;
  }
  /**
   * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the
   * callback. The listener is added to the beginning of the listeners array.
   *
   * @example
   * socket.prependAny((event, ...args) => {
   *   console.log(`got event ${event}`);
   * });
   *
   * @param listener
   */
  prependAny(t) {
    return this._anyListeners = this._anyListeners || [], this._anyListeners.unshift(t), this;
  }
  /**
   * Removes the listener that will be fired when any event is emitted.
   *
   * @example
   * const catchAllListener = (event, ...args) => {
   *   console.log(`got event ${event}`);
   * }
   *
   * socket.onAny(catchAllListener);
   *
   * // remove a specific listener
   * socket.offAny(catchAllListener);
   *
   * // or remove all listeners
   * socket.offAny();
   *
   * @param listener
   */
  offAny(t) {
    if (!this._anyListeners)
      return this;
    if (t) {
      const r = this._anyListeners;
      for (let n = 0; n < r.length; n++)
        if (t === r[n])
          return r.splice(n, 1), this;
    } else
      this._anyListeners = [];
    return this;
  }
  /**
   * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,
   * e.g. to remove listeners.
   */
  listenersAny() {
    return this._anyListeners || [];
  }
  /**
   * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the
   * callback.
   *
   * Note: acknowledgements sent to the server are not included.
   *
   * @example
   * socket.onAnyOutgoing((event, ...args) => {
   *   console.log(`sent event ${event}`);
   * });
   *
   * @param listener
   */
  onAnyOutgoing(t) {
    return this._anyOutgoingListeners = this._anyOutgoingListeners || [], this._anyOutgoingListeners.push(t), this;
  }
  /**
   * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the
   * callback. The listener is added to the beginning of the listeners array.
   *
   * Note: acknowledgements sent to the server are not included.
   *
   * @example
   * socket.prependAnyOutgoing((event, ...args) => {
   *   console.log(`sent event ${event}`);
   * });
   *
   * @param listener
   */
  prependAnyOutgoing(t) {
    return this._anyOutgoingListeners = this._anyOutgoingListeners || [], this._anyOutgoingListeners.unshift(t), this;
  }
  /**
   * Removes the listener that will be fired when any event is emitted.
   *
   * @example
   * const catchAllListener = (event, ...args) => {
   *   console.log(`sent event ${event}`);
   * }
   *
   * socket.onAnyOutgoing(catchAllListener);
   *
   * // remove a specific listener
   * socket.offAnyOutgoing(catchAllListener);
   *
   * // or remove all listeners
   * socket.offAnyOutgoing();
   *
   * @param [listener] - the catch-all listener (optional)
   */
  offAnyOutgoing(t) {
    if (!this._anyOutgoingListeners)
      return this;
    if (t) {
      const r = this._anyOutgoingListeners;
      for (let n = 0; n < r.length; n++)
        if (t === r[n])
          return r.splice(n, 1), this;
    } else
      this._anyOutgoingListeners = [];
    return this;
  }
  /**
   * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,
   * e.g. to remove listeners.
   */
  listenersAnyOutgoing() {
    return this._anyOutgoingListeners || [];
  }
  /**
   * Notify the listeners for each packet sent
   *
   * @param packet
   *
   * @private
   */
  notifyOutgoingListeners(t) {
    if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {
      const r = this._anyOutgoingListeners.slice();
      for (const n of r)
        n.apply(this, t.data);
    }
  }
}
function xi(e) {
  e = e || {}, this.ms = e.min || 100, this.max = e.max || 1e4, this.factor = e.factor || 2, this.jitter = e.jitter > 0 && e.jitter <= 1 ? e.jitter : 0, this.attempts = 0;
}
xi.prototype.duration = function() {
  var e = this.ms * Math.pow(this.factor, this.attempts++);
  if (this.jitter) {
    var t = Math.random(), r = Math.floor(t * this.jitter * e);
    e = (Math.floor(t * 10) & 1) == 0 ? e - r : e + r;
  }
  return Math.min(e, this.max) | 0;
};
xi.prototype.reset = function() {
  this.attempts = 0;
};
xi.prototype.setMin = function(e) {
  this.ms = e;
};
xi.prototype.setMax = function(e) {
  this.max = e;
};
xi.prototype.setJitter = function(e) {
  this.jitter = e;
};
class Bu extends mt {
  constructor(t, r) {
    var n;
    super(), this.nsps = {}, this.subs = [], t && typeof t == "object" && (r = t, t = void 0), r = r || {}, r.path = r.path || "/socket.io", this.opts = r, Zl(this, r), this.reconnection(r.reconnection !== !1), this.reconnectionAttempts(r.reconnectionAttempts || 1 / 0), this.reconnectionDelay(r.reconnectionDelay || 1e3), this.reconnectionDelayMax(r.reconnectionDelayMax || 5e3), this.randomizationFactor((n = r.randomizationFactor) !== null && n !== void 0 ? n : 0.5), this.backoff = new xi({
      min: this.reconnectionDelay(),
      max: this.reconnectionDelayMax(),
      jitter: this.randomizationFactor()
    }), this.timeout(r.timeout == null ? 2e4 : r.timeout), this._readyState = "closed", this.uri = t;
    const o = r.parser || gT;
    this.encoder = new o.Encoder(), this.decoder = new o.Decoder(), this._autoConnect = r.autoConnect !== !1, this._autoConnect && this.open();
  }
  reconnection(t) {
    return arguments.length ? (this._reconnection = !!t, t || (this.skipReconnect = !0), this) : this._reconnection;
  }
  reconnectionAttempts(t) {
    return t === void 0 ? this._reconnectionAttempts : (this._reconnectionAttempts = t, this);
  }
  reconnectionDelay(t) {
    var r;
    return t === void 0 ? this._reconnectionDelay : (this._reconnectionDelay = t, (r = this.backoff) === null || r === void 0 || r.setMin(t), this);
  }
  randomizationFactor(t) {
    var r;
    return t === void 0 ? this._randomizationFactor : (this._randomizationFactor = t, (r = this.backoff) === null || r === void 0 || r.setJitter(t), this);
  }
  reconnectionDelayMax(t) {
    var r;
    return t === void 0 ? this._reconnectionDelayMax : (this._reconnectionDelayMax = t, (r = this.backoff) === null || r === void 0 || r.setMax(t), this);
  }
  timeout(t) {
    return arguments.length ? (this._timeout = t, this) : this._timeout;
  }
  /**
   * Starts trying to reconnect if reconnection is enabled and we have not
   * started reconnecting yet
   *
   * @private
   */
  maybeReconnectOnOpen() {
    !this._reconnecting && this._reconnection && this.backoff.attempts === 0 && this.reconnect();
  }
  /**
   * Sets the current transport `socket`.
   *
   * @param {Function} fn - optional, callback
   * @return self
   * @public
   */
  open(t) {
    if (~this._readyState.indexOf("open"))
      return this;
    this.engine = new oT(this.uri, this.opts);
    const r = this.engine, n = this;
    this._readyState = "opening", this.skipReconnect = !1;
    const o = vr(r, "open", function() {
      n.onopen(), t && t();
    }), i = (s) => {
      this.cleanup(), this._readyState = "closed", this.emitReserved("error", s), t ? t(s) : this.maybeReconnectOnOpen();
    }, a = vr(r, "error", i);
    if (this._timeout !== !1) {
      const s = this._timeout, l = this.setTimeoutFn(() => {
        o(), i(new Error("timeout")), r.close();
      }, s);
      this.opts.autoUnref && l.unref(), this.subs.push(() => {
        this.clearTimeoutFn(l);
      });
    }
    return this.subs.push(o), this.subs.push(a), this;
  }
  /**
   * Alias for open()
   *
   * @return self
   * @public
   */
  connect(t) {
    return this.open(t);
  }
  /**
   * Called upon transport open.
   *
   * @private
   */
  onopen() {
    this.cleanup(), this._readyState = "open", this.emitReserved("open");
    const t = this.engine;
    this.subs.push(
      vr(t, "ping", this.onping.bind(this)),
      vr(t, "data", this.ondata.bind(this)),
      vr(t, "error", this.onerror.bind(this)),
      vr(t, "close", this.onclose.bind(this)),
      // @ts-ignore
      vr(this.decoder, "decoded", this.ondecoded.bind(this))
    );
  }
  /**
   * Called upon a ping.
   *
   * @private
   */
  onping() {
    this.emitReserved("ping");
  }
  /**
   * Called with data.
   *
   * @private
   */
  ondata(t) {
    try {
      this.decoder.add(t);
    } catch (r) {
      this.onclose("parse error", r);
    }
  }
  /**
   * Called when parser fully decodes a packet.
   *
   * @private
   */
  ondecoded(t) {
    Kl(() => {
      this.emitReserved("packet", t);
    }, this.setTimeoutFn);
  }
  /**
   * Called upon socket error.
   *
   * @private
   */
  onerror(t) {
    this.emitReserved("error", t);
  }
  /**
   * Creates a new socket for the given `nsp`.
   *
   * @return {Socket}
   * @public
   */
  socket(t, r) {
    let n = this.nsps[t];
    return n ? this._autoConnect && !n.active && n.connect() : (n = new b1(this, t, r), this.nsps[t] = n), n;
  }
  /**
   * Called upon a socket close.
   *
   * @param socket
   * @private
   */
  _destroy(t) {
    const r = Object.keys(this.nsps);
    for (const n of r)
      if (this.nsps[n].active)
        return;
    this._close();
  }
  /**
   * Writes a packet.
   *
   * @param packet
   * @private
   */
  _packet(t) {
    const r = this.encoder.encode(t);
    for (let n = 0; n < r.length; n++)
      this.engine.write(r[n], t.options);
  }
  /**
   * Clean up transport subscriptions and packet buffer.
   *
   * @private
   */
  cleanup() {
    this.subs.forEach((t) => t()), this.subs.length = 0, this.decoder.destroy();
  }
  /**
   * Close the current socket.
   *
   * @private
   */
  _close() {
    this.skipReconnect = !0, this._reconnecting = !1, this.onclose("forced close");
  }
  /**
   * Alias for close()
   *
   * @private
   */
  disconnect() {
    return this._close();
  }
  /**
   * Called when:
   *
   * - the low-level engine is closed
   * - the parser encountered a badly formatted packet
   * - all sockets are disconnected
   *
   * @private
   */
  onclose(t, r) {
    var n;
    this.cleanup(), (n = this.engine) === null || n === void 0 || n.close(), this.backoff.reset(), this._readyState = "closed", this.emitReserved("close", t, r), this._reconnection && !this.skipReconnect && this.reconnect();
  }
  /**
   * Attempt a reconnection.
   *
   * @private
   */
  reconnect() {
    if (this._reconnecting || this.skipReconnect)
      return this;
    const t = this;
    if (this.backoff.attempts >= this._reconnectionAttempts)
      this.backoff.reset(), this.emitReserved("reconnect_failed"), this._reconnecting = !1;
    else {
      const r = this.backoff.duration();
      this._reconnecting = !0;
      const n = this.setTimeoutFn(() => {
        t.skipReconnect || (this.emitReserved("reconnect_attempt", t.backoff.attempts), !t.skipReconnect && t.open((o) => {
          o ? (t._reconnecting = !1, t.reconnect(), this.emitReserved("reconnect_error", o)) : t.onreconnect();
        }));
      }, r);
      this.opts.autoUnref && n.unref(), this.subs.push(() => {
        this.clearTimeoutFn(n);
      });
    }
  }
  /**
   * Called upon successful reconnect.
   *
   * @private
   */
  onreconnect() {
    const t = this.backoff.attempts;
    this._reconnecting = !1, this.backoff.reset(), this.emitReserved("reconnect", t);
  }
}
const ji = {};
function Hc(e, t) {
  typeof e == "object" && (t = e, e = void 0), t = t || {};
  const r = iT(e, t.path || "/socket.io"), n = r.source, o = r.id, i = r.path, a = ji[o] && i in ji[o].nsps, s = t.forceNew || t["force new connection"] || t.multiplex === !1 || a;
  let l;
  return s ? l = new Bu(n, t) : (ji[o] || (ji[o] = new Bu(n, t)), l = ji[o]), r.query && !t.query && (t.query = r.queryKey), l.socket(r.path, t);
}
Object.assign(Hc, {
  Manager: Bu,
  Socket: b1,
  io: Hc,
  connect: Hc
});
var ys = { exports: {} }, Wc, Bp;
function xT() {
  if (Bp) return Wc;
  Bp = 1;
  var e = 1e3, t = e * 60, r = t * 60, n = r * 24, o = n * 7, i = n * 365.25;
  Wc = function(u, d) {
    d = d || {};
    var h = typeof u;
    if (h === "string" && u.length > 0)
      return a(u);
    if (h === "number" && isFinite(u))
      return d.long ? l(u) : s(u);
    throw new Error(
      "val is not a non-empty string or a valid number. val=" + JSON.stringify(u)
    );
  };
  function a(u) {
    if (u = String(u), !(u.length > 100)) {
      var d = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
        u
      );
      if (d) {
        var h = parseFloat(d[1]), p = (d[2] || "ms").toLowerCase();
        switch (p) {
          case "years":
          case "year":
          case "yrs":
          case "yr":
          case "y":
            return h * i;
          case "weeks":
          case "week":
          case "w":
            return h * o;
          case "days":
          case "day":
          case "d":
            return h * n;
          case "hours":
          case "hour":
          case "hrs":
          case "hr":
          case "h":
            return h * r;
          case "minutes":
          case "minute":
          case "mins":
          case "min":
          case "m":
            return h * t;
          case "seconds":
          case "second":
          case "secs":
          case "sec":
          case "s":
            return h * e;
          case "milliseconds":
          case "millisecond":
          case "msecs":
          case "msec":
          case "ms":
            return h;
          default:
            return;
        }
      }
    }
  }
  function s(u) {
    var d = Math.abs(u);
    return d >= n ? Math.round(u / n) + "d" : d >= r ? Math.round(u / r) + "h" : d >= t ? Math.round(u / t) + "m" : d >= e ? Math.round(u / e) + "s" : u + "ms";
  }
  function l(u) {
    var d = Math.abs(u);
    return d >= n ? c(u, d, n, "day") : d >= r ? c(u, d, r, "hour") : d >= t ? c(u, d, t, "minute") : d >= e ? c(u, d, e, "second") : u + " ms";
  }
  function c(u, d, h, p) {
    var g = d >= h * 1.5;
    return Math.round(u / h) + " " + p + (g ? "s" : "");
  }
  return Wc;
}
var Yc, zp;
function yT() {
  if (zp) return Yc;
  zp = 1;
  function e(t) {
    n.debug = n, n.default = n, n.coerce = c, n.disable = s, n.enable = i, n.enabled = l, n.humanize = xT(), n.destroy = u, Object.keys(t).forEach((d) => {
      n[d] = t[d];
    }), n.names = [], n.skips = [], n.formatters = {};
    function r(d) {
      let h = 0;
      for (let p = 0; p < d.length; p++)
        h = (h << 5) - h + d.charCodeAt(p), h |= 0;
      return n.colors[Math.abs(h) % n.colors.length];
    }
    n.selectColor = r;
    function n(d) {
      let h, p = null, g, v;
      function m(...x) {
        if (!m.enabled)
          return;
        const y = m, b = Number(/* @__PURE__ */ new Date()), w = b - (h || b);
        y.diff = w, y.prev = h, y.curr = b, h = b, x[0] = n.coerce(x[0]), typeof x[0] != "string" && x.unshift("%O");
        let _ = 0;
        x[0] = x[0].replace(/%([a-zA-Z%])/g, (T, k) => {
          if (T === "%%")
            return "%";
          _++;
          const j = n.formatters[k];
          if (typeof j == "function") {
            const A = x[_];
            T = j.call(y, A), x.splice(_, 1), _--;
          }
          return T;
        }), n.formatArgs.call(y, x), (y.log || n.log).apply(y, x);
      }
      return m.namespace = d, m.useColors = n.useColors(), m.color = n.selectColor(d), m.extend = o, m.destroy = n.destroy, Object.defineProperty(m, "enabled", {
        enumerable: !0,
        configurable: !1,
        get: () => p !== null ? p : (g !== n.namespaces && (g = n.namespaces, v = n.enabled(d)), v),
        set: (x) => {
          p = x;
        }
      }), typeof n.init == "function" && n.init(m), m;
    }
    function o(d, h) {
      const p = n(this.namespace + (typeof h > "u" ? ":" : h) + d);
      return p.log = this.log, p;
    }
    function i(d) {
      n.save(d), n.namespaces = d, n.names = [], n.skips = [];
      const h = (typeof d == "string" ? d : "").trim().replace(/\s+/g, ",").split(",").filter(Boolean);
      for (const p of h)
        p[0] === "-" ? n.skips.push(p.slice(1)) : n.names.push(p);
    }
    function a(d, h) {
      let p = 0, g = 0, v = -1, m = 0;
      for (; p < d.length; )
        if (g < h.length && (h[g] === d[p] || h[g] === "*"))
          h[g] === "*" ? (v = g, m = p, g++) : (p++, g++);
        else if (v !== -1)
          g = v + 1, m++, p = m;
        else
          return !1;
      for (; g < h.length && h[g] === "*"; )
        g++;
      return g === h.length;
    }
    function s() {
      const d = [
        ...n.names,
        ...n.skips.map((h) => "-" + h)
      ].join(",");
      return n.enable(""), d;
    }
    function l(d) {
      for (const h of n.skips)
        if (a(d, h))
          return !1;
      for (const h of n.names)
        if (a(d, h))
          return !0;
      return !1;
    }
    function c(d) {
      return d instanceof Error ? d.stack || d.message : d;
    }
    function u() {
      console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");
    }
    return n.enable(n.load()), n;
  }
  return Yc = e, Yc;
}
var $p;
function bT() {
  return $p || ($p = 1, function(e, t) {
    t.formatArgs = n, t.save = o, t.load = i, t.useColors = r, t.storage = a(), t.destroy = /* @__PURE__ */ (() => {
      let l = !1;
      return () => {
        l || (l = !0, console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."));
      };
    })(), t.colors = [
      "#0000CC",
      "#0000FF",
      "#0033CC",
      "#0033FF",
      "#0066CC",
      "#0066FF",
      "#0099CC",
      "#0099FF",
      "#00CC00",
      "#00CC33",
      "#00CC66",
      "#00CC99",
      "#00CCCC",
      "#00CCFF",
      "#3300CC",
      "#3300FF",
      "#3333CC",
      "#3333FF",
      "#3366CC",
      "#3366FF",
      "#3399CC",
      "#3399FF",
      "#33CC00",
      "#33CC33",
      "#33CC66",
      "#33CC99",
      "#33CCCC",
      "#33CCFF",
      "#6600CC",
      "#6600FF",
      "#6633CC",
      "#6633FF",
      "#66CC00",
      "#66CC33",
      "#9900CC",
      "#9900FF",
      "#9933CC",
      "#9933FF",
      "#99CC00",
      "#99CC33",
      "#CC0000",
      "#CC0033",
      "#CC0066",
      "#CC0099",
      "#CC00CC",
      "#CC00FF",
      "#CC3300",
      "#CC3333",
      "#CC3366",
      "#CC3399",
      "#CC33CC",
      "#CC33FF",
      "#CC6600",
      "#CC6633",
      "#CC9900",
      "#CC9933",
      "#CCCC00",
      "#CCCC33",
      "#FF0000",
      "#FF0033",
      "#FF0066",
      "#FF0099",
      "#FF00CC",
      "#FF00FF",
      "#FF3300",
      "#FF3333",
      "#FF3366",
      "#FF3399",
      "#FF33CC",
      "#FF33FF",
      "#FF6600",
      "#FF6633",
      "#FF9900",
      "#FF9933",
      "#FFCC00",
      "#FFCC33"
    ];
    function r() {
      if (typeof window < "u" && window.process && (window.process.type === "renderer" || window.process.__nwjs))
        return !0;
      if (typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))
        return !1;
      let l;
      return typeof document < "u" && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773
      typeof window < "u" && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?
      // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
      typeof navigator < "u" && navigator.userAgent && (l = navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)) && parseInt(l[1], 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker
      typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);
    }
    function n(l) {
      if (l[0] = (this.useColors ? "%c" : "") + this.namespace + (this.useColors ? " %c" : " ") + l[0] + (this.useColors ? "%c " : " ") + "+" + e.exports.humanize(this.diff), !this.useColors)
        return;
      const c = "color: " + this.color;
      l.splice(1, 0, c, "color: inherit");
      let u = 0, d = 0;
      l[0].replace(/%[a-zA-Z%]/g, (h) => {
        h !== "%%" && (u++, h === "%c" && (d = u));
      }), l.splice(d, 0, c);
    }
    t.log = console.debug || console.log || (() => {
    });
    function o(l) {
      try {
        l ? t.storage.setItem("debug", l) : t.storage.removeItem("debug");
      } catch {
      }
    }
    function i() {
      let l;
      try {
        l = t.storage.getItem("debug") || t.storage.getItem("DEBUG");
      } catch {
      }
      return !l && typeof process < "u" && "env" in process && (l = process.env.DEBUG), l;
    }
    function a() {
      try {
        return localStorage;
      } catch {
      }
    }
    e.exports = yT()(t);
    const { formatters: s } = e.exports;
    s.j = function(l) {
      try {
        return JSON.stringify(l);
      } catch (c) {
        return "[UnexpectedJSONParseError]: " + c.message;
      }
    };
  }(ys, ys.exports)), ys.exports;
}
var wT = bT();
const ST = /* @__PURE__ */ Td(wT), Co = "@veltix/pusher", CT = {
  JOB: `${Co}:job`,
  TIMER: `${Co}:timer`,
  SCHEDULER: `${Co}:scheduler`,
  SOCKET: `${Co}:socket`,
  API: `${Co}:api`,
  DB: `${Co}:db`
}, yf = (e) => ST(CT[e]);
yf("JOB");
yf("TIMER");
yf("SCHEDULER");
var Ql = "Switch", [ET, xF] = Gt(Ql), [_T, NT] = ET(Ql), w1 = C.forwardRef(
  (e, t) => {
    const {
      __scopeSwitch: r,
      name: n,
      checked: o,
      defaultChecked: i,
      required: a,
      disabled: s,
      value: l = "on",
      onCheckedChange: c,
      form: u,
      ...d
    } = e, [h, p] = C.useState(null), g = _e(t, (b) => p(b)), v = C.useRef(!1), m = h ? u || !!h.closest("form") : !0, [x, y] = Sr({
      prop: o,
      defaultProp: i ?? !1,
      onChange: c,
      caller: Ql
    });
    return /* @__PURE__ */ f.jsxs(_T, { scope: r, checked: x, disabled: s, children: [
      /* @__PURE__ */ f.jsx(
        me.button,
        {
          type: "button",
          role: "switch",
          "aria-checked": x,
          "aria-required": a,
          "data-state": _1(x),
          "data-disabled": s ? "" : void 0,
          disabled: s,
          value: l,
          ...d,
          ref: g,
          onClick: ue(e.onClick, (b) => {
            y((w) => !w), m && (v.current = b.isPropagationStopped(), v.current || b.stopPropagation());
          })
        }
      ),
      m && /* @__PURE__ */ f.jsx(
        E1,
        {
          control: h,
          bubbles: !v.current,
          name: n,
          value: l,
          checked: x,
          required: a,
          disabled: s,
          form: u,
          style: { transform: "translateX(-100%)" }
        }
      )
    ] });
  }
);
w1.displayName = Ql;
var S1 = "SwitchThumb", C1 = C.forwardRef(
  (e, t) => {
    const { __scopeSwitch: r, ...n } = e, o = NT(S1, r);
    return /* @__PURE__ */ f.jsx(
      me.span,
      {
        "data-state": _1(o.checked),
        "data-disabled": o.disabled ? "" : void 0,
        ...n,
        ref: t
      }
    );
  }
);
C1.displayName = S1;
var DT = "SwitchBubbleInput", E1 = C.forwardRef(
  ({
    __scopeSwitch: e,
    control: t,
    checked: r,
    bubbles: n = !0,
    ...o
  }, i) => {
    const a = C.useRef(null), s = _e(a, i), l = Ul(r), c = Ll(t);
    return C.useEffect(() => {
      const u = a.current;
      if (!u) return;
      const d = window.HTMLInputElement.prototype, p = Object.getOwnPropertyDescriptor(
        d,
        "checked"
      ).set;
      if (l !== r && p) {
        const g = new Event("click", { bubbles: n });
        p.call(u, r), u.dispatchEvent(g);
      }
    }, [l, r, n]), /* @__PURE__ */ f.jsx(
      "input",
      {
        type: "checkbox",
        "aria-hidden": !0,
        defaultChecked: r,
        ...o,
        tabIndex: -1,
        ref: s,
        style: {
          ...o.style,
          ...c,
          position: "absolute",
          pointerEvents: "none",
          opacity: 0,
          margin: 0
        }
      }
    );
  }
);
E1.displayName = DT;
function _1(e) {
  return e ? "checked" : "unchecked";
}
var RT = w1, MT = C1;
function bn({
  className: e,
  ...t
}) {
  return /* @__PURE__ */ f.jsx(
    RT,
    {
      "data-slot": "switch",
      className: Ee(
        "peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
        e
      ),
      ...t,
      children: /* @__PURE__ */ f.jsx(
        MT,
        {
          "data-slot": "switch-thumb",
          className: Ee(
            "bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"
          )
        }
      )
    }
  );
}
function TT() {
  const e = ke(), t = br(), { selectedDoc: r, selectedNodes: n } = Yt().getCurrentSelection(), o = n[0];
  if (o?.type) {
    const i = t.get(o?.type);
    if (o)
      return i?.dataConfigSchema ? /* @__PURE__ */ f.jsx(
        bM,
        {
          initialValues: o.dataConfig,
          schema: i.dataConfigSchema,
          onConfigChange: (a) => {
            console.log("update data binding", a), e.updateNode(r.id, o.id, { dataConfig: a });
          }
        },
        o.id
      ) : /* @__PURE__ */ f.jsxs("div", { className: "flex flex-col items-center justify-center p-8 text-center", children: [
        /* @__PURE__ */ f.jsx("div", { className: "mb-4 p-3 rounded-full bg-muted/50", children: /* @__PURE__ */ f.jsx(ci, { className: "h-6 w-6 text-muted-foreground" }) }),
        /* @__PURE__ */ f.jsx("h3", { className: "text-sm font-medium text-foreground mb-2", children: "No Configuration Available" }),
        /* @__PURE__ */ f.jsx("p", { className: "text-xs text-muted-foreground max-w-sm leading-relaxed", children: "This component type doesn't support data configuration. Select a different component or check the component documentation." })
      ] });
  }
  return null;
}
const jT = [
  { name: "Fade In", type: "animate", config: { from: { opacity: 0 }, to: { opacity: 1 } } },
  { name: "Slide In", type: "animate", config: { from: { x: -50 }, to: { x: 0 } } },
  { name: "Scale Up", type: "animate", config: { from: { scale: 0.8 }, to: { scale: 1 } } },
  { name: "Bounce", type: "animate", config: { from: { y: 0 }, to: { y: -20 } } },
  { name: "Rotate", type: "animate", config: { from: { rotate: 0 }, to: { rotate: 360 } } },
  { name: "Blur", type: "filter", config: { blur: 5 } },
  { name: "Glow", type: "filter", config: { glow: 10 } },
  { name: "Brightness", type: "filter", config: { brightness: 150 } },
  { name: "Particles", type: "particle", config: { count: 20, size: 2 } }
], Gp = {
  effects: [],
  selectedEffectId: null,
  previewingEffectId: null,
  globalPreview: !1,
  expandedSections: /* @__PURE__ */ new Set(["basic"])
}, Xr = Mr()(
  eC(
    (e, t) => ({
      ...Gp,
      addEffect: (r) => {
        if ("id" in r && r.id) {
          const n = r;
          e((o) => ({
            effects: [...o.effects, n],
            selectedEffectId: n.id
          }));
        } else {
          const n = r, o = {
            id: `effect_${Date.now()}`,
            type: n.type,
            name: n.name,
            enabled: !0,
            duration: 1e3,
            delay: 0,
            easing: "ease-in-out",
            loop: !1,
            config: n.config
          };
          e((i) => ({
            effects: [...i.effects, o],
            selectedEffectId: o.id
          }));
        }
      },
      initializeEffects: (r) => {
        e({ effects: r });
      },
      updateEffect: (r, n) => {
        e((o) => ({
          effects: o.effects.map(
            (i) => i.id === r ? { ...i, ...n } : i
          )
        }));
      },
      deleteEffect: (r) => {
        e((n) => ({
          effects: n.effects.filter((o) => o.id !== r),
          selectedEffectId: n.selectedEffectId === r ? null : n.selectedEffectId,
          previewingEffectId: n.previewingEffectId === r ? null : n.previewingEffectId
        }));
      },
      setSelectedEffect: (r) => {
        e({ selectedEffectId: r });
      },
      setPreviewingEffect: (r) => {
        e({ previewingEffectId: r });
      },
      toggleEffectPreview: (r) => {
        e((n) => ({
          previewingEffectId: n.previewingEffectId === r ? null : r,
          globalPreview: !1
        }));
      },
      toggleGlobalPreview: () => {
        e((r) => ({
          globalPreview: !r.globalPreview,
          previewingEffectId: r.globalPreview ? r.previewingEffectId : null
        }));
      },
      toggleSection: (r) => {
        e((n) => {
          const o = new Set(n.expandedSections);
          return o.has(r) ? o.delete(r) : o.add(r), { expandedSections: o };
        });
      },
      resetState: () => {
        e(Gp);
      },
      getSelectedEffect: () => {
        const r = t();
        return r.effects.find((n) => n.id === r.selectedEffectId) || null;
      },
      getPreviewingEffect: () => {
        const r = t();
        return r.effects.find((n) => n.id === r.previewingEffectId) || null;
      },
      getPresets: () => jT
    }),
    {
      name: "effects-config-store"
    }
  )
);
function kT() {
  const { effects: e, previewingEffectId: t, setPreviewingEffect: r } = Xr();
  ze(() => {
    if (t) {
      const n = e.find((o) => o.id === t);
      if (n) {
        const o = setTimeout(() => {
          r(null);
        }, n.duration + n.delay);
        return () => clearTimeout(o);
      }
    }
  }, [t, e, r]);
}
function PT() {
  const { globalPreview: e, toggleGlobalPreview: t, effects: r } = Xr();
  return /* @__PURE__ */ f.jsx("div", { className: "p-3 py-2 border-b", children: /* @__PURE__ */ f.jsxs("div", { className: "flex items-center justify-between", children: [
    /* @__PURE__ */ f.jsx("div", { children: /* @__PURE__ */ f.jsx("h3", { className: "font-medium text-sm", children: "Node Effects" }) }),
    /* @__PURE__ */ f.jsx(
      Fe,
      {
        variant: e ? "destructive" : "outline",
        className: "w-7 h-7",
        onClick: t,
        disabled: r.length === 0,
        title: r.length === 0 ? "No effects to preview" : "Toggle global preview",
        children: e ? /* @__PURE__ */ f.jsx(Ng, { className: "!w-4 !h-4" }) : /* @__PURE__ */ f.jsx(Zn, { className: "!w-4 !h-4" })
      }
    )
  ] }) });
}
const AT = zd(
  "inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",
  {
    variants: {
      variant: {
        default: "border-transparent bg-primary text-primary-foreground hover:bg-primary/80",
        secondary: "border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",
        destructive: "border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",
        outline: "text-foreground"
      }
    },
    defaultVariants: {
      variant: "default"
    }
  }
);
function pa({ className: e, variant: t, ...r }) {
  return /* @__PURE__ */ f.jsx("div", { className: Ee(AT({ variant: t }), e), ...r });
}
function OT() {
  const { getSelectedEffect: e, updateEffect: t } = Xr(), r = e();
  return r ? /* @__PURE__ */ f.jsx(f.Fragment, { children: /* @__PURE__ */ f.jsxs("div", { className: "space-y-3 mt-2", children: [
    /* @__PURE__ */ f.jsxs("div", { children: [
      /* @__PURE__ */ f.jsx(Te, { className: "text-xs", children: "Name" }),
      /* @__PURE__ */ f.jsx(
        We,
        {
          value: r.name,
          onChange: (n) => t(r.id, { name: n.target.value }),
          className: "h-7 text-xs mt-1"
        }
      )
    ] }),
    /* @__PURE__ */ f.jsxs("div", { className: "grid grid-cols-2 gap-2", children: [
      /* @__PURE__ */ f.jsxs("div", { children: [
        /* @__PURE__ */ f.jsx(Te, { className: "text-xs", children: "Duration (ms)" }),
        /* @__PURE__ */ f.jsx(
          We,
          {
            type: "number",
            value: r.duration,
            onChange: (n) => t(r.id, { duration: Number.parseInt(n.target.value) }),
            className: "h-7 text-xs mt-1"
          }
        )
      ] }),
      /* @__PURE__ */ f.jsxs("div", { children: [
        /* @__PURE__ */ f.jsx(Te, { className: "text-xs", children: "Delay (ms)" }),
        /* @__PURE__ */ f.jsx(
          We,
          {
            type: "number",
            value: r.delay,
            onChange: (n) => t(r.id, { delay: Number.parseInt(n.target.value) }),
            className: "h-7 text-xs mt-1"
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ f.jsxs("div", { className: "flex items-center space-x-2", children: [
      /* @__PURE__ */ f.jsx(
        bn,
        {
          id: "loop",
          checked: r.loop,
          onCheckedChange: (n) => t(r.id, { loop: n }),
          className: "scale-75"
        }
      ),
      /* @__PURE__ */ f.jsx(Te, { htmlFor: "loop", className: "text-xs", children: "Loop Animation" })
    ] })
  ] }) }) : null;
}
var N1 = ["PageUp", "PageDown"], D1 = ["ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight"], R1 = {
  "from-left": ["Home", "PageDown", "ArrowDown", "ArrowLeft"],
  "from-right": ["Home", "PageDown", "ArrowDown", "ArrowRight"],
  "from-bottom": ["Home", "PageDown", "ArrowDown", "ArrowLeft"],
  "from-top": ["Home", "PageDown", "ArrowUp", "ArrowLeft"]
}, yi = "Slider", [zu, IT, FT] = $l(yi), [M1, yF] = Gt(yi, [
  FT
]), [LT, Jl] = M1(yi), T1 = C.forwardRef(
  (e, t) => {
    const {
      name: r,
      min: n = 0,
      max: o = 100,
      step: i = 1,
      orientation: a = "horizontal",
      disabled: s = !1,
      minStepsBetweenThumbs: l = 0,
      defaultValue: c = [n],
      value: u,
      onValueChange: d = () => {
      },
      onValueCommit: h = () => {
      },
      inverted: p = !1,
      form: g,
      ...v
    } = e, m = C.useRef(/* @__PURE__ */ new Set()), x = C.useRef(0), b = a === "horizontal" ? BT : zT, [w = [], _] = Sr({
      prop: u,
      defaultProp: c,
      onChange: ($) => {
        [...m.current][x.current]?.focus(), d($);
      }
    }), R = C.useRef(w);
    function T($) {
      const F = HT(w, $);
      A($, F);
    }
    function k($) {
      A($, x.current);
    }
    function j() {
      const $ = R.current[x.current];
      w[x.current] !== $ && h(w);
    }
    function A($, F, { commit: L } = { commit: !1 }) {
      const P = XT(i), O = KT(Math.round(($ - n) / i) * i + n, P), I = ha(O, [n, o]);
      _((E = []) => {
        const S = VT(E, I, F);
        if (qT(S, l * i)) {
          x.current = S.indexOf(I);
          const M = String(S) !== String(E);
          return M && L && h(S), M ? S : E;
        } else
          return E;
      });
    }
    return /* @__PURE__ */ f.jsx(
      LT,
      {
        scope: e.__scopeSlider,
        name: r,
        disabled: s,
        min: n,
        max: o,
        valueIndexToChangeRef: x,
        thumbs: m.current,
        values: w,
        orientation: a,
        form: g,
        children: /* @__PURE__ */ f.jsx(zu.Provider, { scope: e.__scopeSlider, children: /* @__PURE__ */ f.jsx(zu.Slot, { scope: e.__scopeSlider, children: /* @__PURE__ */ f.jsx(
          b,
          {
            "aria-disabled": s,
            "data-disabled": s ? "" : void 0,
            ...v,
            ref: t,
            onPointerDown: ue(v.onPointerDown, () => {
              s || (R.current = w);
            }),
            min: n,
            max: o,
            inverted: p,
            onSlideStart: s ? void 0 : T,
            onSlideMove: s ? void 0 : k,
            onSlideEnd: s ? void 0 : j,
            onHomeKeyDown: () => !s && A(n, 0, { commit: !0 }),
            onEndKeyDown: () => !s && A(o, w.length - 1, { commit: !0 }),
            onStepKeyDown: ({ event: $, direction: F }) => {
              if (!s) {
                const O = N1.includes($.key) || $.shiftKey && D1.includes($.key) ? 10 : 1, I = x.current, E = w[I], S = i * O * F;
                A(E + S, I, { commit: !0 });
              }
            }
          }
        ) }) })
      }
    );
  }
);
T1.displayName = yi;
var [j1, k1] = M1(yi, {
  startEdge: "left",
  endEdge: "right",
  size: "width",
  direction: 1
}), BT = C.forwardRef(
  (e, t) => {
    const {
      min: r,
      max: n,
      dir: o,
      inverted: i,
      onSlideStart: a,
      onSlideMove: s,
      onSlideEnd: l,
      onStepKeyDown: c,
      ...u
    } = e, [d, h] = C.useState(null), p = _e(t, (b) => h(b)), g = C.useRef(void 0), v = vi(o), m = v === "ltr", x = m && !i || !m && i;
    function y(b) {
      const w = g.current || d.getBoundingClientRect(), _ = [0, w.width], T = bf(_, x ? [r, n] : [n, r]);
      return g.current = w, T(b - w.left);
    }
    return /* @__PURE__ */ f.jsx(
      j1,
      {
        scope: e.__scopeSlider,
        startEdge: x ? "left" : "right",
        endEdge: x ? "right" : "left",
        direction: x ? 1 : -1,
        size: "width",
        children: /* @__PURE__ */ f.jsx(
          P1,
          {
            dir: v,
            "data-orientation": "horizontal",
            ...u,
            ref: p,
            style: {
              ...u.style,
              "--radix-slider-thumb-transform": "translateX(-50%)"
            },
            onSlideStart: (b) => {
              const w = y(b.clientX);
              a?.(w);
            },
            onSlideMove: (b) => {
              const w = y(b.clientX);
              s?.(w);
            },
            onSlideEnd: () => {
              g.current = void 0, l?.();
            },
            onStepKeyDown: (b) => {
              const _ = R1[x ? "from-left" : "from-right"].includes(b.key);
              c?.({ event: b, direction: _ ? -1 : 1 });
            }
          }
        )
      }
    );
  }
), zT = C.forwardRef(
  (e, t) => {
    const {
      min: r,
      max: n,
      inverted: o,
      onSlideStart: i,
      onSlideMove: a,
      onSlideEnd: s,
      onStepKeyDown: l,
      ...c
    } = e, u = C.useRef(null), d = _e(t, u), h = C.useRef(void 0), p = !o;
    function g(v) {
      const m = h.current || u.current.getBoundingClientRect(), x = [0, m.height], b = bf(x, p ? [n, r] : [r, n]);
      return h.current = m, b(v - m.top);
    }
    return /* @__PURE__ */ f.jsx(
      j1,
      {
        scope: e.__scopeSlider,
        startEdge: p ? "bottom" : "top",
        endEdge: p ? "top" : "bottom",
        size: "height",
        direction: p ? 1 : -1,
        children: /* @__PURE__ */ f.jsx(
          P1,
          {
            "data-orientation": "vertical",
            ...c,
            ref: d,
            style: {
              ...c.style,
              "--radix-slider-thumb-transform": "translateY(50%)"
            },
            onSlideStart: (v) => {
              const m = g(v.clientY);
              i?.(m);
            },
            onSlideMove: (v) => {
              const m = g(v.clientY);
              a?.(m);
            },
            onSlideEnd: () => {
              h.current = void 0, s?.();
            },
            onStepKeyDown: (v) => {
              const x = R1[p ? "from-bottom" : "from-top"].includes(v.key);
              l?.({ event: v, direction: x ? -1 : 1 });
            }
          }
        )
      }
    );
  }
), P1 = C.forwardRef(
  (e, t) => {
    const {
      __scopeSlider: r,
      onSlideStart: n,
      onSlideMove: o,
      onSlideEnd: i,
      onHomeKeyDown: a,
      onEndKeyDown: s,
      onStepKeyDown: l,
      ...c
    } = e, u = Jl(yi, r);
    return /* @__PURE__ */ f.jsx(
      me.span,
      {
        ...c,
        ref: t,
        onKeyDown: ue(e.onKeyDown, (d) => {
          d.key === "Home" ? (a(d), d.preventDefault()) : d.key === "End" ? (s(d), d.preventDefault()) : N1.concat(D1).includes(d.key) && (l(d), d.preventDefault());
        }),
        onPointerDown: ue(e.onPointerDown, (d) => {
          const h = d.target;
          h.setPointerCapture(d.pointerId), d.preventDefault(), u.thumbs.has(h) ? h.focus() : n(d);
        }),
        onPointerMove: ue(e.onPointerMove, (d) => {
          d.target.hasPointerCapture(d.pointerId) && o(d);
        }),
        onPointerUp: ue(e.onPointerUp, (d) => {
          const h = d.target;
          h.hasPointerCapture(d.pointerId) && (h.releasePointerCapture(d.pointerId), i(d));
        })
      }
    );
  }
), A1 = "SliderTrack", O1 = C.forwardRef(
  (e, t) => {
    const { __scopeSlider: r, ...n } = e, o = Jl(A1, r);
    return /* @__PURE__ */ f.jsx(
      me.span,
      {
        "data-disabled": o.disabled ? "" : void 0,
        "data-orientation": o.orientation,
        ...n,
        ref: t
      }
    );
  }
);
O1.displayName = A1;
var $u = "SliderRange", I1 = C.forwardRef(
  (e, t) => {
    const { __scopeSlider: r, ...n } = e, o = Jl($u, r), i = k1($u, r), a = C.useRef(null), s = _e(t, a), l = o.values.length, c = o.values.map(
      (h) => B1(h, o.min, o.max)
    ), u = l > 1 ? Math.min(...c) : 0, d = 100 - Math.max(...c);
    return /* @__PURE__ */ f.jsx(
      me.span,
      {
        "data-orientation": o.orientation,
        "data-disabled": o.disabled ? "" : void 0,
        ...n,
        ref: s,
        style: {
          ...e.style,
          [i.startEdge]: u + "%",
          [i.endEdge]: d + "%"
        }
      }
    );
  }
);
I1.displayName = $u;
var Gu = "SliderThumb", F1 = C.forwardRef(
  (e, t) => {
    const r = IT(e.__scopeSlider), [n, o] = C.useState(null), i = _e(t, (s) => o(s)), a = C.useMemo(
      () => n ? r().findIndex((s) => s.ref.current === n) : -1,
      [r, n]
    );
    return /* @__PURE__ */ f.jsx($T, { ...e, ref: i, index: a });
  }
), $T = C.forwardRef(
  (e, t) => {
    const { __scopeSlider: r, index: n, name: o, ...i } = e, a = Jl(Gu, r), s = k1(Gu, r), [l, c] = C.useState(null), u = _e(t, (y) => c(y)), d = l ? a.form || !!l.closest("form") : !0, h = Ll(l), p = a.values[n], g = p === void 0 ? 0 : B1(p, a.min, a.max), v = UT(n, a.values.length), m = h?.[s.size], x = m ? WT(m, g, s.direction) : 0;
    return C.useEffect(() => {
      if (l)
        return a.thumbs.add(l), () => {
          a.thumbs.delete(l);
        };
    }, [l, a.thumbs]), /* @__PURE__ */ f.jsxs(
      "span",
      {
        style: {
          transform: "var(--radix-slider-thumb-transform)",
          position: "absolute",
          [s.startEdge]: `calc(${g}% + ${x}px)`
        },
        children: [
          /* @__PURE__ */ f.jsx(zu.ItemSlot, { scope: e.__scopeSlider, children: /* @__PURE__ */ f.jsx(
            me.span,
            {
              role: "slider",
              "aria-label": e["aria-label"] || v,
              "aria-valuemin": a.min,
              "aria-valuenow": p,
              "aria-valuemax": a.max,
              "aria-orientation": a.orientation,
              "data-orientation": a.orientation,
              "data-disabled": a.disabled ? "" : void 0,
              tabIndex: a.disabled ? void 0 : 0,
              ...i,
              ref: u,
              style: p === void 0 ? { display: "none" } : e.style,
              onFocus: ue(e.onFocus, () => {
                a.valueIndexToChangeRef.current = n;
              })
            }
          ) }),
          d && /* @__PURE__ */ f.jsx(
            L1,
            {
              name: o ?? (a.name ? a.name + (a.values.length > 1 ? "[]" : "") : void 0),
              form: a.form,
              value: p
            },
            n
          )
        ]
      }
    );
  }
);
F1.displayName = Gu;
var GT = "RadioBubbleInput", L1 = C.forwardRef(
  ({ __scopeSlider: e, value: t, ...r }, n) => {
    const o = C.useRef(null), i = _e(o, n), a = Ul(t);
    return C.useEffect(() => {
      const s = o.current;
      if (!s) return;
      const l = window.HTMLInputElement.prototype, u = Object.getOwnPropertyDescriptor(l, "value").set;
      if (a !== t && u) {
        const d = new Event("input", { bubbles: !0 });
        u.call(s, t), s.dispatchEvent(d);
      }
    }, [a, t]), /* @__PURE__ */ f.jsx(
      me.input,
      {
        style: { display: "none" },
        ...r,
        ref: i,
        defaultValue: t
      }
    );
  }
);
L1.displayName = GT;
function VT(e = [], t, r) {
  const n = [...e];
  return n[r] = t, n.sort((o, i) => o - i);
}
function B1(e, t, r) {
  const i = 100 / (r - t) * (e - t);
  return ha(i, [0, 100]);
}
function UT(e, t) {
  return t > 2 ? `Value ${e + 1} of ${t}` : t === 2 ? ["Minimum", "Maximum"][e] : void 0;
}
function HT(e, t) {
  if (e.length === 1) return 0;
  const r = e.map((o) => Math.abs(o - t)), n = Math.min(...r);
  return r.indexOf(n);
}
function WT(e, t, r) {
  const n = e / 2, i = bf([0, 50], [0, n]);
  return (n - i(t) * r) * r;
}
function YT(e) {
  return e.slice(0, -1).map((t, r) => e[r + 1] - t);
}
function qT(e, t) {
  if (t > 0) {
    const r = YT(e);
    return Math.min(...r) >= t;
  }
  return !0;
}
function bf(e, t) {
  return (r) => {
    if (e[0] === e[1] || t[0] === t[1]) return t[0];
    const n = (t[1] - t[0]) / (e[1] - e[0]);
    return t[0] + n * (r - e[0]);
  };
}
function XT(e) {
  return (String(e).split(".")[1] || "").length;
}
function KT(e, t) {
  const r = Math.pow(10, t);
  return Math.round(e * r) / r;
}
var ZT = T1, QT = O1, JT = I1, ej = F1;
function wn({
  className: e,
  defaultValue: t,
  value: r,
  min: n = 0,
  max: o = 100,
  ...i
}) {
  const a = C.useMemo(
    () => Array.isArray(r) ? r : Array.isArray(t) ? t : [n, o],
    [r, t, n, o]
  );
  return /* @__PURE__ */ f.jsxs(
    ZT,
    {
      "data-slot": "slider",
      defaultValue: t,
      value: r,
      min: n,
      max: o,
      className: Ee(
        "relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",
        e
      ),
      ...i,
      children: [
        /* @__PURE__ */ f.jsx(
          QT,
          {
            "data-slot": "slider-track",
            className: Ee(
              "bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"
            ),
            children: /* @__PURE__ */ f.jsx(
              JT,
              {
                "data-slot": "slider-range",
                className: Ee(
                  "bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full"
                )
              }
            )
          }
        ),
        Array.from({ length: a.length }, (s, l) => /* @__PURE__ */ f.jsx(
          ej,
          {
            "data-slot": "slider-thumb",
            className: "border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"
          },
          l
        ))
      ]
    }
  );
}
function tj() {
  const { expandedSections: e, toggleSection: t, getSelectedEffect: r, updateEffect: n } = Xr(), o = r();
  return !o || o.type !== "filter" ? null : /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
    /* @__PURE__ */ f.jsxs("div", { className: "flex items-center justify-between cursor-pointer", onClick: () => t("filter"), children: [
      /* @__PURE__ */ f.jsx(Te, { className: "text-xs font-medium", children: "Filter Settings" }),
      e.has("filter") ? /* @__PURE__ */ f.jsx(kn, { className: "w-3 h-3" }) : /* @__PURE__ */ f.jsx(ho, { className: "w-3 h-3" })
    ] }),
    e.has("filter") && /* @__PURE__ */ f.jsxs("div", { className: "space-y-2 mt-2", children: [
      o.config.blur !== void 0 && /* @__PURE__ */ f.jsxs("div", { children: [
        /* @__PURE__ */ f.jsxs(Te, { className: "text-xs", children: [
          "Blur: ",
          o.config.blur,
          "px"
        ] }),
        /* @__PURE__ */ f.jsx(
          wn,
          {
            value: [o.config.blur],
            onValueChange: ([i]) => n(o.id, {
              config: { ...o.config, blur: i }
            }),
            max: 20,
            min: 0,
            step: 1,
            className: "mt-1"
          }
        )
      ] }),
      o.config.glow !== void 0 && /* @__PURE__ */ f.jsxs("div", { children: [
        /* @__PURE__ */ f.jsxs(Te, { className: "text-xs", children: [
          "Glow: ",
          o.config.glow,
          "px"
        ] }),
        /* @__PURE__ */ f.jsx(
          wn,
          {
            value: [o.config.glow],
            onValueChange: ([i]) => n(o.id, {
              config: { ...o.config, glow: i }
            }),
            max: 30,
            min: 0,
            step: 1,
            className: "mt-1"
          }
        )
      ] }),
      o.config.brightness !== void 0 && /* @__PURE__ */ f.jsxs("div", { children: [
        /* @__PURE__ */ f.jsxs(Te, { className: "text-xs", children: [
          "Brightness: ",
          o.config.brightness,
          "%"
        ] }),
        /* @__PURE__ */ f.jsx(
          wn,
          {
            value: [o.config.brightness],
            onValueChange: ([i]) => n(o.id, {
              config: { ...o.config, brightness: i }
            }),
            max: 200,
            min: 50,
            step: 5,
            className: "mt-1"
          }
        )
      ] })
    ] })
  ] });
}
function rj() {
  const { expandedSections: e, toggleSection: t, getSelectedEffect: r, updateEffect: n } = Xr(), o = r();
  return !o || o.type !== "particle" ? null : /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
    /* @__PURE__ */ f.jsxs("div", { className: "flex items-center justify-between cursor-pointer", onClick: () => t("particle"), children: [
      /* @__PURE__ */ f.jsx(Te, { className: "text-xs font-medium", children: "Particle Settings" }),
      e.has("particle") ? /* @__PURE__ */ f.jsx(kn, { className: "w-3 h-3" }) : /* @__PURE__ */ f.jsx(ho, { className: "w-3 h-3" })
    ] }),
    e.has("particle") && /* @__PURE__ */ f.jsxs("div", { className: "space-y-2 mt-2", children: [
      /* @__PURE__ */ f.jsxs("div", { children: [
        /* @__PURE__ */ f.jsxs(Te, { className: "text-xs", children: [
          "Count: ",
          o.config.count
        ] }),
        /* @__PURE__ */ f.jsx(
          wn,
          {
            value: [o.config.count],
            onValueChange: ([i]) => n(o.id, {
              config: { ...o.config, count: i }
            }),
            max: 100,
            min: 1,
            step: 1,
            className: "mt-1"
          }
        )
      ] }),
      /* @__PURE__ */ f.jsxs("div", { children: [
        /* @__PURE__ */ f.jsxs(Te, { className: "text-xs", children: [
          "Size: ",
          o.config.size,
          "px"
        ] }),
        /* @__PURE__ */ f.jsx(
          wn,
          {
            value: [o.config.size],
            onValueChange: ([i]) => n(o.id, {
              config: { ...o.config, size: i }
            }),
            max: 10,
            min: 1,
            step: 1,
            className: "mt-1"
          }
        )
      ] })
    ] })
  ] });
}
function nj() {
  const { getSelectedEffect: e } = Xr();
  return e() ? /* @__PURE__ */ f.jsx(f.Fragment, { children: /* @__PURE__ */ f.jsxs("div", { className: "space-y-3", children: [
    /* @__PURE__ */ f.jsx(OT, {}),
    /* @__PURE__ */ f.jsx(tj, {}),
    /* @__PURE__ */ f.jsx(rj, {})
  ] }) }) : null;
}
function oj() {
  const {
    effects: e,
    selectedEffectId: t,
    previewingEffectId: r,
    setSelectedEffect: n,
    toggleEffectPreview: o,
    updateEffect: i,
    deleteEffect: a
  } = Xr(), s = (l) => ({
    animate: /* @__PURE__ */ f.jsx(Nl, { className: "w-3 h-3" }),
    filter: /* @__PURE__ */ f.jsx(xg, { className: "w-3 h-3" }),
    particle: /* @__PURE__ */ f.jsx(la, { className: "w-3 h-3" }),
    transition: /* @__PURE__ */ f.jsx(Fd, { className: "w-3 h-3" })
  })[l] || /* @__PURE__ */ f.jsx(ci, { className: "w-3 h-3" });
  return e.length === 0 ? /* @__PURE__ */ f.jsx("div", { className: "p-3", children: /* @__PURE__ */ f.jsx("p", { className: "text-xs text-gray-400 text-center py-4", children: "No effects added" }) }) : /* @__PURE__ */ f.jsx("div", { className: "p-3 space-y-2", children: e.map((l, c) => /* @__PURE__ */ f.jsxs("div", { children: [
    /* @__PURE__ */ f.jsxs(
      "div",
      {
        className: `flex items-center justify-between p-2 rounded border text-xs transition-all ${t === l.id ? "bg-blue-50 border-blue-200" : r === l.id ? "bg-green-50 border-green-200" : "bg-gray-50 border-gray-200 hover:bg-gray-100"}`,
        onClick: () => n(l.id),
        children: [
          /* @__PURE__ */ f.jsxs("div", { className: "flex items-center space-x-2 flex-1 min-w-0", children: [
            s(l.type),
            /* @__PURE__ */ f.jsx("span", { className: "truncate", children: l.name }),
            /* @__PURE__ */ f.jsxs(pa, { variant: "secondary", className: "text-xs px-1 py-0", children: [
              l.duration,
              "ms"
            ] }),
            r === l.id && /* @__PURE__ */ f.jsx(pa, { variant: "default", className: "text-xs px-1 py-0 bg-green-500", children: "Playing" })
          ] }),
          /* @__PURE__ */ f.jsxs("div", { className: "flex items-center space-x-1", children: [
            /* @__PURE__ */ f.jsx(
              Fe,
              {
                variant: r === l.id ? "destructive" : "ghost",
                size: "sm",
                className: "h-6 w-6 p-0",
                onClick: (u) => {
                  u.stopPropagation(), o(l.id);
                },
                title: r === l.id ? "Stop Preview" : "Preview Effect",
                disabled: !l.enabled,
                children: r === l.id ? /* @__PURE__ */ f.jsx(Ng, { className: "w-3 h-3" }) : /* @__PURE__ */ f.jsx(Zn, { className: "w-3 h-3" })
              }
            ),
            /* @__PURE__ */ f.jsx(
              bn,
              {
                checked: l.enabled,
                onCheckedChange: (u) => i(l.id, { enabled: u }),
                className: "scale-75"
              }
            ),
            /* @__PURE__ */ f.jsx(
              Fe,
              {
                variant: "ghost",
                size: "sm",
                className: "h-6 w-6 p-0",
                onClick: (u) => {
                  u.stopPropagation(), a(l.id);
                },
                children: /* @__PURE__ */ f.jsx(Dl, { className: "w-3 h-3" })
              }
            )
          ] })
        ]
      }
    ),
    t === l.id && /* @__PURE__ */ f.jsx(nj, {})
  ] }, l.id)) });
}
var ij = "Separator", Vp = "horizontal", aj = ["horizontal", "vertical"], z1 = C.forwardRef((e, t) => {
  const { decorative: r, orientation: n = Vp, ...o } = e, i = sj(n) ? n : Vp, s = r ? { role: "none" } : { "aria-orientation": i === "vertical" ? i : void 0, role: "separator" };
  return /* @__PURE__ */ f.jsx(
    me.div,
    {
      "data-orientation": i,
      ...s,
      ...o,
      ref: t
    }
  );
});
z1.displayName = ij;
function sj(e) {
  return aj.includes(e);
}
var $1 = z1;
const oo = C.forwardRef(
  ({ className: e, orientation: t = "horizontal", decorative: r = !0, ...n }, o) => /* @__PURE__ */ f.jsx(
    $1,
    {
      ref: o,
      decorative: r,
      orientation: t,
      className: Ee(
        "shrink-0 bg-border",
        t === "horizontal" ? "h-[1px] w-full" : "h-full w-[1px]",
        e
      ),
      ...n
    }
  )
);
oo.displayName = $1.displayName;
function lj() {
  const { expandedSections: e, toggleSection: t, addEffect: r, getPresets: n } = Xr(), o = (i) => ({
    animate: /* @__PURE__ */ f.jsx(Nl, { className: "w-3 h-3" }),
    filter: /* @__PURE__ */ f.jsx(xg, { className: "w-3 h-3" }),
    particle: /* @__PURE__ */ f.jsx(la, { className: "w-3 h-3" }),
    transition: /* @__PURE__ */ f.jsx(Fd, { className: "w-3 h-3" })
  })[i] || /* @__PURE__ */ f.jsx(ci, { className: "w-3 h-3" });
  return /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
    /* @__PURE__ */ f.jsx(oo, {}),
    /* @__PURE__ */ f.jsxs("div", { className: "p-3", children: [
      /* @__PURE__ */ f.jsxs("div", { className: "flex items-center justify-between cursor-pointer", onClick: () => t("presets"), children: [
        /* @__PURE__ */ f.jsx(Te, { className: "text-xs font-medium", children: "Quick Add" }),
        e.has("presets") ? /* @__PURE__ */ f.jsx(kn, { className: "w-3 h-3" }) : /* @__PURE__ */ f.jsx(ho, { className: "w-3 h-3" })
      ] }),
      e.has("presets") && /* @__PURE__ */ f.jsx("div", { className: "grid grid-cols-3 gap-1 mt-2", children: n().map((i, a) => /* @__PURE__ */ f.jsxs(
        Fe,
        {
          variant: "outline",
          size: "sm",
          className: "h-8 text-xs p-1 bg-transparent",
          onClick: () => r(i),
          children: [
            o(i.type),
            /* @__PURE__ */ f.jsx("span", { className: "ml-1 truncate", children: i.name })
          ]
        },
        a
      )) })
    ] })
  ] });
}
function cj() {
  const { globalPreview: e, getPreviewingEffect: t, effects: r } = Xr(), n = t(), o = (i) => {
    switch (i.type) {
      case "animate":
        return i.config.from?.opacity !== void 0 ? "animate-pulse" : i.config.from?.x !== void 0 ? "animate-bounce" : i.config.from?.scale !== void 0 ? "animate-ping" : i.config.from?.y !== void 0 ? "animate-bounce" : i.config.from?.rotate !== void 0 ? "animate-spin" : "animate-pulse";
      case "filter":
        return "animate-pulse";
      case "particle":
        return "animate-bounce";
      default:
        return "animate-pulse";
    }
  };
  return /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
    /* @__PURE__ */ f.jsx(oo, {}),
    /* @__PURE__ */ f.jsx("div", { className: "p-3", children: /* @__PURE__ */ f.jsxs("div", { className: "h-20 bg-gradient-to-r from-blue-50 to-purple-50 rounded border-2 border-dashed border-gray-200 flex items-center justify-center relative overflow-hidden", children: [
      r.length === 0 ? /* @__PURE__ */ f.jsxs("div", { className: "flex flex-col items-center justify-center", children: [
        /* @__PURE__ */ f.jsx("div", { className: "w-8 h-8 bg-gray-300 rounded mb-2" }),
        /* @__PURE__ */ f.jsx("p", { className: "text-xs text-gray-400", children: "No effects to preview" })
      ] }) : /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
        /* @__PURE__ */ f.jsx(
          "div",
          {
            className: `w-8 h-8 bg-blue-500 rounded transition-all duration-1000 ${e ? "animate-pulse scale-110" : n ? o(n) : ""}`,
            style: {
              filter: n?.type === "filter" && n.config.blur ? `blur(${n.config.blur}px)` : n?.type === "filter" && n.config.brightness ? `brightness(${n.config.brightness}%)` : "none"
            }
          }
        ),
        (e || n?.type === "particle") && /* @__PURE__ */ f.jsx("div", { className: "absolute inset-0", children: Array.from({ length: n?.config.count || 8 }).map((i, a) => /* @__PURE__ */ f.jsx(
          "div",
          {
            className: "absolute bg-yellow-400 rounded-full animate-bounce",
            style: {
              width: `${n?.config.size || 1}px`,
              height: `${n?.config.size || 1}px`,
              left: `${Math.random() * 100}%`,
              top: `${Math.random() * 100}%`,
              animationDelay: `${Math.random() * 2}s`
            }
          },
          a
        )) })
      ] }),
      /* @__PURE__ */ f.jsx("div", { className: "absolute bottom-1 right-1 flex items-center justify-between", children: n && /* @__PURE__ */ f.jsx(pa, { variant: "outline", className: "text-xs", children: n.name }) })
    ] }) })
  ] });
}
function uj({ onChange: e, initialValues: t }) {
  const { effects: r, resetState: n, initializeEffects: o, setSelectedEffect: i, toggleSection: a } = Xr(), s = bt(!1), l = bt(r);
  kT(), ze(() => {
    t && !s.current && (s.current = !0, n(), t.effects && Array.isArray(t.effects) && t.effects.length > 0 && (o(t.effects), t.effects[0]?.id && i(t.effects[0].id)));
  }, [t, n, o, i]);
  const c = nr((u) => {
    e && e({ effects: u });
  }, [e]);
  return ze(() => {
    s.current && r !== l.current && (l.current = r, c(r));
  }, [r, c]), /* @__PURE__ */ f.jsxs("div", { className: "", children: [
    /* @__PURE__ */ f.jsx(PT, {}),
    /* @__PURE__ */ f.jsx(oj, {}),
    /* @__PURE__ */ f.jsx(lj, {}),
    /* @__PURE__ */ f.jsx(cj, {})
  ] });
}
function dj() {
  const e = ke(), t = Yt(), r = e.getNode(e.json?.docs[0].id, t.selectedNodes[0]);
  return /* @__PURE__ */ f.jsx(
    uj,
    {
      initialValues: r.effectConfig,
      onChange: (n) => {
        e.updateNode(e.json?.docs[0].id, r.id, { effectConfig: n });
      }
    }
  );
}
function fj(e, t) {
  return C.useReducer((r, n) => t[r][n] ?? r, e);
}
var wf = "ScrollArea", [G1, bF] = Gt(wf), [hj, dr] = G1(wf), V1 = C.forwardRef(
  (e, t) => {
    const {
      __scopeScrollArea: r,
      type: n = "hover",
      dir: o,
      scrollHideDelay: i = 600,
      ...a
    } = e, [s, l] = C.useState(null), [c, u] = C.useState(null), [d, h] = C.useState(null), [p, g] = C.useState(null), [v, m] = C.useState(null), [x, y] = C.useState(0), [b, w] = C.useState(0), [_, R] = C.useState(!1), [T, k] = C.useState(!1), j = _e(t, ($) => l($)), A = vi(o);
    return /* @__PURE__ */ f.jsx(
      hj,
      {
        scope: r,
        type: n,
        dir: A,
        scrollHideDelay: i,
        scrollArea: s,
        viewport: c,
        onViewportChange: u,
        content: d,
        onContentChange: h,
        scrollbarX: p,
        onScrollbarXChange: g,
        scrollbarXEnabled: _,
        onScrollbarXEnabledChange: R,
        scrollbarY: v,
        onScrollbarYChange: m,
        scrollbarYEnabled: T,
        onScrollbarYEnabledChange: k,
        onCornerWidthChange: y,
        onCornerHeightChange: w,
        children: /* @__PURE__ */ f.jsx(
          me.div,
          {
            dir: A,
            ...a,
            ref: j,
            style: {
              position: "relative",
              // Pass corner sizes as CSS vars to reduce re-renders of context consumers
              "--radix-scroll-area-corner-width": x + "px",
              "--radix-scroll-area-corner-height": b + "px",
              ...e.style
            }
          }
        )
      }
    );
  }
);
V1.displayName = wf;
var U1 = "ScrollAreaViewport", H1 = C.forwardRef(
  (e, t) => {
    const { __scopeScrollArea: r, children: n, nonce: o, ...i } = e, a = dr(U1, r), s = C.useRef(null), l = _e(t, s, a.onViewportChange);
    return /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
      /* @__PURE__ */ f.jsx(
        "style",
        {
          dangerouslySetInnerHTML: {
            __html: "[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"
          },
          nonce: o
        }
      ),
      /* @__PURE__ */ f.jsx(
        me.div,
        {
          "data-radix-scroll-area-viewport": "",
          ...i,
          ref: l,
          style: {
            /**
             * We don't support `visible` because the intention is to have at least one scrollbar
             * if this component is used and `visible` will behave like `auto` in that case
             * https://developer.mozilla.org/en-US/docs/Web/CSS/overflow#description
             *
             * We don't handle `auto` because the intention is for the native implementation
             * to be hidden if using this component. We just want to ensure the node is scrollable
             * so could have used either `scroll` or `auto` here. We picked `scroll` to prevent
             * the browser from having to work out whether to render native scrollbars or not,
             * we tell it to with the intention of hiding them in CSS.
             */
            overflowX: a.scrollbarXEnabled ? "scroll" : "hidden",
            overflowY: a.scrollbarYEnabled ? "scroll" : "hidden",
            ...e.style
          },
          children: /* @__PURE__ */ f.jsx("div", { ref: a.onContentChange, style: { minWidth: "100%", display: "table" }, children: n })
        }
      )
    ] });
  }
);
H1.displayName = U1;
var Kr = "ScrollAreaScrollbar", W1 = C.forwardRef(
  (e, t) => {
    const { forceMount: r, ...n } = e, o = dr(Kr, e.__scopeScrollArea), { onScrollbarXEnabledChange: i, onScrollbarYEnabledChange: a } = o, s = e.orientation === "horizontal";
    return C.useEffect(() => (s ? i(!0) : a(!0), () => {
      s ? i(!1) : a(!1);
    }), [s, i, a]), o.type === "hover" ? /* @__PURE__ */ f.jsx(pj, { ...n, ref: t, forceMount: r }) : o.type === "scroll" ? /* @__PURE__ */ f.jsx(vj, { ...n, ref: t, forceMount: r }) : o.type === "auto" ? /* @__PURE__ */ f.jsx(Y1, { ...n, ref: t, forceMount: r }) : o.type === "always" ? /* @__PURE__ */ f.jsx(Sf, { ...n, ref: t }) : null;
  }
);
W1.displayName = Kr;
var pj = C.forwardRef((e, t) => {
  const { forceMount: r, ...n } = e, o = dr(Kr, e.__scopeScrollArea), [i, a] = C.useState(!1);
  return C.useEffect(() => {
    const s = o.scrollArea;
    let l = 0;
    if (s) {
      const c = () => {
        window.clearTimeout(l), a(!0);
      }, u = () => {
        l = window.setTimeout(() => a(!1), o.scrollHideDelay);
      };
      return s.addEventListener("pointerenter", c), s.addEventListener("pointerleave", u), () => {
        window.clearTimeout(l), s.removeEventListener("pointerenter", c), s.removeEventListener("pointerleave", u);
      };
    }
  }, [o.scrollArea, o.scrollHideDelay]), /* @__PURE__ */ f.jsx(Nt, { present: r || i, children: /* @__PURE__ */ f.jsx(
    Y1,
    {
      "data-state": i ? "visible" : "hidden",
      ...n,
      ref: t
    }
  ) });
}), vj = C.forwardRef((e, t) => {
  const { forceMount: r, ...n } = e, o = dr(Kr, e.__scopeScrollArea), i = e.orientation === "horizontal", a = tc(() => l("SCROLL_END"), 100), [s, l] = fj("hidden", {
    hidden: {
      SCROLL: "scrolling"
    },
    scrolling: {
      SCROLL_END: "idle",
      POINTER_ENTER: "interacting"
    },
    interacting: {
      SCROLL: "interacting",
      POINTER_LEAVE: "idle"
    },
    idle: {
      HIDE: "hidden",
      SCROLL: "scrolling",
      POINTER_ENTER: "interacting"
    }
  });
  return C.useEffect(() => {
    if (s === "idle") {
      const c = window.setTimeout(() => l("HIDE"), o.scrollHideDelay);
      return () => window.clearTimeout(c);
    }
  }, [s, o.scrollHideDelay, l]), C.useEffect(() => {
    const c = o.viewport, u = i ? "scrollLeft" : "scrollTop";
    if (c) {
      let d = c[u];
      const h = () => {
        const p = c[u];
        d !== p && (l("SCROLL"), a()), d = p;
      };
      return c.addEventListener("scroll", h), () => c.removeEventListener("scroll", h);
    }
  }, [o.viewport, i, l, a]), /* @__PURE__ */ f.jsx(Nt, { present: r || s !== "hidden", children: /* @__PURE__ */ f.jsx(
    Sf,
    {
      "data-state": s === "hidden" ? "hidden" : "visible",
      ...n,
      ref: t,
      onPointerEnter: ue(e.onPointerEnter, () => l("POINTER_ENTER")),
      onPointerLeave: ue(e.onPointerLeave, () => l("POINTER_LEAVE"))
    }
  ) });
}), Y1 = C.forwardRef((e, t) => {
  const r = dr(Kr, e.__scopeScrollArea), { forceMount: n, ...o } = e, [i, a] = C.useState(!1), s = e.orientation === "horizontal", l = tc(() => {
    if (r.viewport) {
      const c = r.viewport.offsetWidth < r.viewport.scrollWidth, u = r.viewport.offsetHeight < r.viewport.scrollHeight;
      a(s ? c : u);
    }
  }, 10);
  return Ko(r.viewport, l), Ko(r.content, l), /* @__PURE__ */ f.jsx(Nt, { present: n || i, children: /* @__PURE__ */ f.jsx(
    Sf,
    {
      "data-state": i ? "visible" : "hidden",
      ...o,
      ref: t
    }
  ) });
}), Sf = C.forwardRef((e, t) => {
  const { orientation: r = "vertical", ...n } = e, o = dr(Kr, e.__scopeScrollArea), i = C.useRef(null), a = C.useRef(0), [s, l] = C.useState({
    content: 0,
    viewport: 0,
    scrollbar: { size: 0, paddingStart: 0, paddingEnd: 0 }
  }), c = Q1(s.viewport, s.content), u = {
    ...n,
    sizes: s,
    onSizesChange: l,
    hasThumb: c > 0 && c < 1,
    onThumbChange: (h) => i.current = h,
    onThumbPointerUp: () => a.current = 0,
    onThumbPointerDown: (h) => a.current = h
  };
  function d(h, p) {
    return wj(h, a.current, s, p);
  }
  return r === "horizontal" ? /* @__PURE__ */ f.jsx(
    gj,
    {
      ...u,
      ref: t,
      onThumbPositionChange: () => {
        if (o.viewport && i.current) {
          const h = o.viewport.scrollLeft, p = Up(h, s, o.dir);
          i.current.style.transform = `translate3d(${p}px, 0, 0)`;
        }
      },
      onWheelScroll: (h) => {
        o.viewport && (o.viewport.scrollLeft = h);
      },
      onDragScroll: (h) => {
        o.viewport && (o.viewport.scrollLeft = d(h, o.dir));
      }
    }
  ) : r === "vertical" ? /* @__PURE__ */ f.jsx(
    mj,
    {
      ...u,
      ref: t,
      onThumbPositionChange: () => {
        if (o.viewport && i.current) {
          const h = o.viewport.scrollTop, p = Up(h, s);
          i.current.style.transform = `translate3d(0, ${p}px, 0)`;
        }
      },
      onWheelScroll: (h) => {
        o.viewport && (o.viewport.scrollTop = h);
      },
      onDragScroll: (h) => {
        o.viewport && (o.viewport.scrollTop = d(h));
      }
    }
  ) : null;
}), gj = C.forwardRef((e, t) => {
  const { sizes: r, onSizesChange: n, ...o } = e, i = dr(Kr, e.__scopeScrollArea), [a, s] = C.useState(), l = C.useRef(null), c = _e(t, l, i.onScrollbarXChange);
  return C.useEffect(() => {
    l.current && s(getComputedStyle(l.current));
  }, [l]), /* @__PURE__ */ f.jsx(
    X1,
    {
      "data-orientation": "horizontal",
      ...o,
      ref: c,
      sizes: r,
      style: {
        bottom: 0,
        left: i.dir === "rtl" ? "var(--radix-scroll-area-corner-width)" : 0,
        right: i.dir === "ltr" ? "var(--radix-scroll-area-corner-width)" : 0,
        "--radix-scroll-area-thumb-width": ec(r) + "px",
        ...e.style
      },
      onThumbPointerDown: (u) => e.onThumbPointerDown(u.x),
      onDragScroll: (u) => e.onDragScroll(u.x),
      onWheelScroll: (u, d) => {
        if (i.viewport) {
          const h = i.viewport.scrollLeft + u.deltaX;
          e.onWheelScroll(h), ex(h, d) && u.preventDefault();
        }
      },
      onResize: () => {
        l.current && i.viewport && a && n({
          content: i.viewport.scrollWidth,
          viewport: i.viewport.offsetWidth,
          scrollbar: {
            size: l.current.clientWidth,
            paddingStart: rl(a.paddingLeft),
            paddingEnd: rl(a.paddingRight)
          }
        });
      }
    }
  );
}), mj = C.forwardRef((e, t) => {
  const { sizes: r, onSizesChange: n, ...o } = e, i = dr(Kr, e.__scopeScrollArea), [a, s] = C.useState(), l = C.useRef(null), c = _e(t, l, i.onScrollbarYChange);
  return C.useEffect(() => {
    l.current && s(getComputedStyle(l.current));
  }, [l]), /* @__PURE__ */ f.jsx(
    X1,
    {
      "data-orientation": "vertical",
      ...o,
      ref: c,
      sizes: r,
      style: {
        top: 0,
        right: i.dir === "ltr" ? 0 : void 0,
        left: i.dir === "rtl" ? 0 : void 0,
        bottom: "var(--radix-scroll-area-corner-height)",
        "--radix-scroll-area-thumb-height": ec(r) + "px",
        ...e.style
      },
      onThumbPointerDown: (u) => e.onThumbPointerDown(u.y),
      onDragScroll: (u) => e.onDragScroll(u.y),
      onWheelScroll: (u, d) => {
        if (i.viewport) {
          const h = i.viewport.scrollTop + u.deltaY;
          e.onWheelScroll(h), ex(h, d) && u.preventDefault();
        }
      },
      onResize: () => {
        l.current && i.viewport && a && n({
          content: i.viewport.scrollHeight,
          viewport: i.viewport.offsetHeight,
          scrollbar: {
            size: l.current.clientHeight,
            paddingStart: rl(a.paddingTop),
            paddingEnd: rl(a.paddingBottom)
          }
        });
      }
    }
  );
}), [xj, q1] = G1(Kr), X1 = C.forwardRef((e, t) => {
  const {
    __scopeScrollArea: r,
    sizes: n,
    hasThumb: o,
    onThumbChange: i,
    onThumbPointerUp: a,
    onThumbPointerDown: s,
    onThumbPositionChange: l,
    onDragScroll: c,
    onWheelScroll: u,
    onResize: d,
    ...h
  } = e, p = dr(Kr, r), [g, v] = C.useState(null), m = _e(t, (j) => v(j)), x = C.useRef(null), y = C.useRef(""), b = p.viewport, w = n.content - n.viewport, _ = _t(u), R = _t(l), T = tc(d, 10);
  function k(j) {
    if (x.current) {
      const A = j.clientX - x.current.left, $ = j.clientY - x.current.top;
      c({ x: A, y: $ });
    }
  }
  return C.useEffect(() => {
    const j = (A) => {
      const $ = A.target;
      g?.contains($) && _(A, w);
    };
    return document.addEventListener("wheel", j, { passive: !1 }), () => document.removeEventListener("wheel", j, { passive: !1 });
  }, [b, g, w, _]), C.useEffect(R, [n, R]), Ko(g, T), Ko(p.content, T), /* @__PURE__ */ f.jsx(
    xj,
    {
      scope: r,
      scrollbar: g,
      hasThumb: o,
      onThumbChange: _t(i),
      onThumbPointerUp: _t(a),
      onThumbPositionChange: R,
      onThumbPointerDown: _t(s),
      children: /* @__PURE__ */ f.jsx(
        me.div,
        {
          ...h,
          ref: m,
          style: { position: "absolute", ...h.style },
          onPointerDown: ue(e.onPointerDown, (j) => {
            j.button === 0 && (j.target.setPointerCapture(j.pointerId), x.current = g.getBoundingClientRect(), y.current = document.body.style.webkitUserSelect, document.body.style.webkitUserSelect = "none", p.viewport && (p.viewport.style.scrollBehavior = "auto"), k(j));
          }),
          onPointerMove: ue(e.onPointerMove, k),
          onPointerUp: ue(e.onPointerUp, (j) => {
            const A = j.target;
            A.hasPointerCapture(j.pointerId) && A.releasePointerCapture(j.pointerId), document.body.style.webkitUserSelect = y.current, p.viewport && (p.viewport.style.scrollBehavior = ""), x.current = null;
          })
        }
      )
    }
  );
}), tl = "ScrollAreaThumb", K1 = C.forwardRef(
  (e, t) => {
    const { forceMount: r, ...n } = e, o = q1(tl, e.__scopeScrollArea);
    return /* @__PURE__ */ f.jsx(Nt, { present: r || o.hasThumb, children: /* @__PURE__ */ f.jsx(yj, { ref: t, ...n }) });
  }
), yj = C.forwardRef(
  (e, t) => {
    const { __scopeScrollArea: r, style: n, ...o } = e, i = dr(tl, r), a = q1(tl, r), { onThumbPositionChange: s } = a, l = _e(
      t,
      (d) => a.onThumbChange(d)
    ), c = C.useRef(void 0), u = tc(() => {
      c.current && (c.current(), c.current = void 0);
    }, 100);
    return C.useEffect(() => {
      const d = i.viewport;
      if (d) {
        const h = () => {
          if (u(), !c.current) {
            const p = Sj(d, s);
            c.current = p, s();
          }
        };
        return s(), d.addEventListener("scroll", h), () => d.removeEventListener("scroll", h);
      }
    }, [i.viewport, u, s]), /* @__PURE__ */ f.jsx(
      me.div,
      {
        "data-state": a.hasThumb ? "visible" : "hidden",
        ...o,
        ref: l,
        style: {
          width: "var(--radix-scroll-area-thumb-width)",
          height: "var(--radix-scroll-area-thumb-height)",
          ...n
        },
        onPointerDownCapture: ue(e.onPointerDownCapture, (d) => {
          const p = d.target.getBoundingClientRect(), g = d.clientX - p.left, v = d.clientY - p.top;
          a.onThumbPointerDown({ x: g, y: v });
        }),
        onPointerUp: ue(e.onPointerUp, a.onThumbPointerUp)
      }
    );
  }
);
K1.displayName = tl;
var Cf = "ScrollAreaCorner", Z1 = C.forwardRef(
  (e, t) => {
    const r = dr(Cf, e.__scopeScrollArea), n = !!(r.scrollbarX && r.scrollbarY);
    return r.type !== "scroll" && n ? /* @__PURE__ */ f.jsx(bj, { ...e, ref: t }) : null;
  }
);
Z1.displayName = Cf;
var bj = C.forwardRef((e, t) => {
  const { __scopeScrollArea: r, ...n } = e, o = dr(Cf, r), [i, a] = C.useState(0), [s, l] = C.useState(0), c = !!(i && s);
  return Ko(o.scrollbarX, () => {
    const u = o.scrollbarX?.offsetHeight || 0;
    o.onCornerHeightChange(u), l(u);
  }), Ko(o.scrollbarY, () => {
    const u = o.scrollbarY?.offsetWidth || 0;
    o.onCornerWidthChange(u), a(u);
  }), c ? /* @__PURE__ */ f.jsx(
    me.div,
    {
      ...n,
      ref: t,
      style: {
        width: i,
        height: s,
        position: "absolute",
        right: o.dir === "ltr" ? 0 : void 0,
        left: o.dir === "rtl" ? 0 : void 0,
        bottom: 0,
        ...e.style
      }
    }
  ) : null;
});
function rl(e) {
  return e ? parseInt(e, 10) : 0;
}
function Q1(e, t) {
  const r = e / t;
  return isNaN(r) ? 0 : r;
}
function ec(e) {
  const t = Q1(e.viewport, e.content), r = e.scrollbar.paddingStart + e.scrollbar.paddingEnd, n = (e.scrollbar.size - r) * t;
  return Math.max(n, 18);
}
function wj(e, t, r, n = "ltr") {
  const o = ec(r), i = o / 2, a = t || i, s = o - a, l = r.scrollbar.paddingStart + a, c = r.scrollbar.size - r.scrollbar.paddingEnd - s, u = r.content - r.viewport, d = n === "ltr" ? [0, u] : [u * -1, 0];
  return J1([l, c], d)(e);
}
function Up(e, t, r = "ltr") {
  const n = ec(t), o = t.scrollbar.paddingStart + t.scrollbar.paddingEnd, i = t.scrollbar.size - o, a = t.content - t.viewport, s = i - n, l = r === "ltr" ? [0, a] : [a * -1, 0], c = ha(e, l);
  return J1([0, a], [0, s])(c);
}
function J1(e, t) {
  return (r) => {
    if (e[0] === e[1] || t[0] === t[1]) return t[0];
    const n = (t[1] - t[0]) / (e[1] - e[0]);
    return t[0] + n * (r - e[0]);
  };
}
function ex(e, t) {
  return e > 0 && e < t;
}
var Sj = (e, t = () => {
}) => {
  let r = { left: e.scrollLeft, top: e.scrollTop }, n = 0;
  return function o() {
    const i = { left: e.scrollLeft, top: e.scrollTop }, a = r.left !== i.left, s = r.top !== i.top;
    (a || s) && t(), r = i, n = window.requestAnimationFrame(o);
  }(), () => window.cancelAnimationFrame(n);
};
function tc(e, t) {
  const r = _t(e), n = C.useRef(0);
  return C.useEffect(() => () => window.clearTimeout(n.current), []), C.useCallback(() => {
    window.clearTimeout(n.current), n.current = window.setTimeout(r, t);
  }, [r, t]);
}
function Ko(e, t) {
  const r = _t(t);
  wt(() => {
    let n = 0;
    if (e) {
      const o = new ResizeObserver(() => {
        cancelAnimationFrame(n), n = window.requestAnimationFrame(r);
      });
      return o.observe(e), () => {
        window.cancelAnimationFrame(n), o.unobserve(e);
      };
    }
  }, [e, r]);
}
var Cj = V1, Ej = H1, _j = Z1;
function Nj({
  className: e,
  children: t,
  ...r
}) {
  return /* @__PURE__ */ f.jsxs(
    Cj,
    {
      "data-slot": "scroll-area",
      className: Ee("relative", e),
      ...r,
      children: [
        /* @__PURE__ */ f.jsx(
          Ej,
          {
            "data-slot": "scroll-area-viewport",
            className: "focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",
            children: t
          }
        ),
        /* @__PURE__ */ f.jsx(Dj, {}),
        /* @__PURE__ */ f.jsx(_j, {})
      ]
    }
  );
}
function Dj({
  className: e,
  orientation: t = "vertical",
  ...r
}) {
  return /* @__PURE__ */ f.jsx(
    W1,
    {
      "data-slot": "scroll-area-scrollbar",
      orientation: t,
      className: Ee(
        "flex touch-none p-px transition-colors select-none",
        t === "vertical" && "h-full w-2.5 border-l border-l-transparent",
        t === "horizontal" && "h-2.5 flex-col border-t border-t-transparent",
        e
      ),
      ...r,
      children: /* @__PURE__ */ f.jsx(
        K1,
        {
          "data-slot": "scroll-area-thumb",
          className: "bg-border relative flex-1 rounded-full"
        }
      )
    }
  );
}
const Rj = ({ schema: e, selectedTrigger: t, onTriggerChange: r }) => {
  const n = (o) => ({
    click: np,
    hover: Od,
    drag: Nl,
    focus: Fd,
    load: $E
  })[o] || np;
  return e ? /* @__PURE__ */ f.jsxs("div", { children: [
    /* @__PURE__ */ f.jsx(Te, { className: "text-sm font-medium block mb-2", children: "Trigger Type" }),
    /* @__PURE__ */ f.jsxs(Ur, { value: t, onValueChange: r, children: [
      /* @__PURE__ */ f.jsx(_r, { children: /* @__PURE__ */ f.jsx("div", { className: "flex items-center gap-2 w-full", children: (() => {
        const o = e?.triggers?.find((a) => a.type === t), i = n(t);
        return /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
          /* @__PURE__ */ f.jsx(i, { className: "w-4 h-4 flex-shrink-0" }),
          /* @__PURE__ */ f.jsx("div", { className: "flex flex-col items-start flex-1 min-w-0", children: /* @__PURE__ */ f.jsx("div", { className: "font-medium", children: o?.label }) })
        ] });
      })() }) }),
      /* @__PURE__ */ f.jsx(Nr, { children: e?.triggers?.map((o) => {
        const i = n(o.type);
        return /* @__PURE__ */ f.jsx(vt, { value: o.type, children: /* @__PURE__ */ f.jsxs("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ f.jsx(i, { className: "w-4 h-4" }),
          /* @__PURE__ */ f.jsxs("div", { children: [
            /* @__PURE__ */ f.jsx("div", { children: o.label }),
            o.description && /* @__PURE__ */ f.jsx("div", { className: "text-xs text-muted-foreground", children: o.description })
          ] })
        ] }) }, o.type);
      }) })
    ] })
  ] }) : /* @__PURE__ */ f.jsxs("div", { children: [
    /* @__PURE__ */ f.jsx(Te, { className: "text-sm font-medium block mb-2", children: "Trigger Type" }),
    /* @__PURE__ */ f.jsx("div", { className: "text-sm text-muted-foreground", children: "No schema provided" })
  ] });
};
function Mj({ field: e, value: t, onChange: r }) {
  const n = () => {
    switch (e.type) {
      case "text":
        return /* @__PURE__ */ f.jsx(
          We,
          {
            placeholder: e.placeholder,
            value: t || e.default || "",
            onChange: (o) => r(o.target.value),
            className: "h-8"
          }
        );
      case "number":
        return /* @__PURE__ */ f.jsx(
          We,
          {
            type: "number",
            placeholder: e.placeholder,
            value: t || e.default || "",
            onChange: (o) => r(Number(o.target.value)),
            className: "h-8",
            min: e.min,
            max: e.max,
            step: e.step
          }
        );
      case "select":
        return /* @__PURE__ */ f.jsxs(Ur, { value: t || e.default, onValueChange: r, children: [
          /* @__PURE__ */ f.jsx(_r, { className: "h-8", children: /* @__PURE__ */ f.jsx(Mn, {}) }),
          /* @__PURE__ */ f.jsx(Nr, { children: e.options?.map((o) => /* @__PURE__ */ f.jsx(vt, { value: o.value, children: o.label }, o.value)) })
        ] });
      case "code":
        return /* @__PURE__ */ f.jsxs("div", { className: "space-y-1", children: [
          /* @__PURE__ */ f.jsx(
            mi,
            {
              placeholder: e.placeholder,
              value: t || e.default || "",
              onChange: (o) => r(o.target.value),
              className: "min-h-[80px] text-xs font-mono"
            }
          ),
          e.language && /* @__PURE__ */ f.jsxs("div", { className: "text-xs text-muted-foreground", children: [
            "Language: ",
            e.language
          ] })
        ] });
      case "color":
        return /* @__PURE__ */ f.jsxs("div", { className: "flex gap-2", children: [
          /* @__PURE__ */ f.jsx(
            We,
            {
              type: "color",
              value: t || e.default || "#000000",
              onChange: (o) => r(o.target.value),
              className: "w-12 h-8 p-1 border rounded"
            }
          ),
          /* @__PURE__ */ f.jsx(
            We,
            {
              type: "text",
              placeholder: e.placeholder,
              value: t || e.default || "#000000",
              onChange: (o) => r(o.target.value),
              className: "h-8 flex-1"
            }
          )
        ] });
      case "switch":
        return /* @__PURE__ */ f.jsx(
          bn,
          {
            checked: t || e.default || !1,
            onCheckedChange: r
          }
        );
      default:
        return /* @__PURE__ */ f.jsx(
          We,
          {
            placeholder: e.placeholder,
            value: t || e.default || "",
            onChange: (o) => r(o.target.value),
            className: "h-8"
          }
        );
    }
  };
  return /* @__PURE__ */ f.jsxs("div", { className: "space-y-2", children: [
    /* @__PURE__ */ f.jsxs(Te, { className: "text-xs", children: [
      e.label,
      e.required && /* @__PURE__ */ f.jsx("span", { className: "text-red-500 ml-1", children: "*" })
    ] }),
    n()
  ] });
}
const Tj = ({
  event: e,
  currentTrigger: t,
  onUpdate: r,
  onUpdateValue: n,
  onRemove: o
}) => {
  const a = ((s) => t?.options.find((c) => c.name === s.actionName))(e);
  return a ? /* @__PURE__ */ f.jsx(Jn, { className: "p-3", children: /* @__PURE__ */ f.jsxs("div", { className: "space-y-3", children: [
    /* @__PURE__ */ f.jsxs("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ f.jsxs("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ f.jsx(pa, { variant: "secondary", className: "text-xs", children: a.label }),
        /* @__PURE__ */ f.jsx(
          bn,
          {
            checked: e.enabled,
            onCheckedChange: (s) => r(e.id, { enabled: s })
          }
        )
      ] }),
      /* @__PURE__ */ f.jsx(Fe, { size: "sm", variant: "ghost", onClick: () => o(e.id), children: /* @__PURE__ */ f.jsx(Dl, { className: "w-4 h-4" }) })
    ] }),
    /* @__PURE__ */ f.jsxs("div", { className: "space-y-2", children: [
      /* @__PURE__ */ f.jsx(Te, { className: "text-xs", children: "Action Type" }),
      /* @__PURE__ */ f.jsxs(
        Ur,
        {
          value: e.actionName,
          onValueChange: (s) => {
            const l = t?.options.find((c) => c.name === s);
            if (l) {
              const c = {};
              l.fields.forEach((u) => {
                u.default !== void 0 && (c[u.name] = u.default);
              }), r(e.id, {
                actionName: s,
                actionType: l.type,
                values: c
              });
            }
          },
          children: [
            /* @__PURE__ */ f.jsx(_r, { className: "h-8", children: /* @__PURE__ */ f.jsx(Mn, {}) }),
            /* @__PURE__ */ f.jsx(Nr, { children: t?.options.map((s) => /* @__PURE__ */ f.jsx(vt, { value: s.name, children: s.label }, s.name)) })
          ]
        }
      )
    ] }),
    a.fields.map((s) => /* @__PURE__ */ f.jsx(
      Mj,
      {
        field: s,
        value: e.values[s.name],
        onChange: (l) => n(e.id, s.name, l)
      },
      s.name
    ))
  ] }) }) : null;
}, jj = ({
  configuredEvents: e,
  selectedTrigger: t,
  currentTrigger: r,
  onAddEvent: n,
  onUpdateEvent: o,
  onUpdateEventValue: i,
  onRemoveEvent: a
}) => {
  const s = e.filter((l) => l.triggerType === t);
  return /* @__PURE__ */ f.jsxs("div", { className: "space-y-3", children: [
    /* @__PURE__ */ f.jsxs("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ f.jsxs(Te, { className: "text-sm font-medium", children: [
        "Events (",
        s.length,
        ")"
      ] }),
      /* @__PURE__ */ f.jsxs(Fe, { size: "sm", variant: "outline", onClick: n, disabled: !r, children: [
        /* @__PURE__ */ f.jsx(Vo, { className: "w-4 h-4 mr-1" }),
        "Add"
      ] })
    ] }),
    /* @__PURE__ */ f.jsx("div", { className: "space-y-3", children: s.map((l) => /* @__PURE__ */ f.jsx(
      Tj,
      {
        event: l,
        currentTrigger: r,
        onUpdate: o,
        onUpdateValue: i,
        onRemove: a
      },
      l.id
    )) })
  ] });
}, tx = {
  selectedTrigger: "click",
  configuredEvents: [],
  advancedSettings: {
    preventDefault: !1,
    stopPropagation: !1,
    debugMode: !1
  }
};
function kj(e, t) {
  switch (t.type) {
    case "SET_SELECTED_TRIGGER":
      return {
        ...e,
        selectedTrigger: t.payload
      };
    case "ADD_EVENT":
      return {
        ...e,
        configuredEvents: [...e.configuredEvents, t.payload]
      };
    case "UPDATE_EVENT":
      return {
        ...e,
        configuredEvents: e.configuredEvents.map(
          (r) => r.id === t.payload.id ? { ...r, ...t.payload.updates } : r
        )
      };
    case "UPDATE_EVENT_VALUE":
      return {
        ...e,
        configuredEvents: e.configuredEvents.map(
          (r) => r.id === t.payload.id ? { ...r, values: { ...r.values, [t.payload.fieldName]: t.payload.value } } : r
        )
      };
    case "REMOVE_EVENT":
      return {
        ...e,
        configuredEvents: e.configuredEvents.filter((r) => r.id !== t.payload)
      };
    case "UPDATE_ADVANCED_SETTINGS":
      return {
        ...e,
        advancedSettings: t.payload
      };
    case "SET_ALL":
      return t.payload;
    case "RESET":
      return tx;
    default:
      return e;
  }
}
const rx = wl(void 0), Pj = ({ children: e, initialValue: t = {}, onChange: r }) => {
  const [n, o] = BS(kj, {
    ...tx,
    ...t
  }), i = bt(n);
  ze(() => {
    r && JSON.stringify(n) !== JSON.stringify(i.current) && (i.current = { ...n }, r(n));
  }, [n, r]);
  const p = {
    state: n,
    dispatch: o,
    setSelectedTrigger: (g) => {
      o({ type: "SET_SELECTED_TRIGGER", payload: g });
    },
    addEvent: (g) => {
      o({ type: "ADD_EVENT", payload: g });
    },
    updateEvent: (g, v) => {
      o({ type: "UPDATE_EVENT", payload: { id: g, updates: v } });
    },
    updateEventValue: (g, v, m) => {
      o({ type: "UPDATE_EVENT_VALUE", payload: { id: g, fieldName: v, value: m } });
    },
    removeEvent: (g) => {
      o({ type: "REMOVE_EVENT", payload: g });
    },
    updateAdvancedSettings: (g) => {
      o({ type: "UPDATE_ADVANCED_SETTINGS", payload: g });
    },
    reset: () => {
      o({ type: "RESET" });
    }
  };
  return /* @__PURE__ */ f.jsx(rx.Provider, { value: p, children: e });
}, Ef = () => {
  const e = Sl(rx);
  if (e === void 0)
    throw new Error("useEventConfig must be used within an EventConfigProvider");
  return e;
}, Aj = ({ settings: e, onSettingsChange: t }) => {
  const [r, n] = Ce(!1), { state: o, updateAdvancedSettings: i } = Ef(), a = e || o.advancedSettings, s = t || i, l = (c, u) => {
    s({
      ...a,
      [c]: u
    });
  };
  return /* @__PURE__ */ f.jsxs("div", { className: "space-y-3", children: [
    /* @__PURE__ */ f.jsxs(
      Fe,
      {
        variant: "ghost",
        className: "w-full justify-start",
        onClick: () => n(!r),
        children: [
          r ? /* @__PURE__ */ f.jsx(kn, { className: "w-4 h-4 mr-2" }) : /* @__PURE__ */ f.jsx(ho, { className: "w-4 h-4 mr-2" }),
          /* @__PURE__ */ f.jsx(Te, { className: "text-sm font-medium cursor-pointer", children: "Advanced Settings" })
        ]
      }
    ),
    r && /* @__PURE__ */ f.jsxs("div", { className: "space-y-3 pl-6", children: [
      /* @__PURE__ */ f.jsxs("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ f.jsx(Te, { htmlFor: "prevent-default", className: "text-sm", children: "Prevent Default Behavior" }),
        /* @__PURE__ */ f.jsx(
          bn,
          {
            id: "prevent-default",
            checked: a.preventDefault,
            onCheckedChange: (c) => l("preventDefault", c)
          }
        )
      ] }),
      /* @__PURE__ */ f.jsxs("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ f.jsx(Te, { htmlFor: "stop-propagation", className: "text-sm", children: "Stop Event Propagation" }),
        /* @__PURE__ */ f.jsx(
          bn,
          {
            id: "stop-propagation",
            checked: a.stopPropagation,
            onCheckedChange: (c) => l("stopPropagation", c)
          }
        )
      ] }),
      /* @__PURE__ */ f.jsxs("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ f.jsx(Te, { htmlFor: "debug-mode", className: "text-sm", children: "Debug Mode" }),
        /* @__PURE__ */ f.jsx(
          bn,
          {
            id: "debug-mode",
            checked: a.debugMode,
            onCheckedChange: (c) => l("debugMode", c)
          }
        )
      ] })
    ] })
  ] });
}, Oj = ({ eventData: e }) => {
  const { state: t } = Ef(), r = e || t, n = () => {
    if (!r) {
      console.log("No event data to export");
      return;
    }
    const o = {
      timestamp: (/* @__PURE__ */ new Date()).toISOString(),
      eventConfiguration: r,
      summary: {
        totalEvents: r.configuredEvents?.length || 0,
        enabledEvents: r.configuredEvents?.filter((c) => c.enabled).length || 0,
        triggers: [...new Set(r.configuredEvents?.map((c) => c.triggerType) || [])],
        actions: [...new Set(r.configuredEvents?.map((c) => c.actionType) || [])]
      }
    };
    console.log("=== Event Configuration Export ==="), console.log("Export Data:", o), console.log("Event Values:", r.configuredEvents?.map((c) => ({
      id: c.id,
      triggerType: c.triggerType,
      actionType: c.actionType,
      actionName: c.actionName,
      enabled: c.enabled,
      values: c.values
    }))), console.log("Advanced Settings:", r.advancedSettings), console.log("================================");
    const i = JSON.stringify(o, null, 2), a = new Blob([i], { type: "application/json" }), s = URL.createObjectURL(a), l = document.createElement("a");
    l.href = s, l.download = `event-config-${(/* @__PURE__ */ new Date()).toISOString().split("T")[0]}.json`, document.body.appendChild(l), l.click(), document.body.removeChild(l), URL.revokeObjectURL(s);
  };
  return /* @__PURE__ */ f.jsxs("div", { className: "p-4 border-t border-border space-y-2", children: [
    /* @__PURE__ */ f.jsxs("div", { className: "flex gap-2", children: [
      /* @__PURE__ */ f.jsxs(Fe, { size: "sm", className: "flex-1", children: [
        /* @__PURE__ */ f.jsx(Zn, { className: "w-4 h-4 mr-1" }),
        "Test Events"
      ] }),
      /* @__PURE__ */ f.jsx(Fe, { size: "sm", variant: "outline", children: /* @__PURE__ */ f.jsx(ci, { className: "w-4 h-4" }) })
    ] }),
    /* @__PURE__ */ f.jsxs(
      Fe,
      {
        size: "sm",
        variant: "outline",
        className: "w-full bg-transparent",
        onClick: n,
        children: [
          /* @__PURE__ */ f.jsx(gg, { className: "w-4 h-4 mr-1" }),
          "Export Configuration"
        ]
      }
    )
  ] });
}, Ij = ({ schema: e, onClick: t }) => {
  const { state: r, setSelectedTrigger: n, addEvent: o, updateEvent: i, updateEventValue: a, removeEvent: s, updateAdvancedSettings: l } = Ef();
  if (!e)
    return /* @__PURE__ */ f.jsxs("div", { className: "w-full flex flex-col", children: [
      /* @__PURE__ */ f.jsxs("div", { className: "p-4 border-b border-border", children: [
        /* @__PURE__ */ f.jsx("h2", { className: "text-lg font-semibold mb-1", children: "Event Settings" }),
        /* @__PURE__ */ f.jsx("p", { className: "text-sm text-muted-foreground", children: "Configure interactions for selected element" })
      ] }),
      /* @__PURE__ */ f.jsx("div", { className: "flex-1 flex items-center justify-center p-4", children: /* @__PURE__ */ f.jsx("p", { className: "text-sm text-muted-foreground", children: "No event schema provided" }) })
    ] });
  const c = e?.triggers?.find((v) => v.type === r.selectedTrigger), u = () => {
    if (!c || !c.options || c.options.length === 0) return;
    const v = c.options[0], m = {};
    v.fields && v.fields.forEach((y) => {
      y.default !== void 0 && (m[y.name] = y.default);
    });
    const x = {
      id: Date.now().toString(),
      triggerType: r.selectedTrigger,
      actionType: v.type,
      actionName: v.name,
      values: m,
      enabled: !0
    };
    o(x);
  }, d = (v, m) => {
    i(v, m);
  }, h = (v, m, x) => {
    a(v, m, x);
  }, p = (v) => {
    s(v);
  }, g = (v) => {
    l(v);
  };
  return /* @__PURE__ */ f.jsxs("div", { className: "w-full flex flex-col", children: [
    /* @__PURE__ */ f.jsxs("div", { className: "p-4 border-b border-border", children: [
      /* @__PURE__ */ f.jsx("h2", { className: "text-lg font-semibold mb-1", children: "Event Settings" }),
      /* @__PURE__ */ f.jsx("p", { className: "text-sm text-muted-foreground", children: "Configure interactions for selected element" })
    ] }),
    /* @__PURE__ */ f.jsx(Nj, { className: "flex-1", children: /* @__PURE__ */ f.jsxs("div", { className: "p-4 space-y-6", children: [
      /* @__PURE__ */ f.jsx(
        Rj,
        {
          schema: e,
          selectedTrigger: r.selectedTrigger,
          onTriggerChange: n
        }
      ),
      /* @__PURE__ */ f.jsx(oo, {}),
      /* @__PURE__ */ f.jsx(
        jj,
        {
          configuredEvents: r.configuredEvents,
          selectedTrigger: r.selectedTrigger,
          currentTrigger: c,
          onAddEvent: u,
          onUpdateEvent: d,
          onUpdateEventValue: h,
          onRemoveEvent: p
        }
      ),
      /* @__PURE__ */ f.jsx(oo, {}),
      /* @__PURE__ */ f.jsx(
        Aj,
        {
          settings: r.advancedSettings,
          onSettingsChange: g
        }
      )
    ] }) }),
    /* @__PURE__ */ f.jsx(Oj, { eventData: r })
  ] });
}, Fj = ({ schema: e, initialValue: t = {}, onChange: r, onClick: n }) => /* @__PURE__ */ f.jsx(Pj, { initialValue: t, onChange: r, children: /* @__PURE__ */ f.jsx(Ij, { schema: e, onClick: n }) }), Lj = {
  emit: {
    label: "Emit Data",
    type: "emit",
    name: "emit_data",
    fields: [
      {
        label: "Event Name",
        name: "eventName",
        type: "text",
        required: !0,
        placeholder: "Enter event name",
        default: "data_click"
      },
      {
        label: "Data Content",
        name: "data",
        type: "code",
        language: "json",
        placeholder: '{"key": "value"}',
        default: "{}"
      }
    ]
  },
  navigate: {
    label: "Navigate",
    type: "link",
    name: "navigate",
    fields: [
      {
        label: "URL",
        name: "url",
        type: "text",
        required: !0,
        placeholder: "https://example.com",
        default: ""
      },
      {
        label: "Target",
        name: "target",
        type: "select",
        options: [
          { label: "Current Window", value: "_self" },
          { label: "New Window", value: "_blank" }
        ],
        default: "_self"
      }
    ]
  },
  tooltip: {
    label: "Show Tooltip",
    type: "tooltip",
    name: "show_tooltip",
    fields: [
      {
        label: "Tooltip Content",
        name: "content",
        type: "text",
        required: !0,
        placeholder: "Enter tooltip content",
        default: ""
      },
      {
        label: "Duration",
        name: "duration",
        type: "number",
        min: 1e3,
        max: 1e4,
        default: 3e3
      }
    ]
  },
  refresh: {
    label: "Auto Refresh",
    type: "refresh",
    name: "auto_refresh",
    fields: [
      {
        label: "Enable Auto Refresh",
        name: "enabled",
        type: "switch",
        default: !1
      },
      {
        label: "Refresh Interval",
        name: "interval",
        type: "number",
        min: 1e3,
        max: 6e4,
        default: 5e3
      }
    ]
  }
}, Bj = {
  click: {
    type: "click",
    label: "Click Event",
    description: "Triggered when user clicks the component",
    defaultActions: ["emit", "navigate"]
  },
  hover: {
    type: "hover",
    label: "Hover Event",
    description: "Triggered when user hovers over the component",
    defaultActions: ["tooltip"]
  },
  load: {
    type: "load",
    label: "Load Event",
    description: "Triggered when component finishes loading",
    defaultActions: ["refresh"]
  }
};
function nx(e = {}) {
  const { triggers: t = ["click", "hover"], customActions: r = {}, excludeActions: n = [] } = e, o = {
    triggers: []
  };
  return t.forEach((i) => {
    const a = Bj[i];
    if (!a) return;
    const l = a.defaultActions.filter((c) => !n.includes(c)).map((c) => r[c] || Lj[c]).filter(Boolean);
    l.length > 0 && o.triggers.push({
      ...a,
      options: l
    });
  }), o;
}
function wF(e) {
  return nx({
    triggers: ["click"],
    customActions: e
  });
}
function SF(e) {
  return nx({
    triggers: ["click", "hover", "load"],
    customActions: e
  });
}
function CF(e, t) {
  const r = { ...e };
  return r.triggers = r.triggers.map((n) => ({
    ...n,
    options: [
      ...n.options,
      ...Object.values(t)
    ]
  })), r;
}
const zj = {
  // Basic click-only schema
  CLICK_ONLY: {
    triggers: [
      {
        type: "click",
        label: "Click Event",
        description: "Triggered when user clicks the component",
        options: [
          {
            label: "Emit Data",
            type: "emit",
            name: "emit_data",
            fields: [
              {
                label: "Event Name",
                name: "eventName",
                type: "text",
                required: !0,
                placeholder: "Enter event name",
                default: "data_click"
              },
              {
                label: "Data Content",
                name: "data",
                type: "code",
                language: "json",
                placeholder: '{"key": "value"}',
                default: "{}"
              }
            ]
          },
          {
            label: "Navigate",
            type: "link",
            name: "navigate",
            fields: [
              {
                label: "URL",
                name: "url",
                type: "text",
                required: !0,
                placeholder: "https://example.com",
                default: ""
              },
              {
                label: "Target",
                name: "target",
                type: "select",
                options: [
                  { label: "Current Window", value: "_self" },
                  { label: "New Window", value: "_blank" }
                ],
                default: "_self"
              }
            ]
          }
        ]
      }
    ]
  },
  // Interactive component schema (click + hover)
  INTERACTIVE: {
    triggers: [
      {
        type: "click",
        label: "Click Event",
        description: "Triggered when user clicks the component",
        options: [
          {
            label: "Emit Data",
            type: "emit",
            name: "emit_data",
            fields: [
              {
                label: "Event Name",
                name: "eventName",
                type: "text",
                required: !0,
                placeholder: "Enter event name",
                default: "data_click"
              },
              {
                label: "Data Content",
                name: "data",
                type: "code",
                language: "json",
                placeholder: '{"key": "value"}',
                default: "{}"
              }
            ]
          },
          {
            label: "Navigate",
            type: "link",
            name: "navigate",
            fields: [
              {
                label: "URL",
                name: "url",
                type: "text",
                required: !0,
                placeholder: "https://example.com",
                default: ""
              },
              {
                label: "Target",
                name: "target",
                type: "select",
                options: [
                  { label: "Current Window", value: "_self" },
                  { label: "New Window", value: "_blank" }
                ],
                default: "_self"
              }
            ]
          }
        ]
      },
      {
        type: "hover",
        label: "Hover Event",
        description: "Triggered when user hovers over the component",
        options: [
          {
            label: "Show Tooltip",
            type: "tooltip",
            name: "show_tooltip",
            fields: [
              {
                label: "Tooltip Content",
                name: "content",
                type: "text",
                required: !0,
                placeholder: "Enter tooltip content",
                default: ""
              },
              {
                label: "Duration",
                name: "duration",
                type: "number",
                min: 1e3,
                max: 1e4,
                default: 3e3
              }
            ]
          }
        ]
      }
    ]
  },
  // Data component schema (load + click)
  DATA_COMPONENT: {
    triggers: [
      {
        type: "load",
        label: "Load Event",
        description: "Triggered when component finishes loading",
        options: [
          {
            label: "Auto Refresh",
            type: "refresh",
            name: "auto_refresh",
            fields: [
              {
                label: "Enable Auto Refresh",
                name: "enabled",
                type: "switch",
                default: !1
              },
              {
                label: "Refresh Interval",
                name: "interval",
                type: "number",
                min: 1e3,
                max: 6e4,
                default: 5e3
              }
            ]
          }
        ]
      },
      {
        type: "click",
        label: "Click Event",
        description: "Triggered when user clicks the component",
        options: [
          {
            label: "Emit Data",
            type: "emit",
            name: "emit_data",
            fields: [
              {
                label: "Event Name",
                name: "eventName",
                type: "text",
                required: !0,
                placeholder: "Enter event name",
                default: "data_click"
              },
              {
                label: "Data Content",
                name: "data",
                type: "code",
                language: "json",
                placeholder: '{"key": "value"}',
                default: "{}"
              }
            ]
          }
        ]
      }
    ]
  },
  // Full featured schema
  FULL_FEATURED: {
    triggers: [
      {
        type: "click",
        label: "Click Event",
        description: "Triggered when user clicks the component",
        options: [
          {
            label: "Emit Data",
            type: "emit",
            name: "emit_data",
            fields: [
              {
                label: "Event Name",
                name: "eventName",
                type: "text",
                required: !0,
                placeholder: "Enter event name",
                default: "data_click"
              },
              {
                label: "Data Content",
                name: "data",
                type: "code",
                language: "json",
                placeholder: '{"key": "value"}',
                default: "{}"
              }
            ]
          },
          {
            label: "Navigate",
            type: "link",
            name: "navigate",
            fields: [
              {
                label: "URL",
                name: "url",
                type: "text",
                required: !0,
                placeholder: "https://example.com",
                default: ""
              },
              {
                label: "Target",
                name: "target",
                type: "select",
                options: [
                  { label: "Current Window", value: "_self" },
                  { label: "New Window", value: "_blank" }
                ],
                default: "_self"
              }
            ]
          }
        ]
      },
      {
        type: "hover",
        label: "Hover Event",
        description: "Triggered when user hovers over the component",
        options: [
          {
            label: "Show Tooltip",
            type: "tooltip",
            name: "show_tooltip",
            fields: [
              {
                label: "Tooltip Content",
                name: "content",
                type: "text",
                required: !0,
                placeholder: "Enter tooltip content",
                default: ""
              },
              {
                label: "Duration",
                name: "duration",
                type: "number",
                min: 1e3,
                max: 1e4,
                default: 3e3
              }
            ]
          }
        ]
      },
      {
        type: "load",
        label: "Load Event",
        description: "Triggered when component finishes loading",
        options: [
          {
            label: "Auto Refresh",
            type: "refresh",
            name: "auto_refresh",
            fields: [
              {
                label: "Enable Auto Refresh",
                name: "enabled",
                type: "switch",
                default: !1
              },
              {
                label: "Refresh Interval",
                name: "interval",
                type: "number",
                min: 1e3,
                max: 6e4,
                default: 5e3
              }
            ]
          }
        ]
      }
    ]
  }
};
function $j(e) {
  return zj[e];
}
function EF(e, t) {
  const n = { ...$j(e) };
  return n.triggers = n.triggers.map((o) => ({
    ...o,
    options: [
      ...o.options,
      ...Object.values(t)
    ]
  })), n;
}
function Gj() {
  const e = ke(), t = Yt(), { selectedDoc: r, selectedNodes: n } = t.getCurrentSelection(), o = n[0], i = l2(o.type);
  return /* @__PURE__ */ f.jsx("div", { children: /* @__PURE__ */ f.jsx(
    Fj,
    {
      schema: i,
      initialValue: o.eventConfig,
      onChange: (a) => {
        e.updateNode(r.id, o.id, { eventConfig: a });
      }
    }
  ) });
}
var Ii = { exports: {} };
Ii.exports;
var Hp;
function Vj() {
  return Hp || (Hp = 1, function(e, t) {
    var r = 200, n = "__lodash_hash_undefined__", o = 1, i = 2, a = 9007199254740991, s = "[object Arguments]", l = "[object Array]", c = "[object AsyncFunction]", u = "[object Boolean]", d = "[object Date]", h = "[object Error]", p = "[object Function]", g = "[object GeneratorFunction]", v = "[object Map]", m = "[object Number]", x = "[object Null]", y = "[object Object]", b = "[object Promise]", w = "[object Proxy]", _ = "[object RegExp]", R = "[object Set]", T = "[object String]", k = "[object Symbol]", j = "[object Undefined]", A = "[object WeakMap]", $ = "[object ArrayBuffer]", F = "[object DataView]", L = "[object Float32Array]", P = "[object Float64Array]", O = "[object Int8Array]", I = "[object Int16Array]", E = "[object Int32Array]", S = "[object Uint8Array]", M = "[object Uint8ClampedArray]", D = "[object Uint16Array]", N = "[object Uint32Array]", z = /[\\^$.*+?()[\]{}|]/g, Y = /^\[object .+?Constructor\]$/, H = /^(?:0|[1-9]\d*)$/, X = {};
    X[L] = X[P] = X[O] = X[I] = X[E] = X[S] = X[M] = X[D] = X[N] = !0, X[s] = X[l] = X[$] = X[u] = X[F] = X[d] = X[h] = X[p] = X[v] = X[m] = X[y] = X[_] = X[R] = X[T] = X[A] = !1;
    var Q = typeof ls == "object" && ls && ls.Object === Object && ls, q = typeof self == "object" && self && self.Object === Object && self, K = Q || q || Function("return this")(), ne = t && !t.nodeType && t, oe = ne && !0 && e && !e.nodeType && e, te = oe && oe.exports === ne, G = te && Q.process, ee = function() {
      try {
        return G && G.binding && G.binding("util");
      } catch {
      }
    }(), U = ee && ee.isTypedArray;
    function J(B, Z) {
      for (var ae = -1, he = B == null ? 0 : B.length, Ke = 0, Ae = []; ++ae < he; ) {
        var lt = B[ae];
        Z(lt, ae, B) && (Ae[Ke++] = lt);
      }
      return Ae;
    }
    function re(B, Z) {
      for (var ae = -1, he = Z.length, Ke = B.length; ++ae < he; )
        B[Ke + ae] = Z[ae];
      return B;
    }
    function se(B, Z) {
      for (var ae = -1, he = B == null ? 0 : B.length; ++ae < he; )
        if (Z(B[ae], ae, B))
          return !0;
      return !1;
    }
    function de(B, Z) {
      for (var ae = -1, he = Array(B); ++ae < B; )
        he[ae] = Z(ae);
      return he;
    }
    function ce(B) {
      return function(Z) {
        return B(Z);
      };
    }
    function pe(B, Z) {
      return B.has(Z);
    }
    function we(B, Z) {
      return B?.[Z];
    }
    function Ne(B) {
      var Z = -1, ae = Array(B.size);
      return B.forEach(function(he, Ke) {
        ae[++Z] = [Ke, he];
      }), ae;
    }
    function Le(B, Z) {
      return function(ae) {
        return B(Z(ae));
      };
    }
    function Re(B) {
      var Z = -1, ae = Array(B.size);
      return B.forEach(function(he) {
        ae[++Z] = he;
      }), ae;
    }
    var Se = Array.prototype, je = Function.prototype, ge = Object.prototype, Ve = K["__core-js_shared__"], Xe = je.toString, ye = ge.hasOwnProperty, at = function() {
      var B = /[^.]+$/.exec(Ve && Ve.keys && Ve.keys.IE_PROTO || "");
      return B ? "Symbol(src)_1." + B : "";
    }(), st = ge.toString, ft = RegExp(
      "^" + Xe.call(ye).replace(z, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
    ), kr = te ? K.Buffer : void 0, It = K.Symbol, Dt = K.Uint8Array, es = ge.propertyIsEnumerable, Cc = Se.splice, fr = It ? It.toStringTag : void 0, He = Object.getOwnPropertySymbols, St = kr ? kr.isBuffer : void 0, ts = Le(Object.keys, Object), xo = yo(K, "DataView"), Fn = yo(K, "Map"), Ln = yo(K, "Promise"), Ec = yo(K, "Set"), _c = yo(K, "WeakMap"), Ei = yo(Object, "create"), Uw = $n(xo), Hw = $n(Fn), Ww = $n(Ln), Yw = $n(Ec), qw = $n(_c), kh = It ? It.prototype : void 0, Nc = kh ? kh.valueOf : void 0;
    function Bn(B) {
      var Z = -1, ae = B == null ? 0 : B.length;
      for (this.clear(); ++Z < ae; ) {
        var he = B[Z];
        this.set(he[0], he[1]);
      }
    }
    function Xw() {
      this.__data__ = Ei ? Ei(null) : {}, this.size = 0;
    }
    function Kw(B) {
      var Z = this.has(B) && delete this.__data__[B];
      return this.size -= Z ? 1 : 0, Z;
    }
    function Zw(B) {
      var Z = this.__data__;
      if (Ei) {
        var ae = Z[B];
        return ae === n ? void 0 : ae;
      }
      return ye.call(Z, B) ? Z[B] : void 0;
    }
    function Qw(B) {
      var Z = this.__data__;
      return Ei ? Z[B] !== void 0 : ye.call(Z, B);
    }
    function Jw(B, Z) {
      var ae = this.__data__;
      return this.size += this.has(B) ? 0 : 1, ae[B] = Ei && Z === void 0 ? n : Z, this;
    }
    Bn.prototype.clear = Xw, Bn.prototype.delete = Kw, Bn.prototype.get = Zw, Bn.prototype.has = Qw, Bn.prototype.set = Jw;
    function Qr(B) {
      var Z = -1, ae = B == null ? 0 : B.length;
      for (this.clear(); ++Z < ae; ) {
        var he = B[Z];
        this.set(he[0], he[1]);
      }
    }
    function eS() {
      this.__data__ = [], this.size = 0;
    }
    function tS(B) {
      var Z = this.__data__, ae = ns(Z, B);
      if (ae < 0)
        return !1;
      var he = Z.length - 1;
      return ae == he ? Z.pop() : Cc.call(Z, ae, 1), --this.size, !0;
    }
    function rS(B) {
      var Z = this.__data__, ae = ns(Z, B);
      return ae < 0 ? void 0 : Z[ae][1];
    }
    function nS(B) {
      return ns(this.__data__, B) > -1;
    }
    function oS(B, Z) {
      var ae = this.__data__, he = ns(ae, B);
      return he < 0 ? (++this.size, ae.push([B, Z])) : ae[he][1] = Z, this;
    }
    Qr.prototype.clear = eS, Qr.prototype.delete = tS, Qr.prototype.get = rS, Qr.prototype.has = nS, Qr.prototype.set = oS;
    function zn(B) {
      var Z = -1, ae = B == null ? 0 : B.length;
      for (this.clear(); ++Z < ae; ) {
        var he = B[Z];
        this.set(he[0], he[1]);
      }
    }
    function iS() {
      this.size = 0, this.__data__ = {
        hash: new Bn(),
        map: new (Fn || Qr)(),
        string: new Bn()
      };
    }
    function aS(B) {
      var Z = os(this, B).delete(B);
      return this.size -= Z ? 1 : 0, Z;
    }
    function sS(B) {
      return os(this, B).get(B);
    }
    function lS(B) {
      return os(this, B).has(B);
    }
    function cS(B, Z) {
      var ae = os(this, B), he = ae.size;
      return ae.set(B, Z), this.size += ae.size == he ? 0 : 1, this;
    }
    zn.prototype.clear = iS, zn.prototype.delete = aS, zn.prototype.get = sS, zn.prototype.has = lS, zn.prototype.set = cS;
    function rs(B) {
      var Z = -1, ae = B == null ? 0 : B.length;
      for (this.__data__ = new zn(); ++Z < ae; )
        this.add(B[Z]);
    }
    function uS(B) {
      return this.__data__.set(B, n), this;
    }
    function dS(B) {
      return this.__data__.has(B);
    }
    rs.prototype.add = rs.prototype.push = uS, rs.prototype.has = dS;
    function ln(B) {
      var Z = this.__data__ = new Qr(B);
      this.size = Z.size;
    }
    function fS() {
      this.__data__ = new Qr(), this.size = 0;
    }
    function hS(B) {
      var Z = this.__data__, ae = Z.delete(B);
      return this.size = Z.size, ae;
    }
    function pS(B) {
      return this.__data__.get(B);
    }
    function vS(B) {
      return this.__data__.has(B);
    }
    function gS(B, Z) {
      var ae = this.__data__;
      if (ae instanceof Qr) {
        var he = ae.__data__;
        if (!Fn || he.length < r - 1)
          return he.push([B, Z]), this.size = ++ae.size, this;
        ae = this.__data__ = new zn(he);
      }
      return ae.set(B, Z), this.size = ae.size, this;
    }
    ln.prototype.clear = fS, ln.prototype.delete = hS, ln.prototype.get = pS, ln.prototype.has = vS, ln.prototype.set = gS;
    function mS(B, Z) {
      var ae = is(B), he = !ae && kS(B), Ke = !ae && !he && Dc(B), Ae = !ae && !he && !Ke && $h(B), lt = ae || he || Ke || Ae, yt = lt ? de(B.length, String) : [], Ct = yt.length;
      for (var nt in B)
        ye.call(B, nt) && !(lt && // Safari 9 has enumerable `arguments.length` in strict mode.
        (nt == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
        Ke && (nt == "offset" || nt == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
        Ae && (nt == "buffer" || nt == "byteLength" || nt == "byteOffset") || // Skip index properties.
        DS(nt, Ct))) && yt.push(nt);
      return yt;
    }
    function ns(B, Z) {
      for (var ae = B.length; ae--; )
        if (Fh(B[ae][0], Z))
          return ae;
      return -1;
    }
    function xS(B, Z, ae) {
      var he = Z(B);
      return is(B) ? he : re(he, ae(B));
    }
    function _i(B) {
      return B == null ? B === void 0 ? j : x : fr && fr in Object(B) ? _S(B) : jS(B);
    }
    function Ph(B) {
      return Ni(B) && _i(B) == s;
    }
    function Ah(B, Z, ae, he, Ke) {
      return B === Z ? !0 : B == null || Z == null || !Ni(B) && !Ni(Z) ? B !== B && Z !== Z : yS(B, Z, ae, he, Ah, Ke);
    }
    function yS(B, Z, ae, he, Ke, Ae) {
      var lt = is(B), yt = is(Z), Ct = lt ? l : cn(B), nt = yt ? l : cn(Z);
      Ct = Ct == s ? y : Ct, nt = nt == s ? y : nt;
      var Vt = Ct == y, hr = nt == y, Rt = Ct == nt;
      if (Rt && Dc(B)) {
        if (!Dc(Z))
          return !1;
        lt = !0, Vt = !1;
      }
      if (Rt && !Vt)
        return Ae || (Ae = new ln()), lt || $h(B) ? Oh(B, Z, ae, he, Ke, Ae) : CS(B, Z, Ct, ae, he, Ke, Ae);
      if (!(ae & o)) {
        var Xt = Vt && ye.call(B, "__wrapped__"), Kt = hr && ye.call(Z, "__wrapped__");
        if (Xt || Kt) {
          var un = Xt ? B.value() : B, Jr = Kt ? Z.value() : Z;
          return Ae || (Ae = new ln()), Ke(un, Jr, ae, he, Ae);
        }
      }
      return Rt ? (Ae || (Ae = new ln()), ES(B, Z, ae, he, Ke, Ae)) : !1;
    }
    function bS(B) {
      if (!zh(B) || MS(B))
        return !1;
      var Z = Lh(B) ? ft : Y;
      return Z.test($n(B));
    }
    function wS(B) {
      return Ni(B) && Bh(B.length) && !!X[_i(B)];
    }
    function SS(B) {
      if (!TS(B))
        return ts(B);
      var Z = [];
      for (var ae in Object(B))
        ye.call(B, ae) && ae != "constructor" && Z.push(ae);
      return Z;
    }
    function Oh(B, Z, ae, he, Ke, Ae) {
      var lt = ae & o, yt = B.length, Ct = Z.length;
      if (yt != Ct && !(lt && Ct > yt))
        return !1;
      var nt = Ae.get(B);
      if (nt && Ae.get(Z))
        return nt == Z;
      var Vt = -1, hr = !0, Rt = ae & i ? new rs() : void 0;
      for (Ae.set(B, Z), Ae.set(Z, B); ++Vt < yt; ) {
        var Xt = B[Vt], Kt = Z[Vt];
        if (he)
          var un = lt ? he(Kt, Xt, Vt, Z, B, Ae) : he(Xt, Kt, Vt, B, Z, Ae);
        if (un !== void 0) {
          if (un)
            continue;
          hr = !1;
          break;
        }
        if (Rt) {
          if (!se(Z, function(Jr, Gn) {
            if (!pe(Rt, Gn) && (Xt === Jr || Ke(Xt, Jr, ae, he, Ae)))
              return Rt.push(Gn);
          })) {
            hr = !1;
            break;
          }
        } else if (!(Xt === Kt || Ke(Xt, Kt, ae, he, Ae))) {
          hr = !1;
          break;
        }
      }
      return Ae.delete(B), Ae.delete(Z), hr;
    }
    function CS(B, Z, ae, he, Ke, Ae, lt) {
      switch (ae) {
        case F:
          if (B.byteLength != Z.byteLength || B.byteOffset != Z.byteOffset)
            return !1;
          B = B.buffer, Z = Z.buffer;
        case $:
          return !(B.byteLength != Z.byteLength || !Ae(new Dt(B), new Dt(Z)));
        case u:
        case d:
        case m:
          return Fh(+B, +Z);
        case h:
          return B.name == Z.name && B.message == Z.message;
        case _:
        case T:
          return B == Z + "";
        case v:
          var yt = Ne;
        case R:
          var Ct = he & o;
          if (yt || (yt = Re), B.size != Z.size && !Ct)
            return !1;
          var nt = lt.get(B);
          if (nt)
            return nt == Z;
          he |= i, lt.set(B, Z);
          var Vt = Oh(yt(B), yt(Z), he, Ke, Ae, lt);
          return lt.delete(B), Vt;
        case k:
          if (Nc)
            return Nc.call(B) == Nc.call(Z);
      }
      return !1;
    }
    function ES(B, Z, ae, he, Ke, Ae) {
      var lt = ae & o, yt = Ih(B), Ct = yt.length, nt = Ih(Z), Vt = nt.length;
      if (Ct != Vt && !lt)
        return !1;
      for (var hr = Ct; hr--; ) {
        var Rt = yt[hr];
        if (!(lt ? Rt in Z : ye.call(Z, Rt)))
          return !1;
      }
      var Xt = Ae.get(B);
      if (Xt && Ae.get(Z))
        return Xt == Z;
      var Kt = !0;
      Ae.set(B, Z), Ae.set(Z, B);
      for (var un = lt; ++hr < Ct; ) {
        Rt = yt[hr];
        var Jr = B[Rt], Gn = Z[Rt];
        if (he)
          var Gh = lt ? he(Gn, Jr, Rt, Z, B, Ae) : he(Jr, Gn, Rt, B, Z, Ae);
        if (!(Gh === void 0 ? Jr === Gn || Ke(Jr, Gn, ae, he, Ae) : Gh)) {
          Kt = !1;
          break;
        }
        un || (un = Rt == "constructor");
      }
      if (Kt && !un) {
        var as = B.constructor, ss = Z.constructor;
        as != ss && "constructor" in B && "constructor" in Z && !(typeof as == "function" && as instanceof as && typeof ss == "function" && ss instanceof ss) && (Kt = !1);
      }
      return Ae.delete(B), Ae.delete(Z), Kt;
    }
    function Ih(B) {
      return xS(B, OS, NS);
    }
    function os(B, Z) {
      var ae = B.__data__;
      return RS(Z) ? ae[typeof Z == "string" ? "string" : "hash"] : ae.map;
    }
    function yo(B, Z) {
      var ae = we(B, Z);
      return bS(ae) ? ae : void 0;
    }
    function _S(B) {
      var Z = ye.call(B, fr), ae = B[fr];
      try {
        B[fr] = void 0;
        var he = !0;
      } catch {
      }
      var Ke = st.call(B);
      return he && (Z ? B[fr] = ae : delete B[fr]), Ke;
    }
    var NS = He ? function(B) {
      return B == null ? [] : (B = Object(B), J(He(B), function(Z) {
        return es.call(B, Z);
      }));
    } : IS, cn = _i;
    (xo && cn(new xo(new ArrayBuffer(1))) != F || Fn && cn(new Fn()) != v || Ln && cn(Ln.resolve()) != b || Ec && cn(new Ec()) != R || _c && cn(new _c()) != A) && (cn = function(B) {
      var Z = _i(B), ae = Z == y ? B.constructor : void 0, he = ae ? $n(ae) : "";
      if (he)
        switch (he) {
          case Uw:
            return F;
          case Hw:
            return v;
          case Ww:
            return b;
          case Yw:
            return R;
          case qw:
            return A;
        }
      return Z;
    });
    function DS(B, Z) {
      return Z = Z ?? a, !!Z && (typeof B == "number" || H.test(B)) && B > -1 && B % 1 == 0 && B < Z;
    }
    function RS(B) {
      var Z = typeof B;
      return Z == "string" || Z == "number" || Z == "symbol" || Z == "boolean" ? B !== "__proto__" : B === null;
    }
    function MS(B) {
      return !!at && at in B;
    }
    function TS(B) {
      var Z = B && B.constructor, ae = typeof Z == "function" && Z.prototype || ge;
      return B === ae;
    }
    function jS(B) {
      return st.call(B);
    }
    function $n(B) {
      if (B != null) {
        try {
          return Xe.call(B);
        } catch {
        }
        try {
          return B + "";
        } catch {
        }
      }
      return "";
    }
    function Fh(B, Z) {
      return B === Z || B !== B && Z !== Z;
    }
    var kS = Ph(/* @__PURE__ */ function() {
      return arguments;
    }()) ? Ph : function(B) {
      return Ni(B) && ye.call(B, "callee") && !es.call(B, "callee");
    }, is = Array.isArray;
    function PS(B) {
      return B != null && Bh(B.length) && !Lh(B);
    }
    var Dc = St || FS;
    function AS(B, Z) {
      return Ah(B, Z);
    }
    function Lh(B) {
      if (!zh(B))
        return !1;
      var Z = _i(B);
      return Z == p || Z == g || Z == c || Z == w;
    }
    function Bh(B) {
      return typeof B == "number" && B > -1 && B % 1 == 0 && B <= a;
    }
    function zh(B) {
      var Z = typeof B;
      return B != null && (Z == "object" || Z == "function");
    }
    function Ni(B) {
      return B != null && typeof B == "object";
    }
    var $h = U ? ce(U) : wS;
    function OS(B) {
      return PS(B) ? mS(B) : SS(B);
    }
    function IS() {
      return [];
    }
    function FS() {
      return !1;
    }
    e.exports = AS;
  }(Ii, Ii.exports)), Ii.exports;
}
var Uj = Vj();
const Hj = /* @__PURE__ */ Td(Uj), Wj = Mr((e) => ({
  config: {},
  setConfig: (t, r) => e((n) => ({
    config: { ...n.config, [t]: r }
  })),
  setAll: (t) => e({ config: t })
})), ox = wl({
  config: {},
  setConfig: (e, t) => {
  }
}), Yj = ({
  children: e,
  initialValue: t = {},
  onChange: r
}) => {
  const { config: n, setConfig: o, setAll: i } = Wj(), a = bt({});
  return ze(() => {
    Object.keys(t).length > 0 && i(t);
  }, [t, i]), ze(() => {
    r && Object.keys(n).length > 0 && !Hj(n, a.current) && (a.current = { ...n }, r(n));
  }, [n, r]), /* @__PURE__ */ f.jsx(ox.Provider, { value: { config: n, setConfig: o }, children: e });
}, qj = () => Sl(ox);
function Xj({ field: e, value: t, onChange: r }) {
  return /* @__PURE__ */ f.jsx(We, { type: "text", value: t || "", placeholder: e.placeholder, onChange: (n) => r(n.target.value) });
}
function Kj({ value: e, onChange: t }) {
  return /* @__PURE__ */ f.jsx(bn, { checked: !!e, onCheckedChange: t });
}
function Zj({ value: e, onChange: t }) {
  return /* @__PURE__ */ f.jsx(
    We,
    {
      type: "number",
      value: e ?? "",
      onChange: (r) => t(Number(r.target.value))
    }
  );
}
function Qj({ value: e, onChange: t }) {
  return /* @__PURE__ */ f.jsx(We, { type: "color", value: e, onChange: (r) => t(r.target.value) });
}
function Jj({ field: e, value: t, onChange: r }) {
  return /* @__PURE__ */ f.jsxs(Ur, { value: t, onValueChange: r, children: [
    /* @__PURE__ */ f.jsx(_r, { children: t }),
    /* @__PURE__ */ f.jsx(Nr, { children: e.options.map((n) => /* @__PURE__ */ f.jsx(vt, { value: n.value, children: n.label }, n.value)) })
  ] });
}
function ek({ field: e, value: t, onChange: r }) {
  return /* @__PURE__ */ f.jsx(
    mi,
    {
      value: t || "",
      placeholder: e.placeholder,
      rows: e.rows || 3,
      onChange: (n) => r(n.target.value)
    }
  );
}
function tk({ value: e = [], onChange: t }) {
  const [r, n] = Ce(null), [o, i] = Ce(null), a = bt(null), s = () => {
    const m = [...e, "#5470c6"];
    t?.(m);
  }, l = (m) => {
    const x = e.filter((y, b) => b !== m);
    t?.(x);
  }, c = (m, x) => {
    const y = [...e];
    y[m] = x, t?.(y);
  }, u = (m, x) => {
    const y = x === "up" ? m - 1 : m + 1;
    if (y < 0 || y >= e.length) return;
    const b = [...e], [w] = b.splice(m, 1);
    b.splice(y, 0, w), t?.(b);
  }, d = (m, x) => {
    n(x), m.dataTransfer.effectAllowed = "move", m.dataTransfer.setData("text/html", "");
  }, h = (m, x) => {
    m.preventDefault(), m.dataTransfer.dropEffect = "move", i(x);
  }, p = () => {
    i(null);
  }, g = (m, x) => {
    if (m.preventDefault(), r === null || r === x) return;
    const y = [...e], [b] = y.splice(r, 1);
    y.splice(x, 0, b), t?.(y), n(null), i(null);
  }, v = () => {
    n(null), i(null);
  };
  return /* @__PURE__ */ f.jsxs("div", { className: "space-y-2", children: [
    /* @__PURE__ */ f.jsxs("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ f.jsxs("span", { className: "text-sm font-medium", children: [
        "Colors (",
        e.length,
        ")"
      ] }),
      /* @__PURE__ */ f.jsx(
        Fe,
        {
          type: "button",
          variant: "outline",
          size: "sm",
          onClick: s,
          className: "h-6 px-2 text-xs",
          children: /* @__PURE__ */ f.jsx(Vo, { className: "h-3 w-3 mr-1" })
        }
      )
    ] }),
    /* @__PURE__ */ f.jsx("div", { className: "space-y-1", children: e.map((m, x) => /* @__PURE__ */ f.jsxs(
      "div",
      {
        ref: a,
        draggable: !0,
        onDragStart: (y) => d(y, x),
        onDragOver: (y) => h(y, x),
        onDragLeave: p,
        onDrop: (y) => g(y, x),
        onDragEnd: v,
        className: `flex items-center gap-1.5 p-1.5 rounded-md transition-all duration-200 ${r === x ? "bg-primary/20 shadow-lg" : o === x ? "bg-primary/10" : "bg-muted/30 hover:bg-muted/50"}`,
        children: [
          /* @__PURE__ */ f.jsx(
            "div",
            {
              className: "cursor-grab active:cursor-grabbing p-0.5 hover:bg-muted/50 rounded",
              title: "Drag to reorder",
              children: /* @__PURE__ */ f.jsx(yg, { className: "h-3 w-3 text-muted-foreground" })
            }
          ),
          /* @__PURE__ */ f.jsxs("div", { className: "flex items-center gap-1.5 flex-1", children: [
            /* @__PURE__ */ f.jsx(
              We,
              {
                type: "color",
                value: m,
                onChange: (y) => c(x, y.target.value),
                className: "w-8 h-6 p-0.5 border-0"
              }
            ),
            /* @__PURE__ */ f.jsx(
              We,
              {
                type: "text",
                value: m,
                onChange: (y) => c(x, y.target.value),
                className: "flex-1 h-6 text-xs",
                placeholder: "#000000"
              }
            )
          ] }),
          /* @__PURE__ */ f.jsxs("div", { className: "flex items-center gap-0.5", children: [
            /* @__PURE__ */ f.jsx(
              Fe,
              {
                type: "button",
                variant: "ghost",
                size: "sm",
                onClick: () => u(x, "up"),
                disabled: x === 0,
                className: "h-5 w-5 p-0",
                children: /* @__PURE__ */ f.jsx(Pd, { className: "h-3 w-3" })
              }
            ),
            /* @__PURE__ */ f.jsx(
              Fe,
              {
                type: "button",
                variant: "ghost",
                size: "sm",
                onClick: () => u(x, "down"),
                disabled: x === e.length - 1,
                className: "h-5 w-5 p-0",
                children: /* @__PURE__ */ f.jsx(kn, { className: "h-3 w-3" })
              }
            ),
            /* @__PURE__ */ f.jsx(
              Fe,
              {
                type: "button",
                variant: "ghost",
                size: "sm",
                onClick: () => l(x),
                className: "h-5 w-5 p-0 text-destructive hover:text-destructive",
                disabled: e.length <= 1,
                children: /* @__PURE__ */ f.jsx(Rl, { className: "h-3 w-3" })
              }
            )
          ] })
        ]
      },
      x
    )) }),
    e.length === 0 && /* @__PURE__ */ f.jsxs("div", { className: "text-center text-sm text-muted-foreground py-4 border-2 border-dashed border-muted rounded-md", children: [
      /* @__PURE__ */ f.jsx(Vo, { className: "h-6 w-6 mx-auto mb-1 text-muted-foreground" }),
      /* @__PURE__ */ f.jsx("p", { className: "text-xs", children: "No colors added" }),
      /* @__PURE__ */ f.jsx("p", { className: "text-xs text-muted-foreground", children: 'Click "Add" to get started' })
    ] })
  ] });
}
const rk = {
  input: Xj,
  switch: Kj,
  number: Zj,
  color: Qj,
  select: Jj,
  textarea: ek,
  colorArray: tk
}, nk = ({ label: e, layout: t = "vertical", children: r }) => {
  const n = t === "horizontal";
  return /* @__PURE__ */ f.jsxs("div", { className: `${n ? "flex items-center justify-between gap-4" : "flex flex-col gap-1"}`, children: [
    e && /* @__PURE__ */ f.jsx(Te, { className: Ir("text-xs shrink-0 font-normal", n ? "w-24" : ""), children: e }),
    /* @__PURE__ */ f.jsx("div", { className: `${n && e ? "flex-1" : ""}`, children: r })
  ] });
};
function ok({ field: e, layout: t = "horizontal" }) {
  const { config: r, setConfig: n } = qj(), o = r[e.name] ?? e.default, i = (s) => n(e.name, s), a = rk[e.type];
  return a ? /* @__PURE__ */ f.jsx(nk, { label: e.label, layout: t, children: /* @__PURE__ */ f.jsx(a, { field: e, value: o, onChange: i, layout: t }) }) : null;
}
const ik = ({ schema: e, initialValue: t = {}, onChange: r }) => /* @__PURE__ */ f.jsx(Yj, { initialValue: t, onChange: r, children: /* @__PURE__ */ f.jsx("div", { className: "divide-y divide-border", children: e?.sections?.map((n, o) => /* @__PURE__ */ f.jsx(Xl, { title: n.title, icon: null, children: n.settings.map((i) => /* @__PURE__ */ f.jsx(ok, { field: i }, i.name)) }, `${n.type}-${o}`)) }) }), ak = ({ children: e }) => /* @__PURE__ */ f.jsx("div", { className: "space-y-3", children: e }), sk = ({ children: e }) => /* @__PURE__ */ f.jsx("div", { className: "grid grid-cols-2 gap-3", children: e }), bs = Me.memo(function({
  label: t,
  value: r,
  unit: n = "px",
  propertyKey: o,
  onChange: i,
  disabled: a = !1
}) {
  return /* @__PURE__ */ f.jsxs("div", { className: "flex items-center justify-between", children: [
    /* @__PURE__ */ f.jsxs(Te, { className: "text-xs font-medium w-10", children: [
      " ",
      t,
      " "
    ] }),
    /* @__PURE__ */ f.jsxs("div", { className: "flex flex-1 items-center", children: [
      /* @__PURE__ */ f.jsx(
        We,
        {
          type: "number",
          value: Math.round(r),
          className: "h-7 text-xs px-2 text-right",
          onChange: (s) => !a && i(o, Math.round(+s.target.value)),
          disabled: a
        }
      ),
      /* @__PURE__ */ f.jsxs("span", { className: "text-xs text-muted-foreground ml-1", children: [
        " ",
        n,
        " "
      ] })
    ] })
  ] });
}), lk = Me.memo(function({ value: t, onChange: r }) {
  const n = t.locked === !0, o = Me.useCallback(
    (i, a) => {
      if (r && !n) {
        const s = { ...t, [i]: a };
        r(s);
      }
    },
    [r, t, n]
  );
  return /* @__PURE__ */ f.jsxs(Xl, { title: "Position & Size", icon: /* @__PURE__ */ f.jsx(Nl, { className: "h-4 w-4" }), className: "border-b", children: [
    n && /* @__PURE__ */ f.jsx("div", { className: "mb-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded text-xs text-yellow-800 dark:text-yellow-200", children: "🔒 This node is locked and cannot be moved or resized" }),
    /* @__PURE__ */ f.jsxs(sk, { children: [
      /* @__PURE__ */ f.jsx(bs, { label: "X", propertyKey: "left", value: t.left, onChange: o, disabled: n }),
      /* @__PURE__ */ f.jsx(bs, { label: "Y", propertyKey: "top", value: t.top, onChange: o, disabled: n }),
      /* @__PURE__ */ f.jsx(bs, { label: "W", propertyKey: "width", value: t.width, onChange: o, disabled: n }),
      /* @__PURE__ */ f.jsx(bs, { label: "H", propertyKey: "height", value: t.height, onChange: o, disabled: n })
    ] }),
    /* @__PURE__ */ f.jsx(ak, { children: /* @__PURE__ */ f.jsxs("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ f.jsx(Te, { className: "text-xs font-medium w-14", children: " Rotation " }),
      /* @__PURE__ */ f.jsxs("div", { className: "flex flex-1 items-center gap-2", children: [
        /* @__PURE__ */ f.jsx(
          wn,
          {
            value: [Math.round(t.rotation || 0)],
            min: 0,
            max: 360,
            step: 1,
            className: "w-20",
            onValueChange: ([i]) => !n && o("rotation", Math.round(i)),
            disabled: n
          }
        ),
        /* @__PURE__ */ f.jsxs("div", { className: "inline-flex w-20", children: [
          /* @__PURE__ */ f.jsx(
            We,
            {
              type: "number",
              value: Math.round(t.rotation || 0),
              className: "w-16 h-7 text-xs px-2",
              step: "1",
              onChange: (i) => !n && o("rotation", Math.round(+i.target.value)),
              disabled: n
            }
          ),
          /* @__PURE__ */ f.jsx("span", { className: "text-xs text-muted-foreground", children: "°" })
        ] })
      ] })
    ] }) })
  ] });
});
function ck() {
  const e = Yt(), t = ke(), r = br(), { selectedDoc: n, selectedNodes: o } = e.getCurrentSelection(), i = o[0];
  if (i?.type) {
    const a = r.get(i?.type);
    return /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
      /* @__PURE__ */ f.jsx(
        lk,
        {
          value: i.position,
          onChange: (s) => {
            t.updateNode(n.id, i.id, { position: s });
          }
        }
      ),
      a?.propertiesSchema && /* @__PURE__ */ f.jsx(
        ik,
        {
          initialValue: i.props || {},
          schema: a.propertiesSchema,
          onChange: (s) => {
            t.updateNode(n.id, i.id, { props: s });
          }
        }
      )
    ] });
  }
  return /* @__PURE__ */ f.jsx("div", { children: "No selected widget" });
}
const _f = () => ({
  project: ke.getState(),
  editor: Yt.getState()
});
Tr(
  {
    id: "data",
    title: "Data",
    isDefault: !0,
    viewContainer: () => /* @__PURE__ */ f.jsx(TT, {})
  },
  At.AuxiliaryBar
);
Tr(
  {
    id: "style",
    title: "Style",
    order: 0,
    viewContainer: () => /* @__PURE__ */ f.jsx(ck, {})
  },
  At.AuxiliaryBar
);
Tr(
  {
    id: "events",
    title: "Events",
    viewContainer: () => /* @__PURE__ */ f.jsx(Gj, {})
  },
  At.AuxiliaryBar
);
Tr(
  {
    id: "effects",
    title: "Effects",
    viewContainer: () => /* @__PURE__ */ f.jsx(dj, {})
  },
  At.AuxiliaryBar
);
const ix = C.memo(() => /* @__PURE__ */ f.jsx("div", { className: "flex items-center justify-center h-full", children: /* @__PURE__ */ f.jsx(Jn, { className: "w-full border-none shadow-none bg-transparent", children: /* @__PURE__ */ f.jsxs(Uo, { className: "flex flex-col items-center justify-center p-8 text-center", children: [
  /* @__PURE__ */ f.jsx("div", { className: "mb-4 p-3 rounded-full bg-muted", children: /* @__PURE__ */ f.jsx(AE, { className: "h-8 w-8 text-muted-foreground" }) }),
  /* @__PURE__ */ f.jsx("h3", { className: "text-lg font-semibold text-foreground mb-2", children: "No Node Selected" }),
  /* @__PURE__ */ f.jsx("p", { className: "text-sm text-muted-foreground mb-6 max-w-sm", children: "Select a node for configuration" })
] }) }) }));
ix.displayName = "EmptyView";
const ax = C.memo(({ view: e, context: t }) => /* @__PURE__ */ f.jsx(Wi, { value: e.id, className: "mt-0", children: e.viewContainer({ context: t }) }, e.id));
ax.displayName = "MemoizedTabsContent";
const sx = C.memo(() => {
  const e = Yt(
    sa((d) => {
      const { selectedNodes: h } = d.getCurrentSelection();
      return h;
    })
  ), t = C.useMemo(() => e[0], [e]), r = Mg(t?.type), n = C.useMemo(() => _f(), []), o = or(
    sa((d) => d.getViewsByLocation(At.AuxiliaryBar))
  ), i = C.useMemo(() => r ? o.filter((d) => {
    switch (d.id) {
      case "data":
        return !!r.dataConfigSchema;
      case "style":
        return !0;
      case "events":
        return !!r.eventConfigSchema;
      case "effects":
        return !0;
      default:
        return !0;
    }
  }) : o, [o, r]), a = C.useMemo(() => i.find((d) => d.isDefault)?.id || i[0]?.id, [i]), s = C.useMemo(() => `h-full ${t ? "overflow-y-auto" : "overflow-hidden"}`, [t]), l = C.useMemo(() => ({ gridTemplateColumns: `repeat(${i.length}, 1fr)` }), [i.length]), c = C.useMemo(() => i.map((d) => /* @__PURE__ */ f.jsx(ax, { view: d, context: n }, d.id)), [i, n]), u = C.useMemo(() => i.map((d) => /* @__PURE__ */ f.jsx(Hi, { value: d.id, className: "text-xs h-8", children: d.title }, d.id)), [i]);
  return /* @__PURE__ */ f.jsx(f.Fragment, { children: /* @__PURE__ */ f.jsx("div", { className: s, children: t ? /* @__PURE__ */ f.jsx(f.Fragment, { children: /* @__PURE__ */ f.jsxs(m0, { defaultValue: a, className: "w-full h-full", children: [
    /* @__PURE__ */ f.jsx(cf, { className: "grid w-full m-0 rounded-none h-10 sticky top-0 z-10", style: l, children: u }),
    /* @__PURE__ */ f.jsx(f.Fragment, { children: c })
  ] }) }) : /* @__PURE__ */ f.jsx(ix, {}) }) });
});
sx.displayName = "Auxiliarybar";
function Nf(e, t) {
  for (var r = e.length, n = 0; n < r; ++n)
    if (t(e[n], n))
      return !0;
  return !1;
}
function lx(e, t) {
  for (var r = e.length, n = 0; n < r; ++n)
    if (t(e[n], n))
      return e[n];
  return null;
}
function cx(e) {
  var t = e;
  if (typeof t > "u") {
    if (typeof navigator > "u" || !navigator)
      return "";
    t = navigator.userAgent || "";
  }
  return t.toLowerCase();
}
function Df(e, t) {
  try {
    return new RegExp(e, "g").exec(t);
  } catch {
    return null;
  }
}
function uk() {
  if (typeof navigator > "u" || !navigator || !navigator.userAgentData)
    return !1;
  var e = navigator.userAgentData, t = e.brands || e.uaList;
  return !!(t && t.length);
}
function dk(e, t) {
  var r = Df("(" + e + ")((?:\\/|\\s|:)([0-9|\\.|_]+))", t);
  return r ? r[3] : "";
}
function Vu(e) {
  return e.replace(/_/g, ".");
}
function Fi(e, t) {
  var r = null, n = "-1";
  return Nf(e, function(o) {
    var i = Df("(" + o.test + ")((?:\\/|\\s|:)([0-9|\\.|_]+))?", t);
    return !i || o.brand ? !1 : (r = o, n = i[3] || "-1", o.versionAlias ? n = o.versionAlias : o.versionTest && (n = dk(o.versionTest.toLowerCase(), t) || n), n = Vu(n), !0);
  }), {
    preset: r,
    version: n
  };
}
function ws(e, t) {
  var r = {
    brand: "",
    version: "-1"
  };
  return Nf(e, function(n) {
    var o = ux(t, n);
    return o ? (r.brand = n.id, r.version = n.versionAlias || o.version, r.version !== "-1") : !1;
  }), r;
}
function ux(e, t) {
  return lx(e, function(r) {
    var n = r.brand;
    return Df("" + t.test, n.toLowerCase());
  });
}
var dx = [{
  test: "phantomjs",
  id: "phantomjs"
}, {
  test: "whale",
  id: "whale"
}, {
  test: "edgios|edge|edg",
  id: "edge"
}, {
  test: "msie|trident|windows phone",
  id: "ie",
  versionTest: "iemobile|msie|rv"
}, {
  test: "miuibrowser",
  id: "miui browser"
}, {
  test: "samsungbrowser",
  id: "samsung internet"
}, {
  test: "samsung",
  id: "samsung internet",
  versionTest: "version"
}, {
  test: "chrome|crios",
  id: "chrome"
}, {
  test: "firefox|fxios",
  id: "firefox"
}, {
  test: "android",
  id: "android browser",
  versionTest: "version"
}, {
  test: "safari|iphone|ipad|ipod",
  id: "safari",
  versionTest: "version"
}], fx = [{
  test: "(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",
  id: "chrome",
  versionTest: "chrome"
}, {
  test: "chromium",
  id: "chrome"
}, {
  test: "whale",
  id: "chrome",
  versionAlias: "-1",
  brand: !0
}], Uu = [{
  test: "applewebkit",
  id: "webkit",
  versionTest: "applewebkit|safari"
}], hx = [{
  test: "(?=(iphone|ipad))(?!(.*version))",
  id: "webview"
}, {
  test: "(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",
  id: "webview"
}, {
  // test webview
  test: "webview",
  id: "webview"
}], px = [{
  test: "windows phone",
  id: "windows phone"
}, {
  test: "windows 2000",
  id: "window",
  versionAlias: "5.0"
}, {
  test: "windows nt",
  id: "window"
}, {
  test: "win32|windows",
  id: "window"
}, {
  test: "iphone|ipad|ipod",
  id: "ios",
  versionTest: "iphone os|cpu os"
}, {
  test: "macos|macintel|mac os x",
  id: "mac"
}, {
  test: "android|linux armv81",
  id: "android"
}, {
  test: "tizen",
  id: "tizen"
}, {
  test: "webos|web0s",
  id: "webos"
}];
function vx(e) {
  return !!Fi(hx, e).preset;
}
function fk(e) {
  var t = cx(e), r = !!/mobi/g.exec(t), n = {
    name: "unknown",
    version: "-1",
    majorVersion: -1,
    webview: vx(t),
    chromium: !1,
    chromiumVersion: "-1",
    webkit: !1,
    webkitVersion: "-1"
  }, o = {
    name: "unknown",
    version: "-1",
    majorVersion: -1
  }, i = Fi(dx, t), a = i.preset, s = i.version, l = Fi(px, t), c = l.preset, u = l.version, d = Fi(fx, t);
  if (n.chromium = !!d.preset, n.chromiumVersion = d.version, !n.chromium) {
    var h = Fi(Uu, t);
    n.webkit = !!h.preset, n.webkitVersion = h.version;
  }
  return c && (o.name = c.id, o.version = u, o.majorVersion = parseInt(u, 10)), a && (n.name = a.id, n.version = s, n.webview && o.name === "ios" && n.name !== "safari" && (n.webview = !1)), n.majorVersion = parseInt(n.version, 10), {
    browser: n,
    os: o,
    isMobile: r,
    isHints: !1
  };
}
function hk(e) {
  var t = navigator.userAgentData, r = (t.uaList || t.brands).slice(), n = t.mobile || !1, o = r[0], i = (t.platform || navigator.platform).toLowerCase(), a = {
    name: o.brand,
    version: o.version,
    majorVersion: -1,
    webkit: !1,
    webkitVersion: "-1",
    chromium: !1,
    chromiumVersion: "-1",
    webview: !!ws(hx, r).brand || vx(cx())
  }, s = {
    name: "unknown",
    version: "-1",
    majorVersion: -1
  };
  a.webkit = !a.chromium && Nf(Uu, function(h) {
    return ux(r, h);
  });
  var l = ws(fx, r);
  if (a.chromium = !!l.brand, a.chromiumVersion = l.version || "-1", !a.chromium) {
    var c = ws(Uu, r);
    a.webkit = !!c.brand, a.webkitVersion = c.version || "-1";
  }
  var u = lx(px, function(h) {
    return new RegExp("" + h.test, "g").exec(i);
  });
  s.name = u ? u.id : "";
  {
    var d = ws(dx, r);
    a.name = d.brand || a.name, a.version = d.brand && e ? e.uaFullVersion : d.version;
  }
  return a.webkit && (s.name = n ? "ios" : "mac"), s.name === "ios" && a.webview && (a.version = "-1"), s.version = Vu(s.version), a.version = Vu(a.version), s.majorVersion = parseInt(s.version, 10), a.majorVersion = parseInt(a.version, 10), {
    browser: a,
    os: s,
    isMobile: n,
    isHints: !0
  };
}
function pk(e) {
  return uk() ? hk() : fk(e);
}
function vk(e) {
  for (var t = [], r = 1; r < arguments.length; r++)
    t[r - 1] = arguments[r];
  return t.map(function(n) {
    return n.split(" ").map(function(o) {
      return o ? "" + e + o : "";
    }).join(" ");
  }).join(" ");
}
function gk(e, t) {
  return t.replace(/([^}{]*){/gm, function(r, n) {
    return n.replace(/\.([^{,\s\d.]+)/g, "." + e + "$1") + "{";
  });
}
function Sn(e, t) {
  return function(r) {
    r && (e[t] = r);
  };
}
function gx(e, t, r) {
  return function(n) {
    n && (e[t][r] = n);
  };
}
function mk(e, t) {
  return function(r) {
    var n = r.prototype;
    e.forEach(function(o) {
      t(n, o);
    });
  };
}
function mx(e, t) {
  return t === void 0 && (t = {}), function(r, n) {
    e.forEach(function(o) {
      var i = t[o] || o;
      i in r || (r[i] = function() {
        for (var a, s = [], l = 0; l < arguments.length; l++)
          s[l] = arguments[l];
        var c = (a = this[n])[o].apply(a, s);
        return c === this[n] ? this : c;
      });
    });
  };
}
var xx = "rgb", Rf = "rgba", yx = "hsl", bx = "hsla", xk = [xx, Rf, yx, bx], va = "function", rc = "property", Mf = "array", za = "object", wx = "string", Sx = "number", ga = "undefined", nc = typeof window !== ga, qn = typeof document !== ga && document, Wp = ["webkit", "ms", "moz", "o"], Tf = function(e) {
  if (!qn)
    return "";
  var t = (qn.body || qn.documentElement).style, r = Wp.length;
  if (typeof t[e] !== ga)
    return e;
  for (var n = 0; n < r; ++n) {
    var o = "-" + Wp[n] + "-" + e;
    if (typeof t[o] !== ga)
      return o;
  }
  return "";
}, Yp = /* @__PURE__ */ Tf("transform"), qc = /* @__PURE__ */ Tf("filter"), $a = /* @__PURE__ */ Tf("animation"), yk = /* @__PURE__ */ $a.replace("animation", "keyframes"), bk = [{
  open: "(",
  close: ")"
}, {
  open: '"',
  close: '"'
}, {
  open: "'",
  close: "'"
}, {
  open: '\\"',
  close: '\\"'
}, {
  open: "\\'",
  close: "\\'"
}], gt = 1e-7, Ss = {
  cm: function(e) {
    return e * 96 / 2.54;
  },
  mm: function(e) {
    return e * 96 / 254;
  },
  in: function(e) {
    return e * 96;
  },
  pt: function(e) {
    return e * 96 / 72;
  },
  pc: function(e) {
    return e * 96 / 6;
  },
  "%": function(e, t) {
    return e * t / 100;
  },
  vw: function(e, t) {
    return t === void 0 && (t = window.innerWidth), e / 100 * t;
  },
  vh: function(e, t) {
    return t === void 0 && (t = window.innerHeight), e / 100 * t;
  },
  vmax: function(e, t) {
    return t === void 0 && (t = Math.max(window.innerWidth, window.innerHeight)), e / 100 * t;
  },
  vmin: function(e, t) {
    return t === void 0 && (t = Math.min(window.innerWidth, window.innerHeight)), e / 100 * t;
  }
};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function wk() {
  for (var e = 0, t = 0, r = arguments.length; t < r; t++) e += arguments[t].length;
  for (var n = Array(e), o = 0, t = 0; t < r; t++) for (var i = arguments[t], a = 0, s = i.length; a < s; a++, o++) n[o] = i[a];
  return n;
}
function Zo(e, t, r, n) {
  return (e * n + t * r) / (r + n);
}
function gr(e) {
  return typeof e === ga;
}
function it(e) {
  return e && typeof e === za;
}
function Ue(e) {
  return Array.isArray(e);
}
function rt(e) {
  return typeof e === wx;
}
function ma(e) {
  return typeof e === Sx;
}
function Lt(e) {
  return typeof e === va;
}
function Sk(e, t) {
  var r = e === "" || e == " ", n = t === "" || t == " ";
  return n && r || e === t;
}
function Cx(e, t, r, n, o) {
  var i = jf(e, t, r);
  return i ? r : Ck(e, t, r + 1, n, o);
}
function jf(e, t, r) {
  if (!e.ignore)
    return null;
  var n = t.slice(Math.max(r - 3, 0), r + 3).join("");
  return new RegExp(e.ignore).exec(n);
}
function Ck(e, t, r, n, o) {
  for (var i = function(c) {
    var u = t[c].trim();
    if (u === e.close && !jf(e, t, c))
      return {
        value: c
      };
    var d = c, h = zt(o, function(p) {
      var g = p.open;
      return g === u;
    });
    if (h && (d = Cx(h, t, c, n, o)), d === -1)
      return a = c, "break";
    c = d, a = c;
  }, a, s = r; s < n; ++s) {
    var l = i(s);
    if (s = a, typeof l == "object") return l.value;
    if (l === "break") break;
  }
  return -1;
}
function xa(e, t) {
  var r = rt(t) ? {
    separator: t
  } : t, n = r.separator, o = n === void 0 ? "," : n, i = r.isSeparateFirst, a = r.isSeparateOnlyOpenClose, s = r.isSeparateOpenClose, l = s === void 0 ? a : s, c = r.openCloseCharacters, u = c === void 0 ? bk : c, d = u.map(function(T) {
    var k = T.open, j = T.close;
    return k === j ? k : k + "|" + j;
  }).join("|"), h = "(\\s*" + o + "\\s*|" + d + "|\\s+)", p = new RegExp(h, "g"), g = e.split(p).filter(function(T) {
    return T && T !== "undefined";
  }), v = g.length, m = [], x = [];
  function y() {
    return x.length ? (m.push(x.join("")), x = [], !0) : !1;
  }
  for (var b = function(T) {
    var k = g[T].trim(), j = T, A = zt(u, function(L) {
      var P = L.open;
      return P === k;
    }), $ = zt(u, function(L) {
      var P = L.close;
      return P === k;
    });
    if (A) {
      if (j = Cx(A, g, T, v, u), j !== -1 && l)
        return y() && i || (m.push(g.slice(T, j + 1).join("")), T = j, i) ? (w = T, "break") : (w = T, "continue");
    } else if ($ && !jf($, g, T)) {
      var F = wk(u);
      return F.splice(u.indexOf($), 1), {
        value: xa(e, {
          separator: o,
          isSeparateFirst: i,
          isSeparateOnlyOpenClose: a,
          isSeparateOpenClose: l,
          openCloseCharacters: F
        })
      };
    } else if (Sk(k, o) && !a)
      return y(), i ? (w = T, "break") : (w = T, "continue");
    j === -1 && (j = v - 1), x.push(g.slice(T, j + 1).join("")), T = j, w = T;
  }, w, _ = 0; _ < v; ++_) {
    var R = b(_);
    if (_ = w, typeof R == "object") return R.value;
    if (R === "break") break;
  }
  return x.length && m.push(x.join("")), m;
}
function an(e) {
  return xa(e, "");
}
function rr(e) {
  return xa(e, ",");
}
function oc(e) {
  var t = /([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(e);
  return !t || t.length < 4 ? {} : {
    prefix: t[1],
    value: t[2],
    suffix: t[3]
  };
}
function Wr(e) {
  var t = /^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(e);
  if (!t)
    return {
      prefix: "",
      unit: "",
      value: NaN
    };
  var r = t[1], n = t[2], o = t[3];
  return {
    prefix: r,
    unit: o,
    value: parseFloat(n)
  };
}
function Qo(e) {
  return e.replace(/[\s-_]+([^\s-_])/g, function(t, r) {
    return r.toUpperCase();
  });
}
function kf(e, t) {
  return t === void 0 && (t = "-"), e.replace(/([a-z])([A-Z])/g, function(r, n, o) {
    return "" + n + t + o.toLowerCase();
  });
}
function Xc(e) {
  return [].slice.call(e);
}
function ya() {
  return Date.now ? Date.now() : (/* @__PURE__ */ new Date()).getTime();
}
function Yr(e, t, r) {
  r === void 0 && (r = -1);
  for (var n = e.length, o = 0; o < n; ++o)
    if (t(e[o], o, e))
      return o;
  return r;
}
function zt(e, t, r) {
  var n = Yr(e, t);
  return n > -1 ? e[n] : r;
}
var nl = /* @__PURE__ */ function() {
  var e = ya(), t = nc && (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame);
  return t ? t.bind(window) : function(r) {
    var n = ya(), o = setTimeout(function() {
      r(n - e);
    }, 1e3 / 60);
    return o;
  };
}(), Ex = /* @__PURE__ */ function() {
  var e = nc && (window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.msCancelAnimationFrame);
  return e ? e.bind(window) : function(t) {
    clearTimeout(t);
  };
}();
function ar(e) {
  return Object.keys(e);
}
function Yi(e, t) {
  t === void 0 && (t = []), e.sort(function(r, n) {
    var o = t.indexOf(r), i = t.indexOf(n);
    return i === -1 && o === -1 ? 0 : o === -1 ? 1 : i === -1 ? -1 : o - i;
  });
}
function Ye(e, t) {
  var r = Wr(e), n = r.value, o = r.unit;
  if (it(t)) {
    var i = t[o];
    if (i) {
      if (Lt(i))
        return i(n);
      if (Ss[o])
        return Ss[o](n, i);
    }
  } else if (o === "%")
    return n * t / 100;
  return Ss[o] ? Ss[o](n) : n;
}
function ba(e, t, r) {
  return Math.max(t, Math.min(e, r));
}
function qp(e, t, r, n) {
  return n === void 0 && (n = e[0] / e[1]), [[De(t[0], gt), De(t[0] / n, gt)], [De(t[1] * n, gt), De(t[1], gt)]].filter(function(o) {
    return o.every(function(i, a) {
      var s = t[a], l = De(s, gt);
      return r ? i <= s || i <= l : i >= s || i >= l;
    });
  })[0] || e;
}
function Pf(e, t, r, n) {
  if (!n)
    return e.map(function(p, g) {
      return ba(p, t[g], r[g]);
    });
  var o = e[0], i = e[1], a = n === !0 ? o / i : n, s = qp(e, t, !1, a), l = s[0], c = s[1], u = qp(e, r, !0, a), d = u[0], h = u[1];
  return o < l || i < c ? (o = l, i = c) : (o > d || i > h) && (o = d, i = h), [o, i];
}
function Ek(e) {
  for (var t = e.length, r = 0, n = t - 1; n >= 0; --n)
    r += e[n];
  return r;
}
function Hu(e) {
  for (var t = e.length, r = 0, n = t - 1; n >= 0; --n)
    r += e[n];
  return t ? r / t : 0;
}
function dt(e, t) {
  var r = t[0] - e[0], n = t[1] - e[1], o = Math.atan2(n, r);
  return o >= 0 ? o : o + Math.PI * 2;
}
function _k(e) {
  return [0, 1].map(function(t) {
    return Hu(e.map(function(r) {
      return r[t];
    }));
  });
}
function Xp(e) {
  var t = _k(e), r = dt(t, e[0]), n = dt(t, e[1]);
  return r < n && n - r < Math.PI || r > n && n - r < -Math.PI ? 1 : -1;
}
function zr(e, t) {
  return Math.sqrt(Math.pow((t ? t[0] : 0) - e[0], 2) + Math.pow((t ? t[1] : 0) - e[1], 2));
}
function De(e, t) {
  if (!t)
    return e;
  var r = 1 / t;
  return Math.round(e / t) / r;
}
function Kp(e, t) {
  return e.forEach(function(r, n) {
    e[n] = De(e[n], t);
  }), e;
}
function Nk(e) {
  for (var t = [], r = 0; r < e; ++r)
    t.push(r);
  return t;
}
function Dk(e) {
  return e.reduce(function(t, r) {
    return t.concat(r);
  }, []);
}
function Rk(e) {
  return e.replace("#", "");
}
function Zp(e) {
  var t = Rk(e), r = parseInt(t.substring(0, 2), 16), n = parseInt(t.substring(2, 4), 16), o = parseInt(t.substring(4, 6), 16), i = parseInt(t.substring(6, 8), 16) / 255;
  return isNaN(i) && (i = 1), [r, n, o, i];
}
function Mk(e) {
  var t = e.charAt(1), r = e.charAt(2), n = e.charAt(3), o = e.charAt(4), i = ["#", t, t, r, r, n, n, o, o];
  return i.join("");
}
function Tk(e) {
  var t, r = e[0], n = e[1], o = e[2];
  r < 0 && (r += Math.floor((Math.abs(r) + 360) / 360) * 360), r %= 360;
  var i = (1 - Math.abs(2 * o - 1)) * n, a = i * (1 - Math.abs(r / 60 % 2 - 1)), s = o - i / 2, l;
  return r < 60 ? l = [i, a, 0] : r < 120 ? l = [a, i, 0] : r < 180 ? l = [0, i, a] : r < 240 ? l = [0, a, i] : r < 300 ? l = [a, 0, i] : r < 360 ? l = [i, 0, a] : l = [0, 0, 0], [Math.round((l[0] + s) * 255), Math.round((l[1] + s) * 255), Math.round((l[2] + s) * 255), (t = e[3]) !== null && t !== void 0 ? t : 1];
}
function _x(e) {
  if (e.charAt(0) === "#")
    return e.length === 4 || e.length === 5 ? Zp(Mk(e)) : Zp(e);
  if (e.indexOf("(") !== -1) {
    var t = oc(e), r = t.prefix, n = t.value;
    if (!r || !n)
      return;
    var o = rr(n), i = [0, 0, 0, 1], a = o.length;
    switch (r) {
      case xx:
      case Rf:
        for (var s = 0; s < a; ++s)
          i[s] = parseFloat(o[s]);
        return i;
      case yx:
      case bx:
        for (var s = 0; s < a; ++s)
          o[s].indexOf("%") !== -1 ? i[s] = parseFloat(o[s]) / 100 : i[s] = parseFloat(o[s]);
        return Tk(i);
    }
  }
}
function ol(e, t) {
  return qn ? t ? qn.querySelectorAll(e) : qn.querySelector(e) : t ? [] : null;
}
function ut(e, t) {
  return e.classList ? e.classList.contains(t) : !!e.className.match(new RegExp("(\\s|^)" + t + "(\\s|$)"));
}
function wa(e, t) {
  e.classList ? e.classList.add(t) : e.className += " " + t;
}
function Ro(e, t) {
  if (e.classList)
    e.classList.remove(t);
  else {
    var r = new RegExp("(\\s|^)" + t + "(\\s|$)");
    e.className = e.className.replace(r, " ");
  }
}
function jk(e, t) {
  if (!e || !t || !t.length)
    return {};
  var r;
  if (e instanceof Element)
    r = e;
  else if (e.length)
    r = e[0];
  else
    return {};
  for (var n = {}, o = Ht(r).getComputedStyle(r), i = t.length, a = 0; a < i; ++a)
    n[t[a]] = o[t[a]];
  return n;
}
function tt(e, t, r, n) {
  e.addEventListener(t, r, n);
}
function Qe(e, t, r, n) {
  e.removeEventListener(t, r, n);
}
function xr(e) {
  return e?.ownerDocument || qn;
}
function Af(e) {
  return xr(e).documentElement;
}
function On(e) {
  return xr(e).body;
}
function Ht(e) {
  var t;
  return ((t = e?.ownerDocument) === null || t === void 0 ? void 0 : t.defaultView) || window;
}
function Nx(e) {
  return e && "postMessage" in e && "blur" in e && "self" in e;
}
function Sa(e) {
  return it(e) && e.nodeName && e.nodeType && "ownerDocument" in e;
}
function kk(e, t, r, n, o, i) {
  for (var a = 0; a < o; ++a) {
    var s = r + a * o, l = n + a * o;
    e[s] += e[l] * i, t[s] += t[l] * i;
  }
}
function Pk(e, t, r, n, o) {
  for (var i = 0; i < o; ++i) {
    var a = r + i * o, s = n + i * o, l = e[a], c = t[a];
    e[a] = e[s], e[s] = l, t[a] = t[s], t[s] = c;
  }
}
function Ak(e, t, r, n, o) {
  for (var i = 0; i < n; ++i) {
    var a = r + i * n;
    e[a] /= o, t[a] /= o;
  }
}
function Dx(e, t, r) {
  for (var n = e.slice(), o = 0; o < r; ++o)
    n[o * r + t - 1] = 0, n[(t - 1) * r + o] = 0;
  return n[(t - 1) * (r + 1)] = 1, n;
}
function Dr(e, t) {
  t === void 0 && (t = Math.sqrt(e.length));
  for (var r = e.slice(), n = et(t), o = 0; o < t; ++o) {
    var i = t * o + o;
    if (!De(r[i], gt)) {
      for (var a = o + 1; a < t; ++a)
        if (r[t * o + a]) {
          Pk(r, n, o, a, t);
          break;
        }
    }
    if (!De(r[i], gt))
      return [];
    Ak(r, n, o, t, r[i]);
    for (var a = 0; a < t; ++a) {
      var s = a, l = a + o * t, c = r[l];
      !De(c, gt) || o === a || kk(r, n, s, o, t, -c);
    }
  }
  return n;
}
function Ok(e, t) {
  t === void 0 && (t = Math.sqrt(e.length));
  for (var r = [], n = 0; n < t; ++n)
    for (var o = 0; o < t; ++o)
      r[o * t + n] = e[t * n + o];
  return r;
}
function Rx(e, t) {
  t === void 0 && (t = Math.sqrt(e.length));
  for (var r = [], n = e[t * t - 1], o = 0; o < t - 1; ++o)
    r[o] = e[t * (t - 1) + o] / n;
  return r[t - 1] = 0, r;
}
function Ik(e, t) {
  for (var r = et(t), n = 0; n < t - 1; ++n)
    r[t * (t - 1) + n] = e[n] || 0;
  return r;
}
function io(e, t) {
  for (var r = e.slice(), n = e.length; n < t - 1; ++n)
    r[n] = 0;
  return r[t - 1] = 1, r;
}
function Rr(e, t, r) {
  if (t === void 0 && (t = Math.sqrt(e.length)), t === r)
    return e;
  for (var n = et(r), o = Math.min(t, r), i = 0; i < o - 1; ++i) {
    for (var a = 0; a < o - 1; ++a)
      n[i * r + a] = e[i * t + a];
    n[(i + 1) * r - 1] = e[(i + 1) * t - 1], n[(r - 1) * r + i] = e[(t - 1) * t + i];
  }
  return n[r * r - 1] = e[t * t - 1], n;
}
function il(e) {
  for (var t = [], r = 1; r < arguments.length; r++)
    t[r - 1] = arguments[r];
  var n = et(e);
  return t.forEach(function(o) {
    n = qe(n, o, e);
  }), n;
}
function qe(e, t, r) {
  r === void 0 && (r = Math.sqrt(e.length));
  var n = [], o = e.length / r, i = t.length / o;
  if (o) {
    if (!i)
      return e;
  } else return t;
  for (var a = 0; a < r; ++a)
    for (var s = 0; s < i; ++s) {
      n[s * r + a] = 0;
      for (var l = 0; l < o; ++l)
        n[s * r + a] += e[l * r + a] * t[s * o + l];
    }
  return n;
}
function Ge(e, t) {
  for (var r = Math.min(e.length, t.length), n = e.slice(), o = 0; o < r; ++o)
    n[o] = n[o] + t[o];
  return n;
}
function be(e, t) {
  for (var r = Math.min(e.length, t.length), n = e.slice(), o = 0; o < r; ++o)
    n[o] = n[o] - t[o];
  return n;
}
function Fk(e, t) {
  return t === void 0 && (t = e.length === 6), t ? [e[0], e[1], 0, e[2], e[3], 0, e[4], e[5], 1] : e;
}
function Mx(e, t) {
  return t === void 0 && (t = e.length === 9), t ? [e[0], e[1], e[3], e[4], e[6], e[7]] : e;
}
function Mt(e, t, r) {
  r === void 0 && (r = t.length);
  var n = qe(e, t, r), o = n[r - 1];
  return n.map(function(i) {
    return i / o;
  });
}
function Lk(e, t) {
  return qe(e, [1, 0, 0, 0, 0, Math.cos(t), Math.sin(t), 0, 0, -Math.sin(t), Math.cos(t), 0, 0, 0, 0, 1], 4);
}
function Bk(e, t) {
  return qe(e, [Math.cos(t), 0, -Math.sin(t), 0, 0, 1, 0, 0, Math.sin(t), 0, Math.cos(t), 0, 0, 0, 0, 1], 4);
}
function zk(e, t) {
  return qe(e, Va(t, 4));
}
function Cs(e, t) {
  var r = t[0], n = r === void 0 ? 1 : r, o = t[1], i = o === void 0 ? 1 : o, a = t[2], s = a === void 0 ? 1 : a;
  return qe(e, [n, 0, 0, 0, 0, i, 0, 0, 0, 0, s, 0, 0, 0, 0, 1], 4);
}
function Ga(e, t) {
  return Mt(Va(t, 3), io(e, 3));
}
function Kc(e, t) {
  var r = t[0], n = r === void 0 ? 0 : r, o = t[1], i = o === void 0 ? 0 : o, a = t[2], s = a === void 0 ? 0 : a;
  return qe(e, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, n, i, s, 1], 4);
}
function Wu(e, t) {
  return qe(e, t, 4);
}
function Va(e, t) {
  var r = Math.cos(e), n = Math.sin(e), o = et(t);
  return o[0] = r, o[1] = n, o[t] = -n, o[t + 1] = r, o;
}
function et(e) {
  for (var t = e * e, r = [], n = 0; n < t; ++n)
    r[n] = n % (e + 1) ? 0 : 1;
  return r;
}
function Of(e, t) {
  for (var r = et(t), n = Math.min(e.length, t - 1), o = 0; o < n; ++o)
    r[(t + 1) * o] = e[o];
  return r;
}
function ao(e, t) {
  for (var r = et(t), n = Math.min(e.length, t - 1), o = 0; o < n; ++o)
    r[t * (t - 1) + o] = e[o];
  return r;
}
function If(e, t, r, n, o, i, a, s) {
  var l = e[0], c = e[1], u = t[0], d = t[1], h = r[0], p = r[1], g = n[0], v = n[1], m = o[0], x = o[1], y = i[0], b = i[1], w = a[0], _ = a[1], R = s[0], T = s[1], k = [l, 0, u, 0, h, 0, g, 0, c, 0, d, 0, p, 0, v, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, l, 0, u, 0, h, 0, g, 0, c, 0, d, 0, p, 0, v, 0, 1, 0, 1, 0, 1, 0, 1, -m * l, -x * l, -y * u, -b * u, -w * h, -_ * h, -R * g, -T * g, -m * c, -x * c, -y * d, -b * d, -w * p, -_ * p, -R * v, -T * v], j = Dr(k, 8);
  if (!j.length)
    return [];
  var A = qe(j, [m, x, y, b, w, _, R, T], 8);
  return A[8] = 1, Rr(Ok(A), 3, 4);
}
var qi = function() {
  return qi = Object.assign || function(t) {
    for (var r, n = 1, o = arguments.length; n < o; n++) {
      r = arguments[n];
      for (var i in r) Object.prototype.hasOwnProperty.call(r, i) && (t[i] = r[i]);
    }
    return t;
  }, qi.apply(this, arguments);
};
function Ff() {
  return [
    1,
    0,
    0,
    0,
    0,
    1,
    0,
    0,
    0,
    0,
    1,
    0,
    0,
    0,
    0,
    1
  ];
}
function Jo(e, t) {
  return t === void 0 && (t = 0), _o(ei(e, t));
}
function Hs(e, t) {
  var r = Mt(e, [t[0], t[1] || 0, t[2] || 0, 1], 4), n = r[3] || 1;
  return [
    r[0] / n,
    r[1] / n,
    r[2] / n
  ];
}
function $k(e, t) {
  t === void 0 && (t = document.body);
  for (var r = e, n = Ff(); r; ) {
    var o = getComputedStyle(r).transform;
    if (n = Wu(Jo(o), n), r === t)
      break;
    r = r.parentElement;
  }
  return n = Dr(n, 4), n[12] = 0, n[13] = 0, n[14] = 0, n;
}
function _o(e) {
  var t = Ff();
  return e.forEach(function(r) {
    var n = r.matrixFunction, o = r.functionValue;
    n && (t = n(t, o));
  }), t;
}
function ei(e, t) {
  t === void 0 && (t = 0);
  var r = Ue(e) ? e : an(e);
  return r.map(function(n) {
    var o = oc(n), i = o.prefix, a = o.value, s = null, l = i, c = "";
    if (i === "translate" || i === "translateX" || i === "translate3d") {
      var u = it(t) ? qi(qi({}, t), { "o%": t["%"] }) : {
        "%": t,
        "o%": t
      }, d = rr(a).map(function(L, P) {
        return P === 0 && "x%" in u ? u["%"] = t["x%"] : P === 1 && "y%" in u ? u["%"] = t["y%"] : u["%"] = t["o%"], Ye(L, u);
      }), h = d[0], p = d[1], g = p === void 0 ? 0 : p, v = d[2], m = v === void 0 ? 0 : v;
      s = Kc, c = [h, g, m];
    } else if (i === "translateY") {
      var x = it(t) ? qi({ "%": t["y%"] }, t) : {
        "%": t
      }, g = Ye(a, x);
      s = Kc, c = [0, g, 0];
    } else if (i === "translateZ") {
      var m = parseFloat(a);
      s = Kc, c = [0, 0, m];
    } else if (i === "scale" || i === "scale3d") {
      var y = rr(a).map(function(L) {
        return parseFloat(L);
      }), b = y[0], w = y[1], _ = w === void 0 ? b : w, R = y[2], T = R === void 0 ? 1 : R;
      s = Cs, c = [b, _, T];
    } else if (i === "scaleX") {
      var b = parseFloat(a);
      s = Cs, c = [b, 1, 1];
    } else if (i === "scaleY") {
      var _ = parseFloat(a);
      s = Cs, c = [1, _, 1];
    } else if (i === "scaleZ") {
      var T = parseFloat(a);
      s = Cs, c = [1, 1, T];
    } else if (i === "rotate" || i === "rotateZ" || i === "rotateX" || i === "rotateY") {
      var k = Wr(a), j = k.unit, A = k.value, $ = j === "rad" ? A : A * Math.PI / 180;
      i === "rotate" || i === "rotateZ" ? (l = "rotateZ", s = zk) : i === "rotateX" ? s = Lk : i === "rotateY" && (s = Bk), c = $;
    } else if (i === "matrix3d")
      s = Wu, c = rr(a).map(function(L) {
        return parseFloat(L);
      });
    else if (i === "matrix") {
      var F = rr(a).map(function(L) {
        return parseFloat(L);
      });
      s = Wu, c = [
        F[0],
        F[1],
        0,
        0,
        F[2],
        F[3],
        0,
        0,
        0,
        0,
        1,
        0,
        F[4],
        F[5],
        0,
        1
      ];
    } else
      l = "";
    return {
      name: i,
      functionName: l,
      value: a,
      matrixFunction: s,
      functionValue: c
    };
  });
}
var Gk = /* @__PURE__ */ function() {
  function e() {
    this.keys = [], this.values = [];
  }
  var t = e.prototype;
  return t.get = function(r) {
    return this.values[this.keys.indexOf(r)];
  }, t.set = function(r, n) {
    var o = this.keys, i = this.values, a = o.indexOf(r), s = a === -1 ? o.length : a;
    o[s] = r, i[s] = n;
  }, e;
}(), Vk = /* @__PURE__ */ function() {
  function e() {
    this.object = {};
  }
  var t = e.prototype;
  return t.get = function(r) {
    return this.object[r];
  }, t.set = function(r, n) {
    this.object[r] = n;
  }, e;
}(), Uk = typeof Map == "function", Hk = /* @__PURE__ */ function() {
  function e() {
  }
  var t = e.prototype;
  return t.connect = function(r, n) {
    this.prev = r, this.next = n, r && (r.next = this), n && (n.prev = this);
  }, t.disconnect = function() {
    var r = this.prev, n = this.next;
    r && (r.next = n), n && (n.prev = r);
  }, t.getIndex = function() {
    for (var r = this, n = -1; r; )
      r = r.prev, ++n;
    return n;
  }, e;
}();
function Wk(e, t) {
  var r = [], n = [];
  return e.forEach(function(o) {
    var i = o[0], a = o[1], s = new Hk();
    r[i] = s, n[a] = s;
  }), r.forEach(function(o, i) {
    o.connect(r[i - 1]);
  }), e.filter(function(o, i) {
    return !t[i];
  }).map(function(o, i) {
    var a = o[0], s = o[1];
    if (a === s)
      return [0, 0];
    var l = r[a], c = n[s - 1], u = l.getIndex();
    l.disconnect(), c ? l.connect(c, c.next) : l.connect(void 0, r[0]);
    var d = l.getIndex();
    return [u, d];
  });
}
var Yk = /* @__PURE__ */ function() {
  function e(r, n, o, i, a, s, l, c) {
    this.prevList = r, this.list = n, this.added = o, this.removed = i, this.changed = a, this.maintained = s, this.changedBeforeAdded = l, this.fixed = c;
  }
  var t = e.prototype;
  return Object.defineProperty(t, "ordered", {
    get: function() {
      return this.cacheOrdered || this.caculateOrdered(), this.cacheOrdered;
    },
    enumerable: !0,
    configurable: !0
  }), Object.defineProperty(t, "pureChanged", {
    get: function() {
      return this.cachePureChanged || this.caculateOrdered(), this.cachePureChanged;
    },
    enumerable: !0,
    configurable: !0
  }), t.caculateOrdered = function() {
    var r = Wk(this.changedBeforeAdded, this.fixed), n = this.changed, o = [];
    this.cacheOrdered = r.filter(function(i, a) {
      var s = i[0], l = i[1], c = n[a], u = c[0], d = c[1];
      if (s !== l)
        return o.push([u, d]), !0;
    }), this.cachePureChanged = o;
  }, e;
}();
function Lf(e, t, r) {
  var n = Uk ? Map : r ? Vk : Gk, o = r || function(y) {
    return y;
  }, i = [], a = [], s = [], l = e.map(o), c = t.map(o), u = new n(), d = new n(), h = [], p = [], g = {}, v = [], m = 0, x = 0;
  return l.forEach(function(y, b) {
    u.set(y, b);
  }), c.forEach(function(y, b) {
    d.set(y, b);
  }), l.forEach(function(y, b) {
    var w = d.get(y);
    typeof w > "u" ? (++x, a.push(b)) : g[w] = x;
  }), c.forEach(function(y, b) {
    var w = u.get(y);
    typeof w > "u" ? (i.push(b), ++m) : (s.push([w, b]), x = g[b] || 0, h.push([w - x, b - m]), p.push(b === w), w !== b && v.push([w, b]));
  }), a.reverse(), new Yk(e, t, i, a, v, s, h, p);
}
var qk = /* @__PURE__ */ function() {
  function e(r, n) {
    r === void 0 && (r = []), this.findKeyCallback = n, this.list = [].slice.call(r);
  }
  var t = e.prototype;
  return t.update = function(r) {
    var n = [].slice.call(r), o = Lf(this.list, n, this.findKeyCallback);
    return this.list = n, o;
  }, e;
}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Yu = function(e, t) {
  return Yu = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var o in n) n.hasOwnProperty(o) && (r[o] = n[o]);
  }, Yu(e, t);
};
function Xk(e, t) {
  Yu(e, t);
  function r() {
    this.constructor = e;
  }
  e.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var Tx = typeof Map == "function" ? void 0 : /* @__PURE__ */ function() {
  var e = 0;
  return function(t) {
    return t.__DIFF_KEY__ || (t.__DIFF_KEY__ = ++e);
  };
}(), jx = /* @__PURE__ */ function(e) {
  Xk(t, e);
  function t(r) {
    return r === void 0 && (r = []), e.call(this, r, Tx) || this;
  }
  return t;
}(qk);
function Mo(e, t) {
  return Lf(e, t, Tx);
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var qu = function() {
  return qu = Object.assign || function(t) {
    for (var r, n = 1, o = arguments.length; n < o; n++) {
      r = arguments[n];
      for (var i in r) Object.prototype.hasOwnProperty.call(r, i) && (t[i] = r[i]);
    }
    return t;
  }, qu.apply(this, arguments);
};
function Kk() {
  for (var e = 0, t = 0, r = arguments.length; t < r; t++) e += arguments[t].length;
  for (var n = Array(e), o = 0, t = 0; t < r; t++) for (var i = arguments[t], a = 0, s = i.length; a < s; a++, o++) n[o] = i[a];
  return n;
}
var In = /* @__PURE__ */ function() {
  function e() {
    this._events = {};
  }
  var t = e.prototype;
  return t.on = function(r, n) {
    if (it(r))
      for (var o in r)
        this.on(o, r[o]);
    else
      this._addEvent(r, n, {});
    return this;
  }, t.off = function(r, n) {
    if (!r)
      this._events = {};
    else if (it(r))
      for (var o in r)
        this.off(o);
    else if (!n)
      this._events[r] = [];
    else {
      var i = this._events[r];
      if (i) {
        var a = Yr(i, function(s) {
          return s.listener === n;
        });
        a > -1 && i.splice(a, 1);
      }
    }
    return this;
  }, t.once = function(r, n) {
    var o = this;
    return n && this._addEvent(r, n, {
      once: !0
    }), new Promise(function(i) {
      o._addEvent(r, i, {
        once: !0
      });
    });
  }, t.emit = function(r, n) {
    var o = this;
    n === void 0 && (n = {});
    var i = this._events[r];
    if (!r || !i)
      return !0;
    var a = !1;
    return n.eventType = r, n.stop = function() {
      a = !0;
    }, n.currentTarget = this, Kk(i).forEach(function(s) {
      s.listener(n), s.once && o.off(r, s.listener);
    }), !a;
  }, t.trigger = function(r, n) {
    return n === void 0 && (n = {}), this.emit(r, n);
  }, t._addEvent = function(r, n, o) {
    var i = this._events;
    i[r] = i[r] || [];
    var a = i[r];
    a.push(qu({
      listener: n
    }, o));
  }, e;
}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Xu = function(e, t) {
  return Xu = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var o in n) n.hasOwnProperty(o) && (r[o] = n[o]);
  }, Xu(e, t);
};
function Zk(e, t) {
  Xu(e, t);
  function r() {
    this.constructor = e;
  }
  e.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var To = function() {
  return To = Object.assign || function(t) {
    for (var r, n = 1, o = arguments.length; n < o; n++) {
      r = arguments[n];
      for (var i in r) Object.prototype.hasOwnProperty.call(r, i) && (t[i] = r[i]);
    }
    return t;
  }, To.apply(this, arguments);
};
function Qk(e) {
  var t = e.container;
  return t === document.body ? [t.scrollLeft || document.documentElement.scrollLeft, t.scrollTop || document.documentElement.scrollTop] : [t.scrollLeft, t.scrollTop];
}
function Qp(e, t) {
  return e.addEventListener("scroll", t), function() {
    e.removeEventListener("scroll", t);
  };
}
function Es(e) {
  if (e) {
    if (rt(e))
      return document.querySelector(e);
  } else return null;
  if (Lt(e))
    return e();
  if (e instanceof Element)
    return e;
  if ("current" in e)
    return e.current;
  if ("value" in e)
    return e.value;
}
var kx = /* @__PURE__ */ function(e) {
  Zk(t, e);
  function t() {
    var n = e !== null && e.apply(this, arguments) || this;
    return n._startRect = null, n._startPos = [], n._prevTime = 0, n._timer = 0, n._prevScrollPos = [0, 0], n._isWait = !1, n._flag = !1, n._currentOptions = null, n._lock = !1, n._unregister = null, n._onScroll = function() {
      var o = n._currentOptions;
      n._lock || !o || n.emit("scrollDrag", {
        next: function(i) {
          n.checkScroll({
            container: o.container,
            inputEvent: i
          });
        }
      });
    }, n;
  }
  var r = t.prototype;
  return r.dragStart = function(n, o) {
    var i = Es(o.container);
    if (!i) {
      this._flag = !1;
      return;
    }
    var a = 0, s = 0, l = 0, c = 0;
    if (i === document.body)
      l = window.innerWidth, c = window.innerHeight;
    else {
      var u = i.getBoundingClientRect();
      a = u.top, s = u.left, l = u.width, c = u.height;
    }
    this._flag = !0, this._startPos = [n.clientX, n.clientY], this._startRect = {
      top: a,
      left: s,
      width: l,
      height: c
    }, this._prevScrollPos = this._getScrollPosition([0, 0], o), this._currentOptions = o, this._registerScrollEvent(o);
  }, r.drag = function(n, o) {
    if (clearTimeout(this._timer), !!this._flag) {
      var i = n.clientX, a = n.clientY, s = o.threshold, l = s === void 0 ? 0 : s, c = this, u = c._startRect, d = c._startPos;
      this._currentOptions = o;
      var h = [0, 0];
      return u.top > a - l ? (d[1] > u.top || a < d[1]) && (h[1] = -1) : u.top + u.height < a + l && (d[1] < u.top + u.height || a > d[1]) && (h[1] = 1), u.left > i - l ? (d[0] > u.left || i < d[0]) && (h[0] = -1) : u.left + u.width < i + l && (d[0] < u.left + u.width || i > d[0]) && (h[0] = 1), !h[0] && !h[1] ? !1 : this._continueDrag(To(To({}, o), {
        direction: h,
        inputEvent: n,
        isDrag: !0
      }));
    }
  }, r.checkScroll = function(n) {
    var o = this;
    if (this._isWait)
      return !1;
    var i = n.prevScrollPos, a = i === void 0 ? this._prevScrollPos : i, s = n.direction, l = n.throttleTime, c = l === void 0 ? 0 : l, u = n.inputEvent, d = n.isDrag, h = this._getScrollPosition(s || [0, 0], n), p = h[0] - a[0], g = h[1] - a[1], v = s || [p ? Math.abs(p) / p : 0, g ? Math.abs(g) / g : 0];
    return this._prevScrollPos = h, this._lock = !1, !p && !g ? !1 : (this.emit("move", {
      offsetX: v[0] ? p : 0,
      offsetY: v[1] ? g : 0,
      inputEvent: u
    }), c && d && (clearTimeout(this._timer), this._timer = window.setTimeout(function() {
      o._continueDrag(n);
    }, c)), !0);
  }, r.dragEnd = function() {
    this._flag = !1, this._lock = !1, clearTimeout(this._timer), this._unregisterScrollEvent();
  }, r._getScrollPosition = function(n, o) {
    var i = o.container, a = o.getScrollPosition, s = a === void 0 ? Qk : a;
    return s({
      container: Es(i),
      direction: n
    });
  }, r._continueDrag = function(n) {
    var o = this, i, a = n.container, s = n.direction, l = n.throttleTime, c = n.useScroll, u = n.isDrag, d = n.inputEvent;
    if (!(!this._flag || u && this._isWait)) {
      var h = ya(), p = Math.max(l + this._prevTime - h, 0);
      if (p > 0)
        return clearTimeout(this._timer), this._timer = window.setTimeout(function() {
          o._continueDrag(n);
        }, p), !1;
      this._prevTime = h;
      var g = this._getScrollPosition(s, n);
      this._prevScrollPos = g, u && (this._isWait = !0), c || (this._lock = !0);
      var v = {
        container: Es(a),
        direction: s,
        inputEvent: d
      };
      return (i = n.requestScroll) === null || i === void 0 || i.call(n, v), this.emit("scroll", v), this._isWait = !1, c || this.checkScroll(To(To({}, n), {
        prevScrollPos: g,
        direction: s,
        inputEvent: d
      }));
    }
  }, r._registerScrollEvent = function(n) {
    this._unregisterScrollEvent();
    var o = n.checkScrollEvent;
    if (o) {
      var i = o === !0 ? Qp : o, a = Es(n.container);
      o === !0 && (a === document.body || a === document.documentElement) ? this._unregister = Qp(window, this._onScroll) : this._unregister = i(a, this._onScroll);
    }
  }, r._unregisterScrollEvent = function() {
    var n;
    (n = this._unregister) === null || n === void 0 || n.call(this), this._unregister = null;
  }, t;
}(In);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function Jk() {
  for (var e = 0, t = 0, r = arguments.length; t < r; t++) e += arguments[t].length;
  for (var n = Array(e), o = 0, t = 0; t < r; t++) for (var i = arguments[t], a = 0, s = i.length; a < s; a++, o++) n[o] = i[a];
  return n;
}
function Ft(e) {
  return De(e, gt);
}
function e3(e, t) {
  return e.every(function(r, n) {
    return Ft(r - t[n]) === 0;
  });
}
function t3(e, t) {
  return !Ft(e[0] - t[0]) && !Ft(e[1] - t[1]);
}
function Xi(e) {
  return e.length < 3 ? 0 : Math.abs(Ek(e.map(function(t, r) {
    var n = e[r + 1] || e[0];
    return t[0] * n[1] - n[0] * t[1];
  }))) / 2;
}
function Ku(e, t) {
  var r = t.width, n = t.height, o = t.left, i = t.top, a = so(e), s = a.minX, l = a.minY, c = a.maxX, u = a.maxY, d = r / (c - s), h = n / (u - l);
  return e.map(function(p) {
    return [o + (p[0] - s) * d, i + (p[1] - l) * h];
  });
}
function so(e) {
  var t = e.map(function(n) {
    return n[0];
  }), r = e.map(function(n) {
    return n[1];
  });
  return {
    minX: Math.min.apply(Math, t),
    minY: Math.min.apply(Math, r),
    maxX: Math.max.apply(Math, t),
    maxY: Math.max.apply(Math, r)
  };
}
function al(e, t, r) {
  var n = e[0], o = e[1], i = so(t), a = i.minX, s = i.maxX, l = [[a, o], [s, o]], c = sl(l[0], l[1]), u = Zu(t), d = [];
  if (u.forEach(function(g) {
    var v = sl(g[0], g[1]), m = g[0];
    if (e3(c, v))
      d.push({
        pos: e,
        line: g,
        type: "line"
      });
    else {
      var x = Px(Bf(c, v), [l, g]);
      x.forEach(function(y) {
        g.some(function(b) {
          return t3(b, y);
        }) ? d.push({
          pos: y,
          line: g,
          type: "point"
        }) : Ft(m[1] - o) !== 0 && d.push({
          pos: y,
          line: g,
          type: "intersection"
        });
      });
    }
  }), zt(d, function(g) {
    return g[0] === n;
  }))
    return !0;
  var h = 0, p = {};
  return d.forEach(function(g) {
    var v = g.pos, m = g.type, x = g.line;
    if (!(v[0] > n))
      if (m === "intersection")
        ++h;
      else {
        if (m === "line")
          return;
        if (m === "point") {
          var y = zt(x, function(_) {
            return _[1] !== o;
          }), b = p[v[0]], w = y[1] > o ? 1 : -1;
          b ? b !== w && ++h : p[v[0]] = w;
        }
      }
  }), h % 2 === 1;
}
function sl(e, t) {
  var r = e[0], n = e[1], o = t[0], i = t[1], a = o - r, s = i - n;
  Math.abs(a) < gt && (a = 0), Math.abs(s) < gt && (s = 0);
  var l = 0, c = 0, u = 0;
  return a ? s ? (l = -s / a, c = 1, u = -l * r - n) : (c = 1, u = -n) : s && (l = -1, u = r), [l, c, u];
}
function Bf(e, t) {
  var r = e[0], n = e[1], o = e[2], i = t[0], a = t[1], s = t[2], l = r === 0 && i === 0, c = n === 0 && a === 0, u = [];
  if (l && c)
    return [];
  if (l) {
    var d = -o / n, h = -s / a;
    return d !== h ? [] : [[-1 / 0, d], [1 / 0, d]];
  } else if (c) {
    var p = -o / r, g = -s / i;
    return p !== g ? [] : [[p, -1 / 0], [p, 1 / 0]];
  } else if (r === 0) {
    var v = -o / n, m = -(a * v + s) / i;
    u = [[m, v]];
  } else if (i === 0) {
    var v = -s / a, m = -(n * v + o) / r;
    u = [[m, v]];
  } else if (n === 0) {
    var m = -o / r, v = -(i * m + s) / a;
    u = [[m, v]];
  } else if (a === 0) {
    var m = -s / i, v = -(r * m + o) / n;
    u = [[m, v]];
  } else {
    var m = (n * s - a * o) / (a * r - n * i), v = -(r * m + o) / n;
    u = [[m, v]];
  }
  return u.map(function(x) {
    return [x[0], x[1]];
  });
}
function Px(e, t) {
  var r = t.map(function(d) {
    return [0, 1].map(function(h) {
      return [Math.min(d[0][h], d[1][h]), Math.max(d[0][h], d[1][h])];
    });
  }), n = [];
  if (e.length === 2) {
    var o = e[0], i = o[0], a = o[1];
    if (Ft(i - e[1][0])) {
      if (!Ft(a - e[1][1])) {
        var c = Math.max.apply(Math, r.map(function(d) {
          return d[0][0];
        })), u = Math.min.apply(Math, r.map(function(d) {
          return d[0][1];
        }));
        if (Ft(c - u) > 0)
          return [];
        n = [[c, a], [u, a]];
      }
    } else {
      var s = Math.max.apply(Math, r.map(function(d) {
        return d[1][0];
      })), l = Math.min.apply(Math, r.map(function(d) {
        return d[1][1];
      }));
      if (Ft(s - l) > 0)
        return [];
      n = [[i, s], [i, l]];
    }
  }
  return n.length || (n = e.filter(function(d) {
    var h = d[0], p = d[1];
    return r.every(function(g) {
      return 0 <= Ft(h - g[0][0]) && 0 <= Ft(g[0][1] - h) && 0 <= Ft(p - g[1][0]) && 0 <= Ft(g[1][1] - p);
    });
  })), n.map(function(d) {
    return [Ft(d[0]), Ft(d[1])];
  });
}
function Zu(e) {
  return Jk(e.slice(1), [e[0]]).map(function(t, r) {
    return [e[r], t];
  });
}
function r3(e, t) {
  var r = e.slice(), n = t.slice();
  Xp(r) === -1 && r.reverse(), Xp(n) === -1 && n.reverse();
  var o = Zu(r), i = Zu(n), a = o.map(function(u) {
    return sl(u[0], u[1]);
  }), s = i.map(function(u) {
    return sl(u[0], u[1]);
  }), l = [];
  a.forEach(function(u, d) {
    var h = o[d], p = [];
    s.forEach(function(g, v) {
      var m = Bf(u, g), x = Px(m, [h, i[v]]);
      p.push.apply(p, x.map(function(y) {
        return {
          index1: d,
          index2: v,
          pos: y,
          type: "intersection"
        };
      }));
    }), p.sort(function(g, v) {
      return zr(h[0], g.pos) - zr(h[0], v.pos);
    }), l.push.apply(l, p), al(h[1], n) && l.push({
      index1: d,
      index2: -1,
      pos: h[1],
      type: "inside"
    });
  }), i.forEach(function(u, d) {
    if (al(u[1], r)) {
      var h = !1, p = Yr(l, function(g) {
        var v = g.index2;
        return v === d ? (h = !0, !1) : !!h;
      });
      p === -1 && (h = !1, p = Yr(l, function(g) {
        var v = g.index1, m = g.index2;
        return v === -1 && m + 1 === d ? (h = !0, !1) : !!h;
      })), p === -1 ? l.push({
        index1: -1,
        index2: d,
        pos: u[1],
        type: "inside"
      }) : l.splice(p, 0, {
        index1: -1,
        index2: d,
        pos: u[1],
        type: "inside"
      });
    }
  });
  var c = {};
  return l.filter(function(u) {
    var d = u.pos, h = d[0] + "x" + d[1];
    return c[h] ? !1 : (c[h] = !0, !0);
  });
}
function Qu(e, t) {
  var r = r3(e, t);
  return r.map(function(n) {
    var o = n.pos;
    return o;
  });
}
function n3(e, t) {
  var r = Qu(e, t);
  return Xi(r);
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Ju = function(e, t) {
  return Ju = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var o in n) n.hasOwnProperty(o) && (r[o] = n[o]);
  }, Ju(e, t);
};
function o3(e, t) {
  Ju(e, t);
  function r() {
    this.constructor = e;
  }
  e.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var ht = function() {
  return ht = Object.assign || function(t) {
    for (var r, n = 1, o = arguments.length; n < o; n++) {
      r = arguments[n];
      for (var i in r) Object.prototype.hasOwnProperty.call(r, i) && (t[i] = r[i]);
    }
    return t;
  }, ht.apply(this, arguments);
};
function i3(e, t) {
  var r = t[0] - e[0], n = t[1] - e[1], o = Math.atan2(n, r);
  return o >= 0 ? o : o + Math.PI * 2;
}
function Zc(e) {
  return i3([
    e[0].clientX,
    e[0].clientY
  ], [
    e[1].clientX,
    e[1].clientY
  ]) / Math.PI * 180;
}
function a3(e) {
  return e.touches && e.touches.length >= 2;
}
function _s(e) {
  return e ? e.touches ? l3(e.touches) : [Ax(e)] : [];
}
function s3(e) {
  return e && (e.type.indexOf("mouse") > -1 || "button" in e);
}
function Jp(e, t, r) {
  var n = r.length, o = Ki(e, n), i = o.clientX, a = o.clientY, s = o.originalClientX, l = o.originalClientY, c = Ki(t, n), u = c.clientX, d = c.clientY, h = Ki(r, n), p = h.clientX, g = h.clientY, v = i - u, m = a - d, x = i - p, y = a - g;
  return {
    clientX: s,
    clientY: l,
    deltaX: v,
    deltaY: m,
    distX: x,
    distY: y
  };
}
function Qc(e) {
  return Math.sqrt(Math.pow(e[0].clientX - e[1].clientX, 2) + Math.pow(e[0].clientY - e[1].clientY, 2));
}
function l3(e) {
  for (var t = Math.min(e.length, 2), r = [], n = 0; n < t; ++n)
    r.push(Ax(e[n]));
  return r;
}
function Ax(e) {
  return {
    clientX: e.clientX,
    clientY: e.clientY
  };
}
function Ki(e, t) {
  t === void 0 && (t = e.length);
  for (var r = {
    clientX: 0,
    clientY: 0,
    originalClientX: 0,
    originalClientY: 0
  }, n = Math.min(e.length, t), o = 0; o < n; ++o) {
    var i = e[o];
    r.originalClientX += "originalClientX" in i ? i.originalClientX : i.clientX, r.originalClientY += "originalClientY" in i ? i.originalClientY : i.clientY, r.clientX += i.clientX, r.clientY += i.clientY;
  }
  return t ? {
    clientX: r.clientX / t,
    clientY: r.clientY / t,
    originalClientX: r.originalClientX / t,
    originalClientY: r.originalClientY / t
  } : r;
}
var Jc = /* @__PURE__ */ function() {
  function e(t) {
    this.prevClients = [], this.startClients = [], this.movement = 0, this.length = 0, this.startClients = t, this.prevClients = t, this.length = t.length;
  }
  return e.prototype.getAngle = function(t) {
    return t === void 0 && (t = this.prevClients), Zc(t);
  }, e.prototype.getRotation = function(t) {
    return t === void 0 && (t = this.prevClients), Zc(t) - Zc(this.startClients);
  }, e.prototype.getPosition = function(t, r) {
    t === void 0 && (t = this.prevClients);
    var n = Jp(t || this.prevClients, this.prevClients, this.startClients), o = n.deltaX, i = n.deltaY;
    return this.movement += Math.sqrt(o * o + i * i), this.prevClients = t, n;
  }, e.prototype.getPositions = function(t) {
    t === void 0 && (t = this.prevClients);
    for (var r = this.prevClients, n = this.startClients, o = Math.min(this.length, r.length), i = [], a = 0; a < o; ++a)
      i[a] = Jp([t[a]], [r[a]], [n[a]]);
    return i;
  }, e.prototype.getMovement = function(t) {
    var r = this.movement;
    if (!t)
      return r;
    var n = Ki(t, this.length), o = Ki(this.prevClients, this.length), i = n.clientX - o.clientX, a = n.clientY - o.clientY;
    return Math.sqrt(i * i + a * a) + r;
  }, e.prototype.getDistance = function(t) {
    return t === void 0 && (t = this.prevClients), Qc(t);
  }, e.prototype.getScale = function(t) {
    return t === void 0 && (t = this.prevClients), Qc(t) / Qc(this.startClients);
  }, e.prototype.move = function(t, r) {
    this.startClients.forEach(function(n) {
      n.clientX -= t, n.clientY -= r;
    }), this.prevClients.forEach(function(n) {
      n.clientX -= t, n.clientY -= r;
    });
  }, e;
}(), ev = ["textarea", "input"], Ox = /* @__PURE__ */ function(e) {
  o3(t, e);
  function t(r, n) {
    n === void 0 && (n = {});
    var o = e.call(this) || this;
    o.options = {}, o.flag = !1, o.pinchFlag = !1, o.data = {}, o.isDrag = !1, o.isPinch = !1, o.clientStores = [], o.targets = [], o.prevTime = 0, o.doubleFlag = !1, o._useMouse = !1, o._useTouch = !1, o._useDrag = !1, o._dragFlag = !1, o._isTrusted = !1, o._isMouseEvent = !1, o._isSecondaryButton = !1, o._preventMouseEvent = !1, o._prevInputEvent = null, o._isDragAPI = !1, o._isIdle = !0, o._preventMouseEventId = 0, o._window = window, o.onDragStart = function(h, p) {
      if (p === void 0 && (p = !0), !(!o.flag && h.cancelable === !1)) {
        var g = h.type.indexOf("drag") >= -1;
        if (!(o.flag && g)) {
          o._isDragAPI = !0;
          var v = o.options, m = v.container, x = v.pinchOutside, y = v.preventWheelClick, b = v.preventRightClick, w = v.preventDefault, _ = v.checkInput, R = v.dragFocusedInput, T = v.preventClickEventOnDragStart, k = v.preventClickEventOnDrag, j = v.preventClickEventByCondition, A = o._useTouch, $ = !o.flag;
          if (o._isSecondaryButton = h.which === 3 || h.button === 2, y && (h.which === 2 || h.button === 1) || b && (h.which === 3 || h.button === 2))
            return o.stop(), !1;
          if ($) {
            var F = o._window.document.activeElement, L = h.target;
            if (L) {
              var P = L.tagName.toLowerCase(), O = ev.indexOf(P) > -1, I = L.isContentEditable;
              if (O || I) {
                if (_ || !R && F === L)
                  return !1;
                if (F && (F === L || I && F.isContentEditable && F.contains(L)))
                  if (R)
                    L.blur();
                  else
                    return !1;
              } else if ((w || h.type === "touchstart") && F) {
                var E = F.tagName.toLowerCase();
                (F.isContentEditable || ev.indexOf(E) > -1) && F.blur();
              }
              (T || k || j) && tt(o._window, "click", o._onClick, !0);
            }
            o.clientStores = [new Jc(_s(h))], o._isIdle = !1, o.flag = !0, o.isDrag = !1, o._isTrusted = p, o._dragFlag = !0, o._prevInputEvent = h, o.data = {}, o.doubleFlag = ya() - o.prevTime < 200, o._isMouseEvent = s3(h), !o._isMouseEvent && o._preventMouseEvent && o._allowMouseEvent();
            var S = o._preventMouseEvent || o.emit("dragStart", ht(ht({ data: o.data, datas: o.data, inputEvent: h, isMouseEvent: o._isMouseEvent, isSecondaryButton: o._isSecondaryButton, isTrusted: p, isDouble: o.doubleFlag }, o.getCurrentStore().getPosition()), { preventDefault: function() {
              h.preventDefault();
            }, preventDrag: function() {
              o._dragFlag = !1;
            } }));
            S === !1 && o.stop(), o._isMouseEvent && o.flag && w && h.preventDefault();
          }
          if (!o.flag)
            return !1;
          var M = 0;
          if ($ ? (o._attchDragEvent(), A && x && (M = setTimeout(function() {
            tt(m, "touchstart", o.onDragStart, {
              passive: !1
            });
          }))) : A && x && Qe(m, "touchstart", o.onDragStart), o.flag && a3(h)) {
            if (clearTimeout(M), $ && h.touches.length !== h.changedTouches.length)
              return;
            o.pinchFlag || o.onPinchStart(h);
          }
        }
      }
    }, o.onDrag = function(h, p) {
      if (o.flag) {
        var g = o.options.preventDefault;
        !o._isMouseEvent && g && h.preventDefault(), o._prevInputEvent = h;
        var v = _s(h), m = o.moveClients(v, h, !1);
        if (o._dragFlag) {
          if (o.pinchFlag || m.deltaX || m.deltaY) {
            var x = o._preventMouseEvent || o.emit("drag", ht(ht({}, m), { isScroll: !!p, inputEvent: h }));
            if (x === !1) {
              o.stop();
              return;
            }
          }
          o.pinchFlag && o.onPinch(h, v);
        }
        o.getCurrentStore().getPosition(v, !0);
      }
    }, o.onDragEnd = function(h) {
      if (o.flag) {
        var p = o.options, g = p.pinchOutside, v = p.container, m = p.preventClickEventOnDrag, x = p.preventClickEventOnDragStart, y = p.preventClickEventByCondition, b = o.isDrag;
        (m || x || y) && requestAnimationFrame(function() {
          o._allowClickEvent();
        }), !y && !x && m && !b && o._allowClickEvent(), o._useTouch && g && Qe(v, "touchstart", o.onDragStart), o.pinchFlag && o.onPinchEnd(h);
        var w = h?.touches ? _s(h) : [], _ = w.length;
        _ === 0 || !o.options.keepDragging ? o.flag = !1 : o._addStore(new Jc(w));
        var R = o._getPosition(), T = ya(), k = !b && o.doubleFlag;
        o._prevInputEvent = null, o.prevTime = b || k ? 0 : T, o.flag || (o._dettachDragEvent(), o._preventMouseEvent || o.emit("dragEnd", ht({ data: o.data, datas: o.data, isDouble: k, isDrag: b, isClick: !b, isMouseEvent: o._isMouseEvent, isSecondaryButton: o._isSecondaryButton, inputEvent: h, isTrusted: o._isTrusted }, R)), o.clientStores = [], o._isMouseEvent || (o._preventMouseEvent = !0, clearTimeout(o._preventMouseEventId), o._preventMouseEventId = setTimeout(function() {
          o._preventMouseEvent = !1;
        }, 200)), o._isIdle = !0);
      }
    }, o.onBlur = function() {
      o.onDragEnd();
    }, o._allowClickEvent = function() {
      Qe(o._window, "click", o._onClick, !0);
    }, o._onClick = function(h) {
      o._allowClickEvent(), o._allowMouseEvent();
      var p = o.options.preventClickEventByCondition;
      p?.(h) || (h.stopPropagation(), h.preventDefault());
    }, o._onContextMenu = function(h) {
      var p = o.options;
      p.preventRightClick ? o.onDragEnd(h) : h.preventDefault();
    }, o._passCallback = function() {
    };
    var i = [].concat(r), a = i[0];
    o._window = Nx(a) ? a : Ht(a), o.options = ht({ checkInput: !1, container: a && !("document" in a) ? Ht(a) : a, preventRightClick: !0, preventWheelClick: !0, preventClickEventOnDragStart: !1, preventClickEventOnDrag: !1, preventClickEventByCondition: null, preventDefault: !0, checkWindowBlur: !1, keepDragging: !1, pinchThreshold: 0, events: ["touch", "mouse"] }, n);
    var s = o.options, l = s.container, c = s.events, u = s.checkWindowBlur;
    if (o._useDrag = c.indexOf("drag") > -1, o._useTouch = c.indexOf("touch") > -1, o._useMouse = c.indexOf("mouse") > -1, o.targets = i, o._useDrag && i.forEach(function(h) {
      tt(h, "dragstart", o.onDragStart);
    }), o._useMouse && (i.forEach(function(h) {
      tt(h, "mousedown", o.onDragStart), tt(h, "mousemove", o._passCallback);
    }), tt(l, "contextmenu", o._onContextMenu)), u && tt(Ht(), "blur", o.onBlur), o._useTouch) {
      var d = {
        passive: !1
      };
      i.forEach(function(h) {
        tt(h, "touchstart", o.onDragStart, d), tt(h, "touchmove", o._passCallback, d);
      });
    }
    return o;
  }
  return t.prototype.stop = function() {
    this.isDrag = !1, this.data = {}, this.clientStores = [], this.pinchFlag = !1, this.doubleFlag = !1, this.prevTime = 0, this.flag = !1, this._isIdle = !0, this._allowClickEvent(), this._dettachDragEvent(), this._isDragAPI = !1;
  }, t.prototype.getMovement = function(r) {
    return this.getCurrentStore().getMovement(r) + this.clientStores.slice(1).reduce(function(n, o) {
      return n + o.movement;
    }, 0);
  }, t.prototype.isDragging = function() {
    return this.isDrag;
  }, t.prototype.isIdle = function() {
    return this._isIdle;
  }, t.prototype.isFlag = function() {
    return this.flag;
  }, t.prototype.isPinchFlag = function() {
    return this.pinchFlag;
  }, t.prototype.isDoubleFlag = function() {
    return this.doubleFlag;
  }, t.prototype.isPinching = function() {
    return this.isPinch;
  }, t.prototype.scrollBy = function(r, n, o, i) {
    i === void 0 && (i = !0), this.flag && (this.clientStores[0].move(r, n), i && this.onDrag(o, !0));
  }, t.prototype.move = function(r, n) {
    var o = r[0], i = r[1], a = this.getCurrentStore(), s = a.prevClients;
    return this.moveClients(s.map(function(l) {
      var c = l.clientX, u = l.clientY;
      return {
        clientX: c + o,
        clientY: u + i,
        originalClientX: c,
        originalClientY: u
      };
    }), n, !0);
  }, t.prototype.triggerDragStart = function(r) {
    this.onDragStart(r, !1);
  }, t.prototype.setEventData = function(r) {
    var n = this.data;
    for (var o in r)
      n[o] = r[o];
    return this;
  }, t.prototype.setEventDatas = function(r) {
    return this.setEventData(r);
  }, t.prototype.getCurrentEvent = function(r) {
    return r === void 0 && (r = this._prevInputEvent), ht(ht({ data: this.data, datas: this.data }, this._getPosition()), { movement: this.getMovement(), isDrag: this.isDrag, isPinch: this.isPinch, isScroll: !1, inputEvent: r });
  }, t.prototype.getEventData = function() {
    return this.data;
  }, t.prototype.getEventDatas = function() {
    return this.data;
  }, t.prototype.unset = function() {
    var r = this, n = this.targets, o = this.options.container;
    this.off(), Qe(this._window, "blur", this.onBlur), this._useDrag && n.forEach(function(i) {
      Qe(i, "dragstart", r.onDragStart);
    }), this._useMouse && (n.forEach(function(i) {
      Qe(i, "mousedown", r.onDragStart);
    }), Qe(o, "contextmenu", this._onContextMenu)), this._useTouch && (n.forEach(function(i) {
      Qe(i, "touchstart", r.onDragStart);
    }), Qe(o, "touchstart", this.onDragStart)), this._prevInputEvent = null, this._allowClickEvent(), this._dettachDragEvent();
  }, t.prototype.onPinchStart = function(r) {
    var n = this, o = this.options.pinchThreshold;
    if (!(this.isDrag && this.getMovement() > o)) {
      var i = new Jc(_s(r));
      this.pinchFlag = !0, this._addStore(i);
      var a = this.emit("pinchStart", ht(ht({ data: this.data, datas: this.data, angle: i.getAngle(), touches: this.getCurrentStore().getPositions() }, i.getPosition()), { inputEvent: r, isTrusted: this._isTrusted, preventDefault: function() {
        r.preventDefault();
      }, preventDrag: function() {
        n._dragFlag = !1;
      } }));
      a === !1 && (this.pinchFlag = !1);
    }
  }, t.prototype.onPinch = function(r, n) {
    if (!(!this.flag || !this.pinchFlag || n.length < 2)) {
      var o = this.getCurrentStore();
      this.isPinch = !0, this.emit("pinch", ht(ht({ data: this.data, datas: this.data, movement: this.getMovement(n), angle: o.getAngle(n), rotation: o.getRotation(n), touches: o.getPositions(n), scale: o.getScale(n), distance: o.getDistance(n) }, o.getPosition(n)), { inputEvent: r, isTrusted: this._isTrusted }));
    }
  }, t.prototype.onPinchEnd = function(r) {
    if (this.pinchFlag) {
      var n = this.isPinch;
      this.isPinch = !1, this.pinchFlag = !1;
      var o = this.getCurrentStore();
      this.emit("pinchEnd", ht(ht({ data: this.data, datas: this.data, isPinch: n, touches: o.getPositions() }, o.getPosition()), { inputEvent: r }));
    }
  }, t.prototype.getCurrentStore = function() {
    return this.clientStores[0];
  }, t.prototype.moveClients = function(r, n, o) {
    var i = this._getPosition(r, o), a = this.isDrag;
    (i.deltaX || i.deltaY) && (this.isDrag = !0);
    var s = !1;
    return !a && this.isDrag && (s = !0), ht(ht({ data: this.data, datas: this.data }, i), { movement: this.getMovement(r), isDrag: this.isDrag, isPinch: this.isPinch, isScroll: !1, isMouseEvent: this._isMouseEvent, isSecondaryButton: this._isSecondaryButton, inputEvent: n, isTrusted: this._isTrusted, isFirstDrag: s });
  }, t.prototype._addStore = function(r) {
    this.clientStores.splice(0, 0, r);
  }, t.prototype._getPosition = function(r, n) {
    var o = this.getCurrentStore(), i = o.getPosition(r, n), a = this.clientStores.slice(1).reduce(function(c, u) {
      var d = u.getPosition();
      return c.distX += d.distX, c.distY += d.distY, c;
    }, i), s = a.distX, l = a.distY;
    return ht(ht({}, i), { distX: s, distY: l });
  }, t.prototype._attchDragEvent = function() {
    var r = this._window, n = this.options.container, o = {
      passive: !1
    };
    this._isDragAPI && (tt(n, "dragover", this.onDrag, o), tt(r, "dragend", this.onDragEnd)), this._useMouse && (tt(n, "mousemove", this.onDrag), tt(r, "mouseup", this.onDragEnd)), this._useTouch && (tt(n, "touchmove", this.onDrag, o), tt(r, "touchend", this.onDragEnd, o), tt(r, "touchcancel", this.onDragEnd, o));
  }, t.prototype._dettachDragEvent = function() {
    var r = this._window, n = this.options.container;
    this._isDragAPI && (Qe(n, "dragover", this.onDrag), Qe(r, "dragend", this.onDragEnd)), this._useMouse && (Qe(n, "mousemove", this.onDrag), Qe(r, "mouseup", this.onDragEnd)), this._useTouch && (Qe(n, "touchstart", this.onDragStart), Qe(n, "touchmove", this.onDrag), Qe(r, "touchend", this.onDragEnd), Qe(r, "touchcancel", this.onDragEnd));
  }, t.prototype._allowMouseEvent = function() {
    this._preventMouseEvent = !1, clearTimeout(this._preventMouseEventId);
  }, t;
}(In);
function c3(e) {
  for (var t = 5381, r = e.length; r; )
    t = t * 33 ^ e.charCodeAt(--r);
  return t >>> 0;
}
var u3 = c3;
function d3(e) {
  return u3(e).toString(36);
}
function f3(e) {
  if (e && e.getRootNode) {
    var t = e.getRootNode();
    if (t.nodeType === 11)
      return t;
  }
}
function h3(e, t, r) {
  return r.original ? t : t.replace(/([^};{\s}][^};{]*|^\s*){/mg, function(n, o) {
    var i = o.trim();
    return (i ? rr(i) : [""]).map(function(a) {
      var s = a.trim();
      return s.indexOf("@") === 0 ? s : s.indexOf(":global") > -1 ? s.replace(/\:global/g, "") : s.indexOf(":host") > -1 ? "".concat(s.replace(/\:host/g, ".".concat(e))) : s ? ".".concat(e, " ").concat(s) : ".".concat(e);
    }).join(", ") + " {";
  });
}
function p3(e, t, r, n, o) {
  var i = xr(n), a = i.createElement("style");
  return a.setAttribute("type", "text/css"), a.setAttribute("data-styled-id", e), a.setAttribute("data-styled-count", "1"), r.nonce && a.setAttribute("nonce", r.nonce), a.innerHTML = h3(e, t, r), (o || i.head || i.body).appendChild(a), a;
}
function ic(e) {
  var t = "rCS" + d3(e);
  return {
    className: t,
    inject: function(r, n) {
      n === void 0 && (n = {});
      var o = f3(r), i = (o || r.ownerDocument || document).querySelector('style[data-styled-id="'.concat(t, '"]'));
      if (!i)
        i = p3(t, e, n, r, o);
      else {
        var a = parseFloat(i.getAttribute("data-styled-count")) || 0;
        i.setAttribute("data-styled-count", "".concat(a + 1));
      }
      return {
        destroy: function() {
          var s, l = parseFloat(i.getAttribute("data-styled-count")) || 0;
          l <= 1 ? (i.remove ? i.remove() : (s = i.parentNode) === null || s === void 0 || s.removeChild(i), i = null) : i.setAttribute("data-styled-count", "".concat(l - 1));
        }
      };
    }
  };
}
var ed = function() {
  return ed = Object.assign || function(t) {
    for (var r, n = 1, o = arguments.length; n < o; n++) {
      r = arguments[n];
      for (var i in r) Object.prototype.hasOwnProperty.call(r, i) && (t[i] = r[i]);
    }
    return t;
  }, ed.apply(this, arguments);
};
function v3(e, t) {
  var r = {};
  for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);
  if (e != null && typeof Object.getOwnPropertySymbols == "function") for (var o = 0, n = Object.getOwnPropertySymbols(e); o < n.length; o++)
    t.indexOf(n[o]) < 0 && Object.prototype.propertyIsEnumerable.call(e, n[o]) && (r[n[o]] = e[n[o]]);
  return r;
}
function Ix(e, t) {
  var r = ic(t), n = r.className;
  return Md(function(o, i) {
    var a = o.className, s = a === void 0 ? "" : a;
    o.cspNonce;
    var l = v3(o, ["className", "cspNonce"]), c = bt();
    return zS(i, function() {
      return c.current;
    }, []), ze(function() {
      var u = r.inject(c.current, {
        nonce: o.cspNonce
      });
      return function() {
        u.destroy();
      };
    }, []), Nn(e, ed({
      ref: c,
      "data-styled-id": n,
      className: "".concat(s, " ").concat(n)
    }, l));
  });
}
var td = function(e, t) {
  return td = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var o in n) Object.prototype.hasOwnProperty.call(n, o) && (r[o] = n[o]);
  }, td(e, t);
};
function Ua(e, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
  td(e, t);
  function r() {
    this.constructor = e;
  }
  e.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var V = function() {
  return V = Object.assign || function(t) {
    for (var r, n = 1, o = arguments.length; n < o; n++) {
      r = arguments[n];
      for (var i in r) Object.prototype.hasOwnProperty.call(r, i) && (t[i] = r[i]);
    }
    return t;
  }, V.apply(this, arguments);
};
function g3(e, t) {
  var r = {};
  for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);
  if (e != null && typeof Object.getOwnPropertySymbols == "function")
    for (var o = 0, n = Object.getOwnPropertySymbols(e); o < n.length; o++)
      t.indexOf(n[o]) < 0 && Object.prototype.propertyIsEnumerable.call(e, n[o]) && (r[n[o]] = e[n[o]]);
  return r;
}
function m3(e, t, r, n) {
  var o = arguments.length, i = o < 3 ? t : n, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") i = Reflect.decorate(e, t, r, n);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (i = (o < 3 ? a(i) : o > 3 ? a(t, r, i) : a(t, r)) || i);
  return o > 3 && i && Object.defineProperty(t, r, i), i;
}
function x3(e) {
  var t = typeof Symbol == "function" && Symbol.iterator, r = t && e[t], n = 0;
  if (r) return r.call(e);
  if (e && typeof e.length == "number") return {
    next: function() {
      return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
    }
  };
  throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
}
function W(e, t) {
  var r = typeof Symbol == "function" && e[Symbol.iterator];
  if (!r) return e;
  var n = r.call(e), o, i = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(o = n.next()).done; ) i.push(o.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      o && !o.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return i;
}
function le(e, t, r) {
  if (arguments.length === 2) for (var n = 0, o = t.length, i; n < o; n++)
    (i || !(n in t)) && (i || (i = Array.prototype.slice.call(t, 0, n)), i[n] = t[n]);
  return e.concat(i || Array.prototype.slice.call(t));
}
function Ha(e, t) {
  return V({ events: [], props: [], name: e }, t);
}
var y3 = ["n", "w", "s", "e"], zf = ["n", "w", "s", "e", "nw", "ne", "sw", "se"];
function b3(e, t) {
  return 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32 * e, 'px" height="').concat(32 * e, 'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(t, 'deg);transform-origin: 16px 16px"></path></svg>');
}
function w3(e) {
  var t = b3(1, e), r = Math.round(e / 45) * 45 % 180, n = "ns-resize";
  return r === 135 ? n = "nwse-resize" : r === 45 ? n = "nesw-resize" : r === 90 && (n = "ew-resize"), "cursor:".concat(n, ";cursor: url('").concat(t, "') 16 16, ").concat(n, ";");
}
var bi = pk(), Fx = bi.browser.webkit, Lx = Fx && function() {
  var e = typeof window > "u" ? { userAgent: "" } : window.navigator, t = /applewebkit\/([^\s]+)/g.exec(e.userAgent.toLowerCase());
  return t ? parseFloat(t[1]) < 605 : !1;
}(), Bx = bi.browser.name, zx = parseInt(bi.browser.version, 10), S3 = Bx === "chrome", C3 = bi.browser.chromium, E3 = parseInt(bi.browser.chromiumVersion, 10) || 0, _3 = S3 && zx >= 109 || C3 && E3 >= 109, N3 = Bx === "firefox", D3 = parseInt(bi.browser.webkitVersion, 10) >= 612 || zx >= 15, $f = "moveable-", R3 = zf.map(function(e) {
  var t = "", r = "", n = "center", o = "center", i = "calc(var(--moveable-control-padding, 20) * -1px)";
  return e.indexOf("n") > -1 && (t = "top: ".concat(i, ";"), o = "bottom"), e.indexOf("s") > -1 && (t = "top: 0px;", o = "top"), e.indexOf("w") > -1 && (r = "left: ".concat(i, ";"), n = "right"), e.indexOf("e") > -1 && (r = "left: 0px;", n = "left"), '.around-control[data-direction*="'.concat(e, `"] {
        `).concat(r).concat(t, `
        transform-origin: `).concat(n, " ").concat(o, `;
    }`);
}).join(`
`), M3 = `
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(R3, `
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0, 15, 30, 45, 60, 75, 90, 105, 120, 135, 150, 165].map(function(e) {
  return `
.direction[data-rotation="`.concat(e, '"], :global .view-control-rotation').concat(e, ` {
`).concat(w3(e), `
}
`);
}).join(`
`), `

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(Lx ? `:global svg *:before {
content:"";
transform-origin: inherit;
}` : "", `
`), T3 = [
  [0, 1, 2],
  [1, 0, 3],
  [2, 0, 3],
  [3, 1, 2]
], rd = 1e-4, Pt = 1e-7, Ns = 1e-9, nd = Math.pow(10, 10), tv = -nd, j3 = {
  n: [0, -1],
  e: [1, 0],
  s: [0, 1],
  w: [-1, 0],
  nw: [-1, -1],
  ne: [1, -1],
  sw: [-1, 1],
  se: [1, 1]
}, Gf = {
  n: [0, 1],
  e: [1, 3],
  s: [3, 2],
  w: [2, 0],
  nw: [0],
  ne: [1],
  sw: [2],
  se: [3]
}, $x = {
  n: 0,
  s: 180,
  w: 270,
  e: 90,
  nw: 315,
  ne: 45,
  sw: 225,
  se: 135
}, k3 = [
  "isMoveableElement",
  "updateRect",
  "updateTarget",
  "destroy",
  "dragStart",
  "isInside",
  "hitTest",
  "setState",
  "getRect",
  "request",
  "isDragging",
  "getManager",
  "forceUpdate",
  "waitToChangeTarget",
  "updateSelectors",
  "getTargets",
  "stopDrag",
  "getControlBoxElement",
  "getMoveables",
  "getDragElement"
];
function Wa(e, t, r, n, o, i) {
  var a, s;
  i === void 0 && (i = "draggable");
  var l = (s = (a = t.gestos[i]) === null || a === void 0 ? void 0 : a.move(r, e.inputEvent)) !== null && s !== void 0 ? s : {}, c = l.originalDatas || l.datas, u = c[i] || (c[i] = {});
  return V(V({}, l), { isPinch: !!n, parentEvent: !0, datas: u, originalDatas: e.originalDatas });
}
var ti = /* @__PURE__ */ function() {
  function e(t) {
    var r;
    t === void 0 && (t = "draggable"), this.ableName = t, this.prevX = 0, this.prevY = 0, this.startX = 0, this.startY = 0, this.isDrag = !1, this.isFlag = !1, this.datas = {
      draggable: {}
    }, this.datas = (r = {}, r[t] = {}, r);
  }
  return e.prototype.dragStart = function(t, r) {
    this.isDrag = !1, this.isFlag = !1;
    var n = r.originalDatas;
    return this.datas = n, n[this.ableName] || (n[this.ableName] = {}), V(V({}, this.move(t, r.inputEvent)), { type: "dragstart" });
  }, e.prototype.drag = function(t, r) {
    return this.move([
      t[0] - this.prevX,
      t[1] - this.prevY
    ], r);
  }, e.prototype.move = function(t, r) {
    var n, o, i = !1;
    if (!this.isFlag)
      this.prevX = t[0], this.prevY = t[1], this.startX = t[0], this.startY = t[1], n = t[0], o = t[1], this.isFlag = !0;
    else {
      var a = this.isDrag;
      n = this.prevX + t[0], o = this.prevY + t[1], (t[0] || t[1]) && (this.isDrag = !0), !a && this.isDrag && (i = !0);
    }
    return this.prevX = n, this.prevY = o, {
      type: "drag",
      clientX: n,
      clientY: o,
      inputEvent: r,
      isFirstDrag: i,
      isDrag: this.isDrag,
      distX: n - this.startX,
      distY: o - this.startY,
      deltaX: t[0],
      deltaY: t[1],
      datas: this.datas[this.ableName],
      originalDatas: this.datas,
      parentEvent: !0,
      parentGesto: this
    };
  }, e;
}();
function zo(e, t, r, n) {
  var o = e.length === 16, i = o ? 4 : 3, a = vo(e, r, n, i), s = W(a, 4), l = W(s[0], 2), c = l[0], u = l[1], d = W(s[1], 2), h = d[0], p = d[1], g = W(s[2], 2), v = g[0], m = g[1], x = W(s[3], 2), y = x[0], b = x[1], w = W(ot(e, t, i), 2), _ = w[0], R = w[1], T = Math.min(c, h, v, y), k = Math.min(u, p, m, b), j = Math.max(c, h, v, y), A = Math.max(u, p, m, b);
  c = c - T || 0, h = h - T || 0, v = v - T || 0, y = y - T || 0, u = u - k || 0, p = p - k || 0, m = m - k || 0, b = b - k || 0, _ = _ - T || 0, R = R - k || 0;
  var $ = e[0], F = e[i + 1], L = jt($ * F);
  return {
    left: T,
    top: k,
    right: j,
    bottom: A,
    origin: [_, R],
    pos1: [c, u],
    pos2: [h, p],
    pos3: [v, m],
    pos4: [y, b],
    direction: L
  };
}
function Gx(e, t) {
  var r = t.clientX, n = t.clientY, o = t.datas, i = e.state, a = i.moveableClientRect, s = i.rootMatrix, l = i.is3d, c = i.pos1, u = a.left, d = a.top, h = l ? 4 : 3, p = W(be(oi(s, [r - u, n - d], h), c), 2), g = p[0], v = p[1], m = W(Zr({ datas: o, distX: g, distY: v }), 2), x = m[0], y = m[1];
  return [x, y];
}
function po(e, t) {
  var r = t.datas, n = e.state, o = n.allMatrix, i = n.beforeMatrix, a = n.is3d, s = n.left, l = n.top, c = n.origin, u = n.offsetMatrix, d = n.targetMatrix, h = n.transformOrigin, p = a ? 4 : 3;
  r.is3d = a, r.matrix = o, r.targetMatrix = d, r.beforeMatrix = i, r.offsetMatrix = u, r.transformOrigin = h, r.inverseMatrix = Dr(o, p), r.inverseBeforeMatrix = Dr(i, p), r.absoluteOrigin = io(Ge([s, l], c), p), r.startDragBeforeDist = Mt(r.inverseBeforeMatrix, r.absoluteOrigin, p), r.startDragDist = Mt(r.inverseMatrix, r.absoluteOrigin, p);
}
function P3(e) {
  return zo(e.datas.beforeTransform, [50, 50], 100, 100).direction;
}
function ac(e, t, r) {
  var n = t.datas, o = t.originalDatas.beforeRenderable, i = n.transformIndex, a = o.nextTransforms, s = a.length, l = o.nextTransformAppendedIndexes, c = -1;
  i === -1 ? (r === "translate" ? c = 0 : r === "rotate" && (c = Yr(a, function(p) {
    return p.match(/scale\(/g);
  })), c === -1 && (c = a.length), n.transformIndex = c) : zt(l, function(p) {
    return p.index === i && p.functionName === r;
  }) ? c = i : c = i + l.filter(function(p) {
    return p.index < i;
  }).length;
  var u = iA(a, e.state, c), d = u.targetFunction, h = r === "rotate" ? "rotateZ" : r;
  n.beforeFunctionTexts = u.beforeFunctionTexts, n.afterFunctionTexts = u.afterFunctionTexts, n.beforeTransform = u.beforeFunctionMatrix, n.beforeTransform2 = u.beforeFunctionMatrix2, n.targetTansform = u.targetFunctionMatrix, n.afterTransform = u.afterFunctionMatrix, n.afterTransform2 = u.afterFunctionMatrix2, n.targetAllTransform = u.allFunctionMatrix, d.functionName === h ? (n.afterFunctionTexts.splice(0, 1), n.isAppendTransform = !1) : s > c && (n.isAppendTransform = !0, o.nextTransformAppendedIndexes = le(le([], W(l), !1), [{
    functionName: r,
    index: c,
    isAppend: !0
  }], !1));
}
function sc(e, t, r) {
  return "".concat(e.beforeFunctionTexts.join(" "), " ").concat(e.isAppendTransform ? r : t, " ").concat(e.afterFunctionTexts.join(" "));
}
function A3(e) {
  var t = e.datas, r = e.distX, n = e.distY, o = W(Ux({ datas: t, distX: r, distY: n }), 2), i = o[0], a = o[1], s = Vx(t, Ik([i, a], 4));
  return Mt(s, io([0, 0, 0], 4), 4);
}
function Vx(e, t, r) {
  var n = e.beforeTransform, o = e.afterTransform, i = e.beforeTransform2, a = e.afterTransform2, s = e.targetAllTransform, l = r ? qe(s, t, 4) : qe(t, s, 4), c = qe(Dr(r ? i : n, 4), l, 4), u = qe(c, Dr(r ? a : o, 4), 4);
  return u;
}
function Ux(e) {
  var t = e.datas, r = e.distX, n = e.distY, o = t.inverseBeforeMatrix, i = t.is3d, a = t.startDragBeforeDist, s = t.absoluteOrigin, l = i ? 4 : 3;
  return be(Mt(o, Ge(s, [r, n]), l), a);
}
function Zr(e, t) {
  var r = e.datas, n = e.distX, o = e.distY, i = r.inverseBeforeMatrix, a = r.inverseMatrix, s = r.is3d, l = r.startDragBeforeDist, c = r.startDragDist, u = r.absoluteOrigin, d = s ? 4 : 3;
  return be(Mt(t ? i : a, Ge(u, [n, o]), d), t ? l : c);
}
function O3(e, t) {
  var r = e.datas, n = e.distX, o = e.distY;
  r.beforeMatrix;
  var i = r.matrix, a = r.is3d;
  r.startDragBeforeDist;
  var s = r.startDragDist, l = r.absoluteOrigin, c = a ? 4 : 3;
  return be(Mt(i, Ge(s, [n, o]), c), l);
}
function I3(e, t, r, n, o, i) {
  return n === void 0 && (n = t), o === void 0 && (o = r), i === void 0 && (i = [0, 0]), e ? e.map(function(a, s) {
    var l = Wr(a), c = l.value, u = l.unit, d = s ? o : n, h = s ? r : t;
    if (a === "%" || isNaN(c)) {
      var p = d ? i[s] / d : 0;
      return h * p;
    } else if (u !== "%")
      return c;
    return h * c / 100;
  }) : i;
}
function Hx(e) {
  var t = [];
  return e[1] >= 0 && (e[0] >= 0 && t.push(3), e[0] <= 0 && t.push(2)), e[1] <= 0 && (e[0] >= 0 && t.push(1), e[0] <= 0 && t.push(0)), t;
}
function F3(e, t) {
  return Hx(t).map(function(r) {
    return e[r];
  });
}
function eu(e, t) {
  var r = (t + 1) / 2;
  return [
    Zo(e[0][0], e[1][0], r, 1 - r),
    Zo(e[0][1], e[1][1], r, 1 - r)
  ];
}
function xt(e, t) {
  var r = eu([e[0], e[1]], t[0]), n = eu([e[2], e[3]], t[0]);
  return eu([r, n], t[1]);
}
function L3(e, t, r, n, o, i) {
  var a = vo(t, r, n, o), s = xt(a, i), l = e[0] - s[0], c = e[1] - s[1];
  return [l, c];
}
function Ya(e, t, r, n) {
  return qe(e, Qi(t, n, r), n);
}
function B3(e, t, r, n) {
  var o = e.transformOrigin, i = e.offsetMatrix, a = e.is3d, s = a ? 4 : 3, l;
  if (rt(r)) {
    var c = t.beforeTransform, u = t.afterTransform;
    n ? l = Rr(Jo(r), 4, s) : l = Rr(qe(qe(c, Jo([r]), 4), u, 4), 4, s);
  } else
    l = r;
  return Ya(i, l, o, s);
}
function z3(e, t) {
  var r = e.transformOrigin, n = e.offsetMatrix, o = e.is3d, i = e.targetMatrix, a = e.targetAllTransform, s = o ? 4 : 3;
  return Ya(n, qe(a || i, Of(t, s), s), r, s);
}
function lc(e, t) {
  var r = wi(t);
  return {
    setTransform: function(n, o) {
      o === void 0 && (o = -1), r.startTransforms = Ue(n) ? n : an(n), od(e, t, o);
    },
    setTransformIndex: function(n) {
      od(e, t, n);
    }
  };
}
function cc(e, t, r) {
  var n = wi(t), o = n.startTransforms;
  od(e, t, Yr(o, function(i) {
    return i.indexOf("".concat(r, "(")) === 0;
  }));
}
function od(e, t, r) {
  var n = wi(t), o = t.datas;
  if (o.transformIndex = r, r !== -1) {
    var i = n.startTransforms[r];
    if (i) {
      var a = e.state, s = ei([i], {
        "x%": function(l) {
          return l / 100 * a.offsetWidth;
        },
        "y%": function(l) {
          return l / 100 * a.offsetHeight;
        }
      });
      o.startValue = s[0].functionValue;
    }
  }
}
function Vf(e, t) {
  var r = wi(e);
  r.nextTransforms = an(t);
}
function wi(e) {
  return e.originalDatas.beforeRenderable;
}
function ll(e) {
  var t = e.originalDatas.beforeRenderable;
  return t.nextTransforms;
}
function Ds(e) {
  return (ll(e) || []).join(" ");
}
function Rs(e) {
  return wi(e).nextStyle;
}
function Wx(e, t, r, n, o) {
  Vf(o, t);
  var i = Tt.drag(e, Wa(o, e.state, r, n)), a = i ? i.transform : t;
  return V(V({ transform: t, drag: i }, kt({
    transform: a
  }, o)), { afterTransform: a });
}
function Uf(e, t, r, n, o, i) {
  var a = B3(e.state, o, t, i), s = V3(e, r, n, a);
  return s;
}
function Yx(e, t, r, n, o, i, a) {
  var s = Uf(e, t, r, o, i, a), l = e.state, c = l.left, u = l.top, d = e.props.groupable, h = d ? c : 0, p = d ? u : 0, g = be(n, s);
  return be(g, [h, p]);
}
function $3(e, t, r, n, o, i, a) {
  var s = Yx(e, t, r, n, o, i, a);
  return s;
}
function G3(e, t, r) {
  return [
    t ? -1 + e[0] / (t / 2) : 0,
    r ? -1 + e[1] / (r / 2) : 0
  ];
}
function V3(e, t, r, n) {
  n === void 0 && (n = e.state.allMatrix);
  var o = e.state, i = o.width, a = o.height, s = o.is3d, l = s ? 4 : 3, c = [
    i / 2 * (1 + t[0]) + r[0],
    a / 2 * (1 + t[1]) + r[1]
  ];
  return ot(n, c, l);
}
function U3(e, t, r) {
  var n = r.fixedDirection, o = r.fixedPosition, i = r.fixedOffset;
  return Yx(e, "rotate(".concat(t, "deg)"), n, o, i, r);
}
function H3(e, t, r, n, o, i) {
  var a = e.props.groupable, s = e.state, l = s.transformOrigin, c = s.offsetMatrix, u = s.is3d, d = s.width, h = s.height, p = s.left, g = s.top, v = i.fixedDirection, m = i.nextTargetMatrix || s.targetMatrix, x = u ? 4 : 3, y = I3(o, t, r, d, h, l), b = a ? p : 0, w = a ? g : 0, _ = Ya(c, m, y, x), R = L3(n, _, t, r, x, v);
  return be(R, [b, w]);
}
function W3(e, t) {
  return xt(ur(e.state), t);
}
function Y3(e, t) {
  var r = e.targetGesto, n = e.controlGesto, o;
  return r?.isFlag() && (o = r.getEventData()[t]), !o && n?.isFlag() && (o = n.getEventData()[t]), o || {};
}
function q3(e) {
  if (e && e.getRootNode) {
    var t = e.getRootNode();
    if (t.nodeType === 11)
      return t;
  }
}
function X3(e) {
  var t = e("scale"), r = e("rotate"), n = e("translate"), o = [];
  return n && n !== "0px" && n !== "none" && o.push("translate(".concat(n.split(/\s+/).join(","), ")")), r && r !== "1" && r !== "none" && o.push("rotate(".concat(r, ")")), t && t !== "1" && t !== "none" && o.push("scale(".concat(t.split(/\s+/).join(","), ")")), o;
}
function qx(e, t, r) {
  for (var n = e, o = [], i = Af(e) || On(e), a = !r && e === t || e === i, s = a, l = !1, c = 3, u, d, h, p = !1, g = Ea(t, t, !0).offsetParent, v = 1; n && !s; ) {
    s = a;
    var m = $t(n), x = m("position"), y = xy(n), b = x === "fixed", w = X3(m), _ = Fk(WP(y)), R = void 0, T = !1, k = !1, j = 0, A = 0, $ = 0, F = 0, L = {
      hasTransform: !1,
      fixedContainer: null
    };
    b && (p = !0, L = ZP(n), g = L.fixedContainer);
    var P = _.length;
    !l && (P === 16 || w.length) && (l = !0, c = 4, ud(o), h && (h = Rr(h, 3, 4))), l && P === 9 && (_ = Rr(_, 3, 4));
    var O = KP(n, e), I = O.tagName, E = O.hasOffset, S = O.isSVG, M = O.origin, D = O.targetOrigin, N = O.offset, z = W(N, 2), Y = z[0], H = z[1];
    I === "svg" && !n.ownerSVGElement && h && (o.push({
      type: "target",
      target: n,
      matrix: QP(n, c)
    }), o.push({
      type: "offset",
      target: n,
      matrix: et(c)
    }));
    var X = parseFloat(m("zoom")) || 1;
    if (b)
      R = L.fixedContainer, T = !0;
    else {
      var Q = Ea(n, t, !1, !0, m), q = Q.offsetZoom;
      if (R = Q.offsetParent, T = Q.isEnd, k = Q.isStatic, v *= q, (Q.isCustomElement || q !== 1) && k)
        Y -= R.offsetLeft, H -= R.offsetTop;
      else if (N3 || _3) {
        var K = Q.parentSlotElement;
        if (K) {
          for (var ne = R, oe = 0, te = 0; ne && q3(ne); )
            oe += ne.offsetLeft, te += ne.offsetTop, ne = ne.offsetParent;
          Y -= oe, H -= te;
        }
      }
    }
    if (Fx && !D3 && E && !S && k && (x === "relative" || x === "static") && (Y -= R.offsetLeft, H -= R.offsetTop, a = a || T), b)
      E && L.hasTransform && ($ = R.clientLeft, F = R.clientTop);
    else if (E && g !== R && (j = R.clientLeft, A = R.clientTop), E && R === i) {
      var G = yy(n, !1);
      Y += G[0], H += G[1];
    }
    if (o.push({
      type: "target",
      target: n,
      matrix: Qi(_, c, M)
    }), w.length && (o.push({
      type: "offset",
      target: n,
      matrix: et(c)
    }), o.push({
      type: "target",
      target: n,
      matrix: Qi(Jo(w), c, M)
    })), E) {
      var ee = n === e, U = ee ? 0 : n.scrollLeft, J = ee ? 0 : n.scrollTop;
      o.push({
        type: "offset",
        target: n,
        matrix: ao([
          Y - U + j - $,
          H - J + A - F
        ], c)
      });
    } else
      o.push({
        type: "offset",
        target: n,
        origin: M
      });
    if (X !== 1 && o.push({
      type: "zoom",
      target: n,
      matrix: Qi(Of([X, X], c), c, [0, 0])
    }), h || (h = _), u || (u = M), d || (d = D), s || b)
      break;
    n = R, a = T, (!r || n === i) && (s = a);
  }
  return h || (h = et(c)), u || (u = [0, 0]), d || (d = [0, 0]), {
    zoom: v,
    offsetContainer: g,
    matrixes: o,
    targetMatrix: h,
    transformOrigin: u,
    targetOrigin: d,
    is3d: l,
    hasFixed: p
  };
}
var Un = null, Hn = null, jo = null;
function ri(e) {
  e ? (window.Map && (Un = /* @__PURE__ */ new Map(), Hn = /* @__PURE__ */ new Map()), jo = []) : (Un = null, jo = null, Hn = null);
}
function K3(e) {
  var t = Hn?.get(e);
  if (t)
    return t;
  var r = Ji(e, !0);
  return Hn && Hn.set(e, r), r;
}
function Z3(e, t) {
  if (jo) {
    var r = zt(jo, function(o) {
      return o[0][0] == e && o[0][1] == t;
    });
    if (r)
      return r[1];
  }
  var n = qx(e, t, !0);
  return jo && jo.push([[e, t], n]), n;
}
function $t(e) {
  var t = Un?.get(e);
  if (!t) {
    var r = Ht(e).getComputedStyle(e);
    if (!Un)
      return function(i) {
        return r[i];
      };
    t = {
      style: r,
      cached: {}
    }, Un.set(e, t);
  }
  var n = t.cached, o = t.style;
  return function(i) {
    return i in n || (n[i] = o[i]), n[i];
  };
}
function wr(e, t, r) {
  var n = r.originalDatas;
  n.groupable = n.groupable || {};
  var o = n.groupable;
  o.childDatas = o.childDatas || [];
  var i = o.childDatas;
  return e.moveables.map(function(a, s) {
    return i[s] = i[s] || {}, i[s][t] = i[s][t] || {}, V(V({}, r), { isRequestChild: !0, datas: i[s][t], originalDatas: i[s] });
  });
}
function tu(e, t, r, n, o, i, a) {
  var s = !!r.match(/Start$/g), l = !!r.match(/End$/g), c = o.isPinch, u = o.datas, d = wr(e, t.name, o), h = e.moveables, p = [], g = d.map(function(v, m) {
    var x = h[m], y = x.state, b = y.gestos, w = v;
    if (s)
      w = new ti(a).dragStart(n, v), p.push(w);
    else {
      if (b[a] || (b[a] = u.childGestos[m]), !b[a])
        return;
      w = Wa(v, y, n, c, i, a), p.push(w);
    }
    var _ = t[r](x, V(V({}, w), { parentFlag: !0 }));
    return l && (b[a] = null), _;
  });
  return s && (u.childGestos = h.map(function(v) {
    return v.state.gestos[a];
  })), {
    eventParams: g,
    childEvents: p
  };
}
function rn(e, t, r, n, o, i) {
  o === void 0 && (o = function(u, d) {
    return d;
  });
  var a = !!r.match(/End$/g), s = wr(e, t.name, n), l = e.moveables, c = s.map(function(u, d) {
    var h = l[d], p = u;
    p = o(h, u);
    var g = t[r](h, V(V({}, p), { parentFlag: !0 }));
    return a && (h.state.gestos = {}), g;
  });
  return c;
}
function cl(e, t, r, n) {
  var o = r.fixedDirection, i = r.fixedPosition, a = n.datas.startPositions || ur(t.state), s = xt(a, o), l = W(Mt(Va(-e.rotation / 180 * Math.PI, 3), [s[0] - i[0], s[1] - i[1], 1], 3), 2), c = l[0], u = l[1];
  return n.datas.originalX = c, n.datas.originalY = u, n;
}
function Xx(e, t, r, n) {
  var o = e.getState(), i = o.renderPoses, a = o.rotation, s = o.direction, l = lo(e.props, t).zoom, c = Zi(a / Math.PI * 180), u = {}, d = e.renderState;
  d.renderDirectionMap || (d.renderDirectionMap = {});
  var h = d.renderDirectionMap;
  r.forEach(function(g) {
    var v = g.dir;
    u[v] = !0;
  });
  var p = jt(s);
  return r.map(function(g) {
    var v = g.data, m = g.classNames, x = g.dir, y = Gf[x];
    if (!y || !u[x])
      return null;
    h[x] = !0;
    var b = (De(c, 15) + p * $x[x] + 720) % 180, w = {};
    return ar(v).forEach(function(_) {
      w["data-".concat(_)] = v[_];
    }), n.createElement("div", V({ className: xe.apply(void 0, le(["control", "direction", x, t], W(m), !1)), "data-rotation": b, "data-direction": x }, w, { key: "direction-".concat(x), style: hl.apply(void 0, le([a, l], W(y.map(function(_) {
      return i[_];
    })), !1)) }));
  });
}
function Kx(e, t, r, n) {
  var o = lo(e.props, r), i = o.renderDirections, a = i === void 0 ? t : i, s = o.displayAroundControls;
  if (!a)
    return [];
  var l = a === !0 ? zf : a;
  return le(le([], W(s ? ey(e, n, r, l) : []), !1), W(Xx(e, r, l.map(function(c) {
    return {
      data: {},
      classNames: [],
      dir: c
    };
  }), n)), !1);
}
function Ca(e, t, r, n, o, i) {
  for (var a = [], s = 6; s < arguments.length; s++)
    a[s - 6] = arguments[s];
  var l = dt(r, n), c = t ? De(l / Math.PI * 180, 15) % 180 : -1;
  return e.createElement("div", { key: "line-".concat(i), className: xe.apply(void 0, le(["line", "direction", t ? "edge" : "", t], W(a), !1)), "data-rotation": c, "data-line-key": i, "data-direction": t, style: Bi(r, n, o, l) });
}
function Zx(e, t, r, n, o) {
  var i = r === !0 ? y3 : r;
  return i.map(function(a, s) {
    var l = W(Gf[a], 2), c = l[0], u = l[1];
    if (u != null)
      return Ca(e, a, n[c], n[u], o, "".concat(t, "Edge").concat(s), t);
  }).filter(Boolean);
}
function Qx(e) {
  return function(t, r) {
    var n = lo(t.props, e).edge;
    return n && (n === !0 || n.length) ? le(le([], W(Zx(r, e, n, t.getState().renderPoses, t.props.zoom)), !1), W(Q3(t, e, r)), !1) : Jx(t, e, r);
  };
}
function Jx(e, t, r) {
  return Kx(e, zf, t, r);
}
function Q3(e, t, r) {
  return Kx(e, ["nw", "ne", "sw", "se"], t, r);
}
function ey(e, t, r, n) {
  var o = e.renderState;
  o.renderDirectionMap || (o.renderDirectionMap = {});
  var i = e.getState(), a = i.renderPoses, s = i.rotation, l = i.direction, c = o.renderDirectionMap, u = e.props.zoom, d = jt(l), h = s / Math.PI * 180;
  return (n || ar(c)).map(function(p) {
    var g = Gf[p];
    if (!g)
      return null;
    var v = (De(h, 15) + d * $x[p] + 720) % 180, m = ["around-control"];
    return r && m.push("direction", r), t.createElement("div", { className: xe.apply(void 0, le([], W(m), !1)), "data-rotation": v, "data-direction": p, key: "direction-around-".concat(p), style: hl.apply(void 0, le([s, u], W(g.map(function(x) {
      return a[x];
    })), !1)) });
  });
}
function Hf(e, t, r) {
  var n = e || {}, o = n.position, i = o === void 0 ? "client" : o, a = n.left, s = a === void 0 ? -1 / 0 : a, l = n.top, c = l === void 0 ? -1 / 0 : l, u = n.right, d = u === void 0 ? 1 / 0 : u, h = n.bottom, p = h === void 0 ? 1 / 0 : h, g = {
    position: i,
    left: s,
    top: c,
    right: d,
    bottom: p
  };
  return {
    vertical: rv(g, t, !0),
    horizontal: rv(g, r, !1)
  };
}
function uc(e, t) {
  var r = e.state, n = r.containerClientRect, o = n.clientHeight, i = n.clientWidth, a = n.clientLeft, s = n.clientTop, l = r.snapOffset, c = l.left, u = l.top, d = l.right, h = l.bottom, p = t || e.props.bounds || {}, g = p.position || "client", v = g === "css", m = p.left, x = m === void 0 ? -1 / 0 : m, y = p.top, b = y === void 0 ? -1 / 0 : y, w = p.right, _ = w === void 0 ? v ? -1 / 0 : 1 / 0 : w, R = p.bottom, T = R === void 0 ? v ? -1 / 0 : 1 / 0 : R;
  return v && (_ = i + d - c - _, T = o + h - u - T), {
    left: x + c - a,
    right: _ + c - a,
    top: b + u - s,
    bottom: T + u - s
  };
}
function J3(e, t, r) {
  var n = uc(e), o = n.left, i = n.top, a = n.right, s = n.bottom, l = W(r, 2), c = l[0], u = l[1], d = W(be(r, t), 2), h = d[0], p = d[1];
  ie(h) < Pt && (h = 0), ie(p) < Pt && (p = 0);
  var g = p > 0, v = h > 0, m = {
    isBound: !1,
    offset: 0,
    pos: 0
  }, x = {
    isBound: !1,
    offset: 0,
    pos: 0
  };
  if (h === 0 && p === 0)
    return {
      vertical: m,
      horizontal: x
    };
  if (h === 0)
    g ? s < u && (x.pos = s, x.offset = u - s) : i > u && (x.pos = i, x.offset = u - i);
  else if (p === 0)
    v ? a < c && (m.pos = a, m.offset = c - a) : o > c && (m.pos = o, m.offset = c - o);
  else {
    var y = p / h, b = r[1] - y * c, w = 0, _ = 0, R = !1;
    v && a <= c ? (w = y * a + b, _ = a, R = !0) : !v && c <= o && (w = y * o + b, _ = o, R = !0), R && (w < i || w > s) && (R = !1), R || (g && s <= u ? (w = s, _ = (w - b) / y, R = !0) : !g && u <= i && (w = i, _ = (w - b) / y, R = !0)), R && (m.isBound = !0, m.pos = _, m.offset = c - _, x.isBound = !0, x.pos = w, x.offset = u - w);
  }
  return {
    vertical: m,
    horizontal: x
  };
}
function rv(e, t, r) {
  var n = e[r ? "left" : "top"], o = e[r ? "right" : "bottom"], i = Math.min.apply(Math, le([], W(t), !1)), a = Math.max.apply(Math, le([], W(t), !1)), s = [];
  return n + 1 > i && s.push({
    direction: "start",
    isBound: !0,
    offset: i - n,
    pos: n
  }), o - 1 < a && s.push({
    direction: "end",
    isBound: !0,
    offset: a - o,
    pos: o
  }), s.length || s.push({
    isBound: !1,
    offset: 0,
    pos: 0
  }), s.sort(function(l, c) {
    return ie(c.offset) - ie(l.offset);
  });
}
function nv(e, t, r) {
  var n = r ? e.map(function(o) {
    return Ga(o, r);
  }) : e;
  return n.some(function(o) {
    return o[0] < t.left && ie(o[0] - t.left) > 0.1 || o[0] > t.right && ie(o[0] - t.right) > 0.1 || o[1] < t.top && ie(o[1] - t.top) > 0.1 || o[1] > t.bottom && ie(o[1] - t.bottom) > 0.1;
  });
}
function eP(e, t, r) {
  var n = cr(e), o = Math.sqrt(n * n - t * t) || 0;
  return [o, -o].sort(function(i, a) {
    return ie(i - e[r ? 0 : 1]) - ie(a - e[r ? 0 : 1]);
  }).map(function(i) {
    return dt([0, 0], r ? [i, t] : [t, i]);
  });
}
function tP(e, t, r, n, o) {
  if (!e.props.bounds)
    return [];
  var i = o * Math.PI / 180, a = uc(e), s = a.left, l = a.top, c = a.right, u = a.bottom, d = s - n[0], h = c - n[0], p = l - n[1], g = u - n[1], v = {
    left: d,
    top: p,
    right: h,
    bottom: g
  };
  if (!nv(r, v, 0))
    return [];
  var m = [];
  return [
    [d, 0],
    [h, 0],
    [p, 1],
    [g, 1]
  ].forEach(function(x) {
    var y = W(x, 2), b = y[0], w = y[1];
    r.forEach(function(_) {
      var R = dt([0, 0], _);
      m.push.apply(m, le([], W(eP(_, b, w).map(function(T) {
        return i + T - R;
      }).filter(function(T) {
        return !nv(t, v, T);
      }).map(function(T) {
        return De(T * 180 / Math.PI, Pt);
      })), !1));
    });
  }), m;
}
var rP = ["left", "right", "center"], nP = ["top", "bottom", "middle"], ov = {
  left: "start",
  right: "end",
  center: "center",
  top: "start",
  bottom: "end",
  middle: "center"
}, Tn = {
  start: "left",
  end: "right",
  center: "center"
}, jn = {
  start: "top",
  end: "bottom",
  center: "middle"
};
function ko() {
  return {
    left: !1,
    top: !1,
    right: !1,
    bottom: !1
  };
}
function Si(e, t) {
  var r = e.props, n = r.snappable, o = r.bounds, i = r.innerBounds, a = r.verticalGuidelines, s = r.horizontalGuidelines, l = r.snapGridWidth, c = r.snapGridHeight, u = e.state, d = u.guidelines, h = u.enableSnap;
  return !n || !h || t && n !== !0 && n.indexOf(t) < 0 ? !1 : !!(l || c || o || i || d && d.length || a && a.length || s && s.length);
}
function Wf(e) {
  return e === !1 ? {} : e === !0 || !e ? { left: !0, right: !0, top: !0, bottom: !0 } : e;
}
function oP(e, t) {
  var r = Wf(e), n = {};
  for (var o in r)
    o in t && r[o] && (n[o] = t[o]);
  return n;
}
function Yf(e, t) {
  var r = oP(e, t), n = nP.filter(function(i) {
    return i in r;
  }), o = rP.filter(function(i) {
    return i in r;
  });
  return {
    horizontalNames: n,
    verticalNames: o,
    horizontal: n.map(function(i) {
      return r[i];
    }),
    vertical: o.map(function(i) {
      return r[i];
    })
  };
}
function iP(e, t, r) {
  var n = ot(e, [t.clientLeft, t.clientTop], r);
  return [
    t.left + n[0],
    t.top + n[1]
  ];
}
function aP(e) {
  var t = W(e, 2), r = t[0], n = t[1], o = n[0] - r[0], i = n[1] - r[1];
  Math.abs(o) < gt && (o = 0), Math.abs(i) < gt && (i = 0);
  var a = 0, s = 0, l = 0;
  return o ? i ? (a = -i / o, s = 1, l = a * r[0] - r[1]) : (s = 1, l = -r[1]) : (a = -1, l = r[0]), [a, s, l].map(function(c) {
    return De(c, gt);
  });
}
var ty = "snapRotationThreshold", ry = "snapRotationDegrees", ny = "snapHorizontalThreshold", oy = "snapVerticalThreshold";
function dc(e, t, r, n, o, i, a) {
  var s;
  n === void 0 && (n = []), o === void 0 && (o = []);
  var l = e.props, c = ((s = e.state.snapThresholdInfo) === null || s === void 0 ? void 0 : s.multiples) || [1, 1], u = yv(a, l[ny], 5), d = yv(i, l[oy], 5);
  return iy(e.state.guidelines, t, r, n, o, u, d, c);
}
function iy(e, t, r, n, o, i, a, s) {
  return {
    vertical: av(e, "vertical", t, a * s[0], n),
    horizontal: av(e, "horizontal", r, i * s[1], o)
  };
}
function sP(e, t, r) {
  var n = W(r, 2), o = n[0], i = n[1], a = W(t, 2), s = a[0], l = a[1], c = W(be(r, t), 2), u = c[0], d = c[1], h = d > 0, p = u > 0;
  u = pl(u), d = pl(d);
  var g = {
    isSnap: !1,
    offset: 0,
    pos: 0
  }, v = {
    isSnap: !1,
    offset: 0,
    pos: 0
  };
  if (u === 0 && d === 0)
    return {
      vertical: g,
      horizontal: v
    };
  var m = dc(e, u ? [o] : [], d ? [i] : [], [], [], void 0, void 0), x = m.vertical, y = m.horizontal;
  x.posInfos.filter(function(I) {
    var E = I.pos;
    return p ? E >= s : E <= s;
  }), y.posInfos.filter(function(I) {
    var E = I.pos;
    return h ? E >= l : E <= l;
  }), x.isSnap = x.posInfos.length > 0, y.isSnap = y.posInfos.length > 0;
  var b = id(x), w = b.isSnap, _ = b.guideline, R = id(y), T = R.isSnap, k = R.guideline, j = T ? k.pos[1] : 0, A = w ? _.pos[0] : 0;
  if (u === 0)
    T && (v.isSnap = !0, v.pos = k.pos[1], v.offset = i - v.pos);
  else if (d === 0)
    w && (g.isSnap = !0, g.pos = A, g.offset = o - A);
  else {
    var $ = d / u, F = r[1] - $ * o, L = 0, P = 0, O = !1;
    w ? (P = A, L = $ * P + F, O = !0) : T && (L = j, P = (L - F) / $, O = !0), O && (g.isSnap = !0, g.pos = P, g.offset = o - P, v.isSnap = !0, v.pos = L, v.offset = i - L);
  }
  return {
    vertical: g,
    horizontal: v
  };
}
function mn(e) {
  var t = "";
  return e === -1 || e === "top" || e === "left" ? t = "start" : e === 0 || e === "center" || e === "middle" ? t = "center" : (e === 1 || e === "right" || e === "bottom") && (t = "end"), t;
}
function iv(e, t, r, n) {
  var o = Yf(e.props.snapDirections, t), i = dc(e, o.vertical, o.horizontal, o.verticalNames.map(function(l) {
    return mn(l);
  }), o.horizontalNames.map(function(l) {
    return mn(l);
  }), r, n), a = mn(o.horizontalNames[i.horizontal.index]), s = mn(o.verticalNames[i.vertical.index]);
  return {
    vertical: V(V({}, i.vertical), { direction: s }),
    horizontal: V(V({}, i.horizontal), { direction: a })
  };
}
function id(e) {
  var t = e.isSnap;
  if (!t)
    return {
      isSnap: !1,
      offset: 0,
      dist: -1,
      pos: 0,
      guideline: null
    };
  var r = e.posInfos[0], n = r.guidelineInfos[0], o = n.offset, i = n.dist, a = n.guideline;
  return {
    isSnap: t,
    offset: o,
    dist: i,
    pos: r.pos,
    guideline: a
  };
}
function av(e, t, r, n, o) {
  var i, a;
  if (o === void 0 && (o = []), !e || !e.length)
    return {
      isSnap: !1,
      index: -1,
      direction: "",
      posInfos: []
    };
  var s = t === "vertical", l = s ? 0 : 1, c = r.map(function(d, h) {
    var p = o[h] || "", g = e.map(function(v) {
      var m = v.pos, x = d - m[l];
      return {
        offset: x,
        dist: ie(x),
        guideline: v,
        direction: p
      };
    }).filter(function(v) {
      var m = v.guideline, x = v.dist, y = m.type;
      return !(y !== t || x > n);
    }).sort(function(v, m) {
      return v.dist - m.dist;
    });
    return {
      pos: d,
      index: h,
      guidelineInfos: g,
      direction: p
    };
  }).filter(function(d) {
    return d.guidelineInfos.length > 0;
  }).sort(function(d, h) {
    return d.guidelineInfos[0].dist - h.guidelineInfos[0].dist;
  }), u = c.length > 0;
  return {
    isSnap: u,
    index: u ? c[0].index : -1,
    direction: (a = (i = c[0]) === null || i === void 0 ? void 0 : i.direction) !== null && a !== void 0 ? a : "",
    posInfos: c
  };
}
function lP(e, t, r, n, o) {
  var i = [];
  r[0] && r[1] ? i = [
    r,
    [-r[0], r[1]],
    [r[0], -r[1]]
  ] : !r[0] && !r[1] ? [
    [-1, -1],
    [1, -1],
    [1, 1],
    [-1, 1]
  ].forEach(function(h, p, g) {
    var v = g[p + 1] || g[0];
    i.push(h), i.push([
      (h[0] + v[0]) / 2,
      (h[1] + v[1]) / 2
    ]);
  }) : e.props.keepRatio ? i.push([-1, -1], [-1, 1], [1, -1], [1, 1], r) : (i.push.apply(i, le([], W(F3([
    [-1, -1],
    [1, -1],
    [-1, -1],
    [1, 1]
  ], r)), !1)), i.length > 1 && i.push([
    (i[0][0] + i[1][0]) / 2,
    (i[0][1] + i[1][1]) / 2
  ]));
  var a = i.map(function(h) {
    return xt(t, h);
  }), s = a.map(function(h) {
    return h[0];
  }), l = a.map(function(h) {
    return h[1];
  }), c = dc(e, s, l, i.map(function(h) {
    return mn(h[0]);
  }), i.map(function(h) {
    return mn(h[1]);
  }), n, o), u = mn(i.map(function(h) {
    return h[0];
  })[c.vertical.index]), d = mn(i.map(function(h) {
    return h[1];
  })[c.horizontal.index]);
  return {
    vertical: V(V({}, c.vertical), { direction: u }),
    horizontal: V(V({}, c.horizontal), { direction: d })
  };
}
function ay(e, t) {
  var r = ie(e.offset), n = ie(t.offset);
  return e.isBound && t.isBound ? n - r : e.isBound ? -1 : t.isBound ? 1 : e.isSnap && t.isSnap ? n - r : e.isSnap ? -1 : t.isSnap || r < Pt ? 1 : n < Pt ? -1 : r - n;
}
function ul(e, t) {
  return e.slice().sort(function(r, n) {
    var o = r.sign[t], i = n.sign[t], a = r.offset[t], s = n.offset[t];
    if (o) {
      if (!i)
        return -1;
    } else return 1;
    return ay({ isBound: r.isBound, isSnap: r.isSnap, offset: a }, { isBound: n.isBound, isSnap: n.isSnap, offset: s });
  })[0];
}
function cP(e, t, r) {
  var n = [];
  if (r)
    ie(t[0]) !== 1 || ie(t[1]) !== 1 ? n.push([t, [-1, -1]], [t, [-1, 1]], [t, [1, -1]], [t, [1, 1]]) : n.push([t, [e[0], -e[1]]], [t, [-e[0], e[1]]]), n.push([t, e]);
  else if (e[0] && e[1] || !e[0] && !e[1]) {
    var o = e[0] ? e : [1, 1];
    [1, -1].forEach(function(a) {
      [1, -1].forEach(function(s) {
        var l = [a * o[0], s * o[1]];
        t[0] === l[0] && t[1] === l[1] || n.push([t, l]);
      });
    });
  } else if (e[0]) {
    var i = ie(t[0]) === 1 ? [1] : [1, -1];
    i.forEach(function(a) {
      n.push([
        [t[0], -1],
        [a * e[0], -1]
      ], [
        [t[0], 0],
        [a * e[0], 0]
      ], [
        [t[0], 1],
        [a * e[0], 1]
      ]);
    });
  } else if (e[1]) {
    var i = ie(t[1]) === 1 ? [1] : [1, -1];
    i.forEach(function(s) {
      n.push([
        [-1, t[1]],
        [-1, s * e[1]]
      ], [
        [0, t[1]],
        [0, s * e[1]]
      ], [
        [1, t[1]],
        [1, s * e[1]]
      ]);
    });
  }
  return n;
}
function sy(e, t) {
  var r = Hu([t[0][0], t[1][0]]), n = Hu([t[0][1], t[1][1]]);
  return {
    vertical: r <= e[0],
    horizontal: n <= e[1]
  };
}
function qf(e, t) {
  var r = W(t, 2), n = r[0], o = r[1], i = o[0] - n[0], a = o[1] - n[1];
  ie(i) < Pt && (i = 0), ie(a) < Pt && (a = 0);
  var s, l;
  if (!i)
    s = n[0], l = e[0];
  else if (!a)
    s = n[1], l = e[1];
  else {
    var c = a / i;
    s = c * (e[0] - n[0]) + n[1], l = e[1];
  }
  return s - l;
}
function ly(e, t, r, n) {
  return n === void 0 && (n = Pt), e.every(function(o) {
    var i = qf(o, t), a = i <= 0;
    return a === r || ie(i) <= n;
  });
}
function sv(e, t, r, n, o) {
  return o === void 0 && (o = 0), n && t - o <= e || !n && e <= r + o ? {
    isBound: !0,
    offset: n ? t - e : r - e
  } : {
    isBound: !1,
    offset: 0
  };
}
function uP(e, t) {
  var r = t.line, n = t.centerSign, o = t.verticalSign, i = t.horizontalSign, a = t.lineConstants, s = e.props.innerBounds;
  if (!s)
    return {
      isAllBound: !1,
      isBound: !1,
      isVerticalBound: !1,
      isHorizontalBound: !1,
      offset: [0, 0]
    };
  var l = s.left, c = s.top, u = s.width, d = s.height, h = [[l, c], [l, c + d]], p = [[l, c], [l + u, c]], g = [[l + u, c], [l + u, c + d]], v = [[l, c + d], [l + u, c + d]];
  if (ly([
    [l, c],
    [l + u, c],
    [l, c + d],
    [l + u, c + d]
  ], r, n))
    return {
      isAllBound: !1,
      isBound: !1,
      isVerticalBound: !1,
      isHorizontalBound: !1,
      offset: [0, 0]
    };
  var m = xn(r, a, p, o), x = xn(r, a, v, o), y = xn(r, a, h, i), b = xn(r, a, g, i), w = m.isBound && x.isBound, _ = m.isBound || x.isBound, R = y.isBound && b.isBound, T = y.isBound || b.isBound, k = ni(m.offset, x.offset), j = ni(y.offset, b.offset), A = [0, 0], $ = !1, F = !1;
  return ie(j) < ie(k) ? (A = [k, 0], $ = _, F = w) : (A = [0, j], $ = T, F = R), {
    isAllBound: F,
    isVerticalBound: _,
    isHorizontalBound: T,
    isBound: $,
    offset: A
  };
}
function xn(e, t, r, n, o, i) {
  var a = W(t, 2), s = a[0], l = a[1], c = e[0], u = r[0], d = r[1], h = pl(d[1] - u[1]), p = pl(d[0] - u[0]), g = l, v = s, m = -s / l;
  if (p) {
    if (!h) {
      if (i && !g)
        return {
          isBound: !1,
          offset: 0
        };
      if (v) {
        var w = (u[1] - c[1]) / m + c[0];
        return sv(w, u[0], d[0], n, o);
      } else {
        var y = u[1] - c[1], b = ie(y) <= (o || 0);
        return {
          isBound: b,
          offset: b ? y : 0
        };
      }
    }
  } else {
    if (i && !v)
      return {
        isBound: !1,
        offset: 0
      };
    if (g) {
      var x = m * (u[0] - c[0]) + c[1];
      return sv(x, u[1], d[1], n, o);
    } else {
      var y = u[0] - c[0], b = ie(y) <= (o || 0);
      return {
        isBound: b,
        offset: b ? y : 0
      };
    }
  }
  return {
    isBound: !1,
    offset: 0
  };
}
function cy(e, t, r) {
  return t.map(function(n) {
    var o = uP(e, n), i = o.isBound, a = o.offset, s = o.isVerticalBound, l = o.isHorizontalBound, c = n.multiple, u = Zr({
      datas: r,
      distX: a[0],
      distY: a[1]
    }).map(function(d, h) {
      return d * (c[h] ? 2 / c[h] : 0);
    });
    return {
      sign: c,
      isBound: i,
      isVerticalBound: s,
      isHorizontalBound: l,
      isSnap: !1,
      offset: u
    };
  });
}
function dP(e, t, r) {
  var n, o = Xf(e, t, [0, 0], !1).map(function(h) {
    return V(V({}, h), { multiple: h.multiple.map(function(p) {
      return ie(p) * 2;
    }) });
  }), i = cy(e, o, r), a = ul(i, 0), s = ul(i, 1), l = 0, c = 0, u = a.isVerticalBound || s.isVerticalBound, d = a.isHorizontalBound || s.isHorizontalBound;
  return (u || d) && (n = W(O3({
    datas: r,
    distX: -a.offset[0],
    distY: -s.offset[1]
  }), 2), l = n[0], c = n[1]), {
    vertical: {
      isBound: u,
      offset: l
    },
    horizontal: {
      isBound: d,
      offset: c
    }
  };
}
function fP(e, t) {
  var r = [], n = e[0], o = e[1];
  return n && o ? r.push([[0, o * 2], e, [-n, o]], [[n * 2, 0], e, [n, -o]]) : n ? (r.push([[n * 2, 0], [n, 1], [n, -1]]), t && r.push([[0, -1], [n, -1], [-n, -1]], [[0, 1], [n, 1], [-n, 1]])) : o ? (r.push([[0, o * 2], [1, o], [-1, o]]), t && r.push([[-1, 0], [-1, o], [-1, -o]], [[1, 0], [1, o], [1, -o]])) : r.push([[-1, 0], [-1, -1], [-1, 1]], [[1, 0], [1, -1], [1, 1]], [[0, -1], [-1, -1], [1, -1]], [[0, 1], [-1, 1], [1, 1]]), r;
}
function Xf(e, t, r, n) {
  var o = e.state, i = o.allMatrix, a = o.is3d, s = vo(i, 100, 100, a ? 4 : 3), l = xt(s, [0, 0]);
  return fP(r, n).map(function(c) {
    var u = W(c, 3), d = u[0], h = u[1], p = u[2], g = [
      xt(s, h),
      xt(s, p)
    ], v = aP(g), m = sy(l, g), x = m.vertical, y = m.horizontal, b = qf(l, g) <= 0;
    return {
      multiple: d,
      centerSign: b,
      verticalSign: x,
      horizontalSign: y,
      lineConstants: v,
      line: [
        xt(t, h),
        xt(t, p)
      ]
    };
  });
}
function lv(e, t, r, n) {
  var o = n ? e.map(function(i) {
    return Ga(i, n);
  }) : e;
  return [
    [o[0], o[1]],
    [o[1], o[3]],
    [o[3], o[2]],
    [o[2], o[0]]
  ].some(function(i) {
    var a = qf(r, i) <= 0;
    return !ly(t, i, a);
  });
}
function hP(e) {
  var t = W(e, 2), r = t[0], n = t[1], o = n[0] - r[0], i = n[1] - r[1];
  if (!o)
    return ie(r[0]);
  if (!i)
    return ie(r[1]);
  var a = i / o;
  return ie((-a * r[0] + r[1]) / Math.sqrt(Math.pow(a, 2) + 1));
}
function pP(e) {
  var t = W(e, 2), r = t[0], n = t[1], o = n[0] - r[0], i = n[1] - r[1];
  if (!o)
    return [r[0], 0];
  if (!i)
    return [0, r[1]];
  var a = i / o, s = -a * r[0] + r[1];
  return [
    -s / (a + 1 / a),
    s / (a * a + 1)
  ];
}
function vP(e, t, r, n, o) {
  var i = e.props.innerBounds, a = o * Math.PI / 180;
  if (!i)
    return [];
  var s = i.left, l = i.top, c = i.width, u = i.height, d = s - n[0], h = s + c - n[0], p = l - n[1], g = l + u - n[1], v = [
    [d, p],
    [h, p],
    [d, g],
    [h, g]
  ], m = xt(r, [0, 0]);
  if (!lv(r, v, m, 0))
    return [];
  var x = [], y = v.map(function(b) {
    return [
      cr(b),
      dt([0, 0], b)
    ];
  });
  return [
    [r[0], r[1]],
    [r[1], r[3]],
    [r[3], r[2]],
    [r[2], r[0]]
  ].forEach(function(b) {
    var w = dt([0, 0], pP(b)), _ = hP(b);
    x.push.apply(x, le([], W(y.filter(function(R) {
      var T = W(R, 1), k = T[0];
      return k && _ <= k;
    }).map(function(R) {
      var T = W(R, 2), k = T[0], j = T[1], A = Math.acos(k ? _ / k : 0), $ = j + A, F = j - A;
      return [
        a + $ - w,
        a + F - w
      ];
    }).reduce(function(R, T) {
      return R.push.apply(R, le([], W(T), !1)), R;
    }, []).filter(function(R) {
      return !lv(t, v, m, R);
    }).map(function(R) {
      return De(R * 180 / Math.PI, Pt);
    })), !1));
  }), x;
}
function gP(e) {
  var t = e.props.innerBounds, r = ko();
  if (!t)
    return {
      boundMap: r,
      vertical: [],
      horizontal: []
    };
  var n = e.getRect(), o = n.pos1, i = n.pos2, a = n.pos3, s = n.pos4, l = [o, i, a, s], c = xt(l, [0, 0]), u = t.left, d = t.top, h = t.width, p = t.height, g = [[u, d], [u, d + p]], v = [[u, d], [u + h, d]], m = [[u + h, d], [u + h, d + p]], x = [[u, d + p], [u + h, d + p]], y = Xf(e, l, [0, 0], !1), b = [], w = [];
  return y.forEach(function(_) {
    var R = _.line, T = _.lineConstants, k = sy(c, R), j = k.horizontal, A = k.vertical, $ = xn(R, T, v, A, 1, !0), F = xn(R, T, x, A, 1, !0), L = xn(R, T, g, j, 1, !0), P = xn(R, T, m, j, 1, !0);
    $.isBound && !r.top && (b.push(d), r.top = !0), F.isBound && !r.bottom && (b.push(d + p), r.bottom = !0), L.isBound && !r.left && (w.push(u), r.left = !0), P.isBound && !r.right && (w.push(u + h), r.right = !0);
  }), {
    boundMap: r,
    horizontal: b,
    vertical: w
  };
}
function mP(e, t, r, n) {
  var o = t[0] - e[0], i = t[1] - e[1];
  if (ie(o) < gt && (o = 0), ie(i) < gt && (i = 0), !o)
    return n ? [0, 0] : [0, r];
  if (!i)
    return n ? [r, 0] : [0, 0];
  var a = i / o, s = e[1] - a * e[0];
  if (n) {
    var l = a * (t[0] + r) + s;
    return [r, l - t[1]];
  } else {
    var c = (t[1] + r - s) / a;
    return [c - t[0], r];
  }
}
function ad(e, t, r, n, o) {
  var i = mP(e, t, r, n);
  if (!i)
    return {
      isOutside: !1,
      offset: [0, 0]
    };
  var a = zr(e, t), s = zr(i, e), l = zr(i, t), c = s > a || l > a, u = W(Zr({
    datas: o,
    distX: i[0],
    distY: i[1]
  }), 2), d = u[0], h = u[1];
  return {
    offset: [d, h],
    isOutside: c
  };
}
function dl(e, t) {
  return e.isBound ? e.offset : t.isSnap ? id(t).offset : 0;
}
function xP(e, t, r, n, o) {
  var i = W(t, 2), a = i[0], s = i[1], l = W(r, 2), c = l[0], u = l[1], d = W(n, 2), h = d[0], p = d[1], g = W(o, 2), v = g[0], m = g[1], x = -v, y = -m;
  if (e && a && s) {
    x = 0, y = 0;
    var b = [];
    if (c && u ? b.push([0, m], [v, 0]) : c ? b.push([v, 0]) : u ? b.push([0, m]) : h && p ? b.push([0, m], [v, 0]) : h ? b.push([v, 0]) : p && b.push([0, m]), b.length) {
      b.sort(function(T, k) {
        return cr(be([a, s], T)) - cr(be([a, s], k));
      });
      var w = b[0];
      if (w[0] && ie(a) > gt)
        x = -w[0], y = s * ie(a + x) / ie(a) - s;
      else if (w[1] && ie(s) > gt) {
        var _ = s;
        y = -w[1], x = a * ie(s + y) / ie(_) - a;
      }
      if (e && u && c)
        if (ie(x) > gt && ie(x) < ie(v)) {
          var R = ie(v) / ie(x);
          x *= R, y *= R;
        } else if (ie(y) > gt && ie(y) < ie(m)) {
          var R = ie(m) / ie(y);
          x *= R, y *= R;
        } else
          x = ni(-v, x), y = ni(-m, y);
    }
  } else
    x = a || c ? -v : 0, y = s || u ? -m : 0;
  return [x, y];
}
function yP(e, t, r, n, o, i) {
  if (!Si(e, "draggable"))
    return [
      {
        isSnap: !1,
        isBound: !1,
        offset: 0
      },
      {
        isSnap: !1,
        isBound: !1,
        offset: 0
      }
    ];
  var a = Qf(i.absolutePoses, [t, r]), s = sr(a), l = s.left, c = s.right, u = s.top, d = s.bottom, h = {
    horizontal: a.map(function(P) {
      return P[1];
    }),
    vertical: a.map(function(P) {
      return P[0];
    })
  }, p = Wf(e.props.snapDirections), g = Yf(p, {
    left: l,
    right: c,
    top: u,
    bottom: d,
    center: (l + c) / 2,
    middle: (u + d) / 2
  }), v = fc(e, o, g, h), m = v.vertical, x = v.horizontal, y = dP(e, a, i), b = y.vertical, w = y.horizontal, _ = m.isSnap, R = x.isSnap, T = m.isBound || b.isBound, k = x.isBound || w.isBound, j = ni(m.offset, b.offset), A = ni(x.offset, w.offset), $ = W(xP(n, [t, r], [T, k], [_, R], [j, A]), 2), F = $[0], L = $[1];
  return [
    {
      isBound: T,
      isSnap: _,
      offset: F
    },
    {
      isBound: k,
      isSnap: R,
      offset: L
    }
  ];
}
function fc(e, t, r, n) {
  n === void 0 && (n = r);
  var o = Hf(uc(e), n.vertical, n.horizontal), i = o.horizontal, a = o.vertical, s = t ? {
    horizontal: { isSnap: !1, index: -1 },
    vertical: { isSnap: !1, index: -1 }
  } : dc(e, r.vertical, r.horizontal, void 0, void 0, void 0, void 0), l = s.horizontal, c = s.vertical, u = dl(i[0], l), d = dl(a[0], c), h = ie(u), p = ie(d);
  return {
    horizontal: {
      isBound: i[0].isBound,
      isSnap: l.isSnap,
      snapIndex: l.index,
      offset: u,
      dist: h,
      bounds: i,
      snap: l
    },
    vertical: {
      isBound: a[0].isBound,
      isSnap: c.isSnap,
      snapIndex: c.index,
      offset: d,
      dist: p,
      bounds: a,
      snap: c
    }
  };
}
function cv(e, t, r, n, o, i, a) {
  a === void 0 && (a = [1, 1]);
  var s = Hf(t, r, n), l = s.horizontal, c = s.vertical, u = iy(e, r, n, [], [], o, i, a), d = u.horizontal, h = u.vertical, p = dl(l[0], d), g = dl(c[0], h), v = ie(p), m = ie(g);
  return {
    horizontal: {
      isBound: l[0].isBound,
      isSnap: d.isSnap,
      snapIndex: d.index,
      offset: p,
      dist: v,
      bounds: l,
      snap: d
    },
    vertical: {
      isBound: c[0].isBound,
      isSnap: h.isSnap,
      snapIndex: h.index,
      offset: g,
      dist: m,
      bounds: c,
      snap: h
    }
  };
}
function bP(e, t, r, n) {
  var o = dt(e, t) / Math.PI * 180, i = r.vertical, a = i.isBound, s = i.isSnap, l = i.dist, c = r.horizontal, u = c.isBound, d = c.isSnap, h = c.dist, p = o % 180, g = p < 3 || p > 177, v = p > 87 && p < 93;
  return h < l && (a || s && !v && (!n || !g)) ? "vertical" : u || d && !g && (!n || !v) ? "horizontal" : "";
}
function wP(e, t, r, n, o, i) {
  return r.map(function(a) {
    var s = W(a, 2), l = s[0], c = s[1], u = xt(t, l), d = xt(t, c), h = n ? SP(e, u, d, o) : fc(e, o, {
      vertical: [d[0]],
      horizontal: [d[1]]
    }), p = h.horizontal, g = p.offset, v = p.isBound, m = p.isSnap, x = h.vertical, y = x.offset, b = x.isBound, w = x.isSnap, _ = be(c, l);
    if (!y && !g)
      return {
        isBound: b || v,
        isSnap: w || m,
        sign: _,
        offset: [0, 0]
      };
    var R = bP(u, d, h, n);
    if (!R)
      return {
        sign: _,
        isBound: !1,
        isSnap: !1,
        offset: [0, 0]
      };
    var T = R === "vertical", k = [0, 0];
    return !n && ie(c[0]) === 1 && ie(c[1]) === 1 && l[0] !== c[0] && l[1] !== c[1] ? k = Zr({
      datas: i,
      distX: -y,
      distY: -g
    }) : k = ad(u, d, -(T ? y : g), T, i).offset, k = k.map(function(j, A) {
      return j * (_[A] ? 2 / _[A] : 0);
    }), {
      sign: _,
      isBound: T ? b : v,
      isSnap: T ? w : m,
      offset: k
    };
  });
}
function uv(e, t) {
  return e.isBound ? e.offset : t.isSnap ? t.offset : 0;
}
function SP(e, t, r, n) {
  var o = J3(e, t, r), i = o.horizontal, a = o.vertical, s = n ? {
    horizontal: { isSnap: !1 },
    vertical: { isSnap: !1 }
  } : sP(e, t, r), l = s.horizontal, c = s.vertical, u = uv(i, l), d = uv(a, c), h = ie(u), p = ie(d);
  return {
    horizontal: {
      isBound: i.isBound,
      isSnap: l.isSnap,
      offset: u,
      dist: h
    },
    vertical: {
      isBound: a.isBound,
      isSnap: c.isSnap,
      offset: d,
      dist: p
    }
  };
}
function CP(e, t, r, n, o) {
  var i = [-r[0], -r[1]], a = e.state, s = a.width, l = a.height, c = e.props.bounds, u = 1 / 0, d = 1 / 0;
  if (c) {
    var h = [
      [r[0], -r[1]],
      [-r[0], r[1]]
    ], p = c.left, g = p === void 0 ? -1 / 0 : p, v = c.top, m = v === void 0 ? -1 / 0 : v, x = c.right, y = x === void 0 ? 1 / 0 : x, b = c.bottom, w = b === void 0 ? 1 / 0 : b;
    h.forEach(function(_) {
      var R = _[0] !== i[0], T = _[1] !== i[1], k = xt(t, _), j = dt(n, k) * 360 / Math.PI;
      if (T) {
        var A = k.slice();
        (ie(j - 360) < 2 || ie(j - 180) < 2) && (A[1] = n[1]);
        var $ = ad(n, A, (n[1] < k[1] ? w : m) - k[1], !1, o), F = W($.offset, 2), L = F[1], P = $.isOutside;
        isNaN(L) || (d = l + (P ? 1 : -1) * ie(L));
      }
      if (R) {
        var A = k.slice();
        (ie(j - 90) < 2 || ie(j - 270) < 2) && (A[0] = n[0]);
        var O = ad(n, A, (n[0] < k[0] ? y : g) - k[0], !0, o), I = W(O.offset, 1), E = I[0], S = O.isOutside;
        isNaN(E) || (u = s + (S ? 1 : -1) * ie(E));
      }
    });
  }
  return {
    maxWidth: u,
    maxHeight: d
  };
}
var Tt = {
  name: "draggable",
  props: [
    "draggable",
    "throttleDrag",
    "throttleDragRotate",
    "hideThrottleDragRotateLine",
    "startDragRotate",
    "edgeDraggable"
  ],
  events: [
    "dragStart",
    "drag",
    "dragEnd",
    "dragGroupStart",
    "dragGroup",
    "dragGroupEnd"
  ],
  requestStyle: function() {
    return ["left", "top", "right", "bottom"];
  },
  requestChildStyle: function() {
    return ["left", "top", "right", "bottom"];
  },
  render: function(e, t) {
    var r = e.props, n = r.hideThrottleDragRotateLine, o = r.throttleDragRotate, i = r.zoom, a = e.getState(), s = a.dragInfo, l = a.beforeOrigin;
    if (n || !o || !s)
      return [];
    var c = s.dist;
    if (!c[0] && !c[1])
      return [];
    var u = cr(c), d = dt(c, [0, 0]);
    return [t.createElement("div", { className: xe("line", "horizontal", "dragline", "dashed"), key: "dragRotateGuideline", style: {
      width: "".concat(u, "px"),
      transform: "translate(".concat(l[0], "px, ").concat(l[1], "px) rotate(").concat(d, "rad) scaleY(").concat(i, ")")
    } })];
  },
  dragStart: function(e, t) {
    var r = t.datas, n = t.parentEvent, o = t.parentGesto, i = e.state, a = i.gestos, s = i.style;
    if (a.draggable)
      return !1;
    a.draggable = o || e.targetGesto, r.datas = {}, r.left = parseFloat(s.left || "") || 0, r.top = parseFloat(s.top || "") || 0, r.bottom = parseFloat(s.bottom || "") || 0, r.right = parseFloat(s.right || "") || 0, r.startValue = [0, 0], po(e, t), cc(e, t, "translate"), GP(e, r), r.prevDist = [0, 0], r.prevBeforeDist = [0, 0], r.isDrag = !1, r.deltaOffset = [0, 0];
    var l = Pe(e, t, V({ set: function(u) {
      r.startValue = u;
    } }, lc(e, t))), c = n || fe(e, "onDragStart", l);
    return c !== !1 ? (r.isDrag = !0, e.state.dragInfo = {
      startRect: e.getRect(),
      dist: [0, 0]
    }) : (a.draggable = null, r.isPinch = !1), r.isDrag ? l : !1;
  },
  drag: function(e, t) {
    if (t) {
      ac(e, t, "translate");
      var r = t.datas, n = t.parentEvent, o = t.parentFlag, i = t.isPinch, a = t.deltaOffset, s = t.useSnap, l = t.isRequest, c = t.isGroup, u = t.parentThrottleDrag, d = t.distX, h = t.distY, p = r.isDrag, g = r.prevDist, v = r.prevBeforeDist, m = r.startValue;
      if (p) {
        a && (d += a[0], h += a[1]);
        var x = e.props, y = x.parentMoveable, b = c ? 0 : x.throttleDrag || u || 0, w = n ? 0 : x.throttleDragRotate || 0, _ = 0, R = !1, T = !1, k = !1, j = !1;
        if (!n && w > 0 && (d || h)) {
          var A = x.startDragRotate || 0, $ = De(A + dt([0, 0], [d, h]) * 180 / Math.PI, w) - A, F = h * Math.abs(Math.cos(($ - 90) / 180 * Math.PI)), L = d * Math.abs(Math.cos($ / 180 * Math.PI)), P = cr([L, F]);
          _ = $ * Math.PI / 180, d = P * Math.cos(_), h = P * Math.sin(_);
        }
        if (!i && !n && !o) {
          var O = W(yP(e, d, h, w, !s && l || a, r), 2), I = O[0], E = O[1];
          R = I.isSnap, T = I.isBound, k = E.isSnap, j = E.isBound;
          var S = I.offset, M = E.offset;
          d += S, h += M;
        }
        var D = Ge(Ux({ datas: r, distX: d, distY: h }), m), N = Ge(A3({ datas: r, distX: d, distY: h }), m);
        Kp(N, Pt), Kp(D, Pt), w || (!R && !T && (N[0] = De(N[0], b), D[0] = De(D[0], b)), !k && !j && (N[1] = De(N[1], b), D[1] = De(D[1], b)));
        var z = be(D, m), Y = be(N, m), H = be(Y, g), X = be(z, v);
        r.prevDist = Y, r.prevBeforeDist = z, r.passDelta = H, r.passDist = Y;
        var Q = r.left + z[0], q = r.top + z[1], K = r.right - z[0], ne = r.bottom - z[1], oe = sc(r, "translate(".concat(N[0], "px, ").concat(N[1], "px)"), "translate(".concat(Y[0], "px, ").concat(Y[1], "px)"));
        if (Vf(t, oe), e.state.dragInfo.dist = n ? [0, 0] : Y, !(!n && !y && H.every(function(J) {
          return !J;
        }) && X.some(function(J) {
          return !J;
        }))) {
          var te = e.state, G = te.width, ee = te.height, U = Pe(e, t, V({ transform: oe, dist: Y, delta: H, translate: N, beforeDist: z, beforeDelta: X, beforeTranslate: D, left: Q, top: q, right: K, bottom: ne, width: G, height: ee, isPinch: i }, kt({
            transform: oe
          }, t)));
          return !n && fe(e, "onDrag", U), U;
        }
      }
    }
  },
  dragAfter: function(e, t) {
    var r = t.datas, n = r.deltaOffset;
    return n[0] || n[1] ? (r.deltaOffset = [0, 0], this.drag(e, V(V({}, t), { deltaOffset: n }))) : !1;
  },
  dragEnd: function(e, t) {
    var r = t.parentEvent, n = t.datas;
    if (e.state.dragInfo = null, !!n.isDrag) {
      n.isDrag = !1;
      var o = qt(e, t, {});
      return !r && fe(e, "onDragEnd", o), o;
    }
  },
  dragGroupStart: function(e, t) {
    var r, n, o = t.datas, i = t.clientX, a = t.clientY, s = this.dragStart(e, t);
    if (!s)
      return !1;
    var l = tu(e, this, "dragStart", [
      i || 0,
      a || 0
    ], t, !1, "draggable"), c = l.childEvents, u = l.eventParams, d = V(V({}, s), { targets: e.props.targets, events: u }), h = fe(e, "onDragGroupStart", d);
    o.isDrag = h !== !1;
    var p = (n = (r = c[0]) === null || r === void 0 ? void 0 : r.datas.startValue) !== null && n !== void 0 ? n : [0, 0];
    return o.throttleOffset = [p[0] % 1, p[1] % 1], o.isDrag ? s : !1;
  },
  dragGroup: function(e, t) {
    var r = t.datas;
    if (r.isDrag) {
      var n = this.drag(e, V(V({}, t), { parentThrottleDrag: e.props.throttleDrag })), o = t.datas.passDelta, i = tu(e, this, "drag", o, t, !1, "draggable").eventParams;
      if (n) {
        var a = V({ targets: e.props.targets, events: i }, n);
        return fe(e, "onDragGroup", a), a;
      }
    }
  },
  dragGroupEnd: function(e, t) {
    var r = t.isDrag, n = t.datas;
    if (n.isDrag) {
      this.dragEnd(e, t);
      var o = tu(e, this, "dragEnd", [0, 0], t, !1, "draggable").eventParams;
      return fe(e, "onDragGroupEnd", qt(e, t, {
        targets: e.props.targets,
        events: o
      })), r;
    }
  },
  /**
       * @method Moveable.Draggable#request
       * @param {object} [e] - the draggable's request parameter
       * @param {number} [e.x] - x position
       * @param {number} [e.y] - y position
       * @param {number} [e.deltaX] - X number to move
       * @param {number} [e.deltaY] - Y number to move
       * @return {Moveable.Requester} Moveable Requester
       * @example
  
       * // Instantly Request (requestStart - request - requestEnd)
       * // Use Relative Value
       * moveable.request("draggable", { deltaX: 10, deltaY: 10 }, true);
       * // Use Absolute Value
       * moveable.request("draggable", { x: 200, y: 100 }, true);
       *
       * // requestStart
       * const requester = moveable.request("draggable");
       *
       * // request
       * // Use Relative Value
       * requester.request({ deltaX: 10, deltaY: 10 });
       * requester.request({ deltaX: 10, deltaY: 10 });
       * requester.request({ deltaX: 10, deltaY: 10 });
       * // Use Absolute Value
       * moveable.request("draggable", { x: 200, y: 100 });
       * moveable.request("draggable", { x: 220, y: 100 });
       * moveable.request("draggable", { x: 240, y: 100 });
       *
       * // requestEnd
       * requester.requestEnd();
       */
  request: function(e) {
    var t = {}, r = e.getRect(), n = 0, o = 0, i = !1;
    return {
      isControl: !1,
      requestStart: function(a) {
        return i = a.useSnap, { datas: t, useSnap: i };
      },
      request: function(a) {
        return "x" in a ? n = a.x - r.left : "deltaX" in a && (n += a.deltaX), "y" in a ? o = a.y - r.top : "deltaY" in a && (o += a.deltaY), { datas: t, distX: n, distY: o, useSnap: i };
      },
      requestEnd: function() {
        return { datas: t, isDrag: !0, useSnap: i };
      }
    };
  },
  unset: function(e) {
    e.state.gestos.draggable = null, e.state.dragInfo = null;
  }
};
function uy(e, t) {
  var r = xt(e, t), n = [0, 0];
  return {
    fixedPosition: r,
    fixedDirection: t,
    fixedOffset: n
  };
}
function EP(e, t) {
  var r = e.allMatrix, n = e.is3d, o = e.width, i = e.height, a = n ? 4 : 3, s = [
    o / 2 * (1 + t[0]),
    i / 2 * (1 + t[1])
  ], l = ot(r, s, a), c = [0, 0];
  return {
    fixedPosition: l,
    fixedDirection: t,
    fixedOffset: c
  };
}
function dy(e, t) {
  var r = e.allMatrix, n = e.is3d, o = e.width, i = e.height, a = n ? 4 : 3, s = G3(t, o, i), l = ot(r, t, a), c = [
    o ? 0 : t[0],
    i ? 0 : t[1]
  ];
  return {
    fixedPosition: l,
    fixedDirection: s,
    fixedOffset: c
  };
}
var dv = th("resizable"), sd = {
  name: "resizable",
  ableGroup: "size",
  canPinch: !0,
  props: [
    "resizable",
    "throttleResize",
    "renderDirections",
    "displayAroundControls",
    "keepRatio",
    "resizeFormat",
    "keepRatioFinally",
    "edge",
    "checkResizableError"
  ],
  events: [
    "resizeStart",
    "beforeResize",
    "resize",
    "resizeEnd",
    "resizeGroupStart",
    "beforeResizeGroup",
    "resizeGroup",
    "resizeGroupEnd"
  ],
  render: Qx("resizable"),
  dragControlCondition: dv,
  viewClassName: eh("resizable"),
  dragControlStart: function(e, t) {
    var r, n = t.inputEvent, o = t.isPinch, i = t.isGroup, a = t.parentDirection, s = t.parentGesto, l = t.datas, c = t.parentFixedDirection, u = t.parentEvent, d = Ey(a, o, n, l), h = e.state, p = h.target, g = h.width, v = h.height, m = h.gestos;
    if (!d || !p || m.resizable)
      return !1;
    m.resizable = s || e.controlGesto, !o && po(e, t), l.datas = {}, l.direction = d, l.startOffsetWidth = g, l.startOffsetHeight = v, l.prevWidth = 0, l.prevHeight = 0, l.minSize = [0, 0], l.startWidth = h.inlineCSSWidth || h.cssWidth, l.startHeight = h.inlineCSSHeight || h.cssHeight, l.maxSize = [1 / 0, 1 / 0], i || (l.minSize = [
      h.minOffsetWidth,
      h.minOffsetHeight
    ], l.maxSize = [
      h.maxOffsetWidth,
      h.maxOffsetHeight
    ]);
    var x = e.props.transformOrigin || "% %";
    l.transformOrigin = rt(x) ? x.split(" ") : x, l.startOffsetMatrix = h.offsetMatrix, l.startTransformOrigin = h.transformOrigin, l.isWidth = (r = t?.parentIsWidth) !== null && r !== void 0 ? r : !d[0] && !d[1] || d[0] || !d[1];
    function y(j) {
      l.ratio = j && isFinite(j) ? j : 0;
    }
    l.startPositions = ur(e.state);
    function b(j) {
      var A = uy(l.startPositions, j);
      l.fixedDirection = A.fixedDirection, l.fixedPosition = A.fixedPosition, l.fixedOffset = A.fixedOffset;
    }
    function w(j) {
      var A = dy(e.state, j);
      l.fixedDirection = A.fixedDirection, l.fixedPosition = A.fixedPosition, l.fixedOffset = A.fixedOffset;
    }
    function _(j) {
      l.minSize = [
        Ye("".concat(j[0]), 0) || 0,
        Ye("".concat(j[1]), 0) || 0
      ];
    }
    function R(j) {
      var A = [
        j[0] || 1 / 0,
        j[1] || 1 / 0
      ];
      (!ma(A[0]) || isFinite(A[0])) && (A[0] = Ye("".concat(A[0]), 0) || 1 / 0), (!ma(A[1]) || isFinite(A[1])) && (A[1] = Ye("".concat(A[1]), 0) || 1 / 0), l.maxSize = A;
    }
    y(g / v), b(c || [-d[0], -d[1]]), l.setFixedDirection = b, l.setFixedPosition = w, l.setMin = _, l.setMax = R;
    var T = Pe(e, t, {
      direction: d,
      startRatio: l.ratio,
      set: function(j) {
        var A = W(j, 2), $ = A[0], F = A[1];
        l.startWidth = $, l.startHeight = F;
      },
      setMin: _,
      setMax: R,
      setRatio: y,
      setFixedDirection: b,
      setFixedPosition: w,
      setOrigin: function(j) {
        l.transformOrigin = j;
      },
      dragStart: Tt.dragStart(e, new ti().dragStart([0, 0], t))
    }), k = u || fe(e, "onResizeStart", T);
    return l.startFixedDirection = l.fixedDirection, l.startFixedPosition = l.fixedPosition, k !== !1 && (l.isResize = !0, e.state.snapRenderInfo = {
      request: t.isRequest,
      direction: d
    }), l.isResize ? T : !1;
  },
  dragControl: function(e, t) {
    var r, n = t.datas, o = t.parentFlag, i = t.isPinch, a = t.parentKeepRatio, s = t.dragClient, l = t.parentDist, c = t.useSnap, u = t.isRequest, d = t.isGroup, h = t.parentEvent, p = t.resolveMatrix, g = n.isResize, v = n.transformOrigin, m = n.startWidth, x = n.startHeight, y = n.prevWidth, b = n.prevHeight, w = n.minSize, _ = n.maxSize, R = n.ratio, T = n.startOffsetWidth, k = n.startOffsetHeight, j = n.isWidth;
    if (!g)
      return;
    if (p) {
      var A = e.state.is3d, $ = n.startOffsetMatrix, F = n.startTransformOrigin, L = A ? 4 : 3, P = Jo(ll(t)), O = Math.sqrt(P.length);
      L !== O && (P = Rr(P, O, L));
      var I = Ya($, P, F, L), E = vo(I, T, k, L);
      n.startPositions = E, n.nextTargetMatrix = P, n.nextAllMatrix = I;
    }
    var S = lo(e.props, "resizable"), M = S.resizeFormat, D = S.throttleResize, N = D === void 0 ? o ? 0 : 1 : D, z = S.parentMoveable, Y = S.keepRatioFinally, H = n.direction, X = H, Q = 0, q = 0;
    !H[0] && !H[1] && (X = [1, 1]);
    var K = R && (a ?? S.keepRatio) || !1;
    function ne() {
      var Re = n.fixedDirection, Se = Ty(X, K, n, t);
      Q = Se.distWidth, q = Se.distHeight;
      var je = X[0] - Re[0] || K ? Math.max(T + Q, Pt) : T, ge = X[1] - Re[1] || K ? Math.max(k + q, Pt) : k;
      return K && T && k && (j ? ge = je / R : je = ge * R), [je, ge];
    }
    var oe = W(ne(), 2), te = oe[0], G = oe[1];
    h || (n.setFixedDirection(n.fixedDirection), fe(e, "onBeforeResize", Pe(e, t, {
      startFixedDirection: n.startFixedDirection,
      startFixedPosition: n.startFixedPosition,
      setFixedDirection: function(Re) {
        var Se;
        return n.setFixedDirection(Re), Se = W(ne(), 2), te = Se[0], G = Se[1], [te, G];
      },
      setFixedPosition: function(Re) {
        var Se;
        return n.setFixedPosition(Re), Se = W(ne(), 2), te = Se[0], G = Se[1], [te, G];
      },
      boundingWidth: te,
      boundingHeight: G,
      setSize: function(Re) {
        var Se;
        Se = W(Re, 2), te = Se[0], G = Se[1];
      }
    }, !0)));
    var ee = s;
    s || (!o && i ? ee = W3(e, [0, 0]) : ee = n.fixedPosition);
    var U = [0, 0];
    i || (U = zP(e, te, G, H, ee, !c && u, n)), l && (!l[0] && (U[0] = 0), !l[1] && (U[1] = 0));
    function J() {
      var Re;
      M && (Re = W(M([te, G]), 2), te = Re[0], G = Re[1]), te = De(te, N), G = De(G, N);
    }
    if (K) {
      X[0] && X[1] && U[0] && U[1] && (ie(U[0]) > ie(U[1]) ? U[1] = 0 : U[0] = 0);
      var re = !U[0] && !U[1];
      re && J(), X[0] && !X[1] || U[0] && !U[1] || re && j ? (te += U[0], G = te / R) : (!X[0] && X[1] || !U[0] && U[1] || re && !j) && (G += U[1], te = G * R);
    } else
      te += U[0], G += U[1], te = Math.max(0, te), G = Math.max(0, G);
    r = W(Pf([te, G], w, _, K ? R : !1), 2), te = r[0], G = r[1], J(), K && (d || Y) && (j ? G = te / R : te = G * R), Q = te - T, q = G - k;
    var se = [Q - y, q - b];
    n.prevWidth = Q, n.prevHeight = q;
    var de = H3(e, te, G, ee, v, n);
    if (!(!z && se.every(function(Re) {
      return !Re;
    }) && de.every(function(Re) {
      return !Re;
    }))) {
      var ce = Tt.drag(e, Wa(t, e.state, de, !!i, !1, "draggable")), pe = ce.transform, we = m + Q, Ne = x + q, Le = Pe(e, t, V({ width: we, height: Ne, offsetWidth: Math.round(te), offsetHeight: Math.round(G), startRatio: R, boundingWidth: te, boundingHeight: G, direction: H, dist: [Q, q], delta: se, isPinch: !!i, drag: ce }, Ny({
        style: {
          width: "".concat(we, "px"),
          height: "".concat(Ne, "px")
        },
        transform: pe
      }, ce, t)));
      return !h && fe(e, "onResize", Le), Le;
    }
  },
  dragControlAfter: function(e, t) {
    var r = t.datas, n = r.isResize, o = r.startOffsetWidth, i = r.startOffsetHeight, a = r.prevWidth, s = r.prevHeight;
    if (!(!n || e.props.checkResizableError === !1)) {
      var l = e.state, c = l.width, u = l.height, d = c - (o + a), h = u - (i + s), p = ie(d) > 3, g = ie(h) > 3;
      if (p && (r.startWidth += d, r.startOffsetWidth += d, r.prevWidth += d), g && (r.startHeight += h, r.startOffsetHeight += h, r.prevHeight += h), p || g)
        return this.dragControl(e, t);
    }
  },
  dragControlEnd: function(e, t) {
    var r = t.datas, n = t.parentEvent;
    if (r.isResize) {
      r.isResize = !1;
      var o = qt(e, t, {});
      return !n && fe(e, "onResizeEnd", o), o;
    }
  },
  dragGroupControlCondition: dv,
  dragGroupControlStart: function(e, t) {
    var r = t.datas, n = this.dragControlStart(e, V(V({}, t), { isGroup: !0 }));
    if (!n)
      return !1;
    var o = wr(e, "resizable", t), i = r.startOffsetWidth, a = r.startOffsetHeight;
    function s() {
      var p = r.minSize;
      o.forEach(function(g) {
        var v = g.datas, m = v.minSize, x = v.startOffsetWidth, y = v.startOffsetHeight, b = i * (x ? m[0] / x : 0), w = a * (y ? m[1] / y : 0);
        p[0] = Math.max(p[0], b), p[1] = Math.max(p[1], w);
      });
    }
    function l() {
      var p = r.maxSize;
      o.forEach(function(g) {
        var v = g.datas, m = v.maxSize, x = v.startOffsetWidth, y = v.startOffsetHeight, b = i * (x ? m[0] / x : 0), w = a * (y ? m[1] / y : 0);
        p[0] = Math.min(p[0], b), p[1] = Math.min(p[1], w);
      });
    }
    var c = rn(e, this, "dragControlStart", t, function(p, g) {
      return cl(e, p, r, g);
    });
    s(), l();
    var u = function(p) {
      n.setFixedDirection(p), c.forEach(function(g, v) {
        g.setFixedDirection(p), cl(e, g.moveable, r, o[v]);
      });
    };
    r.setFixedDirection = u;
    var d = V(V({}, n), { targets: e.props.targets, events: c.map(function(p) {
      return V(V({}, p), { setMin: function(g) {
        p.setMin(g), s();
      }, setMax: function(g) {
        p.setMax(g), l();
      } });
    }), setFixedDirection: u, setMin: function(p) {
      n.setMin(p), s();
    }, setMax: function(p) {
      n.setMax(p), l();
    } }), h = fe(e, "onResizeGroupStart", d);
    return r.isResize = h !== !1, r.isResize ? n : !1;
  },
  dragGroupControl: function(e, t) {
    var r = t.datas;
    if (r.isResize) {
      var n = lo(e.props, "resizable");
      pc(e, "onBeforeResize", function(p) {
        fe(e, "onBeforeResizeGroup", Pe(e, t, V(V({}, p), { targets: n.targets }), !0));
      });
      var o = this.dragControl(e, V(V({}, t), { isGroup: !0 }));
      if (o) {
        var i = o.boundingWidth, a = o.boundingHeight, s = o.dist, l = n.keepRatio, c = [
          i / (i - s[0]),
          a / (a - s[1])
        ], u = r.fixedPosition, d = rn(e, this, "dragControl", t, function(p, g) {
          var v = W(Mt(Va(e.rotation / 180 * Math.PI, 3), [
            g.datas.originalX * c[0],
            g.datas.originalY * c[1],
            1
          ], 3), 2), m = v[0], x = v[1];
          return V(V({}, g), { parentDist: null, parentScale: c, dragClient: Ge(u, [m, x]), parentKeepRatio: l });
        }), h = V({ targets: n.targets, events: d }, o);
        return fe(e, "onResizeGroup", h), h;
      }
    }
  },
  dragGroupControlEnd: function(e, t) {
    var r = t.isDrag, n = t.datas;
    if (n.isResize) {
      this.dragControlEnd(e, t);
      var o = rn(e, this, "dragControlEnd", t), i = qt(e, t, {
        targets: e.props.targets,
        events: o
      });
      return fe(e, "onResizeGroupEnd", i), r;
    }
  },
  /**
       * @method Moveable.Resizable#request
       * @param {Moveable.Resizable.ResizableRequestParam} e - the Resizable's request parameter
       * @return {Moveable.Requester} Moveable Requester
       * @example
  
       * // Instantly Request (requestStart - request - requestEnd)
       * // Use Relative Value
       * moveable.request("resizable", { deltaWidth: 10, deltaHeight: 10 }, true);
       *
       * // Use Absolute Value
       * moveable.request("resizable", { offsetWidth: 100, offsetHeight: 100 }, true);
       *
       * // requestStart
       * const requester = moveable.request("resizable");
       *
       * // request
       * // Use Relative Value
       * requester.request({ deltaWidth: 10, deltaHeight: 10 });
       * requester.request({ deltaWidth: 10, deltaHeight: 10 });
       * requester.request({ deltaWidth: 10, deltaHeight: 10 });
       *
       * // Use Absolute Value
       * moveable.request("resizable", { offsetWidth: 100, offsetHeight: 100 });
       * moveable.request("resizable", { offsetWidth: 110, offsetHeight: 100 });
       * moveable.request("resizable", { offsetWidth: 120, offsetHeight: 100 });
       *
       * // requestEnd
       * requester.requestEnd();
       */
  request: function(e) {
    var t = {}, r = 0, n = 0, o = !1, i = e.getRect();
    return {
      isControl: !0,
      requestStart: function(a) {
        var s;
        return o = a.useSnap, {
          datas: t,
          parentDirection: a.direction || [1, 1],
          parentIsWidth: (s = a?.horizontal) !== null && s !== void 0 ? s : !0,
          useSnap: o
        };
      },
      request: function(a) {
        return "offsetWidth" in a ? r = a.offsetWidth - i.offsetWidth : "deltaWidth" in a && (r += a.deltaWidth), "offsetHeight" in a ? n = a.offsetHeight - i.offsetHeight : "deltaHeight" in a && (n += a.deltaHeight), {
          datas: t,
          parentDist: [r, n],
          parentKeepRatio: a.keepRatio,
          useSnap: o
        };
      },
      requestEnd: function() {
        return { datas: t, isDrag: !0, useSnap: o };
      }
    };
  },
  unset: function(e) {
    e.state.gestos.resizable = null;
  }
};
function ru(e, t, r, n, o) {
  var i = e.props.groupable, a = e.state, s = a.is3d ? 4 : 3, l = t.origin, c = ot(
    e.state.rootMatrix,
    // TO-DO #710
    be([l[0], l[1]], i ? [0, 0] : [a.left, a.top]),
    s
  ), u = Ge([o.left, o.top], c);
  t.startAbsoluteOrigin = u, t.prevDeg = dt(u, [r, n]) / Math.PI * 180, t.defaultDeg = t.prevDeg, t.prevSnapDeg = 0, t.loop = 0, t.startDist = zr(u, [r, n]);
}
function Ws(e, t, r) {
  var n = r.defaultDeg, o = r.prevDeg, i = o % 360, a = Math.floor(o / 360);
  i < 0 && (i += 360), i > e && i > 270 && e < 90 ? ++a : i < e && i < 90 && e > 270 && --a;
  var s = t * (a * 360 + e - n);
  return r.prevDeg = n + s, s;
}
function nu(e, t, r, n) {
  return Ws(dt(n.startAbsoluteOrigin, [e, t]) / Math.PI * 180, r, n);
}
function ou(e, t, r, n, o, i) {
  var a = e.props.throttleRotate, s = a === void 0 ? 0 : a, l = r.prevSnapDeg, c = 0, u = !1;
  if (i) {
    var d = BP(e, t, n, o + n);
    u = d.isSnap, c = o + d.dist;
  }
  u || (c = De(o + n, s));
  var h = c - o;
  return r.prevSnapDeg = h, [h - l, h, c];
}
function fy(e, t, r) {
  var n = W(t, 4), o = n[0], i = n[1], a = n[2], s = n[3];
  if (e === "none")
    return [];
  if (Ue(e))
    return e.map(function(m) {
      return fy(m, [o, i, a, s], r)[0];
    });
  var l = W((e || "top").split("-"), 2), c = l[0], u = l[1], d = [o, i];
  c === "left" ? d = [a, o] : c === "right" ? d = [i, s] : c === "bottom" && (d = [s, a]);
  var h = [
    (d[0][0] + d[1][0]) / 2,
    (d[0][1] + d[1][1]) / 2
  ], p = Sy(d, r);
  if (u) {
    var g = u === "top" || u === "left", v = c === "bottom" || c === "left";
    h = d[g && !v || !g && v ? 0 : 1];
  }
  return [[h, p]];
}
function ld(e, t) {
  if (t.isRequest)
    return t.requestAble === "rotatable";
  var r = t.inputEvent.target;
  if (ut(r, xe("rotation-control")) || e.props.rotateAroundControls && ut(r, xe("around-control")) || ut(r, xe("control")) && ut(r, xe("rotatable")))
    return !0;
  var n = e.props.rotationTarget;
  return n ? rh(n, !0).some(function(o) {
    return o ? r === o || r.contains(o) : !1;
  }) : !1;
}
var _P = `.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`, NP = {
  name: "rotatable",
  canPinch: !0,
  props: [
    "rotatable",
    "rotationPosition",
    "throttleRotate",
    "renderDirections",
    "rotationTarget",
    "rotateAroundControls",
    "edge",
    "resolveAblesWithRotatable",
    "displayAroundControls"
  ],
  events: [
    "rotateStart",
    "beforeRotate",
    "rotate",
    "rotateEnd",
    "rotateGroupStart",
    "beforeRotateGroup",
    "rotateGroup",
    "rotateGroupEnd"
  ],
  css: [_P],
  viewClassName: function(e) {
    return e.isDragging("rotatable") ? xe("view-rotation-dragging") : "";
  },
  render: function(e, t) {
    var r = lo(e.props, "rotatable"), n = r.rotatable, o = r.rotationPosition, i = r.zoom, a = r.renderDirections, s = r.rotateAroundControls, l = r.resolveAblesWithRotatable, c = e.getState(), u = c.renderPoses, d = c.direction;
    if (!n)
      return null;
    var h = fy(o, u, d), p = [];
    if (h.forEach(function(x, y) {
      var b = W(x, 2), w = b[0], _ = b[1];
      p.push(t.createElement(
        "div",
        { key: "rotation".concat(y), className: xe("rotation"), style: {
          // tslint:disable-next-line: max-line-length
          transform: "translate(-50%) translate(".concat(w[0], "px, ").concat(w[1], "px) rotate(").concat(_, "rad)")
        } },
        t.createElement("div", { className: xe("line rotation-line"), style: {
          transform: "scaleX(".concat(i, ")")
        } }),
        t.createElement("div", { className: xe("control rotation-control"), style: {
          transform: "translate(0.5px) scale(".concat(i, ")")
        } })
      ));
    }), a) {
      var g = ar(l || {}), v = {};
      g.forEach(function(x) {
        l[x].forEach(function(y) {
          v[y] = x;
        });
      });
      var m = [];
      Ue(a) && (m = a.map(function(x) {
        var y = v[x];
        return {
          data: y ? { resolve: y } : {},
          classNames: y ? ["move"] : [],
          dir: x
        };
      })), p.push.apply(p, le([], W(Xx(e, "rotatable", m, t)), !1));
    }
    return s && p.push.apply(p, le([], W(ey(e, t)), !1)), p;
  },
  dragControlCondition: ld,
  dragControlStart: function(e, t) {
    var r, n, o = t.datas, i = t.clientX, a = t.clientY, s = t.parentRotate, l = t.parentFlag, c = t.isPinch, u = t.isRequest, d = e.state, h = d.target, p = d.left, g = d.top, v = d.direction, m = d.beforeDirection, x = d.targetTransform, y = d.moveableClientRect, b = d.offsetMatrix, w = d.targetMatrix, _ = d.allMatrix, R = d.width, T = d.height;
    if (!u && !h)
      return !1;
    var k = e.getRect();
    o.rect = k, o.transform = x, o.left = p, o.top = g;
    var j = function(X) {
      var Q = dy(e.state, X);
      o.fixedDirection = Q.fixedDirection, o.fixedOffset = Q.fixedOffset, o.fixedPosition = Q.fixedPosition, N && N.setFixedPosition(X);
    }, A = function(X) {
      var Q = EP(e.state, X);
      o.fixedDirection = Q.fixedDirection, o.fixedOffset = Q.fixedOffset, o.fixedPosition = Q.fixedPosition, N && N.setFixedDirection(X);
    }, $ = i, F = a;
    if (u || c || l) {
      var L = s || 0;
      o.beforeInfo = {
        origin: k.beforeOrigin,
        prevDeg: L,
        defaultDeg: L,
        prevSnapDeg: 0,
        startDist: 0
      }, o.afterInfo = V(V({}, o.beforeInfo), { origin: k.origin }), o.absoluteInfo = V(V({}, o.beforeInfo), { origin: k.origin, startValue: L });
    } else {
      var P = (n = t.inputEvent) === null || n === void 0 ? void 0 : n.target;
      if (P) {
        var O = P.getAttribute("data-direction") || "", I = j3[O];
        if (I) {
          o.isControl = !0, o.isAroundControl = ut(P, xe("around-control")), o.controlDirection = I;
          var E = P.getAttribute("data-resolve");
          E && (o.resolveAble = E);
          var S = tA(d.rootMatrix, d.renderPoses, y);
          r = W(xt(S, I), 2), $ = r[0], F = r[1];
        }
      }
      o.beforeInfo = { origin: k.beforeOrigin }, o.afterInfo = { origin: k.origin }, o.absoluteInfo = {
        origin: k.origin,
        startValue: k.rotation
      };
      var M = j;
      j = function(X) {
        var Q = d.is3d ? 4 : 3, q = W(Ge(Rx(w, Q), X), 2), K = q[0], ne = q[1], oe = Mt(b, io([K, ne], Q)), te = Mt(_, io([X[0], X[1]], Q));
        M(X);
        var G = d.posDelta;
        o.beforeInfo.origin = be(oe, G), o.afterInfo.origin = be(te, G), o.absoluteInfo.origin = be(te, G), ru(e, o.beforeInfo, $, F, y), ru(e, o.afterInfo, $, F, y), ru(e, o.absoluteInfo, $, F, y);
      }, A = function(X) {
        var Q = xt([
          [0, 0],
          [R, 0],
          [0, T],
          [R, T]
        ], X);
        j(Q);
      };
    }
    o.startClientX = $, o.startClientY = F, o.direction = v, o.beforeDirection = m, o.startValue = 0, o.datas = {}, cc(e, t, "rotate");
    var D = !1, N = !1;
    if (o.isControl && o.resolveAble) {
      var z = o.resolveAble;
      z === "resizable" && (N = sd.dragControlStart(e, V(V({}, new ti("resizable").dragStart([0, 0], t)), { parentPosition: o.controlPosition, parentFixedPosition: o.fixedPosition })));
    }
    N || (D = Tt.dragStart(e, new ti().dragStart([0, 0], t))), j(rA(e));
    var Y = Pe(e, t, V(V({ set: function(X) {
      o.startValue = X * Math.PI / 180;
    }, setFixedDirection: A, setFixedPosition: j }, lc(e, t)), { dragStart: D, resizeStart: N })), H = fe(e, "onRotateStart", Y);
    return o.isRotate = H !== !1, d.snapRenderInfo = {
      request: t.isRequest
    }, o.isRotate ? Y : !1;
  },
  dragControl: function(e, t) {
    var r, n, o, i = t.datas, a = t.clientDistX, s = t.clientDistY, l = t.parentRotate, c = t.parentFlag, u = t.isPinch, d = t.groupDelta, h = t.resolveMatrix, p = i.beforeDirection, g = i.beforeInfo, v = i.afterInfo, m = i.absoluteInfo, x = i.isRotate, y = i.startValue, b = i.rect, w = i.startClientX, _ = i.startClientY;
    if (x) {
      ac(e, t, "rotate");
      var R = P3(t), T = p * R, k = e.props.parentMoveable, j = 0, A, $, F = 0, L, P, O = 0, I, E, S = 180 / Math.PI * y, M = m.startValue, D = !1, N = w + a, z = _ + s;
      if (!c && "parentDist" in t) {
        var Y = t.parentDist;
        A = Y, L = Y, I = Y;
      } else u || c ? (A = Ws(l, p, g), L = Ws(l, T, v), I = Ws(l, T, m)) : (A = nu(N, z, p, g), L = nu(N, z, T, v), I = nu(N, z, T, m), D = !0);
      if ($ = S + A, P = S + L, E = M + I, fe(e, "onBeforeRotate", Pe(e, t, {
        beforeRotation: $,
        rotation: P,
        absoluteRotation: E,
        setRotation: function(ee) {
          L = ee - S, A = L, I = L;
        }
      }, !0)), r = W(ou(e, b, g, A, S, D), 3), j = r[0], A = r[1], $ = r[2], n = W(ou(e, b, v, L, S, D), 3), F = n[0], L = n[1], P = n[2], o = W(ou(e, b, m, I, M, D), 3), O = o[0], I = o[1], E = o[2], !(!O && !F && !j && !k && !h)) {
        var H = sc(i, "rotate(".concat(P, "deg)"), "rotate(".concat(L, "deg)"));
        h && (i.fixedPosition = Uf(e, i.targetAllTransform, i.fixedDirection, i.fixedOffset, i));
        var X = U3(e, L, i), Q = be(Ge(d || [0, 0], X), i.prevInverseDist || [0, 0]);
        i.prevInverseDist = X, i.requestValue = null;
        var q = Wx(e, H, Q, u, t), K = q, ne = zr([N, z], m.startAbsoluteOrigin) - m.startDist, oe = void 0;
        if (i.resolveAble === "resizable") {
          var te = sd.dragControl(e, V(V({}, Wa(t, e.state, [t.deltaX, t.deltaY], !!u, !1, "resizable")), { resolveMatrix: !0, parentDistance: ne }));
          te && (oe = te, K = Ny(K, te, t));
        }
        var G = Pe(e, t, V(V({ delta: F, dist: L, rotate: P, rotation: P, beforeDist: A, beforeDelta: j, beforeRotate: $, beforeRotation: $, absoluteDist: I, absoluteDelta: O, absoluteRotate: E, absoluteRotation: E, isPinch: !!u, resize: oe }, q), K));
        return fe(e, "onRotate", G), G;
      }
    }
  },
  dragControlEnd: function(e, t) {
    var r = t.datas;
    if (r.isRotate) {
      r.isRotate = !1;
      var n = qt(e, t, {});
      return fe(e, "onRotateEnd", n), n;
    }
  },
  dragGroupControlCondition: ld,
  dragGroupControlStart: function(e, t) {
    var r = t.datas, n = e.state, o = n.left, i = n.top, a = n.beforeOrigin, s = this.dragControlStart(e, t);
    if (!s)
      return !1;
    s.set(r.beforeDirection * e.rotation);
    var l = rn(e, this, "dragControlStart", t, function(d, h) {
      var p = d.state, g = p.left, v = p.top, m = p.beforeOrigin, x = Ge(be([g, v], [o, i]), be(m, a));
      return h.datas.startGroupClient = x, h.datas.groupClient = x, V(V({}, h), { parentRotate: 0 });
    }), c = V(V({}, s), { targets: e.props.targets, events: l }), u = fe(e, "onRotateGroupStart", c);
    return r.isRotate = u !== !1, r.isRotate ? s : !1;
  },
  dragGroupControl: function(e, t) {
    var r = t.datas;
    if (r.isRotate) {
      pc(e, "onBeforeRotate", function(c) {
        fe(e, "onBeforeRotateGroup", Pe(e, t, V(V({}, c), { targets: e.props.targets }), !0));
      });
      var n = this.dragControl(e, t);
      if (n) {
        var o = r.beforeDirection, i = n.beforeDist, a = i / 180 * Math.PI, s = rn(e, this, "dragControl", t, function(c, u) {
          var d = u.datas.startGroupClient, h = W(u.datas.groupClient, 2), p = h[0], g = h[1], v = W(Ga(d, a * o), 2), m = v[0], x = v[1], y = [m - p, x - g];
          return u.datas.groupClient = [m, x], V(V({}, u), { parentRotate: i, groupDelta: y });
        });
        e.rotation = o * n.beforeRotation;
        var l = V({ targets: e.props.targets, events: s, set: function(c) {
          e.rotation = c;
        }, setGroupRotation: function(c) {
          e.rotation = c;
        } }, n);
        return fe(e, "onRotateGroup", l), l;
      }
    }
  },
  dragGroupControlEnd: function(e, t) {
    var r = t.isDrag, n = t.datas;
    if (n.isRotate) {
      this.dragControlEnd(e, t);
      var o = rn(e, this, "dragControlEnd", t), i = qt(e, t, {
        targets: e.props.targets,
        events: o
      });
      return fe(e, "onRotateGroupEnd", i), r;
    }
  },
  /**
       * @method Moveable.Rotatable#request
       * @param {object} [e] - the Resizable's request parameter
       * @param {number} [e.deltaRotate=0] -  delta number of rotation
       * @param {number} [e.rotate=0] - absolute number of moveable's rotation
       * @return {Moveable.Requester} Moveable Requester
       * @example
  
       * // Instantly Request (requestStart - request - requestEnd)
       * moveable.request("rotatable", { deltaRotate: 10 }, true);
       *
       * * moveable.request("rotatable", { rotate: 10 }, true);
       *
       * // requestStart
       * const requester = moveable.request("rotatable");
       *
       * // request
       * requester.request({ deltaRotate: 10 });
       * requester.request({ deltaRotate: 10 });
       * requester.request({ deltaRotate: 10 });
       *
       * requester.request({ rotate: 10 });
       * requester.request({ rotate: 20 });
       * requester.request({ rotate: 30 });
       *
       * // requestEnd
       * requester.requestEnd();
       */
  request: function(e) {
    var t = {}, r = 0, n = e.getRotation();
    return {
      isControl: !0,
      requestStart: function() {
        return { datas: t };
      },
      request: function(o) {
        return "deltaRotate" in o ? r += o.deltaRotate : "rotate" in o && (r = o.rotate - n), { datas: t, parentDist: r };
      },
      requestEnd: function() {
        return { datas: t, isDrag: !0 };
      }
    };
  }
};
function DP(e, t) {
  var r, n = e.direction, o = e.classNames, i = e.size, a = e.pos, s = e.zoom, l = e.key, c = n === "horizontal", u = c ? "Y" : "X";
  return t.createElement("div", {
    key: l,
    className: o.join(" "),
    style: (r = {}, r[c ? "width" : "height"] = "".concat(i), r.transform = "translate(".concat(a[0], ", ").concat(a[1], ") translate").concat(u, "(-50%) scale").concat(u, "(").concat(s, ")"), r)
  });
}
function Kf(e, t) {
  return DP(V(V({}, e), { classNames: le([
    xe("line", "guideline", e.direction)
  ], W(e.classNames), !1).filter(function(r) {
    return r;
  }), size: e.size || "".concat(e.sizeValue, "px"), pos: e.pos || e.posValue.map(function(r) {
    return "".concat(De(r, 0.1), "px");
  }) }), t);
}
function fv(e, t, r, n, o, i, a, s) {
  var l = e.props.zoom;
  return r.map(function(c, u) {
    var d = c.type, h = c.pos, p = [0, 0];
    return p[a] = n, p[a ? 0 : 1] = -o + h, Kf({
      key: "".concat(t, "TargetGuideline").concat(u),
      classNames: [xe("target", "bold", d)],
      posValue: p,
      sizeValue: i,
      zoom: l,
      direction: t
    }, s);
  });
}
function hv(e, t, r, n, o, i) {
  var a = e.props, s = a.zoom, l = a.isDisplayInnerSnapDigit, c = t === "horizontal" ? Tn : jn, u = o[c.start], d = o[c.end];
  return r.filter(function(h) {
    var p = h.hide, g = h.elementRect;
    if (p)
      return !1;
    if (l && g) {
      var v = g.rect;
      if (v[c.start] <= u && d <= v[c.end])
        return !1;
    }
    return !0;
  }).map(function(h, p) {
    var g = h.pos, v = h.size, m = h.element, x = h.className, y = [
      -n[0] + g[0],
      -n[1] + g[1]
    ];
    return Kf({
      key: "".concat(t, "-default-guideline-").concat(p),
      classNames: m ? [xe("bold"), x] : [xe("normal"), x],
      direction: t,
      posValue: y,
      sizeValue: v,
      zoom: s
    }, i);
  });
}
function Li(e, t, r, n, o, i, a, s) {
  var l, c = e.props, u = c.snapDigit, d = u === void 0 ? 0 : u, h = c.isDisplaySnapDigit, p = h === void 0 ? !0 : h, g = c.snapDistFormat, v = g === void 0 ? function(_, R) {
    return _;
  } : g, m = c.zoom, x = t === "horizontal" ? "X" : "Y", y = t === "vertical" ? "height" : "width", b = Math.abs(o), w = p ? parseFloat(b.toFixed(d)) : 0;
  return s.createElement(
    "div",
    { key: "".concat(t, "-").concat(r, "-guideline-").concat(n), className: xe("guideline-group", t), style: (l = {
      left: "".concat(i[0], "px"),
      top: "".concat(i[1], "px")
    }, l[y] = "".concat(b, "px"), l) },
    Kf({
      direction: t,
      classNames: [xe(r), a],
      size: "100%",
      posValue: [0, 0],
      sizeValue: b,
      zoom: m
    }, s),
    s.createElement("div", { className: xe("size-value", "gap"), style: {
      transform: "translate".concat(x, "(-50%) scale(").concat(m, ")")
    } }, w > 0 ? v(w, t) : "")
  );
}
function RP(e, t, r, n) {
  var o = e === "vertical" ? 0 : 1, i = e === "vertical" ? 1 : 0, a = o ? Tn : jn, s = r[a.start], l = r[a.end];
  return Dy(t, function(c) {
    return c.pos[o];
  }).map(function(c) {
    var u = [], d = [], h = [];
    return c.forEach(function(p) {
      var g, v, m = p.element, x = p.elementRect.rect;
      if (x[a.end] < s)
        u.push(p);
      else if (l < x[a.start])
        d.push(p);
      else if (x[a.start] <= s && l <= x[a.end] && n) {
        var y = p.pos, b = { element: m, rect: V(V({}, x), (g = {}, g[a.end] = x[a.start], g)) }, w = { element: m, rect: V(V({}, x), (v = {}, v[a.start] = x[a.end], v)) }, _ = [0, 0], R = [0, 0];
        _[o] = y[o], _[i] = y[i], R[o] = y[o], R[i] = y[i] + p.size, u.push({
          type: e,
          pos: _,
          size: 0,
          elementRect: b,
          direction: "",
          elementDirection: "end"
        }), d.push({
          type: e,
          pos: R,
          size: 0,
          elementRect: w,
          direction: "",
          elementDirection: "start"
        });
      }
    }), u.sort(function(p, g) {
      return g.pos[i] - p.pos[i];
    }), d.sort(function(p, g) {
      return p.pos[i] - g.pos[i];
    }), {
      total: c,
      start: u,
      end: d,
      inner: h
    };
  });
}
function MP(e, t, r, n, o) {
  var i = e.props.isDisplayInnerSnapDigit, a = [];
  return ["vertical", "horizontal"].forEach(function(s) {
    var l = t.filter(function(m) {
      return m.type === s;
    }), c = s === "vertical" ? 1 : 0, u = c ? 0 : 1, d = RP(s, l, n, i), h = c ? jn : Tn, p = c ? Tn : jn, g = n[h.start], v = n[h.end];
    d.forEach(function(m) {
      var x = m.total, y = m.start, b = m.end, w = m.inner, _ = r[u] + x[0].pos[u] - n[p.start], R = n;
      y.forEach(function(T) {
        var k = T.elementRect.rect, j = R[h.start] - k[h.end];
        if (j > 0) {
          var A = [0, 0];
          A[c] = r[c] + R[h.start] - g - j, A[u] = _, a.push(Li(e, s, "dashed", a.length, j, A, T.className, o));
        }
        R = k;
      }), R = n, b.forEach(function(T) {
        var k = T.elementRect.rect, j = k[h.start] - R[h.end];
        if (j > 0) {
          var A = [0, 0];
          A[c] = r[c] + R[h.end] - g, A[u] = _, a.push(Li(e, s, "dashed", a.length, j, A, T.className, o));
        }
        R = k;
      }), w.forEach(function(T) {
        var k = T.elementRect.rect, j = g - k[h.start], A = k[h.end] - v, $ = [0, 0], F = [0, 0];
        $[c] = r[c] - j, $[u] = _, F[c] = r[c] + v - g, F[u] = _, a.push(Li(e, s, "dashed", a.length, j, $, T.className, o)), a.push(Li(e, s, "dashed", a.length, A, F, T.className, o));
      });
    });
  }), a;
}
function TP(e, t, r, n, o) {
  var i = [];
  return ["horizontal", "vertical"].forEach(function(a) {
    var s = t.filter(function(m) {
      return m.type === a;
    }).slice(0, 1), l = a === "vertical" ? 0 : 1, c = l ? 0 : 1, u = l ? jn : Tn, d = l ? Tn : jn, h = n[u.start], p = n[u.end], g = n[d.start], v = n[d.end];
    s.forEach(function(m) {
      var x = m.gap, y = m.gapRects, b = Math.max.apply(Math, le([g], W(y.map(function(R) {
        var T = R.rect;
        return T[d.start];
      })), !1)), w = Math.min.apply(Math, le([v], W(y.map(function(R) {
        var T = R.rect;
        return T[d.end];
      })), !1)), _ = (b + w) / 2;
      b === w || _ === (g + v) / 2 || y.forEach(function(R) {
        var T = R.rect, k = R.className, j = [r[0], r[1]];
        if (T[u.end] < h)
          j[l] += T[u.end] - h;
        else if (p < T[u.start])
          j[l] += T[u.start] - h - x;
        else
          return;
        j[c] += _ - g, i.push(Li(e, l ? "vertical" : "horizontal", "gap", i.length, x, j, k, o));
      });
    });
  }), i;
}
function cd(e) {
  var t, r, n = e.state, o = n.containerClientRect, i = n.hasFixed, a = o.overflow, s = o.scrollHeight, l = o.scrollWidth, c = o.clientHeight, u = o.clientWidth, d = o.clientLeft, h = o.clientTop, p = e.props, g = p.snapGap, v = g === void 0 ? !0 : g, m = p.verticalGuidelines, x = p.horizontalGuidelines, y = p.snapThreshold, b = y === void 0 ? 5 : y, w = p.maxSnapElementGuidelineDistance, _ = w === void 0 ? 1 / 0 : w, R = p.isDisplayGridGuidelines, T = sr(ur(e.state)), k = T.top, j = T.left, A = T.bottom, $ = T.right, F = { top: k, left: j, bottom: A, right: $, center: (j + $) / 2, middle: (k + A) / 2 }, L = AP(e), P = le([], W(L), !1), O = ((r = (t = n.snapThresholdInfo) === null || t === void 0 ? void 0 : t.multiples) !== null && r !== void 0 ? r : [1, 1]).map(function(M) {
    return M * b;
  });
  v && P.push.apply(P, le([], W(jP(e, F, O)), !1));
  var I = V({}, n.snapOffset || {
    left: 0,
    top: 0,
    bottom: 0,
    right: 0
  });
  if (P.push.apply(P, le([], W(PP(e, a ? l : u, a ? s : c, d, h, I, R)), !1)), i) {
    var E = o.left, S = o.top;
    I.left += E, I.top += S, I.right += E, I.bottom += S;
  }
  return P.push.apply(P, le([], W(py(x || !1, m || !1, a ? l : u, a ? s : c, d, h, I)), !1)), P = P.filter(function(M) {
    var D = M.element, N = M.elementRect, z = M.type;
    if (!D || !N)
      return !0;
    var Y = N.rect;
    return hy(F, Y, z, _);
  }), P;
}
function jP(e, t, r) {
  var n = e.props, o = n.maxSnapElementGuidelineDistance, i = o === void 0 ? 1 / 0 : o, a = n.maxSnapElementGapDistance, s = a === void 0 ? 1 / 0 : a, l = e.state.elementRects, c = [];
  return [
    ["vertical", Tn, jn],
    ["horizontal", jn, Tn]
  ].forEach(function(u) {
    var d = W(u, 3), h = d[0], p = d[1], g = d[2], v = t[p.start], m = t[p.end], x = t[p.center], y = t[g.start], b = t[g.end], w = {
      left: r[0],
      top: r[1]
    };
    function _(k) {
      var j = k.rect, A = w[p.start];
      return j[p.end] < v + A ? v - j[p.end] : m - A < j[p.start] ? j[p.start] - m : -1;
    }
    var R = l.filter(function(k) {
      var j = k.rect;
      return j[g.start] > b || j[g.end] < y ? !1 : _(k) > 0;
    }).sort(function(k, j) {
      return _(k) - _(j);
    }), T = [];
    R.forEach(function(k) {
      R.forEach(function(j) {
        if (k !== j) {
          var A = k.rect, $ = j.rect, F = A[g.start], L = A[g.end], P = $[g.start], O = $[g.end];
          F > O || P > L || T.push([k, j]);
        }
      });
    }), T.forEach(function(k) {
      var j = W(k, 2), A = j[0], $ = j[1], F = A.rect, L = $.rect, P = F[p.start], O = F[p.end], I = L[p.start], E = L[p.end], S = w[p.start], M = 0, D = 0, N = !1, z = !1, Y = !1;
      if (O <= v && m <= I) {
        if (z = !0, M = (I - O - (m - v)) / 2, D = O + M + (m - v) / 2, ie(D - x) > S)
          return;
      } else if (O < I && E < v + S) {
        if (N = !0, M = I - O, D = E + M, ie(D - v) > S)
          return;
      } else if (O < I && m - S < P) {
        if (Y = !0, M = I - O, D = P - M, ie(D - m) > S)
          return;
      } else
        return;
      M && hy(t, L, h, i) && (M > s || c.push({
        type: h,
        pos: h === "vertical" ? [D, 0] : [0, D],
        element: $.element,
        size: 0,
        className: $.className,
        isStart: N,
        isCenter: z,
        isEnd: Y,
        gap: M,
        hide: !0,
        gapRects: [A, $],
        direction: "",
        elementDirection: ""
      }));
    });
  }), c;
}
function kP(e, t, r, n) {
  var o, i, a = e.props, s = e.state, l = a.snapGridAll, c = a.snapGridWidth, u = c === void 0 ? 0 : c, d = a.snapGridHeight, h = d === void 0 ? 0 : d, p = s.snapRenderInfo, g = p && (((o = p.direction) === null || o === void 0 ? void 0 : o[0]) || ((i = p.direction) === null || i === void 0 ? void 0 : i[1])), v = e.moveables;
  if (l && v && g && (u || h)) {
    if (s.snapThresholdInfo)
      return;
    s.snapThresholdInfo = {
      multiples: [1, 1],
      offset: [0, 0]
    };
    var m = e.getRect(), x = m.children, y = p.direction;
    if (x) {
      var b = y.map(function(_, R) {
        var T = R === 0 ? {
          snapSize: u,
          posName: "left",
          sizeName: "width",
          clientOffset: n.left - t
        } : {
          snapSize: h,
          posName: "top",
          sizeName: "height",
          clientOffset: n.top - r
        }, k = T.snapSize, j = T.posName, A = T.sizeName, $ = T.clientOffset;
        if (!k)
          return {
            dir: _,
            multiple: 1,
            snapSize: k,
            snapOffset: 0
          };
        var F = m[A], L = m[j], P = Dk(x.map(function(N) {
          return [
            N[j] - L,
            N[A],
            F - N[A] - N[j] + L
          ];
        })).filter(function(N) {
          return N;
        }).sort(function(N, z) {
          return N - z;
        }), O = P[0], I = P.map(function(N) {
          return De(N / O, 0.1) * k;
        }), E = 1, S = De(F / O, 0.1);
        for (E = 1; E <= 10 && !I.every(function(N) {
          return N * E % 1 === 0;
        }); ++E)
          ;
        var M = (-_ + 1) / 2, D = Zo(L - $, L - $ + F, M, 1 - M);
        return {
          multiple: S * E,
          dir: _,
          snapSize: k,
          snapOffset: Math.round(D / k)
        };
      }), w = b.map(function(_) {
        return _.multiple || 1;
      });
      s.snapThresholdInfo.multiples = w, s.snapThresholdInfo.offset = b.map(function(_) {
        return _.snapOffset;
      }), b.forEach(function(_, R) {
        _.snapSize;
      });
    }
  } else
    s.snapThresholdInfo = null;
}
function PP(e, t, r, n, o, i, a) {
  n === void 0 && (n = 0), o === void 0 && (o = 0);
  var s = e.props, l = e.state, c = s.snapGridWidth, u = c === void 0 ? 0 : c, d = s.snapGridHeight, h = d === void 0 ? 0 : d, p = [], g = i.left, v = i.top, m = [0, 0];
  kP(e, n, o, i);
  var x = l.snapThresholdInfo, y = u, b = h;
  if (x && (u *= x.multiples[0] || 1, h *= x.multiples[1] || 1, m = x.offset), h) {
    for (var w = function(R) {
      p.push({
        type: "horizontal",
        pos: [
          g,
          De(m[1] * b + R - o + v, 0.1)
        ],
        className: xe("grid-guideline"),
        size: t,
        hide: !a,
        direction: "",
        grid: !0
      });
    }, _ = 0; _ <= r * 2; _ += h)
      w(_);
    for (var _ = -h; _ >= -r; _ -= h)
      w(_);
  }
  if (u) {
    for (var w = function(T) {
      p.push({
        type: "vertical",
        pos: [
          De(m[0] * y + T - n + g, 0.1),
          v
        ],
        className: xe("grid-guideline"),
        size: r,
        hide: !a,
        direction: "",
        grid: !0
      });
    }, _ = 0; _ <= t * 2; _ += u)
      w(_);
    for (var _ = -u; _ >= -t; _ -= u)
      w(_);
  }
  return p;
}
function hy(e, t, r, n) {
  return r === "horizontal" ? ie(e.right - t.left) <= n || ie(e.left - t.right) <= n || e.left <= t.right && t.left <= e.right : r === "vertical" ? ie(e.bottom - t.top) <= n || ie(e.top - t.bottom) <= n || e.top <= t.bottom && t.top <= e.bottom : !0;
}
function AP(e) {
  var t = e.state, r = e.props.elementGuidelines, n = r === void 0 ? [] : r;
  if (!n.length)
    return t.elementRects = [], [];
  var o = (t.elementRects || []).filter(function(h) {
    return !h.refresh;
  }), i = n.map(function(h) {
    return it(h) && "element" in h ? V(V({}, h), { element: $r(h.element, !0) }) : {
      element: $r(h, !0)
    };
  }).filter(function(h) {
    return h.element;
  }), a = Mo(o.map(function(h) {
    return h.element;
  }), i.map(function(h) {
    return h.element;
  })), s = a.maintained, l = a.added, c = [];
  s.forEach(function(h) {
    var p = W(h, 2), g = p[0], v = p[1];
    c[v] = o[g];
  }), OP(e, l.map(function(h) {
    return i[h];
  })).map(function(h, p) {
    c[l[p]] = h;
  }), t.elementRects = c;
  var u = Wf(e.props.elementSnapDirections), d = [];
  return c.forEach(function(h) {
    var p = h.element, g = h.top, v = g === void 0 ? u.top : g, m = h.left, x = m === void 0 ? u.left : m, y = h.right, b = y === void 0 ? u.right : y, w = h.bottom, _ = w === void 0 ? u.bottom : w, R = h.center, T = R === void 0 ? u.center : R, k = h.middle, j = k === void 0 ? u.middle : k, A = h.className, $ = h.rect, F = Yf({
      top: v,
      right: b,
      left: x,
      bottom: _,
      center: T,
      middle: j
    }, $), L = F.horizontal, P = F.vertical, O = F.horizontalNames, I = F.verticalNames, E = $.top, S = $.left, M = $.right - S, D = $.bottom - E, N = [M, D];
    P.forEach(function(z, Y) {
      d.push({
        type: "vertical",
        element: p,
        pos: [
          De(z, 0.1),
          E
        ],
        size: D,
        sizes: N,
        className: A,
        elementRect: h,
        elementDirection: ov[I[Y]] || I[Y],
        direction: ""
      });
    }), L.forEach(function(z, Y) {
      d.push({
        type: "horizontal",
        element: p,
        pos: [
          S,
          De(z, 0.1)
        ],
        size: M,
        sizes: N,
        className: A,
        elementRect: h,
        elementDirection: ov[O[Y]] || O[Y],
        direction: ""
      });
    });
  }), d;
}
function pv(e, t) {
  return e ? e.map(function(r) {
    var n = it(r) ? r : { pos: r }, o = n.pos;
    return ma(o) ? n : V(V({}, n), { pos: Ye(o, t) });
  }) : [];
}
function py(e, t, r, n, o, i, a) {
  o === void 0 && (o = 0), i === void 0 && (i = 0), a === void 0 && (a = { left: 0, top: 0, right: 0, bottom: 0 });
  var s = [], l = a.left, c = a.top, u = a.bottom, d = a.right, h = r + d - l, p = n + u - c;
  return pv(e, p).forEach(function(g) {
    s.push({
      type: "horizontal",
      pos: [
        l,
        De(g.pos - i + c, 0.1)
      ],
      size: h,
      className: g.className,
      direction: ""
    });
  }), pv(t, h).forEach(function(g) {
    s.push({
      type: "vertical",
      pos: [
        De(g.pos - o + l, 0.1),
        c
      ],
      size: p,
      className: g.className,
      direction: ""
    });
  }), s;
}
function OP(e, t) {
  if (!t.length)
    return [];
  var r = e.props.groupable, n = e.state, o = n.containerClientRect, i = n.rootMatrix, a = n.is3d, s = n.offsetDelta, l = a ? 4 : 3, c = W(iP(i, o, l), 2), u = c[0], d = c[1], h = r ? 0 : s[0], p = r ? 0 : s[1];
  return t.map(function(g) {
    var v = g.element.getBoundingClientRect(), m = v.left - u - h, x = v.top - d - p, y = x + v.height, b = m + v.width, w = W(oi(i, [m, x], l), 2), _ = w[0], R = w[1], T = W(oi(i, [b, y], l), 2), k = T[0], j = T[1];
    return V(V({}, g), { rect: {
      left: _,
      right: k,
      top: R,
      bottom: j,
      center: (_ + k) / 2,
      middle: (R + j) / 2
    } });
  });
}
function Ms(e) {
  var t = e.state, r = t.container, n = e.props.snapContainer || r;
  if (t.snapContainer === n && t.guidelines && t.guidelines.length)
    return !1;
  var o = t.containerClientRect, i = {
    left: 0,
    top: 0,
    bottom: 0,
    right: 0
  };
  if (r !== n) {
    var a = $r(n, !0);
    if (a) {
      var s = Ji(a), l = bv(t, [
        s.left - o.left,
        s.top - o.top
      ]), c = bv(t, [
        s.right - o.right,
        s.bottom - o.bottom
      ]);
      i.left = De(l[0], 1e-5), i.top = De(l[1], 1e-5), i.right = De(c[0], 1e-5), i.bottom = De(c[1], 1e-5);
    }
  }
  return t.snapContainer = n, t.snapOffset = i, t.guidelines = cd(e), t.enableSnap = !0, !0;
}
function vy(e, t, r, n, o, i) {
  var a = vo(e, t, r, i ? 4 : 3), s = xt(a, n);
  return Qf(a, be(o, s));
}
function vv(e) {
  return e ? e / ie(e) : 0;
}
function IP(e, t, r, n, o, i) {
  var a = i.fixedDirection, s = cP(r, a, n), l = Xf(e, t, r, n), c = le(le([], W(wP(e, t, s, n, o, i)), !1), W(cy(e, l, i)), !1), u = ul(c, 0), d = ul(c, 1);
  return {
    width: {
      isBound: u.isBound,
      offset: u.offset[0]
    },
    height: {
      isBound: d.isBound,
      offset: d.offset[1]
    }
  };
}
function FP(e, t, r, n, o, i, a, s, l) {
  var c = xt(t, a), u = fc(e, s, {
    vertical: [c[0]],
    horizontal: [c[1]]
  }), d = u.horizontal.offset, h = u.vertical.offset;
  if (De(h, rd) || De(d, rd)) {
    var p = W(Zr({
      datas: l,
      distX: -h,
      distY: -d
    }), 2), g = p[0], v = p[1], m = Math.min(o || 1 / 0, r + a[0] * g), x = Math.min(i || 1 / 0, n + a[1] * v);
    return [m - r, x - n];
  }
  return [0, 0];
}
function gy(e, t, r, n, o, i, a, s) {
  for (var l = ur(e.state), c = e.props.keepRatio, u = 0, d = 0, h = 0; h < 2; ++h) {
    var p = t(u, d), g = IP(e, p, o, c, a, s), v = g.width, m = g.height, x = v.isBound, y = m.isBound, b = v.offset, w = m.offset;
    if (h === 1 && (x || (b = 0), y || (w = 0)), h === 0 && a && !x && !y)
      return [0, 0];
    if (c) {
      var _ = ie(b) * (r ? 1 / r : 1), R = ie(w) * (n ? 1 / n : 1), T = x && y ? _ < R : y || !x && _ < R;
      T ? b = r * w / n : w = n * b / r;
    }
    u += b, d += w;
  }
  if (!c && o[0] && o[1]) {
    var k = CP(e, l, o, i, s), j = k.maxWidth, A = k.maxHeight, $ = W(FP(e, t(u, d).map(function(P) {
      return P.map(function(O) {
        return De(O, rd);
      });
    }), r + u, n + d, j, A, o, a, s), 2), b = $[0], w = $[1];
    u += b, d += w;
  }
  return [u, d];
}
function Zi(e) {
  return e < 0 && (e = e % 360 + 360), e %= 360, e;
}
function LP(e, t) {
  t = Zi(t);
  var r = Math.floor(e / 360), n = r * 360 + 360 - t, o = r * 360 + t;
  return ie(e - n) < ie(e - o) ? n : o;
}
function iu(e, t) {
  e = Zi(e), t = Zi(t);
  var r = Zi(e - t);
  return Math.min(r, 360 - r);
}
function BP(e, t, r, n) {
  var o, i = e.props, a = (o = i[ty]) !== null && o !== void 0 ? o : 5, s = i[ry];
  if (Si(e, "rotatable")) {
    var l = t.pos1, c = t.pos2, u = t.pos3, d = t.pos4, h = t.origin, p = r * Math.PI / 180, g = [l, c, u, d].map(function(w) {
      return be(w, h);
    }), v = g.map(function(w) {
      return Ga(w, p);
    }), m = le(le([], W(tP(e, g, v, h, r)), !1), W(vP(e, g, v, h, r)), !1);
    m.sort(function(w, _) {
      return ie(w - r) - ie(_ - r);
    });
    var x = m.length > 0;
    if (x)
      return {
        isSnap: x,
        dist: x ? m[0] : r
      };
  }
  if (s?.length && a) {
    var y = s.slice().sort(function(w, _) {
      return iu(w, n) - iu(_, n);
    }), b = y[0];
    if (iu(b, n) <= a)
      return {
        isSnap: !0,
        dist: r + LP(n, b) - n
      };
  }
  return {
    isSnap: !1,
    dist: r
  };
}
function zP(e, t, r, n, o, i, a) {
  if (!Si(e, "resizable"))
    return [0, 0];
  var s = a.fixedDirection, l = a.nextAllMatrix, c = e.state, u = c.allMatrix, d = c.is3d;
  return gy(e, function(h, p) {
    return vy(l || u, t + h, r + p, s, o, d);
  }, t, r, n, o, i, a);
}
function $P(e, t, r, n, o) {
  if (!Si(e, "scalable"))
    return [0, 0];
  var i = o.startOffsetWidth, a = o.startOffsetHeight, s = o.fixedPosition, l = o.fixedDirection, c = o.is3d, u = gy(e, function(d, h) {
    return vy(z3(o, Ge(t, [d / i, h / a])), i, a, l, s, c);
  }, i, a, r, s, n, o);
  return [u[0] / i, u[1] / a];
}
function GP(e, t) {
  t.absolutePoses = ur(e.state);
}
function gv(e) {
  var t = [];
  return e.forEach(function(r) {
    r.guidelineInfos.forEach(function(n) {
      var o = n.guideline;
      zt(t, function(i) {
        return i.guideline === o;
      }) || (o.direction = "", t.push({ guideline: o, posInfo: r }));
    });
  }), t.map(function(r) {
    var n = r.guideline, o = r.posInfo;
    return V(V({}, n), { direction: o.direction });
  });
}
function mv(e, t, r, n, o, i) {
  var a = Hf(uc(e, i), t, r), s = a.vertical, l = a.horizontal, c = ko();
  s.forEach(function(g) {
    g.isBound && (g.direction === "start" && (c.left = !0), g.direction === "end" && (c.right = !0), n.push({
      type: "bounds",
      pos: g.pos
    }));
  }), l.forEach(function(g) {
    g.isBound && (g.direction === "start" && (c.top = !0), g.direction === "end" && (c.bottom = !0), o.push({
      type: "bounds",
      pos: g.pos
    }));
  });
  var u = gP(e), d = u.boundMap, h = u.vertical, p = u.horizontal;
  return h.forEach(function(g) {
    Yr(n, function(v) {
      var m = v.type, x = v.pos;
      return m === "bounds" && x === g;
    }) >= 0 || n.push({
      type: "bounds",
      pos: g
    });
  }), p.forEach(function(g) {
    Yr(o, function(v) {
      var m = v.type, x = v.pos;
      return m === "bounds" && x === g;
    }) >= 0 || o.push({
      type: "bounds",
      pos: g
    });
  }), {
    boundMap: c,
    innerBoundMap: d
  };
}
var VP = th("", ["resizable", "scalable"]), UP = {
  name: "snappable",
  dragRelation: "strong",
  props: [
    "snappable",
    "snapContainer",
    "snapDirections",
    "elementSnapDirections",
    "snapGap",
    "snapGridWidth",
    "snapGridHeight",
    "isDisplaySnapDigit",
    "isDisplayInnerSnapDigit",
    "isDisplayGridGuidelines",
    "snapDigit",
    "snapThreshold",
    "snapRenderThreshold",
    "snapGridAll",
    ty,
    ry,
    ny,
    oy,
    "horizontalGuidelines",
    "verticalGuidelines",
    "elementGuidelines",
    "bounds",
    "innerBounds",
    "snapDistFormat",
    "maxSnapElementGuidelineDistance",
    "maxSnapElementGapDistance"
  ],
  events: ["snap", "bound"],
  css: [
    `:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`
  ],
  render: function(e, t) {
    var r = e.state, n = r.top, o = r.left, i = r.pos1, a = r.pos2, s = r.pos3, l = r.pos4, c = r.snapRenderInfo, u = e.props.snapRenderThreshold, d = u === void 0 ? 1 : u;
    if (!c || !c.render || !Si(e, ""))
      return Ao(e, "boundMap", ko(), function(H) {
        return JSON.stringify(H);
      }), Ao(e, "innerBoundMap", ko(), function(H) {
        return JSON.stringify(H);
      }), [];
    r.guidelines = cd(e);
    var h = Math.min(i[0], a[0], s[0], l[0]), p = Math.min(i[1], a[1], s[1], l[1]), g = c.externalPoses || [], v = ur(e.state), m = [], x = [], y = [], b = [], w = [], _ = sr(v), R = _.width, T = _.height, k = _.top, j = _.left, A = _.bottom, $ = _.right, F = { left: j, right: $, top: k, bottom: A, center: (j + $) / 2, middle: (k + A) / 2 }, L = g.length > 0, P = L ? sr(g) : {};
    if (!c.request) {
      if (c.direction && w.push(lP(e, v, c.direction, d, d)), c.snap) {
        var O = sr(v);
        c.center && (O.middle = (O.top + O.bottom) / 2, O.center = (O.left + O.right) / 2), w.push(iv(e, O, d, d));
      }
      L && (c.center && (P.middle = (P.top + P.bottom) / 2, P.center = (P.left + P.right) / 2), w.push(iv(e, P, d, d))), w.forEach(function(H) {
        var X = H.vertical.posInfos, Q = H.horizontal.posInfos;
        m.push.apply(m, le([], W(X.filter(function(q) {
          var K = q.guidelineInfos;
          return K.some(function(ne) {
            var oe = ne.guideline;
            return !oe.hide;
          });
        }).map(function(q) {
          return {
            type: "snap",
            pos: q.pos
          };
        })), !1)), x.push.apply(x, le([], W(Q.filter(function(q) {
          var K = q.guidelineInfos;
          return K.some(function(ne) {
            var oe = ne.guideline;
            return !oe.hide;
          });
        }).map(function(q) {
          return {
            type: "snap",
            pos: q.pos
          };
        })), !1)), y.push.apply(y, le([], W(gv(X)), !1)), b.push.apply(b, le([], W(gv(Q)), !1));
      });
    }
    var I = mv(e, [j, $], [k, A], m, x), E = I.boundMap, S = I.innerBoundMap;
    L && mv(e, [P.left, P.right], [P.top, P.bottom], m, x, c.externalBounds);
    var M = le(le([], W(y), !1), W(b), !1), D = M.filter(function(H) {
      return H.element && !H.gapRects;
    }), N = M.filter(function(H) {
      return H.gapRects;
    }).sort(function(H, X) {
      return H.gap - X.gap;
    });
    fe(e, "onSnap", {
      guidelines: M.filter(function(H) {
        var X = H.element;
        return !X;
      }),
      elements: D,
      gaps: N
    }, !0);
    var z = Ao(e, "boundMap", E, function(H) {
      return JSON.stringify(H);
    }, ko()), Y = Ao(e, "innerBoundMap", S, function(H) {
      return JSON.stringify(H);
    }, ko());
    return (E === z || S === Y) && fe(e, "onBound", {
      bounds: E,
      innerBounds: S
    }, !0), le(le(le(le(le(le([], W(MP(e, D, [h, p], F, t)), !1), W(TP(e, N, [h, p], F, t)), !1), W(hv(e, "horizontal", b, [o, n], F, t)), !1), W(hv(e, "vertical", y, [o, n], F, t)), !1), W(fv(e, "horizontal", x, h, n, R, 0, t)), !1), W(fv(e, "vertical", m, p, o, T, 1, t)), !1);
  },
  dragStart: function(e, t) {
    e.state.snapRenderInfo = {
      request: t.isRequest,
      snap: !0,
      center: !0
    }, Ms(e);
  },
  drag: function(e) {
    var t = e.state;
    Ms(e) || (t.guidelines = cd(e)), t.snapRenderInfo && (t.snapRenderInfo.render = !0);
  },
  pinchStart: function(e) {
    this.unset(e);
  },
  dragEnd: function(e) {
    this.unset(e);
  },
  dragControlCondition: function(e, t) {
    if (VP(e, t) || ld(e, t))
      return !0;
    if (!t.isRequest && t.inputEvent)
      return ut(t.inputEvent.target, xe("snap-control"));
  },
  dragControlStart: function(e) {
    e.state.snapRenderInfo = null, Ms(e);
  },
  dragControl: function(e) {
    this.drag(e);
  },
  dragControlEnd: function(e) {
    this.unset(e);
  },
  dragGroupStart: function(e, t) {
    this.dragStart(e, t);
  },
  dragGroup: function(e) {
    this.drag(e);
  },
  dragGroupEnd: function(e) {
    this.unset(e);
  },
  dragGroupControlStart: function(e) {
    e.state.snapRenderInfo = null, Ms(e);
  },
  dragGroupControl: function(e) {
    this.drag(e);
  },
  dragGroupControlEnd: function(e) {
    this.unset(e);
  },
  unset: function(e) {
    var t = e.state;
    t.enableSnap = !1, t.guidelines = [], t.snapRenderInfo = null, t.elementRects = [];
  }
};
function HP(e, t) {
  return [
    e[0] * t[0],
    e[1] * t[1]
  ];
}
function xe() {
  for (var e = [], t = 0; t < arguments.length; t++)
    e[t] = arguments[t];
  return vk.apply(void 0, le([$f], W(e), !1));
}
function my(e) {
  e();
}
function WP(e) {
  return !e || e === "none" ? [1, 0, 0, 1, 0, 0] : it(e) ? e : Jo(e);
}
function Qi(e, t, r) {
  return il(t, ao(r, t), e, ao(r.map(function(n) {
    return -n;
  }), t));
}
function YP(e, t, r) {
  if (t === "%") {
    var n = Zf(e.ownerSVGElement);
    return n[r ? "width" : "height"] / 100;
  }
  return 1;
}
function qP(e) {
  var t = XP(Jf(e, ":before"));
  return t.map(function(r, n) {
    var o = Wr(r), i = o.value, a = o.unit;
    return i * YP(e, a, n === 0);
  });
}
function fl(e) {
  return e ? e.split(" ") : ["0", "0"];
}
function XP(e) {
  return fl(e.transformOrigin);
}
function xy(e) {
  var t = $t(e), r = t("transform");
  if (r && r !== "none")
    return r;
  if ("transform" in e) {
    var n = e.transform, o = n.baseVal;
    if (!o)
      return "";
    var i = o.length;
    if (!i)
      return "";
    for (var a = [], s = function(c) {
      var u = o[c].matrix;
      a.push("matrix(".concat(["a", "b", "c", "d", "e", "f"].map(function(d) {
        return u[d];
      }).join(", "), ")"));
    }, l = 0; l < i; ++l)
      s(l);
    return a.join(" ");
  }
  return "";
}
function Ea(e, t, r, n, o) {
  var i, a, s = Af(e) || On(e), l = !1, c, u;
  if (!e || r)
    c = e;
  else {
    var d = (i = e?.assignedSlot) === null || i === void 0 ? void 0 : i.parentElement, h = e.parentElement;
    d ? (l = !0, u = h, c = d) : c = h;
  }
  for (var p = !1, g = e === t || c === t, v = "relative", m = 1, x = parseFloat(o?.("zoom")) || 1, y = o?.("position"); c && c !== s; ) {
    t === c && (g = !0);
    var b = $t(c), w = c.tagName.toLowerCase(), _ = xy(c), R = b("willChange"), T = parseFloat(b("zoom")) || 1;
    if (v = b("position"), n && T !== 1) {
      m = T;
      break;
    }
    if (
      // offsetParent is the parentElement if the target's zoom is not 1 and not absolute.
      !r && n && x !== 1 && y && y !== "absolute" || w === "svg" || w === "foreignobject" || v !== "static" || _ && _ !== "none" || R === "transform"
    )
      break;
    var k = (a = e?.assignedSlot) === null || a === void 0 ? void 0 : a.parentNode, j = c.parentNode;
    k && (l = !0, u = j);
    var A = j;
    if (A && A.nodeType === 11) {
      c = A.host, p = !0, v = $t(c)("position");
      break;
    }
    c = A, v = "relative";
  }
  return {
    offsetZoom: m,
    hasSlot: l,
    parentSlotElement: u,
    isCustomElement: p,
    isStatic: v === "static",
    isEnd: g || !c || c === s,
    offsetParent: c || s
  };
}
function KP(e, t) {
  var r, n = e.tagName.toLowerCase(), o = e.offsetLeft, i = e.offsetTop, a = $t(e), s = gr(o), l = !s, c, u;
  return !l && (n !== "svg" || e.ownerSVGElement) ? (c = Lx ? qP(e) : fl(a("transformOrigin")).map(function(d) {
    return parseFloat(d);
  }), u = c.slice(), l = !0, n === "svg" ? (o = 0, i = 0) : (r = W(JP(e, c, e === t && t.tagName.toLowerCase() === "g"), 4), o = r[0], i = r[1], c[0] = r[2], c[1] = r[3])) : (c = fl(a("transformOrigin")).map(function(d) {
    return parseFloat(d);
  }), u = c.slice()), {
    tagName: n,
    isSVG: s,
    hasOffset: l,
    offset: [o || 0, i || 0],
    origin: c,
    targetOrigin: u
  };
}
function yy(e, t) {
  var r = $t(e), n = $t(On(e)), o = n("position");
  if (!t && (!o || o === "static"))
    return [0, 0];
  var i = parseInt(n("marginLeft"), 10), a = parseInt(n("marginTop"), 10);
  return r("position") === "absolute" && ((r("top") !== "auto" || r("bottom") !== "auto") && (a = 0), (r("left") !== "auto" || r("right") !== "auto") && (i = 0)), [i, a];
}
function ud(e) {
  e.forEach(function(t) {
    var r = t.matrix;
    r && (t.matrix = Rr(r, 3, 4));
  });
}
function ZP(e) {
  for (var t = e.parentElement, r = !1, n = On(e); t; ) {
    var o = Jf(t).transform;
    if (o && o !== "none") {
      r = !0;
      break;
    }
    if (t === n)
      break;
    t = t.parentElement;
  }
  return {
    fixedContainer: t || n,
    hasTransform: r
  };
}
function hc(e, t) {
  return t === void 0 && (t = e.length > 9), "".concat(t ? "matrix3d" : "matrix", "(").concat(Mx(e, !t).join(","), ")");
}
function Zf(e) {
  var t = e.clientWidth, r = e.clientHeight;
  if (!e)
    return { x: 0, y: 0, width: 0, height: 0, clientWidth: t, clientHeight: r };
  var n = e.viewBox, o = n && n.baseVal || { x: 0, y: 0, width: 0, height: 0 };
  return {
    x: o.x,
    y: o.y,
    width: o.width || t,
    height: o.height || r,
    clientWidth: t,
    clientHeight: r
  };
}
function QP(e, t) {
  var r, n = Zf(e), o = n.width, i = n.height, a = n.clientWidth, s = n.clientHeight, l = a / o, c = s / i, u = e.preserveAspectRatio.baseVal, d = u.align, h = u.meetOrSlice, p = [0, 0], g = [l, c], v = [0, 0];
  if (d !== 1) {
    var m = (d - 2) % 3, x = Math.floor((d - 2) / 3);
    p[0] = o * m / 2, p[1] = i * x / 2;
    var y = h === 2 ? Math.max(c, l) : Math.min(l, c);
    g[0] = y, g[1] = y, v[0] = (a - o) / 2 * m, v[1] = (s - i) / 2 * x;
  }
  var b = Of(g, t);
  return r = W(v, 2), b[t * (t - 1)] = r[0], b[t * (t - 1) + 1] = r[1], Qi(b, t, p);
}
function JP(e, t, r) {
  var n = e.tagName.toLowerCase();
  if (!e.getBBox || !r && n === "g")
    return [0, 0, 0, 0];
  var o = $t(e), i = o("transform-box") === "fill-box", a = e.getBBox(), s = Zf(e.ownerSVGElement), l = a.x, c = a.y;
  n === "foreignobject" && !l && !c && (l = parseFloat(e.getAttribute("x")) || 0, c = parseFloat(e.getAttribute("y")) || 0);
  var u = l - s.x, d = c - s.y, h = i ? t[0] : t[0] - u, p = i ? t[1] : t[1] - d;
  return [u, d, h, p];
}
function ot(e, t, r) {
  return Mt(e, io(t, r), r);
}
function vo(e, t, r, n) {
  return [[0, 0], [t, 0], [0, r], [t, r]].map(function(o) {
    return ot(e, o, n);
  });
}
function sr(e) {
  var t = e.map(function(c) {
    return c[0];
  }), r = e.map(function(c) {
    return c[1];
  }), n = Math.min.apply(Math, le([], W(t), !1)), o = Math.min.apply(Math, le([], W(r), !1)), i = Math.max.apply(Math, le([], W(t), !1)), a = Math.max.apply(Math, le([], W(r), !1)), s = i - n, l = a - o;
  return {
    left: n,
    top: o,
    right: i,
    bottom: a,
    width: s,
    height: l
  };
}
function xv(e, t, r, n) {
  var o = vo(e, t, r, n);
  return sr(o);
}
function eA(e, t, r, n, o) {
  var i, a = e.target, s = e.origin, l = t.matrix, c = wy(a), u = c.offsetWidth, d = c.offsetHeight, h = r.getBoundingClientRect(), p = [0, 0];
  r === On(r) && (p = yy(a, !0));
  for (var g = a.getBoundingClientRect(), v = g.left - h.left + r.scrollLeft - (r.clientLeft || 0) + p[0], m = g.top - h.top + r.scrollTop - (r.clientTop || 0) + p[1], x = g.width, y = g.height, b = il(n, o, l), w = xv(b, u, d, n), _ = w.left, R = w.top, T = w.width, k = w.height, j = ot(b, s, n), A = be(j, [_, R]), $ = [
    v + A[0] * x / T,
    m + A[1] * y / k
  ], F = [0, 0], L = 0; ++L < 10; ) {
    var P = Dr(o, n);
    i = W(be(ot(P, $, n), ot(P, j, n)), 2), F[0] = i[0], F[1] = i[1];
    var O = il(n, o, ao(F, n), l), I = xv(O, u, d, n), E = I.left, S = I.top, M = E - v, D = S - m;
    if (ie(M) < 2 && ie(D) < 2)
      break;
    $[0] -= M, $[1] -= D;
  }
  return F.map(function(N) {
    return Math.round(N);
  });
}
function tA(e, t, r) {
  var n = e.length === 16, o = n ? 4 : 3, i = t.map(function(l) {
    return ot(e, l, o);
  }), a = r.left, s = r.top;
  return i.map(function(l) {
    return [l[0] + a, l[1] + s];
  });
}
function cr(e) {
  return Math.sqrt(e[0] * e[0] + e[1] * e[1]);
}
function by(e, t) {
  return cr([
    t[0] - e[0],
    t[1] - e[1]
  ]);
}
function Bi(e, t, r, n) {
  r === void 0 && (r = 1), n === void 0 && (n = dt(e, t));
  var o = by(e, t);
  return {
    transform: "translateY(-50%) translate(".concat(e[0], "px, ").concat(e[1], "px) rotate(").concat(n, "rad) scaleY(").concat(r, ")"),
    width: "".concat(o, "px")
  };
}
function hl(e, t) {
  for (var r = [], n = 2; n < arguments.length; n++)
    r[n - 2] = arguments[n];
  var o = r.length, i = r.reduce(function(s, l) {
    return s + l[0];
  }, 0) / o, a = r.reduce(function(s, l) {
    return s + l[1];
  }, 0) / o;
  return {
    transform: "translateZ(0px) translate(".concat(i, "px, ").concat(a, "px) rotate(").concat(e, "rad) scale(").concat(t, ")")
  };
}
function lo(e, t) {
  var r = e[t];
  return it(r) ? V(V({}, e), r) : e;
}
function wy(e) {
  var t = e && !gr(e.offsetWidth), r = 0, n = 0, o = 0, i = 0, a = 0, s = 0, l = 0, c = 0, u = 0, d = 0, h = 0, p = 0, g = 1 / 0, v = 1 / 0, m = 1 / 0, x = 1 / 0, y = 0, b = 0, w = !1;
  if (e)
    if (!t && e.ownerSVGElement) {
      var _ = e.getBBox();
      w = !0, r = _.width, n = _.height, a = r, s = n, l = r, c = n, o = r, i = n;
    } else {
      var R = $t(e), T = e.style, k = R("boxSizing") === "border-box", j = parseFloat(R("borderLeftWidth")) || 0, A = parseFloat(R("borderRightWidth")) || 0, $ = parseFloat(R("borderTopWidth")) || 0, F = parseFloat(R("borderBottomWidth")) || 0, L = parseFloat(R("paddingLeft")) || 0, P = parseFloat(R("paddingRight")) || 0, O = parseFloat(R("paddingTop")) || 0, I = parseFloat(R("paddingBottom")) || 0, E = L + P, S = O + I, M = j + A, D = $ + F, N = E + M, z = S + D, Y = R("position"), H = 0, X = 0;
      if ("clientLeft" in e) {
        var Q = null;
        if (Y === "absolute") {
          var q = Ea(e, On(e));
          Q = q.offsetParent;
        } else
          Q = e.parentElement;
        if (Q) {
          var K = $t(Q);
          H = parseFloat(K("width")), X = parseFloat(K("height"));
        }
      }
      u = Math.max(E, Ye(R("minWidth"), H) || 0), d = Math.max(S, Ye(R("minHeight"), X) || 0), g = Ye(R("maxWidth"), H), v = Ye(R("maxHeight"), X), isNaN(g) && (g = 1 / 0), isNaN(v) && (v = 1 / 0), y = Ye(T.width, 0) || 0, b = Ye(T.height, 0) || 0, a = parseFloat(R("width")) || 0, s = parseFloat(R("height")) || 0, l = ie(a - y) < 1 ? ba(u, y || a, g) : a, c = ie(s - b) < 1 ? ba(d, b || s, v) : s, r = l, n = c, o = l, i = c, k ? (m = g, x = v, h = u, p = d, l = r - N, c = n - z) : (m = g + N, x = v + z, h = u + N, p = d + z, r = l + N, n = c + z), o = l + E, i = c + S;
    }
  return {
    svg: w,
    offsetWidth: r,
    offsetHeight: n,
    clientWidth: o,
    clientHeight: i,
    contentWidth: l,
    contentHeight: c,
    inlineCSSWidth: y,
    inlineCSSHeight: b,
    cssWidth: a,
    cssHeight: s,
    minWidth: u,
    minHeight: d,
    maxWidth: g,
    maxHeight: v,
    minOffsetWidth: h,
    minOffsetHeight: p,
    maxOffsetWidth: m,
    maxOffsetHeight: x
  };
}
function Sy(e, t) {
  return dt(t > 0 ? e[0] : e[1], t > 0 ? e[1] : e[0]);
}
function Ts() {
  return {
    left: 0,
    top: 0,
    width: 0,
    height: 0,
    right: 0,
    bottom: 0,
    clientLeft: 0,
    clientTop: 0,
    clientWidth: 0,
    clientHeight: 0,
    scrollWidth: 0,
    scrollHeight: 0
  };
}
function Cy(e, t) {
  var r = e === On(e) || e === Af(e), n = {
    clientLeft: e.clientLeft,
    clientTop: e.clientTop,
    clientWidth: e.clientWidth,
    clientHeight: e.clientHeight,
    scrollWidth: e.scrollWidth,
    scrollHeight: e.scrollHeight,
    overflow: !1
  };
  return r && (n.clientHeight = Math.max(t.height, n.clientHeight), n.scrollHeight = Math.max(t.height, n.scrollHeight)), n.overflow = $t(e)("overflow") !== "visible", V(V({}, t), n);
}
function au(e, t, r, n) {
  var o = e.left, i = e.right, a = e.top, s = e.bottom, l = t.top, c = t.left, u = {
    left: c + o,
    top: l + a,
    right: c + i,
    bottom: l + s,
    width: i - o,
    height: s - a
  };
  return r && n ? Cy(r, u) : u;
}
function Ji(e, t) {
  var r = 0, n = 0, o = 0, i = 0;
  if (e) {
    var a = e.getBoundingClientRect();
    r = a.left, n = a.top, o = a.width, i = a.height;
  }
  var s = {
    left: r,
    top: n,
    width: o,
    height: i,
    right: r + o,
    bottom: n + i
  };
  return e && t ? Cy(e, s) : s;
}
function rA(e) {
  var t = e.props, r = t.groupable, n = t.svgOrigin, o = e.getState(), i = o.offsetWidth, a = o.offsetHeight, s = o.svg, l = o.transformOrigin;
  return !r && s && n ? nh(n, i, a) : l;
}
function Ey(e, t, r, n) {
  var o;
  if (e)
    o = e;
  else if (t)
    o = [0, 0];
  else {
    var i = r.target;
    o = _y(i, n);
  }
  return o;
}
function _y(e, t) {
  if (e) {
    var r = e.getAttribute("data-rotation") || "", n = e.getAttribute("data-direction");
    if (t.deg = r, !!n) {
      var o = [0, 0];
      return n.indexOf("w") > -1 && (o[0] = -1), n.indexOf("e") > -1 && (o[0] = 1), n.indexOf("n") > -1 && (o[1] = -1), n.indexOf("s") > -1 && (o[1] = 1), o;
    }
  }
}
function Qf(e, t) {
  return [
    Ge(t, e[0]),
    Ge(t, e[1]),
    Ge(t, e[2]),
    Ge(t, e[3])
  ];
}
function ur(e) {
  var t = e.left, r = e.top, n = e.pos1, o = e.pos2, i = e.pos3, a = e.pos4;
  return Qf([n, o, i, a], [t, r]);
}
function dd(e, t) {
  e[t ? "controlAbles" : "targetAbles"].forEach(function(r) {
    r.unset && r.unset(e);
  });
}
function Po(e, t) {
  var r = t ? "controlGesto" : "targetGesto", n = e[r];
  n?.isIdle() === !1 && dd(e, t), n?.unset(), e[r] = null;
}
function kt(e, t) {
  if (t) {
    var r = wi(t);
    r.nextStyle = V(V({}, r.nextStyle), e);
  }
  return {
    style: e,
    cssText: ar(e).map(function(n) {
      return "".concat(kf(n, "-"), ": ").concat(e[n], ";");
    }).join("")
  };
}
function Ny(e, t, r) {
  var n = t.afterTransform || t.transform;
  return V(V({}, kt(V(V(V({}, e.style), t.style), { transform: n }), r)), { afterTransform: n, transform: e.transform });
}
function Pe(e, t, r, n) {
  var o = t.datas;
  o.datas || (o.datas = {});
  var i = V(V({}, r), { target: e.state.target, clientX: t.clientX, clientY: t.clientY, inputEvent: t.inputEvent, currentTarget: e, moveable: e, datas: o.datas, isRequest: t.isRequest, isRequestChild: t.isRequestChild, isFirstDrag: !!t.isFirstDrag, isTrusted: t.isTrusted !== !1, stopAble: function() {
    o.isEventStart = !1;
  }, stopDrag: function() {
    var a;
    (a = t.stop) === null || a === void 0 || a.call(t);
  } });
  return o.isStartEvent ? n || (o.lastEvent = i) : o.isStartEvent = !0, i;
}
function qt(e, t, r) {
  var n = t.datas, o = "isDrag" in r ? r.isDrag : t.isDrag;
  return n.datas || (n.datas = {}), V(V({ isDrag: o }, r), { moveable: e, target: e.state.target, clientX: t.clientX, clientY: t.clientY, inputEvent: t.inputEvent, currentTarget: e, lastEvent: n.lastEvent, isDouble: t.isDouble, datas: n.datas, isFirstDrag: !!t.isFirstDrag });
}
function pc(e, t, r) {
  e._emitter.on(t, r);
}
function fe(e, t, r, n, o) {
  return e.triggerEvent(t, r, n, o);
}
function Jf(e, t) {
  return Ht(e).getComputedStyle(e, t);
}
function js(e, t, r) {
  var n = {}, o = {};
  return e.filter(function(i) {
    var a = i.name;
    if (n[a] || !t.some(function(s) {
      return i[s];
    }))
      return !1;
    if (!r && i.ableGroup) {
      if (o[i.ableGroup])
        return !1;
      o[i.ableGroup] = !0;
    }
    return n[a] = !0, !0;
  });
}
function fd(e, t) {
  return e === t || e == null && t == null;
}
function yv() {
  for (var e = [], t = 0; t < arguments.length; t++)
    e[t] = arguments[t];
  for (var r = e.length - 1, n = 0; n < r; ++n) {
    var o = e[n];
    if (!gr(o))
      return o;
  }
  return e[r];
}
function Dy(e, t) {
  var r = [], n = [];
  return e.forEach(function(o, i) {
    var a = t(o, i, e), s = n.indexOf(a), l = r[s] || [];
    s === -1 && (n.push(a), r.push(l)), l.push(o);
  }), r;
}
function nA(e, t) {
  var r = [], n = {};
  return e.forEach(function(o, i) {
    var a = t(o, i, e), s = n[a];
    s || (s = [], n[a] = s, r.push(s)), s.push(o);
  }), r;
}
function Ry(e) {
  return e.reduce(function(t, r) {
    return t.concat(r);
  }, []);
}
function ni() {
  for (var e = [], t = 0; t < arguments.length; t++)
    e[t] = arguments[t];
  return e.sort(function(r, n) {
    return ie(n) - ie(r);
  }), e[0];
}
function oi(e, t, r) {
  return Mt(Dr(e, r), io(t, r), r);
}
function oA(e, t) {
  var r, n = e.is3d, o = e.rootMatrix, i = n ? 4 : 3;
  return r = W(oi(o, [t.distX, t.distY], i), 2), t.distX = r[0], t.distY = r[1], t;
}
function Zt(e, t, r, n) {
  if (!r[0] && !r[1])
    return t;
  var o = ot(e, [vv(r[0] || 1), 0], n), i = ot(e, [0, vv(r[1] || 1)], n), a = ot(e, [
    r[0] / cr(o),
    r[1] / cr(i)
  ], n);
  return Ge(t, a);
}
function mr(e, t, r) {
  return r ? "".concat(e / t * 100, "%") : "".concat(e, "px");
}
function pl(e) {
  return ie(e) <= Pt ? 0 : e;
}
function eh(e) {
  return function(t) {
    if (!t.isDragging(e))
      return "";
    var r = Y3(t, e), n = r.deg;
    return n ? xe("view-control-rotation".concat(n)) : "";
  };
}
function th(e, t) {
  return t === void 0 && (t = [e]), function(r, n) {
    if (n.isRequest)
      return t.some(function(i) {
        return n.requestAble === i;
      }) ? n.parentDirection : !1;
    var o = n.inputEvent.target;
    return ut(o, xe("direction")) && (!e || ut(o, xe(e)));
  };
}
function iA(e, t, r) {
  var n, o = ei(e, {
    "x%": function(_) {
      return _ / 100 * t.offsetWidth;
    },
    "y%": function(_) {
      return _ / 100 * t.offsetHeight;
    }
  }), i = e.slice(0, r < 0 ? void 0 : r), a = e.slice(0, r < 0 ? void 0 : r + 1), s = e[r] || "", l = r < 0 ? [] : e.slice(r), c = r < 0 ? [] : e.slice(r + 1), u = o.slice(0, r < 0 ? void 0 : r), d = o.slice(0, r < 0 ? void 0 : r + 1), h = (n = o[r]) !== null && n !== void 0 ? n : ei([""])[0], p = r < 0 ? [] : o.slice(r), g = r < 0 ? [] : o.slice(r + 1), v = h ? [h] : [], m = _o(u), x = _o(d), y = _o(p), b = _o(g), w = qe(m, y, 4);
  return {
    transforms: e,
    beforeFunctionMatrix: m,
    beforeFunctionMatrix2: x,
    targetFunctionMatrix: _o(v),
    afterFunctionMatrix: y,
    afterFunctionMatrix2: b,
    allFunctionMatrix: w,
    beforeFunctions: u,
    beforeFunctions2: d,
    targetFunction: v[0],
    afterFunctions: p,
    afterFunctions2: g,
    beforeFunctionTexts: i,
    beforeFunctionTexts2: a,
    targetFunctionText: s,
    afterFunctionTexts: l,
    afterFunctionTexts2: c
  };
}
function aA(e) {
  return !e || !it(e) || Sa(e) ? !1 : Ue(e) || "length" in e;
}
function $r(e, t) {
  return e ? Sa(e) ? e : rt(e) ? t ? document.querySelector(e) : e : Lt(e) ? e() : Nx(e) ? e : "current" in e ? e.current : e : null;
}
function rh(e, t) {
  if (!e)
    return [];
  var r = aA(e) ? [].slice.call(e) : [e];
  return r.reduce(function(n, o) {
    return rt(o) && t ? le(le([], W(n), !1), W([].slice.call(document.querySelectorAll(o))), !1) : (Ue(o) ? n.push(rh(o, t)) : n.push($r(o, t)), n);
  }, []);
}
function sA(e, t, r) {
  var n = dt(e, t) / Math.PI * 180;
  return n = r >= 0 ? n : 180 - n, n = n >= 0 ? n : 360 + n, n;
}
function bv(e, t) {
  var r = e.rootMatrix, n = e.is3d, o = n ? 4 : 3, i = Dr(r, o);
  return n || (i = Rr(i, 3, 4)), i[12] = 0, i[13] = 0, i[14] = 0, Hs(i, t);
}
function My(e, t, r, n, o) {
  var i = W(e, 2), a = i[0], s = i[1], l = 0, c = 0;
  if (o && a && s) {
    var u = dt([0, 0], t), d = dt([0, 0], n), h = cr(t), p = Math.cos(u - d) * h;
    if (!n[0])
      c = p, l = c * r;
    else if (!n[1])
      l = p, c = l / r;
    else {
      var g = n[0] * a, v = n[1] * s, m = Math.atan2(g + t[0], v + t[1]), x = Math.atan2(g, v);
      m < 0 && (m += Math.PI * 2), x < 0 && (x += Math.PI * 2);
      var y = 0;
      ie(m - x) < Math.PI / 2 || ie(m - x) > Math.PI / 2 * 3 || (x += Math.PI), y = m - x, y > Math.PI * 2 ? y -= Math.PI * 2 : y > Math.PI ? y = 2 * Math.PI - y : y < -Math.PI && (y = -2 * Math.PI - y);
      var b = cr([g + t[0], v + t[1]]) * Math.cos(y);
      l = b * Math.sin(x) - g, c = b * Math.cos(x) - v, n[0] < 0 && (l *= -1), n[1] < 0 && (c *= -1);
    }
  } else
    l = n[0] * t[0], c = n[1] * t[1];
  return [l, c];
}
function Ty(e, t, r, n) {
  var o, i = r.ratio, a = r.startOffsetWidth, s = r.startOffsetHeight, l = 0, c = 0, u = n.distX, d = n.distY, h = n.pinchScale, p = n.parentDistance, g = n.parentDist, v = n.parentScale, m = r.fixedDirection, x = [0, 1].map(function(T) {
    return ie(e[T] - m[T]);
  }), y = [0, 1].map(function(T) {
    var k = x[T];
    return k !== 0 && (k = 2 / k), k;
  });
  if (g)
    l = g[0], c = g[1], t && (l ? c || (c = l / i) : l = c * i);
  else if (ma(h))
    l = (h - 1) * a, c = (h - 1) * s;
  else if (v)
    l = (v[0] - 1) * a, c = (v[1] - 1) * s;
  else if (p) {
    var b = a * x[0], w = s * x[1], _ = cr([b, w]);
    l = p / _ * b * y[0], c = p / _ * w * y[1];
  } else {
    var R = Zr({ datas: r, distX: u, distY: d });
    R = y.map(function(T, k) {
      return R[k] * T;
    }), o = W(My([a, s], R, i, e, t), 2), l = o[0], c = o[1];
  }
  return {
    // direction,
    // sizeDirection,
    distWidth: l,
    distHeight: c
  };
}
function hd(e, t) {
  if (t) {
    if (e === "left")
      return { x: "0%", y: "50%" };
    if (e === "top")
      return { x: "50%", y: "50%" };
    if (e === "center")
      return { x: "50%", y: "50%" };
    if (e === "right")
      return { x: "100%", y: "50%" };
    if (e === "bottom")
      return { x: "50%", y: "100%" };
    var r = W(e.split(" "), 2), n = r[0], o = r[1], i = hd(n || ""), a = hd(o || ""), s = V(V({}, i), a), l = {
      x: "50%",
      y: "50%"
    };
    return s.x && (l.x = s.x), s.y && (l.y = s.y), s.value && (s.x && !s.y && (l.y = s.value), !s.x && s.y && (l.x = s.value)), l;
  }
  return e === "left" ? { x: "0%" } : e === "right" ? { x: "100%" } : e === "top" ? { y: "0%" } : e === "bottom" ? { y: "100%" } : e ? e === "center" ? { value: "50%" } : { value: e } : {};
}
function nh(e, t, r) {
  var n = hd(e, !0), o = n.x, i = n.y;
  return [
    Ye(o, t) || 0,
    Ye(i, r) || 0
  ];
}
function lA(e, t, r) {
  var n = e.map(function(i) {
    return be(i, t);
  }), o = n.map(function(i) {
    return Ga(i, r);
  });
  return {
    prev: n,
    next: o,
    result: o.map(function(i) {
      return Ge(i, t);
    })
  };
}
function jy(e, t) {
  return e.length === t.length && e.every(function(r, n) {
    var o = t[n], i = Ue(r), a = Ue(o);
    return i && a ? jy(r, o) : !i && !a ? r === o : !1;
  });
}
function Ao(e, t, r, n, o) {
  var i = e._store, a = i[t];
  if (!(t in i))
    if (o != null)
      i[t] = o, a = o;
    else
      return i[t] = r, r;
  return a === r || n(a) === n(r) ? a : (i[t] = r, r);
}
function jt(e) {
  return e >= 0 ? 1 : -1;
}
function ie(e) {
  return Math.abs(e);
}
function su(e, t) {
  return Nk(e).map(function(r) {
    return t(r);
  });
}
function ky(e) {
  return ma(e) ? {
    top: e,
    left: e,
    right: e,
    bottom: e
  } : {
    left: e.left || 0,
    top: e.top || 0,
    right: e.right || 0,
    bottom: e.bottom || 0
  };
}
var cA = Ha("pinchable", {
  props: [
    "pinchable"
  ],
  events: [
    "pinchStart",
    "pinch",
    "pinchEnd",
    "pinchGroupStart",
    "pinchGroup",
    "pinchGroupEnd"
  ],
  dragStart: function() {
    return !0;
  },
  pinchStart: function(e, t) {
    var r = t.datas, n = t.targets, o = t.angle, i = t.originalDatas, a = e.props, s = a.pinchable, l = a.ables;
    if (!s)
      return !1;
    var c = "onPinch".concat(n ? "Group" : "", "Start"), u = "drag".concat(n ? "Group" : "", "ControlStart"), d = (s === !0 ? e.controlAbles : l.filter(function(v) {
      return s.indexOf(v.name) > -1;
    })).filter(function(v) {
      return v.canPinch && v[u];
    }), h = Pe(e, t, {});
    n && (h.targets = n);
    var p = fe(e, c, h);
    r.isPinch = p !== !1, r.ables = d;
    var g = r.isPinch;
    return g ? (d.forEach(function(v) {
      if (i[v.name] = i[v.name] || {}, !!v[u]) {
        var m = V(V({}, t), { datas: i[v.name], parentRotate: o, isPinch: !0 });
        v[u](e, m);
      }
    }), e.state.snapRenderInfo = {
      request: t.isRequest,
      direction: [0, 0]
    }, g) : !1;
  },
  pinch: function(e, t) {
    var r = t.datas, n = t.scale, o = t.distance, i = t.originalDatas, a = t.inputEvent, s = t.targets, l = t.angle;
    if (r.isPinch) {
      var c = o * (1 - 1 / n), u = Pe(e, t, {});
      s && (u.targets = s);
      var d = "onPinch".concat(s ? "Group" : "");
      fe(e, d, u);
      var h = r.ables, p = "drag".concat(s ? "Group" : "", "Control");
      return h.forEach(function(g) {
        g[p] && g[p](e, V(V({}, t), { datas: i[g.name], inputEvent: a, resolveMatrix: !0, pinchScale: n, parentDistance: c, parentRotate: l, isPinch: !0 }));
      }), u;
    }
  },
  pinchEnd: function(e, t) {
    var r = t.datas, n = t.isPinch, o = t.inputEvent, i = t.targets, a = t.originalDatas;
    if (r.isPinch) {
      var s = "onPinch".concat(i ? "Group" : "", "End"), l = qt(e, t, { isDrag: n });
      i && (l.targets = i), fe(e, s, l);
      var c = r.ables, u = "drag".concat(i ? "Group" : "", "ControlEnd");
      return c.forEach(function(d) {
        d[u] && d[u](e, V(V({}, t), { isDrag: n, datas: a[d.name], inputEvent: o, isPinch: !0 }));
      }), n;
    }
  },
  pinchGroupStart: function(e, t) {
    return this.pinchStart(e, V(V({}, t), { targets: e.props.targets }));
  },
  pinchGroup: function(e, t) {
    return this.pinch(e, V(V({}, t), { targets: e.props.targets }));
  },
  pinchGroupEnd: function(e, t) {
    return this.pinchEnd(e, V(V({}, t), { targets: e.props.targets }));
  }
}), wv = th("scalable"), uA = {
  name: "scalable",
  ableGroup: "size",
  canPinch: !0,
  props: [
    "scalable",
    "throttleScale",
    "renderDirections",
    "keepRatio",
    "edge",
    "displayAroundControls"
  ],
  events: [
    "scaleStart",
    "beforeScale",
    "scale",
    "scaleEnd",
    "scaleGroupStart",
    "beforeScaleGroup",
    "scaleGroup",
    "scaleGroupEnd"
  ],
  render: Qx("scalable"),
  dragControlCondition: wv,
  viewClassName: eh("scalable"),
  dragControlStart: function(e, t) {
    var r = t.datas, n = t.isPinch, o = t.inputEvent, i = t.parentDirection, a = Ey(i, n, o, r), s = e.state, l = s.width, c = s.height, u = s.targetTransform, d = s.target, h = s.pos1, p = s.pos2, g = s.pos4;
    if (!a || !d)
      return !1;
    n || po(e, t), r.datas = {}, r.transform = u, r.prevDist = [1, 1], r.direction = a, r.startOffsetWidth = l, r.startOffsetHeight = c, r.startValue = [1, 1];
    var v = !a[0] && !a[1] || a[0] || !a[1];
    cc(e, t, "scale"), r.isWidth = v;
    function m(R) {
      r.ratio = R && isFinite(R) ? R : 0;
    }
    r.startPositions = ur(e.state);
    function x(R) {
      var T = uy(r.startPositions, R);
      r.fixedDirection = T.fixedDirection, r.fixedPosition = T.fixedPosition, r.fixedOffset = T.fixedOffset;
    }
    r.setFixedDirection = x, m(zr(h, p) / zr(p, g)), x([-a[0], -a[1]]);
    var y = function(R) {
      r.minScaleSize = R;
    }, b = function(R) {
      r.maxScaleSize = R;
    };
    y([-1 / 0, -1 / 0]), b([1 / 0, 1 / 0]);
    var w = Pe(e, t, V(V({ direction: a, set: function(R) {
      r.startValue = R;
    }, setRatio: m, setFixedDirection: x, setMinScaleSize: y, setMaxScaleSize: b }, lc(e, t)), { dragStart: Tt.dragStart(e, new ti().dragStart([0, 0], t)) })), _ = fe(e, "onScaleStart", w);
    return r.startFixedDirection = r.fixedDirection, _ !== !1 && (r.isScale = !0, e.state.snapRenderInfo = {
      request: t.isRequest,
      direction: a
    }), r.isScale ? w : !1;
  },
  dragControl: function(e, t) {
    ac(e, t, "scale");
    var r = t.datas, n = t.parentKeepRatio, o = t.parentFlag, i = t.isPinch, a = t.dragClient, s = t.isRequest, l = t.useSnap, c = t.resolveMatrix, u = r.prevDist, d = r.direction, h = r.startOffsetWidth, p = r.startOffsetHeight, g = r.isScale, v = r.startValue, m = r.isWidth, x = r.ratio;
    if (!g)
      return !1;
    var y = e.props, b = y.throttleScale, w = y.parentMoveable, _ = d;
    !d[0] && !d[1] && (_ = [1, 1]);
    var R = x && (n ?? y.keepRatio) || !1, T = e.state, k = [
      v[0],
      v[1]
    ];
    function j() {
      var te = Ty(_, R, r, t), G = te.distWidth, ee = te.distHeight, U = h ? (h + G) / h : 1, J = p ? (p + ee) / p : 1;
      v[0] || (k[0] = G / h), v[1] || (k[1] = ee / p);
      var re = (_[0] || R ? U : 1) * k[0], se = (_[1] || R ? J : 1) * k[1];
      return re === 0 && (re = jt(u[0]) * Ns), se === 0 && (se = jt(u[1]) * Ns), [re, se];
    }
    var A = j();
    if (!i && e.props.groupable) {
      var $ = T.snapRenderInfo || {}, F = $.direction;
      Ue(F) && (F[0] || F[1]) && (T.snapRenderInfo = { direction: d, request: t.isRequest });
    }
    fe(e, "onBeforeScale", Pe(e, t, {
      scale: A,
      setFixedDirection: function(te) {
        return r.setFixedDirection(te), A = j(), A;
      },
      startFixedDirection: r.startFixedDirection,
      setScale: function(te) {
        A = te;
      }
    }, !0));
    var L = [
      A[0] / k[0],
      A[1] / k[1]
    ], P = a, O = [0, 0], I = jt(L[0] * L[1]), E = !a && !o && i;
    if (E || c ? P = Uf(e, r.targetAllTransform, [0, 0], [0, 0], r) : a || (P = r.fixedPosition), i || (O = $P(e, L, d, !l && s, r)), R) {
      _[0] && _[1] && O[0] && O[1] && (Math.abs(O[0] * h) > Math.abs(O[1] * p) ? O[1] = 0 : O[0] = 0);
      var S = !O[0] && !O[1];
      if (S && (m ? L[0] = De(L[0] * k[0], b) / k[0] : L[1] = De(L[1] * k[1], b) / k[1]), _[0] && !_[1] || O[0] && !O[1] || S && m) {
        L[0] += O[0];
        var M = h * L[0] * k[0] / x;
        L[1] = jt(I * L[0]) * ie(M / p / k[1]);
      } else if (!_[0] && _[1] || !O[0] && O[1] || S && !m) {
        L[1] += O[1];
        var D = p * L[1] * k[1] * x;
        L[0] = jt(I * L[1]) * ie(D / h / k[0]);
      }
    } else
      L[0] += O[0], L[1] += O[1], O[0] || (L[0] = De(L[0] * k[0], b) / k[0]), O[1] || (L[1] = De(L[1] * k[1], b) / k[1]);
    L[0] === 0 && (L[0] = jt(u[0]) * Ns), L[1] === 0 && (L[1] = jt(u[1]) * Ns), A = HP(L, [k[0], k[1]]);
    var N = [
      h,
      p
    ], z = [
      h * A[0],
      p * A[1]
    ];
    z = Pf(z, r.minScaleSize, r.maxScaleSize, R ? x : !1), A = su(2, function(te) {
      return N[te] ? z[te] / N[te] : z[te];
    }), L = su(2, function(te) {
      return A[te] / k[te];
    });
    var Y = su(2, function(te) {
      return u[te] ? L[te] / u[te] : L[te];
    }), H = "scale(".concat(L.join(", "), ")"), X = "scale(".concat(A.join(", "), ")"), Q = sc(r, X, H), q = !v[0] || !v[1], K = $3(e, q ? X : H, r.fixedDirection, P, r.fixedOffset, r, q), ne = E ? K : be(K, r.prevInverseDist || [0, 0]);
    if (r.prevDist = L, r.prevInverseDist = K, A[0] === u[0] && A[1] === u[1] && ne.every(function(te) {
      return !te;
    }) && !w && !E)
      return !1;
    var oe = Pe(e, t, V({ offsetWidth: h, offsetHeight: p, direction: d, scale: A, dist: L, delta: Y, isPinch: !!i }, Wx(e, Q, ne, i, t)));
    return fe(e, "onScale", oe), oe;
  },
  dragControlEnd: function(e, t) {
    var r = t.datas;
    if (!r.isScale)
      return !1;
    r.isScale = !1;
    var n = qt(e, t, {});
    return fe(e, "onScaleEnd", n), n;
  },
  dragGroupControlCondition: wv,
  dragGroupControlStart: function(e, t) {
    var r = t.datas, n = this.dragControlStart(e, t);
    if (!n)
      return !1;
    var o = wr(e, "resizable", t);
    r.moveableScale = e.scale;
    var i = rn(e, this, "dragControlStart", t, function(c, u) {
      return cl(e, c, r, u);
    }), a = function(c) {
      n.setFixedDirection(c), i.forEach(function(u, d) {
        u.setFixedDirection(c), cl(e, u.moveable, r, o[d]);
      });
    };
    r.setFixedDirection = a;
    var s = V(V({}, n), { targets: e.props.targets, events: i, setFixedDirection: a }), l = fe(e, "onScaleGroupStart", s);
    return r.isScale = l !== !1, r.isScale ? s : !1;
  },
  dragGroupControl: function(e, t) {
    var r = t.datas;
    if (r.isScale) {
      pc(e, "onBeforeScale", function(u) {
        fe(e, "onBeforeScaleGroup", Pe(e, t, V(V({}, u), { targets: e.props.targets }), !0));
      });
      var n = this.dragControl(e, t);
      if (n) {
        var o = n.dist, i = r.moveableScale;
        e.scale = [
          o[0] * i[0],
          o[1] * i[1]
        ];
        var a = e.props.keepRatio, s = r.fixedPosition, l = rn(e, this, "dragControl", t, function(u, d) {
          var h = W(Mt(Va(e.rotation / 180 * Math.PI, 3), [
            d.datas.originalX * o[0],
            d.datas.originalY * o[1],
            1
          ], 3), 2), p = h[0], g = h[1];
          return V(V({}, d), {
            parentDist: null,
            parentScale: o,
            parentKeepRatio: a,
            // recalculate child fixed position for parent group's dragging.
            dragClient: Ge(s, [p, g])
          });
        }), c = V({ targets: e.props.targets, events: l }, n);
        return fe(e, "onScaleGroup", c), c;
      }
    }
  },
  dragGroupControlEnd: function(e, t) {
    var r = t.isDrag, n = t.datas;
    if (n.isScale) {
      this.dragControlEnd(e, t);
      var o = rn(e, this, "dragControlEnd", t), i = qt(e, t, {
        targets: e.props.targets,
        events: o
      });
      return fe(e, "onScaleGroupEnd", i), r;
    }
  },
  /**
       * @method Moveable.Scalable#request
       * @param {Moveable.Scalable.ScalableRequestParam} e - the Scalable's request parameter
       * @return {Moveable.Requester} Moveable Requester
       * @example
  
       * // Instantly Request (requestStart - request - requestEnd)
       * moveable.request("scalable", { deltaWidth: 10, deltaHeight: 10 }, true);
       *
       * // requestStart
       * const requester = moveable.request("scalable");
       *
       * // request
       * requester.request({ deltaWidth: 10, deltaHeight: 10 });
       * requester.request({ deltaWidth: 10, deltaHeight: 10 });
       * requester.request({ deltaWidth: 10, deltaHeight: 10 });
       *
       * // requestEnd
       * requester.requestEnd();
       */
  request: function() {
    var e = {}, t = 0, r = 0, n = !1;
    return {
      isControl: !0,
      requestStart: function(o) {
        return n = o.useSnap, {
          datas: e,
          parentDirection: o.direction || [1, 1],
          useSnap: n
        };
      },
      request: function(o) {
        return t += o.deltaWidth, r += o.deltaHeight, {
          datas: e,
          parentDist: [t, r],
          parentKeepRatio: o.keepRatio,
          useSnap: n
        };
      },
      requestEnd: function() {
        return { datas: e, isDrag: !0, useSnap: n };
      }
    };
  }
};
function hn(e, t) {
  return e.map(function(r, n) {
    return Zo(r, t[n], 1, 2);
  });
}
function Sv(e, t, r) {
  var n = dt(e, t), o = dt(e, r), i = o - n;
  return i >= 0 ? i : i + 2 * Math.PI;
}
function dA(e, t) {
  var r = Sv(e[0], e[1], e[2]), n = Sv(t[0], t[1], t[2]), o = Math.PI;
  return !(r >= o && n <= o || r <= o && n >= o);
}
var fA = {
  name: "warpable",
  ableGroup: "size",
  props: [
    "warpable",
    "renderDirections",
    "edge",
    "displayAroundControls"
  ],
  events: [
    "warpStart",
    "warp",
    "warpEnd"
  ],
  viewClassName: eh("warpable"),
  render: function(e, t) {
    var r = e.props, n = r.resizable, o = r.scalable, i = r.warpable, a = r.zoom;
    if (n || o || !i)
      return [];
    var s = e.state, l = s.pos1, c = s.pos2, u = s.pos3, d = s.pos4, h = hn(l, c), p = hn(c, l), g = hn(l, u), v = hn(u, l), m = hn(u, d), x = hn(d, u), y = hn(c, d), b = hn(d, c);
    return le([
      t.createElement("div", { className: xe("line"), key: "middeLine1", style: Bi(h, m, a) }),
      t.createElement("div", { className: xe("line"), key: "middeLine2", style: Bi(p, x, a) }),
      t.createElement("div", { className: xe("line"), key: "middeLine3", style: Bi(g, y, a) }),
      t.createElement("div", { className: xe("line"), key: "middeLine4", style: Bi(v, b, a) })
    ], W(Jx(e, "warpable", t)), !1);
  },
  dragControlCondition: function(e, t) {
    if (t.isRequest)
      return !1;
    var r = t.inputEvent.target;
    return ut(r, xe("direction")) && ut(r, xe("warpable"));
  },
  dragControlStart: function(e, t) {
    var r = t.datas, n = t.inputEvent, o = e.props.target, i = n.target, a = _y(i, r);
    if (!a || !o)
      return !1;
    var s = e.state, l = s.transformOrigin, c = s.is3d, u = s.targetTransform, d = s.targetMatrix, h = s.width, p = s.height, g = s.left, v = s.top;
    r.datas = {}, r.targetTransform = u, r.warpTargetMatrix = c ? d : Rr(d, 3, 4), r.targetInverseMatrix = Dx(Dr(r.warpTargetMatrix, 4), 3, 4), r.direction = a, r.left = g, r.top = v, r.poses = [
      [0, 0],
      [h, 0],
      [0, p],
      [h, p]
    ].map(function(y) {
      return be(y, l);
    }), r.nextPoses = r.poses.map(function(y) {
      var b = W(y, 2), w = b[0], _ = b[1];
      return Mt(r.warpTargetMatrix, [w, _, 0, 1], 4);
    }), r.startValue = et(4), r.prevMatrix = et(4), r.absolutePoses = ur(s), r.posIndexes = Hx(a), po(e, t), cc(e, t, "matrix3d"), s.snapRenderInfo = {
      request: t.isRequest,
      direction: a
    };
    var m = Pe(e, t, V({ set: function(y) {
      r.startValue = y;
    } }, lc(e, t))), x = fe(e, "onWarpStart", m);
    return x !== !1 && (r.isWarp = !0), r.isWarp;
  },
  dragControl: function(e, t) {
    var r = t.datas, n = t.isRequest, o = t.distX, i = t.distY, a = r.targetInverseMatrix, s = r.prevMatrix, l = r.isWarp, c = r.startValue, u = r.poses, d = r.posIndexes, h = r.absolutePoses;
    if (!l)
      return !1;
    if (ac(e, t, "matrix3d"), Si(e, "warpable")) {
      var p = d.map(function(j) {
        return h[j];
      });
      p.length > 1 && p.push([
        (p[0][0] + p[1][0]) / 2,
        (p[0][1] + p[1][1]) / 2
      ]);
      var g = fc(e, n, {
        horizontal: p.map(function(j) {
          return j[1] + i;
        }),
        vertical: p.map(function(j) {
          return j[0] + o;
        })
      }), v = g.horizontal, m = g.vertical;
      i -= v.offset, o -= m.offset;
    }
    var x = Zr({ datas: r, distX: o, distY: i }, !0), y = r.nextPoses.slice();
    if (d.forEach(function(j) {
      y[j] = Ge(y[j], x);
    }), !T3.every(function(j) {
      return dA(j.map(function(A) {
        return u[A];
      }), j.map(function(A) {
        return y[A];
      }));
    }))
      return !1;
    var b = If(u[0], u[2], u[1], u[3], y[0], y[2], y[1], y[3]);
    if (!b.length)
      return !1;
    var w = qe(a, b, 4), _ = Vx(r, w, !0), R = qe(Dr(s, 4), _, 4);
    r.prevMatrix = _;
    var T = qe(c, _, 4), k = sc(r, "matrix3d(".concat(T.join(", "), ")"), "matrix3d(".concat(_.join(", "), ")"));
    return Vf(t, k), fe(e, "onWarp", Pe(e, t, V({ delta: R, matrix: T, dist: _, multiply: qe, transform: k }, kt({
      transform: k
    }, t)))), !0;
  },
  dragControlEnd: function(e, t) {
    var r = t.datas, n = t.isDrag;
    return r.isWarp ? (r.isWarp = !1, fe(e, "onWarpEnd", qt(e, t, {})), n) : !1;
  }
}, hA = /* @__PURE__ */ xe("area-pieces"), ks = /* @__PURE__ */ xe("area-piece"), Py = /* @__PURE__ */ xe("avoid"), pA = xe("view-dragging");
function lu(e) {
  var t = e.areaElement;
  if (t) {
    var r = e.state, n = r.width, o = r.height;
    Ro(t, Py), t.style.cssText += "left: 0px; top: 0px; width: ".concat(n, "px; height: ").concat(o, "px");
  }
}
function Cv(e) {
  return e.createElement(
    "div",
    { key: "area_pieces", className: hA },
    e.createElement("div", { className: ks }),
    e.createElement("div", { className: ks }),
    e.createElement("div", { className: ks }),
    e.createElement("div", { className: ks })
  );
}
var Ay = {
  name: "dragArea",
  props: [
    "dragArea",
    "passDragArea"
  ],
  events: [
    "click",
    "clickGroup"
  ],
  render: function(e, t) {
    var r = e.props, n = r.target, o = r.dragArea, i = r.groupable, a = r.passDragArea, s = e.getState(), l = s.width, c = s.height, u = s.renderPoses, d = a ? xe("area", "pass") : xe("area");
    if (i)
      return [
        t.createElement("div", { key: "area", ref: Sn(e, "areaElement"), className: d }),
        Cv(t)
      ];
    if (!n || !o)
      return [];
    var h = If([0, 0], [l, 0], [0, c], [l, c], u[0], u[1], u[2], u[3]), p = h.length ? hc(h, !0) : "none";
    return [
      t.createElement("div", { key: "area", ref: Sn(e, "areaElement"), className: d, style: {
        top: "0px",
        left: "0px",
        width: "".concat(l, "px"),
        height: "".concat(c, "px"),
        transformOrigin: "0 0",
        transform: p
      } }),
      Cv(t)
    ];
  },
  dragStart: function(e, t) {
    var r = t.datas, n = t.clientX, o = t.clientY, i = t.inputEvent;
    if (!i)
      return !1;
    r.isDragArea = !1;
    var a = e.areaElement, s = e.state, l = s.moveableClientRect, c = s.renderPoses, u = s.rootMatrix, d = s.is3d, h = l.left, p = l.top, g = sr(c), v = g.left, m = g.top, x = g.width, y = g.height, b = d ? 4 : 3, w = W(oi(u, [n - h, o - p], b), 2), _ = w[0], R = w[1];
    _ -= v, R -= m;
    var T = [
      { left: v, top: m, width: x, height: R - 10 },
      { left: v, top: m, width: _ - 10, height: y },
      { left: v, top: m + R + 10, width: x, height: y - R - 10 },
      { left: v + _ + 10, top: m, width: x - _ - 10, height: y }
    ], k = [].slice.call(a.nextElementSibling.children);
    T.forEach(function(j, A) {
      k[A].style.cssText = "left: ".concat(j.left, "px;top: ").concat(j.top, "px; width: ").concat(j.width, "px; height: ").concat(j.height, "px;");
    }), wa(a, Py), s.disableNativeEvent = !0;
  },
  drag: function(e, t) {
    var r = t.datas, n = t.inputEvent;
    if (this.enableNativeEvent(e), !n)
      return !1;
    r.isDragArea || (r.isDragArea = !0, lu(e));
  },
  dragEnd: function(e, t) {
    this.enableNativeEvent(e);
    var r = t.inputEvent, n = t.datas;
    if (!r)
      return !1;
    n.isDragArea || lu(e);
  },
  dragGroupStart: function(e, t) {
    return this.dragStart(e, t);
  },
  dragGroup: function(e, t) {
    return this.drag(e, t);
  },
  dragGroupEnd: function(e, t) {
    return this.dragEnd(e, t);
  },
  unset: function(e) {
    lu(e), e.state.disableNativeEvent = !1;
  },
  enableNativeEvent: function(e) {
    var t = e.state;
    t.disableNativeEvent && nl(function() {
      t.disableNativeEvent = !1;
    });
  }
}, vA = Ha("origin", {
  props: ["origin", "svgOrigin"],
  render: function(e, t) {
    var r = e.props, n = r.zoom, o = r.svgOrigin, i = r.groupable, a = e.getState(), s = a.beforeOrigin, l = a.rotation, c = a.svg, u = a.allMatrix, d = a.is3d, h = a.left, p = a.top, g = a.offsetWidth, v = a.offsetHeight, m;
    if (!i && c && o) {
      var x = W(nh(o, g, v), 2), y = x[0], b = x[1], w = d ? 4 : 3, _ = ot(u, [y, b], w);
      m = hl(l, n, be(_, [h, p]));
    } else
      m = hl(l, n, s);
    return [
      t.createElement("div", { className: xe("control", "origin"), style: m, key: "beforeOrigin" })
    ];
  }
});
function gA(e) {
  var t = e.scrollContainer;
  return [
    t.scrollLeft,
    t.scrollTop
  ];
}
var mA = {
  name: "scrollable",
  canPinch: !0,
  props: [
    "scrollable",
    "scrollContainer",
    "scrollThreshold",
    "scrollThrottleTime",
    "getScrollPosition",
    "scrollOptions"
  ],
  events: [
    "scroll",
    "scrollGroup"
  ],
  dragRelation: "strong",
  dragStart: function(e, t) {
    var r = e.props, n = r.scrollContainer, o = n === void 0 ? e.getContainer() : n, i = r.scrollOptions, a = new kx(), s = $r(o, !0);
    t.datas.dragScroll = a, e.state.dragScroll = a;
    var l = t.isControl ? "controlGesto" : "targetGesto", c = t.targets;
    a.on("scroll", function(u) {
      var d = u.container, h = u.direction, p = Pe(e, t, {
        scrollContainer: d,
        direction: h
      }), g = c ? "onScrollGroup" : "onScroll";
      c && (p.targets = c), fe(e, g, p);
    }).on("move", function(u) {
      var d = u.offsetX, h = u.offsetY, p = u.inputEvent;
      e[l].scrollBy(d, h, p.inputEvent, !1);
    }).on("scrollDrag", function(u) {
      var d = u.next;
      d(e[l].getCurrentEvent());
    }), a.dragStart(t, V({ container: s }, i));
  },
  checkScroll: function(e, t) {
    var r = t.datas.dragScroll;
    if (r) {
      var n = e.props, o = n.scrollContainer, i = o === void 0 ? e.getContainer() : o, a = n.scrollThreshold, s = a === void 0 ? 0 : a, l = n.scrollThrottleTime, c = l === void 0 ? 0 : l, u = n.getScrollPosition, d = u === void 0 ? gA : u, h = n.scrollOptions;
      return r.drag(t, V({ container: i, threshold: s, throttleTime: c, getScrollPosition: function(p) {
        return d({ scrollContainer: p.container, direction: p.direction });
      } }, h)), !0;
    }
  },
  drag: function(e, t) {
    return this.checkScroll(e, t);
  },
  dragEnd: function(e, t) {
    t.datas.dragScroll.dragEnd(), t.datas.dragScroll = null;
  },
  dragControlStart: function(e, t) {
    return this.dragStart(e, V(V({}, t), { isControl: !0 }));
  },
  dragControl: function(e, t) {
    return this.drag(e, t);
  },
  dragControlEnd: function(e, t) {
    return this.dragEnd(e, t);
  },
  dragGroupStart: function(e, t) {
    return this.dragStart(e, V(V({}, t), { targets: e.props.targets }));
  },
  dragGroup: function(e, t) {
    return this.drag(e, V(V({}, t), { targets: e.props.targets }));
  },
  dragGroupEnd: function(e, t) {
    return this.dragEnd(e, V(V({}, t), { targets: e.props.targets }));
  },
  dragGroupControlStart: function(e, t) {
    return this.dragStart(e, V(V({}, t), { targets: e.props.targets, isControl: !0 }));
  },
  dragGroupControl: function(e, t) {
    return this.drag(e, V(V({}, t), { targets: e.props.targets }));
  },
  dragGroupControEnd: function(e, t) {
    return this.dragEnd(e, V(V({}, t), { targets: e.props.targets }));
  },
  unset: function(e) {
    var t, r = e.state;
    (t = r.dragScroll) === null || t === void 0 || t.dragEnd(), r.dragScroll = null;
  }
}, Oy = {
  name: "",
  props: [
    "target",
    "dragTargetSelf",
    "dragTarget",
    "dragContainer",
    "container",
    "warpSelf",
    "rootContainer",
    "useResizeObserver",
    "useMutationObserver",
    "zoom",
    "dragFocusedInput",
    "transformOrigin",
    "ables",
    "className",
    "pinchThreshold",
    "pinchOutside",
    "triggerAblesSimultaneously",
    "checkInput",
    "cspNonce",
    "translateZ",
    "hideDefaultLines",
    "props",
    "flushSync",
    "stopPropagation",
    "preventClickEventOnDrag",
    "preventClickDefault",
    "viewContainer",
    "persistData",
    "useAccuratePosition",
    "firstRenderState",
    "linePadding",
    "controlPadding",
    "preventDefault",
    "preventRightClick",
    "preventWheelClick",
    "requestStyles"
  ],
  events: [
    "changeTargets"
  ]
}, xA = Ha("padding", {
  props: ["padding"],
  render: function(e, t) {
    var r = e.props;
    if (r.dragArea)
      return [];
    var n = ky(r.padding || {}), o = n.left, i = n.top, a = n.right, s = n.bottom, l = e.getState(), c = l.renderPoses, u = l.pos1, d = l.pos2, h = l.pos3, p = l.pos4, g = [u, d, h, p], v = [];
    return o > 0 && v.push([0, 2]), i > 0 && v.push([0, 1]), a > 0 && v.push([1, 3]), s > 0 && v.push([2, 3]), v.map(function(m, x) {
      var y = W(m, 2), b = y[0], w = y[1], _ = g[b], R = g[w], T = c[b], k = c[w], j = If([0, 0], [100, 0], [0, 100], [100, 100], _, R, T, k);
      if (j.length)
        return t.createElement("div", { key: "padding".concat(x), className: xe("padding"), style: {
          transform: hc(j, !0)
        } });
    });
  }
}), Ev = ["nw", "ne", "se", "sw"];
function Ps(e, t) {
  var r = e[0] + e[1], n = r > t ? t / r : 1;
  return e[0] *= n, e[1] = t - e[1] * n, e;
}
var yA = [1, 2, 5, 6], bA = [0, 3, 4, 7], Wn = [1, -1, -1, 1], Yn = [1, 1, -1, -1];
function oh(e, t, r, n, o, i, a, s) {
  o === void 0 && (o = 0), i === void 0 && (i = 0), a === void 0 && (a = r), s === void 0 && (s = n);
  var l = [], c = !1, u = e.filter(function(h) {
    return !h.virtual;
  }), d = u.map(function(h) {
    var p = h.horizontal, g = h.vertical, v = h.pos;
    if (g && !c && (c = !0, l.push("/")), c) {
      var m = Math.max(0, g === 1 ? v[1] - i : s - v[1]);
      return l.push(mr(m, n, t)), m;
    } else {
      var m = Math.max(0, p === 1 ? v[0] - o : a - v[0]);
      return l.push(mr(m, r, t)), m;
    }
  });
  return {
    radiusPoses: u,
    styles: l,
    raws: d
  };
}
function Iy(e) {
  for (var t = [0, 0], r = [0, 0], n = e.length, o = 0; o < n; ++o) {
    var i = e[o];
    i.sub && (i.horizontal && (t[1] === 0 && (t[0] = o), t[1] = o - t[0] + 1, r[0] = o + 1), i.vertical && (r[1] === 0 && (r[0] = o), r[1] = o - r[0] + 1));
  }
  return {
    horizontalRange: t,
    verticalRange: r
  };
}
function Fy(e, t, r, n, o, i, a) {
  var s, l, c, u;
  i === void 0 && (i = [0, 0]), a === void 0 && (a = !1);
  var d = e.indexOf("/"), h = (d > -1 ? e.slice(0, d) : e).length, p = e.slice(0, h), g = e.slice(h + 1), v = p.length, m = g.length, x = m > 0, y = W(p, 4), b = y[0], w = b === void 0 ? "0px" : b, _ = y[1], R = _ === void 0 ? w : _, T = y[2], k = T === void 0 ? w : T, j = y[3], A = j === void 0 ? R : j, $ = W(g, 4), F = $[0], L = F === void 0 ? w : F, P = $[1], O = P === void 0 ? x ? L : R : P, I = $[2], E = I === void 0 ? x ? L : k : I, S = $[3], M = S === void 0 ? x ? O : A : S, D = [w, R, k, A].map(function(Q) {
    return Ye(Q, t);
  }), N = [L, O, E, M].map(function(Q) {
    return Ye(Q, r);
  }), z = D.slice(), Y = N.slice();
  s = W(Ps([z[0], z[1]], t), 2), z[0] = s[0], z[1] = s[1], l = W(Ps([z[3], z[2]], t), 2), z[3] = l[0], z[2] = l[1], c = W(Ps([Y[0], Y[3]], r), 2), Y[0] = c[0], Y[3] = c[1], u = W(Ps([Y[1], Y[2]], r), 2), Y[1] = u[0], Y[2] = u[1];
  var H = a ? z : z.slice(0, Math.max(i[0], v)), X = a ? Y : Y.slice(0, Math.max(i[1], m));
  return le(le([], W(H.map(function(Q, q) {
    var K = Ev[q];
    return {
      virtual: q >= v,
      horizontal: Wn[q],
      vertical: 0,
      pos: [n + Q, o + (Yn[q] === -1 ? r : 0)],
      sub: !0,
      raw: D[q],
      direction: K
    };
  })), !1), W(X.map(function(Q, q) {
    var K = Ev[q];
    return {
      virtual: q >= m,
      horizontal: 0,
      vertical: Yn[q],
      pos: [n + (Wn[q] === -1 ? t : 0), o + Q],
      sub: !0,
      raw: N[q],
      direction: K
    };
  })), !1);
}
function wA(e, t, r, n, o) {
  o === void 0 && (o = t.length);
  var i = Iy(e.slice(n)), a = i.horizontalRange, s = i.verticalRange, l = r - n, c = 0;
  if (l === 0)
    c = o;
  else if (l > 0 && l < a[1])
    c = a[1] - l;
  else if (l >= s[0])
    c = s[0] + s[1] - l;
  else
    return;
  e.splice(r, c), t.splice(r, c);
}
function SA(e, t, r, n, o, i, a, s, l, c, u) {
  c === void 0 && (c = 0), u === void 0 && (u = 0);
  var d = Iy(e.slice(r)), h = d.horizontalRange, p = d.verticalRange;
  if (n > -1)
    for (var g = Wn[n] === 1 ? i - c : s - i, v = h[1]; v <= n; ++v) {
      var m = Yn[v] === 1 ? u : l, x = 0;
      if (n === v ? x = i : v === 0 ? x = c + g : Wn[v] === -1 && (x = s - (t[r][0] - c)), e.splice(r + v, 0, {
        horizontal: Wn[v],
        vertical: 0,
        pos: [x, m]
      }), t.splice(r + v, 0, [x, m]), v === 0)
        break;
    }
  else if (o > -1) {
    var y = Yn[o] === 1 ? a - u : l - a;
    if (h[1] === 0 && p[1] === 0) {
      var b = [
        c + y,
        u
      ];
      e.push({
        horizontal: Wn[0],
        vertical: 0,
        pos: b
      }), t.push(b);
    }
    for (var w = p[0], v = p[1]; v <= o; ++v) {
      var x = Wn[v] === 1 ? c : s, m = 0;
      if (o === v ? m = a : v === 0 ? m = u + y : Yn[v] === 1 ? m = t[r + w][1] : Yn[v] === -1 && (m = l - (t[r + w][1] - u)), e.push({
        horizontal: 0,
        vertical: Yn[v],
        pos: [x, m]
      }), t.push([x, m]), v === 0)
        break;
    }
  }
}
function CA(e, t) {
  t === void 0 && (t = e.map(function(o) {
    return o.raw;
  }));
  var r = e.map(function(o, i) {
    return o.horizontal ? t[i] : null;
  }).filter(function(o) {
    return o != null;
  }), n = e.map(function(o, i) {
    return o.vertical ? t[i] : null;
  }).filter(function(o) {
    return o != null;
  });
  return {
    horizontals: r,
    verticals: n
  };
}
var EA = [
  [0, -1, "n"],
  [1, 0, "e"]
], _A = [
  [-1, -1, "nw"],
  [0, -1, "n"],
  [1, -1, "ne"],
  [1, 0, "e"],
  [1, 1, "se"],
  [0, 1, "s"],
  [-1, 1, "sw"],
  [-1, 0, "w"]
];
function ih(e, t, r) {
  var n = e.props.clipRelative, o = e.state, i = o.width, a = o.height, s = t, l = s.type, c = s.poses, u = l === "rect", d = l === "circle";
  if (l === "polygon")
    return r.map(function(R) {
      return "".concat(mr(R[0], i, n), " ").concat(mr(R[1], a, n));
    });
  if (u || l === "inset") {
    var h = r[1][1], p = r[3][0], g = r[7][0], v = r[5][1];
    if (u)
      return [
        h,
        p,
        v,
        g
      ].map(function(R) {
        return "".concat(R, "px");
      });
    var m = [h, i - p, a - v, g].map(function(R, T) {
      return mr(R, T % 2 ? i : a, n);
    });
    if (r.length > 8) {
      var x = W(be(r[4], r[0]), 2), y = x[0], b = x[1];
      m.push.apply(m, le(["round"], W(oh(c.slice(8).map(function(R, T) {
        return V(V({}, R), { pos: r[T] });
      }), n, y, b, g, h, p, v).styles), !1));
    }
    return m;
  } else if (d || l === "ellipse") {
    var w = r[0], _ = mr(ie(r[1][1] - w[1]), d ? Math.sqrt((i * i + a * a) / 2) : a, n), m = d ? [_] : [mr(ie(r[2][0] - w[0]), i, n), _];
    return m.push("at", mr(w[0], i, n), mr(w[1], a, n)), m;
  }
}
function vl(e, t, r, n) {
  var o = [n, (n + t) / 2, t], i = [e, (e + r) / 2, r];
  return _A.map(function(a) {
    var s = W(a, 3), l = s[0], c = s[1], u = s[2], d = o[l + 1], h = i[c + 1];
    return {
      vertical: ie(c),
      horizontal: ie(l),
      direction: u,
      pos: [d, h]
    };
  });
}
function Ly(e) {
  var t = [1 / 0, -1 / 0], r = [1 / 0, -1 / 0];
  return e.forEach(function(n) {
    var o = n.pos;
    t[0] = Math.min(t[0], o[0]), t[1] = Math.max(t[1], o[0]), r[0] = Math.min(r[0], o[1]), r[1] = Math.max(r[1], o[1]);
  }), [
    ie(t[1] - t[0]),
    ie(r[1] - r[0])
  ];
}
function _v(e, t, r, n, o) {
  var i, a, s, l, c, u, d, h, p;
  if (e) {
    var g = o;
    if (!g) {
      var v = $t(e), m = v("clipPath");
      g = m !== "none" ? m : v("clip");
    }
    if (!((!g || g === "none" || g === "auto") && (g = n, !g))) {
      var x = oc(g), y = x.prefix, b = y === void 0 ? g : y, w = x.value, _ = w === void 0 ? "" : w, R = b === "circle", T = " ";
      if (b === "polygon") {
        var k = rr(_ || "0% 0%, 100% 0%, 100% 100%, 0% 100%");
        T = ",";
        var j = k.map(function(we) {
          var Ne = W(we.split(" "), 2), Le = Ne[0], Re = Ne[1];
          return {
            vertical: 1,
            horizontal: 1,
            pos: [
              Ye(Le, t),
              Ye(Re, r)
            ]
          };
        }), A = so(j.map(function(we) {
          return we.pos;
        }));
        return {
          type: b,
          clipText: g,
          poses: j,
          splitter: T,
          left: A.minX,
          right: A.maxX,
          top: A.minY,
          bottom: A.maxY
        };
      } else if (R || b === "ellipse") {
        var $ = "", F = "", L = 0, P = 0, k = an(_);
        if (R) {
          var O = "";
          i = W(k, 4), a = i[0], O = a === void 0 ? "50%" : a, s = i[2], $ = s === void 0 ? "50%" : s, l = i[3], F = l === void 0 ? "50%" : l, L = Ye(O, Math.sqrt((t * t + r * r) / 2)), P = L;
        } else {
          var I = "", E = "";
          c = W(k, 5), u = c[0], I = u === void 0 ? "50%" : u, d = c[1], E = d === void 0 ? "50%" : d, h = c[3], $ = h === void 0 ? "50%" : h, p = c[4], F = p === void 0 ? "50%" : p, L = Ye(I, t), P = Ye(E, r);
        }
        var S = [
          Ye($, t),
          Ye(F, r)
        ], j = le([
          {
            vertical: 1,
            horizontal: 1,
            pos: S,
            direction: "nesw"
          }
        ], W(EA.slice(0, R ? 1 : 2).map(function(Le) {
          return {
            vertical: ie(Le[1]),
            horizontal: Le[0],
            direction: Le[2],
            sub: !0,
            pos: [
              S[0] + Le[0] * L,
              S[1] + Le[1] * P
            ]
          };
        })), !1);
        return {
          type: b,
          clipText: g,
          radiusX: L,
          radiusY: P,
          left: S[0] - L,
          top: S[1] - P,
          right: S[0] + L,
          bottom: S[1] + P,
          poses: j,
          splitter: T
        };
      } else if (b === "inset") {
        var k = an(_ || "0 0 0 0"), M = k.indexOf("round"), D = (M > -1 ? k.slice(0, M) : k).length, N = k.slice(D + 1), z = W(k.slice(0, D), 4), Y = z[0], H = z[1], X = H === void 0 ? Y : H, Q = z[2], q = Q === void 0 ? Y : Q, K = z[3], ne = K === void 0 ? X : K, oe = W([Y, q].map(function(Le) {
          return Ye(Le, r);
        }), 2), te = oe[0], G = oe[1], ee = W([ne, X].map(function(Le) {
          return Ye(Le, t);
        }), 2), U = ee[0], J = ee[1], re = t - J, se = r - G, de = Fy(N, re - U, se - te, U, te), j = le(le([], W(vl(te, re, se, U)), !1), W(de), !1);
        return {
          type: "inset",
          clipText: g,
          poses: j,
          top: te,
          left: U,
          right: re,
          bottom: se,
          radius: N,
          splitter: T
        };
      } else if (b === "rect") {
        var k = rr(_ || "0px, ".concat(t, "px, ").concat(r, "px, 0px"));
        T = ",";
        var ce = W(k.map(function(je) {
          var ge = Wr(je).value;
          return ge;
        }), 4), pe = ce[0], J = ce[1], G = ce[2], U = ce[3], j = vl(pe, J, G, U);
        return {
          type: "rect",
          clipText: g,
          poses: j,
          top: pe,
          right: J,
          bottom: G,
          left: U,
          values: k,
          splitter: T
        };
      }
    }
  }
}
function NA(e, t, r, n, o) {
  var i = e[t], a = i.direction, s = i.sub, l = e.map(function() {
    return [0, 0];
  }), c = a ? a.split("") : [];
  if (n && t < 8) {
    var u = c.filter(function(L) {
      return L === "w" || L === "e";
    }), d = c.filter(function(L) {
      return L === "n" || L === "s";
    }), h = u[0], p = d[0];
    l[t] = r;
    var g = W(Ly(e), 2), v = g[0], m = g[1], x = v && m ? v / m : 0;
    if (x && o) {
      var y = (t + 4) % 8, b = e[y].pos, w = [0, 0];
      a.indexOf("w") > -1 ? w[0] = -1 : a.indexOf("e") > -1 && (w[0] = 1), a.indexOf("n") > -1 ? w[1] = -1 : a.indexOf("s") > -1 && (w[1] = 1);
      var _ = My([v, m], r, x, w, !0), R = v + _[0], T = m + _[1], k = b[1], j = b[1], A = b[0], $ = b[0];
      w[0] === -1 ? A = $ - R : w[0] === 1 ? $ = A + R : (A = A - R / 2, $ = $ + R / 2), w[1] === -1 ? k = j - T : (w[1] === 1 || (k = j - T / 2), j = k + T);
      var F = vl(k, $, j, A);
      e.forEach(function(L, P) {
        l[P][0] = F[P].pos[0] - L.pos[0], l[P][1] = F[P].pos[1] - L.pos[1];
      });
    } else
      e.forEach(function(L, P) {
        var O = L.direction;
        O && (O.indexOf(h) > -1 && (l[P][0] = r[0]), O.indexOf(p) > -1 && (l[P][1] = r[1]));
      }), h && (l[1][0] = r[0] / 2, l[5][0] = r[0] / 2), p && (l[3][1] = r[1] / 2, l[7][1] = r[1] / 2);
  } else a && !s ? c.forEach(function(L) {
    var P = L === "n" || L === "s";
    e.forEach(function(O, I) {
      var E = O.direction, S = O.horizontal, M = O.vertical;
      !E || E.indexOf(L) === -1 || (l[I] = [
        P || !S ? 0 : r[0],
        !P || !M ? 0 : r[1]
      ]);
    });
  }) : l[t] = r;
  return l;
}
function DA(e, t) {
  var r = W(Gx(e, t), 2), n = r[0], o = r[1], i = t.datas, a = i.clipPath, s = i.clipIndex, l = a, c = l.type, u = l.poses, d = l.splitter, h = u.map(function(y) {
    return y.pos;
  });
  if (c === "polygon")
    h.splice(s, 0, [n, o]);
  else if (c === "inset") {
    var p = yA.indexOf(s), g = bA.indexOf(s), v = u.length;
    if (SA(u, h, 8, p, g, n, o, h[4][0], h[4][1], h[0][0], h[0][1]), v === u.length)
      return;
  } else
    return;
  var m = ih(e, a, h), x = "".concat(c, "(").concat(m.join(d), ")");
  fe(e, "onClip", Pe(e, t, V({ clipEventType: "added", clipType: c, poses: h, clipStyles: m, clipStyle: x, distX: 0, distY: 0 }, kt({
    clipPath: x
  }, t))));
}
function RA(e, t) {
  var r = t.datas, n = r.clipPath, o = r.clipIndex, i = n, a = i.type, s = i.poses, l = i.splitter, c = s.map(function(p) {
    return p.pos;
  }), u = c.length;
  if (a === "polygon")
    s.splice(o, 1), c.splice(o, 1);
  else if (a === "inset") {
    if (o < 8 || (wA(s, c, o, 8, u), u === s.length))
      return;
  } else
    return;
  var d = ih(e, n, c), h = "".concat(a, "(").concat(d.join(l), ")");
  fe(e, "onClip", Pe(e, t, V({ clipEventType: "removed", clipType: a, poses: c, clipStyles: d, clipStyle: h, distX: 0, distY: 0 }, kt({
    clipPath: h
  }, t))));
}
var MA = {
  name: "clippable",
  props: [
    "clippable",
    "defaultClipPath",
    "customClipPath",
    "keepRatio",
    "clipRelative",
    "clipArea",
    "dragWithClip",
    "clipTargetBounds",
    "clipVerticalGuidelines",
    "clipHorizontalGuidelines",
    "clipSnapThreshold"
  ],
  events: [
    "clipStart",
    "clip",
    "clipEnd"
  ],
  css: [
    `.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,
    `:host {
--bounds-color: #d66;
}`,
    `.guideline {
pointer-events: none;
z-index: 2;
}`,
    `.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`
  ],
  render: function(e, t) {
    var r = e.props, n = r.customClipPath, o = r.defaultClipPath, i = r.clipArea, a = r.zoom, s = r.groupable, l = e.getState(), c = l.target, u = l.width, d = l.height, h = l.allMatrix, p = l.is3d, g = l.left, v = l.top, m = l.pos1, x = l.pos2, y = l.pos3, b = l.pos4, w = l.clipPathState, _ = l.snapBoundInfos, R = l.rotation;
    if (!c || s)
      return [];
    var T = _v(c, u, d, o || "inset", w || n);
    if (!T)
      return [];
    var k = p ? 4 : 3, j = T.type, A = T.poses, $ = A.map(function(J) {
      var re = ot(h, J.pos, k);
      return [
        re[0] - g,
        re[1] - v
      ];
    }), F = [], L = [], P = j === "rect", O = j === "inset", I = j === "polygon";
    if (P || O || I) {
      var E = O ? $.slice(0, 8) : $;
      L = E.map(function(J, re) {
        var se = re === 0 ? E[E.length - 1] : E[re - 1], de = dt(se, J), ce = by(se, J);
        return t.createElement("div", { key: "clipLine".concat(re), className: xe("line", "clip-line", "snap-control"), "data-clip-index": re, style: {
          width: "".concat(ce, "px"),
          transform: "translate(".concat(se[0], "px, ").concat(se[1], "px) rotate(").concat(de, "rad) scaleY(").concat(a, ")")
        } });
      });
    }
    if (F = $.map(function(J, re) {
      return t.createElement("div", { key: "clipControl".concat(re), className: xe("control", "clip-control", "snap-control"), "data-clip-index": re, style: {
        transform: "translate(".concat(J[0], "px, ").concat(J[1], "px) rotate(").concat(R, "rad) scale(").concat(a, ")")
      } });
    }), O && F.push.apply(F, le([], W($.slice(8).map(function(J, re) {
      return t.createElement("div", { key: "clipRadiusControl".concat(re), className: xe("control", "clip-control", "clip-radius", "snap-control"), "data-clip-index": 8 + re, style: {
        transform: "translate(".concat(J[0], "px, ").concat(J[1], "px) rotate(").concat(R, "rad) scale(").concat(a, ")")
      } });
    })), !1)), j === "circle" || j === "ellipse") {
      var S = T.left, M = T.top, D = T.radiusX, N = T.radiusY, z = W(be(ot(h, [S, M], k), ot(h, [0, 0], k)), 2), Y = z[0], H = z[1], X = "none";
      if (!i) {
        for (var Q = Math.max(10, D / 5, N / 5), q = [], K = 0; K <= Q; ++K) {
          var ne = Math.PI * 2 / Q * K;
          q.push([
            D + (D - a) * Math.cos(ne),
            N + (N - a) * Math.sin(ne)
          ]);
        }
        q.push([D, -2]), q.push([-2, -2]), q.push([-2, N * 2 + 2]), q.push([D * 2 + 2, N * 2 + 2]), q.push([D * 2 + 2, -2]), q.push([D, -2]), X = "polygon(".concat(q.map(function(J) {
          return "".concat(J[0], "px ").concat(J[1], "px");
        }).join(", "), ")");
      }
      F.push(t.createElement("div", { key: "clipEllipse", className: xe("clip-ellipse", "snap-control"), style: {
        width: "".concat(D * 2, "px"),
        height: "".concat(N * 2, "px"),
        clipPath: X,
        transform: "translate(".concat(-g + Y, "px, ").concat(-v + H, "px) ").concat(hc(h))
      } }));
    }
    if (i) {
      var oe = sr(le([m, x, y, b], W($), !1)), te = oe.width, G = oe.height, ee = oe.left, U = oe.top;
      if (I || P || O) {
        var q = O ? $.slice(0, 8) : $;
        F.push(t.createElement("div", { key: "clipArea", className: xe("clip-area", "snap-control"), style: {
          width: "".concat(te, "px"),
          height: "".concat(G, "px"),
          transform: "translate(".concat(ee, "px, ").concat(U, "px)"),
          clipPath: "polygon(".concat(q.map(function(re) {
            return "".concat(re[0] - ee, "px ").concat(re[1] - U, "px");
          }).join(", "), ")")
        } }));
      }
    }
    return _ && ["vertical", "horizontal"].forEach(function(J) {
      var re = _[J], se = J === "horizontal";
      re.isSnap && L.push.apply(L, le([], W(re.snap.posInfos.map(function(de, ce) {
        var pe = de.pos, we = be(ot(h, se ? [0, pe] : [pe, 0], k), [g, v]), Ne = be(ot(h, se ? [u, pe] : [pe, d], k), [g, v]);
        return Ca(t, "", we, Ne, a, "clip".concat(J, "snap").concat(ce), "guideline");
      })), !1)), re.isBound && L.push.apply(L, le([], W(re.bounds.map(function(de, ce) {
        var pe = de.pos, we = be(ot(h, se ? [0, pe] : [pe, 0], k), [g, v]), Ne = be(ot(h, se ? [u, pe] : [pe, d], k), [g, v]);
        return Ca(t, "", we, Ne, a, "clip".concat(J, "bounds").concat(ce), "guideline", "bounds", "bold");
      })), !1));
    }), le(le([], W(F), !1), W(L), !1);
  },
  dragControlCondition: function(e, t) {
    return t.inputEvent && (t.inputEvent.target.getAttribute("class") || "").indexOf("clip") > -1;
  },
  dragStart: function(e, t) {
    var r = e.props, n = r.dragWithClip, o = n === void 0 ? !0 : n;
    return o ? !1 : this.dragControlStart(e, t);
  },
  drag: function(e, t) {
    return this.dragControl(e, V(V({}, t), { isDragTarget: !0 }));
  },
  dragEnd: function(e, t) {
    return this.dragControlEnd(e, t);
  },
  dragControlStart: function(e, t) {
    var r = e.state, n = e.props, o = n.defaultClipPath, i = n.customClipPath, a = r.target, s = r.width, l = r.height, c = t.inputEvent ? t.inputEvent.target : null, u = c && c.getAttribute("class") || "", d = t.datas, h = _v(a, s, l, o || "inset", i);
    if (!h)
      return !1;
    var p = h.clipText, g = h.type, v = h.poses, m = fe(e, "onClipStart", Pe(e, t, {
      clipType: g,
      clipStyle: p,
      poses: v.map(function(x) {
        return x.pos;
      })
    }));
    return m === !1 ? (d.isClipStart = !1, !1) : (d.isControl = u && u.indexOf("clip-control") > -1, d.isLine = u.indexOf("clip-line") > -1, d.isArea = u.indexOf("clip-area") > -1 || u.indexOf("clip-ellipse") > -1, d.clipIndex = c ? parseInt(c.getAttribute("data-clip-index"), 10) : -1, d.clipPath = h, d.isClipStart = !0, r.clipPathState = p, po(e, t), !0);
  },
  dragControl: function(e, t) {
    var r, n, o, i = t.datas, a = t.originalDatas, s = t.isDragTarget;
    if (!i.isClipStart)
      return !1;
    var l = i, c = l.isControl, u = l.isLine, d = l.isArea, h = l.clipIndex, p = l.clipPath;
    if (!p)
      return !1;
    var g = lo(e.props, "clippable"), v = g.keepRatio, m = 0, x = 0, y = a.draggable, b = Zr(t);
    s && y ? (r = W(y.prevBeforeDist, 2), m = r[0], x = r[1]) : (n = W(b, 2), m = n[0], x = n[1]);
    var w = [m, x], _ = e.state, R = _.width, T = _.height, k = !d && !c && !u, j = p.type, A = p.poses, $ = p.splitter, F = A.map(function(He) {
      return He.pos;
    });
    k && (m = -m, x = -x);
    var L = !c || A[h].direction === "nesw", P = j === "inset" || j === "rect", O = A.map(function() {
      return [0, 0];
    });
    if (c && !L) {
      var I = A[h], E = I.horizontal, S = I.vertical, M = [
        m * ie(E),
        x * ie(S)
      ];
      O = NA(A, h, M, P, v);
    } else L && (O = F.map(function() {
      return [m, x];
    }));
    var D = F.map(function(He, St) {
      return Ge(He, O[St]);
    }), N = le([], W(D), !1);
    _.snapBoundInfos = null;
    var z = p.type === "circle", Y = p.type === "ellipse";
    if (z || Y) {
      var H = sr(D), X = ie(H.bottom - H.top), Q = ie(Y ? H.right - H.left : X), q = D[0][1] + X, K = D[0][0] - Q, ne = D[0][0] + Q;
      z && (N.push([ne, H.bottom]), O.push([1, 0])), N.push([H.left, q]), O.push([0, 1]), N.push([K, H.bottom]), O.push([1, 0]);
    }
    var oe = py((g.clipHorizontalGuidelines || []).map(function(He) {
      return Ye("".concat(He), T);
    }), (g.clipVerticalGuidelines || []).map(function(He) {
      return Ye("".concat(He), R);
    }), R, T), te = [], G = [];
    if (z || Y)
      te = [N[4][0], N[2][0]], G = [N[1][1], N[3][1]];
    else if (P) {
      var ee = [N[0], N[2], N[4], N[6]], U = [O[0], O[2], O[4], O[6]];
      te = ee.filter(function(He, St) {
        return U[St][0];
      }).map(function(He) {
        return He[0];
      }), G = ee.filter(function(He, St) {
        return U[St][1];
      }).map(function(He) {
        return He[1];
      });
    } else
      te = N.filter(function(He, St) {
        return O[St][0];
      }).map(function(He) {
        return He[0];
      }), G = N.filter(function(He, St) {
        return O[St][1];
      }).map(function(He) {
        return He[1];
      });
    var J = [0, 0], re = cv(oe, g.clipTargetBounds && { left: 0, top: 0, right: R, bottom: T }, te, G, 5, 5), se = re.horizontal, de = re.vertical, ce = se.offset, pe = de.offset;
    if (se.isBound && (J[1] += ce), de.isBound && (J[0] += pe), (Y || z) && O[0][0] === 0 && O[0][1] === 0) {
      var H = sr(D), we = H.bottom - H.top, Ne = Y ? H.right - H.left : we, Le = de.isBound ? ie(pe) : de.snapIndex === 0 ? -pe : pe, Re = se.isBound ? ie(ce) : se.snapIndex === 0 ? -ce : ce;
      Ne -= Le, we -= Re, z && (we = ay(de, se) > 0 ? we : Ne, Ne = we);
      var Se = N[0];
      N[1][1] = Se[1] - we, N[2][0] = Se[0] + Ne, N[3][1] = Se[1] + we, N[4][0] = Se[0] - Ne;
    } else if (P && v && c) {
      var je = W(Ly(A), 2), ge = je[0], Ve = je[1], Xe = ge && Ve ? ge / Ve : 0, ye = A[h], at = ye.direction || "", st = N[1][1], q = N[5][1], K = N[7][0], ne = N[3][0];
      ie(ce) <= ie(pe) ? ce = jt(ce) * ie(pe) / Xe : pe = jt(pe) * ie(ce) * Xe, at.indexOf("w") > -1 ? K -= pe : at.indexOf("e") > -1 ? ne -= pe : (K += pe / 2, ne -= pe / 2), at.indexOf("n") > -1 ? st -= ce : at.indexOf("s") > -1 ? q -= ce : (st += ce / 2, q -= ce / 2);
      var ft = vl(st, ne, q, K);
      N.forEach(function(xo, Fn) {
        var Ln;
        Ln = W(ft[Fn].pos, 2), xo[0] = Ln[0], xo[1] = Ln[1];
      });
    } else
      N.forEach(function(He, St) {
        var ts = O[St];
        ts[0] && (He[0] -= pe), ts[1] && (He[1] -= ce);
      });
    var kr = ih(e, p, D), It = "".concat(j, "(").concat(kr.join($), ")");
    if (_.clipPathState = It, z || Y)
      te = [N[4][0], N[2][0]], G = [N[1][1], N[3][1]];
    else if (P) {
      var ee = [N[0], N[2], N[4], N[6]];
      te = ee.map(function(St) {
        return St[0];
      }), G = ee.map(function(St) {
        return St[1];
      });
    } else
      te = N.map(function(He) {
        return He[0];
      }), G = N.map(function(He) {
        return He[1];
      });
    if (_.snapBoundInfos = cv(oe, g.clipTargetBounds && { left: 0, top: 0, right: R, bottom: T }, te, G, 1, 1), y) {
      var Dt = _.is3d, es = _.allMatrix, Cc = Dt ? 4 : 3, fr = J;
      s && (fr = [
        w[0] + J[0] - b[0],
        w[1] + J[1] - b[1]
      ]), y.deltaOffset = qe(es, [fr[0], fr[1], 0, 0], Cc);
    }
    return fe(e, "onClip", Pe(e, t, V({ clipEventType: "changed", clipType: j, poses: D, clipStyle: It, clipStyles: kr, distX: m, distY: x }, kt((o = {}, o[j === "rect" ? "clip" : "clipPath"] = It, o), t)))), !0;
  },
  dragControlEnd: function(e, t) {
    this.unset(e);
    var r = t.isDrag, n = t.datas, o = t.isDouble, i = n.isLine, a = n.isClipStart, s = n.isControl;
    return a ? (fe(e, "onClipEnd", qt(e, t, {})), o && (s ? RA(e, t) : i && DA(e, t)), o || r) : !1;
  },
  unset: function(e) {
    e.state.clipPathState = "", e.state.snapBoundInfos = null;
  }
}, TA = {
  name: "originDraggable",
  props: [
    "originDraggable",
    "originRelative"
  ],
  events: [
    "dragOriginStart",
    "dragOrigin",
    "dragOriginEnd"
  ],
  css: [
    `:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`
  ],
  dragControlCondition: function(e, t) {
    return t.isRequest ? t.requestAble === "originDraggable" : ut(t.inputEvent.target, xe("origin"));
  },
  dragControlStart: function(e, t) {
    var r = t.datas;
    po(e, t);
    var n = Pe(e, t, {
      dragStart: Tt.dragStart(e, new ti().dragStart([0, 0], t))
    }), o = fe(e, "onDragOriginStart", n);
    return r.startOrigin = e.state.transformOrigin, r.startTargetOrigin = e.state.targetOrigin, r.prevOrigin = [0, 0], r.isDragOrigin = !0, o === !1 ? (r.isDragOrigin = !1, !1) : n;
  },
  dragControl: function(e, t) {
    var r = t.datas, n = t.isPinch, o = t.isRequest;
    if (!r.isDragOrigin)
      return !1;
    var i = W(Zr(t), 2), a = i[0], s = i[1], l = e.state, c = l.width, u = l.height, d = l.offsetMatrix, h = l.targetMatrix, p = l.is3d, g = e.props.originRelative, v = g === void 0 ? !0 : g, m = p ? 4 : 3, x = [a, s];
    if (o) {
      var y = t.distOrigin;
      (y[0] || y[1]) && (x = y);
    }
    var b = Ge(r.startOrigin, x), w = Ge(r.startTargetOrigin, x), _ = be(x, r.prevOrigin), R = Ya(d, h, b, m), T = e.getRect(), k = sr(vo(R, c, u, m)), j = [
      T.left - k.left,
      T.top - k.top
    ];
    r.prevOrigin = x;
    var A = [
      mr(w[0], c, v),
      mr(w[1], u, v)
    ].join(" "), $ = Tt.drag(e, Wa(t, e.state, j, !!n)), F = Pe(e, t, V(V({ width: c, height: u, origin: b, dist: x, delta: _, transformOrigin: A, drag: $ }, kt({
      transformOrigin: A,
      transform: $.transform
    }, t)), { afterTransform: $.transform }));
    return fe(e, "onDragOrigin", F), F;
  },
  dragControlEnd: function(e, t) {
    var r = t.datas;
    return r.isDragOrigin ? (fe(e, "onDragOriginEnd", qt(e, t, {})), !0) : !1;
  },
  dragGroupControlCondition: function(e, t) {
    return this.dragControlCondition(e, t);
  },
  dragGroupControlStart: function(e, t) {
    var r = this.dragControlStart(e, t);
    return !!r;
  },
  dragGroupControl: function(e, t) {
    var r = this.dragControl(e, t);
    return r ? (e.transformOrigin = r.transformOrigin, !0) : !1;
  },
  /**
      * @method Moveable.OriginDraggable#request
      * @param {object} e - the OriginDraggable's request parameter
      * @param {number} [e.x] - x position
      * @param {number} [e.y] - y position
      * @param {number} [e.deltaX] - x number to move
      * @param {number} [e.deltaY] - y number to move
      * @param {array} [e.deltaOrigin] - left, top number to move transform-origin
      * @param {array} [e.origin] - transform-origin position
      * @param {number} [e.isInstant] - Whether to execute the request instantly
      * @return {Moveable.Requester} Moveable Requester
      * @example
  
      * // Instantly Request (requestStart - request - requestEnd)
      * // Use Relative Value
      * moveable.request("originDraggable", { deltaX: 10, deltaY: 10 }, true);
      * // Use Absolute Value
      * moveable.request("originDraggable", { x: 200, y: 100 }, true);
      * // Use Transform Value
      * moveable.request("originDraggable", { deltaOrigin: [10, 0] }, true);
      * moveable.request("originDraggable", { origin: [100, 0] }, true);
      * // requestStart
      * const requester = moveable.request("originDraggable");
      *
      * // request
      * // Use Relative Value
      * requester.request({ deltaX: 10, deltaY: 10 });
      * requester.request({ deltaX: 10, deltaY: 10 });
      * requester.request({ deltaX: 10, deltaY: 10 });
      * // Use Absolute Value
      * moveable.request("originDraggable", { x: 200, y: 100 });
      * moveable.request("originDraggable", { x: 220, y: 100 });
      * moveable.request("originDraggable", { x: 240, y: 100 });
      *
      * // requestEnd
      * requester.requestEnd();
      */
  request: function(e) {
    var t = {}, r = e.getRect(), n = 0, o = 0, i = r.transformOrigin, a = [0, 0];
    return {
      isControl: !0,
      requestStart: function() {
        return { datas: t };
      },
      request: function(s) {
        return "deltaOrigin" in s ? (a[0] += s.deltaOrigin[0], a[1] += s.deltaOrigin[1]) : "origin" in s ? (a[0] = s.origin[0] - i[0], a[1] = s.origin[1] - i[1]) : ("x" in s ? n = s.x - r.left : "deltaX" in s && (n += s.deltaX), "y" in s ? o = s.y - r.top : "deltaY" in s && (o += s.deltaY)), { datas: t, distX: n, distY: o, distOrigin: a };
      },
      requestEnd: function() {
        return { datas: t, isDrag: !0 };
      }
    };
  }
};
function jA(e, t, r, n) {
  var o = e.filter(function(l) {
    var c = l.virtual, u = l.horizontal;
    return u && !c;
  }).length, i = e.filter(function(l) {
    var c = l.virtual, u = l.vertical;
    return u && !c;
  }).length, a = -1;
  if (t === 0 && (o === 0 ? a = 0 : o === 1 && (a = 1)), t === 2 && (o <= 2 ? a = 2 : o <= 3 && (a = 3)), t === 3 && (i === 0 ? a = 4 : i < 4 && (a = 7)), t === 1 && (i <= 1 ? a = 5 : i <= 2 && (a = 6)), !(a === -1 || !e[a].virtual)) {
    var s = e[a];
    kA(e, a), a < 4 ? s.pos[0] = r : s.pos[1] = n;
  }
}
function kA(e, t) {
  t < 4 ? e.slice(0, t + 1).forEach(function(r) {
    r.virtual = !1;
  }) : (e[0].virtual && (e[0].virtual = !1), e.slice(4, t + 1).forEach(function(r) {
    r.virtual = !1;
  }));
}
function PA(e, t) {
  t < 4 ? e.slice(t, 4).forEach(function(r) {
    r.virtual = !0;
  }) : e.slice(t).forEach(function(r) {
    r.virtual = !0;
  });
}
function Nv(e, t, r, n, o) {
  n === void 0 && (n = [0, 0]);
  var i = [];
  return !e || e === "0px" ? i = [] : i = an(e), Fy(i, t, r, 0, 0, n, o);
}
function Dv(e, t, r, n, o) {
  var i = e.state, a = i.width, s = i.height, l = oh(o, e.props.roundRelative, a, s), c = l.raws, u = l.styles, d = l.radiusPoses, h = CA(d, c), p = h.horizontals, g = h.verticals, v = u.join(" ");
  i.borderRadiusState = v;
  var m = Pe(e, t, V({ horizontals: p, verticals: g, borderRadius: v, width: a, height: s, delta: n, dist: r }, kt({
    borderRadius: v
  }, t)));
  return fe(e, "onRound", m), m;
}
function Rv(e) {
  var t, r, n = e.getState().style, o = n.borderRadius || "";
  if (!o && e.props.groupable) {
    var i = e.moveables[0], a = e.getTargets()[0];
    a && (i?.props.target === a ? (o = (r = (t = e.moveables[0]) === null || t === void 0 ? void 0 : t.state.style.borderRadius) !== null && r !== void 0 ? r : "", n.borderRadius = o) : (o = Jf(a).borderRadius, n.borderRadius = o));
  }
  return o;
}
var AA = {
  name: "roundable",
  props: [
    "roundable",
    "roundRelative",
    "minRoundControls",
    "maxRoundControls",
    "roundClickable",
    "roundPadding",
    "isDisplayShadowRoundControls"
  ],
  events: [
    "roundStart",
    "round",
    "roundEnd",
    "roundGroupStart",
    "roundGroup",
    "roundGroupEnd"
  ],
  css: [
    `.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,
    `.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,
    `.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,
    `:host.round-line-clickable .line.direction {
cursor: pointer;
}`
  ],
  className: function(e) {
    var t = e.props.roundClickable;
    return t === !0 || t === "line" ? xe("round-line-clickable") : "";
  },
  requestStyle: function() {
    return ["borderRadius"];
  },
  requestChildStyle: function() {
    return ["borderRadius"];
  },
  render: function(e, t) {
    var r = e.getState(), n = r.target, o = r.width, i = r.height, a = r.allMatrix, s = r.is3d, l = r.left, c = r.top, u = r.borderRadiusState, d = e.props, h = d.minRoundControls, p = h === void 0 ? [0, 0] : h, g = d.maxRoundControls, v = g === void 0 ? [4, 4] : g, m = d.zoom, x = d.roundPadding, y = x === void 0 ? 0 : x, b = d.isDisplayShadowRoundControls, w = d.groupable;
    if (!n)
      return null;
    var _ = u || Rv(e), R = s ? 4 : 3, T = Nv(_, o, i, p, !0);
    if (!T)
      return null;
    var k = 0, j = 0, A = w ? [0, 0] : [l, c];
    return T.map(function($, F) {
      var L = $.horizontal, P = $.vertical, O = $.direction || "", I = le([], W($.pos), !1);
      j += Math.abs(L), k += Math.abs(P), L && O.indexOf("n") > -1 && (I[1] -= y), P && O.indexOf("w") > -1 && (I[0] -= y), L && O.indexOf("s") > -1 && (I[1] += y), P && O.indexOf("e") > -1 && (I[0] += y);
      var E = be(ot(a, I, R), A), S = b && b !== "horizontal", M = $.vertical ? k <= v[1] && (S || !$.virtual) : j <= v[0] && (b || !$.virtual);
      return t.createElement("div", { key: "borderRadiusControl".concat(F), className: xe("control", "border-radius", $.vertical ? "vertical" : "", $.virtual ? "virtual" : ""), "data-radius-index": F, style: {
        display: M ? "block" : "none",
        transform: "translate(".concat(E[0], "px, ").concat(E[1], "px) scale(").concat(m, ")")
      } });
    });
  },
  dragControlCondition: function(e, t) {
    if (!t.inputEvent || t.isRequest)
      return !1;
    var r = t.inputEvent.target.getAttribute("class") || "";
    return r.indexOf("border-radius") > -1 || r.indexOf("moveable-line") > -1 && r.indexOf("moveable-direction") > -1;
  },
  dragGroupControlCondition: function(e, t) {
    return this.dragControlCondition(e, t);
  },
  dragControlStart: function(e, t) {
    var r = t.inputEvent, n = t.datas, o = r.target, i = o.getAttribute("class") || "", a = i.indexOf("border-radius") > -1, s = i.indexOf("moveable-line") > -1 && i.indexOf("moveable-direction") > -1, l = a ? parseInt(o.getAttribute("data-radius-index"), 10) : -1, c = -1;
    if (s) {
      var u = o.getAttribute("data-line-key") || "";
      u && (c = parseInt(u.replace(/render-line-/g, ""), 10), isNaN(c) && (c = -1));
    }
    if (!a && !s)
      return !1;
    var d = Pe(e, t, {}), h = fe(e, "onRoundStart", d);
    if (h === !1)
      return !1;
    n.lineIndex = c, n.controlIndex = l, n.isControl = a, n.isLine = s, po(e, t);
    var p = e.props, g = p.roundRelative, v = p.minRoundControls, m = v === void 0 ? [0, 0] : v, x = e.state, y = x.width, b = x.height;
    n.isRound = !0, n.prevDist = [0, 0];
    var w = Rv(e), _ = Nv(w || "", y, b, m, !0) || [];
    return n.controlPoses = _, x.borderRadiusState = oh(_, g, y, b).styles.join(" "), d;
  },
  dragControl: function(e, t) {
    var r = t.datas, n = r.controlPoses;
    if (!r.isRound || !r.isControl || !n.length)
      return !1;
    var o = r.controlIndex, i = W(Zr(t), 2), a = i[0], s = i[1], l = [a, s], c = be(l, r.prevDist), u = e.props.maxRoundControls, d = u === void 0 ? [4, 4] : u, h = e.state, p = h.width, g = h.height, v = n[o], m = v.vertical, x = v.horizontal, y = n.map(function(w) {
      var _ = w.horizontal, R = w.vertical, T = [
        _ * x * l[0],
        R * m * l[1]
      ];
      if (_) {
        if (d[0] === 1)
          return T;
        if (d[0] < 4 && _ !== x)
          return T;
      } else {
        if (d[1] === 0)
          return T[1] = R * x * l[0] / p * g, T;
        if (m) {
          if (d[1] === 1)
            return T;
          if (d[1] < 4 && R !== m)
            return T;
        }
      }
      return [0, 0];
    });
    y[o] = l;
    var b = n.map(function(w, _) {
      return V(V({}, w), { pos: Ge(w.pos, y[_]) });
    });
    return o < 4 ? b.slice(0, o + 1).forEach(function(w) {
      w.virtual = !1;
    }) : b.slice(4, o + 1).forEach(function(w) {
      w.virtual = !1;
    }), r.prevDist = [a, s], Dv(e, t, l, c, b);
  },
  dragControlEnd: function(e, t) {
    var r = e.state;
    r.borderRadiusState = "";
    var n = t.datas, o = t.isDouble;
    if (!n.isRound)
      return !1;
    var i = n.isControl, a = n.controlIndex, s = n.isLine, l = n.lineIndex, c = n.controlPoses, u = c.filter(function(x) {
      var y = x.virtual;
      return y;
    }).length, d = e.props.roundClickable, h = d === void 0 ? !0 : d;
    if (o && h) {
      if (i && (h === !0 || h === "control"))
        PA(c, a);
      else if (s && (h === !0 || h === "line")) {
        var p = W(Gx(e, t), 2), g = p[0], v = p[1];
        jA(c, l, g, v);
      }
      u !== c.filter(function(x) {
        var y = x.virtual;
        return y;
      }).length && Dv(e, t, [0, 0], [0, 0], c);
    }
    var m = qt(e, t, {});
    return fe(e, "onRoundEnd", m), r.borderRadiusState = "", m;
  },
  dragGroupControlStart: function(e, t) {
    var r = this.dragControlStart(e, t);
    if (!r)
      return !1;
    var n = e.moveables, o = e.props.targets, i = wr(e, "roundable", t), a = V({ targets: e.props.targets, events: i.map(function(s, l) {
      return V(V({}, s), { target: o[l], moveable: n[l], currentTarget: n[l] });
    }) }, r);
    return fe(e, "onRoundGroupStart", a), r;
  },
  dragGroupControl: function(e, t) {
    var r = this.dragControl(e, t);
    if (!r)
      return !1;
    var n = e.moveables, o = e.props.targets, i = wr(e, "roundable", t), a = V({ targets: e.props.targets, events: i.map(function(s, l) {
      return V(V(V({}, s), { target: o[l], moveable: n[l], currentTarget: n[l] }), kt({
        borderRadius: r.borderRadius
      }, s));
    }) }, r);
    return fe(e, "onRoundGroup", a), a;
  },
  dragGroupControlEnd: function(e, t) {
    var r = e.moveables, n = e.props.targets, o = wr(e, "roundable", t);
    pc(e, "onRound", function(s) {
      var l = V({ targets: e.props.targets, events: o.map(function(c, u) {
        return V(V(V({}, c), { target: n[u], moveable: r[u], currentTarget: r[u] }), kt({
          borderRadius: s.borderRadius
        }, c));
      }) }, s);
      fe(e, "onRoundGroup", l);
    });
    var i = this.dragControlEnd(e, t);
    if (!i)
      return !1;
    var a = V({ targets: e.props.targets, events: o.map(function(s, l) {
      var c;
      return V(V({}, s), { target: n[l], moveable: r[l], currentTarget: r[l], lastEvent: (c = s.datas) === null || c === void 0 ? void 0 : c.lastEvent });
    }) }, i);
    return fe(e, "onRoundGroupEnd", a), a;
  },
  unset: function(e) {
    e.state.borderRadiusState = "";
  }
};
function OA(e, t) {
  var r = t ? 4 : 3, n = et(r), o = "matrix".concat(t ? "3d" : "", "(").concat(n.join(","), ")");
  return e === o || e === "matrix(1,0,0,1,0,0)";
}
var By = {
  isPinch: !0,
  name: "beforeRenderable",
  props: [],
  events: [
    "beforeRenderStart",
    "beforeRender",
    "beforeRenderEnd",
    "beforeRenderGroupStart",
    "beforeRenderGroup",
    "beforeRenderGroupEnd"
  ],
  dragRelation: "weak",
  setTransform: function(e, t) {
    var r = e.state, n = r.is3d, o = r.targetMatrix, i = r.inlineTransform, a = n ? "matrix3d(".concat(o.join(","), ")") : "matrix(".concat(Mx(o, !0), ")"), s = !i || i === "none" ? a : i;
    t.datas.startTransforms = OA(s, n) ? [] : an(s);
  },
  resetStyle: function(e) {
    var t = e.datas;
    t.nextStyle = {}, t.nextTransforms = e.datas.startTransforms, t.nextTransformAppendedIndexes = [];
  },
  fillDragStartParams: function(e, t) {
    return Pe(e, t, {
      setTransform: function(r) {
        t.datas.startTransforms = Ue(r) ? r : an(r);
      },
      isPinch: !!t.isPinch
    });
  },
  fillDragParams: function(e, t) {
    return Pe(e, t, {
      isPinch: !!t.isPinch
    });
  },
  dragStart: function(e, t) {
    this.setTransform(e, t), this.resetStyle(t), fe(e, "onBeforeRenderStart", this.fillDragStartParams(e, t));
  },
  drag: function(e, t) {
    t.datas.startTransforms || this.setTransform(e, t), this.resetStyle(t), fe(e, "onBeforeRender", Pe(e, t, {
      isPinch: !!t.isPinch
    }));
  },
  dragEnd: function(e, t) {
    t.datas.startTransforms || (this.setTransform(e, t), this.resetStyle(t)), fe(e, "onBeforeRenderEnd", Pe(e, t, {
      isPinch: !!t.isPinch,
      isDrag: t.isDrag
    }));
  },
  dragGroupStart: function(e, t) {
    var r = this;
    this.dragStart(e, t);
    var n = wr(e, "beforeRenderable", t), o = e.moveables, i = n.map(function(a, s) {
      var l = o[s];
      return r.setTransform(l, a), r.resetStyle(a), r.fillDragStartParams(l, a);
    });
    fe(e, "onBeforeRenderGroupStart", Pe(e, t, {
      isPinch: !!t.isPinch,
      targets: e.props.targets,
      setTransform: function() {
      },
      events: i
    }));
  },
  dragGroup: function(e, t) {
    var r = this;
    this.drag(e, t);
    var n = wr(e, "beforeRenderable", t), o = e.moveables, i = n.map(function(a, s) {
      var l = o[s];
      return r.resetStyle(a), r.fillDragParams(l, a);
    });
    fe(e, "onBeforeRenderGroup", Pe(e, t, {
      isPinch: !!t.isPinch,
      targets: e.props.targets,
      events: i
    }));
  },
  dragGroupEnd: function(e, t) {
    this.dragEnd(e, t), fe(e, "onBeforeRenderGroupEnd", Pe(e, t, {
      isPinch: !!t.isPinch,
      isDrag: t.isDrag,
      targets: e.props.targets
    }));
  },
  dragControlStart: function(e, t) {
    return this.dragStart(e, t);
  },
  dragControl: function(e, t) {
    return this.drag(e, t);
  },
  dragControlEnd: function(e, t) {
    return this.dragEnd(e, t);
  },
  dragGroupControlStart: function(e, t) {
    return this.dragGroupStart(e, t);
  },
  dragGroupControl: function(e, t) {
    return this.dragGroup(e, t);
  },
  dragGroupControlEnd: function(e, t) {
    return this.dragGroupEnd(e, t);
  }
}, zy = {
  name: "renderable",
  props: [],
  events: [
    "renderStart",
    "render",
    "renderEnd",
    "renderGroupStart",
    "renderGroup",
    "renderGroupEnd"
  ],
  dragRelation: "weak",
  dragStart: function(e, t) {
    fe(e, "onRenderStart", Pe(e, t, {
      isPinch: !!t.isPinch
    }));
  },
  drag: function(e, t) {
    fe(e, "onRender", this.fillDragParams(e, t));
  },
  dragAfter: function(e, t) {
    return this.drag(e, t);
  },
  dragEnd: function(e, t) {
    fe(e, "onRenderEnd", this.fillDragEndParams(e, t));
  },
  dragGroupStart: function(e, t) {
    fe(e, "onRenderGroupStart", Pe(e, t, {
      isPinch: !!t.isPinch,
      targets: e.props.targets
    }));
  },
  dragGroup: function(e, t) {
    var r = this, n = wr(e, "beforeRenderable", t), o = e.moveables, i = n.map(function(a, s) {
      var l = o[s];
      return r.fillDragParams(l, a);
    });
    fe(e, "onRenderGroup", Pe(e, t, V(V({ isPinch: !!t.isPinch, targets: e.props.targets, transform: Ds(t), transformObject: {} }, kt(Rs(t))), { events: i })));
  },
  dragGroupEnd: function(e, t) {
    var r = this, n = wr(e, "beforeRenderable", t), o = e.moveables, i = n.map(function(a, s) {
      var l = o[s];
      return r.fillDragEndParams(l, a);
    });
    fe(e, "onRenderGroupEnd", Pe(e, t, V({ isPinch: !!t.isPinch, isDrag: t.isDrag, targets: e.props.targets, events: i, transformObject: {}, transform: Ds(t) }, kt(Rs(t)))));
  },
  dragControlStart: function(e, t) {
    return this.dragStart(e, t);
  },
  dragControl: function(e, t) {
    return this.drag(e, t);
  },
  dragControlAfter: function(e, t) {
    return this.dragAfter(e, t);
  },
  dragControlEnd: function(e, t) {
    return this.dragEnd(e, t);
  },
  dragGroupControlStart: function(e, t) {
    return this.dragGroupStart(e, t);
  },
  dragGroupControl: function(e, t) {
    return this.dragGroup(e, t);
  },
  dragGroupControlEnd: function(e, t) {
    return this.dragGroupEnd(e, t);
  },
  fillDragParams: function(e, t) {
    var r = {};
    return ei(ll(t) || []).forEach(function(n) {
      r[n.name] = n.functionValue;
    }), Pe(e, t, V({ isPinch: !!t.isPinch, transformObject: r, transform: Ds(t) }, kt(Rs(t))));
  },
  fillDragEndParams: function(e, t) {
    var r = {};
    return ei(ll(t) || []).forEach(function(n) {
      r[n.name] = n.functionValue;
    }), Pe(e, t, V({ isPinch: !!t.isPinch, isDrag: t.isDrag, transformObject: r, transform: Ds(t) }, kt(Rs(t))));
  }
};
function ea(e, t, r, n, o, i, a) {
  i.clientDistX = i.distX, i.clientDistY = i.distY;
  var s = o === "Start", l = o === "End", c = o === "After", u = e.state.target, d = i.isRequest, h = n.indexOf("Control") > -1;
  if (!u || s && h && !d && e.areaElement === i.inputEvent.target)
    return !1;
  var p = le([], W(t), !1);
  if (d) {
    var g = i.requestAble;
    p.some(function(F) {
      return F.name === g;
    }) || p.push.apply(p, le([], W(e.props.ables.filter(function(F) {
      return F.name === g;
    })), !1));
  }
  if (!p.length || p.every(function(F) {
    return F.dragRelation;
  }))
    return !1;
  var v = i.inputEvent, m;
  l && v && (m = document.elementFromPoint(i.clientX, i.clientY) || v.target);
  var x = !1, y = function() {
    var F;
    x = !0, (F = i.stop) === null || F === void 0 || F.call(i);
  }, b = s && (!e.targetGesto || !e.controlGesto || !e.targetGesto.isFlag() || !e.controlGesto.isFlag());
  b && e.updateRect(o, !0, !1);
  var w = i.datas, _ = h ? "controlGesto" : "targetGesto", R = e[_], T = function(F, L, P) {
    if (!(L in F) || R !== e[_])
      return !1;
    var O = F.name, I = w[O] || (w[O] = {});
    if (s && (I.isEventStart = !P || !F[P] || F[P](e, i)), !I.isEventStart)
      return !1;
    var E = F[L](e, V(V({}, i), { stop: y, datas: I, originalDatas: w, inputTarget: m }));
    return e._emitter.off(), s && E === !1 && (I.isEventStart = !1), E;
  };
  b && p.forEach(function(F) {
    F.unset && F.unset(e);
  }), T(By, "drag".concat(n).concat(o));
  var k = 0, j = 0;
  r.forEach(function(F) {
    if (x)
      return !1;
    var L = "".concat(F).concat(n).concat(o), P = "".concat(F).concat(n, "Condition");
    o === "" && !d && oA(e.state, i);
    var O = p.filter(function(S) {
      return S[L];
    });
    O = O.filter(function(S, M) {
      return S.name && O.indexOf(S) === M;
    });
    var I = O.filter(function(S) {
      return T(S, L, P);
    }), E = I.length;
    x && ++k, E && ++j, !x && s && O.length && !E && (k += O.filter(function(S) {
      var M = S.name, D = w[M];
      return D.isEventStart ? S.dragRelation !== "strong" : !1;
    }).length ? 1 : 0);
  }), (!c || j) && T(zy, "drag".concat(n).concat(o));
  var A = R !== e[_] || k === r.length;
  if ((l || x || A) && (e.state.gestos = {}, e.moveables && e.moveables.forEach(function(F) {
    F.state.gestos = {};
  }), p.forEach(function(F) {
    F.unset && F.unset(e);
  })), s && !A && !d && j && e.props.preventDefault && i?.preventDefault(), e.isUnmounted || A)
    return !1;
  if (!s && j && !a || l) {
    var $ = e.props.flushSync || my;
    $(function() {
      e.updateRect(l ? o : "", !0, !1), e.forceUpdate();
    });
  }
  return !s && !l && !c && j && !a && ea(e, t, r, n, o + "After", i), !0;
}
function ah(e, t) {
  return function(r, n) {
    var o;
    n === void 0 && (n = r.inputEvent.target);
    var i = n, a = e.areaElement, s = e._dragTarget;
    return !s || !t && (!((o = e.controlGesto) === null || o === void 0) && o.isFlag()) ? !1 : i === s || s.contains(i) || i === a || !e.isMoveableElement(i) && !e.controlBox.contains(i) || ut(i, "moveable-area") || ut(i, "moveable-padding") || ut(i, "moveable-edgeDraggable");
  };
}
function $y(e, t, r) {
  var n = e.controlBox, o = [], i = e.props, a = i.dragArea, s = e.state.target, l = i.dragTarget;
  o.push(n), (!a || l) && o.push(t), !a && l && s && t !== s && i.dragTargetSelf && o.push(s);
  var c = ah(e);
  return Vy(e, o, "targetAbles", r, {
    dragStart: c,
    pinchStart: c
  });
}
function Gy(e, t) {
  var r = e.controlBox, n = [];
  n.push(r);
  var o = ah(e, !0), i = function(a, s) {
    if (s === void 0 && (s = a.inputEvent.target), s === r)
      return !0;
    var l = o(a, s);
    return !l;
  };
  return Vy(e, n, "controlAbles", t, {
    dragStart: i,
    pinchStart: i
  });
}
function Vy(e, t, r, n, o) {
  o === void 0 && (o = {});
  var i = r === "targetAbles", a = e.props, s = a.pinchOutside, l = a.pinchThreshold, c = a.preventClickEventOnDrag, u = a.preventClickDefault, d = a.checkInput, h = a.dragFocusedInput, p = a.preventDefault, g = p === void 0 ? !0 : p, v = a.preventRightClick, m = v === void 0 ? !0 : v, x = a.preventWheelClick, y = x === void 0 ? !0 : x, b = a.dragContainer, w = $r(b, !0), _ = {
    preventDefault: g,
    preventRightClick: m,
    preventWheelClick: y,
    container: w || Ht(e.getControlBoxElement()),
    pinchThreshold: l,
    pinchOutside: s,
    preventClickEventOnDrag: i ? c : !1,
    preventClickEventOnDragStart: i ? u : !1,
    preventClickEventByCondition: i ? null : function(k) {
      return e.controlBox.contains(k.target);
    },
    checkInput: i ? d : !1,
    dragFocusedInput: h
  }, R = new Ox(t, _), T = n === "Control";
  return ["drag", "pinch"].forEach(function(k) {
    ["Start", "", "End"].forEach(function(j) {
      R.on("".concat(k).concat(j), function(A) {
        var $, F = A.eventType, L = k === "drag" && A.isPinch;
        if (o[F] && !o[F](A)) {
          A.stop();
          return;
        }
        if (!L) {
          var P = k === "drag" ? [k] : ["drag", k], O = le([], W(e[r]), !1), I = ea(e, O, P, n, j, A);
          I ? (e.props.stopPropagation || j === "Start" && T) && (($ = A?.inputEvent) === null || $ === void 0 || $.stopPropagation()) : A.stop();
        }
      });
    });
  }), R;
}
var IA = /* @__PURE__ */ function() {
  function e(t, r, n) {
    var o = this;
    this.target = t, this.moveable = r, this.eventName = n, this.ables = [], this._onEvent = function(i) {
      var a = o.eventName, s = o.moveable;
      s.state.disableNativeEvent || o.ables.forEach(function(l) {
        l[a](s, {
          inputEvent: i
        });
      });
    }, t.addEventListener(n.toLowerCase(), this._onEvent);
  }
  return e.prototype.setAbles = function(t) {
    this.ables = t;
  }, e.prototype.destroy = function() {
    this.target.removeEventListener(this.eventName.toLowerCase(), this._onEvent), this.target = null, this.moveable = null;
  }, e;
}();
function FA(e, t, r, n) {
  var o;
  r === void 0 && (r = t);
  var i = qx(e, t), a = i.matrixes, s = i.is3d, l = i.targetMatrix, c = i.transformOrigin, u = i.targetOrigin, d = i.offsetContainer, h = i.hasFixed, p = i.zoom, g = Z3(d, r), v = g.matrixes, m = g.is3d, x = g.offsetContainer, y = g.zoom, b = n, w = 4, _ = e.tagName.toLowerCase() !== "svg" && "ownerSVGElement" in e, R = l, T = et(w), k = et(w), j = et(w), A = et(w), $ = a.length, F = v.map(function(M) {
    return V(V({}, M), { matrix: M.matrix ? le([], W(M.matrix), !1) : void 0 });
  }).reverse();
  a.reverse(), !s && b && (R = Rr(R, 3, 4), ud(a)), !m && b && ud(F), F.forEach(function(M) {
    k = qe(k, M.matrix, w);
  });
  var L = r || On(e), P = ((o = F[0]) === null || o === void 0 ? void 0 : o.target) || Ea(L, L, !0).offsetParent, O = F.slice(1).reduce(function(M, D) {
    return qe(M, D.matrix, w);
  }, et(w));
  a.forEach(function(M, D) {
    if ($ - 2 === D && (j = T.slice()), $ - 1 === D && (A = T.slice()), !M.matrix) {
      var N = a[D + 1], z = eA(M, N, P, w, qe(O, T, w));
      M.matrix = ao(z, w);
    }
    T = qe(T, M.matrix, w);
  });
  var I = !_ && s;
  R || (R = et(I ? 4 : 3));
  var E = hc(_ && R.length === 16 ? Rr(R, 4, 3) : R, I), S = k;
  return k = Dx(k, w, w), {
    hasZoom: p !== 1 || y !== 1,
    hasFixed: h,
    matrixes: a,
    rootMatrix: k,
    originalRootMatrix: S,
    beforeMatrix: j,
    offsetMatrix: A,
    allMatrix: T,
    targetMatrix: R,
    targetTransform: E,
    inlineTransform: e.style.transform,
    transformOrigin: c,
    targetOrigin: u,
    is3d: b,
    offsetContainer: d,
    offsetRootContainer: x
  };
}
function Uy(e, t, r, n) {
  r === void 0 && (r = t);
  var o = 0, i = 0, a = 0, s = {}, l = wy(e);
  if (e && (o = l.offsetWidth, i = l.offsetHeight), e) {
    var c = FA(e, t, r, n), u = zo(c.allMatrix, c.transformOrigin, o, i);
    s = V(V({}, c), u);
    var d = zo(c.allMatrix, [50, 50], 100, 100);
    a = Sy([d.pos1, d.pos2], d.direction);
  }
  var h = 4;
  return V(V(V({ hasZoom: !1, width: o, height: i, rotation: a }, l), { originalRootMatrix: et(h), rootMatrix: et(h), beforeMatrix: et(h), offsetMatrix: et(h), allMatrix: et(h), targetMatrix: et(h), targetTransform: "", inlineTransform: "", transformOrigin: [0, 0], targetOrigin: [0, 0], is3d: !0, left: 0, top: 0, right: 0, bottom: 0, origin: [0, 0], pos1: [0, 0], pos2: [0, 0], pos3: [0, 0], pos4: [0, 0], direction: 1, hasFixed: !1, offsetContainer: null, offsetRootContainer: null, matrixes: [] }), s);
}
function LA(e, t, r) {
  return r === void 0 && (r = t), Uy(e, t, r, !0);
}
function pd(e, t, r, n, o, i) {
  i === void 0 && (i = []);
  var a = 1, s = [0, 0], l = Ts(), c = Ts(), u = Ts(), d = Ts(), h = [0, 0], p = {}, g = Uy(t, r, o, !0);
  if (t) {
    var v = $t(t);
    i.forEach(function(F) {
      p[F] = v(F);
    });
    var m = g.is3d ? 4 : 3, x = zo(g.offsetMatrix, Ge(g.transformOrigin, Rx(g.targetMatrix, m)), g.width, g.height);
    a = x.direction, s = Ge(x.origin, [x.left - g.left, x.top - g.top]), d = Ji(g.offsetRootContainer);
    var y = Ea(n, n, !0).offsetParent || g.offsetRootContainer;
    if (g.hasZoom) {
      var b = zo(qe(g.originalRootMatrix, g.allMatrix), g.transformOrigin, g.width, g.height), w = zo(g.originalRootMatrix, fl($t(y)("transformOrigin")).map(function(F) {
        return parseFloat(F);
      }), y.offsetWidth, y.offsetHeight);
      if (l = au(b, d), u = au(w, d, y, !0), e) {
        var _ = b.left, R = b.top;
        c = au({
          left: _,
          top: R,
          bottom: R,
          right: R
        }, d);
      }
    } else {
      l = Ji(t), u = K3(y), e && (c = Ji(e));
      var T = u.left, k = u.top, j = u.clientLeft, A = u.clientTop, $ = [
        l.left - T,
        l.top - k
      ];
      h = be(oi(g.rootMatrix, $, 4), [j + g.left, A + g.top]);
    }
  }
  return V({ targetClientRect: l, containerClientRect: u, moveableClientRect: c, rootContainerClientRect: d, beforeDirection: a, beforeOrigin: s, originalBeforeOrigin: s, target: t, style: p, offsetDelta: h }, g);
}
function Mv(e) {
  var t = e.pos1, r = e.pos2, n = e.pos3, o = e.pos4;
  if (!t || !r || !n || !o)
    return null;
  var i = so([t, r, n, o]), a = [i.minX, i.minY], s = be(e.origin, a);
  return t = be(t, a), r = be(r, a), n = be(n, a), o = be(o, a), V(V({}, e), {
    left: e.left,
    top: e.top,
    posDelta: a,
    pos1: t,
    pos2: r,
    pos3: n,
    pos4: o,
    origin: s,
    beforeOrigin: s,
    // originalBeforeOrigin: origin,
    isPersisted: !0
  });
}
var ii = /* @__PURE__ */ function(e) {
  Ua(t, e);
  function t() {
    var r = e !== null && e.apply(this, arguments) || this;
    return r.state = V({ container: null, gestos: {}, renderLines: [
      [[0, 0], [0, 0]],
      [[0, 0], [0, 0]],
      [[0, 0], [0, 0]],
      [[0, 0], [0, 0]]
    ], renderPoses: [[0, 0], [0, 0], [0, 0], [0, 0]], disableNativeEvent: !1, posDelta: [0, 0] }, pd(null)), r.renderState = {}, r.enabledAbles = [], r.targetAbles = [], r.controlAbles = [], r.rotation = 0, r.scale = [1, 1], r.isMoveableMounted = !1, r.isUnmounted = !1, r.events = {
      mouseEnter: null,
      mouseLeave: null
    }, r._emitter = new In(), r._prevOriginalDragTarget = null, r._originalDragTarget = null, r._prevDragTarget = null, r._dragTarget = null, r._prevPropTarget = null, r._propTarget = null, r._prevDragArea = !1, r._isPropTargetChanged = !1, r._hasFirstTarget = !1, r._reiszeObserver = null, r._observerId = 0, r._mutationObserver = null, r._rootContainer = null, r._viewContainer = null, r._viewClassNames = [], r._store = {}, r.checkUpdateRect = function() {
      if (!r.isDragging()) {
        var n = r.props.parentMoveable;
        if (n) {
          n.checkUpdateRect();
          return;
        }
        Ex(r._observerId), r._observerId = nl(function() {
          r.isDragging() || r.updateRect();
        });
      }
    }, r._onPreventClick = function(n) {
      n.stopPropagation(), n.preventDefault();
    }, r;
  }
  return t.prototype.render = function() {
    var r = this.props, n = this.getState(), o = r.parentPosition, i = r.className, a = r.target, s = r.zoom, l = r.cspNonce, c = r.translateZ, u = r.cssStyled, d = r.groupable, h = r.linePadding, p = r.controlPadding;
    this._checkUpdateRootContainer(), this.checkUpdate(), this.updateRenderPoses();
    var g = W(o || [0, 0], 2), v = g[0], m = g[1], x = n.left, y = n.top, b = n.target, w = n.direction, _ = n.hasFixed, R = n.offsetDelta, T = r.targets, k = this.isDragging(), j = {};
    this.getEnabledAbles().forEach(function(O) {
      j["data-able-".concat(O.name.toLowerCase())] = !0;
    });
    var A = this._getAbleClassName(), $ = T && T.length && (b || d) || a || !this._hasFirstTarget && this.state.isPersisted, F = this.controlBox || this.props.firstRenderState || this.props.persistData, L = [x - v, y - m];
    !d && r.useAccuratePosition && (L[0] += R[0], L[1] += R[1]);
    var P = {
      position: _ ? "fixed" : "absolute",
      display: $ ? "block" : "none",
      visibility: F ? "visible" : "hidden",
      transform: "translate3d(".concat(L[0], "px, ").concat(L[1], "px, ").concat(c, ")"),
      "--zoom": s,
      "--zoompx": "".concat(s, "px")
    };
    return h && (P["--moveable-line-padding"] = h), p && (P["--moveable-control-padding"] = p), C.createElement(
      u,
      V({ cspNonce: l, ref: Sn(this, "controlBox"), className: "".concat(xe("control-box", w === -1 ? "reverse" : "", k ? "dragging" : ""), " ").concat(A, " ").concat(i) }, j, { onClick: this._onPreventClick, style: P }),
      this.renderAbles(),
      this._renderLines()
    );
  }, t.prototype.componentDidMount = function() {
    this.isMoveableMounted = !0, this.isUnmounted = !1;
    var r = this.props, n = r.parentMoveable, o = r.container;
    this._checkUpdateRootContainer(), this._checkUpdateViewContainer(), this._updateTargets(), this._updateNativeEvents(), this._updateEvents(), this.updateCheckInput(), this._updateObserver(this.props), !o && !n && !this.state.isPersisted && (this.updateRect("", !1, !1), this.forceUpdate());
  }, t.prototype.componentDidUpdate = function(r) {
    this._checkUpdateRootContainer(), this._checkUpdateViewContainer(), this._updateNativeEvents(), this._updateTargets(), this._updateEvents(), this.updateCheckInput(), this._updateObserver(r);
  }, t.prototype.componentWillUnmount = function() {
    var r, n;
    this.isMoveableMounted = !1, this.isUnmounted = !0, this._emitter.off(), (r = this._reiszeObserver) === null || r === void 0 || r.disconnect(), (n = this._mutationObserver) === null || n === void 0 || n.disconnect();
    var o = this._viewContainer;
    o && this._changeAbleViewClassNames([]), Po(this, !1), Po(this, !0);
    var i = this.events;
    for (var a in i) {
      var s = i[a];
      s && s.destroy();
    }
  }, t.prototype.getTargets = function() {
    var r = this.props.target;
    return r ? [r] : [];
  }, t.prototype.getAble = function(r) {
    var n = this.props.ables || [];
    return zt(n, function(o) {
      return o.name === r;
    });
  }, t.prototype.getContainer = function() {
    var r = this.props, n = r.parentMoveable, o = r.wrapperMoveable, i = r.container;
    return i || o && o.getContainer() || n && n.getContainer() || this.controlBox.parentElement;
  }, t.prototype.getControlBoxElement = function() {
    return this.controlBox;
  }, t.prototype.getDragElement = function() {
    return this._dragTarget;
  }, t.prototype.isMoveableElement = function(r) {
    var n;
    return r && (((n = r.getAttribute) === null || n === void 0 ? void 0 : n.call(r, "class")) || "").indexOf($f) > -1;
  }, t.prototype.dragStart = function(r, n) {
    n === void 0 && (n = r.target);
    var o = this.targetGesto, i = this.controlGesto;
    return o && ah(this)({ inputEvent: r }, n) ? o.isFlag() || o.triggerDragStart(r) : i && this.isMoveableElement(n) && (i.isFlag() || i.triggerDragStart(r)), this;
  }, t.prototype.hitTest = function(r) {
    var n = this.state, o = n.target, i = n.pos1, a = n.pos2, s = n.pos3, l = n.pos4, c = n.targetClientRect;
    if (!o)
      return 0;
    var u;
    if (Sa(r)) {
      var d = r.getBoundingClientRect();
      u = {
        left: d.left,
        top: d.top,
        width: d.width,
        height: d.height
      };
    } else
      u = V({ width: 0, height: 0 }, r);
    var h = u.left, p = u.top, g = u.width, v = u.height, m = Ku([i, a, l, s], c), x = n3(m, [
      [h, p],
      [h + g, p],
      [h + g, p + v],
      [h, p + v]
    ]), y = Xi(m);
    return !x || !y ? 0 : Math.min(100, x / y * 100);
  }, t.prototype.isInside = function(r, n) {
    var o = this.state, i = o.target, a = o.pos1, s = o.pos2, l = o.pos3, c = o.pos4, u = o.targetClientRect;
    return i ? al([r, n], Ku([a, s, c, l], u)) : !1;
  }, t.prototype.updateRect = function(r, n, o) {
    o === void 0 && (o = !0);
    var i = this.props, a = !i.parentPosition && !i.wrapperMoveable;
    a && ri(!0);
    var s = i.parentMoveable, l = this.state, c = l.target || i.target, u = this.getContainer(), d = s ? s._rootContainer : this._rootContainer, h = pd(this.controlBox, c, u, u, d || u, this._getRequestStyles());
    if (!c && this._hasFirstTarget && i.persistData) {
      var p = Mv(i.persistData);
      for (var g in p)
        h[g] = p[g];
    }
    a && ri(), this.updateState(h, s ? !1 : o);
  }, t.prototype.isDragging = function(r) {
    var n, o, i = this.targetGesto, a = this.controlGesto;
    if (i?.isFlag()) {
      if (!r)
        return !0;
      var s = i.getEventData();
      return !!(!((n = s[r]) === null || n === void 0) && n.isEventStart);
    }
    if (a?.isFlag()) {
      if (!r)
        return !0;
      var s = a.getEventData();
      return !!(!((o = s[r]) === null || o === void 0) && o.isEventStart);
    }
    return !1;
  }, t.prototype.updateTarget = function(r) {
    this.updateRect(r, !0);
  }, t.prototype.getRect = function() {
    var r = this.state, n = ur(this.state), o = W(n, 4), i = o[0], a = o[1], s = o[2], l = o[3], c = sr(n), u = r.width, d = r.height, h = c.width, p = c.height, g = c.left, v = c.top, m = [r.left, r.top], x = Ge(m, r.origin), y = Ge(m, r.beforeOrigin), b = r.transformOrigin;
    return {
      width: h,
      height: p,
      left: g,
      top: v,
      pos1: i,
      pos2: a,
      pos3: s,
      pos4: l,
      offsetWidth: u,
      offsetHeight: d,
      beforeOrigin: y,
      origin: x,
      transformOrigin: b,
      rotation: this.getRotation()
    };
  }, t.prototype.getManager = function() {
    return this;
  }, t.prototype.stopDrag = function(r) {
    if (!r || r === "target") {
      var n = this.targetGesto;
      n?.isIdle() === !1 && dd(this, !1), n?.stop();
    }
    if (!r || r === "control") {
      var n = this.controlGesto;
      n?.isIdle() === !1 && dd(this, !0), n?.stop();
    }
  }, t.prototype.getRotation = function() {
    var r = this.state, n = r.pos1, o = r.pos2, i = r.direction;
    return sA(n, o, i);
  }, t.prototype.request = function(r, n, o) {
    n === void 0 && (n = {});
    var i = this, a = i.props, s = a.parentMoveable || a.wrapperMoveable || i, l = s.props.ables, c = a.groupable, u = zt(l, function(x) {
      return x.name === r;
    });
    if (this.isDragging() || !u || !u.request)
      return {
        request: function() {
          return this;
        },
        requestEnd: function() {
          return this;
        }
      };
    var d = u.request(i), h = o || n.isInstant, p = d.isControl ? "controlAbles" : "targetAbles", g = "".concat(c ? "Group" : "").concat(d.isControl ? "Control" : ""), v = le([], W(s[p]), !1), m = {
      request: function(x) {
        return ea(i, v, ["drag"], g, "", V(V({}, d.request(x)), { requestAble: r, isRequest: !0 }), h), m;
      },
      requestEnd: function() {
        return ea(i, v, ["drag"], g, "End", V(V({}, d.requestEnd()), { requestAble: r, isRequest: !0 }), h), m;
      }
    };
    return ea(i, v, ["drag"], g, "Start", V(V({}, d.requestStart(n)), { requestAble: r, isRequest: !0 }), h), h ? m.request(n).requestEnd() : m;
  }, t.prototype.getMoveables = function() {
    return [this];
  }, t.prototype.destroy = function() {
    this.componentWillUnmount();
  }, t.prototype.updateRenderPoses = function() {
    var r = this.getState(), n = this.props, o = n.padding, i = r.originalBeforeOrigin, a = r.transformOrigin, s = r.allMatrix, l = r.is3d, c = r.pos1, u = r.pos2, d = r.pos3, h = r.pos4, p = r.left, g = r.top, v = r.isPersisted, m = n.zoom || 1;
    if (!o && m <= 1) {
      r.renderPoses = [
        c,
        u,
        d,
        h
      ], r.renderLines = [
        [c, u],
        [u, h],
        [h, d],
        [d, c]
      ];
      return;
    }
    var x = ky(o || {}), y = x.left, b = x.top, w = x.bottom, _ = x.right, R = l ? 4 : 3, T = [];
    v ? T = a : this.controlBox && n.groupable ? T = i : T = Ge(i, [p, g]);
    var k = il(R, ao(T.map(function(P) {
      return -P;
    }), R), s, ao(a, R)), j = Zt(k, c, [-y, -b], R), A = Zt(k, u, [_, -b], R), $ = Zt(k, d, [-y, w], R), F = Zt(k, h, [_, w], R);
    r.renderPoses = [
      j,
      A,
      $,
      F
    ], r.renderLines = [
      [j, A],
      [A, F],
      [F, $],
      [$, j]
    ];
    {
      var L = m / 2;
      r.renderLines = [
        [
          Zt(k, c, [-y - L, -b], R),
          Zt(k, u, [_ + L, -b], R)
        ],
        [
          Zt(k, u, [_, -b - L], R),
          Zt(k, h, [_, w + L], R)
        ],
        [
          Zt(k, h, [_ + L, w], R),
          Zt(k, d, [-y - L, w], R)
        ],
        [
          Zt(k, d, [-y, w + L], R),
          Zt(k, c, [-y, -b - L], R)
        ]
      ];
    }
  }, t.prototype.checkUpdate = function() {
    this._isPropTargetChanged = !1;
    var r = this.props, n = r.target, o = r.container, i = r.parentMoveable, a = this.state, s = a.target, l = a.container;
    if (!(!s && !n)) {
      this.updateAbles();
      var c = !fd(s, n), u = c || !fd(l, o);
      if (u) {
        var d = o || this.controlBox;
        d && this.unsetAbles(), this.updateState({ target: n, container: o }), !i && d && this.updateRect("End", !1, !1), this._isPropTargetChanged = c;
      }
    }
  }, t.prototype.waitToChangeTarget = function() {
    return new Promise(function() {
    });
  }, t.prototype.triggerEvent = function(r, n) {
    var o = this.props;
    if (this._emitter.trigger(r, n), o.parentMoveable && n.isRequest && !n.isRequestChild)
      return o.parentMoveable.triggerEvent(r, n, !0);
    var i = o[r];
    return i && i(n);
  }, t.prototype.useCSS = function(r, n) {
    var o = this.props.customStyledMap, i = r + n;
    return o[i] || (o[i] = Ix(r, n)), o[i];
  }, t.prototype.getState = function() {
    var r, n = this.props;
    (n.target || !((r = n.targets) === null || r === void 0) && r.length) && (this._hasFirstTarget = !0);
    var o = this.controlBox, i = n.persistData, a = n.firstRenderState;
    if (a && !o)
      return a;
    if (!this._hasFirstTarget && i) {
      var s = Mv(i);
      if (s)
        return this.updateState(s, !1), this.state;
    }
    return this.state.isPersisted = !1, this.state;
  }, t.prototype.updateSelectors = function() {
  }, t.prototype.unsetAbles = function() {
    var r = this;
    this.targetAbles.forEach(function(n) {
      n.unset && n.unset(r);
    });
  }, t.prototype.updateAbles = function(r, n) {
    r === void 0 && (r = this.props.ables), n === void 0 && (n = "");
    var o = this.props, i = o.triggerAblesSimultaneously, a = this.getEnabledAbles(r), s = "drag".concat(n, "Start"), l = "pinch".concat(n, "Start"), c = "drag".concat(n, "ControlStart"), u = js(a, [s, l], i), d = js(a, [c], i);
    this.enabledAbles = a, this.targetAbles = u, this.controlAbles = d;
  }, t.prototype.updateState = function(r, n) {
    if (n) {
      if (this.isUnmounted)
        return;
      this.setState(r);
    } else {
      var o = this.state;
      for (var i in r)
        o[i] = r[i];
    }
  }, t.prototype.getEnabledAbles = function(r) {
    r === void 0 && (r = this.props.ables);
    var n = this.props;
    return r.filter(function(o) {
      return o && (o.always && n[o.name] !== !1 || n[o.name]);
    });
  }, t.prototype.renderAbles = function() {
    var r = this, n = this.props, o = n.triggerAblesSimultaneously, i = {
      createElement: Nn
    };
    return this.renderState = {}, nA(Ry(js(this.getEnabledAbles(), ["render"], o).map(function(a) {
      var s = a.render;
      return s(r, i) || [];
    })).filter(function(a) {
      return a;
    }), function(a) {
      var s = a.key;
      return s;
    }).map(function(a) {
      return a[0];
    });
  }, t.prototype.updateCheckInput = function() {
    this.targetGesto && (this.targetGesto.options.checkInput = this.props.checkInput);
  }, t.prototype._getRequestStyles = function() {
    var r = this.getEnabledAbles().reduce(function(n, o) {
      var i, a, s = (a = (i = o.requestStyle) === null || i === void 0 ? void 0 : i.call(o)) !== null && a !== void 0 ? a : [];
      return le(le([], W(n), !1), W(s), !1);
    }, le([], W(this.props.requestStyles || []), !1));
    return r;
  }, t.prototype._updateObserver = function(r) {
    this._updateResizeObserver(r), this._updateMutationObserver(r);
  }, t.prototype._updateEvents = function() {
    var r = this.targetAbles.length, n = this.controlAbles.length, o = this._dragTarget, i = !r && this.targetGesto || this._isTargetChanged(!0);
    i && (Po(this, !1), this.updateState({ gestos: {} })), n || Po(this, !0), o && r && !this.targetGesto && (this.targetGesto = $y(this, o, "")), !this.controlGesto && n && (this.controlGesto = Gy(this, "Control"));
  }, t.prototype._updateTargets = function() {
    var r = this.props;
    this._prevPropTarget = this._propTarget, this._prevDragTarget = this._dragTarget, this._prevOriginalDragTarget = this._originalDragTarget, this._prevDragArea = r.dragArea, this._propTarget = r.target, this._originalDragTarget = r.dragTarget || r.target, this._dragTarget = $r(this._originalDragTarget, !0);
  }, t.prototype._renderLines = function() {
    var r = this.props, n = r, o = n.zoom, i = n.hideDefaultLines, a = n.hideChildMoveableDefaultLines, s = n.parentMoveable;
    if (i || s && a)
      return [];
    var l = this.getState(), c = {
      createElement: Nn
    };
    return l.renderLines.map(function(u, d) {
      return Ca(c, "", u[0], u[1], o, "render-line-".concat(d));
    });
  }, t.prototype._isTargetChanged = function(r) {
    var n = this.props, o = n.dragTarget || n.target, i = this._prevOriginalDragTarget, a = this._prevDragArea, s = n.dragArea, l = !s && i !== o, c = (r || s) && a !== s;
    return l || c || this._prevPropTarget != this._propTarget;
  }, t.prototype._updateNativeEvents = function() {
    var r = this, n = this.props, o = n.dragArea ? this.areaElement : this.state.target, i = this.events, a = ar(i);
    if (this._isTargetChanged())
      for (var s in i) {
        var l = i[s];
        l && l.destroy(), i[s] = null;
      }
    if (o) {
      var c = this.enabledAbles;
      a.forEach(function(u) {
        var d = js(c, [u]), h = d.length > 0, p = i[u];
        if (!h) {
          p && (p.destroy(), i[u] = null);
          return;
        }
        p || (p = new IA(o, r, u), i[u] = p), p.setAbles(d);
      });
    }
  }, t.prototype._checkUpdateRootContainer = function() {
    var r = this.props.rootContainer;
    !this._rootContainer && r && (this._rootContainer = $r(r, !0));
  }, t.prototype._checkUpdateViewContainer = function() {
    var r = this.props.viewContainer;
    !this._viewContainer && r && (this._viewContainer = $r(r, !0));
    var n = this._viewContainer;
    n && this._changeAbleViewClassNames(le(le([], W(this._getAbleViewClassNames()), !1), [
      this.isDragging() ? pA : ""
    ], !1));
  }, t.prototype._changeAbleViewClassNames = function(r) {
    var n = this._viewContainer, o = Dy(r.filter(Boolean), function(c) {
      return c;
    }).map(function(c) {
      var u = W(c, 1), d = u[0];
      return d;
    }), i = this._viewClassNames, a = Lf(i, o), s = a.removed, l = a.added;
    s.forEach(function(c) {
      Ro(n, i[c]);
    }), l.forEach(function(c) {
      wa(n, o[c]);
    }), this._viewClassNames = o;
  }, t.prototype._getAbleViewClassNames = function() {
    var r = this;
    return (this.getEnabledAbles().map(function(n) {
      var o;
      return ((o = n.viewClassName) === null || o === void 0 ? void 0 : o.call(n, r)) || "";
    }).join(" ") + " ".concat(this._getAbleClassName("-view"))).split(/\s+/g);
  }, t.prototype._getAbleClassName = function(r) {
    var n = this;
    r === void 0 && (r = "");
    var o = this.getEnabledAbles(), i = this.targetGesto, a = this.controlGesto, s = i?.isFlag() ? i.getEventData() : {}, l = a?.isFlag() ? a.getEventData() : {};
    return o.map(function(c) {
      var u, d, h, p = c.name, g = ((u = c.className) === null || u === void 0 ? void 0 : u.call(c, n)) || "";
      return (!((d = s[p]) === null || d === void 0) && d.isEventStart || !((h = l[p]) === null || h === void 0) && h.isEventStart) && (g += " ".concat(xe("".concat(p).concat(r, "-dragging")))), g.trim();
    }).filter(Boolean).join(" ");
  }, t.prototype._updateResizeObserver = function(r) {
    var n, o = this.props, i = o.target, a = Ht(this.getControlBoxElement());
    if (!a.ResizeObserver || !i || !o.useResizeObserver) {
      (n = this._reiszeObserver) === null || n === void 0 || n.disconnect();
      return;
    }
    if (!(r.target === i && this._reiszeObserver)) {
      var s = new a.ResizeObserver(this.checkUpdateRect);
      s.observe(i, {
        box: "border-box"
      }), this._reiszeObserver = s;
    }
  }, t.prototype._updateMutationObserver = function(r) {
    var n = this, o, i = this.props, a = i.target, s = Ht(this.getControlBoxElement());
    if (!s.MutationObserver || !a || !i.useMutationObserver) {
      (o = this._mutationObserver) === null || o === void 0 || o.disconnect();
      return;
    }
    if (!(r.target === a && this._mutationObserver)) {
      var l = new s.MutationObserver(function(c) {
        var u, d;
        try {
          for (var h = x3(c), p = h.next(); !p.done; p = h.next()) {
            var g = p.value;
            g.type === "attributes" && g.attributeName === "style" && n.checkUpdateRect();
          }
        } catch (v) {
          u = { error: v };
        } finally {
          try {
            p && !p.done && (d = h.return) && d.call(h);
          } finally {
            if (u) throw u.error;
          }
        }
      });
      l.observe(a, {
        attributes: !0
      }), this._mutationObserver = l;
    }
  }, t.defaultProps = {
    dragTargetSelf: !1,
    target: null,
    dragTarget: null,
    container: null,
    rootContainer: null,
    origin: !0,
    parentMoveable: null,
    wrapperMoveable: null,
    isWrapperMounted: !1,
    parentPosition: null,
    warpSelf: !1,
    svgOrigin: "",
    dragContainer: null,
    useResizeObserver: !1,
    useMutationObserver: !1,
    preventDefault: !0,
    preventRightClick: !0,
    preventWheelClick: !0,
    linePadding: 0,
    controlPadding: 0,
    ables: [],
    pinchThreshold: 20,
    dragArea: !1,
    passDragArea: !1,
    transformOrigin: "",
    className: "",
    zoom: 1,
    triggerAblesSimultaneously: !1,
    padding: {},
    pinchOutside: !0,
    checkInput: !1,
    dragFocusedInput: !1,
    groupable: !1,
    hideDefaultLines: !1,
    cspNonce: "",
    translateZ: 0,
    cssStyled: null,
    customStyledMap: {},
    props: {},
    stopPropagation: !1,
    preventClickDefault: !1,
    preventClickEventOnDrag: !0,
    flushSync: my,
    firstRenderState: null,
    persistData: null,
    viewContainer: null,
    requestStyles: [],
    useAccuratePosition: !1
  }, t;
}(C.PureComponent), sh = {
  name: "groupable",
  props: [
    "defaultGroupRotate",
    "useDefaultGroupRotate",
    "defaultGroupOrigin",
    "groupable",
    "groupableProps",
    "targetGroups",
    "hideChildMoveableDefaultLines"
  ],
  events: [],
  render: function(e, t) {
    var r, n = e.props, o = n.targets || [], i = e.getState(), a = i.left, s = i.top, l = i.isPersisted, c = n.zoom || 1, u = e.renderGroupRects, d = ((r = n.persistData) === null || r === void 0 ? void 0 : r.children) || [];
    l ? o = d.map(function() {
      return null;
    }) : d = [];
    var h = Ao(e, "parentPosition", [a, s], function(g) {
      return g.join(",");
    }), p = Ao(e, "requestStyles", e.getRequestChildStyles(), function(g) {
      return g.join(",");
    });
    return e.moveables = e.moveables.slice(0, o.length), le(le([], W(o.map(function(g, v) {
      return t.createElement(ii, { key: "moveable" + v, ref: gx(e, "moveables", v), target: g, origin: !1, requestStyles: p, cssStyled: n.cssStyled, customStyledMap: n.customStyledMap, useResizeObserver: n.useResizeObserver, useMutationObserver: n.useMutationObserver, hideChildMoveableDefaultLines: n.hideChildMoveableDefaultLines, parentMoveable: e, parentPosition: [a, s], persistData: d[v], zoom: c });
    })), !1), W(Ry(u.map(function(g, v) {
      var m = g.pos1, x = g.pos2, y = g.pos3, b = g.pos4, w = [m, x, y, b];
      return [
        [0, 1],
        [1, 3],
        [3, 2],
        [2, 0]
      ].map(function(_, R) {
        var T = W(_, 2), k = T[0], j = T[1];
        return Ca(t, "", be(w[k], h), be(w[j], h), c, "group-rect-".concat(v, "-").concat(R));
      });
    }))), !1);
  }
}, BA = Ha("clickable", {
  props: [
    "clickable"
  ],
  events: [
    "click",
    "clickGroup"
  ],
  always: !0,
  dragRelation: "weak",
  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  dragStart: function() {
  },
  dragControlStart: function() {
  },
  dragGroupStart: function(e, t) {
    t.datas.inputTarget = t.inputEvent && t.inputEvent.target;
  },
  dragEnd: function(e, t) {
    var r = e.props.target, n = t.inputEvent, o = t.inputTarget, i = e.isMoveableElement(o), a = !i && e.controlBox.contains(o);
    if (!(!n || !o || t.isDrag || e.isMoveableElement(o) || a)) {
      var s = r.contains(o);
      fe(e, "onClick", Pe(e, t, {
        isDouble: t.isDouble,
        inputTarget: o,
        isTarget: r === o,
        moveableTarget: e.props.target,
        containsTarget: s
      }));
    }
  },
  dragGroupEnd: function(e, t) {
    var r = t.inputEvent, n = t.inputTarget;
    if (!(!r || !n || t.isDrag || e.isMoveableElement(n) || t.datas.inputTarget === n)) {
      var o = e.props.targets, i = o.indexOf(n), a = i > -1, s = !1;
      i === -1 && (i = Yr(o, function(l) {
        return l.contains(n);
      }), s = i > -1), fe(e, "onClickGroup", Pe(e, t, {
        isDouble: t.isDouble,
        targets: o,
        inputTarget: n,
        targetIndex: i,
        isTarget: a,
        containsTarget: s,
        moveableTarget: o[i]
      }));
    }
  },
  dragControlEnd: function(e, t) {
    this.dragEnd(e, t);
  },
  dragGroupControlEnd: function(e, t) {
    this.dragEnd(e, t);
  }
});
function Eo(e) {
  var t = e.originalDatas.draggable;
  return t || (e.originalDatas.draggable = {}, t = e.originalDatas.draggable), V(V({}, e), { datas: t });
}
var zA = Ha("edgeDraggable", {
  css: [
    `.edge.edgeDraggable.line {
cursor: move;
}`
  ],
  render: function(e, t) {
    var r = e.props, n = r.edgeDraggable;
    return n ? Zx(t, "edgeDraggable", n, e.getState().renderPoses, r.zoom) : [];
  },
  dragCondition: function(e, t) {
    var r, n = e.props, o = (r = t.inputEvent) === null || r === void 0 ? void 0 : r.target;
    return !n.edgeDraggable || !o ? !1 : !n.draggable && ut(o, xe("direction")) && ut(o, xe("edge")) && ut(o, xe("edgeDraggable"));
  },
  dragStart: function(e, t) {
    return Tt.dragStart(e, Eo(t));
  },
  drag: function(e, t) {
    return Tt.drag(e, Eo(t));
  },
  dragEnd: function(e, t) {
    return Tt.dragEnd(e, Eo(t));
  },
  dragGroupCondition: function(e, t) {
    var r, n = e.props, o = (r = t.inputEvent) === null || r === void 0 ? void 0 : r.target;
    return !n.edgeDraggable || !o ? !1 : !n.draggable && ut(o, xe("direction")) && ut(o, xe("line"));
  },
  dragGroupStart: function(e, t) {
    return Tt.dragGroupStart(e, Eo(t));
  },
  dragGroup: function(e, t) {
    return Tt.dragGroup(e, Eo(t));
  },
  dragGroupEnd: function(e, t) {
    return Tt.dragGroupEnd(e, Eo(t));
  },
  unset: function(e) {
    return Tt.unset(e);
  }
}), Hy = {
  name: "individualGroupable",
  props: [
    "individualGroupable",
    "individualGroupableProps"
  ],
  events: []
}, $A = [
  By,
  Oy,
  UP,
  cA,
  Tt,
  zA,
  sd,
  uA,
  fA,
  NP,
  mA,
  xA,
  vA,
  TA,
  MA,
  AA,
  sh,
  Hy,
  BA,
  Ay,
  zy
];
function Tv(e, t) {
  var r = W(e, 3), n = r[0], o = r[1], i = r[2];
  return (n * t[0] + o * t[1] + i) / Math.sqrt(n * n + o * o);
}
function As(e, t) {
  var r = W(e, 2), n = r[0], o = r[1];
  return -n * t[0] - o * t[1];
}
function jv(e, t) {
  return Math.max.apply(Math, le([], W(e.map(function(r) {
    var n = W(r, 4), o = n[0], i = n[1], a = n[2], s = n[3];
    return Math.max(o[t], i[t], a[t], s[t]);
  })), !1));
}
function kv(e, t) {
  return Math.min.apply(Math, le([], W(e.map(function(r) {
    var n = W(r, 4), o = n[0], i = n[1], a = n[2], s = n[3];
    return Math.min(o[t], i[t], a[t], s[t]);
  })), !1));
}
function GA(e, t) {
  var r, n, o, i = [0, 0], a = [0, 0], s = [0, 0], l = [0, 0], c = 0, u = 0;
  if (!e.length)
    return {
      pos1: i,
      pos2: a,
      pos3: s,
      pos4: l,
      minX: 0,
      minY: 0,
      maxX: 0,
      maxY: 0,
      width: c,
      height: u,
      rotation: t
    };
  var d = De(t, Pt);
  if (d % 90) {
    var h = d / 180 * Math.PI, p = Math.tan(h), g = -1 / p, v = [nd, tv], m = [[0, 0], [0, 0]], x = [nd, tv], y = [[0, 0], [0, 0]];
    e.forEach(function(Y) {
      Y.forEach(function(H) {
        var X = Tv([-p, 1, 0], H), Q = Tv([-g, 1, 0], H);
        v[0] > X && (m[0] = H, v[0] = X), v[1] < X && (m[1] = H, v[1] = X), x[0] > Q && (y[0] = H, x[0] = Q), x[1] < Q && (y[1] = H, x[1] = Q);
      });
    });
    var b = W(m, 2), w = b[0], _ = b[1], R = W(y, 2), T = R[0], k = R[1], j = [-p, 1, As([-p, 1], w)], A = [-p, 1, As([-p, 1], _)], $ = [-g, 1, As([-g, 1], T)], F = [-g, 1, As([-g, 1], k)];
    r = W([
      [j, $],
      [j, F],
      [A, $],
      [A, F]
    ].map(function(Y) {
      var H = W(Y, 2), X = H[0], Q = H[1];
      return Bf(X, Q)[0];
    }), 4), i = r[0], a = r[1], s = r[2], l = r[3], c = x[1] - x[0], u = v[1] - v[0];
  } else {
    var L = kv(e, 0), P = kv(e, 1), O = jv(e, 0), I = jv(e, 1);
    if (i = [L, P], a = [O, P], s = [L, I], l = [O, I], c = O - L, u = I - P, d % 180) {
      var E = [s, i, l, a];
      n = W(E, 4), i = n[0], a = n[1], s = n[2], l = n[3], c = I - P, u = O - L;
    }
  }
  if (d % 360 > 180) {
    var E = [l, s, a, i];
    o = W(E, 4), i = o[0], a = o[1], s = o[2], l = o[3];
  }
  var S = so([i, a, s, l]), M = S.minX, D = S.minY, N = S.maxX, z = S.maxY;
  return {
    pos1: i,
    pos2: a,
    pos3: s,
    pos4: l,
    width: c,
    height: u,
    minX: M,
    minY: D,
    maxX: N,
    maxY: z,
    rotation: t
  };
}
function Wy(e, t) {
  var r = t.map(function(n) {
    if (Ue(n)) {
      var o = Wy(e, n), i = o.length;
      return i > 1 ? o : i === 1 ? o[0] : null;
    } else {
      var a = zt(e, function(s) {
        var l = s.manager;
        return l.props.target === n;
      });
      return a ? (a.finded = !0, a.manager) : null;
    }
  }).filter(Boolean);
  return r.length === 1 && Ue(r[0]) ? r[0] : r;
}
var VA = /* @__PURE__ */ function(e) {
  Ua(t, e);
  function t() {
    var r = e !== null && e.apply(this, arguments) || this;
    return r.differ = new jx(), r.moveables = [], r.transformOrigin = "50% 50%", r.renderGroupRects = [], r._targetGroups = [], r._hasFirstTargets = !1, r;
  }
  return t.prototype.componentDidMount = function() {
    e.prototype.componentDidMount.call(this);
  }, t.prototype.checkUpdate = function() {
    this._isPropTargetChanged = !1, this.updateAbles();
  }, t.prototype.getTargets = function() {
    return this.props.targets;
  }, t.prototype.updateRect = function(r, n, o) {
    var i;
    o === void 0 && (o = !0);
    var a = this.state;
    if (!this.controlBox || a.isPersisted)
      return;
    ri(!0), this.moveables.forEach(function(K) {
      K.updateRect(r, !1, !1);
    });
    var s = this.props, l = this.moveables, c = a.target || s.target, u = l.map(function(K) {
      return { finded: !1, manager: K };
    }), d = this.props.targetGroups || [], h = Wy(u, d), p = s.useDefaultGroupRotate;
    h.push.apply(h, le([], W(u.filter(function(K) {
      var ne = K.finded;
      return !ne;
    }).map(function(K) {
      var ne = K.manager;
      return ne;
    })), !1));
    var g = [], v = !n || r !== "" && s.updateGroup, m = s.defaultGroupRotate || 0;
    if (!this._hasFirstTargets) {
      var x = (i = s.persistData) === null || i === void 0 ? void 0 : i.rotation;
      x != null && (m = x);
    }
    function y(K, ne, oe) {
      var te = K.map(function(de) {
        if (Ue(de)) {
          var ce = y(de, ne), pe = [ce.pos1, ce.pos2, ce.pos3, ce.pos4];
          return g.push(ce), { poses: pe, rotation: ce.rotation };
        } else
          return {
            poses: ur(de.state),
            rotation: de.getRotation()
          };
      }), G = te.map(function(de) {
        var ce = de.rotation;
        return ce;
      }), ee = 0, U = G[0], J = G.every(function(de) {
        return Math.abs(U - de) < 0.1;
      });
      v ? ee = !p && J ? U : m : ee = !p && !oe && J ? U : ne;
      var re = te.map(function(de) {
        var ce = de.poses;
        return ce;
      }), se = GA(re, ee);
      return se;
    }
    var b = y(h, this.rotation, !0);
    v && (this.rotation = b.rotation, this.transformOrigin = s.defaultGroupOrigin || "50% 50%", this.scale = [1, 1]), this._targetGroups = d, this.renderGroupRects = g;
    var w = this.transformOrigin, _ = this.rotation, R = this.scale, T = b.width, k = b.height, j = b.minX, A = b.minY, $ = lA([
      [0, 0],
      [T, 0],
      [0, k],
      [T, k]
    ], nh(w, T, k), this.rotation / 180 * Math.PI), F = so($.result), L = F.minX, P = F.minY, O = " rotate(".concat(_, "deg)") + " scale(".concat(jt(R[0]), ", ").concat(jt(R[1]), ")"), I = "translate(".concat(-L, "px, ").concat(-P, "px)").concat(O);
    this.controlBox.style.transform = "translate3d(".concat(j, "px, ").concat(A, "px, ").concat(this.props.translateZ || 0, ")"), c.style.cssText += "left:0px;top:0px;" + "transform-origin:".concat(w, ";") + "width:".concat(T, "px;height:").concat(k, "px;") + "transform: ".concat(I), a.width = T, a.height = k;
    var E = this.getContainer(), S = pd(this.controlBox, c, this.controlBox, this.getContainer(), this._rootContainer || E, []), M = [S.left, S.top], D = W(ur(S), 4), N = D[0], z = D[1], Y = D[2], H = D[3], X = so([N, z, Y, H]), Q = [X.minX, X.minY], q = jt(R[0] * R[1]);
    S.pos1 = be(N, Q), S.pos2 = be(z, Q), S.pos3 = be(Y, Q), S.pos4 = be(H, Q), S.left = j - S.left + Q[0], S.top = A - S.top + Q[1], S.origin = be(Ge(M, S.origin), Q), S.beforeOrigin = be(Ge(M, S.beforeOrigin), Q), S.originalBeforeOrigin = Ge(M, S.originalBeforeOrigin), S.transformOrigin = be(Ge(M, S.transformOrigin), Q), c.style.transform = "translate(".concat(-L - Q[0], "px, ").concat(-P - Q[1], "px)") + O, ri(), this.updateState(V(V({}, S), { posDelta: Q, direction: q, beforeDirection: q }), o);
  }, t.prototype.getRect = function() {
    return V(V({}, e.prototype.getRect.call(this)), { children: this.moveables.map(function(r) {
      return r.getRect();
    }) });
  }, t.prototype.triggerEvent = function(r, n, o) {
    if (o || r.indexOf("Group") > -1)
      return e.prototype.triggerEvent.call(this, r, n);
    this._emitter.trigger(r, n);
  }, t.prototype.getRequestChildStyles = function() {
    var r = this.getEnabledAbles().reduce(function(n, o) {
      var i, a, s = (a = (i = o.requestChildStyle) === null || i === void 0 ? void 0 : i.call(o)) !== null && a !== void 0 ? a : [];
      return le(le([], W(n), !1), W(s), !1);
    }, []);
    return r;
  }, t.prototype.getMoveables = function() {
    return le([], W(this.moveables), !1);
  }, t.prototype.updateAbles = function() {
    e.prototype.updateAbles.call(this, le(le([], W(this.props.ables), !1), [sh], !1), "Group");
  }, t.prototype._updateTargets = function() {
    e.prototype._updateTargets.call(this), this._originalDragTarget = this.props.dragTarget || this.areaElement, this._dragTarget = $r(this._originalDragTarget, !0);
  }, t.prototype._updateEvents = function() {
    var r = this.state, n = this.props, o = this._prevDragTarget, i = n.dragTarget || this.areaElement, a = n.targets, s = this.differ.update(a), l = s.added, c = s.changed, u = s.removed, d = l.length || u.length;
    (d || this._prevOriginalDragTarget !== this._originalDragTarget) && (Po(this, !1), Po(this, !0), this.updateState({ gestos: {} })), o !== i && (r.target = null), r.target || (r.target = this.areaElement, this.controlBox.style.display = "block"), r.target && (this.targetGesto || (this.targetGesto = $y(this, this._dragTarget, "Group")), this.controlGesto || (this.controlGesto = Gy(this, "GroupControl")));
    var h = !fd(r.container, n.container);
    h && (r.container = n.container), (h || d || this.transformOrigin !== (n.defaultGroupOrigin || "50% 50%") || c.length || a.length && !jy(this._targetGroups, n.targetGroups || [])) && (this.updateRect(), this._hasFirstTargets = !0), this._isPropTargetChanged = !!d;
  }, t.prototype._updateObserver = function() {
  }, t.defaultProps = V(V({}, ii.defaultProps), { transformOrigin: ["50%", "50%"], groupable: !0, dragArea: !0, keepRatio: !0, targets: [], defaultGroupRotate: 0, defaultGroupOrigin: "50% 50%" }), t;
}(ii), UA = /* @__PURE__ */ function(e) {
  Ua(t, e);
  function t() {
    var r = e !== null && e.apply(this, arguments) || this;
    return r.moveables = [], r;
  }
  return t.prototype.render = function() {
    var r = this, n, o = this.props, i = o.cspNonce, a = o.cssStyled, s = o.persistData, l = o.targets || [], c = l.length, u = this.isUnmounted || !c, d = (n = s?.children) !== null && n !== void 0 ? n : [];
    return u && !c && d.length ? l = d.map(function() {
      return null;
    }) : u || (d = []), C.createElement(a, { cspNonce: i, ref: Sn(this, "controlBox"), className: xe("control-box") }, l.map(function(h, p) {
      var g, v, m = (v = (g = o.individualGroupableProps) === null || g === void 0 ? void 0 : g.call(o, h, p)) !== null && v !== void 0 ? v : {};
      return C.createElement(ii, V({ key: "moveable" + p, ref: gx(r, "moveables", p) }, o, m, { target: h, wrapperMoveable: r, isWrapperMounted: r.isMoveableMounted, persistData: d[p] }));
    }));
  }, t.prototype.componentDidMount = function() {
  }, t.prototype.componentDidUpdate = function() {
  }, t.prototype.getTargets = function() {
    return this.props.targets;
  }, t.prototype.updateRect = function(r, n, o) {
    o === void 0 && (o = !0), ri(!0), this.moveables.forEach(function(i) {
      i.updateRect(r, n, o);
    }), ri();
  }, t.prototype.getRect = function() {
    return V(V({}, e.prototype.getRect.call(this)), { children: this.moveables.map(function(r) {
      return r.getRect();
    }) });
  }, t.prototype.request = function(r, n, o) {
    n === void 0 && (n = {});
    var i = this.moveables.map(function(l) {
      return l.request(r, V(V({}, n), { isInstant: !1 }), !1);
    }), a = o || n.isInstant, s = {
      request: function(l) {
        return i.forEach(function(c) {
          return c.request(l);
        }), this;
      },
      requestEnd: function() {
        return i.forEach(function(l) {
          return l.requestEnd();
        }), this;
      }
    };
    return a ? s.request(n).requestEnd() : s;
  }, t.prototype.dragStart = function(r, n) {
    n === void 0 && (n = r.target);
    var o = n, i = zt(this.moveables, function(a) {
      var s = a.getTargets()[0], l = a.getControlBoxElement(), c = a.getDragElement();
      return !s || !c ? !1 : c === o || c.contains(o) || c !== s && s === o || s.contains(o) || l === o || l.contains(o);
    });
    return i && i.dragStart(r, n), this;
  }, t.prototype.hitTest = function() {
    return 0;
  }, t.prototype.isInside = function() {
    return !1;
  }, t.prototype.isDragging = function() {
    return !1;
  }, t.prototype.getDragElement = function() {
    return null;
  }, t.prototype.getMoveables = function() {
    return le([], W(this.moveables), !1);
  }, t.prototype.updateRenderPoses = function() {
  }, t.prototype.checkUpdate = function() {
  }, t.prototype.triggerEvent = function() {
  }, t.prototype.updateAbles = function() {
  }, t.prototype._updateEvents = function() {
  }, t.prototype._updateObserver = function() {
  }, t;
}(ii);
function Yy(e, t) {
  var r = [];
  return e.forEach(function(n) {
    if (n) {
      if (rt(n)) {
        t[n] && r.push.apply(r, le([], W(t[n]), !1));
        return;
      }
      Ue(n) ? r.push.apply(r, le([], W(Yy(n, t)), !1)) : r.push(n);
    }
  }), r;
}
function qy(e, t) {
  var r = [];
  return e.forEach(function(n) {
    if (n) {
      if (rt(n)) {
        t[n] && r.push.apply(r, le([], W(t[n]), !1));
        return;
      }
      Ue(n) ? r.push(qy(n, t)) : r.push(n);
    }
  }), r;
}
function Xy(e, t) {
  return e.length !== t.length || e.some(function(r, n) {
    var o = t[n];
    return !r && !o ? !1 : r != o ? Ue(r) && Ue(o) ? Xy(r, o) : !0 : !1;
  });
}
var HA = /* @__PURE__ */ function(e) {
  Ua(t, e);
  function t() {
    var r = e !== null && e.apply(this, arguments) || this;
    return r.refTargets = [], r.selectorMap = {}, r._differ = new jx(), r._elementTargets = [], r._tmpRefTargets = [], r._tmpSelectorMap = {}, r._onChangeTargets = null, r;
  }
  return t.makeStyled = function() {
    var r = {}, n = this.getTotalAbles();
    n.forEach(function(i) {
      var a = i.css;
      a && a.forEach(function(s) {
        r[s] = !0;
      });
    });
    var o = ar(r).join(`
`);
    this.defaultStyled = Ix("div", gk($f, M3 + o));
  }, t.getTotalAbles = function() {
    return le([Oy, sh, Hy, Ay], W(this.defaultAbles), !1);
  }, t.prototype.render = function() {
    var r, n = this.constructor;
    n.defaultStyled || n.makeStyled();
    var o = this.props, i = o.ables, a = o.props, s = g3(o, ["ables", "props"]), l = W(this._updateRefs(!0), 2), c = l[0], u = l[1], d = Yy(c, u), h = d.length > 1, p = n.getTotalAbles(), g = le(le([], W(p), !1), W(i || []), !1), v = V(V(V({}, s), a || {}), { ables: g, cssStyled: n.defaultStyled, customStyledMap: n.customStyledMap });
    this._elementTargets = d;
    var m = null, x = this.moveable, y = s.persistData;
    if (y?.children && (h = !0), s.individualGroupable)
      return C.createElement(UA, V({ key: "individual-group", ref: Sn(this, "moveable") }, v, { target: null, targets: d }));
    if (h) {
      var b = qy(c, u);
      if (x && !x.props.groupable && !x.props.individualGroupable) {
        var w = x.props.target;
        w && d.indexOf(w) > -1 && (m = V({}, x.state));
      }
      return C.createElement(VA, V({ key: "group", ref: Sn(this, "moveable") }, v, (r = s.groupableProps) !== null && r !== void 0 ? r : {}, { target: null, targets: d, targetGroups: b, firstRenderState: m }));
    } else {
      var _ = d[0];
      if (x && (x.props.groupable || x.props.individualGroupable)) {
        var R = x.moveables || [], T = zt(R, function(k) {
          return k.props.target === _;
        });
        T && (m = V({}, T.state));
      }
      return C.createElement(ii, V({ key: "single", ref: Sn(this, "moveable") }, v, { target: _, firstRenderState: m }));
    }
  }, t.prototype.componentDidMount = function() {
    this._checkChangeTargets();
  }, t.prototype.componentDidUpdate = function() {
    this._checkChangeTargets();
  }, t.prototype.componentWillUnmount = function() {
    this.selectorMap = {}, this.refTargets = [];
  }, t.prototype.getTargets = function() {
    var r, n;
    return (n = (r = this.moveable) === null || r === void 0 ? void 0 : r.getTargets()) !== null && n !== void 0 ? n : [];
  }, t.prototype.updateSelectors = function() {
    this.selectorMap = {}, this._updateRefs(), this.forceUpdate();
  }, t.prototype.waitToChangeTarget = function() {
    var r = this, n;
    return this._onChangeTargets = function() {
      r._onChangeTargets = null, n();
    }, new Promise(function(o) {
      n = o;
    });
  }, t.prototype.waitToChangeTargets = function() {
    return this.waitToChangeTarget();
  }, t.prototype.getManager = function() {
    return this.moveable;
  }, t.prototype.getMoveables = function() {
    return this.moveable.getMoveables();
  }, t.prototype.getDragElement = function() {
    return this.moveable.getDragElement();
  }, t.prototype._updateRefs = function(r) {
    var n = this.refTargets, o = rh(this.props.target || this.props.targets), i = typeof document < "u", a = Xy(n, o), s = this.selectorMap, l = {};
    return this.refTargets.forEach(function c(u) {
      if (rt(u)) {
        var d = s[u];
        d ? l[u] = s[u] : i && (a = !0, l[u] = [].slice.call(document.querySelectorAll(u)));
      } else Ue(u) && u.forEach(c);
    }), this._tmpRefTargets = o, this._tmpSelectorMap = l, [
      o,
      l,
      !r && a
    ];
  }, t.prototype._checkChangeTargets = function() {
    var r, n, o;
    this.refTargets = this._tmpRefTargets, this.selectorMap = this._tmpSelectorMap;
    var i = this._differ.update(this._elementTargets), a = i.added, s = i.removed, l = a.length || s.length;
    l && ((n = (r = this.props).onChangeTargets) === null || n === void 0 || n.call(r, {
      moveable: this.moveable,
      targets: this._elementTargets
    }), (o = this._onChangeTargets) === null || o === void 0 || o.call(this));
    var c = W(this._updateRefs(), 3), u = c[0], d = c[1], h = c[2];
    this.refTargets = u, this.selectorMap = d, h && this.forceUpdate();
  }, t.defaultAbles = [], t.customStyledMap = {}, t.defaultStyled = null, m3([
    mx(k3)
  ], t.prototype, "moveable", void 0), t;
}(C.PureComponent), Pv = /* @__PURE__ */ function(e) {
  Ua(t, e);
  function t() {
    return e !== null && e.apply(this, arguments) || this;
  }
  return t.defaultAbles = $A, t;
}(HA), vd = function(e, t) {
  return vd = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var o in n) Object.prototype.hasOwnProperty.call(n, o) && (r[o] = n[o]);
  }, vd(e, t);
};
function WA(e, t) {
  if (typeof t != "function" && t !== null) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
  vd(e, t);
  function r() {
    this.constructor = e;
  }
  e.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
function YA(e, t) {
  return t = {
    exports: {}
  }, e(t, t.exports), t.exports;
}
var qa = YA(function(e, t) {
  function r(l) {
    if (l && typeof l == "object") {
      var c = l.which || l.keyCode || l.charCode;
      c && (l = c);
    }
    if (typeof l == "number") return a[l];
    var u = String(l), d = n[u.toLowerCase()];
    if (d) return d;
    var d = o[u.toLowerCase()];
    if (d) return d;
    if (u.length === 1) return u.charCodeAt(0);
  }
  r.isEventKey = function(c, u) {
    if (c && typeof c == "object") {
      var d = c.which || c.keyCode || c.charCode;
      if (d == null)
        return !1;
      if (typeof u == "string") {
        var h = n[u.toLowerCase()];
        if (h)
          return h === d;
        var h = o[u.toLowerCase()];
        if (h)
          return h === d;
      } else if (typeof u == "number")
        return u === d;
      return !1;
    }
  }, t = e.exports = r;
  var n = t.code = t.codes = {
    backspace: 8,
    tab: 9,
    enter: 13,
    shift: 16,
    ctrl: 17,
    alt: 18,
    "pause/break": 19,
    "caps lock": 20,
    esc: 27,
    space: 32,
    "page up": 33,
    "page down": 34,
    end: 35,
    home: 36,
    left: 37,
    up: 38,
    right: 39,
    down: 40,
    insert: 45,
    delete: 46,
    command: 91,
    "left command": 91,
    "right command": 93,
    "numpad *": 106,
    "numpad +": 107,
    "numpad -": 109,
    "numpad .": 110,
    "numpad /": 111,
    "num lock": 144,
    "scroll lock": 145,
    "my computer": 182,
    "my calculator": 183,
    ";": 186,
    "=": 187,
    ",": 188,
    "-": 189,
    ".": 190,
    "/": 191,
    "`": 192,
    "[": 219,
    "\\": 220,
    "]": 221,
    "'": 222
  }, o = t.aliases = {
    windows: 91,
    "⇧": 16,
    "⌥": 18,
    "⌃": 17,
    "⌘": 91,
    ctl: 17,
    control: 17,
    option: 18,
    pause: 19,
    break: 19,
    caps: 20,
    return: 13,
    escape: 27,
    spc: 32,
    spacebar: 32,
    pgup: 33,
    pgdn: 34,
    ins: 45,
    del: 46,
    cmd: 91
  };
  /*!
   * Programatically add the following
   */
  for (i = 97; i < 123; i++) n[String.fromCharCode(i)] = i - 32;
  for (var i = 48; i < 58; i++) n[i - 48] = i;
  for (i = 1; i < 13; i++) n["f" + i] = i + 111;
  for (i = 0; i < 10; i++) n["numpad " + i] = i + 96;
  var a = t.names = t.title = {};
  for (i in n) a[n[i]] = i;
  for (var s in o)
    n[s] = o[s];
});
qa.code;
qa.codes;
qa.aliases;
var qA = qa.names;
qa.title;
var Av = {
  "+": "plus",
  "left command": "meta",
  "right command": "meta"
}, Ov = {
  shift: 1,
  ctrl: 2,
  alt: 3,
  meta: 4
};
function Ky(e, t) {
  var r = (qA[e] || t || "").toLowerCase();
  for (var n in Av)
    r = r.replace(n, Av[n]);
  return r.replace(/\s/g, "");
}
function Zy(e, t) {
  t === void 0 && (t = Ky(e.keyCode, e.key));
  var r = XA(e);
  return r.indexOf(t) === -1 && r.push(t), r.filter(Boolean);
}
function XA(e) {
  var t = [e.shiftKey && "shift", e.ctrlKey && "ctrl", e.altKey && "alt", e.metaKey && "meta"];
  return t.filter(Boolean);
}
function Iv(e) {
  var t = e.slice();
  return t.sort(function(r, n) {
    var o = Ov[r] || 5, i = Ov[n] || 5;
    return o - i;
  }), t;
}
var Fv, KA = /* @__PURE__ */ function(e) {
  WA(t, e);
  function t(n) {
    n === void 0 && (n = window);
    var o = e.call(this) || this;
    return o.container = n, o.ctrlKey = !1, o.altKey = !1, o.shiftKey = !1, o.metaKey = !1, o.clear = function() {
      return o.ctrlKey = !1, o.altKey = !1, o.shiftKey = !1, o.metaKey = !1, o;
    }, o.keydownEvent = function(i) {
      o.triggerEvent("keydown", i);
    }, o.keyupEvent = function(i) {
      o.triggerEvent("keyup", i);
    }, o.blur = function() {
      o.clear(), o.trigger("blur");
    }, tt(n, "blur", o.blur), tt(n, "keydown", o.keydownEvent), tt(n, "keyup", o.keyupEvent), o;
  }
  var r = t.prototype;
  return Object.defineProperty(t, "global", {
    /**
     */
    get: function() {
      return Fv || (Fv = new t());
    },
    enumerable: !1,
    configurable: !0
  }), t.setGlobal = function() {
    return this.global;
  }, r.destroy = function() {
    var n = this.container;
    this.clear(), this.off(), Qe(n, "blur", this.blur), Qe(n, "keydown", this.keydownEvent), Qe(n, "keyup", this.keyupEvent);
  }, r.keydown = function(n, o) {
    return this.addEvent("keydown", n, o);
  }, r.offKeydown = function(n, o) {
    return this.removeEvent("keydown", n, o);
  }, r.offKeyup = function(n, o) {
    return this.removeEvent("keyup", n, o);
  }, r.keyup = function(n, o) {
    return this.addEvent("keyup", n, o);
  }, r.addEvent = function(n, o, i) {
    return Ue(o) ? this.on("".concat(n, ".").concat(Iv(o).join(".")), i) : rt(o) ? this.on("".concat(n, ".").concat(o), i) : this.on(n, o), this;
  }, r.removeEvent = function(n, o, i) {
    return Ue(o) ? this.off("".concat(n, ".").concat(Iv(o).join(".")), i) : rt(o) ? this.off("".concat(n, ".").concat(o), i) : this.off(n, o), this;
  }, r.triggerEvent = function(n, o) {
    this.ctrlKey = o.ctrlKey, this.shiftKey = o.shiftKey, this.altKey = o.altKey, this.metaKey = o.metaKey;
    var i = Ky(o.keyCode, o.key), a = i === "ctrl" || i === "shift" || i === "meta" || i === "alt", s = {
      key: i,
      isToggle: a,
      inputEvent: o,
      keyCode: o.keyCode,
      ctrlKey: o.ctrlKey,
      altKey: o.altKey,
      shiftKey: o.shiftKey,
      metaKey: o.metaKey
    };
    this.trigger(n, s), this.trigger("".concat(n, ".").concat(i), s);
    var l = Zy(o, i);
    l.length > 1 && this.trigger("".concat(n, ".").concat(l.join(".")), s);
  }, t;
}(In), gd = function(e, t) {
  return gd = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var o in n) Object.prototype.hasOwnProperty.call(n, o) && (r[o] = n[o]);
  }, gd(e, t);
};
function Qy(e, t) {
  if (typeof t != "function" && t !== null) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
  gd(e, t);
  function r() {
    this.constructor = e;
  }
  e.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var pt = function() {
  return pt = Object.assign || function(t) {
    for (var r, n = 1, o = arguments.length; n < o; n++) {
      r = arguments[n];
      for (var i in r) Object.prototype.hasOwnProperty.call(r, i) && (t[i] = r[i]);
    }
    return t;
  }, pt.apply(this, arguments);
};
function ZA(e, t) {
  var r = {};
  for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);
  if (e != null && typeof Object.getOwnPropertySymbols == "function") for (var o = 0, n = Object.getOwnPropertySymbols(e); o < n.length; o++)
    t.indexOf(n[o]) < 0 && Object.prototype.propertyIsEnumerable.call(e, n[o]) && (r[n[o]] = e[n[o]]);
  return r;
}
function QA(e, t, r, n) {
  var o = arguments.length, i = o < 3 ? t : n === null ? n = Object.getOwnPropertyDescriptor(t, r) : n, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") i = Reflect.decorate(e, t, r, n);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (i = (o < 3 ? a(i) : o > 3 ? a(t, r, i) : a(t, r)) || i);
  return o > 3 && i && Object.defineProperty(t, r, i), i;
}
function ta(e, t, r) {
  for (var n = 0, o = t.length, i; n < o; n++)
    (i || !(n in t)) && (i || (i = Array.prototype.slice.call(t, 0, n)), i[n] = t[n]);
  return e.concat(i || Array.prototype.slice.call(t));
}
function JA(e) {
  if ("touches" in e) {
    var t = e.touches[0] || e.changedTouches[0];
    return {
      clientX: t.clientX,
      clientY: t.clientY
    };
  } else
    return {
      clientX: e.clientX,
      clientY: e.clientY
    };
}
function eO(e) {
  if (typeof Map > "u")
    return e.filter(function(r, n) {
      return e.indexOf(r) === n;
    });
  var t = /* @__PURE__ */ new Map();
  return e.filter(function(r) {
    return t.has(r) ? !1 : (t.set(r, !0), !0);
  });
}
function tO(e, t, r) {
  var n = xr(e);
  return n.elementFromPoint && n.elementFromPoint(t, r) || null;
}
function Jy(e, t, r) {
  var n = e.tag, o = e.children, i = e.attributes, a = e.className, s = e.style, l = t || xr(r).createElement(n);
  for (var c in i)
    l.setAttribute(c, i[c]);
  var u = l.children;
  if (o.forEach(function(h, p) {
    Jy(h, u[p], l);
  }), a && a.split(/\s+/g).forEach(function(h) {
    h && !ut(l, h) && wa(l, h);
  }), s) {
    var d = l.style;
    for (var c in s)
      d[c] = s[c];
  }
  return !t && r && r.appendChild(l), l;
}
function rO(e, t) {
  for (var r = [], n = 2; n < arguments.length; n++)
    r[n - 2] = arguments[n];
  var o = t || {}, i = o.className, a = i === void 0 ? "" : i, s = o.style, l = s === void 0 ? {} : s, c = ZA(o, ["className", "style"]);
  return {
    tag: e,
    className: a,
    style: l,
    attributes: c,
    children: r
  };
}
function cu(e, t, r) {
  e !== t && r(e, t);
}
function Lv(e, t, r) {
  var n;
  r === void 0 && (r = e.data.boundArea);
  var o = e.distX, i = o === void 0 ? 0 : o, a = e.distY, s = a === void 0 ? 0 : a, l = e.data, c = l.startX, u = l.startY;
  if (t > 0) {
    var d = Math.sqrt((i * i + s * s) / (1 + t * t)), h = t * d;
    i = (i >= 0 ? 1 : -1) * h, s = (s >= 0 ? 1 : -1) * d;
  }
  var p = Math.abs(i), g = Math.abs(s), v = i < 0 ? c - r.left : r.right - c, m = s < 0 ? u - r.top : r.bottom - u;
  n = Pf([p, g], [0, 0], [v, m], !!t), p = n[0], g = n[1], i = (i >= 0 ? 1 : -1) * p, s = (s >= 0 ? 1 : -1) * g;
  var x = Math.min(0, i), y = Math.min(0, s), b = c + x, w = u + y;
  return {
    left: b,
    top: w,
    right: b + p,
    bottom: w + g,
    width: p,
    height: g
  };
}
function Os(e) {
  var t = e.getBoundingClientRect(), r = t.left, n = t.top, o = t.width, i = t.height;
  return {
    pos1: [r, n],
    pos2: [r + o, n],
    pos3: [r, n + i],
    pos4: [r + o, n + i]
  };
}
function Bv(e, t, r) {
  var n = Mo(e, t), o = n.list, i = n.prevList, a = n.added, s = n.removed, l = n.maintained;
  return ta(ta(ta([], a.map(function(c) {
    return o[c];
  }), !0), s.map(function(c) {
    return i[c];
  }), !0), r ? l.map(function(c) {
    var u = c[1];
    return o[u];
  }) : []);
}
function zv(e) {
  for (var t = 0, r = e.length, n = 1; n < r; ++n)
    t = Math.max(zr(e[n], e[n - 1]), t);
  return t;
}
var eb = ic(`
:host {
    position: fixed;
    display: none;
    border: 1px solid #4af;
    background: rgba(68, 170, 255, 0.5);
    pointer-events: none;
    will-change: transform;
    z-index: 100;
}
`), md = "selecto-selection ".concat(eb.className), lh = ["className", "boundContainer", "selectableTargets", "selectByClick", "selectFromInside", "continueSelect", "continueSelectWithoutDeselect", "toggleContinueSelect", "toggleContinueSelectWithoutDeselect", "keyContainer", "hitRate", "scrollOptions", "checkInput", "preventDefault", "ratio", "getElementRect", "preventDragFromInside", "rootContainer", "dragCondition", "clickBySelectEnd", "checkOverflow", "innerScrollOptions"], nO = ta([
  // ignore target, container,
  "dragContainer",
  "cspNonce",
  "preventClickEventOnDrag",
  "preventClickEventOnDragStart",
  "preventRightClick"
], lh), tb = ["dragStart", "drag", "dragEnd", "selectStart", "select", "selectEnd", "keydown", "keyup", "scroll", "innerScroll"], oO = ["clickTarget", "getSelectableElements", "setSelectedTargets", "getElementPoints", "getSelectedTargets", "findSelectableTargets", "triggerDragStart", "checkScroll", "selectTargetsByPoints", "setSelectedTargetsByPoints"], iO = /* @__PURE__ */ function(e) {
  Qy(t, e);
  function t(n) {
    n === void 0 && (n = {});
    var o = e.call(this) || this;
    o.selectedTargets = [], o.dragScroll = new kx(), o._onDragStart = function(s, l) {
      var c = s.data, u = s.clientX, d = s.clientY, h = s.inputEvent, p = o.options, g = p.selectFromInside, v = p.selectByClick, m = p.rootContainer, x = p.boundContainer, y = p.preventDragFromInside, b = y === void 0 ? !0 : y, w = p.clickBySelectEnd, _ = p.dragCondition;
      if (_ && !_(s)) {
        s.stop();
        return;
      }
      c.data = {};
      var R = Ht(o.container);
      c.innerWidth = R.innerWidth, c.innerHeight = R.innerHeight, o.findSelectableTargets(c), c.startSelectedTargets = o.selectedTargets, c.scaleMatrix = Ff(), c.containerX = 0, c.containerY = 0;
      var T = o.container, k = {
        left: -1 / 0,
        top: -1 / 0,
        right: 1 / 0,
        bottom: 1 / 0
      };
      if (m) {
        var j = o.container.getBoundingClientRect();
        c.containerX = j.left, c.containerY = j.top, c.scaleMatrix = $k(o.container, m);
      }
      if (x) {
        var A = it(x) && "element" in x ? pt({
          left: !0,
          top: !0,
          bottom: !0,
          right: !0
        }, x) : {
          element: x,
          left: !0,
          top: !0,
          bottom: !0,
          right: !0
        }, $ = A.element, F = void 0;
        if ($) {
          rt($) ? F = xr(T).querySelector($) : $ === !0 ? F = o.container : F = $;
          var L = F.getBoundingClientRect();
          A.left && (k.left = L.left), A.top && (k.top = L.top), A.right && (k.right = L.right), A.bottom && (k.bottom = L.bottom);
        }
      }
      c.boundArea = k;
      var P = {
        left: u,
        top: d,
        right: u,
        bottom: d,
        width: 0,
        height: 0
      }, O = [], I = v && !w, E = !1;
      if (!g || I) {
        var S = o._findElement(
          l || h.target,
          // elementFromPoint(clientX, clientY),
          c.selectableTargets
        );
        E = !!S, I && (O = S ? [S] : []);
      }
      var M = !g && E;
      if (M && !v)
        return s.stop(), !1;
      var D = h.type, N = D === "mousedown" || D === "touchstart", z = !s.isClick && N ? o.emit("dragStart", pt(pt({}, s), {
        data: c.data
      })) : !0;
      if (!z)
        return s.stop(), !1;
      if (o.continueSelect ? (O = Bv(o.selectedTargets, O, o.continueSelectWithoutDeselect), c.startPassedTargets = o.selectedTargets) : c.startPassedTargets = [], o._select(O, P, s, !0, M && v && !w && b), c.startX = u, c.startY = d, c.selectFlag = !1, c.preventDragFromInside = !1, h.target) {
        var Y = Hs(c.scaleMatrix, [u - c.containerX, d - c.containerY]);
        o.target.style.cssText += "position: ".concat(m ? "absolute" : "fixed", ";") + "left:0px;top:0px;" + "transform: translate(".concat(Y[0], "px, ").concat(Y[1], "px)");
      }
      if (M && v && !w)
        h.preventDefault(), b && (o._selectEnd(c.startSelectedTargets, c.startPassedTargets, P, s, !0), c.preventDragFromInside = !0);
      else {
        c.selectFlag = !0;
        var H = o.options, X = H.scrollOptions, Q = H.innerScrollOptions, q = !1;
        if (Q) {
          for (var K = s.inputEvent, ne = K.target, oe = null, te = ne; te && te !== xr(T).body; ) {
            var G = getComputedStyle(te).overflow !== "visible";
            if (G) {
              oe = te;
              break;
            }
            te = te.parentElement;
          }
          oe && (c.innerScrollOptions = pt({
            container: oe,
            checkScrollEvent: !0
          }, Q === !0 ? {} : Q), o.dragScroll.dragStart(s, c.innerScrollOptions), q = !0);
        }
        !q && X && X.container && o.dragScroll.dragStart(s, X), M && v && w && (c.selectFlag = !1, s.preventDrag());
      }
      return !0;
    }, o._onDrag = function(s) {
      if (s.data.selectFlag) {
        var l = o.scrollOptions, c = s.data.innerScrollOptions, u = c || l?.container;
        if (u && !s.isScroll && o.dragScroll.drag(s, c || l))
          return;
      }
      o._checkSelected(s);
    }, o._onDragEnd = function(s) {
      var l = s.data, c = s.inputEvent, u = Lv(s, o.options.ratio), d = l.selectFlag, h = o.container;
      if (c && o.emit("dragEnd", pt(pt({
        isDouble: !!s.isDouble,
        isClick: !!s.isClick,
        isDrag: !1,
        isSelect: d
      }, s), {
        data: l.data,
        rect: u
      })), o.target.style.cssText += "display: none;", d)
        l.selectFlag = !1, o.dragScroll.dragEnd();
      else if (o.selectByClick && o.clickBySelectEnd) {
        var p = o._findElement(c?.target || tO(h, s.clientX, s.clientY), l.selectableTargets);
        o._select(p ? [p] : [], u, s);
      }
      l.preventDragFromInside || o._selectEnd(l.startSelectedTargets, l.startPassedTargets, u, s);
    }, o._onKeyDown = function(s) {
      var l = o.options, c = !1;
      if (!o._keydownContinueSelect) {
        var u = o._sameCombiKey(s, l.toggleContinueSelect);
        o._keydownContinueSelect = u, c || (c = u);
      }
      if (!o._keydownContinueSelectWithoutDeselection) {
        var u = o._sameCombiKey(s, l.toggleContinueSelectWithoutDeselect);
        o._keydownContinueSelectWithoutDeselection = u, c || (c = u);
      }
      c && o.emit("keydown", {
        keydownContinueSelect: o._keydownContinueSelect,
        keydownContinueSelectWithoutDeselection: o._keydownContinueSelectWithoutDeselection
      });
    }, o._onKeyUp = function(s) {
      var l = o.options, c = !1;
      if (o._keydownContinueSelect) {
        var u = o._sameCombiKey(s, l.toggleContinueSelect, !0);
        o._keydownContinueSelect = !u, c || (c = u);
      }
      if (o._keydownContinueSelectWithoutDeselection) {
        var u = o._sameCombiKey(s, l.toggleContinueSelectWithoutDeselect, !0);
        o._keydownContinueSelectWithoutDeselection = !u, c || (c = u);
      }
      c && o.emit("keyup", {
        keydownContinueSelect: o._keydownContinueSelect,
        keydownContinueSelectWithoutDeselection: o._keydownContinueSelectWithoutDeselection
      });
    }, o._onBlur = function() {
      (o._keydownContinueSelect || o._keydownContinueSelectWithoutDeselection) && (o._keydownContinueSelect = !1, o._keydownContinueSelectWithoutDeselection = !1, o.emit("keyup", {
        keydownContinueSelect: o._keydownContinueSelect,
        keydownContinueSelectWithoutDeselection: o._keydownContinueSelectWithoutDeselection
      }));
    }, o._onDocumentSelectStart = function(s) {
      var l = xr(o.container);
      if (o.gesto.isFlag()) {
        var c = o.dragContainer;
        c === Ht(o.container) && (c = l.documentElement);
        var u = Sa(c) ? [c] : [].slice.call(c), d = s.target;
        u.some(function(h) {
          if (h === d || h.contains(d))
            return s.preventDefault(), !0;
        });
      }
    }, o.target = n.portalContainer;
    var i = n.container;
    o.options = pt({
      className: "",
      portalContainer: null,
      container: null,
      dragContainer: null,
      selectableTargets: [],
      selectByClick: !0,
      selectFromInside: !0,
      clickBySelectEnd: !1,
      hitRate: 100,
      continueSelect: !1,
      continueSelectWithoutDeselect: !1,
      toggleContinueSelect: null,
      toggleContinueSelectWithoutDeselect: null,
      keyContainer: null,
      scrollOptions: null,
      checkInput: !1,
      preventDefault: !1,
      boundContainer: !1,
      preventDragFromInside: !0,
      dragCondition: null,
      rootContainer: null,
      checkOverflow: !1,
      innerScrollOptions: !1,
      getElementRect: Os,
      cspNonce: "",
      ratio: 0
    }, n);
    var a = o.options.portalContainer;
    return a && (i = a.parentElement), o.container = i || document.body, o.initElement(), o.initDragScroll(), o.setKeyController(), o;
  }
  var r = t.prototype;
  return r.setSelectedTargets = function(n) {
    var o = this.selectedTargets, i = Mo(o, n), a = i.added, s = i.removed, l = i.prevList, c = i.list;
    return this.selectedTargets = n, {
      added: a.map(function(u) {
        return c[u];
      }),
      removed: s.map(function(u) {
        return l[u];
      }),
      beforeSelected: o,
      selected: n
    };
  }, r.setSelectedTargetsByPoints = function(n, o) {
    var i = Math.min(n[0], o[0]), a = Math.min(n[1], o[1]), s = Math.max(n[0], o[0]), l = Math.max(n[1], o[1]), c = {
      left: i,
      top: a,
      right: s,
      bottom: l,
      width: s - i,
      height: l - a
    }, u = {
      ignoreClick: !0
    };
    this.findSelectableTargets(u);
    var d = this.hitTest(c, u, !0, null), h = this.setSelectedTargets(d);
    return pt(pt({}, h), {
      rect: c
    });
  }, r.selectTargetsByPoints = function(n, o) {
    var i = new MouseEvent("mousedown", {
      clientX: n[0],
      clientY: n[1],
      cancelable: !0,
      bubbles: !0
    }), a = new MouseEvent("mousemove", {
      clientX: o[0],
      clientY: o[1],
      cancelable: !0,
      bubbles: !0
    }), s = new MouseEvent("mousemove", {
      clientX: o[0],
      clientY: o[1],
      cancelable: !0,
      bubbles: !0
    }), l = this.gesto, c = l.onDragStart(i);
    c !== !1 && (l.onDrag(a), l.onDragEnd(s));
  }, r.getSelectedTargets = function() {
    return this.selectedTargets;
  }, r.triggerDragStart = function(n) {
    return this.gesto.triggerDragStart(n), this;
  }, r.destroy = function() {
    var n;
    this.off(), this.keycon && this.keycon.destroy(), this.gesto.unset(), this.injectResult.destroy(), this.dragScroll.dragEnd(), Qe(document, "selectstart", this._onDocumentSelectStart), this.options.portalContainer || (n = this.target.parentElement) === null || n === void 0 || n.removeChild(this.target), this.keycon = null, this.gesto = null, this.injectResult = null, this.target = null, this.container = null, this.options = null;
  }, r.getElementPoints = function(n) {
    var o = this.getElementRect || Os, i = o(n), a = [i.pos1, i.pos2, i.pos4, i.pos3];
    if (o !== Os) {
      var s = n.getBoundingClientRect();
      return Ku(a, s);
    }
    return a;
  }, r.getSelectableElements = function() {
    var n = this.container, o = [];
    return this.options.selectableTargets.forEach(function(i) {
      if (Lt(i)) {
        var a = i();
        a && o.push.apply(o, [].slice.call(a));
      } else if (Sa(i))
        o.push(i);
      else if (it(i))
        o.push(i.value || i.current);
      else {
        var s = [].slice.call(xr(n).querySelectorAll(i));
        o.push.apply(o, s);
      }
    }), o;
  }, r.checkScroll = function() {
    if (this.gesto.isFlag()) {
      var n = this.scrollOptions, o = this.gesto.getEventData().innerScrollOptions, i = o || n?.container;
      i && this.dragScroll.checkScroll(pt({
        inputEvent: this.gesto.getCurrentEvent()
      }, o || n));
    }
  }, r.findSelectableTargets = function(n) {
    var o = this;
    n === void 0 && (n = this.gesto.getEventData());
    var i = this.getSelectableElements(), a = i.map(function(d) {
      return o.getElementPoints(d);
    });
    n.selectableTargets = i, n.selectablePoints = a, n.selectableParentMap = null;
    var s = this.options, l = s.checkOverflow || s.innerScrollOptions, c = xr(this.container);
    if (l) {
      var u = /* @__PURE__ */ new Map();
      n.selectableInnerScrollParentMap = u, n.selectableInnerScrollPathsList = i.map(function(d, h) {
        for (var p = d.parentElement, g = [], v = [], m = function() {
          var x = u.get(p);
          if (!x) {
            var y = getComputedStyle(p).overflow !== "visible";
            if (y) {
              var b = Os(p);
              x = {
                parentElement: p,
                indexes: [],
                points: [b.pos1, b.pos2, b.pos4, b.pos3],
                paths: ta([], v)
              }, g.push(p), g.forEach(function(w) {
                u.set(w, x);
              }), g = [];
            }
          }
          x ? (p = x.parentElement, u.get(p).indexes.push(h), v.push(p)) : g.push(p), p = p.parentElement;
        }; p && p !== c.body; )
          m();
        return v;
      });
    }
    return s.checkOverflow || (n.selectableInners = i.map(function() {
      return !0;
    })), this._refreshGroups(n), i;
  }, r.clickTarget = function(n, o) {
    var i = JA(n), a = i.clientX, s = i.clientY, l = {
      data: {
        selectFlag: !1
      },
      clientX: a,
      clientY: s,
      inputEvent: n,
      isClick: !0,
      isTrusted: !1,
      stop: function() {
        return !1;
      }
    };
    return this._onDragStart(l, o) && this._onDragEnd(l), this;
  }, r.setKeyController = function() {
    var n = this.options, o = n.keyContainer, i = n.toggleContinueSelect, a = n.toggleContinueSelectWithoutDeselect;
    this.keycon && (this.keycon.destroy(), this.keycon = null), (i || a) && (this.keycon = new KA(o || Ht(this.container)), this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur", this._onBlur));
  }, r.setClassName = function(n) {
    this.options.className = n, this.target.setAttribute("class", "".concat(md, " ").concat(n || ""));
  }, r.setKeyEvent = function() {
    var n = this.options, o = n.toggleContinueSelect, i = n.toggleContinueSelectWithoutDeselect;
    !o && !i || this.keycon || this.setKeyController();
  }, r.setKeyContainer = function(n) {
    var o = this, i = this.options;
    cu(i.keyContainer, n, function() {
      i.keyContainer = n, o.setKeyController();
    });
  }, r.getContinueSelect = function() {
    var n = this.options, o = n.continueSelect, i = n.toggleContinueSelect;
    return !i || !this._keydownContinueSelect ? o : !o;
  }, r.getContinueSelectWithoutDeselect = function() {
    var n = this.options, o = n.continueSelectWithoutDeselect, i = n.toggleContinueSelectWithoutDeselect;
    return !i || !this._keydownContinueSelectWithoutDeselection ? o : !o;
  }, r.setToggleContinueSelect = function(n) {
    var o = this, i = this.options;
    cu(i.toggleContinueSelect, n, function() {
      i.toggleContinueSelect = n, o.setKeyEvent();
    });
  }, r.setToggleContinueSelectWithoutDeselect = function(n) {
    var o = this, i = this.options;
    cu(i.toggleContinueSelectWithoutDeselect, n, function() {
      i.toggleContinueSelectWithoutDeselect = n, o.setKeyEvent();
    });
  }, r.setPreventDefault = function(n) {
    this.gesto.options.preventDefault = n;
  }, r.setCheckInput = function(n) {
    this.gesto.options.checkInput = n;
  }, r.initElement = function() {
    var n = this.options, o = n.dragContainer, i = n.checkInput, a = n.preventDefault, s = n.preventClickEventOnDragStart, l = n.preventClickEventOnDrag, c = n.preventClickEventByCondition, u = n.preventRightClick, d = u === void 0 ? !0 : u, h = n.className, p = this.container;
    this.target = Jy(rO("div", {
      className: "".concat(md, " ").concat(h || "")
    }), this.target, p);
    var g = this.target;
    this.dragContainer = typeof o == "string" ? [].slice.call(xr(p).querySelectorAll(o)) : o || this.target.parentNode, this.gesto = new Ox(this.dragContainer, {
      checkWindowBlur: !0,
      container: Ht(p),
      checkInput: i,
      preventDefault: a,
      preventClickEventOnDragStart: s,
      preventClickEventOnDrag: l,
      preventClickEventByCondition: c,
      preventRightClick: d
    }).on({
      dragStart: this._onDragStart,
      drag: this._onDrag,
      dragEnd: this._onDragEnd
    }), tt(document, "selectstart", this._onDocumentSelectStart), this.injectResult = eb.inject(g, {
      nonce: this.options.cspNonce
    });
  }, r.hitTest = function(n, o, i, a) {
    var s = this.options, l = s.hitRate, c = s.selectByClick, u = n.left, d = n.top, h = n.right, p = n.bottom, g = o.innerGroups, v = o.innerWidth, m = o.innerHeight, x = a?.clientX, y = a?.clientY, b = o.ignoreClick, w = [[u, d], [h, d], [h, p], [u, p]], _ = function(S, M) {
      var D = Wr(typeof l == "function" ? "".concat(l(M)) : "".concat(l)), N = b ? !1 : al([x, y], S);
      if (!i && c && N)
        return !0;
      var z = Qu(w, S);
      if (!z.length)
        return !1;
      var Y = Xi(z), H = 0;
      if (Y === 0 && Xi(S) === 0 ? (H = zv(S), Y = zv(z)) : H = Xi(S), D.unit === "px")
        return Y >= D.value;
      var X = ba(Math.round(Y / H * 100), 0, 100);
      return X >= Math.min(100, D.value);
    }, R = o.selectableTargets, T = o.selectablePoints, k = o.selectableInners;
    if (!g)
      return R.filter(function(S, M) {
        return k[M] ? _(T[M], R[M]) : !1;
      });
    for (var j = [], A = Math.floor(u / v), $ = Math.floor(h / v), F = Math.floor(d / m), L = Math.floor(p / m), P = A; P <= $; ++P) {
      var O = g[P];
      if (O)
        for (var I = F; I <= L; ++I) {
          var E = O[I];
          E && E.forEach(function(S) {
            var M = T[S], D = k[S], N = R[S];
            D && _(M, N) && j.push(N);
          });
        }
    }
    return eO(j);
  }, r.initDragScroll = function() {
    var n = this;
    this.dragScroll.on("scrollDrag", function(o) {
      var i = o.next;
      i(n.gesto.getCurrentEvent());
    }).on("scroll", function(o) {
      var i = o.container, a = o.direction, s = n.gesto.getEventData().innerScrollOptions;
      s ? n.emit("innerScroll", {
        container: i,
        direction: a
      }) : n.emit("scroll", {
        container: i,
        direction: a
      });
    }).on("move", function(o) {
      var i = o.offsetX, a = o.offsetY, s = o.inputEvent, l = n.gesto;
      if (!(!l || !l.isFlag())) {
        var c = n.gesto.getEventData(), u = c.boundArea;
        c.startX -= i, c.startY -= a;
        var d = n.gesto.getEventData().innerScrollOptions, h = d?.container, p = !1;
        if (h) {
          var g = c.selectableInnerScrollParentMap, v = g.get(h);
          v && (v.paths.forEach(function(m) {
            var x = g.get(m);
            x.points.forEach(function(y) {
              y[0] -= i, y[1] -= a;
            });
          }), v.indexes.forEach(function(m) {
            c.selectablePoints[m].forEach(function(x) {
              x[0] -= i, x[1] -= a;
            });
          }), p = !0);
        }
        p || c.selectablePoints.forEach(function(m) {
          m.forEach(function(x) {
            x[0] -= i, x[1] -= a;
          });
        }), n._refreshGroups(c), u.left -= i, u.right -= i, u.top -= a, u.bottom -= a, n.gesto.scrollBy(i, a, s.inputEvent), n._checkSelected(n.gesto.getCurrentEvent());
      }
    });
  }, r._select = function(n, o, i, a, s) {
    s === void 0 && (s = !1);
    var l = i.inputEvent, c = i.data, u = this.setSelectedTargets(n), d = Mo(c.startSelectedTargets, n), h = d.added, p = d.removed, g = d.prevList, v = d.list, m = {
      startSelected: g,
      startAdded: h.map(function(x) {
        return v[x];
      }),
      startRemoved: p.map(function(x) {
        return g[x];
      })
    };
    a && this.emit("selectStart", pt(pt(pt({}, u), m), {
      rect: o,
      inputEvent: l,
      data: c.data,
      isTrusted: i.isTrusted,
      isDragStartEnd: s
    })), (u.added.length || u.removed.length) && this.emit("select", pt(pt(pt({}, u), m), {
      rect: o,
      inputEvent: l,
      data: c.data,
      isTrusted: i.isTrusted,
      isDragStartEnd: s
    }));
  }, r._selectEnd = function(n, o, i, a, s) {
    s === void 0 && (s = !1);
    var l = a.inputEvent, c = a.isDouble, u = a.data, d = l && l.type, h = d === "mousedown" || d === "touchstart", p = Mo(n, this.selectedTargets), g = p.added, v = p.removed, m = p.prevList, x = p.list, y = Mo(o, this.selectedTargets), b = y.added, w = y.removed, _ = y.prevList, R = y.list;
    this.emit("selectEnd", {
      startSelected: n,
      beforeSelected: o,
      selected: this.selectedTargets,
      added: g.map(function(T) {
        return x[T];
      }),
      removed: v.map(function(T) {
        return m[T];
      }),
      afterAdded: b.map(function(T) {
        return R[T];
      }),
      afterRemoved: w.map(function(T) {
        return _[T];
      }),
      isDragStart: h && s,
      isDragStartEnd: h && s,
      isClick: !!a.isClick,
      isDouble: !!c,
      rect: i,
      inputEvent: l,
      data: u.data,
      isTrusted: a.isTrusted
    });
  }, r._checkSelected = function(n, o) {
    o === void 0 && (o = Lv(n, this.options.ratio));
    var i = n.data, a = o.top, s = o.left, l = o.width, c = o.height, u = i.selectFlag, d = i.containerX, h = i.containerY, p = i.scaleMatrix, g = Hs(p, [s - d, a - h]), v = Hs(p, [l, c]), m = [];
    if (u) {
      this.target.style.cssText += "display: block;left:0px;top:0px;" + "transform: translate(".concat(g[0], "px, ").concat(g[1], "px);") + "width:".concat(v[0], "px;height:").concat(v[1], "px;");
      var x = this.hitTest(o, i, !0, n);
      m = Bv(i.startPassedTargets, x, this.continueSelect && this.continueSelectWithoutDeselect);
    }
    var y = this.emit("drag", pt(pt({}, n), {
      data: i.data,
      isSelect: u,
      rect: o
    }));
    if (y === !1) {
      this.target.style.cssText += "display: none;", n.stop();
      return;
    }
    u && this._select(m, o, n);
  }, r._sameCombiKey = function(n, o, i) {
    if (!o)
      return !1;
    var a = Zy(n.inputEvent, n.key), s = [].concat(o), l = Ue(s[0]) ? s : [s];
    if (i) {
      var c = n.key;
      return l.some(function(u) {
        return u.some(function(d) {
          return d === c;
        });
      });
    }
    return l.some(function(u) {
      return u.every(function(d) {
        return a.indexOf(d) > -1;
      });
    });
  }, r._findElement = function(n, o) {
    for (var i = n; i && !(o.indexOf(i) > -1); )
      i = i.parentElement;
    return i;
  }, r._refreshGroups = function(n) {
    var o, i = n.innerWidth, a = n.innerHeight, s = n.selectablePoints;
    if (this.options.checkOverflow) {
      var l = (o = this.gesto.getEventData().innerScrollOptions) === null || o === void 0 ? void 0 : o.container, c = n.selectableInnerScrollParentMap, u = n.selectableInnerScrollPathsList;
      n.selectableInners = u.map(function(p, g) {
        var v = !1;
        return p.every(function(m) {
          if (v)
            return !0;
          if (m === l)
            return v = !0, !0;
          var x = c.get(m);
          if (x) {
            var y = s[g], b = x.points, w = Qu(y, b);
            if (!w.length)
              return !1;
          }
          return !0;
        });
      });
    }
    if (!i || !a)
      n.innerGroups = null;
    else {
      var d = n.selectablePoints, h = {};
      d.forEach(function(p, g) {
        var v = 1 / 0, m = -1 / 0, x = 1 / 0, y = -1 / 0;
        p.forEach(function(_) {
          var R = Math.floor(_[0] / i), T = Math.floor(_[1] / a);
          v = Math.min(R, v), m = Math.max(R, m), x = Math.min(T, x), y = Math.max(T, y);
        });
        for (var b = v; b <= m; ++b)
          for (var w = x; w <= y; ++w)
            h[b] = h[b] || {}, h[b][w] = h[b][w] || [], h[b][w].push(g);
      }), n.innerGroups = h;
    }
  }, t = QA([mk(lh, function(n, o) {
    var i = {
      enumerable: !0,
      configurable: !0,
      get: function() {
        return this.options[o];
      }
    }, a = Qo("get ".concat(o));
    n[a] ? i.get = function() {
      return this[a]();
    } : i.get = function() {
      return this.options[o];
    };
    var s = Qo("set ".concat(o));
    n[s] ? i.set = function(l) {
      this[s](l);
    } : i.set = function(l) {
      this.options[o] = l;
    }, Object.defineProperty(n, o, i);
  })], t), t;
}(In), aO = /* @__PURE__ */ function(e) {
  Qy(t, e);
  function t() {
    return e !== null && e.apply(this, arguments) || this;
  }
  return t;
}(iO), xd = function(e, t) {
  return xd = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var o in n) Object.prototype.hasOwnProperty.call(n, o) && (r[o] = n[o]);
  }, xd(e, t);
};
function sO(e, t) {
  if (typeof t != "function" && t !== null) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
  xd(e, t);
  function r() {
    this.constructor = e;
  }
  e.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var gl = function() {
  return gl = Object.assign || function(t) {
    for (var r, n = 1, o = arguments.length; n < o; n++) {
      r = arguments[n];
      for (var i in r) Object.prototype.hasOwnProperty.call(r, i) && (t[i] = r[i]);
    }
    return t;
  }, gl.apply(this, arguments);
};
function lO(e, t, r, n) {
  var o = arguments.length, i = o < 3 ? t : n, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") i = Reflect.decorate(e, t, r, n);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (i = (o < 3 ? a(i) : o > 3 ? a(t, r, i) : a(t, r)) || i);
  return o > 3 && i && Object.defineProperty(t, r, i), i;
}
var $v = tb.map(function(e) {
  return Qo("on ".concat(e));
}), cO = /* @__PURE__ */ function(e) {
  sO(t, e);
  function t() {
    return e !== null && e.apply(this, arguments) || this;
  }
  var r = t.prototype;
  return r.render = function() {
    return Nn("div", {
      className: md,
      ref: Sn(this, "selectionElement")
    });
  }, r.componentDidMount = function() {
    var n = this, o = this.props, i = {};
    nO.forEach(function(a) {
      a in o && (i[a] = o[a]);
    }), this.selecto = new aO(gl(gl({}, i), {
      portalContainer: this.selectionElement
    })), tb.forEach(function(a, s) {
      n.selecto.on(a, function(l) {
        var c = n.props, u = c[$v[s]] && c[$v[s]](l);
        u === !1 && l.stop();
      });
    });
  }, r.componentDidUpdate = function(n) {
    var o = this.props, i = this.selecto;
    lh.forEach(function(a) {
      n[a] !== o[a] && (i[a] = o[a]);
    });
  }, r.componentWillUnmount = function() {
    this.selecto.destroy();
  }, lO([mx(oO)], t.prototype, "selecto", void 0), t;
}($S);
const uO = () => {
  const e = br(), t = ke(), { zoom: r } = Bt();
  return {
    handleDragOver: (i) => {
      i.preventDefault();
    },
    handleDrop: (i) => {
      const a = document.querySelector(".veltix-viewport-canvas");
      i.preventDefault();
      const s = i.dataTransfer.getData("chart-type");
      if (s) {
        const { clientX: l, clientY: c } = i, { left: u, top: d } = a.getBoundingClientRect(), h = (l - u) / r, p = (c - d) / r, g = e.get(s), v = {
          id: Io(),
          type: s,
          title: g ? `新${g.title}` : `新${s}图表`,
          props: {},
          position: {
            left: h,
            top: p,
            width: 300,
            height: 200
          }
        };
        t.addNode(v);
      }
    }
  };
};
function dO(e, t) {
  let r = null;
  return function(...n) {
    r && clearTimeout(r), r = setTimeout(() => {
      e(...n);
    }, t);
  };
}
function fO({ isDragging: e, isTouchPadDragging: t, spacePressed: r, mode: n }) {
  return e || t ? "cursor-grabbing" : r || n === "hand" ? "cursor-grab" : "cursor-default";
}
function hO(e) {
  return Number(e.toFixed(2));
}
function pO(e, t) {
  const o = e.width - 120, i = e.height - 40 * 2, a = o / t.width, s = i / t.height, l = Math.min(a, s, 1), c = t.width * l, u = t.height * l, d = 60 + (o - c) / 2, h = 40 + (i - u) / 2;
  return {
    zoom: l,
    position: {
      x: d,
      y: h
    }
  };
}
function vO({
  formatZoom: e,
  editorRef: t,
  canvasState: r,
  setCanvasState: n,
  setSpacePressed: o,
  setIsDragging: i,
  setDragStart: a,
  setIsTouchPadDragging: s,
  spacePressed: l,
  mode: c,
  isDragging: u,
  dragStart: d
}) {
  const h = (y) => {
    y.code === "Space" && !y.repeat ? (y.preventDefault(), o(!0)) : (y.metaKey || y.ctrlKey) && y.key === "1" && (y.preventDefault(), n({
      zoom: 1,
      position: r.position
    }));
  }, p = (y) => {
    y.code === "Space" && (y.preventDefault(), o(!1), i(!1));
  }, g = (y) => {
    !(l || c === "hand") || y.target.closest(".element") || (i(!0), a({
      x: y.clientX - r.position.x,
      y: y.clientY - r.position.y
    }));
  }, v = (y) => {
    u && n({
      ...r,
      position: {
        x: y.clientX - d.x,
        y: y.clientY - d.y
      }
    });
  }, m = () => {
    i(!1);
  }, x = (y, b) => {
    const w = t.current;
    if (w)
      if (y.ctrlKey || y.metaKey) {
        y.preventDefault();
        const _ = r.zoom, R = b(Math.max(0.1, Math.min(2, _ - y.deltaY * 4e-3))), T = w.getBoundingClientRect(), k = y.clientX - T.left, j = y.clientY - T.top, A = (k - r.position.x) / _, $ = (j - r.position.y) / _, F = {
          x: k - A * R,
          y: j - $ * R
        };
        n({
          zoom: R,
          position: F
        });
      } else y.buttons === 0 && (y.preventDefault(), n({
        ...r,
        position: {
          x: r.position.x - y.deltaX,
          y: r.position.y - y.deltaY
        }
      }), s(!0));
  };
  return ze(() => (window.addEventListener("keydown", h), window.addEventListener("keyup", p), () => {
    window.removeEventListener("keydown", h), window.removeEventListener("keyup", p);
  }), []), ze(() => {
    const y = t.current;
    if (!y) return;
    const b = (w) => x(w, e);
    return y.addEventListener("wheel", b, { passive: !1 }), () => {
      y.removeEventListener("wheel", b);
    };
  }, [r]), ze(() => {
    const y = () => {
      s(!1);
    };
    return window.addEventListener("mouseup", y), () => {
      window.removeEventListener("mouseup", y);
    };
  }, []), ze(() => {
    const y = t.current;
    if (y)
      return y.addEventListener("mousedown", g), y.addEventListener("mousemove", v), y.addEventListener("mouseup", m), y.addEventListener("mouseleave", m), () => {
        y.removeEventListener("mousedown", g), y.removeEventListener("mousemove", v), y.removeEventListener("mouseup", m), y.removeEventListener("mouseleave", m);
      };
  }, [r, d, u, l, c]), {
    handleKeyDown: h,
    handleKeyUp: p,
    handleMouseDown: g,
    handleMouseMove: v,
    handleMouseUp: m,
    handleWheel: x
  };
}
function rb() {
  const e = bt(null), { setCanvasState: t, mode: r, spacePressed: n, setSpacePressed: o, isDragging: i, setIsDragging: a, dragStart: s, setDragStart: l, isTouchPadDragging: c, setIsTouchPadDragging: u } = Bt(), d = Bt(), h = dC();
  vO({
    formatZoom: hO,
    editorRef: e,
    canvasState: d,
    setCanvasState: t,
    setSpacePressed: o,
    setIsDragging: a,
    setDragStart: l,
    setIsTouchPadDragging: u,
    spacePressed: n,
    mode: r,
    isDragging: i,
    dragStart: s
  });
  const p = nr(
    (m) => {
      const x = e.current || document.querySelector(".veltix-viewport");
      if (!x) return;
      const y = x.getBoundingClientRect();
      if (!m) return;
      const b = pO(y, m);
      t({
        zoom: b.zoom,
        position: b.position
      });
    },
    [e, t]
  ), g = nr(
    dO((m) => {
      p(m);
    }, 40),
    [p]
  ), v = nr(() => {
    h && p(h);
  }, [p, h]);
  return gO(e, g, h), {
    ref: e,
    position: d.position,
    zoom: d.zoom,
    isDragging: i,
    spacePressed: n,
    isTouchPadDragging: c,
    mode: r,
    calculateFitZoom: g,
    fitViewport: v,
    cursorStyle: fO({ isDragging: i, isTouchPadDragging: c, spacePressed: n, mode: r })
  };
}
function gO(e, t, r) {
  ze(() => {
    if (e.current) {
      t(r);
      const n = new ResizeObserver(() => {
        t(r);
      });
      return n.observe(e.current), () => {
        n.disconnect();
      };
    }
  }, [t, r, e]);
}
class mO {
  constructor() {
    this.keys = /* @__PURE__ */ new Map();
  }
  define(t, r = !1) {
    this.keys.set(t, r);
  }
  set(t, r) {
    this.keys.set(t, r);
  }
  get(t) {
    return this.keys.get(t) || !1;
  }
}
const uu = new mO();
class xO {
  constructor() {
    this.commands = /* @__PURE__ */ new Map();
  }
  register(t, r) {
    this.commands.set(t, r);
  }
  execute(t, ...r) {
    this.commands.get(t)?.(...r);
  }
}
const yO = new xO();
var $o = /* @__PURE__ */ ((e) => (e[e.CtrlCmd = 2048] = "CtrlCmd", e[e.Shift = 1024] = "Shift", e[e.Alt = 512] = "Alt", e[e.WinCtrl = 256] = "WinCtrl", e))($o || {}), $e = /* @__PURE__ */ ((e) => (e[e.DependsOnKbLayout = -1] = "DependsOnKbLayout", e[e.Unknown = 0] = "Unknown", e[e.Backspace = 1] = "Backspace", e[e.Tab = 2] = "Tab", e[e.Enter = 3] = "Enter", e[e.Shift = 4] = "Shift", e[e.Ctrl = 5] = "Ctrl", e[e.Alt = 6] = "Alt", e[e.PauseBreak = 7] = "PauseBreak", e[e.CapsLock = 8] = "CapsLock", e[e.Escape = 9] = "Escape", e[e.Space = 10] = "Space", e[e.PageUp = 11] = "PageUp", e[e.PageDown = 12] = "PageDown", e[e.End = 13] = "End", e[e.Home = 14] = "Home", e[e.LeftArrow = 15] = "LeftArrow", e[e.UpArrow = 16] = "UpArrow", e[e.RightArrow = 17] = "RightArrow", e[e.DownArrow = 18] = "DownArrow", e[e.Insert = 19] = "Insert", e[e.Delete = 20] = "Delete", e[e.KEY_0 = 21] = "KEY_0", e[e.KEY_1 = 22] = "KEY_1", e[e.KEY_2 = 23] = "KEY_2", e[e.KEY_3 = 24] = "KEY_3", e[e.KEY_4 = 25] = "KEY_4", e[e.KEY_5 = 26] = "KEY_5", e[e.KEY_6 = 27] = "KEY_6", e[e.KEY_7 = 28] = "KEY_7", e[e.KEY_8 = 29] = "KEY_8", e[e.KEY_9 = 30] = "KEY_9", e[e.KEY_A = 31] = "KEY_A", e[e.KEY_B = 32] = "KEY_B", e[e.KEY_C = 33] = "KEY_C", e[e.KEY_D = 34] = "KEY_D", e[e.KEY_E = 35] = "KEY_E", e[e.KEY_F = 36] = "KEY_F", e[e.KEY_G = 37] = "KEY_G", e[e.KEY_H = 38] = "KEY_H", e[e.KEY_I = 39] = "KEY_I", e[e.KEY_J = 40] = "KEY_J", e[e.KEY_K = 41] = "KEY_K", e[e.KEY_L = 42] = "KEY_L", e[e.KEY_M = 43] = "KEY_M", e[e.KEY_N = 44] = "KEY_N", e[e.KEY_O = 45] = "KEY_O", e[e.KEY_P = 46] = "KEY_P", e[e.KEY_Q = 47] = "KEY_Q", e[e.KEY_R = 48] = "KEY_R", e[e.KEY_S = 49] = "KEY_S", e[e.KEY_T = 50] = "KEY_T", e[e.KEY_U = 51] = "KEY_U", e[e.KEY_V = 52] = "KEY_V", e[e.KEY_W = 53] = "KEY_W", e[e.KEY_X = 54] = "KEY_X", e[e.KEY_Y = 55] = "KEY_Y", e[e.KEY_Z = 56] = "KEY_Z", e[e.Meta = 57] = "Meta", e[e.ContextMenu = 58] = "ContextMenu", e[e.F1 = 59] = "F1", e[e.F2 = 60] = "F2", e[e.F3 = 61] = "F3", e[e.F4 = 62] = "F4", e[e.F5 = 63] = "F5", e[e.F6 = 64] = "F6", e[e.F7 = 65] = "F7", e[e.F8 = 66] = "F8", e[e.F9 = 67] = "F9", e[e.F10 = 68] = "F10", e[e.F11 = 69] = "F11", e[e.F12 = 70] = "F12", e[e.F13 = 71] = "F13", e[e.F14 = 72] = "F14", e[e.F15 = 73] = "F15", e[e.F16 = 74] = "F16", e[e.F17 = 75] = "F17", e[e.F18 = 76] = "F18", e[e.F19 = 77] = "F19", e[e.NumLock = 78] = "NumLock", e[e.ScrollLock = 79] = "ScrollLock", e[e.US_SEMICOLON = 80] = "US_SEMICOLON", e[e.US_EQUAL = 81] = "US_EQUAL", e[e.US_COMMA = 82] = "US_COMMA", e[e.US_MINUS = 83] = "US_MINUS", e[e.US_DOT = 84] = "US_DOT", e[e.US_SLASH = 85] = "US_SLASH", e[e.US_BACKTICK = 86] = "US_BACKTICK", e[e.US_OPEN_SQUARE_BRACKET = 87] = "US_OPEN_SQUARE_BRACKET", e[e.US_BACKSLASH = 88] = "US_BACKSLASH", e[e.US_CLOSE_SQUARE_BRACKET = 89] = "US_CLOSE_SQUARE_BRACKET", e[e.US_QUOTE = 90] = "US_QUOTE", e[e.OEM_8 = 91] = "OEM_8", e[e.OEM_102 = 92] = "OEM_102", e[e.NUMPAD_0 = 93] = "NUMPAD_0", e[e.NUMPAD_1 = 94] = "NUMPAD_1", e[e.NUMPAD_2 = 95] = "NUMPAD_2", e[e.NUMPAD_3 = 96] = "NUMPAD_3", e[e.NUMPAD_4 = 97] = "NUMPAD_4", e[e.NUMPAD_5 = 98] = "NUMPAD_5", e[e.NUMPAD_6 = 99] = "NUMPAD_6", e[e.NUMPAD_7 = 100] = "NUMPAD_7", e[e.NUMPAD_8 = 101] = "NUMPAD_8", e[e.NUMPAD_9 = 102] = "NUMPAD_9", e[e.NUMPAD_MULTIPLY = 103] = "NUMPAD_MULTIPLY", e[e.NUMPAD_ADD = 104] = "NUMPAD_ADD", e[e.NUMPAD_SEPARATOR = 105] = "NUMPAD_SEPARATOR", e[e.NUMPAD_SUBTRACT = 106] = "NUMPAD_SUBTRACT", e[e.NUMPAD_DECIMAL = 107] = "NUMPAD_DECIMAL", e[e.NUMPAD_DIVIDE = 108] = "NUMPAD_DIVIDE", e[e.KEY_IN_COMPOSITION = 109] = "KEY_IN_COMPOSITION", e[e.ABNT_C1 = 110] = "ABNT_C1", e[e.ABNT_C2 = 111] = "ABNT_C2", e[e.MAX_VALUE = 112] = "MAX_VALUE", e))($e || {});
class bO {
  constructor() {
    this.bindings = [];
  }
  register(t) {
    this.bindings.push(t);
  }
  handleKeydown(t) {
    const r = wO(t), n = SO(t), o = this.bindings.filter((i) => typeof i.keys == "number" ? i.keys === n && (!i.when || i.when()) : i.keys === r && (!i.when || i.when())).sort((i, a) => (a.weight || 0) - (i.weight || 0));
    if (o.length > 0) {
      t.preventDefault();
      const i = o[0], a = _f();
      i.handler ? i.handler(a) : yO.execute(i.id, a);
    }
  }
}
const ch = new bO();
function wO(e) {
  const t = [];
  return e.ctrlKey && t.push("Ctrl"), e.metaKey && t.push("Meta"), e.altKey && t.push("Alt"), e.shiftKey && t.push("Shift"), t.push(e.key.length === 1 ? e.key.toUpperCase() : e.key), t.join("+");
}
function SO(e) {
  let t = 0;
  (e.ctrlKey || e.metaKey) && (t |= $o.CtrlCmd), e.shiftKey && (t |= $o.Shift), e.altKey && (t |= $o.Alt);
  let r = 0;
  switch (e.key.toUpperCase()) {
    case "A":
      r = $e.KEY_A;
      break;
    case "B":
      r = $e.KEY_B;
      break;
    case "C":
      r = $e.KEY_C;
      break;
    case "D":
      r = $e.KEY_D;
      break;
    case "E":
      r = $e.KEY_E;
      break;
    case "F":
      r = $e.KEY_F;
      break;
    case "G":
      r = $e.KEY_G;
      break;
    case "H":
      r = $e.KEY_H;
      break;
    case "I":
      r = $e.KEY_I;
      break;
    case "J":
      r = $e.KEY_J;
      break;
    case "K":
      r = $e.KEY_K;
      break;
    case "L":
      r = $e.KEY_L;
      break;
    case "M":
      r = $e.KEY_M;
      break;
    case "N":
      r = $e.KEY_N;
      break;
    case "O":
      r = $e.KEY_O;
      break;
    case "P":
      r = $e.KEY_P;
      break;
    case "Q":
      r = $e.KEY_Q;
      break;
    case "R":
      r = $e.KEY_R;
      break;
    case "S":
      r = $e.KEY_S;
      break;
    case "T":
      r = $e.KEY_T;
      break;
    case "U":
      r = $e.KEY_U;
      break;
    case "V":
      r = $e.KEY_V;
      break;
    case "W":
      r = $e.KEY_W;
      break;
    case "X":
      r = $e.KEY_X;
      break;
    case "Y":
      r = $e.KEY_Y;
      break;
    case "Z":
      r = $e.KEY_Z;
      break;
    case "BACKSPACE":
      r = $e.Backspace;
      break;
    case "DELETE":
      r = $e.Delete;
      break;
    case "ENTER":
      r = $e.Enter;
      break;
    case " ":
      r = $e.Space;
      break;
    // Add more as needed
    default:
      r = 0;
      break;
  }
  return t | r;
}
typeof window < "u" && window.addEventListener("keydown", (e) => ch.handleKeydown(e));
class Gv {
  constructor(t, r) {
    this._key = t, this._defaultValue = r, uu.define(t, r);
  }
  get() {
    return uu.get(this._key);
  }
  set(t) {
    uu.set(this._key, t);
  }
  get key() {
    return this._key;
  }
  get defaultValue() {
    return this._defaultValue;
  }
}
var sn;
((e) => {
  e.focus = new Gv(
    "editorFocus",
    !1
  ), e.nodeFocus = new Gv(
    "nodeFocus",
    !1
  );
})(sn || (sn = {}));
const CO = (e, { onFocus: t, onBlur: r }) => (ze(() => {
  const n = e.current;
  if (!n) return;
  n.setAttribute("tabIndex", "0"), n.style.outline = "none";
  const o = () => {
    t();
  }, i = () => {
    r();
  };
  return n.addEventListener("focus", o), n.addEventListener("blur", i), () => {
    n.removeEventListener("focus", o), n.removeEventListener("blur", i);
  };
}, [e]), { ref: e }), EO = ({
  selecto: e,
  moveableManager: t,
  selectedTargets: r,
  onCheckBlur: n,
  onSetSelectedTargets: o,
  width: i,
  height: a
}) => {
  const { zoom: s, setZoom: l } = Bt(), c = (b) => {
    l(Math.max(0.1, Math.min(3, s * b.scale)));
  }, u = () => {
  }, d = (b) => {
    const w = b.inputEvent.target;
    n(), (w.nodeName === "A" || t.current.getMoveable().isMoveableElement(w) || t.current.getMoveable().isDragging() || r.some((_) => _ === w || _.contains(w))) && b.stop();
  }, h = (b) => {
    b.isDrag || e.current.clickTarget(b.inputEvent);
  }, p = (b) => {
    e.current.triggerDragStart(b.inputEvent);
  }, g = (b) => {
  }, v = (b) => {
    const w = b.inputEvent, _ = w.target;
    if (n(), _.isContentEditable) {
      const R = _O(_);
      R && R.hasAttribute(di) && (b.stop(), o([R]));
    }
    (w.type === "touchstart" && b.isTrusted || t.current.getMoveable().isMoveableElement(_) || r.some((R) => R === _ || R.contains(_))) && b.stop();
  }, m = ({ direction: b }) => {
  }, x = ({ isDragStart: b, selected: w, inputEvent: _ }) => {
    b && _.preventDefault(), o(w).then(() => {
      b && t.current.getMoveable().dragStart(_);
    });
  }, y = () => {
  };
  return ze(() => {
    const b = (w) => {
      w.touches.length;
    };
    return document.addEventListener("touchstart", b), () => {
      document.removeEventListener("touchstart", b);
    };
  }, []), ze(() => {
    const b = (w) => {
      (w.ctrlKey || w.metaKey) && (w.key === "=" || w.key === "+" ? (w.preventDefault(), l(Math.min(s + 0.1, 3))) : w.key === "-" ? (w.preventDefault(), l(Math.max(s - 0.1, 0.1))) : w.key === "0" && (w.preventDefault(), l(1)));
    };
    return window.addEventListener("keydown", b), () => {
      window.removeEventListener("keydown", b);
    };
  }, [s, l]), {
    onPinch: c,
    onPinchEnd: u,
    onDragStart: d,
    onDragEnd: h,
    onAbortPinch: p,
    onScroll: g,
    onSelectoDragStart: v,
    onSelectoScroll: m,
    onSelectoEnd: x,
    handleCenterView: y
  };
}, _O = (e) => e.closest(`[${di}]`);
function NO(e) {
  const t = {
    top: 0,
    left: 0,
    width: 0,
    height: 0,
    rotation: 0
  }, r = e.match(/top:\s*([\d.]+)px/), n = e.match(/left:\s*([\d.]+)px/), o = e.match(/width:\s*([\d.]+)px/), i = e.match(/height:\s*([\d.]+)px/);
  r && (t.top = parseFloat(r[1])), n && (t.left = parseFloat(n[1])), o && (t.width = parseFloat(o[1])), i && (t.height = parseFloat(i[1]));
  const a = e.match(
    /transform:\s*translate\(\s*([-\d.]+)px,\s*([-\d.]+)px\)\s*rotate\(\s*([-\d.]+)deg\)/
  );
  if (a) {
    const s = parseFloat(a[1]), l = parseFloat(a[2]), c = parseFloat(a[3]);
    t.left += s, t.top += l, t.rotation = c;
  }
  return t;
}
const DO = {
  name: "deleteButtonViewable",
  props: {
    // @ts-expect-error TODO
    deleteButtonViewable: Boolean
  },
  // @ts-expect-error TODO
  events: {},
  render(e, t) {
    const r = e.getRect(), { pos2: n } = e.state;
    return /* @__PURE__ */ f.jsx(kd.Consumer, { children: (o) => /* @__PURE__ */ f.jsx(
      Fe,
      {
        onMouseDown: (i) => {
          i.stopPropagation(), i.preventDefault(), o.editor.removeSelectedNode();
        },
        onTouchStart: (i) => {
          i.stopPropagation(), i.preventDefault(), o.editor.removeSelectedNode();
        },
        style: {
          transform: `translate(${n[0]}px, ${n[1]}px) rotate(${r.rotation}deg) translate(10px)`,
          zIndex: 1e3,
          cursor: "pointer",
          pointerEvents: "auto"
        },
        children: /* @__PURE__ */ f.jsx(Rl, { size: 16, color: "white" })
      }
    ) }, "delete-button-viewer");
  }
}, RO = {
  name: "dimensionViewable",
  props: {
    // @ts-expect-error TODO
    dimensionViewable: Boolean
  },
  // @ts-expect-error TODO
  events: {},
  render(e) {
    const t = e.props.zoom, r = e.getRect();
    return /* @__PURE__ */ f.jsxs(
      "div",
      {
        className: "moveable-dimension",
        style: {
          left: `${r.width / 2}px`,
          top: `${r.height}px`,
          transform: `translate(-50%, ${20 * t}px) scale(${t})`
        },
        children: [
          Math.round(r.offsetWidth),
          " x ",
          Math.round(r.offsetHeight)
        ]
      },
      "dimension-viewer"
    );
  }
};
class MO {
  // MoveableManager instance
  constructor(t, r) {
    this.unsubscribe = null, this.syncPositionFromStore = () => {
      const { selectedTargets: n } = this.props;
      if (n.length === 0) return;
      const o = ke.getState();
      o.json?.docs[0] && n.forEach((a) => {
        const s = a.dataset.veltixNodeId, l = a.dataset.veltixDocId;
        if (s && l) {
          const c = o.getNode(l, s);
          if (c && c.position) {
            if (c.position.locked === !0)
              return;
            this.updateElementPosition(a, c.position);
          }
        }
      });
    }, this.updateElementPosition = (n, o) => {
      let i = `translate(${o.left}px, ${o.top}px)`;
      o.rotation && (i += ` rotate(${o.rotation}deg)`), n.style.transform = i, n.style.width = `${o.width}px`, n.style.height = `${o.height}px`;
      const a = this.props.moveableData.getFrame(n);
      a && (a.set("transform", "translate", `${o.left}px, ${o.top}px`), o.rotation && a.set("transform", "rotate", `${o.rotation}deg`), this.props.moveableData.render(n)), this.props.updateRect();
    }, this.moveableManager = t, this.props = r;
  }
  // 初始化位置同步管理器
  initialize() {
    this.subscribe();
  }
  // 订阅 store 变化
  subscribe() {
    this.unsubscribe = ke.subscribe((t) => {
      this.syncPositionFromStore();
    });
  }
  // 清理订阅
  cleanup() {
    this.unsubscribe && (this.unsubscribe(), this.unsubscribe = null);
  }
  // 更新 props（当 selectedTargets 等发生变化时）
  updateProps(t) {
    this.props = { ...this.props, ...t };
  }
}
class TO {
  constructor() {
    this.map = /* @__PURE__ */ new Map();
  }
  get(t) {
    return this.map.get(t);
  }
  set(t, r) {
    return this.map.set(t, r);
  }
  clear() {
    this.map.clear();
  }
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function jO(e) {
  var t = typeof Symbol == "function" && Symbol.iterator, r = t && e[t], n = 0;
  if (r) return r.call(e);
  if (e && typeof e.length == "number") return {
    next: function() {
      return e && n >= e.length && (e = void 0), {
        value: e && e[n++],
        done: !e
      };
    }
  };
  throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
}
function kO(e, t) {
  var r = typeof Symbol == "function" && e[Symbol.iterator];
  if (!r) return e;
  var n = r.call(e), o, i = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(o = n.next()).done; ) i.push(o.value);
  } catch (s) {
    a = {
      error: s
    };
  } finally {
    try {
      o && !o.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return i;
}
function du() {
  for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(kO(arguments[t]));
  return e;
}
var ki = function(e) {
  return typeof e > "u";
}, Vv = /* @__PURE__ */ function() {
  function e(r, n) {
    var o, i;
    if (this._canceled = !1, n)
      try {
        for (var a = jO(Object.keys(n)), s = a.next(); !s.done; s = a.next()) {
          var l = s.value;
          this[l] = n[l];
        }
      } catch (c) {
        o = {
          error: c
        };
      } finally {
        try {
          s && !s.done && (i = a.return) && i.call(a);
        } finally {
          if (o) throw o.error;
        }
      }
    this.eventType = r;
  }
  var t = e.prototype;
  return t.stop = function() {
    this._canceled = !0;
  }, t.isCanceled = function() {
    return this._canceled;
  }, e;
}(), PO = /* @__PURE__ */ function() {
  function e() {
    this._eventHandler = {};
  }
  var t = e.prototype;
  return t.trigger = function(r) {
    for (var n = [], o = 1; o < arguments.length; o++)
      n[o - 1] = arguments[o];
    var i = r instanceof Vv ? r.eventType : r, a = du(this._eventHandler[i] || []);
    return a.length <= 0 ? this : (r instanceof Vv ? (r.currentTarget = this, a.forEach(function(s) {
      s(r);
    })) : a.forEach(function(s) {
      s.apply(void 0, du(n));
    }), this);
  }, t.once = function(r, n) {
    var o = this;
    if (typeof r == "object" && ki(n)) {
      var i = r;
      for (var a in i)
        this.once(a, i[a]);
      return this;
    } else if (typeof r == "string" && typeof n == "function") {
      var s = function() {
        for (var l = [], c = 0; c < arguments.length; c++)
          l[c] = arguments[c];
        n.apply(void 0, du(l)), o.off(r, s);
      };
      this.on(r, s);
    }
    return this;
  }, t.hasOn = function(r) {
    return !!this._eventHandler[r];
  }, t.on = function(r, n) {
    if (typeof r == "object" && ki(n)) {
      var o = r;
      for (var i in o)
        this.on(i, o[i]);
      return this;
    } else if (typeof r == "string" && typeof n == "function") {
      var a = this._eventHandler[r];
      ki(a) && (this._eventHandler[r] = [], a = this._eventHandler[r]), a.push(n);
    }
    return this;
  }, t.off = function(r, n) {
    if (ki(r))
      return this._eventHandler = {}, this;
    if (ki(n)) {
      if (typeof r == "string")
        return delete this._eventHandler[r], this;
      var o = r;
      for (var i in o)
        this.off(i, o[i]);
      return this;
    }
    var a = this._eventHandler[r];
    if (a) {
      for (var s = a.length, l = 0; l < s; ++l)
        if (a[l] === n) {
          a.splice(l, 1), s <= 1 && delete this._eventHandler[r];
          break;
        }
    }
    return this;
  }, e.VERSION = "3.0.5", e;
}();
function nb(e) {
  return Object.keys(e);
}
function AO(e) {
  return typeof e == "object";
}
function OO(e) {
  return typeof e == "function";
}
var yd = "__observers__", IO = "__computed__", fu = 1, hu = "__CFCS_DETECTED_DEPENDENCIES__", bd = function(e, t) {
  return bd = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var o in n) Object.prototype.hasOwnProperty.call(n, o) && (r[o] = n[o]);
  }, bd(e, t);
};
function FO(e, t) {
  if (typeof t != "function" && t !== null) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
  bd(e, t);
  function r() {
    this.constructor = e;
  }
  e.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
function uh() {
  Object[hu] = Object[hu] || {};
  var e = Object[hu];
  return e[fu] = e[fu] || [], e[fu];
}
function LO() {
  var e = uh();
  return e[e.length - 1];
}
function BO(e) {
  var t = uh(), r = [], n = {
    host: e,
    observers: r,
    push: function(o) {
      e !== o && r.indexOf(o) === -1 && r.push(o);
    }
  };
  return t.push(n), n;
}
function zO() {
  var e = uh();
  return e.pop();
}
var ob = /* @__PURE__ */ function() {
  function e(r) {
    this._emitter = new PO(), this._current = r;
  }
  var t = e.prototype;
  return Object.defineProperty(t, "current", {
    /**
     * return the current value.
     */
    get: function() {
      var r = LO();
      return r?.push(this), this._current;
    },
    set: function(r) {
      this._setCurrent(r);
    },
    enumerable: !1,
    configurable: !0
  }), t.subscribe = function(r) {
    return this.current, this._emitter.on("update", r), this;
  }, t.unsubscribe = function(r) {
    return this._emitter.off("update", r), this;
  }, t._setCurrent = function(r) {
    var n = this._current, o = r !== n;
    this._current = r, o && this._emitter.trigger("update", r, n);
  }, t.toString = function() {
    return "".concat(this.current);
  }, t.valueOf = function() {
    return this.current;
  }, e;
}(), $O = /* @__PURE__ */ function(e) {
  FO(t, e);
  function t(n) {
    var o = e.call(this) || this;
    return o._computedCallback = n, o._registered = [], o._onCheckUpdate = function() {
      o._setCurrent(o.current);
    }, o._current = o.current, o;
  }
  var r = t.prototype;
  return Object.defineProperty(r, "current", {
    get: function() {
      var n = this;
      BO(this);
      var o = this._computedCallback(), i = zO();
      return this._registered.forEach(function(a) {
        a.unsubscribe(n._onCheckUpdate);
      }), i.observers.forEach(function(a) {
        a.subscribe(n._onCheckUpdate);
      }), this._registered = i.observers, o;
    },
    enumerable: !1,
    configurable: !0
  }), t;
}(ob);
function Uv(e, t, r) {
  r === void 0 && (r = t);
  var n = {
    configurable: !0,
    get: function() {
      return ra(this, r).current;
    },
    set: function(o) {
      ra(this, r, o).current = o;
    }
  };
  Object.defineProperty(e, t, n), r !== t && Object.defineProperty(e, r, {
    configurable: !0,
    get: function() {
      return ra(this, r).current;
    }
  });
}
function GO() {
  for (var e = [], t = 0; t < arguments.length; t++)
    e[t] = arguments[t];
  return e.length > 1 ? Uv(e[0], e[1]) : function(r, n) {
    return Uv(r, n, e[0]);
  };
}
function VO(e) {
  e.subscribe = function(t, r) {
    this[t], ra(this, t).subscribe(r);
  }, e.unsubscribe = function(t, r) {
    var n = this;
    if (!t) {
      nb(dh(this)).forEach(function(o) {
        n.unsubscribe(o);
      });
      return;
    }
    t in this && ra(this, t).unsubscribe(r);
  };
}
function ib(e, t) {
  var r = OO(e) ? e() : e, n = {};
  return ab(n), nb(r).forEach(function(o) {
    var i = r[o];
    sb(i) ? Hv(n, o, i) : Hv(n, o, _a(i)), GO(o)(n, o);
  }), VO(n), n;
}
function UO(e) {
  return ib(e);
}
function HO(e) {
  return ib(e);
}
function _a(e) {
  return new ob(e);
}
function pu(e) {
  return new $O(e);
}
function ab(e) {
  var t = {};
  return Object.defineProperty(e, yd, {
    get: function() {
      return t;
    }
  }), t;
}
function dh(e, t) {
  var r, n;
  e[yd] || ab(e);
  var o = e[yd];
  {
    var i = (n = (r = e?.constructor) === null || r === void 0 ? void 0 : r.prototype) === null || n === void 0 ? void 0 : n[IO];
    i && i.forEach(function(a) {
      !(a in o) && a in e && e[a];
    });
  }
  return o;
}
function ra(e, t, r) {
  var n = dh(e);
  return n[t] || (n[t] = _a(r)), n[t];
}
function Hv(e, t, r) {
  var n = dh(e);
  n[t] = r;
}
function sb(e) {
  return e && AO(e) && "current" in e && "subscribe" in e && "unsubscribe" in e;
}
function tn(e, t, r) {
  if (r || arguments.length === 2) for (var n = 0, o = t.length, i; n < o; n++)
    (i || !(n in t)) && (i || (i = Array.prototype.slice.call(t, 0, n)), i[n] = t[n]);
  return e.concat(i || Array.prototype.slice.call(t));
}
var Go = /* @__PURE__ */ function() {
  function e(t) {
    this.separator = t, this.orderMap = {};
  }
  return e.prototype.getFullName = function(t) {
    return t.join(this.separator);
  }, e.prototype.get = function(t) {
    return this.orderMap[this.getFullName(t)];
  }, e.prototype.hasName = function(t) {
    var r = t.length;
    if (!r)
      return !1;
    var n = t[r - 1], o = this.get(t.slice(0, r - 1));
    return o ? o.indexOf(n) >= 0 : !1;
  }, e.prototype.gets = function(t, r) {
    r === void 0 && (r = !0);
    var n = [], o = this;
    function i(a, s) {
      var l = o.get(a);
      if (l)
        return l.forEach(function(c) {
          var u = tn(tn([], s, !0), [c], !1), d = i(tn(tn([], a, !0), [c], !1), u);
          (!d || !d.length) && n.push(tn(tn([], s, !0), [c], !1));
        }), l;
    }
    return i(t, r ? t : []), n;
  }, e.prototype.set = function(t, r) {
    var n = this;
    return t.forEach(function(o, i) {
      n.addName(t.slice(0, i), o);
    }), this.orderMap[this.getFullName(t)] = r, r;
  }, e.prototype.add = function(t) {
    var r = t.length;
    return r ? this.addName(t.slice(0, -1), t[r - 1]) : [];
  }, e.prototype.addName = function(t, r) {
    var n = this.get(t) || this.set(t, []);
    return n.indexOf(r) === -1 && n.push(r), n;
  }, e.prototype.findIndex = function(t, r) {
    var n = this.orderMap[this.getFullName(t)];
    return n ? n.indexOf(r) : -1;
  }, e.prototype.remove = function(t) {
    var r = this.getFullName(t), n = this.orderMap;
    for (var o in n)
      o.indexOf(r) === 0 && delete n[o];
    var i = t.length;
    if (i) {
      var a = t.slice(0, -1), s = t[i - 1];
      this.splice(a, this.findIndex(a, s), 1);
    }
    return this;
  }, e.prototype.filter = function(t, r, n) {
    n === void 0 && (n = !0);
    var o = this.gets(t, n).filter(r), i = new e(this.separator), a = n ? [] : t;
    return o.forEach(function(s) {
      i.add(tn(tn([], a, !0), s, !0));
    }), i;
  }, e.prototype.splice = function(t, r, n) {
    for (var o = [], i = 3; i < arguments.length; i++)
      o[i - 3] = arguments[i];
    var a = this.get(t) || this.set(t, []);
    return a.splice.apply(a, tn([r, n], o, !1)), this;
  }, e.prototype.clear = function() {
    this.orderMap = {};
  }, e.prototype.setObject = function(t) {
    var r = this.orderMap;
    for (var n in t)
      r[n] = t[n].slice();
  }, e.prototype.getObject = function() {
    var t = {}, r = this.orderMap;
    for (var n in r)
      t[n] = r[n].slice();
    return t;
  }, e.prototype.clone = function() {
    var t = new e(this.separator);
    return t.setObject(t.orderMap), t;
  }, e;
}(), wd = function(e, t) {
  return wd = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var o in n) Object.prototype.hasOwnProperty.call(n, o) && (r[o] = n[o]);
  }, wd(e, t);
};
function vc(e, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
  wd(e, t);
  function r() {
    this.constructor = e;
  }
  e.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var Na = function() {
  return Na = Object.assign || function(t) {
    for (var r, n = 1, o = arguments.length; n < o; n++) {
      r = arguments[n];
      for (var i in r) Object.prototype.hasOwnProperty.call(r, i) && (t[i] = r[i]);
    }
    return t;
  }, Na.apply(this, arguments);
};
function WO(e, t, r, n) {
  var o = arguments.length, i = o < 3 ? t : n === null ? n = Object.getOwnPropertyDescriptor(t, r) : n, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") i = Reflect.decorate(e, t, r, n);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (i = (o < 3 ? a(i) : o > 3 ? a(t, r, i) : a(t, r)) || i);
  return o > 3 && i && Object.defineProperty(t, r, i), i;
}
function Je(e, t, r) {
  if (r || arguments.length === 2) for (var n = 0, o = t.length, i; n < o; n++)
    (i || !(n in t)) && (i || (i = Array.prototype.slice.call(t, 0, n)), i[n] = t[n]);
  return e.concat(i || Array.prototype.slice.call(t));
}
function lb(e, t, r) {
  var n = 1 - r;
  return r * r * r + 3 * r * r * n * t + 3 * r * n * n * e;
}
function YO(e, t, r) {
  for (var n = r, o = r, i = 1; Math.abs(i) > 1 / 1e3; ) {
    if (o = lb(e, t, n), i = o - r, Math.abs(i) < 1 / 1e3)
      return n;
    n -= i / 2;
  }
  return n;
}
function co(e, t, r, n) {
  var o = function(i) {
    var a = YO(e, r, ba(i, 0, 1));
    return lb(t, n, a);
  };
  return o.easingName = "cubic-bezier(".concat(e, ",").concat(t, ",").concat(r, ",").concat(n, ")"), o;
}
function fh(e, t) {
  var r = function(n) {
    var o = 1 / e;
    return n >= 1 ? 1 : (t === "start" ? o : 0) + Math.floor(n / o) * o;
  };
  return r.easingName = "steps(".concat(e, ", ").concat(t, ")"), r;
}
var qO = /* @__PURE__ */ fh(1, "start"), XO = /* @__PURE__ */ fh(1, "end"), KO = /* @__PURE__ */ co(0, 0, 1, 1), ZO = /* @__PURE__ */ co(0.25, 0.1, 0.25, 1), QO = /* @__PURE__ */ co(0.42, 0, 1, 1), JO = /* @__PURE__ */ co(0, 0, 0.58, 1), e4 = /* @__PURE__ */ co(0.42, 0, 0.58, 1), Pi, Wv = "__SCENEJS_", Yv = "data-scene-id", Cn = "animation-timing-function", cb = { transform: {}, filter: {}, attribute: {}, html: !0 }, ml = { easing: [Cn] }, t4 = (Pi = {}, Pi[Cn] = !0, Pi.contents = !0, Pi.html = !0, Pi), qv = 1e6, zi = 1e-6, Or = "duration", gc = "fillMode", Xa = "direction", yr = "iterationCount", Jt = "delay", Da = "easing", En = "playSpeed", ai = "easingName", r4 = "iterationTime", Vn = "paused", ub = "ended", n4 = "timeupdate", db = "play", Ra = "running", Is = "iteration", No = "startAnimation", Fs = "pauseAnimation", Sd = "alternate", fb = "reverse", Cd = "alternate-reverse", o4 = "normal", na = "infinite", gn = "playState", hh = "playCSS", vu = "prevTime", pn = "tickTime", Ys = "currentTime", er = "selector", Xv = "transform", Kv = {
  linear: KO,
  ease: ZO,
  "ease-in": QO,
  "ease-out": JO,
  "ease-in-out": e4,
  "step-start": qO,
  "step-end": XO
}, Xn = "_///_", i4 = [Or, gc, Xa, yr, Jt, Da, En], Ci = /* @__PURE__ */ function() {
  function e(t, r) {
    this.prefix = "", this.suffix = "", this.model = "", this.type = "", this.separator = ",", r && this.setOptions(r), this.value = rt(t) ? t.split(this.separator) : t;
  }
  return e.prototype.setOptions = function(t) {
    for (var r in t)
      this[r] = t[r];
    return this;
  }, e.prototype.size = function() {
    return this.value.length;
  }, e.prototype.get = function(t) {
    return this.value[t];
  }, e.prototype.set = function(t, r) {
    return this.value[t] = r, this;
  }, e.prototype.clone = function() {
    var t = this, r = t.separator, n = t.prefix, o = t.suffix, i = t.model, a = t.type, s = this.value.map(function(l) {
      return li(l) ? l.clone() : l;
    });
    return new e(s, {
      separator: r,
      prefix: n,
      suffix: o,
      model: i,
      type: a
    });
  }, e.prototype.toValue = function() {
    return this.prefix + this.join() + this.suffix;
  }, e.prototype.join = function() {
    return this.value.map(function(t) {
      return li(t) ? t.toValue() : t;
    }).join(this.separator);
  }, e.prototype.forEach = function(t) {
    return this.value.forEach(t), this;
  }, e;
}();
function a4(e) {
  for (var t = xa(e, ";"), r = {}, n = t.length, o = n, i = 0; i < n; ++i) {
    var a = xa(t[i], ":");
    if (a.length < 2 || !a[1]) {
      --o;
      continue;
    }
    r[a[0].trim()] = Gr(a[1].trim());
  }
  return { styles: r, length: o };
}
function hb(e) {
  var t = Rf;
  return e.length === 3 && (e[3] = 1), new Ci(e, {
    model: t,
    separator: ",",
    type: "color",
    prefix: "".concat(t, "("),
    suffix: ")"
  });
}
function s4(e) {
  var t = oc(e), r = t.prefix, n = t.value, o = t.suffix;
  if (typeof n > "u")
    return e;
  if (xk.indexOf(r) > -1)
    return hb(_x(e));
  var i = Gr(n, r), a = [n], s = ",", l = "".concat(r, "("), c = ")".concat(o);
  return li(i) && (s = i.separator, a = i.value, l += i.prefix, c = i.suffix + c), new Ci(a, {
    separator: s,
    model: r,
    prefix: l,
    suffix: c
  });
}
function gu(e, t) {
  return new Ci(e, {
    type: "array",
    separator: t
  });
}
function l4(e) {
  var t = _x(e);
  return t ? hb(t) : e;
}
function Gr(e, t) {
  if (!rt(e))
    return Ue(e) ? gu(e, ",") : e;
  var r = rr(e);
  return r.length > 1 ? gu(r.map(function(n) {
    return Gr(n);
  }), ",") : (r = an(e), r.length > 1 ? gu(r.map(function(n) {
    return Gr(n);
  }), " ") : (r = /^(['"])([^'"]*)(['"])$/g.exec(e), r && r[1] === r[3] ? new Ci([Gr(r[2])], {
    prefix: r[1],
    suffix: r[1]
  }) : e.indexOf("(") !== -1 ? s4(e) : e.charAt(0) === "#" && t !== "url" ? l4(e) : e));
}
function pb(e, t) {
  t === void 0 && (t = {});
  var r = e.model;
  if (r) {
    e.setOptions({
      model: "",
      suffix: "",
      prefix: ""
    });
    var n = e.size() > 1 ? e : e.get(0);
    t[r] = n;
  } else
    e.forEach(function(o) {
      pb(o, t);
    });
  return t;
}
function Ma(e) {
  var t = typeof e;
  if (t === za) {
    if (Ue(e))
      return Mf;
    if (li(e))
      return rc;
  } else if (t === wx || t === Sx)
    return "value";
  return t;
}
function vb(e) {
  return it(e) && e.constructor === Object;
}
function ph(e, t) {
  var r = [];
  if (vb(e))
    for (var n in e)
      t.push(n), r = r.concat(ph(e[n], t)), t.pop();
  else
    r.push(t.slice());
  return r;
}
function gb(e, t) {
  for (var r in t) {
    var n = t[r];
    if (!vb(n)) {
      e[r] = !0;
      continue;
    }
    it(e[r]) || (e[r] = {}), gb(e[r], t[r]);
  }
  return e;
}
function si(e) {
  return Math.round(e * qv) / qv;
}
function oa(e, t, r) {
  r === void 0 && (r = e.length);
  for (var n = t, o = 0; o < r; ++o) {
    if (!it(n) || n == null)
      return;
    n = n[e[o]];
  }
  return n;
}
function mb(e, t, r) {
  var n = t.length, o = e;
  if (n === 0)
    return !1;
  for (var i = 0; i < n; ++i)
    if (o === !0 || (o = o[t[i]], !o || !r && o === !0))
      return !1;
  return !0;
}
function Do(e, t) {
  return mb(cb, e, t);
}
function Ed(e) {
  return mb(t4, e, !0);
}
function mc(e, t) {
  e.state[hh] = t;
}
function vh(e) {
  return e.state[hh] && e.isPaused();
}
function xb(e) {
  return !e.isEnded() && e.state[hh];
}
function yb(e) {
  for (; ; ) {
    var t = "".concat(Math.floor(Math.random() * 1e7));
    if (!nc || !e)
      return t;
    var r = ol('[data-scene-id="'.concat(t, '"]'));
    if (!r)
      return t;
  }
}
function bb(e) {
  return e.getId() || e.setId(yb(!1)).getId();
}
function Zv(e) {
  return "".concat(e).match(/[0-9a-zA-Z]+/g).join("");
}
function wb(e, t, r, n) {
  if (n === void 0 && (n = {}), !(!$a || e.getPlayState() === Ra)) {
    var o = r || No;
    if (vh(e))
      e.addPlayClass(!0, o, n);
    else {
      e.isEnded() && e.setTime(0), t && e.exportCSS({ className: o });
      var i = e.addPlayClass(!1, o, n);
      if (!i)
        return;
      c4(e, i), mc(e, !0);
    }
    e.setPlayState(Ra);
  }
}
function c4(e, t) {
  var r = e.state, n = e.getDuration(), o = !n || !isFinite(n), i = function() {
    mc(e, !1), e.finish();
  }, a = function() {
    e.trigger(db), tt(t, "animationcancel", i), tt(t, "animationend", i), tt(t, "animationiteration", s);
  };
  e.once(ub, function() {
    Qe(t, "animationcancel", i), Qe(t, "animationend", i), Qe(t, "animationiteration", s), Qe(t, "animationstart", a);
  });
  var s = function(l) {
    var c = l.elapsedTime, u = c, d = o ? 0 : u / n;
    r[Ys] = u, e.setIteration(d);
  };
  tt(t, "animationstart", a);
}
function Sb(e) {
  var t;
  if (rt(e))
    if (e in Kv)
      t = Kv[e];
    else {
      var r = Gr(e);
      if (rt(r))
        return 0;
      if (r.model === "cubic-bezier")
        e = r.value.map(function(n) {
          return parseFloat(n);
        }), t = co(e[0], e[1], e[2], e[3]);
      else if (r.model === "steps")
        t = fh(parseFloat(r.value[0]), r.value[1]);
      else
        return 0;
    }
  else Ue(e) ? t = co(e[0], e[1], e[2], e[3]) : t = e;
  return t;
}
function li(e) {
  if (!e)
    return !1;
  var t = e.constructor.prototype;
  return !!(t.clone && t.get && t.setOptions);
}
function Qv(e) {
  return e && !!e.constructor.prototype.getItem;
}
function $i(e) {
  return e && !!e.constructor.prototype.getFrame;
}
function gh(e) {
  return e && !!e.constructor.prototype.toCSSText;
}
function Cb(e, t) {
  var r = {};
  for (var n in e) {
    var o = e[n];
    if (gh(o))
      r[n] = o;
    else if (it(o)) {
      var i = Cb(o, t);
      for (var a in i)
        r["".concat(n).concat(t).concat(a)] = i[a];
    }
  }
  return r;
}
function u4(e) {
  return "length" in e && e.length >= 0;
}
function d4(e, t, r) {
  return function(n) {
    var o = n.prototype;
    e.forEach(function(i) {
      o[Qo("get ".concat(i))] = function() {
        return this[r][i];
      };
    }), t.forEach(function(i) {
      o[Qo("set ".concat(i))] = function(a) {
        return this[r][i] = a, this;
      };
    });
  };
}
function Eb(e, t, r) {
  return r === fb ? !0 : t !== na && e === t && t % 1 === 0 ? r === (e % 2 >= 1 ? Cd : Sd) : r === (e % 2 >= 1 ? Sd : Cd);
}
var _b = [
  "id",
  yr,
  Jt,
  gc,
  Xa,
  En,
  Or,
  En,
  r4,
  gn
], f4 = Je(Je([], _b, !0), [
  Da,
  ai
], !1), mh = /* @__PURE__ */ function(e) {
  vc(t, e);
  function t(r) {
    var n = e.call(this) || this;
    return n.timerId = 0, n.state = UO({
      id: "",
      easing: 0,
      easingName: "linear",
      iterationCount: 1,
      delay: 0,
      fillMode: "forwards",
      direction: o4,
      playSpeed: 1,
      currentTime: 0,
      iterationTime: -1,
      iteration: 0,
      tickTime: 0,
      prevTime: 0,
      playState: Vn,
      duration: 0
    }), n.setOptions(r), n;
  }
  return t.prototype.setEasing = function(r) {
    var n = Sb(r), o = n && n[ai] || "linear", i = this.state;
    return i[Da] = n, i[ai] = o, this;
  }, t.prototype.setOptions = function(r) {
    r === void 0 && (r = {});
    for (var n in r) {
      var o = r[n];
      if (n === Da) {
        this.setEasing(o);
        continue;
      } else if (n === Or) {
        o && this.setDuration(o);
        continue;
      }
      i4.indexOf(n) > -1 && (this.state[n] = o);
    }
    return this;
  }, t.prototype.getTotalDuration = function() {
    return this.getActiveDuration(!0);
  }, t.prototype.getActiveDuration = function(r) {
    var n = this.state, o = n[yr];
    return o === na ? 1 / 0 : (r ? n[Jt] : 0) + this.getDuration() * o;
  }, t.prototype.isEnded = function() {
    return this.state[pn] === 0 && this.state[gn] === Vn ? !0 : !(this.getTime() < this.getActiveDuration());
  }, t.prototype.isPaused = function() {
    return this.state[gn] === Vn;
  }, t.prototype.start = function(r) {
    r === void 0 && (r = this.state[Jt]);
    var n = this.state;
    return n[gn] = Ra, n[pn] >= r ? (this.trigger(db), !0) : !1;
  }, t.prototype.play = function(r) {
    var n = this, o = this.state, i = o[Jt], a = this.getTime();
    return o[gn] = Ra, this.isEnded() && (a === 0 || a >= this.getActiveDuration()) && this.setTime(-i, !0), this.timerId = nl(function(s) {
      o[vu] = s, n.tick(s, r);
    }), this.start(), this;
  }, t.prototype.pause = function() {
    var r = this.state;
    return r[gn] !== Vn && (r[gn] = Vn, this.trigger(Vn)), Ex(this.timerId), this;
  }, t.prototype.finish = function() {
    return this.setTime(0), this.state[pn] = 0, this.end(), this;
  }, t.prototype.end = function() {
    return this.pause(), this.trigger(ub), this;
  }, t.prototype.setTime = function(r, n, o, i) {
    var a = this.getActiveDuration(), s = this.state, l = s[pn], c = s[Jt], u = n ? r : this.getUnitTime(r);
    s[pn] = c + u, u < 0 ? u = 0 : u > a && (u = a), s[Ys] = u, this.calculate();
    var d = n && !o, h = s[pn], p = rt(r) ? parseFloat(r) : r;
    return d && l < c && p >= 0 && this.start(0), i?.(), d && (h < l || this.isEnded()) ? (this.end(), this) : this.isDelay() ? this : (this.trigger(n4, {
      currentTime: u,
      time: this.getIterationTime(),
      iterationCount: s[Is]
    }), this);
  }, t.prototype.getTime = function() {
    return this.state[Ys];
  }, t.prototype.getUnitTime = function(r) {
    if (rt(r)) {
      var n = this.getDuration() || 100;
      if (r === "from")
        return 0;
      if (r === "to")
        return n;
      var o = Wr(r), i = o.unit, a = o.value;
      return i === "%" ? (!this.getDuration() && this.setDuration(n), si(parseFloat(r) / 100 * n)) : i === ">" ? a + zi : a;
    } else
      return si(r);
  }, t.prototype.isDelay = function() {
    var r = this.state, n = r[Jt], o = r[pn];
    return n > 0 && o < n;
  }, t.prototype.setIteration = function(r) {
    var n = this.state, o = Math.floor(r), i = n[yr] === na ? 1 / 0 : n[yr];
    return n[Is] < o && o < i && this.trigger(Is, {
      currentTime: n[Ys],
      iterationCount: o
    }), n[Is] = r, this;
  }, t.prototype.calculate = function() {
    var r = this.state, n = r[yr], o = r[gc], i = r[Xa], a = this.getDuration(), s = this.getTime(), l = a === 0 ? 0 : s / a, c = a ? s % a : 0;
    if (!a)
      return this.setIterationTime(0), this;
    this.setIteration(l);
    var u = Eb(l, n, i), d = isFinite(a);
    if (d && u && (c = a - c), d && n !== na) {
      var h = o === "both" || o === "forwards";
      l >= n && (c = a * (h ? n % 1 || 1 : 0), u && (c = a - c));
    }
    return this.setIterationTime(c), this;
  }, t.prototype.tick = function(r, n) {
    var o = this;
    if (!this.isPaused()) {
      var i = this.state, a = i[En], s = i[vu], l = i[Jt], c = i[pn], u = c + Math.min(1e3, r - s) / 1e3 * a;
      i[vu] = r, n && n >= u ? (this.setTime(n - l, !0), this.pause()) : this.setTime(u - l, !0), i[gn] !== Vn && (this.timerId = nl(function(d) {
        o.tick(d, n);
      }));
    }
  }, t = WO([
    d4(f4, _b, "state")
  ], t), t;
}(In);
function Jv(e, t) {
  if (t === void 0 && (t = []), !e)
    return "";
  var r = [], n = ar(e);
  return Yi(n, t), n.forEach(function(o) {
    r.push("".concat(o.replace(/\d$/g, ""), "(").concat(e[o], ")"));
  }), r.join(" ");
}
function Nb(e, t) {
  return t === void 0 && (t = !1), xh({}, e, t);
}
function xh(e, t, r) {
  r === void 0 && (r = !1);
  for (var n in t) {
    var o = t[n], i = Ma(o);
    i === rc ? e[n] = r ? o.toValue() : o.clone() : i === va ? e[n] = r ? yh([n], o) : o : i === Mf ? e[n] = o.slice() : i === za ? it(e[n]) && !li(e[n]) ? xh(e[n], o, r) : e[n] = Nb(o, r) : e[n] = t[n];
  }
  return e;
}
function Ls(e) {
  return e[0] in ml ? ml[e[0]] : e;
}
function yh(e, t) {
  var r = Ma(t);
  if (r === rc)
    return t.toValue();
  if (r === va) {
    if (e[0] !== Cn)
      return yh(e, t());
  } else if (r === za)
    return Nb(t, !0);
  return t;
}
var uo = /* @__PURE__ */ function(e) {
  vc(t, e);
  function t(r) {
    r === void 0 && (r = {});
    var n = e.call(this) || this;
    return n.properties = {}, n.orderMap = new Go(Xn), n.properties = {}, n.set(r), n;
  }
  return t.prototype.get = function() {
    for (var r = [], n = 0; n < arguments.length; n++)
      r[n] = arguments[n];
    var o = this.raw.apply(this, r);
    return yh(Ls(r), o);
  }, t.prototype.getOrders = function(r) {
    return this.orderMap.get(r);
  }, t.prototype.setOrders = function(r, n) {
    var o = this.orderMap.set(r, n);
    return this._update(), o;
  }, t.prototype.getOrderObject = function() {
    return this.orderMap.getObject();
  }, t.prototype.setOrderObject = function(r) {
    this.orderMap.setObject(r), this._update();
  }, t.prototype.getKeys = function() {
    for (var r = [], n = 0; n < arguments.length; n++)
      r[n] = arguments[n];
    var o = this.raw.apply(this, r), i = Ma(o) === za ? ar(o) : [];
    return Yi(i, this.orderMap.get(r)), i;
  }, t.prototype.gets = function() {
    for (var r = this, n = [], o = 0; o < arguments.length; o++)
      n[o] = arguments[o];
    var i = this.get.apply(this, n), a = this.getKeys.apply(this, n);
    return a.map(function(s) {
      var l = i[s];
      return { key: s, value: l, children: r.gets.apply(r, Je(Je([], n, !1), [s], !1)) };
    });
  }, t.prototype.raw = function() {
    for (var r = [], n = 0; n < arguments.length; n++)
      r[n] = arguments[n];
    return oa(Ls(r), this.properties);
  }, t.prototype.remove = function() {
    for (var r = [], n = 0; n < arguments.length; n++)
      r[n] = arguments[n];
    var o = Ls(r), i = o.length;
    if (!i)
      return this;
    this.orderMap.remove(o);
    var a = oa(o, this.properties, i - 1);
    return it(a) && delete a[o[i - 1]], this._update(), this;
  }, t.prototype.set = function() {
    for (var r = [], n = 0; n < arguments.length; n++)
      r[n] = arguments[n];
    return this._set.apply(this, r), this._update(), this;
  }, t.prototype.getNames = function() {
    return ph(this.properties, []);
  }, t.prototype.has = function() {
    for (var r = [], n = 0; n < arguments.length; n++)
      r[n] = arguments[n];
    var o = Ls(r), i = o.length;
    return i ? !gr(oa(o, this.properties, i)) : !1;
  }, t.prototype.clone = function() {
    var r = new t();
    return r.setOrderObject(this.orderMap.orderMap), r.merge(this);
  }, t.prototype.merge = function(r) {
    var n = this.properties, o = r.properties;
    return o && xh(n, o), this;
  }, t.prototype.toCSSObject = function(r) {
    var n = this.get(), o = {};
    for (var i in n)
      if (!Do([i], !0)) {
        var a = n[i];
        i === Cn && (i = Cn.replace("animation", $a), a = (rt(a) ? a : a[ai]) || "initial"), r && (i = Qo(i.replace(/^[-]+/g, ""))), o[i] = a;
      }
    var s = Jv(n[Xv], this.orderMap.get([Xv])), l = Jv(n.filter, this.orderMap.get([qc]));
    return Yp && s && (o[Yp] = s), qc && l && (o[qc] = l), o;
  }, t.prototype.toCSSText = function() {
    var r = this.toCSSObject(), n = [], o = ar(r);
    return Yi(o, this.orderMap.get([])), o.forEach(function(i) {
      n.push("".concat(kf(i, "-"), ":").concat(r[i], ";"));
    }), n.join("");
  }, t.prototype.toCSS = function() {
    var r = this.toCSSObject(), n = [], o = ar(r);
    return Yi(o, this.orderMap.get([])), o.forEach(function(i) {
      n.push("".concat(i, ":").concat(r[i], ";"));
    }), n.join("");
  }, t.prototype.clear = function() {
    return this.properties = {}, this.orderMap.clear(), this;
  }, t.prototype._set = function() {
    for (var r = [], n = 0; n < arguments.length; n++)
      r[n] = arguments[n];
    var o = this, i = r.length, a = r.slice(0, -1), s = r[i - 1], l = a[0];
    if (i === 1 && gh(s))
      o.merge(s);
    else if (l in ml)
      o._setByPath(ml[l], s);
    else if (i === 2 && Ue(l))
      o._setByPath(l, s);
    else if (li(s))
      Do(a) ? o._set.apply(o, Je(Je([], a, !1), [pb(s)], !1)) : o._setByPath(a, s);
    else if (Ue(s))
      o._setByPath(a, s);
    else if (it(s)) {
      !o.has.apply(o, a) && Do(a) && o._setByPath(a, {});
      for (var c in s)
        o._set.apply(o, Je(Je([], a, !1), [c, s[c]], !1));
    } else if (rt(s)) {
      if (Do(a, !0)) {
        if (Ed(a) || !Do(a))
          this._setByPath(a, s);
        else {
          var u = Gr(s);
          it(u) && o._set.apply(o, Je(Je([], a, !1), [u], !1));
        }
        return this;
      } else {
        var d = a4(s), h = d.styles, p = d.length;
        for (var g in h)
          o._set.apply(o, Je(Je([], a, !1), [g, h[g]], !1));
        if (p)
          return this;
      }
      o._setByPath(a, s);
    } else
      o._setByPath(a, s);
  }, t.prototype._setByPath = function(r, n) {
    for (var o = this.properties, i = r.length, a = 0; a < i - 1; ++a) {
      var s = r[a];
      !(s in o) && (o[s] = {}), o = o[s];
    }
    if (i) {
      var l = r[i - 1];
      this.orderMap.add(r), i === 1 && l === Cn ? o[l] = Sb(n) : o[l] = rt(n) && !Ed(r) ? Gr(n, l) : n;
    }
  }, t.prototype._update = function() {
    this.emit("update");
  }, t;
}(In);
function bh(e, t, r, n) {
  var o = t.length;
  return e.map(function(i, a) {
    return a >= o ? i : Ta(i, t[a], r, n);
  });
}
function h4(e, t, r, n) {
  var o = e.value, i = t.value, a = e.model, s = t.model;
  if (a !== s)
    return Ta(e.toValue(), t.toValue(), r, n);
  o.length === 3 && (o[3] = 1), i.length === 3 && (i[3] = 1);
  for (var l = bh(o, i, r, n), c = a, u = 0; u < 3; ++u)
    l[u] = parseInt(l[u], 10);
  var d = new Ci(l, {
    type: "color",
    model: c,
    prefix: "".concat(c, "("),
    suffix: ")"
  });
  return d;
}
function p4(e, t, r, n) {
  var o = e.type;
  if (o === "color")
    return h4(e, t, r, n);
  var i = e.value, a = t.value, s = bh(i, a, r, n);
  return new Ci(s, {
    type: o,
    separator: e.separator || t.separator,
    prefix: e.prefix || t.prefix,
    suffix: e.suffix || t.suffix,
    model: e.model || t.model
  });
}
function Ta(e, t, r, n) {
  if (n === 0)
    return t;
  if (r === 0 || r + n === 0)
    return e;
  var o = Ma(e), i = Ma(t), a = o === va, s = i === va;
  if (a || s)
    return function() {
      return Ta(a ? Gr(e()) : e, s ? Gr(t()) : t, r, n);
    };
  if (o === i) {
    if (o === rc)
      return p4(e, t, r, n);
    if (o === Mf)
      return bh(e, t, r, n);
    if (o !== "value")
      return e;
  } else
    return e;
  var l = Wr("".concat(e)), c = Wr("".concat(t)), u;
  if (isNaN(l.value) || isNaN(c.value))
    return e;
  u = Zo(l.value, c.value, r, n);
  var d = l.prefix || c.prefix, h = l.unit || c.unit;
  return !d && !h ? u : d + u + h;
}
function v4(e, t, r, n, o, i) {
  if (e === t)
    return n;
  if (e === r)
    return o;
  if (!i)
    return Ta(n, o, e - t, r - e);
  var a = i((e - t) / (r - t)), s = Ta(n, o, a, 1 - a);
  return s;
}
function eg(e, t) {
  for (var r = e.length, n = 0; n < r; ++n) {
    if (e[n] === t)
      return [n, n];
    if (e[n] > t)
      return [n > 0 ? n - 1 : 0, n];
  }
  return [r - 1, r - 1];
}
function tg(e) {
  var t = [];
  for (var r in e)
    t.push("".concat($a, "-").concat(kf(r), ":").concat(e[r], ";"));
  return t.join("");
}
function g4(e, t) {
  for (var r = e.length, n = 0; n < r; ++n)
    if (t < e[n]) {
      e.splice(n, 0, t);
      return;
    }
  e[r] = t;
}
function _d(e, t, r) {
  var n = e[e.length - 1];
  (!n || n[0] !== t || n[1] !== r) && e.push([si(t), si(r)]);
}
function m4(e, t) {
  var r = e.map(function(o) {
    return [o, o];
  }), n = [];
  return t.forEach(function(o) {
    for (var i = o[yr], a = o[Jt], s = o[En], l = o[Xa], c = Math.ceil(i), u = r[r.length - 1][0], d = r.length, h = u * i, p = 0; p < c; ++p)
      for (var g = l === fb || l === Sd && p % 2 || l === Cd && !(p % 2), v = 0; v < d; ++v) {
        var m = r[g ? d - v - 1 : v], x = m[1], y = u * p + (g ? u - m[0] : m[0]), b = r[g ? d - v : v - 1];
        if (y > h) {
          if (v !== 0) {
            var w = u * p + (g ? u - b[0] : b[0]), _ = Zo(b[1], x, h - w, y - h);
            _d(n, (a + u * i) / s, _);
          }
          break;
        } else if (y === h && n.length && n[n.length - 1][0] === h + a)
          break;
        _d(n, (a + y) / s, x);
      }
    a && n.unshift([0, n[0][1]]), r = n, n = [];
  }), r;
}
var x4 = /* @__PURE__ */ function(e) {
  vc(t, e);
  function t(r, n) {
    var o = e.call(this) || this;
    return o.times = [], o.items = {}, o.nameMap = new Go(Xn), o.elements = [], o.needUpdate = !0, o.registeredElement = !1, o.load(r, n), o;
  }
  return t.prototype.getDuration = function() {
    var r = this.times, n = r.length;
    return (n === 0 ? 0 : r[n - 1]) || this.state[Or];
  }, t.prototype.size = function() {
    return this.times.length;
  }, t.prototype.setDuration = function(r) {
    if (!r)
      return this;
    var n = this.getDuration();
    if (n > 0) {
      var o = r / n, i = this, a = i.times, s = i.items, l = {};
      this.times = a.map(function(c) {
        var u = si(c * o);
        return l[u] = s[c], u;
      }), this.items = l;
    } else
      this.newFrame(r);
    return this;
  }, t.prototype.setId = function(r) {
    var n = this.state, o = this.elements, i = o.length;
    if (n.id = r || yb(!!i), i && !n[er]) {
      var a = Zv(this.getId());
      n[er] = "[".concat(Yv, '="').concat(a, '"]'), o.forEach(function(s) {
        s.setAttribute(Yv, a);
      });
    }
    return this;
  }, t.prototype.set = function(r) {
    for (var n = this, o = [], i = 1; i < arguments.length; i++)
      o[i - 1] = arguments[i];
    if ($i(r))
      return this.set(0, r);
    if (Ue(r))
      for (var a = r.length, s = 0; s < a; ++s) {
        var l = a === 1 ? 0 : this.getUnitTime("".concat(s / (a - 1) * 100, "%"));
        this.set(l, r[s]);
      }
    else if (it(r)) {
      var c = function(d) {
        var h = r[d];
        rr(d).forEach(function(p) {
          var g = n.getUnitTime(p);
          isNaN(g) ? ph(h, [p]).forEach(function(v) {
            for (var m, x = oa(v.slice(1), h), y = Ue(x) ? x : [oa(v, n.target), x], b = y.length, w = 0; w < b; ++w)
              (m = n.newFrame("".concat(w / (b - 1) * 100, "%"))).set.apply(m, Je(Je([], v, !1), [y[w]], !1));
          }) : n.set(g, h);
        });
      };
      for (var l in r)
        c(l);
    } else if (!gr(r)) {
      var u = o[0];
      rr(r + "").forEach(function(d) {
        var h = n.getUnitTime(d);
        if ($i(u)) {
          var p = u.getDelay(), g = u.toObject(!n.hasFrame(h + p)), v = u.getDuration(), m = u.getDirection(), x = m.indexOf("reverse") > -1;
          for (var y in g) {
            var b = x ? v - parseFloat(y) : parseFloat(y);
            n.set(h + b, g[y]);
          }
        } else if (o.length === 1 && Ue(u))
          u.forEach(function(_) {
            n.set(h, _);
          });
        else {
          var w = n.newFrame(h);
          w.set.apply(w, o);
        }
      });
    }
    return this.needUpdate = !0, this;
  }, t.prototype.get = function(r) {
    for (var n = [], o = 1; o < arguments.length; o++)
      n[o - 1] = arguments[o];
    var i = this.getFrame(r);
    return i && i.get.apply(i, n);
  }, t.prototype.getOrders = function(r) {
    return this.needUpdate && this.update(), this.nameMap.get(r);
  }, t.prototype.setOrders = function(r, n) {
    this.needUpdate && this.update();
    var o = this.nameMap.set(r, n);
    return this.updateFrameOrders(), o;
  }, t.prototype.getOrderObject = function() {
    return this.nameMap.getObject();
  }, t.prototype.setOrderObject = function(r) {
    this.nameMap.setObject(r), this.updateFrameOrders();
  }, t.prototype.remove = function(r) {
    for (var n = [], o = 1; o < arguments.length; o++)
      n[o - 1] = arguments[o];
    if (n.length) {
      var i = this.getFrame(r);
      i && i.remove.apply(i, n);
    } else
      this.removeFrame(r);
    return this.needUpdate = !0, this;
  }, t.prototype.append = function(r) {
    return $i(r) ? this.set(this.getDuration(), r) : this.append(new t(r)), this;
  }, t.prototype.prepend = function(r) {
    if ($i(r)) {
      var n = r.getDuration() + r.getDelay(), o = this.getFrame(0);
      this.removeFrame(0), this.unshift(n), this.set(0, r), this.set(n + zi, o);
    } else
      this.prepend(new t(r));
    return this;
  }, t.prototype.unshift = function(r) {
    var n = this, o = n.times, i = n.items, a = {};
    return this.times = o.map(function(s) {
      var l = si(r + s);
      return a[l] = i[s], l;
    }), this.items = a, this;
  }, t.prototype.toObject = function(r) {
    r === void 0 && (r = !0);
    var n = {}, o = this.getDelay();
    return this.forEach(function(i, a) {
      n[(!a && !r ? zi : 0) + o + a] = i.clone();
    }), n;
  }, t.prototype.setSelector = function(r) {
    return this.setElement(r), this;
  }, t.prototype.getElements = function() {
    return this.elements;
  }, t.prototype.setElements = function(r) {
    return this.setElement(r);
  }, t.prototype.setElement = function(r) {
    r !== !0 && this.registeredElement !== r && (this.registeredElement = r);
    var n = this.state, o = this.registeredElement, i = r, a = [];
    if (Lt(o) && (i = o(this.getId(), 0)), i) {
      if (i === !0 || rt(i)) {
        var s = rt(n[er]) && n[er] || "".concat(n.id), l = i === !0 ? s : i, c = /([\s\S]+)(:+[a-zA-Z]+)$/g.exec(l);
        try {
          a = Xc(ol(c ? c[1] : l, !0));
        } catch {
          a = [];
        }
        n[er] = l;
      } else if (u4(i))
        a = Xc(i);
      else if (i instanceof Element)
        a = [i];
      else if ("current" in i || "value" in i) {
        var u = i.current || i.value;
        u ? a = [u] : a = [];
      }
    } else return this;
    return a.length ? (this.elements = a, this.setId(this.getId()), this.target = a[0].style, this.targetFunc = function(d) {
      var h = d.get("attribute");
      if (h) {
        var p = function(x) {
          a.forEach(function(y) {
            y.setAttribute(x, h[x]);
          });
        };
        for (var g in h)
          p(g);
      }
      if (d.has("html")) {
        var v = d.get("html");
        a.forEach(function(x) {
          x.innerHTML = v;
        });
      }
      var m = d.toCSSText();
      if (n.cssText !== m)
        return n.cssText = m, a.forEach(function(x) {
          x.style.cssText += m;
        }), d;
    }, this) : this;
  }, t.prototype.setTarget = function(r) {
    return this.target = r, this.targetFunc = function(n) {
      var o = n.get();
      for (var i in o)
        r[i] = o[i];
    }, this;
  }, t.prototype.setCSS = function(r, n) {
    return n === void 0 && (n = []), this.set(r, jk(this.elements, n)), this;
  }, t.prototype.setTime = function(r, n, o, i) {
    var a = this;
    return e.prototype.setTime.call(this, r, n, o, function() {
      var s = a.getIterationTime(), l = a.getEasing() || i, c = a.getNowFrame(s, l), u = a.getTime();
      a.temp = c, a.trigger("animate", {
        frame: c,
        currentTime: u,
        time: s
      }), a.targetFunc && a.targetFunc(c);
    }), this;
  }, t.prototype.update = function() {
    var r = this.nameMap, n = {};
    this.forEach(function(a) {
      gb(n, a.properties);
    });
    var o = new Go(Xn);
    function i(a, s) {
      var l = ar(a);
      Yi(l, r.get(s)), o.set(s, l), l.forEach(function(c) {
        var u = a[c];
        it(u) && i(u, Je(Je([], s, !0), [c], !1));
      });
    }
    return i(n, []), this.nameMap = o, this.forEach(function(a) {
      a.setOrderObject(o.orderMap);
    }), this.needUpdate = !1, this;
  }, t.prototype.newFrame = function(r) {
    var n = this.getFrame(r);
    return n || (n = new uo(), this.setFrame(r, n), n);
  }, t.prototype.setFrame = function(r, n) {
    var o = this.getUnitTime(r);
    return this.items[o] = n, g4(this.times, o), this.needUpdate = !0, this;
  }, t.prototype.getFrame = function(r) {
    return this.items[this.getUnitTime(r)];
  }, t.prototype.removeFrame = function(r) {
    var n = this.getUnitTime(r), o = this.items, i = this.times.indexOf(n);
    return delete o[n], i > -1 && this.times.splice(i, 1), this.needUpdate = !0, this;
  }, t.prototype.hasFrame = function(r) {
    return this.getUnitTime(r) in this.items;
  }, t.prototype.hasName = function(r) {
    return this.needUpdate && this.update(), !!this.nameMap.hasName(r);
  }, t.prototype.mergeFrame = function(r, n) {
    if (n) {
      var o = this.newFrame(r);
      o.merge(n);
    }
    return this;
  }, t.prototype.getNowFrame = function(r, n, o) {
    var i = this;
    this.needUpdate && this.update();
    var a = new uo(), s = eg(this.times, r), l = s[0], c = s[1], u = this.getEasing() || n, d = this.nameMap;
    if (this.hasName([Cn])) {
      var h = this.getNowValue(r, [Cn], l, c, !1, 0, !0);
      Lt(h) && (u = h);
    }
    if (o) {
      var p = this.getFrame(r), g = p.orderMap.filter([], function(y) {
        return p.has.apply(p, y);
      });
      for (var v in cb) {
        var m = d.get([v]);
        g.get([v]) && m && g.set([v], m);
      }
      d = g;
    }
    var x = d.gets([]);
    return a.setOrderObject(d.orderMap), x.forEach(function(y) {
      var b = i.getNowValue(r, y, l, c, o, u, Ed(y));
      gr(b) || a.set(y, b);
    }), a;
  }, t.prototype.getCurrentFrame = function(r, n) {
    var o = this.getIterationTime(), i = r || this.needUpdate || !this.temp ? this.getComputedFrame(o, n) : this.temp;
    return this.temp = i, i;
  }, t.prototype.getComputedFrame = function(r, n, o) {
    return this.getNowFrame(r, n, o);
  }, t.prototype.load = function(r, n) {
    var o;
    if (r === void 0 && (r = {}), n === void 0 && (n = r.options), n && this.setOptions(n), Ue(r))
      this.set(r);
    else if (r.keyframes)
      this.set(r.keyframes);
    else
      for (var i in r)
        i !== "options" && this.set((o = {}, o[i] = r[i], o));
    return n && n[Or] && this.setDuration(n[Or]), this;
  }, t.prototype.clone = function() {
    var r = new t();
    return r.setOptions(this.state), r.setOrderObject(this.nameMap.orderMap), this.forEach(function(n, o) {
      r.setFrame(o, n.clone());
    }), r;
  }, t.prototype.forEach = function(r) {
    var n = this.times, o = this.items;
    return n.forEach(function(i) {
      r(o[i], i, o);
    }), this;
  }, t.prototype.setOptions = function(r) {
    r === void 0 && (r = {}), e.prototype.setOptions.call(this, r);
    var n = r.id, o = r.selector, i = r.elements, a = r.element, s = r.target;
    return n && this.setId(n), s ? this.setTarget(s) : o && !this.state.noRegisterElement ? this.setSelector(o) : (i || a) && this.setElement(i || a), this;
  }, t.prototype.toCSS = function(r, n, o) {
    r === void 0 && (r = { className: No }), n === void 0 && (n = this.getDuration()), o === void 0 && (o = []);
    var i = this.state, a = i[er];
    if (!a)
      return "";
    var s = this.getDuration();
    i[Or] = s, o.push(i);
    var l = Xc(o).reverse(), c = Zv(bb(this)), u = o[0], d = Yr(l, function(k) {
      return k[yr] === na || !isFinite(k[Or]);
    }, o.length - 1), h = l.slice(0, d), p = n || h.reduce(function(k, j) {
      return (j[Jt] + k * j[yr]) / j[En];
    }, s), g = l.slice(d).reduce(function(k, j) {
      return (k + j[Jt]) / j[En];
    }, 0), v = zt(l, function(k) {
      return k[Da] && k[ai];
    }, i)[ai], m = l[d][yr], x = u[gc], y = l[d][Xa], b = tg({
      fillMode: x,
      direction: y,
      iterationCount: m,
      delay: "".concat(g, "s"),
      name: "".concat(Wv, "KEYFRAMES_").concat(c),
      duration: "".concat(p / u[En], "s"),
      timingFunction: v
    }), w = rr(a).map(function(k) {
      var j = /([\s\S]+)(:+[a-zA-Z]+)$/g.exec(k);
      return j ? [j[1], j[2]] : [k, ""];
    }), _ = r.className, R = r.selector, T = Lt(R) ? R(this, a) : R;
    return `
    `.concat(T || w.map(function(k) {
      var j = k[0], A = k[1];
      return "".concat(j, ".").concat(_).concat(A);
    }), " {").concat(b, `}
    `).concat(w.map(function(k) {
      var j = k[0], A = k[1];
      return "".concat(j, ".").concat(Fs).concat(A);
    }), " {").concat($a, `-play-state: paused;}
    @`).concat(yk, " ").concat(Wv, "KEYFRAMES_").concat(c, "{").concat(this._toKeyframes(p, h, y), "}");
  }, t.prototype.exportCSS = function(r, n, o) {
    if (!this.elements.length)
      return "";
    var i = this.toCSS(r, n, o), a = o && !gr(o[yr]);
    return a || (this.styledInjector && (this.styledInjector.destroy(), this.styledInjector = null), this.styled = ic(i), this.styledInjector = this.styled.inject(this.getAnimationElement(), { original: !0 })), this;
  }, t.prototype.pause = function() {
    return e.prototype.pause.call(this), vh(this) && this.pauseCSS(), this;
  }, t.prototype.pauseCSS = function() {
    return this.elements.forEach(function(r) {
      wa(r, Fs);
    }), this;
  }, t.prototype.endCSS = function() {
    return this.elements.forEach(function(r) {
      Ro(r, Fs), Ro(r, No);
    }), mc(this, !1), this;
  }, t.prototype.end = function() {
    return xb(this) && this.endCSS(), e.prototype.end.call(this), this;
  }, t.prototype.playCSS = function(r, n, o) {
    return r === void 0 && (r = !0), o === void 0 && (o = {}), wb(this, r, n, o), this;
  }, t.prototype.getAnimationElement = function() {
    return this.elements[0];
  }, t.prototype.addPlayClass = function(r, n, o) {
    o === void 0 && (o = {});
    var i = this.elements, a = i.length, s = tg(o);
    if (a)
      return r ? i.forEach(function(l) {
        Ro(l, Fs);
      }) : (i.forEach(function(l) {
        l.style.cssText += s, ut(l, No) && Ro(l, No);
      }), i.forEach(function(l) {
        l.clientWidth;
      }), i.forEach(function(l) {
        wa(l, No);
      })), i[0];
  }, t.prototype.clear = function() {
    return this.times = [], this.items = {}, this.nameMap = new Go(Xn), this.styledInjector && this.styledInjector.destroy(), this.styled = null, this.styledInjector = null, this.temp = null, this.needUpdate = !0, this;
  }, t.prototype.getNowValue = function(r, n, o, i, a, s, l) {
    var c = this.times, u = c.length, d, h, p, g, v = gr(o), m = gr(i);
    if (v || m) {
      var x = eg(c, r);
      v && (o = x[0]), m && (i = x[1]);
    }
    for (var y = o; y >= 0; --y) {
      var b = this.getFrame(c[y]);
      if (b.has.apply(b, n)) {
        d = c[y], p = b;
        break;
      }
    }
    var w = p && p.raw.apply(p, n);
    if (a && !Do([n[0]]))
      return d === r ? w : void 0;
    if (l)
      return w;
    for (var y = i; y < u; ++y) {
      var b = this.getFrame(c[y]);
      if (b.has.apply(b, n)) {
        h = c[y], g = b;
        break;
      }
    }
    var _ = g && g.raw.apply(g, n);
    return !p || gr(w) ? _ : !g || gr(_) || w === _ ? w : v4(r, Math.max(d, 0), h, w, _, s);
  }, t.prototype._toKeyframes = function(r, n, o) {
    var i = this, a = {}, s = this.times.slice();
    if (!s.length)
      return "";
    var l = this.getDuration();
    !this.getFrame(0) && s.unshift(0), !this.getFrame(l) && s.push(l);
    var c = m4(s, n), u = c[c.length - 1];
    u[0] < r && _d(c, r, u[1]);
    var d = -1;
    return c.map(function(h) {
      var p = h[0], g = h[1];
      a[g] || (a[g] = (!i.hasFrame(g) || g === 0 || g === l ? i.getNowFrame(g) : i.getNowFrame(g, 0, !0)).toCSSText());
      var v = p / r * 100;
      return v - d < zi && (v += zi), d = v, "".concat(Math.min(v, 100), `%{
                `).concat(p === 0 && !Eb(0, 1, o) ? "" : a[g], `
            }`);
    }).join("");
  }, t.prototype.updateFrameOrders = function() {
    var r = this.nameMap.orderMap;
    this.forEach(function(n) {
      n.setOrderObject(r);
    });
  }, t;
}(mh), Db = /* @__PURE__ */ function(e) {
  vc(t, e);
  function t(r, n) {
    var o = e.call(this) || this;
    return o.items = {}, o.orderMap = new Go(Xn), o.load(r, n), o;
  }
  return t.prototype.getDuration = function() {
    var r = 0;
    return this.forEach(function(n) {
      r = Math.max(r, n.getTotalDuration() / n.getPlaySpeed());
    }), r || this.state[Or];
  }, t.prototype.setDuration = function(r) {
    this.items;
    var n = this.getDuration();
    if (r === 0 || !isFinite(n))
      return this;
    if (n === 0)
      this.forEach(function(i) {
        i.setDuration(r);
      });
    else {
      var o = r / n;
      this.forEach(function(i) {
        i.setDelay(i.getDelay() * o), i.setDuration(i.getDuration() * o);
      });
    }
    return e.prototype.setDuration.call(this, r), this;
  }, t.prototype.getItem = function(r) {
    return this.items[r];
  }, t.prototype.newItem = function(r, n) {
    if (n === void 0 && (n = {}), this.items[r])
      return this.items[r];
    var o = new x4();
    return this.setItem(r, o), o.setOptions(n), o;
  }, t.prototype.removeItem = function(r) {
    return delete this.items[r], this.orderMap.remove([r]), this;
  }, t.prototype.setItem = function(r, n) {
    return n.setId(r), this.items[r] = n, this.orderMap.add([r]), this;
  }, t.prototype.getCurrentFrames = function(r, n) {
    var o = this.getEasing() || n, i = {};
    return this.forEach(function(a) {
      var s = a.getId();
      Qv(a) ? i[s] = a.getCurrentFrames(r, o) : i[s] = a.getCurrentFrame(r, o);
    }), this.temp = i, i;
  }, t.prototype.getCurrentFlattedFrames = function(r, n) {
    var o = this.getCurrentFrames(r, n);
    return Cb(o, Xn);
  }, t.prototype.setTime = function(r, n, o, i) {
    var a = this;
    return e.prototype.setTime.call(this, r, n, o, function() {
      var s = a.getIterationTime(), l = a.getEasing() || i;
      a.forEach(function(u) {
        u.setTime(s * u.getPlaySpeed() - u.getDelay(), n, !0, l);
      });
      var c = a.getCurrentFrames(!1, i);
      a.trigger("animate", {
        frames: c,
        currentTime: a.getTime(),
        time: s
      });
    }), this;
  }, t.prototype.forEach = function(r) {
    var n = this.items;
    return this.getOrders().forEach(function(o, i) {
      r(n[o], o, i, n);
    }), this;
  }, t.prototype.toCSS = function(r, n, o) {
    n === void 0 && (n = this.getDuration()), o === void 0 && (o = []);
    var i = !n || !isFinite(n) ? 0 : n, a = [], s = this.state;
    return s[Or] = this.getDuration(), this.forEach(function(l) {
      a.push(l.toCSS(r, i, o.concat(s)));
    }), a.join("");
  }, t.prototype.exportCSS = function(r, n, o) {
    var i = this.toCSS(r, n, o);
    return (!o || !o.length) && (this.styledInjector && (this.styledInjector.destroy(), this.styledInjector = null), this.styled = ic(i), this.styledInjector = this.styled.inject(this.getAnimationElement(), { original: !0 })), this;
  }, t.prototype.append = function(r) {
    r.setDelay(r.getDelay() + this.getDuration()), this.setItem(bb(r), r);
  }, t.prototype.pauseCSS = function() {
    return this.forEach(function(r) {
      r.pauseCSS();
    });
  }, t.prototype.pause = function() {
    return e.prototype.pause.call(this), vh(this) && this.pauseCSS(), this.forEach(function(r) {
      r.pause();
    }), this;
  }, t.prototype.endCSS = function() {
    this.forEach(function(r) {
      r.endCSS();
    }), mc(this, !1);
  }, t.prototype.end = function() {
    return xb(this) && this.endCSS(), e.prototype.end.call(this), this;
  }, t.prototype.getOrders = function() {
    return this.orderMap.get([]) || [];
  }, t.prototype.setOrders = function(r) {
    return this.orderMap.set([], r);
  }, t.prototype.getAnimationElement = function() {
    var r;
    return this.forEach(function(n) {
      var o = n.getAnimationElement();
      !r && (r = o);
    }), r;
  }, t.prototype.addPlayClass = function(r, n, o) {
    o === void 0 && (o = {});
    var i;
    return this.forEach(function(a) {
      var s = a.addPlayClass(r, n, o);
      !i && (i = s);
    }), i;
  }, t.prototype.playCSS = function(r, n, o) {
    return r === void 0 && (r = !0), o === void 0 && (o = {}), wb(this, r, n, o), this;
  }, t.prototype.set = function(r) {
    return this.load(r), this;
  }, t.prototype.clear = function() {
    this.finish(), this.items = {}, this.orderMap = new Go(Xn), this.styledInjector && this.styledInjector.destroy(), this.styled = null, this.styledInjector = null;
  }, t.prototype.load = function(r, n) {
    if (r === void 0 && (r = {}), n === void 0 && (n = r.options), !r)
      return this;
    this.setOptions(n);
    var o = n && n[er] || this.state[er], i = function(l) {
      if (l === "options")
        return "continue";
      var c = r[l], u = void 0;
      if (Qv(c) || $i(c))
        a.setItem(l, c), u = c;
      else if (Lt(c)) {
        var d = [];
        o && nc && (a.state.noRegisterElement || (d = ol("".concat(Lt(o) ? o(l) : l), !0)));
        for (var h = d.length, p = h || c.defaultCount || 0, g = new t(), v = [], m = 0; m < p; ++m) {
          var x = d[m], y = g.newItem(m);
          y.setId().load(c(m, d[m])), v.push(y.getId()), x && y.setElement(x);
        }
        if (!h) {
          var b = [];
          g.state[er] = function(w) {
            return b.length || (b = ol("".concat(Lt(o) ? o(l) : l), !0)), b[v.indexOf(w)];
          };
        }
        return a.setItem(l, g), "continue";
      } else
        u = a.newItem(l, {
          noRegisterElement: !0
        }), u.load(c);
      a.state.noRegisterElement || o && u.setSelector(o);
    }, a = this;
    for (var s in r)
      i(s);
  }, t.prototype.setOptions = function(r) {
    r === void 0 && (r = {}), e.prototype.setOptions.call(this, r);
    var n = r.selector;
    return n && (this.state[er] = n), this;
  }, t.prototype.setSelector = function(r) {
    var n = this.state, o = r === !0 ? n[er] || !0 : r;
    n[er] = o;
    var i = Lt(r);
    return o && this.forEach(function(a, s) {
      a.setSelector(i ? r(s) : o);
    }), this;
  }, t.prototype.start = function(r) {
    r === void 0 && (r = this.state[Jt]);
    var n = e.prototype.start.call(this, r);
    return n ? this.forEach(function(o) {
      o.start(0);
    }) : this.forEach(function(o) {
      o.setPlayState(Ra);
    }), n;
  }, t.VERSION = "1.10.3", t;
}(mh);
function Ka(e) {
  var t = e.prototype;
  return ar(t).filter(function(r) {
    var n = Object.getOwnPropertyDescriptor(t, r);
    return r === "constructor" ? !1 : !n.get && !n.set && Lt(n.value || t[r]);
  });
}
var y4 = Ka(In), wh = Je(Je([], y4, !0), Ka(mh), !0);
Je(Je([], wh, !0), Ka(Db), !0);
Je(Je([], wh, !0), Ka(Db), !0);
var rg = Je(Je([], wh, !0), Ka(uo), !0), ng = {
  methods: rg,
  created: function(e) {
    var t = Lt(e) ? e() : e, r = _a(0), n;
    sb(t) ? n = t : n = _a(gh(t) ? t : new uo(t));
    var o = pu(function() {
      return n.current, r.current, n.current.toCSSText();
    }), i = pu(function() {
      return n.current, o.current, n.current.toCSSObject();
    }), a = pu(function() {
      return n.current, o.current, n.current.toCSSObject(!0);
    }), s = function() {
      ++r.current;
    };
    n.subscribe(function(c, u) {
      u.off("update", s), c.on("update", s);
    });
    var l = HO(Na({ cssText: o, cssObject: i, camelCasedCSSObject: a, onUpdate: s }, rg.reduce(function(c, u) {
      return c[u] = function() {
        for (var d, h = [], p = 0; p < arguments.length; p++)
          h[p] = arguments[p];
        var g = n.current;
        return g == null ? void 0 : (d = g[u]).call.apply(d, Je([g], h, !1));
      }, c;
    }, {})));
    return l;
  },
  destroy: function(e) {
    e.off("update", e.onUpdate);
  }
};
Na(Na({}, ng), { created: function(e) {
  var t = Lt(e) ? e() : e, r = _a(new uo());
  return t.on("animate", function(n) {
    r.current = n.frame;
  }), ng.created(r);
} });
function b4(e, t) {
  return (e.getOrders(["transform"]) || []).indexOf(t);
}
class Sh {
  constructor(t = {}) {
    this.map = /* @__PURE__ */ new Map(), this.onBeforeRenderStart = (r) => {
      const n = this.testFrame(r);
      r.setTransform(n?.toCSSObject().transform || "");
    }, this.onBeforeRenderGroupStart = (r) => {
      r.events.forEach((n) => {
        this.onBeforeRenderStart(n);
      });
    }, this.onDragStart = (r) => {
      const n = this.testFrame(r);
      if (!n)
        return !1;
      this.setTranasform(r, n, "translate");
    }, this.onDrag = (r) => {
      this.testDrag(r), this.testRender(r.target);
    }, this.onDragGroupStart = (r) => {
      r.events.forEach((n) => {
        this.onDragStart(n);
      });
    }, this.onDragGroup = (r) => {
      r.events.forEach((n) => {
        this.onDrag(n);
      });
    }, this.onResizeStart = (r) => {
      r.dragStart && this.onDragStart(r.dragStart), r.setOrigin(["%", "%"]);
    }, this.onResize = (r) => {
      this.testResize(r), this.testRender(r.target);
    }, this.onResizeGroupStart = (r) => {
      r.events.forEach((n) => {
        this.onResizeStart(n);
      });
    }, this.onResizeGroup = (r) => {
      r.events.forEach((n) => {
        this.onResize(n);
      });
    }, this.onScaleStart = (r) => {
      const n = this.testFrame(r);
      if (!n)
        return !1;
      this.setTranasform(r, n, "scale"), r.dragStart && this.onDragStart(r.dragStart);
    }, this.onScale = (r) => {
      this.testScale(r), this.testRender(r.target);
    }, this.onScaleGroupStart = (r) => {
      r.events.forEach((n) => {
        this.onScaleStart(n);
      });
    }, this.onScaleGroup = (r) => {
      r.events.forEach((n) => {
        this.onScale(n);
      });
    }, this.onRotateStart = (r) => {
      const n = this.testFrame(r);
      if (!n)
        return !1;
      this.setTranasform(r, n, "rotate"), r.dragStart && this.onDragStart(r.dragStart);
    }, this.onRotate = (r) => {
      this.testRotate(r), this.testRender(r.target);
    }, this.onRotateGroupStart = (r) => {
      r.events.forEach((n) => {
        this.onRotateStart(n);
      });
    }, this.onRotateGroup = (r) => {
      r.events.forEach((n) => {
        this.onRotate(n);
      });
    }, this.onClip = (r) => {
      const n = this.testFrame(r);
      n && (r.clipType === "rect" ? n.set("clip", r.clipStyle) : n.set("clip-path", r.clipStyle)), this.testRender(r.target);
    }, this.onDragOriginStart = (r) => {
      r.dragStart && this.onDragStart(r.dragStart);
    }, this.onDragOrigin = (r) => {
      const n = this.testFrame(r);
      n && (n.set("transform-origin", r.transformOrigin), this.testDrag(r.drag), this.testRender(r.target));
    }, this.onRound = (r) => {
      const n = this.testFrame(r);
      n && (n.set("border-radius", r.borderRadius), this.testRender(r.target));
    }, this.onWarpStart = (r) => {
      const n = this.testFrame(r);
      if (!n)
        return !1;
      this.setTranasform(r, n, "matrix3d");
    }, this.onWarp = (r) => {
      const n = this.testFrame(r);
      n && (n.set("transform", "matrix3d", r.matrix.join(", ")), this.testRender(r.target));
    }, this.onRender = (r) => {
      const n = r.target, o = this.getFrame(n);
      !n || !o || this.render(n, o);
    }, this.options = {
      useBeforeRender: !1,
      useRender: !1,
      createAuto: !0,
      ...t
    };
  }
  static create(t) {
    return new Sh(t);
  }
  render(t, r = this.getFrame(t) || new uo()) {
    t.style.cssText += r.toCSS();
  }
  clear() {
    this.map.clear();
  }
  getTargets() {
    return this.map.keys();
  }
  getFrames() {
    return this.map.values();
  }
  getFrame(t) {
    return this.map.get(t);
  }
  setFrame(t, r) {
    return this.map.set(t, r);
  }
  removeFrame(t) {
    this.map.delete(t);
  }
  createFrame(t, r = {}) {
    const { translate: n, rotate: o, scale: i } = w4(t), a = new uo({
      transform: {
        translate: n,
        rotate: o,
        scale: i
      }
    });
    return a.set(r), this.map.set(t, a), a;
  }
  setElements(t) {
    const r = rt(t) ? document.querySelectorAll(t) : t, n = r.length, o = this.map;
    for (let i = 0; i < n; ++i) {
      const a = r[i];
      o.has(a) || this.createFrame(a);
    }
  }
  testFrame(t) {
    const r = t.target, n = this.getFrame(r);
    if (n)
      return n;
    if (!this.options.createAuto && t.stop) {
      t.stop();
      return;
    }
    return this.createFrame(r);
  }
  testDrag(t) {
    const r = t.target, n = t.translate, o = this.getFrame(r), i = `${n[0]}px`, a = `${n[1]}px`;
    o && (o.has("transform", "translate") ? o.set("transform", "translate", `${i},${a}`) : (o.set("transform", "translateX", i), o.set("transform", "translateY", a)));
  }
  testResize(t) {
    const r = t.target, n = this.getFrame(r);
    n && (n.set("width", `${t.width}px`), n.set("height", `${t.height}px`), this.testDrag(t.drag));
  }
  testScale(t) {
    const r = this.testFrame(t), n = t.scale;
    r && (this.testDrag(t.drag), r.set("transform", "scale", `${n[0]},${n[1]}`));
  }
  testRotate(t) {
    const r = this.testFrame(t), n = t.rotate;
    r && (this.testDrag(t.drag), r.set("transform", "rotate", `${n}deg`));
  }
  testRender(t, r = this.getFrame(t)) {
    this.options.useRender || this.render(t, r);
  }
  setTranasform(t, r, n) {
    const o = b4(r, n);
    this.options.useBeforeRender ? t.setTransformIndex(o) : t.setTransform(r.toCSSObject().transform || [], o);
  }
}
function w4(e) {
  let t = "";
  if (e.style.transform)
    t = e.style.transform;
  else {
    const i = window.getComputedStyle(e);
    t = i.transform || i.webkitTransform;
  }
  let r = "0px, 0px", n = "0deg", o = "1, 1";
  if (t && t !== "none")
    if (t.startsWith("matrix")) {
      const i = t.match(/matrix\((.*?)\)/);
      if (i && i[1]) {
        const a = i[1].split(",").map((s) => parseFloat(s.trim()));
        a.length >= 6 && (r = `${a[4]}px, ${a[5]}px`);
      }
    } else {
      const i = t.match(/translate\(\s*([\d.]+)px\s*,\s*([\d.]+)px\s*\)/);
      i && (r = `${i[1]}px, ${i[2]}px`);
      const a = t.match(/rotate\(\s*([\d.]+)deg\s*\)/);
      a && (n = `${a[1]}deg`);
      const s = t.match(/scale\(\s*([\d.]+)(?:\s*,\s*([\d.]+))?\s*\)/);
      s && (s[2] ? o = `${s[1]}, ${s[2]}` : o = `${s[1]}, ${s[1]}`);
    }
  return {
    translate: r,
    rotate: n,
    scale: o
  };
}
class S4 extends Sh {
  constructor(t) {
    super({
      createAuto: !0,
      useBeforeRender: !0
    }), this.memory = t, this.selectedTargets = [];
  }
  setSelectedTargets(t) {
    this.selectedTargets = t;
  }
  getSelectedTargets() {
    return this.selectedTargets;
  }
  getSelectedFrames() {
    return this.getSelectedTargets().map(
      (t) => this.getFrame(t)
    );
  }
  renderFrames() {
    this.getSelectedTargets().forEach((t) => {
      this.render(t);
    });
  }
  setOrders(t, r) {
    return this.setValue((n) => {
      n.setOrders(t, r);
    });
  }
  setProperty(t, r) {
    return this.setValue((n) => {
      n.set(...t, r);
    });
  }
  removeProperties(...t) {
    return this.setValue((r, n) => {
      t.forEach((o) => {
        r.remove(o), n.style.removeProperty(o);
      });
    });
  }
  getProperties(t, r) {
    const n = this.getSelectedFrames(), o = this.memory;
    return n.length ? t.map((i, a) => n.map((l) => l.get(...i)).filter((l) => l)[0] || r[a]) : t.map(
      (i, a) => o.get(i.join("///")) || r[a]
    );
  }
  setValue(t) {
    const n = this.getSelectedTargets().map((o) => {
      const i = this.getFrame(o), a = i?.getOrderObject(), s = i?.get();
      t(i, o);
      const l = i?.get(), c = i?.getOrderObject();
      return { id: Bg(o), prev: s, prevOrders: a, next: l, nextOrders: c };
    });
    return this.renderFrames(), n;
  }
}
class C4 extends C.PureComponent {
  constructor(t) {
    super(t), this.memory = new TO(), this.moveableData = new S4(this.memory), this.moveable = C.createRef(), this.positionSyncManager = null, this.hasLockedElements = () => {
      const { selectedTargets: r } = this.props;
      if (r.length === 0) return !1;
      const n = ke.getState();
      return n.json?.docs[0] ? r.some((i) => {
        const a = i.dataset.veltixNodeId, s = i.dataset.veltixDocId;
        return a && s ? n.getNode(s, a)?.position?.locked === !0 : !1;
      }) : !1;
    }, this.updatePositionSyncManager = () => {
      this.positionSyncManager && this.positionSyncManager.updateProps({
        selectedTargets: this.props.selectedTargets
      });
    }, this.positionSyncManager = new MO(this, {
      selectedTargets: t.selectedTargets,
      moveableData: null,
      // 将在 componentDidMount 中设置
      updateRect: this.updateRect.bind(this)
    });
  }
  getMoveable() {
    return this.moveable.current;
  }
  // 生命周期方法 - 组件挂载时初始化同步管理器
  componentDidMount() {
    this.positionSyncManager && (this.positionSyncManager.updateProps({
      moveableData: this.moveableData
    }), this.positionSyncManager.initialize());
  }
  // 生命周期方法 - 组件卸载时清理同步管理器
  componentWillUnmount() {
    this.positionSyncManager && this.positionSyncManager.cleanup();
  }
  // 生命周期方法 - 当 props 变化时更新同步管理器
  componentDidUpdate(t) {
    t.selectedTargets !== this.props.selectedTargets && this.updatePositionSyncManager();
  }
  render() {
    const { verticalGuidelines: t, horizontalGuidelines: r, selectedTargets: n, zoom: o } = this.props;
    if (!n.length)
      return this.renderViewportMoveable();
    const i = this.hasLockedElements(), a = this.moveableData, s = this.memory, l = [document.querySelector(".scena-viewport"), ...a.getTargets()].filter((d) => n.indexOf(d) === -1), c = !1, u = "";
    return /* @__PURE__ */ f.jsx(
      Pv,
      {
        ables: [RO, DO],
        ref: this.moveable,
        targets: n,
        dimensionViewable: !i,
        deleteButtonViewable: !i,
        draggable: !i,
        resizable: !i,
        pinchable: i ? [] : ["rotatable"],
        zoom: 1 / o,
        throttleResize: 1,
        clippable: u === "Crop",
        passDragArea: u === "Text",
        checkInput: u === "Text",
        throttleDragRotate: 0,
        keepRatio: n.length > 1 ? !0 : c,
        rotatable: !i,
        snappable: !i,
        snapCenter: !0,
        snapGap: !1,
        isDisplayInnerSnapDigit: !0,
        roundable: !i,
        verticalGuidelines: t,
        horizontalGuidelines: r,
        elementGuidelines: l,
        clipArea: !0,
        clipVerticalGuidelines: [0, "50%", "100%"],
        clipHorizontalGuidelines: [0, "50%", "100%"],
        clipTargetBounds: !0,
        onBeforeRenderStart: a.onBeforeRenderStart,
        onBeforeRenderGroupStart: a.onBeforeRenderGroupStart,
        onDragStart: (d) => {
          i || a.onDragStart(d);
        },
        onDrag: (d) => {
          i || a.onDrag(d);
        },
        onDragGroupStart: a.onDragGroupStart,
        onDragGroup: a.onDragGroup,
        onScaleStart: a.onScaleStart,
        onScale: a.onScale,
        onScaleGroupStart: a.onScaleGroupStart,
        onScaleGroup: a.onScaleGroup,
        onResizeStart: a.onResizeStart,
        onResize: a.onResize,
        onResizeGroupStart: a.onResizeGroupStart,
        onResizeGroup: a.onResizeGroup,
        onRotateStart: a.onRotateStart,
        onRotate: a.onRotate,
        onRotateGroupStart: a.onRotateGroupStart,
        onRotateGroup: a.onRotateGroup,
        defaultClipPath: s.get("crop") || "inset",
        onClip: a.onClip,
        onDragOriginStart: a.onDragOriginStart,
        onDragOrigin: (d) => {
          i || a.onDragOrigin(d);
        },
        onRound: a.onRound,
        onClick: (d) => {
          const h = d.inputTarget;
          if (d.isDouble && h.isContentEditable) {
            const p = Lg(h);
            p && p.focus();
          } else
            Yt.getState().selectNode(d.moveableTarget?.dataset.veltixNodeId), this.props.selecto.current?.clickTarget(d.inputEvent, d.inputTarget);
        },
        onClickGroup: (d) => {
          this.props.selecto.current?.clickTarget(d.inputEvent, d.inputTarget);
        },
        onRenderStart: (d) => {
          d.datas.prevData = a?.getFrame(d.target)?.get();
        },
        onRender: (d) => {
          d.datas.isRender = !0;
        },
        onRenderEnd: (d) => {
          if (!d.datas.isRender)
            return;
          const h = d.target, p = h.dataset.veltixNodeId, g = h.dataset.veltixDocId;
          if (p && g && ke.getState().getNode(g, p)?.position?.locked === !0)
            return;
          const v = Bg(d.target), m = NO(d.target.getAttribute("style"));
          ke.getState().updateNode(g, v, { position: m });
        },
        onRenderGroupStart: (d) => {
          d.datas.prevDatas = d.targets.map((h) => a.getFrame(h)?.get());
        },
        onRenderGroup: (d) => {
          d.datas.isRender = !0;
        },
        onRenderGroupEnd: (d) => {
          d.datas.isRender;
        }
      }
    );
  }
  renderViewportMoveable() {
    const t = this.moveableData;
    return /* @__PURE__ */ f.jsx(
      Pv,
      {
        ref: this.moveable,
        target: null,
        origin: !1,
        onRotateStart: t.onRotateStart,
        onRotate: t.onRotate
      }
    );
  }
  updateRect() {
    this.getMoveable().updateRect();
  }
}
var Nd = ["Enter", " "], E4 = ["ArrowDown", "PageUp", "Home"], Rb = ["ArrowUp", "PageDown", "End"], _4 = [...E4, ...Rb], N4 = {
  ltr: [...Nd, "ArrowRight"],
  rtl: [...Nd, "ArrowLeft"]
}, D4 = {
  ltr: ["ArrowLeft"],
  rtl: ["ArrowRight"]
}, Za = "Menu", [ja, R4, M4] = $l(Za), [go, Mb] = Gt(Za, [
  M4,
  pi,
  Gl
]), xc = pi(), Tb = Gl(), [T4, mo] = go(Za), [j4, Qa] = go(Za), jb = (e) => {
  const { __scopeMenu: t, open: r = !1, children: n, dir: o, onOpenChange: i, modal: a = !0 } = e, s = xc(t), [l, c] = C.useState(null), u = C.useRef(!1), d = _t(i), h = vi(o);
  return C.useEffect(() => {
    const p = () => {
      u.current = !0, document.addEventListener("pointerdown", g, { capture: !0, once: !0 }), document.addEventListener("pointermove", g, { capture: !0, once: !0 });
    }, g = () => u.current = !1;
    return document.addEventListener("keydown", p, { capture: !0 }), () => {
      document.removeEventListener("keydown", p, { capture: !0 }), document.removeEventListener("pointerdown", g, { capture: !0 }), document.removeEventListener("pointermove", g, { capture: !0 });
    };
  }, []), /* @__PURE__ */ f.jsx(tf, { ...s, children: /* @__PURE__ */ f.jsx(
    T4,
    {
      scope: t,
      open: r,
      onOpenChange: d,
      content: l,
      onContentChange: c,
      children: /* @__PURE__ */ f.jsx(
        j4,
        {
          scope: t,
          onClose: C.useCallback(() => d(!1), [d]),
          isUsingKeyboardRef: u,
          dir: h,
          modal: a,
          children: n
        }
      )
    }
  ) });
};
jb.displayName = Za;
var k4 = "MenuAnchor", Ch = C.forwardRef(
  (e, t) => {
    const { __scopeMenu: r, ...n } = e, o = xc(r);
    return /* @__PURE__ */ f.jsx(rf, { ...o, ...n, ref: t });
  }
);
Ch.displayName = k4;
var Eh = "MenuPortal", [P4, kb] = go(Eh, {
  forceMount: void 0
}), Pb = (e) => {
  const { __scopeMenu: t, forceMount: r, children: n, container: o } = e, i = mo(Eh, t);
  return /* @__PURE__ */ f.jsx(P4, { scope: t, forceMount: r, children: /* @__PURE__ */ f.jsx(Nt, { present: r || i.open, children: /* @__PURE__ */ f.jsx(Oa, { asChild: !0, container: o, children: n }) }) });
};
Pb.displayName = Eh;
var lr = "MenuContent", [A4, _h] = go(lr), Ab = C.forwardRef(
  (e, t) => {
    const r = kb(lr, e.__scopeMenu), { forceMount: n = r.forceMount, ...o } = e, i = mo(lr, e.__scopeMenu), a = Qa(lr, e.__scopeMenu);
    return /* @__PURE__ */ f.jsx(ja.Provider, { scope: e.__scopeMenu, children: /* @__PURE__ */ f.jsx(Nt, { present: n || i.open, children: /* @__PURE__ */ f.jsx(ja.Slot, { scope: e.__scopeMenu, children: a.modal ? /* @__PURE__ */ f.jsx(O4, { ...o, ref: t }) : /* @__PURE__ */ f.jsx(I4, { ...o, ref: t }) }) }) });
  }
), O4 = C.forwardRef(
  (e, t) => {
    const r = mo(lr, e.__scopeMenu), n = C.useRef(null), o = _e(t, n);
    return C.useEffect(() => {
      const i = n.current;
      if (i) return Gd(i);
    }, []), /* @__PURE__ */ f.jsx(
      Nh,
      {
        ...e,
        ref: o,
        trapFocus: r.open,
        disableOutsidePointerEvents: r.open,
        disableOutsideScroll: !0,
        onFocusOutside: ue(
          e.onFocusOutside,
          (i) => i.preventDefault(),
          { checkForDefaultPrevented: !1 }
        ),
        onDismiss: () => r.onOpenChange(!1)
      }
    );
  }
), I4 = C.forwardRef((e, t) => {
  const r = mo(lr, e.__scopeMenu);
  return /* @__PURE__ */ f.jsx(
    Nh,
    {
      ...e,
      ref: t,
      trapFocus: !1,
      disableOutsidePointerEvents: !1,
      disableOutsideScroll: !1,
      onDismiss: () => r.onOpenChange(!1)
    }
  );
}), F4 = /* @__PURE__ */ Qn("MenuContent.ScrollLock"), Nh = C.forwardRef(
  (e, t) => {
    const {
      __scopeMenu: r,
      loop: n = !1,
      trapFocus: o,
      onOpenAutoFocus: i,
      onCloseAutoFocus: a,
      disableOutsidePointerEvents: s,
      onEntryFocus: l,
      onEscapeKeyDown: c,
      onPointerDownOutside: u,
      onFocusOutside: d,
      onInteractOutside: h,
      onDismiss: p,
      disableOutsideScroll: g,
      ...v
    } = e, m = mo(lr, r), x = Qa(lr, r), y = xc(r), b = Tb(r), w = R4(r), [_, R] = C.useState(null), T = C.useRef(null), k = _e(t, T, m.onContentChange), j = C.useRef(0), A = C.useRef(""), $ = C.useRef(0), F = C.useRef(null), L = C.useRef("right"), P = C.useRef(0), O = g ? Pl : C.Fragment, I = g ? { as: F4, allowPinchZoom: !0 } : void 0, E = (M) => {
      const D = A.current + M, N = w().filter((q) => !q.disabled), z = document.activeElement, Y = N.find((q) => q.ref.current === z)?.textValue, H = N.map((q) => q.textValue), X = X4(H, D, Y), Q = N.find((q) => q.textValue === X)?.ref.current;
      (function q(K) {
        A.current = K, window.clearTimeout(j.current), K !== "" && (j.current = window.setTimeout(() => q(""), 1e3));
      })(D), Q && setTimeout(() => Q.focus());
    };
    C.useEffect(() => () => window.clearTimeout(j.current), []), $d();
    const S = C.useCallback((M) => L.current === F.current?.side && Z4(M, F.current?.area), []);
    return /* @__PURE__ */ f.jsx(
      A4,
      {
        scope: r,
        searchRef: A,
        onItemEnter: C.useCallback(
          (M) => {
            S(M) && M.preventDefault();
          },
          [S]
        ),
        onItemLeave: C.useCallback(
          (M) => {
            S(M) || (T.current?.focus(), R(null));
          },
          [S]
        ),
        onTriggerLeave: C.useCallback(
          (M) => {
            S(M) && M.preventDefault();
          },
          [S]
        ),
        pointerGraceTimerRef: $,
        onPointerGraceIntentChange: C.useCallback((M) => {
          F.current = M;
        }, []),
        children: /* @__PURE__ */ f.jsx(O, { ...I, children: /* @__PURE__ */ f.jsx(
          jl,
          {
            asChild: !0,
            trapped: o,
            onMountAutoFocus: ue(i, (M) => {
              M.preventDefault(), T.current?.focus({ preventScroll: !0 });
            }),
            onUnmountAutoFocus: a,
            children: /* @__PURE__ */ f.jsx(
              Aa,
              {
                asChild: !0,
                disableOutsidePointerEvents: s,
                onEscapeKeyDown: c,
                onPointerDownOutside: u,
                onFocusOutside: d,
                onInteractOutside: h,
                onDismiss: p,
                children: /* @__PURE__ */ f.jsx(
                  r0,
                  {
                    asChild: !0,
                    ...b,
                    dir: x.dir,
                    orientation: "vertical",
                    loop: n,
                    currentTabStopId: _,
                    onCurrentTabStopIdChange: R,
                    onEntryFocus: ue(l, (M) => {
                      x.isUsingKeyboardRef.current || M.preventDefault();
                    }),
                    preventScrollOnEntryFocus: !0,
                    children: /* @__PURE__ */ f.jsx(
                      nf,
                      {
                        role: "menu",
                        "aria-orientation": "vertical",
                        "data-state": Kb(m.open),
                        "data-radix-menu-content": "",
                        dir: x.dir,
                        ...y,
                        ...v,
                        ref: k,
                        style: { outline: "none", ...v.style },
                        onKeyDown: ue(v.onKeyDown, (M) => {
                          const N = M.target.closest("[data-radix-menu-content]") === M.currentTarget, z = M.ctrlKey || M.altKey || M.metaKey, Y = M.key.length === 1;
                          N && (M.key === "Tab" && M.preventDefault(), !z && Y && E(M.key));
                          const H = T.current;
                          if (M.target !== H || !_4.includes(M.key)) return;
                          M.preventDefault();
                          const Q = w().filter((q) => !q.disabled).map((q) => q.ref.current);
                          Rb.includes(M.key) && Q.reverse(), Y4(Q);
                        }),
                        onBlur: ue(e.onBlur, (M) => {
                          M.currentTarget.contains(M.target) || (window.clearTimeout(j.current), A.current = "");
                        }),
                        onPointerMove: ue(
                          e.onPointerMove,
                          ka((M) => {
                            const D = M.target, N = P.current !== M.clientX;
                            if (M.currentTarget.contains(D) && N) {
                              const z = M.clientX > P.current ? "right" : "left";
                              L.current = z, P.current = M.clientX;
                            }
                          })
                        )
                      }
                    )
                  }
                )
              }
            )
          }
        ) })
      }
    );
  }
);
Ab.displayName = lr;
var L4 = "MenuGroup", Dh = C.forwardRef(
  (e, t) => {
    const { __scopeMenu: r, ...n } = e;
    return /* @__PURE__ */ f.jsx(me.div, { role: "group", ...n, ref: t });
  }
);
Dh.displayName = L4;
var B4 = "MenuLabel", Ob = C.forwardRef(
  (e, t) => {
    const { __scopeMenu: r, ...n } = e;
    return /* @__PURE__ */ f.jsx(me.div, { ...n, ref: t });
  }
);
Ob.displayName = B4;
var xl = "MenuItem", og = "menu.itemSelect", yc = C.forwardRef(
  (e, t) => {
    const { disabled: r = !1, onSelect: n, ...o } = e, i = C.useRef(null), a = Qa(xl, e.__scopeMenu), s = _h(xl, e.__scopeMenu), l = _e(t, i), c = C.useRef(!1), u = () => {
      const d = i.current;
      if (!r && d) {
        const h = new CustomEvent(og, { bubbles: !0, cancelable: !0 });
        d.addEventListener(og, (p) => n?.(p), { once: !0 }), Vg(d, h), h.defaultPrevented ? c.current = !1 : a.onClose();
      }
    };
    return /* @__PURE__ */ f.jsx(
      Ib,
      {
        ...o,
        ref: l,
        disabled: r,
        onClick: ue(e.onClick, u),
        onPointerDown: (d) => {
          e.onPointerDown?.(d), c.current = !0;
        },
        onPointerUp: ue(e.onPointerUp, (d) => {
          c.current || d.currentTarget?.click();
        }),
        onKeyDown: ue(e.onKeyDown, (d) => {
          const h = s.searchRef.current !== "";
          r || h && d.key === " " || Nd.includes(d.key) && (d.currentTarget.click(), d.preventDefault());
        })
      }
    );
  }
);
yc.displayName = xl;
var Ib = C.forwardRef(
  (e, t) => {
    const { __scopeMenu: r, disabled: n = !1, textValue: o, ...i } = e, a = _h(xl, r), s = Tb(r), l = C.useRef(null), c = _e(t, l), [u, d] = C.useState(!1), [h, p] = C.useState("");
    return C.useEffect(() => {
      const g = l.current;
      g && p((g.textContent ?? "").trim());
    }, [i.children]), /* @__PURE__ */ f.jsx(
      ja.ItemSlot,
      {
        scope: r,
        disabled: n,
        textValue: o ?? h,
        children: /* @__PURE__ */ f.jsx(n0, { asChild: !0, ...s, focusable: !n, children: /* @__PURE__ */ f.jsx(
          me.div,
          {
            role: "menuitem",
            "data-highlighted": u ? "" : void 0,
            "aria-disabled": n || void 0,
            "data-disabled": n ? "" : void 0,
            ...i,
            ref: c,
            onPointerMove: ue(
              e.onPointerMove,
              ka((g) => {
                n ? a.onItemLeave(g) : (a.onItemEnter(g), g.defaultPrevented || g.currentTarget.focus({ preventScroll: !0 }));
              })
            ),
            onPointerLeave: ue(
              e.onPointerLeave,
              ka((g) => a.onItemLeave(g))
            ),
            onFocus: ue(e.onFocus, () => d(!0)),
            onBlur: ue(e.onBlur, () => d(!1))
          }
        ) })
      }
    );
  }
), z4 = "MenuCheckboxItem", Fb = C.forwardRef(
  (e, t) => {
    const { checked: r = !1, onCheckedChange: n, ...o } = e;
    return /* @__PURE__ */ f.jsx(Gb, { scope: e.__scopeMenu, checked: r, children: /* @__PURE__ */ f.jsx(
      yc,
      {
        role: "menuitemcheckbox",
        "aria-checked": yl(r) ? "mixed" : r,
        ...o,
        ref: t,
        "data-state": Mh(r),
        onSelect: ue(
          o.onSelect,
          () => n?.(yl(r) ? !0 : !r),
          { checkForDefaultPrevented: !1 }
        )
      }
    ) });
  }
);
Fb.displayName = z4;
var Lb = "MenuRadioGroup", [$4, G4] = go(
  Lb,
  { value: void 0, onValueChange: () => {
  } }
), Bb = C.forwardRef(
  (e, t) => {
    const { value: r, onValueChange: n, ...o } = e, i = _t(n);
    return /* @__PURE__ */ f.jsx($4, { scope: e.__scopeMenu, value: r, onValueChange: i, children: /* @__PURE__ */ f.jsx(Dh, { ...o, ref: t }) });
  }
);
Bb.displayName = Lb;
var zb = "MenuRadioItem", $b = C.forwardRef(
  (e, t) => {
    const { value: r, ...n } = e, o = G4(zb, e.__scopeMenu), i = r === o.value;
    return /* @__PURE__ */ f.jsx(Gb, { scope: e.__scopeMenu, checked: i, children: /* @__PURE__ */ f.jsx(
      yc,
      {
        role: "menuitemradio",
        "aria-checked": i,
        ...n,
        ref: t,
        "data-state": Mh(i),
        onSelect: ue(
          n.onSelect,
          () => o.onValueChange?.(r),
          { checkForDefaultPrevented: !1 }
        )
      }
    ) });
  }
);
$b.displayName = zb;
var Rh = "MenuItemIndicator", [Gb, V4] = go(
  Rh,
  { checked: !1 }
), Vb = C.forwardRef(
  (e, t) => {
    const { __scopeMenu: r, forceMount: n, ...o } = e, i = V4(Rh, r);
    return /* @__PURE__ */ f.jsx(
      Nt,
      {
        present: n || yl(i.checked) || i.checked === !0,
        children: /* @__PURE__ */ f.jsx(
          me.span,
          {
            ...o,
            ref: t,
            "data-state": Mh(i.checked)
          }
        )
      }
    );
  }
);
Vb.displayName = Rh;
var U4 = "MenuSeparator", Ub = C.forwardRef(
  (e, t) => {
    const { __scopeMenu: r, ...n } = e;
    return /* @__PURE__ */ f.jsx(
      me.div,
      {
        role: "separator",
        "aria-orientation": "horizontal",
        ...n,
        ref: t
      }
    );
  }
);
Ub.displayName = U4;
var H4 = "MenuArrow", Hb = C.forwardRef(
  (e, t) => {
    const { __scopeMenu: r, ...n } = e, o = xc(r);
    return /* @__PURE__ */ f.jsx(of, { ...o, ...n, ref: t });
  }
);
Hb.displayName = H4;
var W4 = "MenuSub", [_F, Wb] = go(W4), Gi = "MenuSubTrigger", Yb = C.forwardRef(
  (e, t) => {
    const r = mo(Gi, e.__scopeMenu), n = Qa(Gi, e.__scopeMenu), o = Wb(Gi, e.__scopeMenu), i = _h(Gi, e.__scopeMenu), a = C.useRef(null), { pointerGraceTimerRef: s, onPointerGraceIntentChange: l } = i, c = { __scopeMenu: e.__scopeMenu }, u = C.useCallback(() => {
      a.current && window.clearTimeout(a.current), a.current = null;
    }, []);
    return C.useEffect(() => u, [u]), C.useEffect(() => {
      const d = s.current;
      return () => {
        window.clearTimeout(d), l(null);
      };
    }, [s, l]), /* @__PURE__ */ f.jsx(Ch, { asChild: !0, ...c, children: /* @__PURE__ */ f.jsx(
      Ib,
      {
        id: o.triggerId,
        "aria-haspopup": "menu",
        "aria-expanded": r.open,
        "aria-controls": o.contentId,
        "data-state": Kb(r.open),
        ...e,
        ref: Tl(t, o.onTriggerChange),
        onClick: (d) => {
          e.onClick?.(d), !(e.disabled || d.defaultPrevented) && (d.currentTarget.focus(), r.open || r.onOpenChange(!0));
        },
        onPointerMove: ue(
          e.onPointerMove,
          ka((d) => {
            i.onItemEnter(d), !d.defaultPrevented && !e.disabled && !r.open && !a.current && (i.onPointerGraceIntentChange(null), a.current = window.setTimeout(() => {
              r.onOpenChange(!0), u();
            }, 100));
          })
        ),
        onPointerLeave: ue(
          e.onPointerLeave,
          ka((d) => {
            u();
            const h = r.content?.getBoundingClientRect();
            if (h) {
              const p = r.content?.dataset.side, g = p === "right", v = g ? -5 : 5, m = h[g ? "left" : "right"], x = h[g ? "right" : "left"];
              i.onPointerGraceIntentChange({
                area: [
                  // Apply a bleed on clientX to ensure that our exit point is
                  // consistently within polygon bounds
                  { x: d.clientX + v, y: d.clientY },
                  { x: m, y: h.top },
                  { x, y: h.top },
                  { x, y: h.bottom },
                  { x: m, y: h.bottom }
                ],
                side: p
              }), window.clearTimeout(s.current), s.current = window.setTimeout(
                () => i.onPointerGraceIntentChange(null),
                300
              );
            } else {
              if (i.onTriggerLeave(d), d.defaultPrevented) return;
              i.onPointerGraceIntentChange(null);
            }
          })
        ),
        onKeyDown: ue(e.onKeyDown, (d) => {
          const h = i.searchRef.current !== "";
          e.disabled || h && d.key === " " || N4[n.dir].includes(d.key) && (r.onOpenChange(!0), r.content?.focus(), d.preventDefault());
        })
      }
    ) });
  }
);
Yb.displayName = Gi;
var qb = "MenuSubContent", Xb = C.forwardRef(
  (e, t) => {
    const r = kb(lr, e.__scopeMenu), { forceMount: n = r.forceMount, ...o } = e, i = mo(lr, e.__scopeMenu), a = Qa(lr, e.__scopeMenu), s = Wb(qb, e.__scopeMenu), l = C.useRef(null), c = _e(t, l);
    return /* @__PURE__ */ f.jsx(ja.Provider, { scope: e.__scopeMenu, children: /* @__PURE__ */ f.jsx(Nt, { present: n || i.open, children: /* @__PURE__ */ f.jsx(ja.Slot, { scope: e.__scopeMenu, children: /* @__PURE__ */ f.jsx(
      Nh,
      {
        id: s.contentId,
        "aria-labelledby": s.triggerId,
        ...o,
        ref: c,
        align: "start",
        side: a.dir === "rtl" ? "left" : "right",
        disableOutsidePointerEvents: !1,
        disableOutsideScroll: !1,
        trapFocus: !1,
        onOpenAutoFocus: (u) => {
          a.isUsingKeyboardRef.current && l.current?.focus(), u.preventDefault();
        },
        onCloseAutoFocus: (u) => u.preventDefault(),
        onFocusOutside: ue(e.onFocusOutside, (u) => {
          u.target !== s.trigger && i.onOpenChange(!1);
        }),
        onEscapeKeyDown: ue(e.onEscapeKeyDown, (u) => {
          a.onClose(), u.preventDefault();
        }),
        onKeyDown: ue(e.onKeyDown, (u) => {
          const d = u.currentTarget.contains(u.target), h = D4[a.dir].includes(u.key);
          d && h && (i.onOpenChange(!1), s.trigger?.focus(), u.preventDefault());
        })
      }
    ) }) }) });
  }
);
Xb.displayName = qb;
function Kb(e) {
  return e ? "open" : "closed";
}
function yl(e) {
  return e === "indeterminate";
}
function Mh(e) {
  return yl(e) ? "indeterminate" : e ? "checked" : "unchecked";
}
function Y4(e) {
  const t = document.activeElement;
  for (const r of e)
    if (r === t || (r.focus(), document.activeElement !== t)) return;
}
function q4(e, t) {
  return e.map((r, n) => e[(t + n) % e.length]);
}
function X4(e, t, r) {
  const o = t.length > 1 && Array.from(t).every((c) => c === t[0]) ? t[0] : t, i = r ? e.indexOf(r) : -1;
  let a = q4(e, Math.max(i, 0));
  o.length === 1 && (a = a.filter((c) => c !== r));
  const l = a.find(
    (c) => c.toLowerCase().startsWith(o.toLowerCase())
  );
  return l !== r ? l : void 0;
}
function K4(e, t) {
  const { x: r, y: n } = e;
  let o = !1;
  for (let i = 0, a = t.length - 1; i < t.length; a = i++) {
    const s = t[i], l = t[a], c = s.x, u = s.y, d = l.x, h = l.y;
    u > n != h > n && r < (d - c) * (n - u) / (h - u) + c && (o = !o);
  }
  return o;
}
function Z4(e, t) {
  if (!t) return !1;
  const r = { x: e.clientX, y: e.clientY };
  return K4(r, t);
}
function ka(e) {
  return (t) => t.pointerType === "mouse" ? e(t) : void 0;
}
var Q4 = jb, J4 = Ch, eI = Pb, tI = Ab, rI = Dh, nI = Ob, oI = yc, iI = Fb, aI = Bb, sI = $b, lI = Vb, cI = Ub, uI = Hb, dI = Yb, fI = Xb, bc = "DropdownMenu", [hI, NF] = Gt(
  bc,
  [Mb]
), Ot = Mb(), [pI, Zb] = hI(bc), Qb = (e) => {
  const {
    __scopeDropdownMenu: t,
    children: r,
    dir: n,
    open: o,
    defaultOpen: i,
    onOpenChange: a,
    modal: s = !0
  } = e, l = Ot(t), c = C.useRef(null), [u, d] = Sr({
    prop: o,
    defaultProp: i ?? !1,
    onChange: a,
    caller: bc
  });
  return /* @__PURE__ */ f.jsx(
    pI,
    {
      scope: t,
      triggerId: ir(),
      triggerRef: c,
      contentId: ir(),
      open: u,
      onOpenChange: d,
      onOpenToggle: C.useCallback(() => d((h) => !h), [d]),
      modal: s,
      children: /* @__PURE__ */ f.jsx(Q4, { ...l, open: u, onOpenChange: d, dir: n, modal: s, children: r })
    }
  );
};
Qb.displayName = bc;
var Jb = "DropdownMenuTrigger", ew = C.forwardRef(
  (e, t) => {
    const { __scopeDropdownMenu: r, disabled: n = !1, ...o } = e, i = Zb(Jb, r), a = Ot(r);
    return /* @__PURE__ */ f.jsx(J4, { asChild: !0, ...a, children: /* @__PURE__ */ f.jsx(
      me.button,
      {
        type: "button",
        id: i.triggerId,
        "aria-haspopup": "menu",
        "aria-expanded": i.open,
        "aria-controls": i.open ? i.contentId : void 0,
        "data-state": i.open ? "open" : "closed",
        "data-disabled": n ? "" : void 0,
        disabled: n,
        ...o,
        ref: Tl(t, i.triggerRef),
        onPointerDown: ue(e.onPointerDown, (s) => {
          !n && s.button === 0 && s.ctrlKey === !1 && (i.onOpenToggle(), i.open || s.preventDefault());
        }),
        onKeyDown: ue(e.onKeyDown, (s) => {
          n || (["Enter", " "].includes(s.key) && i.onOpenToggle(), s.key === "ArrowDown" && i.onOpenChange(!0), ["Enter", " ", "ArrowDown"].includes(s.key) && s.preventDefault());
        })
      }
    ) });
  }
);
ew.displayName = Jb;
var vI = "DropdownMenuPortal", tw = (e) => {
  const { __scopeDropdownMenu: t, ...r } = e, n = Ot(t);
  return /* @__PURE__ */ f.jsx(eI, { ...n, ...r });
};
tw.displayName = vI;
var rw = "DropdownMenuContent", nw = C.forwardRef(
  (e, t) => {
    const { __scopeDropdownMenu: r, ...n } = e, o = Zb(rw, r), i = Ot(r), a = C.useRef(!1);
    return /* @__PURE__ */ f.jsx(
      tI,
      {
        id: o.contentId,
        "aria-labelledby": o.triggerId,
        ...i,
        ...n,
        ref: t,
        onCloseAutoFocus: ue(e.onCloseAutoFocus, (s) => {
          a.current || o.triggerRef.current?.focus(), a.current = !1, s.preventDefault();
        }),
        onInteractOutside: ue(e.onInteractOutside, (s) => {
          const l = s.detail.originalEvent, c = l.button === 0 && l.ctrlKey === !0, u = l.button === 2 || c;
          (!o.modal || u) && (a.current = !0);
        }),
        style: {
          ...e.style,
          "--radix-dropdown-menu-content-transform-origin": "var(--radix-popper-transform-origin)",
          "--radix-dropdown-menu-content-available-width": "var(--radix-popper-available-width)",
          "--radix-dropdown-menu-content-available-height": "var(--radix-popper-available-height)",
          "--radix-dropdown-menu-trigger-width": "var(--radix-popper-anchor-width)",
          "--radix-dropdown-menu-trigger-height": "var(--radix-popper-anchor-height)"
        }
      }
    );
  }
);
nw.displayName = rw;
var gI = "DropdownMenuGroup", mI = C.forwardRef(
  (e, t) => {
    const { __scopeDropdownMenu: r, ...n } = e, o = Ot(r);
    return /* @__PURE__ */ f.jsx(rI, { ...o, ...n, ref: t });
  }
);
mI.displayName = gI;
var xI = "DropdownMenuLabel", ow = C.forwardRef(
  (e, t) => {
    const { __scopeDropdownMenu: r, ...n } = e, o = Ot(r);
    return /* @__PURE__ */ f.jsx(nI, { ...o, ...n, ref: t });
  }
);
ow.displayName = xI;
var yI = "DropdownMenuItem", iw = C.forwardRef(
  (e, t) => {
    const { __scopeDropdownMenu: r, ...n } = e, o = Ot(r);
    return /* @__PURE__ */ f.jsx(oI, { ...o, ...n, ref: t });
  }
);
iw.displayName = yI;
var bI = "DropdownMenuCheckboxItem", aw = C.forwardRef((e, t) => {
  const { __scopeDropdownMenu: r, ...n } = e, o = Ot(r);
  return /* @__PURE__ */ f.jsx(iI, { ...o, ...n, ref: t });
});
aw.displayName = bI;
var wI = "DropdownMenuRadioGroup", SI = C.forwardRef((e, t) => {
  const { __scopeDropdownMenu: r, ...n } = e, o = Ot(r);
  return /* @__PURE__ */ f.jsx(aI, { ...o, ...n, ref: t });
});
SI.displayName = wI;
var CI = "DropdownMenuRadioItem", sw = C.forwardRef((e, t) => {
  const { __scopeDropdownMenu: r, ...n } = e, o = Ot(r);
  return /* @__PURE__ */ f.jsx(sI, { ...o, ...n, ref: t });
});
sw.displayName = CI;
var EI = "DropdownMenuItemIndicator", lw = C.forwardRef((e, t) => {
  const { __scopeDropdownMenu: r, ...n } = e, o = Ot(r);
  return /* @__PURE__ */ f.jsx(lI, { ...o, ...n, ref: t });
});
lw.displayName = EI;
var _I = "DropdownMenuSeparator", cw = C.forwardRef((e, t) => {
  const { __scopeDropdownMenu: r, ...n } = e, o = Ot(r);
  return /* @__PURE__ */ f.jsx(cI, { ...o, ...n, ref: t });
});
cw.displayName = _I;
var NI = "DropdownMenuArrow", DI = C.forwardRef(
  (e, t) => {
    const { __scopeDropdownMenu: r, ...n } = e, o = Ot(r);
    return /* @__PURE__ */ f.jsx(uI, { ...o, ...n, ref: t });
  }
);
DI.displayName = NI;
var RI = "DropdownMenuSubTrigger", uw = C.forwardRef((e, t) => {
  const { __scopeDropdownMenu: r, ...n } = e, o = Ot(r);
  return /* @__PURE__ */ f.jsx(dI, { ...o, ...n, ref: t });
});
uw.displayName = RI;
var MI = "DropdownMenuSubContent", dw = C.forwardRef((e, t) => {
  const { __scopeDropdownMenu: r, ...n } = e, o = Ot(r);
  return /* @__PURE__ */ f.jsx(
    fI,
    {
      ...o,
      ...n,
      ref: t,
      style: {
        ...e.style,
        "--radix-dropdown-menu-content-transform-origin": "var(--radix-popper-transform-origin)",
        "--radix-dropdown-menu-content-available-width": "var(--radix-popper-available-width)",
        "--radix-dropdown-menu-content-available-height": "var(--radix-popper-available-height)",
        "--radix-dropdown-menu-trigger-width": "var(--radix-popper-anchor-width)",
        "--radix-dropdown-menu-trigger-height": "var(--radix-popper-anchor-height)"
      }
    }
  );
});
dw.displayName = MI;
var TI = Qb, jI = ew, kI = tw, fw = nw, hw = ow, pw = iw, vw = aw, gw = sw, mw = lw, xw = cw, yw = uw, bw = dw;
const wc = TI, Th = jI, PI = C.forwardRef(({ className: e, inset: t, children: r, ...n }, o) => /* @__PURE__ */ f.jsxs(
  yw,
  {
    ref: o,
    className: Ee(
      "flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
      t && "pl-8",
      e
    ),
    ...n,
    children: [
      r,
      /* @__PURE__ */ f.jsx(ho, { className: "ml-auto" })
    ]
  }
));
PI.displayName = yw.displayName;
const AI = C.forwardRef(({ className: e, ...t }, r) => /* @__PURE__ */ f.jsx(
  bw,
  {
    ref: r,
    className: Ee(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      e
    ),
    ...t
  }
));
AI.displayName = bw.displayName;
const Ja = C.forwardRef(({ className: e, sideOffset: t = 4, ...r }, n) => /* @__PURE__ */ f.jsx(kI, { children: /* @__PURE__ */ f.jsx(
  fw,
  {
    ref: n,
    sideOffset: t,
    className: Ee(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md",
      "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      e
    ),
    ...r
  }
) }));
Ja.displayName = fw.displayName;
const tr = C.forwardRef(({ className: e, inset: t, ...r }, n) => /* @__PURE__ */ f.jsx(
  pw,
  {
    ref: n,
    className: Ee(
      "relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",
      t && "pl-8",
      e
    ),
    ...r
  }
));
tr.displayName = pw.displayName;
const OI = C.forwardRef(({ className: e, children: t, checked: r, ...n }, o) => /* @__PURE__ */ f.jsxs(
  vw,
  {
    ref: o,
    className: Ee(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      e
    ),
    checked: r,
    ...n,
    children: [
      /* @__PURE__ */ f.jsx("span", { className: "absolute left-2 flex h-3.5 w-3.5 items-center justify-center", children: /* @__PURE__ */ f.jsx(mw, { children: /* @__PURE__ */ f.jsx(_l, { className: "h-4 w-4" }) }) }),
      t
    ]
  }
));
OI.displayName = vw.displayName;
const II = C.forwardRef(({ className: e, children: t, ...r }, n) => /* @__PURE__ */ f.jsxs(
  gw,
  {
    ref: n,
    className: Ee(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      e
    ),
    ...r,
    children: [
      /* @__PURE__ */ f.jsx("span", { className: "absolute left-2 flex h-3.5 w-3.5 items-center justify-center", children: /* @__PURE__ */ f.jsx(mw, { children: /* @__PURE__ */ f.jsx(PC, { className: "h-2 w-2 fill-current" }) }) }),
      t
    ]
  }
));
II.displayName = gw.displayName;
const FI = C.forwardRef(({ className: e, inset: t, ...r }, n) => /* @__PURE__ */ f.jsx(
  hw,
  {
    ref: n,
    className: Ee(
      "px-2 py-1.5 text-sm font-semibold",
      t && "pl-8",
      e
    ),
    ...r
  }
));
FI.displayName = hw.displayName;
const ia = C.forwardRef(({ className: e, ...t }, r) => /* @__PURE__ */ f.jsx(
  xw,
  {
    ref: r,
    className: Ee("-mx-1 my-1 h-px bg-muted", e),
    ...t
  }
));
ia.displayName = xw.displayName;
const Vi = ({
  className: e,
  ...t
}) => /* @__PURE__ */ f.jsx(
  "span",
  {
    className: Ee("ml-auto text-xs tracking-widest opacity-60", e),
    ...t
  }
);
Vi.displayName = "DropdownMenuShortcut";
const LI = () => {
  const { nodeContextMenu: e, closeNodeContextMenu: t, removeNode: r } = Yt(), { open: n, position: o, node: i } = e, a = ke(), s = Mg(i?.type || ""), l = a.json?.docs?.[0]?.id, c = (u, d) => {
    if (!d || !l) {
      alert("No node or page selected!"), t();
      return;
    }
    if (u === "Delete") {
      r(d.id), t();
      return;
    }
    if (u === "Duplicate") {
      a.cloneNode(l, d.id), t();
      return;
    }
    if (u === "Lock" || u === "Unlock") {
      const h = d.position?.locked || !1;
      a.updateNode(l, d.id, {
        position: {
          ...d.position,
          locked: !h
        }
      }), t();
      return;
    }
    t();
  };
  return ze(() => {
    if (!n) return;
    const u = () => t();
    return window.addEventListener("click", u), () => window.removeEventListener("click", u);
  }, [n, t]), !i || !s ? null : /* @__PURE__ */ f.jsxs(wc, { open: n, onOpenChange: (u) => u ? void 0 : t(), children: [
    /* @__PURE__ */ f.jsx("div", { style: { display: "none" } }),
    /* @__PURE__ */ f.jsxs(Ja, { sideOffset: 0, align: "start", style: { position: "fixed", left: o.x, top: o.y, minWidth: 200 }, className: "text-xs", children: [
      /* @__PURE__ */ f.jsxs(tr, { "aria-readonly": !0, className: "text-xs", children: [
        /* @__PURE__ */ f.jsx(vg, { className: "!w-4 !h-4 mr-2" }),
        s?.title
      ] }),
      /* @__PURE__ */ f.jsx(ia, {}),
      /* @__PURE__ */ f.jsxs(tr, { onClick: () => c("Properties", i), className: "text-xs", children: [
        /* @__PURE__ */ f.jsx(ci, { className: "w-4 h-4 mr-2" }),
        "Properties"
      ] }),
      /* @__PURE__ */ f.jsxs(tr, { onClick: () => c("Duplicate", i), className: "text-xs", children: [
        /* @__PURE__ */ f.jsx(BC, { className: "w-4 h-4 mr-2" }),
        "Duplicate"
      ] }),
      /* @__PURE__ */ f.jsx(ia, {}),
      /* @__PURE__ */ f.jsx(tr, { onClick: () => c(i.position?.locked ? "Unlock" : "Lock", i), className: "text-xs", children: i.position?.locked ? /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
        /* @__PURE__ */ f.jsx(xE, { className: "w-4 h-4 mr-2" }),
        "Unlock"
      ] }) : /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
        /* @__PURE__ */ f.jsx(Id, { className: "w-4 h-4 mr-2" }),
        "Lock"
      ] }) }),
      /* @__PURE__ */ f.jsx(ia, {}),
      /* @__PURE__ */ f.jsxs(tr, { onClick: () => c("Delete", i), className: "text-red-600 focus:text-red-600 text-xs", children: [
        /* @__PURE__ */ f.jsx(Dl, { className: "w-4 h-4 mr-2" }),
        "Delete"
      ] })
    ] })
  ] });
}, BI = () => /* @__PURE__ */ f.jsxs("div", { className: "flex flex-col items-center justify-center w-full h-full min-h-[400px] text-center", children: [
  /* @__PURE__ */ f.jsxs("div", { className: "mb-6 relative", children: [
    /* @__PURE__ */ f.jsx("div", { className: "w-20 h-20 rounded-full bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-dashed border-gray-200 flex items-center justify-center transition-all duration-300 hover:border-gray-300 hover:bg-gradient-to-br hover:from-gray-100 hover:to-gray-150", children: /* @__PURE__ */ f.jsx(Vo, { className: "w-8 h-8 text-gray-400 transition-colors duration-300 hover:text-gray-500" }) }),
    /* @__PURE__ */ f.jsx("div", { className: "absolute inset-0 w-20 h-20 rounded-full bg-gray-200/20 blur-xl -z-10 scale-75" })
  ] }),
  /* @__PURE__ */ f.jsxs("div", { className: "space-y-2 max-w-sm", children: [
    /* @__PURE__ */ f.jsx("h3", { className: "text-lg font-semibold text-gray-900", children: "No components yet" }),
    /* @__PURE__ */ f.jsx("p", { className: "text-sm text-gray-500 leading-relaxed", children: "Get started by adding your first component to this page. Click the plus button above to begin." })
  ] }),
  /* @__PURE__ */ f.jsx("button", { className: "mt-6 px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded-lg hover:bg-gray-800 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2", children: "Add Component" })
] }), zI = (e) => {
  let t = `translate(${e.left}px, ${e.top}px)`;
  return e.rotation && (t += ` rotate(${e.rotation}deg)`), t;
}, $I = (e, t, r) => ({
  width: e.width || t.config?.doc?.width,
  height: e.height || t.config?.doc?.height,
  background: r.json?.theme?.backgroundColor || "#fff"
}), GI = ({ node: e, docId: t, index: r, onNodeClick: n, onNodeContextMenu: o }) => {
  const a = br().get(e.type);
  if (!a)
    return null;
  const s = e.position?.locked === !0, l = {
    position: "absolute",
    transform: zI(e.position),
    width: `${e.position.width}px`,
    height: `${e.position.height}px`
  }, c = (d) => {
    d.preventDefault(), d.stopPropagation(), n(e.id);
  }, u = (d) => {
    d.preventDefault(), d.stopPropagation(), o(d, e);
  };
  return /* @__PURE__ */ Nn(
    "div",
    {
      [di]: e.id,
      "data-type": e.type,
      "data-veltix-doc-id": t,
      "data-veltix-node-id": e.id,
      "data-locked": s,
      style: l,
      key: r,
      onClick: c,
      onContextMenu: u,
      className: Ir("relative", s && "opacity-70 hover:opacity-80")
    },
    C.createElement(a.main, e.props || {})
  );
}, VI = ({ doc: e, children: t, onViewportContextMenu: r }) => {
  const n = Pa(), o = ke(), i = (a) => {
    a.target.dataset.scenaElementId || r(a);
  };
  return /* @__PURE__ */ f.jsx("div", { className: Ir("scena-viewport"), [di]: "viewport", style: $I(e, n, o), onContextMenu: i, children: t });
}, UI = () => /* @__PURE__ */ f.jsx(BI, {}), HI = ({ doc: e }) => {
  const t = Yt((l) => l.openNodeContextMenu), r = Yt((l) => l.setSelectedNodes), n = C.useCallback(
    (l) => {
      sn.focus.set(!0), sn.nodeFocus.set(!0), r([l]);
    },
    [r]
  ), o = C.useCallback(
    (l, c) => {
      r([c.id]), t({ x: l.clientX, y: l.clientY }, c);
    },
    [t, r]
  ), i = C.useCallback(
    (l) => {
      l.preventDefault(), t({ x: l.clientX, y: l.clientY }, null);
    },
    [t]
  ), a = C.useCallback(
    (l) => {
      l.preventDefault(), console.log("TODO: handleViewportContextMenu");
    },
    [t]
  ), s = C.useMemo(() => {
    const l = e.nodes;
    return !l || l.length === 0 ? /* @__PURE__ */ f.jsx(UI, {}) : l.filter((u) => u.position?.visible !== !1).map((u, d) => /* @__PURE__ */ f.jsx(GI, { node: u, docId: e.id, index: d, onNodeClick: n, onNodeContextMenu: o }, d));
  }, [e.nodes, e.id, n, o, i]);
  return /* @__PURE__ */ f.jsxs(VI, { doc: e, onViewportContextMenu: a, children: [
    s,
    /* @__PURE__ */ f.jsx(LI, {})
  ] });
}, WI = (e) => {
  const { children: t } = e, r = ke(), n = Pa(), o = 40, { combinedWidth: i } = uC(o), a = r.json?.docs, s = {
    width: `${i}px`,
    height: `${n.height}px`
  };
  return /* @__PURE__ */ f.jsxs("div", { className: "veltix-viewport-canvas flex", style: { ...s, gap: `${o}px`, ...e.style }, children: [
    t,
    /* @__PURE__ */ f.jsx("div", { children: a?.map((l, c) => /* @__PURE__ */ f.jsx(HI, { doc: l }, c)) })
  ] });
}, YI = () => {
  const { zoom: e, setZoom: t } = Bt(), { fitViewport: r } = rb(), n = (i) => {
    t(i / 100);
  }, o = [200, 100, 50];
  return /* @__PURE__ */ f.jsxs(wc, { children: [
    /* @__PURE__ */ f.jsx(Th, { asChild: !0, children: /* @__PURE__ */ f.jsxs(Fe, { variant: "outline", size: "sm", className: "h-8 gap-1 shadow-none w-20", children: [
      /* @__PURE__ */ f.jsxs("span", { children: [
        Math.round(e * 100),
        "%"
      ] }),
      /* @__PURE__ */ f.jsx(Pd, { className: "h-3 w-3" })
    ] }) }),
    /* @__PURE__ */ f.jsxs(Ja, { align: "end", className: "w-[180px]", children: [
      /* @__PURE__ */ f.jsxs(tr, { onClick: () => n(Math.min(e * 100 + 25, 200)), children: [
        "Zoom in",
        /* @__PURE__ */ f.jsx(Vi, { children: "⌘+" })
      ] }),
      /* @__PURE__ */ f.jsxs(tr, { onClick: () => n(Math.max(e * 100 - 25, 25)), children: [
        "Zoom out",
        /* @__PURE__ */ f.jsx(Vi, { children: "⌘-" })
      ] }),
      /* @__PURE__ */ f.jsxs(tr, { onClick: () => r(), children: [
        "Zoom to Fit",
        /* @__PURE__ */ f.jsx(Vi, { children: "⌘0" })
      ] }),
      /* @__PURE__ */ f.jsx(ia, {}),
      o.map((i) => /* @__PURE__ */ f.jsxs(tr, { onClick: () => n(i), children: [
        i,
        "%",
        i === 100 && /* @__PURE__ */ f.jsx(Vi, { children: "⌘1" })
      ] }, i))
    ] })
  ] });
};
function qI({ onClose: e }) {
  const [t, r] = Ce(""), [n, o] = Ce(!1), i = bt(null), a = bt(null);
  ze(() => {
    i.current?.focus();
  }, []), ze(() => {
    const u = (d) => {
      a.current && !a.current.contains(d.target) && e?.();
    };
    return document.addEventListener("mousedown", u), () => {
      document.removeEventListener("mousedown", u);
    };
  }, [e]);
  const s = async () => {
    !t.trim() || n || (o(!0), setTimeout(() => {
      console.log("AI Response:", t.trim()), r(""), o(!1);
    }, 1e4));
  }, l = (u) => {
    u.key === "Enter" && !u.shiftKey && (u.preventDefault(), s());
  }, c = (u) => {
    u.stopPropagation();
  };
  return /* @__PURE__ */ f.jsxs("div", { ref: a, onClick: c, className: "flex flex-col w-96 bg-background rounded-lg border", children: [
    /* @__PURE__ */ f.jsx("div", { className: "flex-1", children: /* @__PURE__ */ f.jsx(
      mi,
      {
        ref: i,
        value: t,
        onChange: (u) => r(u.target.value),
        onKeyPress: l,
        placeholder: "Describe what you want to create... (e.g., 'Create a dashboard showing sales data')",
        className: "w-full resize-none text-sm border-0 transition-all duration-200 focus-visible:ring-0 focus-visible:ring-offset-0",
        disabled: n,
        rows: 3
      }
    ) }),
    /* @__PURE__ */ f.jsxs("div", { className: "flex items-center justify-between px-2 py-2", children: [
      /* @__PURE__ */ f.jsx("div", { className: "flex items-center gap-3" }),
      /* @__PURE__ */ f.jsx("div", { className: "flex items-center gap-2", children: /* @__PURE__ */ f.jsx(Fe, { onClick: s, disabled: !t.trim() || n, size: "sm", className: "h-8 w-8 p-0 bg-foreground text-background hover:bg-foreground/90", children: n ? /* @__PURE__ */ f.jsx(Cg, { className: "h-4 w-4 animate-spin" }) : /* @__PURE__ */ f.jsx(bC, { className: "h-4 w-4" }) }) })
    ] })
  ] });
}
const Kn = ({ icon: e, label: t, onClick: r, active: n = !1, disabled: o = !1 }) => /* @__PURE__ */ f.jsxs(
  Fe,
  {
    variant: n ? "secondary" : "ghost",
    size: "sm",
    className: `h-7 w-7 p-0 flex items-center justify-center relative group ${n ? "dark:!bg-gray-600" : ""}`,
    onClick: r,
    disabled: o,
    children: [
      /* @__PURE__ */ f.jsx(e, { className: "h-4 w-4" }),
      /* @__PURE__ */ f.jsx("span", { className: "absolute -top-10 left-1/2 transform -translate-x-1/2 bg-black dark:bg-slate-700 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap", children: t })
    ]
  }
), XI = () => {
  const { isAiChatOpen: e, setIsAiChatOpen: t } = Bt(), r = () => {
    t(!e);
  };
  return /* @__PURE__ */ f.jsx(
    Kn,
    {
      icon: la,
      label: "AI",
      active: e,
      onClick: r
    }
  );
}, mu = [
  {
    title: "Plugins",
    items: [
      {
        label: "Asset Library",
        icon: rp,
        gradient: "from-blue-500 to-blue-600",
        textColor: "text-gray-700 dark:text-gray-200",
        onClick: () => console.log("Asset Library clicked")
      },
      {
        label: "Data Filler",
        icon: tp,
        gradient: "from-green-500 to-green-600",
        textColor: "text-gray-700 dark:text-gray-200",
        onClick: () => console.log("Data Filler clicked")
      },
      {
        label: "Interaction Engine",
        icon: aE,
        gradient: "from-purple-500 to-purple-600",
        textColor: "text-gray-700 dark:text-gray-200",
        onClick: () => console.log("Interaction Engine clicked")
      },
      {
        label: "Font Manager",
        icon: _g,
        gradient: "from-orange-400 to-orange-500",
        textColor: "text-gray-700 dark:text-gray-200",
        onClick: () => console.log("Font Manager clicked")
      }
    ]
  },
  {
    title: "Project",
    items: [
      {
        label: "New Page",
        icon: Vo,
        textColor: "text-gray-700 dark:text-gray-200",
        onClick: () => console.log("New Page clicked")
      },
      {
        label: "New Section",
        icon: Vo,
        textColor: "text-gray-700 dark:text-gray-200",
        onClick: () => console.log("New Section clicked")
      },
      {
        label: "Save as Template",
        icon: tp,
        textColor: "text-gray-700 dark:text-gray-200",
        onClick: () => console.log("Save as Template clicked")
      },
      {
        label: "Export to Code",
        icon: rp,
        textColor: "text-gray-700 dark:text-gray-200",
        onClick: () => console.log("Export to Code clicked")
      },
      {
        label: "Deploy to Web",
        icon: rE,
        textColor: "text-gray-700 dark:text-gray-200",
        shortcut: "⌘P",
        onClick: () => console.log("Deploy to Web clicked")
      }
    ]
  }
];
function KI() {
  const [e, t] = Ce(-1), r = mu.flatMap((i) => i.items), n = bt([]);
  ze(() => {
    const i = (a) => {
      if (a.key === "ArrowDown")
        a.preventDefault(), t((s) => (s + 1) % r.length);
      else if (a.key === "ArrowUp")
        a.preventDefault(), t((s) => (s - 1 + r.length) % r.length);
      else if (a.key === "Enter") {
        a.preventDefault();
        const s = r[e];
        s?.onClick ? s.onClick() : n.current[e]?.click();
      }
    };
    return window.addEventListener("keydown", i), () => window.removeEventListener("keydown", i);
  }, [e, r]), ze(() => {
    const i = n.current[e];
    i && i.scrollIntoView({ block: "nearest" });
  }, [e]);
  const o = (i, a) => {
    t(a), i.onClick?.();
  };
  return /* @__PURE__ */ f.jsx("div", { className: "flex items-start justify-center overflow-hidden bg-background border-none shadow-none", children: /* @__PURE__ */ f.jsxs("div", { className: "w-full", children: [
    /* @__PURE__ */ f.jsx("div", { className: "p-2 border-b border-border", children: /* @__PURE__ */ f.jsxs("div", { className: "relative", children: [
      /* @__PURE__ */ f.jsx(Dg, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4" }),
      /* @__PURE__ */ f.jsx(
        We,
        {
          type: "text",
          placeholder: "Search...",
          className: "pl-10 bg-muted/50 border-0 rounded-lg h-9 text-sm placeholder:text-muted-foreground focus:bg-background focus:ring-2 focus:ring-ring transition-all duration-200"
        }
      )
    ] }) }),
    /* @__PURE__ */ f.jsx("div", { className: "max-h-96 overflow-auto", children: mu.map((i, a) => /* @__PURE__ */ f.jsxs("div", { className: Ir("p-2 border-border", a !== 0 && "border-t"), children: [
      /* @__PURE__ */ f.jsx("h3", { className: "text-xs font-semibold text-muted-foreground px-3 py-2 bg-background", children: i.title }),
      /* @__PURE__ */ f.jsx("div", { className: "space-y-1", children: i.items.map((s, l) => {
        const c = mu.slice(0, a).reduce((d, h) => d + h.items.length, 0) + l, u = c === e;
        return /* @__PURE__ */ f.jsxs(
          Fe,
          {
            ref: (d) => {
              n.current[c] = d;
            },
            onClick: () => o(s, c),
            variant: "ghost",
            className: Ir(
              "w-full h-10 px-3 rounded-lg transition-all duration-200",
              s.shortcut ? "justify-between" : "justify-start",
              s.bgColor ?? "hover:bg-accent",
              s.textColor ?? "text-foreground",
              u && "bg-accent hover:bg-accent/80"
            ),
            children: [
              /* @__PURE__ */ f.jsxs("div", { className: "flex items-center", children: [
                /* @__PURE__ */ f.jsx(
                  "div",
                  {
                    className: Ir("w-6 h-6 rounded-md mr-3 flex items-center justify-center shadow-sm", s.gradient ? `bg-gradient-to-br ${s.gradient}` : "bg-muted"),
                    children: /* @__PURE__ */ f.jsx(s.icon, { className: Ir("w-3.5 h-3.5", s.gradient ? "text-white" : "text-muted-foreground") })
                  }
                ),
                /* @__PURE__ */ f.jsx("span", { className: "text-sm font-medium", children: s.label })
              ] }),
              s.shortcut && /* @__PURE__ */ f.jsx("span", { className: "text-xs text-muted-foreground bg-muted px-1.5 py-0.5 rounded font-mono", children: s.shortcut })
            ]
          },
          s.label
        );
      }) })
    ] }, i.title)) })
  ] }) });
}
const ZI = () => /* @__PURE__ */ f.jsxs(wc, { modal: !1, children: [
  /* @__PURE__ */ f.jsx(Th, { asChild: !0, children: /* @__PURE__ */ f.jsx("div", { children: /* @__PURE__ */ f.jsx(Kn, { icon: pE, label: "Plugins" }) }) }),
  /* @__PURE__ */ f.jsx(Ja, { side: "top", className: "p-0 w-80 overflow-hidden !shadow-none mb-3", children: /* @__PURE__ */ f.jsx(KI, {}) })
] });
var QI = (e, t, r, n, o, i, a, s) => {
  let l = document.documentElement, c = ["light", "dark"];
  function u(p) {
    (Array.isArray(e) ? e : [e]).forEach((g) => {
      let v = g === "class", m = v && i ? o.map((x) => i[x] || x) : o;
      v ? (l.classList.remove(...m), l.classList.add(i && i[p] ? i[p] : p)) : l.setAttribute(g, p);
    }), d(p);
  }
  function d(p) {
    s && c.includes(p) && (l.style.colorScheme = p);
  }
  function h() {
    return window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
  }
  if (n) u(n);
  else try {
    let p = localStorage.getItem(t) || r, g = a && p === "system" ? h() : p;
    u(g);
  } catch {
  }
}, JI = C.createContext(void 0), e5 = { setTheme: (e) => {
}, themes: [] }, t5 = () => {
  var e;
  return (e = C.useContext(JI)) != null ? e : e5;
};
C.memo(({ forcedTheme: e, storageKey: t, attribute: r, enableSystem: n, enableColorScheme: o, defaultTheme: i, value: a, themes: s, nonce: l, scriptProps: c }) => {
  let u = JSON.stringify([r, t, i, e, s, a, n, o]).slice(1, -1);
  return C.createElement("script", { ...c, suppressHydrationWarning: !0, nonce: typeof window > "u" ? l : "", dangerouslySetInnerHTML: { __html: `(${QI.toString()})(${u})` } });
});
const r5 = () => {
  const { theme: e, setTheme: t } = t5(), [r, n] = Ce(!1);
  ze(() => {
    n(!0);
  }, []);
  const o = () => {
    t(e === "light" ? "dark" : "light");
  };
  return r ? /* @__PURE__ */ f.jsx(
    Kn,
    {
      icon: e === "light" ? DE : ip,
      label: e === "light" ? "Dark Mode" : "Light Mode",
      onClick: o
    }
  ) : /* @__PURE__ */ f.jsx(
    Kn,
    {
      icon: ip,
      label: "Light Mode",
      onClick: () => {
      }
    }
  );
};
function n5() {
  const { mode: e, setMode: t, isAiChatOpen: r, setIsAiChatOpen: n } = Bt(), o = () => {
  }, i = () => {
    n(!1);
  };
  return /* @__PURE__ */ f.jsx("footer", { className: "absolute bottom-4 left-2 right-2 h-10 px-4 z-10", children: /* @__PURE__ */ f.jsxs("div", { className: "relative h-full flex items-center", children: [
    /* @__PURE__ */ f.jsx("div", { className: "absolute left-0 z-10" }),
    /* @__PURE__ */ f.jsxs("div", { className: "absolute left-0 right-0 flex justify-center", children: [
      /* @__PURE__ */ f.jsx(
        "div",
        {
          className: `transition-all duration-500 ease-out ${r ? "transform translate-y-6 opacity-0 scale-95 pointer-events-none" : "transform translate-y-0 opacity-100 scale-100"}`,
          children: /* @__PURE__ */ f.jsxs("div", { className: "flex items-center gap-1 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg px-1 py-1", children: [
            /* @__PURE__ */ f.jsx(Kn, { icon: ME, label: "Move", active: e === "select", onClick: () => t("select") }),
            /* @__PURE__ */ f.jsx(Kn, { icon: lE, label: "Hand Tool", active: e === "hand", onClick: () => t("hand") }),
            /* @__PURE__ */ f.jsx(Kn, { icon: bg, label: "Upload", onClick: o }),
            /* @__PURE__ */ f.jsx(r5, {}),
            /* @__PURE__ */ f.jsx(XI, {}),
            /* @__PURE__ */ f.jsx(ZI, {})
          ] })
        }
      ),
      /* @__PURE__ */ f.jsx(
        "div",
        {
          className: `fixed left-1/2 bottom-2 -translate-x-1/2 transition-all duration-500 ease-out ${r ? "transform translate-y-0 opacity-100 scale-100" : "transform translate-y-6 opacity-0 scale-95 pointer-events-none"}`,
          children: /* @__PURE__ */ f.jsx(qI, { onClose: i })
        }
      )
    ] }),
    /* @__PURE__ */ f.jsx("div", { className: "absolute right-0 flex items-center gap-4 z-10 bg-background", children: /* @__PURE__ */ f.jsx(YI, {}) })
  ] }) });
}
const o5 = () => /* @__PURE__ */ f.jsx("div", { className: "absolute -top-2 -right-2 w-4 h-4 bg-white/90 rounded-full flex items-center justify-center text-xs z-[1000] shadow-sm", children: /* @__PURE__ */ f.jsx(Id, {}) }), i5 = ({
  position: e,
  zoom: t
}) => {
  const r = Yt(), n = r.selectedNodes, i = r.getCurrentSelection().selectedNodes?.filter(
    (a) => n.includes(a.id) && a.position?.locked === !0
  ).map((a) => ({
    id: a.id,
    position: a.position
  })) || [];
  return /* @__PURE__ */ f.jsx(f.Fragment, { children: i.map((a) => /* @__PURE__ */ f.jsx(
    "div",
    {
      className: "absolute",
      style: {
        left: `${a.position.left * t + a.position.width * t}px`,
        top: `${a.position.top * t}px`,
        transform: `translate(${e.x}px, ${e.y}px) scale(1)`
      },
      children: /* @__PURE__ */ f.jsx(o5, {})
    },
    a.id
  )) });
};
ch.register({
  id: "canvas.selectAll",
  // Use bitmask for Ctrl/Cmd + A
  keys: $o.CtrlCmd | $e.KEY_A,
  when: () => sn.focus.get(),
  handler(e) {
    e.editor.selectAll();
  },
  weight: 100
});
ch.register({
  id: "canvas.deleteNode",
  keys: $o.CtrlCmd | $e.Backspace,
  when: () => sn.focus.get() && sn.nodeFocus.get(),
  handler: (e) => {
    e.editor.removeSelectedNode();
  },
  weight: 100
});
const a5 = () => {
  const e = Pa(), t = Yt(), r = C.useRef(null), { checkBlur: n } = Bt(), o = C.useRef(null), { ref: i, position: a, spacePressed: s, zoom: l, mode: c } = rb(), u = t.selectedNodes.map((y) => document.querySelector(`[data-veltix-node-id="${y}"]`)).filter((y) => y !== null), { onSelectoDragStart: d, onSelectoScroll: h, onSelectoEnd: p } = EO({
    selecto: r,
    moveableManager: o,
    selectedTargets: u,
    onCheckBlur: n,
    // 使用 store 中的方法
    onSetSelectedTargets: (y) => {
      const b = y.map((w) => w.dataset.veltixNodeId);
      return t.setSelectedNodes(b), Promise.resolve();
    },
    width: e.width,
    height: e.height
  }), g = Bt((y) => y.horizontalGuides), v = Bt((y) => y.verticalGuides), { handleDragOver: m, handleDrop: x } = uO();
  return CO(i, {
    onFocus() {
      sn.focus.set(!0);
    },
    onBlur() {
      sn.focus.set(!1);
    }
  }), /* @__PURE__ */ f.jsxs(
    "div",
    {
      className: "veltix-viewport relative flex-1 overflow-hidden",
      style: { cursor: c === "hand" ? "grab" : "default", outline: "none" },
      onDragOver: m,
      onDrop: x,
      ref: i,
      children: [
        /* @__PURE__ */ f.jsx("div", { className: "veltix-viewer bg-gray-50 dark:bg-background", children: /* @__PURE__ */ f.jsxs("div", { className: "w-full h-full", children: [
          /* @__PURE__ */ f.jsx(
            WI,
            {
              style: {
                transformOrigin: "0px 0px",
                transform: `translate(${a.x}px, ${a.y}px) scale(${l})`
              },
              children: /* @__PURE__ */ f.jsx(
                C4,
                {
                  ref: o,
                  selecto: r,
                  selectedTargets: u,
                  verticalGuidelines: v,
                  horizontalGuidelines: g,
                  zoom: l
                }
              )
            }
          ),
          /* @__PURE__ */ f.jsx(
            i5,
            {
              position: a,
              zoom: l
            }
          )
        ] }) }),
        /* @__PURE__ */ f.jsx(
          cO,
          {
            ref: r,
            getElementRect: LA,
            dragContainer: ".veltix-viewer",
            hitRate: 0,
            selectableTargets: [`.scena-viewport [${di}]`],
            selectByClick: !0,
            selectFromInside: !1,
            toggleContinueSelect: ["shift"],
            preventDefault: !1,
            scrollOptions: i.current ? {
              container: i.current,
              threshold: 30,
              throttleTime: 30,
              getScrollPosition: () => [a.x, a.y]
            } : void 0,
            onDragStart: d,
            onScroll: h,
            onSelectEnd: p
          }
        ),
        /* @__PURE__ */ f.jsx(n5, {}),
        (s || c === "hand") && /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
          /* @__PURE__ */ f.jsx("div", { className: "absolute top-0 right-0 bottom-0 left-0 cursor-grab" }),
          /* @__PURE__ */ f.jsx("div", { className: "cursor-grab" })
        ] })
      ]
    }
  );
}, s5 = () => {
  const { activePanelId: e } = Bt(), t = JE(e || ""), r = xu(() => _f(), []);
  return xu(() => t ? /* @__PURE__ */ f.jsx(f.Fragment, { children: Me.createElement(t.viewContainer, { context: r }) }) : null, [t, r]);
}, l5 = () => {
  const { status: e, lastSaved: t, error: r, getDiffSummary: n, saveNow: o, pendingSave: i } = Ld(), { json: a } = ke(), s = () => {
    if (!t) return "";
    const p = (/* @__PURE__ */ new Date()).getTime() - t.getTime();
    if (p < 6e4)
      return "just now";
    if (p < 36e5) {
      const v = Math.floor(p / 6e4);
      return `${v} ${v === 1 ? "minute" : "minutes"} ago`;
    }
    const g = Math.floor(p / 36e5);
    return `${g} ${g === 1 ? "hour" : "hours"} ago`;
  };
  if (!a) return null;
  const l = !i && e !== "error", c = l ? "No changes to save" : "Save current changes", u = ({ icon: h, className: p, tooltip: g }) => /* @__PURE__ */ f.jsxs(Yo, { children: [
    /* @__PURE__ */ f.jsx(qo, { asChild: !0, children: /* @__PURE__ */ f.jsx(Fe, { variant: "outline", size: "sm", className: "h-6 px-2 py-1", children: /* @__PURE__ */ f.jsx(h, { className: `h-4 w-4 ${p || ""}` }) }) }),
    g && /* @__PURE__ */ f.jsx(Xo, { children: g })
  ] }), d = () => {
    const h = e === "idle" ? "Ready" : e === "saving" ? "Saving..." : e === "saved" ? "Saved" : "Error", p = e === "saved" ? ` ${s()}` : "", g = n();
    return `${h}${p} - ${g}`;
  };
  return /* @__PURE__ */ f.jsx(
    "div",
    {
      className: "flex items-center gap-2 text-sm",
      "data-save-status": e,
      "data-save-last-saved": s(),
      title: d(),
      children: /* @__PURE__ */ f.jsxs("div", { className: "flex items-center gap-1", children: [
        e === "idle" && /* @__PURE__ */ f.jsxs(Yo, { children: [
          /* @__PURE__ */ f.jsx(qo, { asChild: !0, children: /* @__PURE__ */ f.jsx(Fe, { variant: "outline", size: "sm", className: "h-6 px-2 py-1", onClick: o, disabled: l, children: /* @__PURE__ */ f.jsx(pg, { className: "h-4 w-4" }) }) }),
          /* @__PURE__ */ f.jsx(Xo, { children: c })
        ] }),
        e === "saving" && /* @__PURE__ */ f.jsx(u, { icon: Cg, className: "animate-spin", tooltip: "Saving changes..." }),
        e === "saved" && /* @__PURE__ */ f.jsx(u, { icon: _l, tooltip: `Saved ${s()}` }),
        e === "error" && /* @__PURE__ */ f.jsx(u, { icon: jC, tooltip: r?.message || "Error saving" })
      ] })
    }
  );
}, c5 = (e) => /* @__PURE__ */ f.jsxs(
  "svg",
  {
    xmlns: "http://www.w3.org/2000/svg",
    fill: "none",
    viewBox: "0 0 216 60",
    preserveAspectRatio: "xMidYMid meet",
    ...e,
    children: [
      /* @__PURE__ */ f.jsx(
        "path",
        {
          fill: "currentColor",
          d: "m114.853 12.504 4.923.651a222.259 222.259 0 0 1-6.766 16.168 285.418 285.418 0 0 1-7.936 15.712l-6.029-.087c-4.958-10.026-9.107-20.5-12.446-31.424l5.117-.76a174.922 174.922 0 0 0 4.64 14.172 158.802 158.802 0 0 0 5.964 13.78 172.588 172.588 0 0 0 6.852-13.672 154.518 154.518 0 0 0 5.681-14.54ZM130.574 42.409c1.605 0 3.08-.478 4.424-1.432 1.345-.97 2.219-2.315 2.624-4.037l4.185.846a13.021 13.021 0 0 1-1.713 3.581 12.322 12.322 0 0 1-2.581 2.756 11.483 11.483 0 0 1-3.252 1.78c-1.171.42-2.4.63-3.687.63-1.908 0-3.599-.29-5.074-.869-1.474-.579-2.717-1.396-3.729-2.452-2.068-2.156-3.101-5.093-3.101-8.811 0-1.808.303-3.494.911-5.056.621-1.577 1.467-2.944 2.537-4.102a11.798 11.798 0 0 1 3.773-2.734c1.445-.666 3.007-.999 4.683-.999 1.504 0 2.921.297 4.251.89a11.355 11.355 0 0 1 3.534 2.409c1.027 1.042 1.872 2.264 2.537 3.668.665 1.403 1.084 2.922 1.258 4.557l-18.779 2.8c.101 1.026.354 1.952.759 2.777a7.24 7.24 0 0 0 1.562 2.062c1.286 1.157 2.912 1.736 4.878 1.736Zm-7.069-10.59 13.054-1.585-.13-.412c-.549-1.432-1.308-2.553-2.277-3.364-.954-.81-2.146-1.215-3.578-1.215-.607 0-1.272.109-1.994.326-.723.202-1.424.557-2.104 1.063-.679.506-1.294 1.186-1.843 2.04-.535.839-.911 1.888-1.128 3.147ZM155.642 41.15l-.564 4.319c-1.027-.015-1.937-.188-2.732-.521a7.321 7.321 0 0 1-2.06-1.302 8.08 8.08 0 0 1-1.562-1.801 14.694 14.694 0 0 1-1.062-2.062c-.694-1.65-1.128-3.516-1.301-5.599l.585-27.517h4.532l-.195 7.074a1292.69 1292.69 0 0 1-.173 5.86 774.54 774.54 0 0 1-.131 4.73 507.33 507.33 0 0 1-.086 3.668 323.2 323.2 0 0 0-.13 5.881c.014 1.331.209 2.532.585 3.603a6.7 6.7 0 0 0 1.496 2.56c.68.71 1.612 1.078 2.798 1.107ZM163.925 22.943l.173-9.506 4.316-.282-.152 9.7 8.413-.281-.325 4.058-8.131.217-.174 18.924-4.575.108.368-18.902-7.503.174.087-3.993 7.503-.217ZM185.935 15.477c0 .84-.311 1.563-.933 2.17a3.021 3.021 0 0 1-2.19.89 2.996 2.996 0 0 1-2.168-.89 3 3 0 0 1-.889-2.17c0-.853.296-1.584.889-2.191.607-.622 1.33-.934 2.168-.934.853 0 1.583.312 2.19.934.622.607.933 1.338.933 2.191Zm-5.508 7.813 4.488-.174-.216 10.417a422.184 422.184 0 0 0-.13 6.75 226.554 226.554 0 0 0-.066 4.708h-4.445c.015-.78.029-1.635.044-2.56.028-.94.05-1.946.065-3.017.029-1.866.072-4.13.13-6.793l.13-9.331ZM188.819 23.203l4.532-1.063 6.7 8.225 6.571-8.355 4.098 1.605-7.915 10.113 8.349 10.243-3.99 1.628-6.983-8.485-6.527 8.398-4.575-1.237 8.305-10.59-8.565-10.482Z"
        }
      ),
      /* @__PURE__ */ f.jsxs("g", { clipPath: "url(#a)", fill: "currentColor", children: [
        /* @__PURE__ */ f.jsx(
          "path",
          {
            fill: "currentColor",
            d: "M0 4a4 4 0 0 1 4-4h51.953a4 4 0 0 1 4 4v52a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4Z"
          }
        ),
        /* @__PURE__ */ f.jsx(
          "path",
          {
            fill: "var(--veltix-logo-icon-fill)",
            d: "M50.474 21.563c.225.153.396.327.523.54.136.228.19.496.19.761-.002.335-.073.642-.294.936-.206.241-.42.473-.64.702-.132.14-.26.284-.388.427-.33.368-.665.73-1 1.093l-.602.652-.512.554c-.195.21-.389.42-.58.633-.293.326-.359.798-.079 1.135l.162.195c.212.254.426.506.64.758.226.266.445.538.662.812.195.241.395.477.596.713.195.229.386.46.576.693.219.269.441.535.666.8.274.323.544.65.812.98.11.133.22.264.333.394 1.25 1.447 1.25 1.447 1.243 2.372-.025.234-.1.409-.213.57-.173.245-.42.434-.697.548-.264.109-.544.158-.845.102-.849-.264-1.346-1.074-1.866-1.745-.22-.282-.447-.558-.674-.834l-.12-.146-.233-.28c-.236-.286-.47-.574-.705-.861l-.139-.17a384.773 384.773 0 0 1-1.558-1.915l-.319-.393c-.432-.535-1.224-.623-1.708-.135a157.54 157.54 0 0 1-.412.414l-.444.446-1.104 1.11a1654.076 1654.076 0 0 1-1.37 1.376l-.27.27-.12.122c-.247.247-.503.48-.767.708-.14.122-.275.248-.411.375-1.127 1.011-2.378 1.876-3.835 2.325l-.217.068c-1.688.445-3.44.05-4.932-.786-.71-.416-1.321-.98-1.912-1.549l-.109-.105c-.43-.415-.835-.838-1.207-1.307-.137-.172-.278-.34-.421-.507-1.384-1.614-1.384-1.614-1.352-2.543.047-.38.206-.607.491-.858.318-.233.609-.309.946-.31.302-.002.608.068.852.246.474.345.827.928 1.159 1.376 1.08 1.454 2.458 3.06 4.304 3.475 1.57.167 2.82-.545 4.007-1.497.253-.21.495-.432.733-.658.14-.131.28-.256.424-.38.35-.305.677-.634 1.005-.963l.2-.2.418-.418a295.7 295.7 0 0 1 1.14-1.14c.335-.336.662-.674.97-1.034.115-.131.236-.252.363-.372l.133-.127c.09-.087.181-.173.273-.258l.13-.127.12-.112c.118-.142.035-.343-.073-.492-.056-.077-.118-.148-.184-.226l-.164-.196c-.083-.1-.083-.1-.169-.2l-.3-.367c-.05-.06-.1-.122-.15-.185l-.287-.35a315.881 315.881 0 0 0-1.573-1.913c-.92-1.106-.92-1.106-.91-1.913.042-.379.21-.609.49-.858.307-.24.576-.341.902-.36a1.44 1.44 0 0 1 .82.19c.319.19.572.46.804.769.284.368.574.73.87 1.087.286.345.567.692.842 1.046l.135.174a1.47 1.47 0 0 0 2.325.011c.226-.276.46-.544.695-.813.215-.248.43-.496.642-.747l.49-.571c.05-.056.05-.056.098-.113.728-.84 1.567-1.536 2.68-.924Z"
          }
        ),
        /* @__PURE__ */ f.jsx(
          "path",
          {
            fill: "var(--veltix-logo-icon-fill)",
            d: "M31.908 22.467c.281.23.541.479.8.733l.115.112c.509.492.982.995 1.417 1.555l.222.28c1.562 1.967 1.562 1.967 1.529 2.716-.071.512-.3.796-.694 1.12a1.098 1.098 0 0 1-.597.17c-.306.01-.62-.05-.87-.227-.428-.304-.745-.811-1.04-1.216-1.336-1.85-1.59-2.12-2.927-3.032l-.149-.102a3.157 3.157 0 0 0-.86-.414 2.696 2.696 0 0 0-2.103.412 7.68 7.68 0 0 0-.438.36l-.154.129c-.336.29-.631.594-.912.937l-.084.102c-.758.92-1.447 1.89-2.118 2.876l-.387.567c-.513.75-1.022 1.5-1.53 2.254l-.374.556c-.357.53-.713 1.06-1.066 1.59-.577.868-1.16 1.728-1.835 2.522l-.129.167c-.493.595-1.146 1.033-1.92 1.13-.622.025-1.067-.11-1.524-.449a2.11 2.11 0 0 1-.407-.406c-.52-.67-.894-1.445-1.286-2.194a140.949 140.949 0 0 0-.477-.902l-.143-.27-.216-.407c-.314-.592-.63-1.183-.947-1.774-.334-.623-.664-1.248-.99-1.876-.22-.424-.445-.843-.675-1.261a84.96 84.96 0 0 1-1.182-2.245c-.134-.262-.27-.522-.412-.779-.222-.407-.402-.78-.39-1.22.005-.211.07-.418.183-.596.118-.185.268-.34.443-.476.17-.132.365-.235.577-.267.19-.03.39-.023.58.01.21.037.41.125.578.257.514.402.795 1.025 1.088 1.608l.229.447.115.223c.159.307.326.61.493.913.366.664.711 1.337 1.056 2.011a68.14 68.14 0 0 0 1 1.886c.305.555.595 1.12.885 1.683.261.506.53 1.006.81 1.5.085.15.16.289.222.443a.288.288 0 0 0 .147.16c.04.018.083.026.124.03.154.014.31-.05.43-.148.29-.234.508-.557.722-.857l.123-.17c.373-.517.735-1.043 1.092-1.571l.48-.704.127-.188c.439-.644.884-1.284 1.33-1.924l.37-.533c.69-.992 1.383-1.988 2.157-2.918l.169-.204c2.435-2.92 5.776-4.816 9.223-2.13Z"
          }
        )
      ] }),
      /* @__PURE__ */ f.jsx("defs", { children: /* @__PURE__ */ f.jsx("clipPath", { id: "a", children: /* @__PURE__ */ f.jsx("path", { fill: "currentColor", d: "M0 0h59.953v60H0z" }) }) })
    ]
  }
), u5 = ({ views: e = [], extraProps: t = {}, fallback: r = null }) => {
  if (!e.length) return r ?? null;
  const n = [...e].sort((o, i) => (o.order ?? 0) - (i.order ?? 0));
  return /* @__PURE__ */ f.jsx(f.Fragment, { children: n.map((o) => {
    const i = o.viewContainer;
    return /* @__PURE__ */ f.jsxs(Yo, { children: [
      /* @__PURE__ */ f.jsx(qo, { asChild: !0, children: /* @__PURE__ */ f.jsx("span", { children: /* @__PURE__ */ f.jsx(i, { ...t }) }) }),
      /* @__PURE__ */ f.jsx(Xo, { children: o.title })
    ] }, o.id);
  }) });
}, d5 = () => {
  const { json: e } = ke(), t = () => {
    if (!e) return;
    const r = JSON.stringify(e, null, 2), n = new Blob([r], { type: "application/json" }), o = URL.createObjectURL(n), i = document.createElement("a");
    i.href = o, i.download = `${e.title || "project"}-${(/* @__PURE__ */ new Date()).toISOString().split("T")[0]}.json`, document.body.appendChild(i), i.click(), document.body.removeChild(i), URL.revokeObjectURL(o);
  };
  return /* @__PURE__ */ f.jsxs(Yo, { children: [
    /* @__PURE__ */ f.jsx(qo, { asChild: !0, children: /* @__PURE__ */ f.jsx(
      Fe,
      {
        variant: "outline",
        size: "sm",
        onClick: t,
        className: "h-8 px-3 shadow-none",
        children: /* @__PURE__ */ f.jsx(gg, { className: "h-4 w-4" })
      }
    ) }),
    /* @__PURE__ */ f.jsx(Xo, { children: /* @__PURE__ */ f.jsx("p", { children: "Export Project" }) })
  ] });
}, f5 = (e) => {
  const [t, r] = Ce(e.value), { markForSave: n } = Ld(), o = "hover:border hover:border-gray-600 focus:border focus:border-gray-600";
  return /* @__PURE__ */ f.jsxs("div", { className: "max-w-[240px] overflow-hidden relative min-w-[120px] text-sm", children: [
    /* @__PURE__ */ f.jsx(
      "input",
      {
        tabIndex: -1,
        className: ca(
          "appearance-none bg-transparent box-border font-[ligatures:none] border border-transparent rounded-md shadow-none  text-ellipsis outline-none absolute left-0 top-0 m-0 w-full h-9 p-2",
          o
        ),
        maxLength: 255,
        "aria-label": t,
        type: "text",
        autoComplete: "off",
        value: t,
        placeholder: "Untitled",
        onChange: (i) => {
          r(i.target.value);
        },
        onBlur: () => {
          e.onChange(t), n();
        },
        onKeyDown: (i) => {
          const a = i.target;
          i.key === "Enter" && (e.onChange(t), n(), a.blur());
        }
      }
    ),
    /* @__PURE__ */ f.jsx("div", { className: ca(
      "appearance-none bg-transparent box-border font-[ligatures:none] border border-transparent rounded-md shadow-none text-ellipsis outline-none absolute left-0 top-0 m-0 w-full h-9 p-2 opacity-0 pointer-events-none relative whitespace-pre",
      o
    ), children: t })
  ] });
};
var Sc = "Checkbox", [h5, DF] = Gt(Sc), [p5, jh] = h5(Sc);
function v5(e) {
  const {
    __scopeCheckbox: t,
    checked: r,
    children: n,
    defaultChecked: o,
    disabled: i,
    form: a,
    name: s,
    onCheckedChange: l,
    required: c,
    value: u = "on",
    // @ts-expect-error
    internal_do_not_use_render: d
  } = e, [h, p] = Sr({
    prop: r,
    defaultProp: o ?? !1,
    onChange: l,
    caller: Sc
  }), [g, v] = C.useState(null), [m, x] = C.useState(null), y = C.useRef(!1), b = g ? !!a || !!g.closest("form") : (
    // We set this to true by default so that events bubble to forms without JS (SSR)
    !0
  ), w = {
    checked: h,
    disabled: i,
    setChecked: p,
    control: g,
    setControl: v,
    name: s,
    form: a,
    value: u,
    hasConsumerStoppedPropagationRef: y,
    required: c,
    defaultChecked: _n(o) ? !1 : o,
    isFormControl: b,
    bubbleInput: m,
    setBubbleInput: x
  };
  return /* @__PURE__ */ f.jsx(
    p5,
    {
      scope: t,
      ...w,
      children: g5(d) ? d(w) : n
    }
  );
}
var ww = "CheckboxTrigger", Sw = C.forwardRef(
  ({ __scopeCheckbox: e, onKeyDown: t, onClick: r, ...n }, o) => {
    const {
      control: i,
      value: a,
      disabled: s,
      checked: l,
      required: c,
      setControl: u,
      setChecked: d,
      hasConsumerStoppedPropagationRef: h,
      isFormControl: p,
      bubbleInput: g
    } = jh(ww, e), v = _e(o, u), m = C.useRef(l);
    return C.useEffect(() => {
      const x = i?.form;
      if (x) {
        const y = () => d(m.current);
        return x.addEventListener("reset", y), () => x.removeEventListener("reset", y);
      }
    }, [i, d]), /* @__PURE__ */ f.jsx(
      me.button,
      {
        type: "button",
        role: "checkbox",
        "aria-checked": _n(l) ? "mixed" : l,
        "aria-required": c,
        "data-state": Rw(l),
        "data-disabled": s ? "" : void 0,
        disabled: s,
        value: a,
        ...n,
        ref: v,
        onKeyDown: ue(t, (x) => {
          x.key === "Enter" && x.preventDefault();
        }),
        onClick: ue(r, (x) => {
          d((y) => _n(y) ? !0 : !y), g && p && (h.current = x.isPropagationStopped(), h.current || x.stopPropagation());
        })
      }
    );
  }
);
Sw.displayName = ww;
var Cw = C.forwardRef(
  (e, t) => {
    const {
      __scopeCheckbox: r,
      name: n,
      checked: o,
      defaultChecked: i,
      required: a,
      disabled: s,
      value: l,
      onCheckedChange: c,
      form: u,
      ...d
    } = e;
    return /* @__PURE__ */ f.jsx(
      v5,
      {
        __scopeCheckbox: r,
        checked: o,
        defaultChecked: i,
        disabled: s,
        required: a,
        onCheckedChange: c,
        name: n,
        form: u,
        value: l,
        internal_do_not_use_render: ({ isFormControl: h }) => /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
          /* @__PURE__ */ f.jsx(
            Sw,
            {
              ...d,
              ref: t,
              __scopeCheckbox: r
            }
          ),
          h && /* @__PURE__ */ f.jsx(
            Dw,
            {
              __scopeCheckbox: r
            }
          )
        ] })
      }
    );
  }
);
Cw.displayName = Sc;
var Ew = "CheckboxIndicator", _w = C.forwardRef(
  (e, t) => {
    const { __scopeCheckbox: r, forceMount: n, ...o } = e, i = jh(Ew, r);
    return /* @__PURE__ */ f.jsx(
      Nt,
      {
        present: n || _n(i.checked) || i.checked === !0,
        children: /* @__PURE__ */ f.jsx(
          me.span,
          {
            "data-state": Rw(i.checked),
            "data-disabled": i.disabled ? "" : void 0,
            ...o,
            ref: t,
            style: { pointerEvents: "none", ...e.style }
          }
        )
      }
    );
  }
);
_w.displayName = Ew;
var Nw = "CheckboxBubbleInput", Dw = C.forwardRef(
  ({ __scopeCheckbox: e, ...t }, r) => {
    const {
      control: n,
      hasConsumerStoppedPropagationRef: o,
      checked: i,
      defaultChecked: a,
      required: s,
      disabled: l,
      name: c,
      value: u,
      form: d,
      bubbleInput: h,
      setBubbleInput: p
    } = jh(Nw, e), g = _e(r, p), v = Ul(i), m = Ll(n);
    C.useEffect(() => {
      const y = h;
      if (!y) return;
      const b = window.HTMLInputElement.prototype, _ = Object.getOwnPropertyDescriptor(
        b,
        "checked"
      ).set, R = !o.current;
      if (v !== i && _) {
        const T = new Event("click", { bubbles: R });
        y.indeterminate = _n(i), _.call(y, _n(i) ? !1 : i), y.dispatchEvent(T);
      }
    }, [h, v, i, o]);
    const x = C.useRef(_n(i) ? !1 : i);
    return /* @__PURE__ */ f.jsx(
      me.input,
      {
        type: "checkbox",
        "aria-hidden": !0,
        defaultChecked: a ?? x.current,
        required: s,
        disabled: l,
        name: c,
        value: u,
        form: d,
        ...t,
        tabIndex: -1,
        ref: g,
        style: {
          ...t.style,
          ...m,
          position: "absolute",
          pointerEvents: "none",
          opacity: 0,
          margin: 0,
          // We transform because the input is absolutely positioned but we have
          // rendered it **after** the button. This pulls it back to sit on top
          // of the button.
          transform: "translateX(-100%)"
        }
      }
    );
  }
);
Dw.displayName = Nw;
function g5(e) {
  return typeof e == "function";
}
function _n(e) {
  return e === "indeterminate";
}
function Rw(e) {
  return _n(e) ? "indeterminate" : e ? "checked" : "unchecked";
}
function ig({
  className: e,
  ...t
}) {
  return /* @__PURE__ */ f.jsx(
    Cw,
    {
      "data-slot": "checkbox",
      className: Ee(
        "peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
        e
      ),
      ...t,
      children: /* @__PURE__ */ f.jsx(
        _w,
        {
          "data-slot": "checkbox-indicator",
          className: "flex items-center justify-center text-current transition-none",
          children: /* @__PURE__ */ f.jsx(_l, { className: "size-3.5" })
        }
      )
    }
  );
}
const m5 = ({
  projectId: e,
  onGenerateSuccess: t
}) => {
  const [r, n] = Ce(!1), [o, i] = Ce(!0), [a, s] = Ce(!1), [l, c] = Ce(""), [u, d] = Ce("7d"), h = async () => {
    if (!e) {
      console.error("Project ID is required to generate share link");
      return;
    }
    n(!0);
    try {
      const p = await fetch("/api/share_links", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          readonly: o,
          editable: a,
          password: l,
          expiresIn: u,
          projectId: e
        })
      }), { url: g } = await p.json();
      t(g);
    } catch (p) {
      console.error("Failed to generate share link:", p);
    } finally {
      n(!1);
    }
  };
  return /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
    /* @__PURE__ */ f.jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ f.jsx("h3", { className: "text-sm font-medium text-muted-foreground", children: "Access Permissions" }),
      /* @__PURE__ */ f.jsxs("div", { className: "space-y-3", children: [
        /* @__PURE__ */ f.jsxs("div", { className: "flex items-center space-x-2", children: [
          /* @__PURE__ */ f.jsx(ig, { id: "readonly", checked: o, onCheckedChange: (p) => i(p) }),
          /* @__PURE__ */ f.jsxs(Te, { htmlFor: "readonly", className: "flex items-center gap-2 cursor-pointer", children: [
            /* @__PURE__ */ f.jsx(Od, { className: "h-4 w-4" }),
            "Read-only Access"
          ] })
        ] }),
        /* @__PURE__ */ f.jsxs("div", { className: "flex items-center space-x-2", children: [
          /* @__PURE__ */ f.jsx(ig, { id: "editable", checked: a, onCheckedChange: (p) => s(p) }),
          /* @__PURE__ */ f.jsxs(Te, { htmlFor: "editable", className: "flex items-center gap-2 cursor-pointer", children: [
            /* @__PURE__ */ f.jsx(XE, { className: "h-4 w-4" }),
            "Allow Collaborative Editing"
          ] })
        ] })
      ] })
    ] }),
    /* @__PURE__ */ f.jsx(oo, {}),
    /* @__PURE__ */ f.jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ f.jsx("h3", { className: "text-sm font-medium text-muted-foreground", children: "Security Settings" }),
      /* @__PURE__ */ f.jsxs("div", { className: "space-y-3", children: [
        /* @__PURE__ */ f.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ f.jsxs(Te, { htmlFor: "password", className: "flex items-center gap-2", children: [
            /* @__PURE__ */ f.jsx(Id, { className: "h-4 w-4" }),
            "Access Password"
          ] }),
          /* @__PURE__ */ f.jsx(We, { id: "password", placeholder: "Set access password (optional)", value: l, onChange: (p) => c(p.target.value), className: "h-9" })
        ] }),
        /* @__PURE__ */ f.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ f.jsxs(Te, { htmlFor: "expiresIn", className: "flex items-center gap-2", children: [
            /* @__PURE__ */ f.jsx(EC, { className: "h-4 w-4" }),
            "Expiration Time"
          ] }),
          /* @__PURE__ */ f.jsx(We, { id: "expiresIn", placeholder: "e.g., 7d, 30d, 1y", value: u, onChange: (p) => d(p.target.value), className: "h-9" })
        ] })
      ] })
    ] }),
    /* @__PURE__ */ f.jsx(oo, {}),
    /* @__PURE__ */ f.jsx(
      Fe,
      {
        onClick: h,
        disabled: r || !e,
        className: "w-full h-10",
        children: r ? "Generating..." : "Generate Share Link"
      }
    ),
    !e && /* @__PURE__ */ f.jsx("p", { className: "text-sm text-muted-foreground text-center", children: "Please save your project first to generate a share link" })
  ] });
}, x5 = ({ url: e }) => {
  const t = `<iframe src="${e}" width="100%" height="600" frameborder="0"></iframe>`;
  return /* @__PURE__ */ f.jsxs("div", { className: "h-full w-full", children: [
    /* @__PURE__ */ f.jsx("p", { className: "text-sm mb-2", children: "Embed code:" }),
    /* @__PURE__ */ f.jsx(mi, { className: "bg-gray-100 p-2 rounded text-xs h-[180px] outline-none resize-none", value: t, readOnly: !0 })
  ] });
};
var y5 = Object.defineProperty, bl = Object.getOwnPropertySymbols, Mw = Object.prototype.hasOwnProperty, Tw = Object.prototype.propertyIsEnumerable, ag = (e, t, r) => t in e ? y5(e, t, { enumerable: !0, configurable: !0, writable: !0, value: r }) : e[t] = r, Dd = (e, t) => {
  for (var r in t || (t = {}))
    Mw.call(t, r) && ag(e, r, t[r]);
  if (bl)
    for (var r of bl(t))
      Tw.call(t, r) && ag(e, r, t[r]);
  return e;
}, Rd = (e, t) => {
  var r = {};
  for (var n in e)
    Mw.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);
  if (e != null && bl)
    for (var n of bl(e))
      t.indexOf(n) < 0 && Tw.call(e, n) && (r[n] = e[n]);
  return r;
};
/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */
var fo;
((e) => {
  const t = class Ie {
    /*-- Constructor (low level) and fields --*/
    // Creates a new QR Code with the given version number,
    // error correction level, data codeword bytes, and mask number.
    // This is a low-level API that most users should not use directly.
    // A mid-level API is the encodeSegments() function.
    constructor(l, c, u, d) {
      if (this.version = l, this.errorCorrectionLevel = c, this.modules = [], this.isFunction = [], l < Ie.MIN_VERSION || l > Ie.MAX_VERSION)
        throw new RangeError("Version value out of range");
      if (d < -1 || d > 7)
        throw new RangeError("Mask value out of range");
      this.size = l * 4 + 17;
      let h = [];
      for (let g = 0; g < this.size; g++)
        h.push(!1);
      for (let g = 0; g < this.size; g++)
        this.modules.push(h.slice()), this.isFunction.push(h.slice());
      this.drawFunctionPatterns();
      const p = this.addEccAndInterleave(u);
      if (this.drawCodewords(p), d == -1) {
        let g = 1e9;
        for (let v = 0; v < 8; v++) {
          this.applyMask(v), this.drawFormatBits(v);
          const m = this.getPenaltyScore();
          m < g && (d = v, g = m), this.applyMask(v);
        }
      }
      o(0 <= d && d <= 7), this.mask = d, this.applyMask(d), this.drawFormatBits(d), this.isFunction = [];
    }
    /*-- Static factory functions (high level) --*/
    // Returns a QR Code representing the given Unicode text string at the given error correction level.
    // As a conservative upper bound, this function is guaranteed to succeed for strings that have 738 or fewer
    // Unicode code points (not UTF-16 code units) if the low error correction level is used. The smallest possible
    // QR Code version is automatically chosen for the output. The ECC level of the result may be higher than the
    // ecl argument if it can be done without increasing the version.
    static encodeText(l, c) {
      const u = e.QrSegment.makeSegments(l);
      return Ie.encodeSegments(u, c);
    }
    // Returns a QR Code representing the given binary data at the given error correction level.
    // This function always encodes using the binary segment mode, not any text mode. The maximum number of
    // bytes allowed is 2953. The smallest possible QR Code version is automatically chosen for the output.
    // The ECC level of the result may be higher than the ecl argument if it can be done without increasing the version.
    static encodeBinary(l, c) {
      const u = e.QrSegment.makeBytes(l);
      return Ie.encodeSegments([u], c);
    }
    /*-- Static factory functions (mid level) --*/
    // Returns a QR Code representing the given segments with the given encoding parameters.
    // The smallest possible QR Code version within the given range is automatically
    // chosen for the output. Iff boostEcl is true, then the ECC level of the result
    // may be higher than the ecl argument if it can be done without increasing the
    // version. The mask number is either between 0 to 7 (inclusive) to force that
    // mask, or -1 to automatically choose an appropriate mask (which may be slow).
    // This function allows the user to create a custom sequence of segments that switches
    // between modes (such as alphanumeric and byte) to encode text in less space.
    // This is a mid-level API; the high-level API is encodeText() and encodeBinary().
    static encodeSegments(l, c, u = 1, d = 40, h = -1, p = !0) {
      if (!(Ie.MIN_VERSION <= u && u <= d && d <= Ie.MAX_VERSION) || h < -1 || h > 7)
        throw new RangeError("Invalid value");
      let g, v;
      for (g = u; ; g++) {
        const b = Ie.getNumDataCodewords(g, c) * 8, w = a.getTotalBits(l, g);
        if (w <= b) {
          v = w;
          break;
        }
        if (g >= d)
          throw new RangeError("Data too long");
      }
      for (const b of [Ie.Ecc.MEDIUM, Ie.Ecc.QUARTILE, Ie.Ecc.HIGH])
        p && v <= Ie.getNumDataCodewords(g, b) * 8 && (c = b);
      let m = [];
      for (const b of l) {
        r(b.mode.modeBits, 4, m), r(b.numChars, b.mode.numCharCountBits(g), m);
        for (const w of b.getData())
          m.push(w);
      }
      o(m.length == v);
      const x = Ie.getNumDataCodewords(g, c) * 8;
      o(m.length <= x), r(0, Math.min(4, x - m.length), m), r(0, (8 - m.length % 8) % 8, m), o(m.length % 8 == 0);
      for (let b = 236; m.length < x; b ^= 253)
        r(b, 8, m);
      let y = [];
      for (; y.length * 8 < m.length; )
        y.push(0);
      return m.forEach((b, w) => y[w >>> 3] |= b << 7 - (w & 7)), new Ie(g, c, y, h);
    }
    /*-- Accessor methods --*/
    // Returns the color of the module (pixel) at the given coordinates, which is false
    // for light or true for dark. The top left corner has the coordinates (x=0, y=0).
    // If the given coordinates are out of bounds, then false (light) is returned.
    getModule(l, c) {
      return 0 <= l && l < this.size && 0 <= c && c < this.size && this.modules[c][l];
    }
    // Modified to expose modules for easy access
    getModules() {
      return this.modules;
    }
    /*-- Private helper methods for constructor: Drawing function modules --*/
    // Reads this object's version field, and draws and marks all function modules.
    drawFunctionPatterns() {
      for (let u = 0; u < this.size; u++)
        this.setFunctionModule(6, u, u % 2 == 0), this.setFunctionModule(u, 6, u % 2 == 0);
      this.drawFinderPattern(3, 3), this.drawFinderPattern(this.size - 4, 3), this.drawFinderPattern(3, this.size - 4);
      const l = this.getAlignmentPatternPositions(), c = l.length;
      for (let u = 0; u < c; u++)
        for (let d = 0; d < c; d++)
          u == 0 && d == 0 || u == 0 && d == c - 1 || u == c - 1 && d == 0 || this.drawAlignmentPattern(l[u], l[d]);
      this.drawFormatBits(0), this.drawVersion();
    }
    // Draws two copies of the format bits (with its own error correction code)
    // based on the given mask and this object's error correction level field.
    drawFormatBits(l) {
      const c = this.errorCorrectionLevel.formatBits << 3 | l;
      let u = c;
      for (let h = 0; h < 10; h++)
        u = u << 1 ^ (u >>> 9) * 1335;
      const d = (c << 10 | u) ^ 21522;
      o(d >>> 15 == 0);
      for (let h = 0; h <= 5; h++)
        this.setFunctionModule(8, h, n(d, h));
      this.setFunctionModule(8, 7, n(d, 6)), this.setFunctionModule(8, 8, n(d, 7)), this.setFunctionModule(7, 8, n(d, 8));
      for (let h = 9; h < 15; h++)
        this.setFunctionModule(14 - h, 8, n(d, h));
      for (let h = 0; h < 8; h++)
        this.setFunctionModule(this.size - 1 - h, 8, n(d, h));
      for (let h = 8; h < 15; h++)
        this.setFunctionModule(8, this.size - 15 + h, n(d, h));
      this.setFunctionModule(8, this.size - 8, !0);
    }
    // Draws two copies of the version bits (with its own error correction code),
    // based on this object's version field, iff 7 <= version <= 40.
    drawVersion() {
      if (this.version < 7)
        return;
      let l = this.version;
      for (let u = 0; u < 12; u++)
        l = l << 1 ^ (l >>> 11) * 7973;
      const c = this.version << 12 | l;
      o(c >>> 18 == 0);
      for (let u = 0; u < 18; u++) {
        const d = n(c, u), h = this.size - 11 + u % 3, p = Math.floor(u / 3);
        this.setFunctionModule(h, p, d), this.setFunctionModule(p, h, d);
      }
    }
    // Draws a 9*9 finder pattern including the border separator,
    // with the center module at (x, y). Modules can be out of bounds.
    drawFinderPattern(l, c) {
      for (let u = -4; u <= 4; u++)
        for (let d = -4; d <= 4; d++) {
          const h = Math.max(Math.abs(d), Math.abs(u)), p = l + d, g = c + u;
          0 <= p && p < this.size && 0 <= g && g < this.size && this.setFunctionModule(p, g, h != 2 && h != 4);
        }
    }
    // Draws a 5*5 alignment pattern, with the center module
    // at (x, y). All modules must be in bounds.
    drawAlignmentPattern(l, c) {
      for (let u = -2; u <= 2; u++)
        for (let d = -2; d <= 2; d++)
          this.setFunctionModule(l + d, c + u, Math.max(Math.abs(d), Math.abs(u)) != 1);
    }
    // Sets the color of a module and marks it as a function module.
    // Only used by the constructor. Coordinates must be in bounds.
    setFunctionModule(l, c, u) {
      this.modules[c][l] = u, this.isFunction[c][l] = !0;
    }
    /*-- Private helper methods for constructor: Codewords and masking --*/
    // Returns a new byte string representing the given data with the appropriate error correction
    // codewords appended to it, based on this object's version and error correction level.
    addEccAndInterleave(l) {
      const c = this.version, u = this.errorCorrectionLevel;
      if (l.length != Ie.getNumDataCodewords(c, u))
        throw new RangeError("Invalid argument");
      const d = Ie.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c], h = Ie.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c], p = Math.floor(Ie.getNumRawDataModules(c) / 8), g = d - p % d, v = Math.floor(p / d);
      let m = [];
      const x = Ie.reedSolomonComputeDivisor(h);
      for (let b = 0, w = 0; b < d; b++) {
        let _ = l.slice(w, w + v - h + (b < g ? 0 : 1));
        w += _.length;
        const R = Ie.reedSolomonComputeRemainder(_, x);
        b < g && _.push(0), m.push(_.concat(R));
      }
      let y = [];
      for (let b = 0; b < m[0].length; b++)
        m.forEach((w, _) => {
          (b != v - h || _ >= g) && y.push(w[b]);
        });
      return o(y.length == p), y;
    }
    // Draws the given sequence of 8-bit codewords (data and error correction) onto the entire
    // data area of this QR Code. Function modules need to be marked off before this is called.
    drawCodewords(l) {
      if (l.length != Math.floor(Ie.getNumRawDataModules(this.version) / 8))
        throw new RangeError("Invalid argument");
      let c = 0;
      for (let u = this.size - 1; u >= 1; u -= 2) {
        u == 6 && (u = 5);
        for (let d = 0; d < this.size; d++)
          for (let h = 0; h < 2; h++) {
            const p = u - h, v = (u + 1 & 2) == 0 ? this.size - 1 - d : d;
            !this.isFunction[v][p] && c < l.length * 8 && (this.modules[v][p] = n(l[c >>> 3], 7 - (c & 7)), c++);
          }
      }
      o(c == l.length * 8);
    }
    // XORs the codeword modules in this QR Code with the given mask pattern.
    // The function modules must be marked and the codeword bits must be drawn
    // before masking. Due to the arithmetic of XOR, calling applyMask() with
    // the same mask value a second time will undo the mask. A final well-formed
    // QR Code needs exactly one (not zero, two, etc.) mask applied.
    applyMask(l) {
      if (l < 0 || l > 7)
        throw new RangeError("Mask value out of range");
      for (let c = 0; c < this.size; c++)
        for (let u = 0; u < this.size; u++) {
          let d;
          switch (l) {
            case 0:
              d = (u + c) % 2 == 0;
              break;
            case 1:
              d = c % 2 == 0;
              break;
            case 2:
              d = u % 3 == 0;
              break;
            case 3:
              d = (u + c) % 3 == 0;
              break;
            case 4:
              d = (Math.floor(u / 3) + Math.floor(c / 2)) % 2 == 0;
              break;
            case 5:
              d = u * c % 2 + u * c % 3 == 0;
              break;
            case 6:
              d = (u * c % 2 + u * c % 3) % 2 == 0;
              break;
            case 7:
              d = ((u + c) % 2 + u * c % 3) % 2 == 0;
              break;
            default:
              throw new Error("Unreachable");
          }
          !this.isFunction[c][u] && d && (this.modules[c][u] = !this.modules[c][u]);
        }
    }
    // Calculates and returns the penalty score based on state of this QR Code's current modules.
    // This is used by the automatic mask choice algorithm to find the mask pattern that yields the lowest score.
    getPenaltyScore() {
      let l = 0;
      for (let h = 0; h < this.size; h++) {
        let p = !1, g = 0, v = [0, 0, 0, 0, 0, 0, 0];
        for (let m = 0; m < this.size; m++)
          this.modules[h][m] == p ? (g++, g == 5 ? l += Ie.PENALTY_N1 : g > 5 && l++) : (this.finderPenaltyAddHistory(g, v), p || (l += this.finderPenaltyCountPatterns(v) * Ie.PENALTY_N3), p = this.modules[h][m], g = 1);
        l += this.finderPenaltyTerminateAndCount(p, g, v) * Ie.PENALTY_N3;
      }
      for (let h = 0; h < this.size; h++) {
        let p = !1, g = 0, v = [0, 0, 0, 0, 0, 0, 0];
        for (let m = 0; m < this.size; m++)
          this.modules[m][h] == p ? (g++, g == 5 ? l += Ie.PENALTY_N1 : g > 5 && l++) : (this.finderPenaltyAddHistory(g, v), p || (l += this.finderPenaltyCountPatterns(v) * Ie.PENALTY_N3), p = this.modules[m][h], g = 1);
        l += this.finderPenaltyTerminateAndCount(p, g, v) * Ie.PENALTY_N3;
      }
      for (let h = 0; h < this.size - 1; h++)
        for (let p = 0; p < this.size - 1; p++) {
          const g = this.modules[h][p];
          g == this.modules[h][p + 1] && g == this.modules[h + 1][p] && g == this.modules[h + 1][p + 1] && (l += Ie.PENALTY_N2);
        }
      let c = 0;
      for (const h of this.modules)
        c = h.reduce((p, g) => p + (g ? 1 : 0), c);
      const u = this.size * this.size, d = Math.ceil(Math.abs(c * 20 - u * 10) / u) - 1;
      return o(0 <= d && d <= 9), l += d * Ie.PENALTY_N4, o(0 <= l && l <= 2568888), l;
    }
    /*-- Private helper functions --*/
    // Returns an ascending list of positions of alignment patterns for this version number.
    // Each position is in the range [0,177), and are used on both the x and y axes.
    // This could be implemented as lookup table of 40 variable-length lists of integers.
    getAlignmentPatternPositions() {
      if (this.version == 1)
        return [];
      {
        const l = Math.floor(this.version / 7) + 2, c = this.version == 32 ? 26 : Math.ceil((this.version * 4 + 4) / (l * 2 - 2)) * 2;
        let u = [6];
        for (let d = this.size - 7; u.length < l; d -= c)
          u.splice(1, 0, d);
        return u;
      }
    }
    // Returns the number of data bits that can be stored in a QR Code of the given version number, after
    // all function modules are excluded. This includes remainder bits, so it might not be a multiple of 8.
    // The result is in the range [208, 29648]. This could be implemented as a 40-entry lookup table.
    static getNumRawDataModules(l) {
      if (l < Ie.MIN_VERSION || l > Ie.MAX_VERSION)
        throw new RangeError("Version number out of range");
      let c = (16 * l + 128) * l + 64;
      if (l >= 2) {
        const u = Math.floor(l / 7) + 2;
        c -= (25 * u - 10) * u - 55, l >= 7 && (c -= 36);
      }
      return o(208 <= c && c <= 29648), c;
    }
    // Returns the number of 8-bit data (i.e. not error correction) codewords contained in any
    // QR Code of the given version number and error correction level, with remainder bits discarded.
    // This stateless pure function could be implemented as a (40*4)-cell lookup table.
    static getNumDataCodewords(l, c) {
      return Math.floor(Ie.getNumRawDataModules(l) / 8) - Ie.ECC_CODEWORDS_PER_BLOCK[c.ordinal][l] * Ie.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][l];
    }
    // Returns a Reed-Solomon ECC generator polynomial for the given degree. This could be
    // implemented as a lookup table over all possible parameter values, instead of as an algorithm.
    static reedSolomonComputeDivisor(l) {
      if (l < 1 || l > 255)
        throw new RangeError("Degree out of range");
      let c = [];
      for (let d = 0; d < l - 1; d++)
        c.push(0);
      c.push(1);
      let u = 1;
      for (let d = 0; d < l; d++) {
        for (let h = 0; h < c.length; h++)
          c[h] = Ie.reedSolomonMultiply(c[h], u), h + 1 < c.length && (c[h] ^= c[h + 1]);
        u = Ie.reedSolomonMultiply(u, 2);
      }
      return c;
    }
    // Returns the Reed-Solomon error correction codeword for the given data and divisor polynomials.
    static reedSolomonComputeRemainder(l, c) {
      let u = c.map((d) => 0);
      for (const d of l) {
        const h = d ^ u.shift();
        u.push(0), c.forEach((p, g) => u[g] ^= Ie.reedSolomonMultiply(p, h));
      }
      return u;
    }
    // Returns the product of the two given field elements modulo GF(2^8/0x11D). The arguments and result
    // are unsigned 8-bit integers. This could be implemented as a lookup table of 256*256 entries of uint8.
    static reedSolomonMultiply(l, c) {
      if (l >>> 8 || c >>> 8)
        throw new RangeError("Byte out of range");
      let u = 0;
      for (let d = 7; d >= 0; d--)
        u = u << 1 ^ (u >>> 7) * 285, u ^= (c >>> d & 1) * l;
      return o(u >>> 8 == 0), u;
    }
    // Can only be called immediately after a light run is added, and
    // returns either 0, 1, or 2. A helper function for getPenaltyScore().
    finderPenaltyCountPatterns(l) {
      const c = l[1];
      o(c <= this.size * 3);
      const u = c > 0 && l[2] == c && l[3] == c * 3 && l[4] == c && l[5] == c;
      return (u && l[0] >= c * 4 && l[6] >= c ? 1 : 0) + (u && l[6] >= c * 4 && l[0] >= c ? 1 : 0);
    }
    // Must be called at the end of a line (row or column) of modules. A helper function for getPenaltyScore().
    finderPenaltyTerminateAndCount(l, c, u) {
      return l && (this.finderPenaltyAddHistory(c, u), c = 0), c += this.size, this.finderPenaltyAddHistory(c, u), this.finderPenaltyCountPatterns(u);
    }
    // Pushes the given value to the front and drops the last value. A helper function for getPenaltyScore().
    finderPenaltyAddHistory(l, c) {
      c[0] == 0 && (l += this.size), c.pop(), c.unshift(l);
    }
  };
  t.MIN_VERSION = 1, t.MAX_VERSION = 40, t.PENALTY_N1 = 3, t.PENALTY_N2 = 3, t.PENALTY_N3 = 40, t.PENALTY_N4 = 10, t.ECC_CODEWORDS_PER_BLOCK = [
    // Version: (note that index 0 is for padding, and is set to an illegal value)
    //0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40    Error correction level
    [-1, 7, 10, 15, 20, 26, 18, 20, 24, 30, 18, 20, 24, 26, 30, 22, 24, 28, 30, 28, 28, 28, 28, 30, 30, 26, 28, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30],
    // Low
    [-1, 10, 16, 26, 18, 24, 16, 18, 22, 22, 26, 30, 22, 22, 24, 24, 28, 28, 26, 26, 26, 26, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28],
    // Medium
    [-1, 13, 22, 18, 26, 18, 24, 18, 22, 20, 24, 28, 26, 24, 20, 30, 24, 28, 28, 26, 30, 28, 30, 30, 30, 30, 28, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30],
    // Quartile
    [-1, 17, 28, 22, 16, 22, 28, 26, 26, 24, 28, 24, 28, 22, 24, 24, 30, 28, 28, 26, 28, 30, 24, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30]
    // High
  ], t.NUM_ERROR_CORRECTION_BLOCKS = [
    // Version: (note that index 0 is for padding, and is set to an illegal value)
    //0, 1, 2, 3, 4, 5, 6, 7, 8, 9,10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40    Error correction level
    [-1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 4, 4, 4, 4, 4, 6, 6, 6, 6, 7, 8, 8, 9, 9, 10, 12, 12, 12, 13, 14, 15, 16, 17, 18, 19, 19, 20, 21, 22, 24, 25],
    // Low
    [-1, 1, 1, 1, 2, 2, 4, 4, 4, 5, 5, 5, 8, 9, 9, 10, 10, 11, 13, 14, 16, 17, 17, 18, 20, 21, 23, 25, 26, 28, 29, 31, 33, 35, 37, 38, 40, 43, 45, 47, 49],
    // Medium
    [-1, 1, 1, 2, 2, 4, 4, 6, 6, 8, 8, 8, 10, 12, 16, 12, 17, 16, 18, 21, 20, 23, 23, 25, 27, 29, 34, 34, 35, 38, 40, 43, 45, 48, 51, 53, 56, 59, 62, 65, 68],
    // Quartile
    [-1, 1, 1, 2, 4, 4, 4, 5, 6, 8, 8, 11, 11, 16, 16, 18, 16, 19, 21, 25, 25, 25, 34, 30, 32, 35, 37, 40, 42, 45, 48, 51, 54, 57, 60, 63, 66, 70, 74, 77, 81]
    // High
  ], e.QrCode = t;
  function r(s, l, c) {
    if (l < 0 || l > 31 || s >>> l)
      throw new RangeError("Value out of range");
    for (let u = l - 1; u >= 0; u--)
      c.push(s >>> u & 1);
  }
  function n(s, l) {
    return (s >>> l & 1) != 0;
  }
  function o(s) {
    if (!s)
      throw new Error("Assertion error");
  }
  const i = class ct {
    /*-- Constructor (low level) and fields --*/
    // Creates a new QR Code segment with the given attributes and data.
    // The character count (numChars) must agree with the mode and the bit buffer length,
    // but the constraint isn't checked. The given bit buffer is cloned and stored.
    constructor(l, c, u) {
      if (this.mode = l, this.numChars = c, this.bitData = u, c < 0)
        throw new RangeError("Invalid argument");
      this.bitData = u.slice();
    }
    /*-- Static factory functions (mid level) --*/
    // Returns a segment representing the given binary data encoded in
    // byte mode. All input byte arrays are acceptable. Any text string
    // can be converted to UTF-8 bytes and encoded as a byte mode segment.
    static makeBytes(l) {
      let c = [];
      for (const u of l)
        r(u, 8, c);
      return new ct(ct.Mode.BYTE, l.length, c);
    }
    // Returns a segment representing the given string of decimal digits encoded in numeric mode.
    static makeNumeric(l) {
      if (!ct.isNumeric(l))
        throw new RangeError("String contains non-numeric characters");
      let c = [];
      for (let u = 0; u < l.length; ) {
        const d = Math.min(l.length - u, 3);
        r(parseInt(l.substring(u, u + d), 10), d * 3 + 1, c), u += d;
      }
      return new ct(ct.Mode.NUMERIC, l.length, c);
    }
    // Returns a segment representing the given text string encoded in alphanumeric mode.
    // The characters allowed are: 0 to 9, A to Z (uppercase only), space,
    // dollar, percent, asterisk, plus, hyphen, period, slash, colon.
    static makeAlphanumeric(l) {
      if (!ct.isAlphanumeric(l))
        throw new RangeError("String contains unencodable characters in alphanumeric mode");
      let c = [], u;
      for (u = 0; u + 2 <= l.length; u += 2) {
        let d = ct.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u)) * 45;
        d += ct.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u + 1)), r(d, 11, c);
      }
      return u < l.length && r(ct.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u)), 6, c), new ct(ct.Mode.ALPHANUMERIC, l.length, c);
    }
    // Returns a new mutable list of zero or more segments to represent the given Unicode text string.
    // The result may use various segment modes and switch modes to optimize the length of the bit stream.
    static makeSegments(l) {
      return l == "" ? [] : ct.isNumeric(l) ? [ct.makeNumeric(l)] : ct.isAlphanumeric(l) ? [ct.makeAlphanumeric(l)] : [ct.makeBytes(ct.toUtf8ByteArray(l))];
    }
    // Returns a segment representing an Extended Channel Interpretation
    // (ECI) designator with the given assignment value.
    static makeEci(l) {
      let c = [];
      if (l < 0)
        throw new RangeError("ECI assignment value out of range");
      if (l < 128)
        r(l, 8, c);
      else if (l < 16384)
        r(2, 2, c), r(l, 14, c);
      else if (l < 1e6)
        r(6, 3, c), r(l, 21, c);
      else
        throw new RangeError("ECI assignment value out of range");
      return new ct(ct.Mode.ECI, 0, c);
    }
    // Tests whether the given string can be encoded as a segment in numeric mode.
    // A string is encodable iff each character is in the range 0 to 9.
    static isNumeric(l) {
      return ct.NUMERIC_REGEX.test(l);
    }
    // Tests whether the given string can be encoded as a segment in alphanumeric mode.
    // A string is encodable iff each character is in the following set: 0 to 9, A to Z
    // (uppercase only), space, dollar, percent, asterisk, plus, hyphen, period, slash, colon.
    static isAlphanumeric(l) {
      return ct.ALPHANUMERIC_REGEX.test(l);
    }
    /*-- Methods --*/
    // Returns a new copy of the data bits of this segment.
    getData() {
      return this.bitData.slice();
    }
    // (Package-private) Calculates and returns the number of bits needed to encode the given segments at
    // the given version. The result is infinity if a segment has too many characters to fit its length field.
    static getTotalBits(l, c) {
      let u = 0;
      for (const d of l) {
        const h = d.mode.numCharCountBits(c);
        if (d.numChars >= 1 << h)
          return 1 / 0;
        u += 4 + h + d.bitData.length;
      }
      return u;
    }
    // Returns a new array of bytes representing the given string encoded in UTF-8.
    static toUtf8ByteArray(l) {
      l = encodeURI(l);
      let c = [];
      for (let u = 0; u < l.length; u++)
        l.charAt(u) != "%" ? c.push(l.charCodeAt(u)) : (c.push(parseInt(l.substring(u + 1, u + 3), 16)), u += 2);
      return c;
    }
  };
  i.NUMERIC_REGEX = /^[0-9]*$/, i.ALPHANUMERIC_REGEX = /^[A-Z0-9 $%*+.\/:-]*$/, i.ALPHANUMERIC_CHARSET = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";
  let a = i;
  e.QrSegment = i;
})(fo || (fo = {}));
((e) => {
  ((t) => {
    const r = class {
      // The QR Code can tolerate about 30% erroneous codewords
      /*-- Constructor and fields --*/
      constructor(o, i) {
        this.ordinal = o, this.formatBits = i;
      }
    };
    r.LOW = new r(0, 1), r.MEDIUM = new r(1, 0), r.QUARTILE = new r(2, 3), r.HIGH = new r(3, 2), t.Ecc = r;
  })(e.QrCode || (e.QrCode = {}));
})(fo || (fo = {}));
((e) => {
  ((t) => {
    const r = class {
      /*-- Constructor and fields --*/
      constructor(o, i) {
        this.modeBits = o, this.numBitsCharCount = i;
      }
      /*-- Method --*/
      // (Package-private) Returns the bit width of the character count field for a segment in
      // this mode in a QR Code at the given version number. The result is in the range [0, 16].
      numCharCountBits(o) {
        return this.numBitsCharCount[Math.floor((o + 7) / 17)];
      }
    };
    r.NUMERIC = new r(1, [10, 12, 14]), r.ALPHANUMERIC = new r(2, [9, 11, 13]), r.BYTE = new r(4, [8, 16, 16]), r.KANJI = new r(8, [8, 10, 12]), r.ECI = new r(7, [0, 0, 0]), t.Mode = r;
  })(e.QrSegment || (e.QrSegment = {}));
})(fo || (fo = {}));
var Oo = fo;
/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */
var b5 = {
  L: Oo.QrCode.Ecc.LOW,
  M: Oo.QrCode.Ecc.MEDIUM,
  Q: Oo.QrCode.Ecc.QUARTILE,
  H: Oo.QrCode.Ecc.HIGH
}, jw = 128, kw = "L", Pw = "#FFFFFF", Aw = "#000000", Ow = !1, Iw = 1, w5 = 4, S5 = 0, C5 = 0.1;
function Fw(e, t = 0) {
  const r = [];
  return e.forEach(function(n, o) {
    let i = null;
    n.forEach(function(a, s) {
      if (!a && i !== null) {
        r.push(
          `M${i + t} ${o + t}h${s - i}v1H${i + t}z`
        ), i = null;
        return;
      }
      if (s === n.length - 1) {
        if (!a)
          return;
        i === null ? r.push(`M${s + t},${o + t} h1v1H${s + t}z`) : r.push(
          `M${i + t},${o + t} h${s + 1 - i}v1H${i + t}z`
        );
        return;
      }
      a && i === null && (i = s);
    });
  }), r.join("");
}
function Lw(e, t) {
  return e.slice().map((r, n) => n < t.y || n >= t.y + t.h ? r : r.map((o, i) => i < t.x || i >= t.x + t.w ? o : !1));
}
function E5(e, t, r, n) {
  if (n == null)
    return null;
  const o = e.length + r * 2, i = Math.floor(t * C5), a = o / t, s = (n.width || i) * a, l = (n.height || i) * a, c = n.x == null ? e.length / 2 - s / 2 : n.x * a, u = n.y == null ? e.length / 2 - l / 2 : n.y * a, d = n.opacity == null ? 1 : n.opacity;
  let h = null;
  if (n.excavate) {
    let g = Math.floor(c), v = Math.floor(u), m = Math.ceil(s + c - g), x = Math.ceil(l + u - v);
    h = { x: g, y: v, w: m, h: x };
  }
  const p = n.crossOrigin;
  return { x: c, y: u, h: l, w: s, excavation: h, opacity: d, crossOrigin: p };
}
function _5(e, t) {
  return t != null ? Math.max(Math.floor(t), 0) : e ? w5 : S5;
}
function Bw({
  value: e,
  level: t,
  minVersion: r,
  includeMargin: n,
  marginSize: o,
  imageSettings: i,
  size: a,
  boostLevel: s
}) {
  let l = Me.useMemo(() => {
    const g = (Array.isArray(e) ? e : [e]).reduce((v, m) => (v.push(...Oo.QrSegment.makeSegments(m)), v), []);
    return Oo.QrCode.encodeSegments(
      g,
      b5[t],
      r,
      void 0,
      void 0,
      s
    );
  }, [e, t, r, s]);
  const { cells: c, margin: u, numCells: d, calculatedImageSettings: h } = Me.useMemo(() => {
    let p = l.getModules();
    const g = _5(n, o), v = p.length + g * 2, m = E5(
      p,
      a,
      g,
      i
    );
    return {
      cells: p,
      margin: g,
      numCells: v,
      calculatedImageSettings: m
    };
  }, [l, a, i, n, o]);
  return {
    qrcode: l,
    margin: u,
    cells: c,
    numCells: d,
    calculatedImageSettings: h
  };
}
var N5 = function() {
  try {
    new Path2D().addPath(new Path2D());
  } catch {
    return !1;
  }
  return !0;
}(), zw = Me.forwardRef(
  function(t, r) {
    const n = t, {
      value: o,
      size: i = jw,
      level: a = kw,
      bgColor: s = Pw,
      fgColor: l = Aw,
      includeMargin: c = Ow,
      minVersion: u = Iw,
      boostLevel: d,
      marginSize: h,
      imageSettings: p
    } = n, v = Rd(n, [
      "value",
      "size",
      "level",
      "bgColor",
      "fgColor",
      "includeMargin",
      "minVersion",
      "boostLevel",
      "marginSize",
      "imageSettings"
    ]), { style: m } = v, x = Rd(v, ["style"]), y = p?.src, b = Me.useRef(null), w = Me.useRef(null), _ = Me.useCallback(
      (P) => {
        b.current = P, typeof r == "function" ? r(P) : r && (r.current = P);
      },
      [r]
    ), [R, T] = Me.useState(!1), { margin: k, cells: j, numCells: A, calculatedImageSettings: $ } = Bw({
      value: o,
      level: a,
      minVersion: u,
      boostLevel: d,
      includeMargin: c,
      marginSize: h,
      imageSettings: p,
      size: i
    });
    Me.useEffect(() => {
      if (b.current != null) {
        const P = b.current, O = P.getContext("2d");
        if (!O)
          return;
        let I = j;
        const E = w.current, S = $ != null && E !== null && E.complete && E.naturalHeight !== 0 && E.naturalWidth !== 0;
        S && $.excavation != null && (I = Lw(
          j,
          $.excavation
        ));
        const M = window.devicePixelRatio || 1;
        P.height = P.width = i * M;
        const D = i / A * M;
        O.scale(D, D), O.fillStyle = s, O.fillRect(0, 0, A, A), O.fillStyle = l, N5 ? O.fill(new Path2D(Fw(I, k))) : j.forEach(function(N, z) {
          N.forEach(function(Y, H) {
            Y && O.fillRect(H + k, z + k, 1, 1);
          });
        }), $ && (O.globalAlpha = $.opacity), S && O.drawImage(
          E,
          $.x + k,
          $.y + k,
          $.w,
          $.h
        );
      }
    }), Me.useEffect(() => {
      T(!1);
    }, [y]);
    const F = Dd({ height: i, width: i }, m);
    let L = null;
    return y != null && (L = /* @__PURE__ */ Me.createElement(
      "img",
      {
        src: y,
        key: y,
        style: { display: "none" },
        onLoad: () => {
          T(!0);
        },
        ref: w,
        crossOrigin: $?.crossOrigin
      }
    )), /* @__PURE__ */ Me.createElement(Me.Fragment, null, /* @__PURE__ */ Me.createElement(
      "canvas",
      Dd({
        style: F,
        height: i,
        width: i,
        ref: _,
        role: "img"
      }, x)
    ), L);
  }
);
zw.displayName = "QRCodeCanvas";
var D5 = Me.forwardRef(
  function(t, r) {
    const n = t, {
      value: o,
      size: i = jw,
      level: a = kw,
      bgColor: s = Pw,
      fgColor: l = Aw,
      includeMargin: c = Ow,
      minVersion: u = Iw,
      boostLevel: d,
      title: h,
      marginSize: p,
      imageSettings: g
    } = n, v = Rd(n, [
      "value",
      "size",
      "level",
      "bgColor",
      "fgColor",
      "includeMargin",
      "minVersion",
      "boostLevel",
      "title",
      "marginSize",
      "imageSettings"
    ]), { margin: m, cells: x, numCells: y, calculatedImageSettings: b } = Bw({
      value: o,
      level: a,
      minVersion: u,
      boostLevel: d,
      includeMargin: c,
      marginSize: p,
      imageSettings: g,
      size: i
    });
    let w = x, _ = null;
    g != null && b != null && (b.excavation != null && (w = Lw(
      x,
      b.excavation
    )), _ = /* @__PURE__ */ Me.createElement(
      "image",
      {
        href: g.src,
        height: b.h,
        width: b.w,
        x: b.x + m,
        y: b.y + m,
        preserveAspectRatio: "none",
        opacity: b.opacity,
        crossOrigin: b.crossOrigin
      }
    ));
    const R = Fw(w, m);
    return /* @__PURE__ */ Me.createElement(
      "svg",
      Dd({
        height: i,
        width: i,
        viewBox: `0 0 ${y} ${y}`,
        ref: r,
        role: "img"
      }, v),
      !!h && /* @__PURE__ */ Me.createElement("title", null, h),
      /* @__PURE__ */ Me.createElement(
        "path",
        {
          fill: s,
          d: `M0,0 h${y}v${y}H0z`,
          shapeRendering: "crispEdges"
        }
      ),
      /* @__PURE__ */ Me.createElement("path", { fill: l, d: R, shapeRendering: "crispEdges" }),
      _
    );
  }
);
D5.displayName = "QRCodeSVG";
const R5 = ({ url: e }) => /* @__PURE__ */ f.jsxs("div", { className: "h-full w-full", children: [
  /* @__PURE__ */ f.jsx("p", { className: "text-sm mb-2", children: "Scan to preview:" }),
  /* @__PURE__ */ f.jsx(zw, { value: e, size: 180, className: "border" })
] }), M5 = ({ shareUrl: e, onBack: t, onCopy: r }) => /* @__PURE__ */ f.jsx(f.Fragment, { children: /* @__PURE__ */ f.jsxs("div", { className: "space-y-4", children: [
  /* @__PURE__ */ f.jsxs("div", { className: "flex items-center justify-between", children: [
    /* @__PURE__ */ f.jsx("h3", { className: "text-sm font-medium text-muted-foreground", children: "Share Link Generated" }),
    /* @__PURE__ */ f.jsxs(Fe, { variant: "ghost", size: "sm", onClick: t, className: "h-8 px-2", children: [
      /* @__PURE__ */ f.jsx(xC, { className: "h-4 w-4 mr-1" }),
      "Back"
    ] })
  ] }),
  /* @__PURE__ */ f.jsx("div", { className: "space-y-3", children: /* @__PURE__ */ f.jsx("div", { className: "relative", children: /* @__PURE__ */ f.jsxs("div", { className: "flex items-center gap-2 p-3 bg-muted rounded-lg border", children: [
    /* @__PURE__ */ f.jsx(Sg, { className: "h-4 w-4 text-muted-foreground flex-shrink-0" }),
    /* @__PURE__ */ f.jsx("span", { className: "text-sm break-all flex-1", children: e }),
    /* @__PURE__ */ f.jsx(Fe, { variant: "ghost", size: "sm", onClick: r, className: "h-8 w-8 p-0 flex-shrink-0", children: /* @__PURE__ */ f.jsx($C, { className: "h-4 w-4" }) })
  ] }) }) }),
  /* @__PURE__ */ f.jsxs("div", { className: "grid grid-cols-2 gap-4", children: [
    /* @__PURE__ */ f.jsx("div", { className: "h-full", children: /* @__PURE__ */ f.jsx(R5, { url: e }) }),
    /* @__PURE__ */ f.jsx("div", { className: "h-full", children: /* @__PURE__ */ f.jsx(x5, { url: e.replace("/view/", "/embed/") }) })
  ] })
] }) }), T5 = ({ trigger: e, projectId: t }) => {
  const [r, n] = Ce(!1), [o, i] = Ce(""), [a, s] = Ce(!1), l = async () => {
    try {
      await navigator.clipboard.writeText(o);
    } catch (h) {
      console.error("Failed to copy to clipboard:", h);
    }
  }, c = () => {
    s(!1), i("");
  }, u = (h) => {
    i(h), s(!0);
  }, d = /* @__PURE__ */ f.jsx(Fe, { variant: "outline", size: "sm", className: "h-8 px-3 shadow-none", children: /* @__PURE__ */ f.jsx(op, { className: "h-4 w-4" }) });
  return /* @__PURE__ */ f.jsxs(gm, { open: r, onOpenChange: n, children: [
    /* @__PURE__ */ f.jsxs(Yo, { children: [
      /* @__PURE__ */ f.jsx(qo, { asChild: !0, children: /* @__PURE__ */ f.jsx(mm, { asChild: !0, children: e || d }) }),
      /* @__PURE__ */ f.jsx(Xo, { children: "Share Project" })
    ] }),
    /* @__PURE__ */ f.jsxs(xm, { children: [
      /* @__PURE__ */ f.jsxs(ym, { className: "flex items-center gap-2 text-xl", children: [
        /* @__PURE__ */ f.jsx(op, { className: "h-5 w-5" }),
        "Share Settings"
      ] }),
      /* @__PURE__ */ f.jsx("div", { className: "overflow-y-auto", children: /* @__PURE__ */ f.jsx(Jn, { className: "border-0 shadow-lg", children: /* @__PURE__ */ f.jsx(Uo, { className: "space-y-6 p-0", children: a ? /* @__PURE__ */ f.jsx(
        M5,
        {
          shareUrl: o,
          onBack: c,
          onCopy: l
        }
      ) : /* @__PURE__ */ f.jsx(
        m5,
        {
          projectId: t,
          onGenerateSuccess: u
        }
      ) }) }) })
    ] })
  ] });
}, j5 = () => {
  const t = ke().json?.id;
  return /* @__PURE__ */ f.jsx(T5, { projectId: t });
}, k5 = () => {
  const { json: e, update: t } = ke(), r = or().getViewsByLocation(At.TitleBar);
  return /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
    /* @__PURE__ */ f.jsxs("div", { className: "flex items-center gap-4", children: [
      /* @__PURE__ */ f.jsxs("a", { href: "/projects", title: "Veltix, Making Data Visualization Lightning Fast", className: "inline-block w-28 group relative", children: [
        /* @__PURE__ */ f.jsx(c5, {}),
        /* @__PURE__ */ f.jsx("span", { className: "absolute top-0 left-0 w-8 h-8 bg-gray-300 opacity-0 group-hover:opacity-100 transition-opacity inline-flex items-center justify-center rounded-xs", children: /* @__PURE__ */ f.jsx(hg, {}) })
      ] }),
      /* @__PURE__ */ f.jsx(l5, {})
    ] }),
    /* @__PURE__ */ f.jsx("div", { className: "flex-1" }),
    /* @__PURE__ */ f.jsxs("div", { className: "flex items-center gap-4", children: [
      /* @__PURE__ */ f.jsx(
        f5,
        {
          value: e?.title || "Untitled",
          onChange: (n) => {
            t({
              title: n
            });
          }
        }
      ),
      /* @__PURE__ */ f.jsx(d5, {}),
      /* @__PURE__ */ f.jsx(j5, {}),
      /* @__PURE__ */ f.jsx(u5, { views: r })
    ] })
  ] });
}, $w = dg(() => {
  const { layout: e } = Bt();
  return /* @__PURE__ */ f.jsxs("div", { className: "veltix-workbench", children: [
    /* @__PURE__ */ f.jsx("header", { className: "flex h-14 items-center justify-between px-4 w-full z-10 bg-gradient-to-r from-blue-500/20 via-purple-500/20 to-pink-500/20", children: /* @__PURE__ */ f.jsx(k5, {}) }),
    /* @__PURE__ */ f.jsxs("div", { className: "flex h-[calc(100vh-48px)]", children: [
      /* @__PURE__ */ f.jsx("div", { className: "w-16 relative h-full flex flex-col items-center py-4 after:absolute after:top-0 after:right-0 after:w-[1px] after:h-full after:bg-accent after:content-['']", children: /* @__PURE__ */ f.jsx(uR, {}) }),
      /* @__PURE__ */ f.jsx("div", { className: Ir("w-80 overflow-y-auto h-full p-2", e.sidebar.visible ? "block" : "hidden"), children: /* @__PURE__ */ f.jsx(s5, {}) }),
      /* @__PURE__ */ f.jsx(a5, {}),
      /* @__PURE__ */ f.jsx("div", { className: "w-[320px] relative after:absolute after:top-0 after:left-0 after:w-[1px] after:h-full after:bg-accent after:content-['']", children: /* @__PURE__ */ f.jsx(sx, {}) })
    ] })
  ] });
});
$w.displayName = "Veltix.Layout";
const Ui = ({ children: e, className: t = "" }) => /* @__PURE__ */ f.jsx("span", { className: `animate-pulse bg-gray-200 h-full w-full rounded ${t}`, children: e ? /* @__PURE__ */ f.jsx("span", { className: "opacity-0", children: e }) : /* @__PURE__ */ f.jsx("span", { className: "opacity-0", children: " " }) });
function P5({ src: e, alt: t, className: r, ...n }) {
  const [o, i] = Ce(!0);
  return /* @__PURE__ */ f.jsxs("div", { className: "relative w-full h-full overflow-hidden bg-muted", children: [
    o && /* @__PURE__ */ f.jsx("div", { className: "absolute inset-0", children: /* @__PURE__ */ f.jsx(Ui, { className: "w-full h-full" }) }),
    /* @__PURE__ */ f.jsx(
      "img",
      {
        src: e,
        alt: t,
        className: Ee(
          r,
          "transition-all duration-300",
          o ? "opacity-0" : "opacity-100"
        ),
        onLoad: () => i(!1),
        ...n
      }
    )
  ] });
}
const A5 = async (e, t = 12) => {
  await new Promise((n) => setTimeout(n, 1e3));
  const r = e * t + 1;
  return Array.from({ length: t }, (n, o) => ({
    id: r + o,
    title: `卡片标题 ${r + o}`,
    image: "/placeholder.svg?height=200&width=300",
    description: `这是第 ${r + o} 张卡片的描述内容`
  }));
};
function O5({ data: e = [], fetchMore: t, itemsPerPage: r = 12 }) {
  const [n, o] = Ce([]), [i, a] = Ce(!1), [s, l] = Ce(!0), [c, u] = Ce(0), d = bt(null), h = bt([]), p = bt(!1), g = bt(!0), v = bt(0);
  ze(() => {
    h.current = n, p.current = i, g.current = s, v.current = c;
  }, [n, i, s, c]);
  const m = nr(async () => {
    if (!(p.current || !g.current)) {
      a(!0);
      try {
        if (e.length > 0 && !t)
          if (h.current.length >= e.length)
            l(!1);
          else {
            const x = v.current * r, y = Math.min(x + r, e.length), b = e.slice(x, y);
            o((w) => [...w, ...b]), u((w) => w + 1), y >= e.length && l(!1);
          }
        else {
          const y = await (t || A5)(v.current, r);
          y.length === 0 ? l(!1) : (o((b) => [...b, ...y]), u((b) => b + 1));
        }
      } catch (x) {
        console.error("加载卡片失败:", x);
      } finally {
        a(!1);
      }
    }
  }, [e, t, r]);
  return ze(() => {
    o([]), u(0), l(!0), a(!1), m();
  }, [e, t, r]), ze(() => {
    const x = new IntersectionObserver(
      (y) => {
        y[0].isIntersecting && g.current && !p.current && m();
      },
      { threshold: 0.1 }
    );
    return d.current && x.observe(d.current), () => x.disconnect();
  }, []), /* @__PURE__ */ f.jsxs("div", { className: "", children: [
    /* @__PURE__ */ f.jsxs("div", { className: "grid grid-cols-1 gap-4", children: [
      n.map((x, y) => /* @__PURE__ */ f.jsxs(Jn, { className: "overflow-hidden hover:shadow transition-shadow duration-300 rounded shadow-none", children: [
        /* @__PURE__ */ f.jsx("div", { className: "aspect-video relative overflow-hidden", children: /* @__PURE__ */ f.jsx(
          P5,
          {
            src: x.imageUrl || x.image || "/placeholder.svg",
            alt: x.alt || x.title,
            className: "w-full h-full object-cover hover:scale-110 transition-all duration-300"
          }
        ) }),
        /* @__PURE__ */ f.jsxs(Uo, { className: "p-2", children: [
          /* @__PURE__ */ f.jsx("h3", { className: "font-semibold text-sm line-clamp-2", children: x.title }),
          x.description && /* @__PURE__ */ f.jsx("p", { className: "text-muted-foreground text-xs mt-2 line-clamp-3", children: x.description })
        ] })
      ] }, y)),
      i && Array.from({ length: 8 }).map((x, y) => /* @__PURE__ */ f.jsxs(Jn, { className: "overflow-hidden", children: [
        /* @__PURE__ */ f.jsx(Ui, { className: "aspect-video w-full" }),
        /* @__PURE__ */ f.jsxs(Uo, { className: "p-4", children: [
          /* @__PURE__ */ f.jsx(Ui, { className: "h-6 w-3/4 mb-2" }),
          /* @__PURE__ */ f.jsx(Ui, { className: "h-4 w-full mb-1" }),
          /* @__PURE__ */ f.jsx(Ui, { className: "h-4 w-2/3" })
        ] })
      ] }, `skeleton-${y}`))
    ] }),
    /* @__PURE__ */ f.jsxs("div", { ref: d, className: "h-10 flex items-center justify-center mt-8", children: [
      i && /* @__PURE__ */ f.jsxs("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ f.jsx("div", { className: "w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin" }),
        /* @__PURE__ */ f.jsx("span", { className: "text-muted-foreground", children: "加载中..." })
      ] }),
      !s && n.length > 0 && /* @__PURE__ */ f.jsx("p", { className: "text-muted-foreground" })
    ] }),
    n.length === 0 && !i && /* @__PURE__ */ f.jsx("div", { className: "text-center py-12", children: /* @__PURE__ */ f.jsx("p", { className: "text-muted-foreground text-lg", children: "暂无数据" }) })
  ] });
}
const I5 = dg(({ context: e }) => {
  console.log(e);
  const t = [
    {
      id: "example1",
      title: "Design example 1",
      imageUrl: "https://placehold.co/320x170/E9ECEF/495057?text=Design%20example%201",
      alt: "Design example 1"
    },
    {
      id: "example2",
      title: "Design example 2",
      imageUrl: "https://placehold.co/320x170/E9ECEF/495057?text=Design%20example%202",
      alt: "Design example 2"
    }
  ];
  return /* @__PURE__ */ f.jsxs("div", { children: [
    /* @__PURE__ */ f.jsx("header", { className: "sticky top-0 bg-background z-10", children: /* @__PURE__ */ f.jsx("h2", { className: "text-xl font-bold mb-4", children: "Design" }) }),
    /* @__PURE__ */ f.jsx("div", { children: /* @__PURE__ */ f.jsx(O5, { data: t }) })
  ] });
});
Tr(
  {
    id: "design",
    title: "Design",
    icon: _g,
    viewContainer: I5,
    order: 0
  },
  At.Sidebar
);
Tr(
  {
    id: "ai",
    title: "AI",
    icon: la,
    hidden: !0,
    viewContainer: () => /* @__PURE__ */ f.jsx("div", { children: /* @__PURE__ */ f.jsxs("div", { className: "flex items-center", children: [
      /* @__PURE__ */ f.jsx(la, {}),
      " AI"
    ] }) })
  },
  At.Sidebar
);
const F5 = [
  { value: "to right", label: "Left to Right" },
  { value: "to left", label: "Right to Left" },
  { value: "to bottom", label: "Top to Bottom" },
  { value: "to top", label: "Bottom to Top" },
  { value: "to bottom right", label: "Top Left to Bottom Right" },
  { value: "to bottom left", label: "Top Right to Bottom Left" },
  { value: "to top right", label: "Bottom Left to Top Right" },
  { value: "to top left", label: "Bottom Right to Top Left" }
], sg = [
  "linear-gradient(to right, #1a2b3c, #0f172a)",
  // Deep blue gradient
  "linear-gradient(to right, #111827, #1f2937)",
  // Deep gray-blue gradient
  "linear-gradient(to right, #0f172a, #312e81)",
  // Blue-purple gradient
  "linear-gradient(to right, #0c0a09, #1c1917)",
  // Dark black gradient
  "linear-gradient(to right, #134e5e, #71b280)",
  // Deep teal gradient
  "linear-gradient(to right, #000428, #004e92)",
  // Deep blue gradient
  "linear-gradient(to bottom, #0f2027, #203a43)",
  // Deep teal-gray gradient
  "linear-gradient(to bottom right, #16222a, #3a6073)",
  // Deep blue-gray gradient
  "radial-gradient(circle, #16222a 0%, #3a6073 100%)",
  // Radial deep blue-gray gradient
  "radial-gradient(circle, #0f2027 0%, #203a43 100%)",
  // Radial deep teal-gray gradient
  "radial-gradient(circle, #000428 0%, #004e92 100%)",
  // Radial deep blue gradient
  "radial-gradient(circle, #134e5e 0%, #71b280 100%)"
  // Radial deep teal gradient
], L5 = [
  "#0F172A",
  // Deep blue
  "#1E293B",
  // Deep blue-gray
  "#111827",
  // Deep gray-blue
  "#1F2937",
  // Deep gray
  "#0C0A09",
  // Deep black
  "#0E7490",
  // Teal
  "#0284C7",
  // Blue
  "#1D4ED8",
  // Indigo
  "#4338CA",
  // Purple
  "#7E22CE",
  // Deep purple
  "#0F766E",
  // Deep teal
  "#0369A1"
  // Deep blue
], B5 = () => {
  const e = ke(), [t, r] = Ce("solid"), [n, o] = Ce("#FFFFFF"), [i, a] = Ce(["#ff9a9e", "#fad0c4"]), [s, l] = Ce("to right"), [c, u] = Ce([0, 100]);
  ze(() => {
    if (e.json?.theme) {
      const v = e.json.theme.backgroundColor || "#FFFFFF";
      if (v.includes("gradient")) {
        if (v.includes("linear-gradient")) {
          r("linear-gradient");
          const m = v.match(/linear-gradient\(([^,]+),/);
          m && m[1] && l(m[1].trim());
          const x = v.match(/#[a-fA-F0-9]{3,6}/g);
          x && x.length >= 2 && a([x[0], x[1]]);
          const y = v.match(/(\d+)%/g);
          y && y.length >= 2 && u([
            parseInt(y[0], 10),
            parseInt(y[1], 10)
          ]);
        } else if (v.includes("radial-gradient")) {
          r("radial-gradient");
          const m = v.match(/#[a-fA-F0-9]{3,6}/g);
          m && m.length >= 2 && a([m[0], m[1]]);
          const x = v.match(/(\d+)%/g);
          x && x.length >= 2 && u([
            parseInt(x[0], 10),
            parseInt(x[1], 10)
          ]);
        }
      } else
        r("solid"), o(v);
    }
  }, [e.json?.theme]);
  const d = () => t === "solid" ? n : t === "linear-gradient" ? `linear-gradient(${s}, ${i[0]} ${c[0]}%, ${i[1]} ${c[1]}%)` : t === "radial-gradient" ? `radial-gradient(circle, ${i[0]} ${c[0]}%, ${i[1]} ${c[1]}%)` : n, h = () => {
    if (e.json) {
      const v = d();
      e.update({
        theme: {
          ...e.json.theme,
          backgroundColor: v
        }
      });
    }
  }, p = (v) => {
    r("solid"), o(v), e.json && e.update({
      theme: {
        ...e.json.theme,
        backgroundColor: v
      }
    });
  }, g = (v) => {
    if (v.includes("linear-gradient") ? r("linear-gradient") : v.includes("radial-gradient") && r("radial-gradient"), v.includes("linear-gradient")) {
      const x = v.match(/linear-gradient\(([^,]+),/);
      x && x[1] && l(x[1].trim());
    }
    const m = v.match(/#[a-fA-F0-9]{3,6}/g);
    m && m.length >= 2 && a([m[0], m[1]]), e.json && e.update({
      theme: {
        ...e.json.theme,
        backgroundColor: v
      }
    });
  };
  return /* @__PURE__ */ f.jsxs("div", { className: "space-y-6", children: [
    /* @__PURE__ */ f.jsx("h2", { className: "text-xl font-bold", children: "Background" }),
    /* @__PURE__ */ f.jsxs(m0, { defaultValue: t, onValueChange: (v) => r(v), children: [
      /* @__PURE__ */ f.jsxs(cf, { className: "grid w-full grid-cols-3", children: [
        /* @__PURE__ */ f.jsx(Hi, { value: "solid", children: "Solid " }),
        /* @__PURE__ */ f.jsx(Hi, { value: "linear-gradient", children: "Linear " }),
        /* @__PURE__ */ f.jsx(Hi, { value: "radial-gradient", children: "Radial " })
      ] }),
      /* @__PURE__ */ f.jsxs(Wi, { value: "solid", className: "space-y-4 mt-4", children: [
        /* @__PURE__ */ f.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ f.jsx(Te, { children: "Preset Colors" }),
          /* @__PURE__ */ f.jsx("div", { className: "grid grid-cols-6 gap-2", children: L5.map((v, m) => /* @__PURE__ */ f.jsx(
            "div",
            {
              className: "w-8 h-8 rounded-md cursor-pointer border border-gray-300 flex items-center justify-center",
              style: { backgroundColor: v },
              onClick: () => p(v),
              children: t === "solid" && n === v && /* @__PURE__ */ f.jsx("div", { className: "w-2 h-2 rounded-full bg-primary" })
            },
            m
          )) })
        ] }),
        /* @__PURE__ */ f.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ f.jsx(Te, { children: "Custom Color" }),
          /* @__PURE__ */ f.jsxs("div", { className: "flex space-x-2", children: [
            /* @__PURE__ */ f.jsx(
              We,
              {
                type: "color",
                value: n,
                onChange: (v) => o(v.target.value),
                className: "w-12 h-10 p-1"
              }
            ),
            /* @__PURE__ */ f.jsx(
              We,
              {
                type: "text",
                value: n,
                onChange: (v) => o(v.target.value),
                className: "flex-1"
              }
            ),
            /* @__PURE__ */ f.jsx(Fe, { onClick: () => p(n), children: "Apply" })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ f.jsxs(Wi, { value: "linear-gradient", className: "space-y-4 mt-4", children: [
        /* @__PURE__ */ f.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ f.jsx(Te, { children: "Preset Gradients" }),
          /* @__PURE__ */ f.jsx("div", { className: "grid grid-cols-3 gap-2", children: sg.filter((v) => v.includes("linear-gradient")).map((v, m) => /* @__PURE__ */ f.jsx(
            "div",
            {
              className: "h-12 rounded-md cursor-pointer border border-gray-300",
              style: { background: v },
              onClick: () => g(v)
            },
            m
          )) })
        ] }),
        /* @__PURE__ */ f.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ f.jsx(Te, { children: "Gradient Direction" }),
          /* @__PURE__ */ f.jsxs(Ur, { value: s, onValueChange: l, children: [
            /* @__PURE__ */ f.jsx(_r, { children: /* @__PURE__ */ f.jsx(Mn, { placeholder: "Select gradient direction" }) }),
            /* @__PURE__ */ f.jsx(Nr, { children: F5.map((v) => /* @__PURE__ */ f.jsx(vt, { value: v.value, children: v.label }, v.value)) })
          ] })
        ] }),
        /* @__PURE__ */ f.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ f.jsx(Te, { children: "Gradient Colors" }),
          /* @__PURE__ */ f.jsxs("div", { className: "flex space-x-2", children: [
            /* @__PURE__ */ f.jsx(
              We,
              {
                type: "color",
                value: i[0],
                onChange: (v) => a([v.target.value, i[1]]),
                className: "w-12 h-10 p-1"
              }
            ),
            /* @__PURE__ */ f.jsx(
              We,
              {
                type: "color",
                value: i[1],
                onChange: (v) => a([i[0], v.target.value]),
                className: "w-12 h-10 p-1"
              }
            )
          ] })
        ] }),
        /* @__PURE__ */ f.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ f.jsxs(Te, { children: [
            "Gradient Position (",
            c[0],
            "% - ",
            c[1],
            "%)"
          ] }),
          /* @__PURE__ */ f.jsx(
            wn,
            {
              value: c,
              min: 0,
              max: 100,
              step: 1,
              onValueChange: u,
              className: "my-4"
            }
          )
        ] }),
        /* @__PURE__ */ f.jsx(Fe, { onClick: h, children: "Apply Gradient" })
      ] }),
      /* @__PURE__ */ f.jsxs(Wi, { value: "radial-gradient", className: "space-y-4 mt-4", children: [
        /* @__PURE__ */ f.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ f.jsx(Te, { children: "Preset Gradients" }),
          /* @__PURE__ */ f.jsx("div", { className: "grid grid-cols-3 gap-2", children: sg.filter((v) => v.includes("radial-gradient")).map((v, m) => /* @__PURE__ */ f.jsx(
            "div",
            {
              className: "h-12 rounded-md cursor-pointer border border-gray-300",
              style: { background: v },
              onClick: () => g(v)
            },
            m
          )) })
        ] }),
        /* @__PURE__ */ f.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ f.jsx(Te, { children: "Gradient Colors" }),
          /* @__PURE__ */ f.jsxs("div", { className: "flex space-x-2", children: [
            /* @__PURE__ */ f.jsx(
              We,
              {
                type: "color",
                value: i[0],
                onChange: (v) => a([v.target.value, i[1]]),
                className: "w-12 h-10 p-1"
              }
            ),
            /* @__PURE__ */ f.jsx(
              We,
              {
                type: "color",
                value: i[1],
                onChange: (v) => a([i[0], v.target.value]),
                className: "w-12 h-10 p-1"
              }
            )
          ] })
        ] }),
        /* @__PURE__ */ f.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ f.jsxs(Te, { children: [
            "Gradient Position (",
            c[0],
            "% - ",
            c[1],
            "%)"
          ] }),
          /* @__PURE__ */ f.jsx(
            wn,
            {
              value: c,
              min: 0,
              max: 100,
              step: 1,
              onValueChange: u,
              className: "my-4"
            }
          )
        ] }),
        /* @__PURE__ */ f.jsx(Fe, { onClick: h, children: "Apply Gradient" })
      ] })
    ] })
  ] });
};
Tr(
  {
    id: "background",
    title: "Background",
    icon: wE,
    viewContainer: () => /* @__PURE__ */ f.jsx(B5, {}),
    order: 120
  },
  At.Sidebar
);
const z5 = ({ layerId: e, duplicateLayer: t, deleteLayer: r }) => /* @__PURE__ */ f.jsxs(wc, { children: [
  /* @__PURE__ */ f.jsx(Th, { asChild: !0, children: /* @__PURE__ */ f.jsx(Fe, { variant: "ghost", size: "sm", className: "h-6 w-6 p-0", onClick: (n) => n.stopPropagation(), children: /* @__PURE__ */ f.jsx(WC, { className: "h-3 w-3" }) }) }),
  /* @__PURE__ */ f.jsxs(Ja, { align: "end", children: [
    /* @__PURE__ */ f.jsx(tr, { onClick: () => t(e), children: "Duplicate" }),
    /* @__PURE__ */ f.jsxs(tr, { onClick: () => r(e), className: "text-destructive", children: [
      /* @__PURE__ */ f.jsx(Dl, { className: "mr-2 h-4 w-4" }),
      "Delete"
    ] })
  ] })
] }), $5 = () => {
  const t = ke().json?.docs?.[0]?.id, r = cC(t || ""), n = ke((j) => j.reorderNode), o = ke((j) => j.updateNode), i = ke((j) => j.cloneNode), a = ke((j) => j.removeNode), s = (j) => {
    if (!t) return;
    const A = (L) => {
      for (const P of L) {
        if (P.id === j)
          return P;
        if (P.children && P.children.length > 0) {
          const O = A(P.children);
          if (O) return O;
        }
      }
      return null;
    }, $ = A(r);
    if (!$) return;
    const F = $.position.visible ?? !0;
    o(t, j, {
      position: {
        ...$.position,
        visible: !F
      }
    });
  }, [l, c] = Me.useState(""), [u, d] = Me.useState("all"), h = Me.useMemo(() => {
    const j = /* @__PURE__ */ new Set(), A = ($) => {
      $.forEach((F) => {
        j.add(F.type), F.children && A(F.children);
      });
    };
    return A(r), Array.from(j);
  }, [r]), p = (j) => {
    t && i(t, j);
  }, g = (j) => {
    t && a(t, j);
  }, v = (j, A, $) => {
    j.dataTransfer.setData("text/plain", JSON.stringify([...$, A])), j.currentTarget.classList.add("opacity-50");
  }, m = (j) => {
    j.currentTarget.classList.remove("opacity-50");
  }, x = (j) => {
    j.preventDefault(), j.currentTarget.classList.add("bg-gray-100");
  }, y = (j) => {
    j.currentTarget.classList.remove("bg-gray-100");
  }, b = (j, A) => j.length === A.length && j.every(($, F) => $ === A[F]), w = (j, A, $) => {
    j.preventDefault();
    const F = JSON.parse(j.dataTransfer.getData("text/plain"));
    if (j.currentTarget.classList.remove("bg-gray-100"), t !== void 0 && b(F.slice(0, -1), $)) {
      const L = F[F.length - 1];
      n(t, L, A, $);
    }
  }, _ = (j, A, $) => j.map((F) => {
    const L = F.children ? _(F.children, A, $) : [], P = A ? (F.title || F.type).toLowerCase().includes(A.toLowerCase()) : !0, O = $ === "all" ? !0 : F.type === $;
    return P && O || L.length > 0 ? { ...F, children: L } : null;
  }).filter(Boolean), R = ({ comp: j, path: A, index: $ }) => {
    [...A];
    const F = A.length * 8;
    return /* @__PURE__ */ f.jsxs("div", { style: { marginLeft: F }, children: [
      /* @__PURE__ */ f.jsxs(
        "div",
        {
          draggable: !0,
          onDragStart: (L) => v(L, $, A),
          onDragEnd: m,
          onDragOver: x,
          onDragLeave: y,
          onDrop: (L) => w(L, $, A),
          className: "flex items-center gap-2 p-1.5 rounded-md hover:bg-sidebar-accent/50 cursor-move group",
          children: [
            /* @__PURE__ */ f.jsx(yg, { className: "h-4 w-4 text-muted-foreground cursor-grab" }),
            /* @__PURE__ */ f.jsx("div", { className: "flex items-center justify-center w-8 h-8 rounded bg-muted", children: j.icon || /* @__PURE__ */ f.jsx(wg, { className: "h-4 w-4" }) }),
            /* @__PURE__ */ f.jsxs("div", { className: "flex-1 min-w-0", children: [
              /* @__PURE__ */ f.jsxs("div", { className: "flex items-center gap-2", children: [
                /* @__PURE__ */ f.jsx("span", { className: "text-xs font-medium truncate", children: j.title || j.type }),
                j.position.locked && /* @__PURE__ */ f.jsx("div", { className: "w-1 h-1 rounded-full bg-orange-500" })
              ] }),
              /* @__PURE__ */ f.jsx("div", { className: "text-xs text-muted-foreground" })
            ] }),
            /* @__PURE__ */ f.jsxs("div", { className: "flex items-center gap-1", children: [
              /* @__PURE__ */ f.jsx(
                Fe,
                {
                  variant: "ghost",
                  size: "sm",
                  className: "h-6 w-6 p-0",
                  onClick: (L) => {
                    L.stopPropagation(), s(j.id);
                  },
                  children: j.position.visible ?? !0 ? /* @__PURE__ */ f.jsx(Od, { className: "h-3 w-3" }) : /* @__PURE__ */ f.jsx(qC, { className: "h-3 w-3 text-muted-foreground" })
                }
              ),
              /* @__PURE__ */ f.jsx(z5, { layerId: j.id, duplicateLayer: p, deleteLayer: g })
            ] })
          ]
        }
      ),
      j.children && j.children.length > 0 && /* @__PURE__ */ f.jsx("div", { className: "space-y-1", children: j.children.map((L, P) => /* @__PURE__ */ f.jsx(R, { comp: L, path: [...A, $], index: P }, L.id)) })
    ] });
  };
  if (!t) return /* @__PURE__ */ f.jsx("div", { children: "No page" });
  const T = Gw(r), k = _(r, l, u);
  return /* @__PURE__ */ f.jsxs("div", { children: [
    /* @__PURE__ */ f.jsxs("div", { className: "mb-3 flex items-center justify-between", children: [
      /* @__PURE__ */ f.jsx("h2", { className: "text-xl font-bold", children: "Layers" }),
      /* @__PURE__ */ f.jsx(pa, { variant: "secondary", children: T })
    ] }),
    /* @__PURE__ */ f.jsxs("div", { className: "flex justify-between gap-2", children: [
      /* @__PURE__ */ f.jsx(We, { value: l, onChange: (j) => c(j.target.value), placeholder: "Search layers..." }),
      /* @__PURE__ */ f.jsx("div", { className: "w-20", children: /* @__PURE__ */ f.jsxs(Ur, { value: u, onValueChange: d, children: [
        /* @__PURE__ */ f.jsx(_r, { className: "mb-3 text-xs", children: /* @__PURE__ */ f.jsx(Mn, { placeholder: "Filter by type" }) }),
        /* @__PURE__ */ f.jsxs(Nr, { children: [
          /* @__PURE__ */ f.jsx(vt, { value: "all", children: "All" }),
          h.map((j) => /* @__PURE__ */ f.jsx(vt, { value: j, children: j }, j))
        ] })
      ] }) })
    ] }),
    /* @__PURE__ */ f.jsx("div", { children: k.map((j, A) => /* @__PURE__ */ f.jsx(R, { comp: j, path: [], index: A }, j.id)) })
  ] });
}, Gw = (e) => e.reduce((t, r) => {
  let n = 1;
  return r.children && r.children.length > 0 && (n += Gw(r.children)), t + n;
}, 0);
Tr(
  {
    id: "layers",
    title: "Layers",
    icon: wg,
    viewContainer: () => /* @__PURE__ */ f.jsx($5, {}),
    order: 3
  },
  At.Sidebar
);
const G5 = [
  {
    id: "1",
    title: "Mountain Landscape",
    alt: "Mountain landscape with starry sky",
    width: 800,
    height: 300,
    bgColor: "4A90E2",
    textColor: "FFFFFF",
    tags: ["nature", "landscape", "mountains"],
    type: "image"
  },
  {
    id: "2",
    title: "Abstract Pattern",
    alt: "Abstract geometric pattern",
    width: 300,
    height: 300,
    bgColor: "FF6B35",
    textColor: "FFFFFF",
    tags: ["abstract", "geometric", "orange"],
    type: "pattern"
  },
  {
    id: "3",
    title: "Minimal Design",
    alt: "Minimalist design element",
    width: 250,
    height: 250,
    bgColor: "F8F9FA",
    textColor: "6C757D",
    tags: ["minimal", "design", "clean"],
    type: "pattern"
  },
  {
    id: "4",
    title: "Grid Pattern",
    alt: "3x3 grid pattern",
    width: 320,
    height: 320,
    bgColor: "E9ECEF",
    textColor: "495057",
    tags: ["grid", "pattern", "geometric"],
    type: "pattern"
  },
  {
    id: "5",
    title: "Gaming Setup",
    alt: "Gaming setup with RGB lighting",
    width: 600,
    height: 300,
    bgColor: "6F42C1",
    textColor: "FFFFFF",
    tags: ["gaming", "rgb", "setup"],
    type: "image"
  },
  {
    id: "6",
    title: "Pexels Logo",
    alt: "Pexels stock photo logo",
    width: 280,
    height: 280,
    bgColor: "F8F9FA",
    textColor: "000000",
    tags: ["logo", "stock", "photos"],
    type: "logo"
  },
  {
    id: "7",
    title: "Data Chart",
    alt: "Analytics data visualization",
    width: 350,
    height: 250,
    bgColor: "F8F9FA",
    textColor: "495057",
    tags: ["chart", "data", "analytics"],
    type: "chart"
  },
  {
    id: "8",
    title: "Pixel Art",
    alt: "Pixel art pattern",
    width: 300,
    height: 300,
    bgColor: "E9ECEF",
    textColor: "495057",
    tags: ["pixel", "art", "retro"],
    type: "pattern"
  },
  {
    id: "9",
    title: "City Skyline",
    alt: "Urban city skyline at night",
    width: 900,
    height: 300,
    bgColor: "2C3E50",
    textColor: "FFFFFF",
    tags: ["city", "urban", "night"],
    type: "image"
  },
  {
    id: "10",
    title: "Abstract Waves",
    alt: "Abstract wave pattern",
    width: 320,
    height: 200,
    bgColor: "00D4AA",
    textColor: "FFFFFF",
    tags: ["abstract", "waves", "teal"],
    type: "pattern"
  },
  {
    id: "11",
    title: "Tech Interface",
    alt: "Modern technology interface",
    width: 400,
    height: 250,
    bgColor: "1A1A1A",
    textColor: "00FF88",
    tags: ["tech", "interface", "modern"],
    type: "image"
  },
  {
    id: "12",
    title: "Geometric Shapes",
    alt: "Colorful geometric shapes",
    width: 280,
    height: 280,
    bgColor: "FFD93D",
    textColor: "000000",
    tags: ["geometric", "shapes", "yellow"],
    type: "pattern"
  },
  {
    id: "13",
    title: "Wide Banner",
    alt: "Wide promotional banner",
    width: 1200,
    height: 300,
    bgColor: "E74C3C",
    textColor: "FFFFFF",
    tags: ["banner", "promo", "wide"],
    type: "image"
  },
  {
    id: "14",
    title: "Tall Portrait",
    alt: "Tall portrait photo",
    width: 300,
    height: 600,
    bgColor: "9B59B6",
    textColor: "FFFFFF",
    tags: ["portrait", "tall", "person"],
    type: "image"
  },
  {
    id: "15",
    title: "Square Icon",
    alt: "Square application icon",
    width: 200,
    height: 200,
    bgColor: "3498DB",
    textColor: "FFFFFF",
    tags: ["icon", "square", "app"],
    type: "logo"
  },
  {
    id: "16",
    title: "Ultra Wide",
    alt: "Ultra wide panoramic view",
    width: 1600,
    height: 400,
    bgColor: "27AE60",
    textColor: "FFFFFF",
    tags: ["panorama", "wide", "nature"],
    type: "image"
  }
];
function V5({ searchQuery: e }) {
  const t = G5.filter(
    (n) => n.title.toLowerCase().includes(e.toLowerCase()) || n.tags.some((o) => o.toLowerCase().includes(e.toLowerCase()))
  ), r = (n) => {
    const o = `${n.width}x${n.height}`, i = `${n.bgColor}/${n.textColor}`, a = encodeURIComponent(n.title);
    return `https://placehold.co/${o}/${i}?text=${a}`;
  };
  return /* @__PURE__ */ f.jsxs("div", { className: "py-2", children: [
    /* @__PURE__ */ f.jsx("div", { className: "columns-2 gap-3 space-y-3", children: t.map((n) => {
      const o = n.width / n.height, i = o >= 1.5, a = o <= 0.7;
      return /* @__PURE__ */ f.jsxs(
        "div",
        {
          className: `relative rounded-lg overflow-hidden group cursor-pointer hover:shadow-lg transition-shadow break-inside-avoid ${i || a ? "aspect-[16/9]" : "aspect-square"}`,
          children: [
            /* @__PURE__ */ f.jsx(
              "img",
              {
                src: r(n),
                alt: n.alt,
                width: n.width,
                height: n.height,
                className: "w-full h-full object-cover"
              }
            ),
            /* @__PURE__ */ f.jsx("div", { className: "absolute inset-0 bg-black/20 group-hover:bg-opacity-20 transition-all duration-200" }),
            /* @__PURE__ */ f.jsxs("div", { className: "absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200", children: [
              /* @__PURE__ */ f.jsx("div", { className: "text-white text-xs font-medium truncate", children: n.title }),
              /* @__PURE__ */ f.jsx("div", { className: "text-white/80 text-xs truncate", children: n.tags.slice(0, 2).join(", ") })
            ] })
          ]
        },
        n.id
      );
    }) }),
    t.length === 0 && /* @__PURE__ */ f.jsxs("div", { className: "text-center py-8 text-gray-500", children: [
      /* @__PURE__ */ f.jsx("div", { className: "text-lg font-medium mb-2", children: "No images found" }),
      /* @__PURE__ */ f.jsx("p", { className: "text-sm", children: "Try adjusting your search terms" })
    ] })
  ] });
}
const U5 = [
  {
    id: "1",
    title: "Getting Started Tutorial",
    description: "Learn the basics of our platform",
    duration: "5:32",
    thumbnail: "https://placehold.co/400x225/4A90E2/FFFFFF?text=Tutorial",
    tags: ["tutorial", "beginner", "guide"],
    type: "tutorial"
  },
  {
    id: "2",
    title: "Advanced Features Demo",
    description: "Explore advanced functionality",
    duration: "12:45",
    thumbnail: "https://placehold.co/400x225/FF6B35/FFFFFF?text=Demo",
    tags: ["demo", "advanced", "features"],
    type: "demo"
  },
  {
    id: "3",
    title: "Product Presentation",
    description: "Overview of our latest features",
    duration: "8:20",
    thumbnail: "https://placehold.co/400x225/6F42C1/FFFFFF?text=Presentation",
    tags: ["presentation", "product", "overview"],
    type: "presentation"
  },
  {
    id: "4",
    title: "Screen Recording",
    description: "User interaction recording",
    duration: "3:15",
    thumbnail: "https://placehold.co/400x225/27AE60/FFFFFF?text=Recording",
    tags: ["recording", "screen", "interaction"],
    type: "recording"
  },
  {
    id: "5",
    title: "Workflow Optimization",
    description: "Tips for better productivity",
    duration: "15:30",
    thumbnail: "https://placehold.co/400x225/E74C3C/FFFFFF?text=Workflow",
    tags: ["workflow", "productivity", "tips"],
    type: "tutorial"
  },
  {
    id: "6",
    title: "API Integration Guide",
    description: "Connect your applications",
    duration: "22:10",
    thumbnail: "https://placehold.co/400x225/9B59B6/FFFFFF?text=API",
    tags: ["api", "integration", "development"],
    type: "tutorial"
  }
];
function H5({ searchQuery: e }) {
  const t = U5.filter(
    (r) => r.title.toLowerCase().includes(e.toLowerCase()) || r.description.toLowerCase().includes(e.toLowerCase()) || r.tags.some((n) => n.toLowerCase().includes(e.toLowerCase()))
  );
  return /* @__PURE__ */ f.jsx("div", { className: "py-2", children: t.length > 0 ? /* @__PURE__ */ f.jsx("div", { className: "space-y-4", children: t.map((r) => /* @__PURE__ */ f.jsxs(
    "div",
    {
      className: "flex items-center space-x-4 p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",
      children: [
        /* @__PURE__ */ f.jsxs("div", { className: "relative flex-shrink-0", children: [
          /* @__PURE__ */ f.jsx(
            "img",
            {
              src: r.thumbnail,
              alt: r.title,
              className: "w-24 h-16 object-cover rounded-lg"
            }
          ),
          /* @__PURE__ */ f.jsx("div", { className: "absolute inset-0 flex items-center justify-center", children: /* @__PURE__ */ f.jsx(Zn, { className: "w-6 h-6 text-white drop-shadow-lg" }) })
        ] }),
        /* @__PURE__ */ f.jsxs("div", { className: "flex-1 min-w-0", children: [
          /* @__PURE__ */ f.jsx("h3", { className: "text-sm font-medium text-gray-900 truncate", children: r.title }),
          /* @__PURE__ */ f.jsx("p", { className: "text-xs text-gray-500 truncate mt-1", children: r.description }),
          /* @__PURE__ */ f.jsxs("div", { className: "flex items-center space-x-2 mt-2", children: [
            /* @__PURE__ */ f.jsxs("div", { className: "flex items-center text-xs text-gray-400", children: [
              /* @__PURE__ */ f.jsx(Ad, { className: "w-3 h-3 mr-1" }),
              r.duration
            ] }),
            /* @__PURE__ */ f.jsxs("div", { className: "flex items-center text-xs text-gray-400", children: [
              /* @__PURE__ */ f.jsx(mg, { className: "w-3 h-3 mr-1" }),
              r.type
            ] })
          ] })
        ] }),
        /* @__PURE__ */ f.jsx("div", { className: "flex-shrink-0", children: /* @__PURE__ */ f.jsx("div", { className: "text-xs text-gray-400", children: r.tags.slice(0, 2).join(", ") }) })
      ]
    },
    r.id
  )) }) : /* @__PURE__ */ f.jsxs("div", { className: "text-center py-12 text-gray-500", children: [
    /* @__PURE__ */ f.jsx("div", { className: "text-lg font-medium mb-2", children: "No videos found" }),
    /* @__PURE__ */ f.jsx("p", { className: "text-sm", children: "Try adjusting your search terms" })
  ] }) });
}
const W5 = [
  {
    id: "1",
    title: "Ambient Background",
    artist: "Sound Library",
    duration: "3:45",
    waveform: "https://placehold.co/200x40/4A90E2/FFFFFF?text=Waveform",
    tags: ["ambient", "background", "calm"],
    type: "music"
  },
  {
    id: "2",
    title: "Product Demo Voice",
    artist: "Marketing Team",
    duration: "2:30",
    waveform: "https://placehold.co/200x40/FF6B35/FFFFFF?text=Voice",
    tags: ["voice", "demo", "marketing"],
    type: "recording"
  },
  {
    id: "3",
    title: "Tech Podcast Episode",
    artist: "Tech Talks",
    duration: "45:20",
    waveform: "https://placehold.co/200x40/6F42C1/FFFFFF?text=Podcast",
    tags: ["podcast", "tech", "discussion"],
    type: "podcast"
  },
  {
    id: "4",
    title: "Notification Sound",
    artist: "UI Sounds",
    duration: "0:05",
    waveform: "https://placehold.co/200x40/27AE60/FFFFFF?text=Alert",
    tags: ["notification", "alert", "ui"],
    type: "sound-effect"
  },
  {
    id: "5",
    title: "Interview Recording",
    artist: "User Research",
    duration: "18:15",
    waveform: "https://placehold.co/200x40/E74C3C/FFFFFF?text=Interview",
    tags: ["interview", "research", "user"],
    type: "recording"
  },
  {
    id: "6",
    title: "Upbeat Intro",
    artist: "Music Library",
    duration: "1:20",
    waveform: "https://placehold.co/200x40/9B59B6/FFFFFF?text=Intro",
    tags: ["intro", "upbeat", "energetic"],
    type: "music"
  },
  {
    id: "7",
    title: "Button Click Sound",
    artist: "UI Sounds",
    duration: "0:02",
    waveform: "https://placehold.co/200x40/3498DB/FFFFFF?text=Click",
    tags: ["click", "button", "ui"],
    type: "sound-effect"
  },
  {
    id: "8",
    title: "Weekly Update",
    artist: "Company News",
    duration: "12:45",
    waveform: "https://placehold.co/200x40/2ECC71/FFFFFF?text=Update",
    tags: ["update", "news", "weekly"],
    type: "podcast"
  }
];
function Y5({ searchQuery: e }) {
  const t = W5.filter(
    (n) => n.title.toLowerCase().includes(e.toLowerCase()) || n.artist.toLowerCase().includes(e.toLowerCase()) || n.tags.some((o) => o.toLowerCase().includes(e.toLowerCase()))
  ), r = (n) => {
    switch (n) {
      case "music":
        return /* @__PURE__ */ f.jsx(Eg, { className: "w-4 h-4" });
      case "podcast":
        return /* @__PURE__ */ f.jsx(uE, { className: "w-4 h-4" });
      case "recording":
        return /* @__PURE__ */ f.jsx(_E, { className: "w-4 h-4" });
      case "sound-effect":
        return /* @__PURE__ */ f.jsx(Zn, { className: "w-4 h-4" });
      default:
        return /* @__PURE__ */ f.jsx(Zn, { className: "w-4 h-4" });
    }
  };
  return /* @__PURE__ */ f.jsx("div", { className: "py-2", children: t.length > 0 ? /* @__PURE__ */ f.jsx("div", { className: "space-y-3", children: t.map((n) => /* @__PURE__ */ f.jsxs(
    "div",
    {
      className: "flex items-center space-x-4 p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",
      children: [
        /* @__PURE__ */ f.jsx("div", { className: "flex-shrink-0", children: /* @__PURE__ */ f.jsx("div", { className: "w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center", children: r(n.type) }) }),
        /* @__PURE__ */ f.jsxs("div", { className: "flex-1 min-w-0", children: [
          /* @__PURE__ */ f.jsx("h3", { className: "text-sm font-medium text-gray-900 truncate", children: n.title }),
          /* @__PURE__ */ f.jsx("p", { className: "text-xs text-gray-500 truncate mt-1", children: n.artist }),
          /* @__PURE__ */ f.jsx("div", { className: "mt-2", children: /* @__PURE__ */ f.jsx(
            "img",
            {
              src: n.waveform,
              alt: "Audio waveform",
              className: "h-8 w-full object-cover rounded"
            }
          ) })
        ] }),
        /* @__PURE__ */ f.jsxs("div", { className: "flex-shrink-0 text-right", children: [
          /* @__PURE__ */ f.jsxs("div", { className: "flex items-center text-xs text-gray-400 mb-1", children: [
            /* @__PURE__ */ f.jsx(Ad, { className: "w-3 h-3 mr-1" }),
            n.duration
          ] }),
          /* @__PURE__ */ f.jsx("div", { className: "text-xs text-gray-400", children: n.tags.slice(0, 2).join(", ") })
        ] })
      ]
    },
    n.id
  )) }) : /* @__PURE__ */ f.jsxs("div", { className: "text-center py-12 text-gray-500", children: [
    /* @__PURE__ */ f.jsx("div", { className: "text-lg font-medium mb-2", children: "No audio files found" }),
    /* @__PURE__ */ f.jsx("p", { className: "text-sm", children: "Try adjusting your search terms" })
  ] }) });
}
const q5 = [
  // Images
  {
    id: "img-1",
    type: "image",
    title: "Mountain Landscape",
    width: 800,
    height: 300,
    bgColor: "4A90E2",
    textColor: "FFFFFF",
    tags: ["nature", "landscape", "mountains"],
    thumbnail: "https://placehold.co/400x225/4A90E2/FFFFFF?text=Mountain"
  },
  {
    id: "img-2",
    type: "image",
    title: "Abstract Pattern",
    width: 300,
    height: 300,
    bgColor: "FF6B35",
    textColor: "FFFFFF",
    tags: ["abstract", "geometric", "orange"],
    thumbnail: "https://placehold.co/400x225/FF6B35/FFFFFF?text=Pattern"
  },
  // Videos
  {
    id: "vid-1",
    type: "video",
    title: "Getting Started Tutorial",
    description: "Learn the basics of our platform",
    duration: "5:32",
    thumbnail: "https://placehold.co/400x225/4A90E2/FFFFFF?text=Tutorial",
    tags: ["tutorial", "beginner", "guide"]
  },
  {
    id: "vid-2",
    type: "video",
    title: "Advanced Features Demo",
    description: "Explore advanced functionality",
    duration: "12:45",
    thumbnail: "https://placehold.co/400x225/FF6B35/FFFFFF?text=Demo",
    tags: ["demo", "advanced", "features"]
  },
  // Audio
  {
    id: "aud-1",
    type: "audio",
    title: "Ambient Background",
    artist: "Sound Library",
    duration: "3:45",
    waveform: "https://placehold.co/200x40/4A90E2/FFFFFF?text=Waveform",
    tags: ["ambient", "background", "calm"]
  },
  {
    id: "aud-2",
    type: "audio",
    title: "Product Demo Voice",
    artist: "Marketing Team",
    duration: "2:30",
    waveform: "https://placehold.co/200x40/FF6B35/FFFFFF?text=Voice",
    tags: ["voice", "demo", "marketing"]
  }
];
function X5({ searchQuery: e }) {
  const t = q5.filter(
    (o) => o.title.toLowerCase().includes(e.toLowerCase()) || o.description?.toLowerCase().includes(e.toLowerCase()) || o.artist?.toLowerCase().includes(e.toLowerCase()) || o.tags.some((i) => i.toLowerCase().includes(e.toLowerCase()))
  ), r = (o) => {
    switch (o) {
      case "image":
        return /* @__PURE__ */ f.jsx(bg, { className: "w-4 h-4" });
      case "video":
        return /* @__PURE__ */ f.jsx(mg, { className: "w-4 h-4" });
      case "audio":
        return /* @__PURE__ */ f.jsx(Eg, { className: "w-4 h-4" });
      default:
        return /* @__PURE__ */ f.jsx(Zn, { className: "w-4 h-4" });
    }
  }, n = (o) => {
    switch (o) {
      case "image":
        return "Image";
      case "video":
        return "Video";
      case "audio":
        return "Audio";
      default:
        return "File";
    }
  };
  return /* @__PURE__ */ f.jsxs("div", { className: "py-2", children: [
    /* @__PURE__ */ f.jsxs("div", { className: "mb-4", children: [
      /* @__PURE__ */ f.jsxs("h3", { className: "text-sm font-medium text-gray-900", children: [
        'Search Results for "',
        e,
        '"'
      ] }),
      /* @__PURE__ */ f.jsxs("p", { className: "text-xs text-gray-500 mt-1", children: [
        "Found ",
        t.length,
        " results"
      ] })
    ] }),
    t.length > 0 ? /* @__PURE__ */ f.jsx("div", { className: "space-y-3", children: t.map((o) => /* @__PURE__ */ f.jsxs(
      "div",
      {
        className: "flex items-center space-x-4 p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",
        children: [
          /* @__PURE__ */ f.jsx("div", { className: "flex-shrink-0", children: /* @__PURE__ */ f.jsx("div", { className: "w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center", children: r(o.type) }) }),
          /* @__PURE__ */ f.jsxs("div", { className: "flex-1 min-w-0", children: [
            /* @__PURE__ */ f.jsxs("div", { className: "flex items-center space-x-2 mb-1", children: [
              /* @__PURE__ */ f.jsx("h3", { className: "text-sm font-medium text-gray-900 truncate", children: o.title }),
              /* @__PURE__ */ f.jsx("span", { className: "text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded", children: n(o.type) })
            ] }),
            o.description && /* @__PURE__ */ f.jsx("p", { className: "text-xs text-gray-500 truncate", children: o.description }),
            o.artist && /* @__PURE__ */ f.jsx("p", { className: "text-xs text-gray-500 truncate", children: o.artist }),
            o.duration && /* @__PURE__ */ f.jsxs("div", { className: "flex items-center text-xs text-gray-400 mt-1", children: [
              /* @__PURE__ */ f.jsx(Ad, { className: "w-3 h-3 mr-1" }),
              o.duration
            ] })
          ] }),
          /* @__PURE__ */ f.jsx("div", { className: "flex-shrink-0", children: /* @__PURE__ */ f.jsx("div", { className: "text-xs text-gray-400", children: o.tags.slice(0, 2).join(", ") }) })
        ]
      },
      o.id
    )) }) : /* @__PURE__ */ f.jsxs("div", { className: "text-center py-12 text-gray-500", children: [
      /* @__PURE__ */ f.jsx("div", { className: "text-lg font-medium mb-2", children: "No results found" }),
      /* @__PURE__ */ f.jsx("p", { className: "text-sm", children: "Try adjusting your search terms" })
    ] })
  ] });
}
function K5() {
  const [e, t] = Ce("Images"), [r, n] = Ce(""), [o, i] = Ce(!1), a = ["Images", "Videos", "Audio"], s = (l) => {
    const c = l.target.value;
    n(c), c.trim() ? i(!0) : i(!1);
  };
  return /* @__PURE__ */ f.jsxs("div", { className: "", children: [
    /* @__PURE__ */ f.jsx("div", { className: "py-4 border-b", children: /* @__PURE__ */ f.jsxs("div", { className: "relative", children: [
      /* @__PURE__ */ f.jsx(Dg, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4" }),
      /* @__PURE__ */ f.jsx(
        We,
        {
          type: "text",
          placeholder: "Search all files by keyword, tags, color...",
          className: "pl-10 pr-4 py-2 w-full border rounded-lg text-sm",
          value: r,
          onChange: s
        }
      )
    ] }) }),
    /* @__PURE__ */ f.jsx("div", { className: "py-4 space-y-4", children: /* @__PURE__ */ f.jsx(Fe, { className: "w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-medium", children: "Upload files" }) }),
    o ? /* @__PURE__ */ f.jsx(X5, { searchQuery: r }) : /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
      /* @__PURE__ */ f.jsx("div", { className: "px-0 mb-4", children: /* @__PURE__ */ f.jsx("div", { className: "flex border-b", children: a.map((l) => /* @__PURE__ */ f.jsx(
        "button",
        {
          onClick: () => t(l),
          className: `flex-1 pb-2 text-sm font-medium transition-colors ${e === l ? "text-black border-b-2 border-black" : "text-gray-500 hover:text-gray-700"}`,
          children: l
        },
        l
      )) }) }),
      e === "Images" && /* @__PURE__ */ f.jsx(V5, { searchQuery: "" }),
      e === "Videos" && /* @__PURE__ */ f.jsx(H5, { searchQuery: "" }),
      e === "Audio" && /* @__PURE__ */ f.jsx(Y5, { searchQuery: "" })
    ] })
  ] });
}
Tr(
  {
    id: "uploads",
    title: "Uploads",
    icon: pg,
    viewContainer: () => /* @__PURE__ */ f.jsx(K5, {}),
    order: 2
  },
  At.Sidebar
);
var qs = { exports: {} }, Z5 = qs.exports, lg;
function Q5() {
  return lg || (lg = 1, function(e, t) {
    (function(r, n) {
      e.exports = n();
    })(Z5, () => (() => {
      var r = { 873: (a, s) => {
        var l, c, u = function() {
          var d = function(P, O) {
            var I = P, E = x[O], S = null, M = 0, D = null, N = [], z = {}, Y = function(G, ee) {
              S = function(U) {
                for (var J = new Array(U), re = 0; re < U; re += 1) {
                  J[re] = new Array(U);
                  for (var se = 0; se < U; se += 1) J[re][se] = null;
                }
                return J;
              }(M = 4 * I + 17), H(0, 0), H(M - 7, 0), H(0, M - 7), Q(), X(), K(G, ee), I >= 7 && q(G), D == null && (D = oe(I, E, N)), ne(D, ee);
            }, H = function(G, ee) {
              for (var U = -1; U <= 7; U += 1) if (!(G + U <= -1 || M <= G + U)) for (var J = -1; J <= 7; J += 1) ee + J <= -1 || M <= ee + J || (S[G + U][ee + J] = 0 <= U && U <= 6 && (J == 0 || J == 6) || 0 <= J && J <= 6 && (U == 0 || U == 6) || 2 <= U && U <= 4 && 2 <= J && J <= 4);
            }, X = function() {
              for (var G = 8; G < M - 8; G += 1) S[G][6] == null && (S[G][6] = G % 2 == 0);
              for (var ee = 8; ee < M - 8; ee += 1) S[6][ee] == null && (S[6][ee] = ee % 2 == 0);
            }, Q = function() {
              for (var G = y.getPatternPosition(I), ee = 0; ee < G.length; ee += 1) for (var U = 0; U < G.length; U += 1) {
                var J = G[ee], re = G[U];
                if (S[J][re] == null) for (var se = -2; se <= 2; se += 1) for (var de = -2; de <= 2; de += 1) S[J + se][re + de] = se == -2 || se == 2 || de == -2 || de == 2 || se == 0 && de == 0;
              }
            }, q = function(G) {
              for (var ee = y.getBCHTypeNumber(I), U = 0; U < 18; U += 1) {
                var J = !G && (ee >> U & 1) == 1;
                S[Math.floor(U / 3)][U % 3 + M - 8 - 3] = J;
              }
              for (U = 0; U < 18; U += 1) J = !G && (ee >> U & 1) == 1, S[U % 3 + M - 8 - 3][Math.floor(U / 3)] = J;
            }, K = function(G, ee) {
              for (var U = E << 3 | ee, J = y.getBCHTypeInfo(U), re = 0; re < 15; re += 1) {
                var se = !G && (J >> re & 1) == 1;
                re < 6 ? S[re][8] = se : re < 8 ? S[re + 1][8] = se : S[M - 15 + re][8] = se;
              }
              for (re = 0; re < 15; re += 1) se = !G && (J >> re & 1) == 1, re < 8 ? S[8][M - re - 1] = se : re < 9 ? S[8][15 - re - 1 + 1] = se : S[8][15 - re - 1] = se;
              S[M - 8][8] = !G;
            }, ne = function(G, ee) {
              for (var U = -1, J = M - 1, re = 7, se = 0, de = y.getMaskFunction(ee), ce = M - 1; ce > 0; ce -= 2) for (ce == 6 && (ce -= 1); ; ) {
                for (var pe = 0; pe < 2; pe += 1) if (S[J][ce - pe] == null) {
                  var we = !1;
                  se < G.length && (we = (G[se] >>> re & 1) == 1), de(J, ce - pe) && (we = !we), S[J][ce - pe] = we, (re -= 1) == -1 && (se += 1, re = 7);
                }
                if ((J += U) < 0 || M <= J) {
                  J -= U, U = -U;
                  break;
                }
              }
            }, oe = function(G, ee, U) {
              for (var J = _.getRSBlocks(G, ee), re = R(), se = 0; se < U.length; se += 1) {
                var de = U[se];
                re.put(de.getMode(), 4), re.put(de.getLength(), y.getLengthInBits(de.getMode(), G)), de.write(re);
              }
              var ce = 0;
              for (se = 0; se < J.length; se += 1) ce += J[se].dataCount;
              if (re.getLengthInBits() > 8 * ce) throw "code length overflow. (" + re.getLengthInBits() + ">" + 8 * ce + ")";
              for (re.getLengthInBits() + 4 <= 8 * ce && re.put(0, 4); re.getLengthInBits() % 8 != 0; ) re.putBit(!1);
              for (; !(re.getLengthInBits() >= 8 * ce || (re.put(236, 8), re.getLengthInBits() >= 8 * ce)); ) re.put(17, 8);
              return function(pe, we) {
                for (var Ne = 0, Le = 0, Re = 0, Se = new Array(we.length), je = new Array(we.length), ge = 0; ge < we.length; ge += 1) {
                  var Ve = we[ge].dataCount, Xe = we[ge].totalCount - Ve;
                  Le = Math.max(Le, Ve), Re = Math.max(Re, Xe), Se[ge] = new Array(Ve);
                  for (var ye = 0; ye < Se[ge].length; ye += 1) Se[ge][ye] = 255 & pe.getBuffer()[ye + Ne];
                  Ne += Ve;
                  var at = y.getErrorCorrectPolynomial(Xe), st = w(Se[ge], at.getLength() - 1).mod(at);
                  for (je[ge] = new Array(at.getLength() - 1), ye = 0; ye < je[ge].length; ye += 1) {
                    var ft = ye + st.getLength() - je[ge].length;
                    je[ge][ye] = ft >= 0 ? st.getAt(ft) : 0;
                  }
                }
                var kr = 0;
                for (ye = 0; ye < we.length; ye += 1) kr += we[ye].totalCount;
                var It = new Array(kr), Dt = 0;
                for (ye = 0; ye < Le; ye += 1) for (ge = 0; ge < we.length; ge += 1) ye < Se[ge].length && (It[Dt] = Se[ge][ye], Dt += 1);
                for (ye = 0; ye < Re; ye += 1) for (ge = 0; ge < we.length; ge += 1) ye < je[ge].length && (It[Dt] = je[ge][ye], Dt += 1);
                return It;
              }(re, J);
            };
            z.addData = function(G, ee) {
              var U = null;
              switch (ee = ee || "Byte") {
                case "Numeric":
                  U = T(G);
                  break;
                case "Alphanumeric":
                  U = k(G);
                  break;
                case "Byte":
                  U = j(G);
                  break;
                case "Kanji":
                  U = A(G);
                  break;
                default:
                  throw "mode:" + ee;
              }
              N.push(U), D = null;
            }, z.isDark = function(G, ee) {
              if (G < 0 || M <= G || ee < 0 || M <= ee) throw G + "," + ee;
              return S[G][ee];
            }, z.getModuleCount = function() {
              return M;
            }, z.make = function() {
              if (I < 1) {
                for (var G = 1; G < 40; G++) {
                  for (var ee = _.getRSBlocks(G, E), U = R(), J = 0; J < N.length; J++) {
                    var re = N[J];
                    U.put(re.getMode(), 4), U.put(re.getLength(), y.getLengthInBits(re.getMode(), G)), re.write(U);
                  }
                  var se = 0;
                  for (J = 0; J < ee.length; J++) se += ee[J].dataCount;
                  if (U.getLengthInBits() <= 8 * se) break;
                }
                I = G;
              }
              Y(!1, function() {
                for (var de = 0, ce = 0, pe = 0; pe < 8; pe += 1) {
                  Y(!0, pe);
                  var we = y.getLostPoint(z);
                  (pe == 0 || de > we) && (de = we, ce = pe);
                }
                return ce;
              }());
            }, z.createTableTag = function(G, ee) {
              G = G || 2;
              var U = "";
              U += '<table style="', U += " border-width: 0px; border-style: none;", U += " border-collapse: collapse;", U += " padding: 0px; margin: " + (ee = ee === void 0 ? 4 * G : ee) + "px;", U += '">', U += "<tbody>";
              for (var J = 0; J < z.getModuleCount(); J += 1) {
                U += "<tr>";
                for (var re = 0; re < z.getModuleCount(); re += 1) U += '<td style="', U += " border-width: 0px; border-style: none;", U += " border-collapse: collapse;", U += " padding: 0px; margin: 0px;", U += " width: " + G + "px;", U += " height: " + G + "px;", U += " background-color: ", U += z.isDark(J, re) ? "#000000" : "#ffffff", U += ";", U += '"/>';
                U += "</tr>";
              }
              return (U += "</tbody>") + "</table>";
            }, z.createSvgTag = function(G, ee, U, J) {
              var re = {};
              typeof arguments[0] == "object" && (G = (re = arguments[0]).cellSize, ee = re.margin, U = re.alt, J = re.title), G = G || 2, ee = ee === void 0 ? 4 * G : ee, (U = typeof U == "string" ? { text: U } : U || {}).text = U.text || null, U.id = U.text ? U.id || "qrcode-description" : null, (J = typeof J == "string" ? { text: J } : J || {}).text = J.text || null, J.id = J.text ? J.id || "qrcode-title" : null;
              var se, de, ce, pe, we = z.getModuleCount() * G + 2 * ee, Ne = "";
              for (pe = "l" + G + ",0 0," + G + " -" + G + ",0 0,-" + G + "z ", Ne += '<svg version="1.1" xmlns="http://www.w3.org/2000/svg"', Ne += re.scalable ? "" : ' width="' + we + 'px" height="' + we + 'px"', Ne += ' viewBox="0 0 ' + we + " " + we + '" ', Ne += ' preserveAspectRatio="xMinYMin meet"', Ne += J.text || U.text ? ' role="img" aria-labelledby="' + te([J.id, U.id].join(" ").trim()) + '"' : "", Ne += ">", Ne += J.text ? '<title id="' + te(J.id) + '">' + te(J.text) + "</title>" : "", Ne += U.text ? '<description id="' + te(U.id) + '">' + te(U.text) + "</description>" : "", Ne += '<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>', Ne += '<path d="', de = 0; de < z.getModuleCount(); de += 1) for (ce = de * G + ee, se = 0; se < z.getModuleCount(); se += 1) z.isDark(de, se) && (Ne += "M" + (se * G + ee) + "," + ce + pe);
              return (Ne += '" stroke="transparent" fill="black"/>') + "</svg>";
            }, z.createDataURL = function(G, ee) {
              G = G || 2, ee = ee === void 0 ? 4 * G : ee;
              var U = z.getModuleCount() * G + 2 * ee, J = ee, re = U - ee;
              return L(U, U, function(se, de) {
                if (J <= se && se < re && J <= de && de < re) {
                  var ce = Math.floor((se - J) / G), pe = Math.floor((de - J) / G);
                  return z.isDark(pe, ce) ? 0 : 1;
                }
                return 1;
              });
            }, z.createImgTag = function(G, ee, U) {
              G = G || 2, ee = ee === void 0 ? 4 * G : ee;
              var J = z.getModuleCount() * G + 2 * ee, re = "";
              return re += "<img", re += ' src="', re += z.createDataURL(G, ee), re += '"', re += ' width="', re += J, re += '"', re += ' height="', re += J, re += '"', U && (re += ' alt="', re += te(U), re += '"'), re + "/>";
            };
            var te = function(G) {
              for (var ee = "", U = 0; U < G.length; U += 1) {
                var J = G.charAt(U);
                switch (J) {
                  case "<":
                    ee += "&lt;";
                    break;
                  case ">":
                    ee += "&gt;";
                    break;
                  case "&":
                    ee += "&amp;";
                    break;
                  case '"':
                    ee += "&quot;";
                    break;
                  default:
                    ee += J;
                }
              }
              return ee;
            };
            return z.createASCII = function(G, ee) {
              if ((G = G || 1) < 2) return function(Se) {
                Se = Se === void 0 ? 2 : Se;
                var je, ge, Ve, Xe, ye, at = 1 * z.getModuleCount() + 2 * Se, st = Se, ft = at - Se, kr = { "██": "█", "█ ": "▀", " █": "▄", "  ": " " }, It = { "██": "▀", "█ ": "▀", " █": " ", "  ": " " }, Dt = "";
                for (je = 0; je < at; je += 2) {
                  for (Ve = Math.floor((je - st) / 1), Xe = Math.floor((je + 1 - st) / 1), ge = 0; ge < at; ge += 1) ye = "█", st <= ge && ge < ft && st <= je && je < ft && z.isDark(Ve, Math.floor((ge - st) / 1)) && (ye = " "), st <= ge && ge < ft && st <= je + 1 && je + 1 < ft && z.isDark(Xe, Math.floor((ge - st) / 1)) ? ye += " " : ye += "█", Dt += Se < 1 && je + 1 >= ft ? It[ye] : kr[ye];
                  Dt += `
`;
                }
                return at % 2 && Se > 0 ? Dt.substring(0, Dt.length - at - 1) + Array(at + 1).join("▀") : Dt.substring(0, Dt.length - 1);
              }(ee);
              G -= 1, ee = ee === void 0 ? 2 * G : ee;
              var U, J, re, se, de = z.getModuleCount() * G + 2 * ee, ce = ee, pe = de - ee, we = Array(G + 1).join("██"), Ne = Array(G + 1).join("  "), Le = "", Re = "";
              for (U = 0; U < de; U += 1) {
                for (re = Math.floor((U - ce) / G), Re = "", J = 0; J < de; J += 1) se = 1, ce <= J && J < pe && ce <= U && U < pe && z.isDark(re, Math.floor((J - ce) / G)) && (se = 0), Re += se ? we : Ne;
                for (re = 0; re < G; re += 1) Le += Re + `
`;
              }
              return Le.substring(0, Le.length - 1);
            }, z.renderTo2dContext = function(G, ee) {
              ee = ee || 2;
              for (var U = z.getModuleCount(), J = 0; J < U; J++) for (var re = 0; re < U; re++) G.fillStyle = z.isDark(J, re) ? "black" : "white", G.fillRect(J * ee, re * ee, ee, ee);
            }, z;
          };
          d.stringToBytes = (d.stringToBytesFuncs = { default: function(P) {
            for (var O = [], I = 0; I < P.length; I += 1) {
              var E = P.charCodeAt(I);
              O.push(255 & E);
            }
            return O;
          } }).default, d.createStringToBytes = function(P, O) {
            var I = function() {
              for (var S = F(P), M = function() {
                var X = S.read();
                if (X == -1) throw "eof";
                return X;
              }, D = 0, N = {}; ; ) {
                var z = S.read();
                if (z == -1) break;
                var Y = M(), H = M() << 8 | M();
                N[String.fromCharCode(z << 8 | Y)] = H, D += 1;
              }
              if (D != O) throw D + " != " + O;
              return N;
            }(), E = 63;
            return function(S) {
              for (var M = [], D = 0; D < S.length; D += 1) {
                var N = S.charCodeAt(D);
                if (N < 128) M.push(N);
                else {
                  var z = I[S.charAt(D)];
                  typeof z == "number" ? (255 & z) == z ? M.push(z) : (M.push(z >>> 8), M.push(255 & z)) : M.push(E);
                }
              }
              return M;
            };
          };
          var h, p, g, v, m, x = { L: 1, M: 0, Q: 3, H: 2 }, y = (h = [[], [6, 18], [6, 22], [6, 26], [6, 30], [6, 34], [6, 22, 38], [6, 24, 42], [6, 26, 46], [6, 28, 50], [6, 30, 54], [6, 32, 58], [6, 34, 62], [6, 26, 46, 66], [6, 26, 48, 70], [6, 26, 50, 74], [6, 30, 54, 78], [6, 30, 56, 82], [6, 30, 58, 86], [6, 34, 62, 90], [6, 28, 50, 72, 94], [6, 26, 50, 74, 98], [6, 30, 54, 78, 102], [6, 28, 54, 80, 106], [6, 32, 58, 84, 110], [6, 30, 58, 86, 114], [6, 34, 62, 90, 118], [6, 26, 50, 74, 98, 122], [6, 30, 54, 78, 102, 126], [6, 26, 52, 78, 104, 130], [6, 30, 56, 82, 108, 134], [6, 34, 60, 86, 112, 138], [6, 30, 58, 86, 114, 142], [6, 34, 62, 90, 118, 146], [6, 30, 54, 78, 102, 126, 150], [6, 24, 50, 76, 102, 128, 154], [6, 28, 54, 80, 106, 132, 158], [6, 32, 58, 84, 110, 136, 162], [6, 26, 54, 82, 110, 138, 166], [6, 30, 58, 86, 114, 142, 170]], p = 1335, g = 7973, m = function(P) {
            for (var O = 0; P != 0; ) O += 1, P >>>= 1;
            return O;
          }, (v = {}).getBCHTypeInfo = function(P) {
            for (var O = P << 10; m(O) - m(p) >= 0; ) O ^= p << m(O) - m(p);
            return 21522 ^ (P << 10 | O);
          }, v.getBCHTypeNumber = function(P) {
            for (var O = P << 12; m(O) - m(g) >= 0; ) O ^= g << m(O) - m(g);
            return P << 12 | O;
          }, v.getPatternPosition = function(P) {
            return h[P - 1];
          }, v.getMaskFunction = function(P) {
            switch (P) {
              case 0:
                return function(O, I) {
                  return (O + I) % 2 == 0;
                };
              case 1:
                return function(O, I) {
                  return O % 2 == 0;
                };
              case 2:
                return function(O, I) {
                  return I % 3 == 0;
                };
              case 3:
                return function(O, I) {
                  return (O + I) % 3 == 0;
                };
              case 4:
                return function(O, I) {
                  return (Math.floor(O / 2) + Math.floor(I / 3)) % 2 == 0;
                };
              case 5:
                return function(O, I) {
                  return O * I % 2 + O * I % 3 == 0;
                };
              case 6:
                return function(O, I) {
                  return (O * I % 2 + O * I % 3) % 2 == 0;
                };
              case 7:
                return function(O, I) {
                  return (O * I % 3 + (O + I) % 2) % 2 == 0;
                };
              default:
                throw "bad maskPattern:" + P;
            }
          }, v.getErrorCorrectPolynomial = function(P) {
            for (var O = w([1], 0), I = 0; I < P; I += 1) O = O.multiply(w([1, b.gexp(I)], 0));
            return O;
          }, v.getLengthInBits = function(P, O) {
            if (1 <= O && O < 10) switch (P) {
              case 1:
                return 10;
              case 2:
                return 9;
              case 4:
              case 8:
                return 8;
              default:
                throw "mode:" + P;
            }
            else if (O < 27) switch (P) {
              case 1:
                return 12;
              case 2:
                return 11;
              case 4:
                return 16;
              case 8:
                return 10;
              default:
                throw "mode:" + P;
            }
            else {
              if (!(O < 41)) throw "type:" + O;
              switch (P) {
                case 1:
                  return 14;
                case 2:
                  return 13;
                case 4:
                  return 16;
                case 8:
                  return 12;
                default:
                  throw "mode:" + P;
              }
            }
          }, v.getLostPoint = function(P) {
            for (var O = P.getModuleCount(), I = 0, E = 0; E < O; E += 1) for (var S = 0; S < O; S += 1) {
              for (var M = 0, D = P.isDark(E, S), N = -1; N <= 1; N += 1) if (!(E + N < 0 || O <= E + N)) for (var z = -1; z <= 1; z += 1) S + z < 0 || O <= S + z || N == 0 && z == 0 || D == P.isDark(E + N, S + z) && (M += 1);
              M > 5 && (I += 3 + M - 5);
            }
            for (E = 0; E < O - 1; E += 1) for (S = 0; S < O - 1; S += 1) {
              var Y = 0;
              P.isDark(E, S) && (Y += 1), P.isDark(E + 1, S) && (Y += 1), P.isDark(E, S + 1) && (Y += 1), P.isDark(E + 1, S + 1) && (Y += 1), Y != 0 && Y != 4 || (I += 3);
            }
            for (E = 0; E < O; E += 1) for (S = 0; S < O - 6; S += 1) P.isDark(E, S) && !P.isDark(E, S + 1) && P.isDark(E, S + 2) && P.isDark(E, S + 3) && P.isDark(E, S + 4) && !P.isDark(E, S + 5) && P.isDark(E, S + 6) && (I += 40);
            for (S = 0; S < O; S += 1) for (E = 0; E < O - 6; E += 1) P.isDark(E, S) && !P.isDark(E + 1, S) && P.isDark(E + 2, S) && P.isDark(E + 3, S) && P.isDark(E + 4, S) && !P.isDark(E + 5, S) && P.isDark(E + 6, S) && (I += 40);
            var H = 0;
            for (S = 0; S < O; S += 1) for (E = 0; E < O; E += 1) P.isDark(E, S) && (H += 1);
            return I + Math.abs(100 * H / O / O - 50) / 5 * 10;
          }, v), b = function() {
            for (var P = new Array(256), O = new Array(256), I = 0; I < 8; I += 1) P[I] = 1 << I;
            for (I = 8; I < 256; I += 1) P[I] = P[I - 4] ^ P[I - 5] ^ P[I - 6] ^ P[I - 8];
            for (I = 0; I < 255; I += 1) O[P[I]] = I;
            return { glog: function(E) {
              if (E < 1) throw "glog(" + E + ")";
              return O[E];
            }, gexp: function(E) {
              for (; E < 0; ) E += 255;
              for (; E >= 256; ) E -= 255;
              return P[E];
            } };
          }();
          function w(P, O) {
            if (P.length === void 0) throw P.length + "/" + O;
            var I = function() {
              for (var S = 0; S < P.length && P[S] == 0; ) S += 1;
              for (var M = new Array(P.length - S + O), D = 0; D < P.length - S; D += 1) M[D] = P[D + S];
              return M;
            }(), E = { getAt: function(S) {
              return I[S];
            }, getLength: function() {
              return I.length;
            }, multiply: function(S) {
              for (var M = new Array(E.getLength() + S.getLength() - 1), D = 0; D < E.getLength(); D += 1) for (var N = 0; N < S.getLength(); N += 1) M[D + N] ^= b.gexp(b.glog(E.getAt(D)) + b.glog(S.getAt(N)));
              return w(M, 0);
            }, mod: function(S) {
              if (E.getLength() - S.getLength() < 0) return E;
              for (var M = b.glog(E.getAt(0)) - b.glog(S.getAt(0)), D = new Array(E.getLength()), N = 0; N < E.getLength(); N += 1) D[N] = E.getAt(N);
              for (N = 0; N < S.getLength(); N += 1) D[N] ^= b.gexp(b.glog(S.getAt(N)) + M);
              return w(D, 0).mod(S);
            } };
            return E;
          }
          var _ = /* @__PURE__ */ function() {
            var P = [[1, 26, 19], [1, 26, 16], [1, 26, 13], [1, 26, 9], [1, 44, 34], [1, 44, 28], [1, 44, 22], [1, 44, 16], [1, 70, 55], [1, 70, 44], [2, 35, 17], [2, 35, 13], [1, 100, 80], [2, 50, 32], [2, 50, 24], [4, 25, 9], [1, 134, 108], [2, 67, 43], [2, 33, 15, 2, 34, 16], [2, 33, 11, 2, 34, 12], [2, 86, 68], [4, 43, 27], [4, 43, 19], [4, 43, 15], [2, 98, 78], [4, 49, 31], [2, 32, 14, 4, 33, 15], [4, 39, 13, 1, 40, 14], [2, 121, 97], [2, 60, 38, 2, 61, 39], [4, 40, 18, 2, 41, 19], [4, 40, 14, 2, 41, 15], [2, 146, 116], [3, 58, 36, 2, 59, 37], [4, 36, 16, 4, 37, 17], [4, 36, 12, 4, 37, 13], [2, 86, 68, 2, 87, 69], [4, 69, 43, 1, 70, 44], [6, 43, 19, 2, 44, 20], [6, 43, 15, 2, 44, 16], [4, 101, 81], [1, 80, 50, 4, 81, 51], [4, 50, 22, 4, 51, 23], [3, 36, 12, 8, 37, 13], [2, 116, 92, 2, 117, 93], [6, 58, 36, 2, 59, 37], [4, 46, 20, 6, 47, 21], [7, 42, 14, 4, 43, 15], [4, 133, 107], [8, 59, 37, 1, 60, 38], [8, 44, 20, 4, 45, 21], [12, 33, 11, 4, 34, 12], [3, 145, 115, 1, 146, 116], [4, 64, 40, 5, 65, 41], [11, 36, 16, 5, 37, 17], [11, 36, 12, 5, 37, 13], [5, 109, 87, 1, 110, 88], [5, 65, 41, 5, 66, 42], [5, 54, 24, 7, 55, 25], [11, 36, 12, 7, 37, 13], [5, 122, 98, 1, 123, 99], [7, 73, 45, 3, 74, 46], [15, 43, 19, 2, 44, 20], [3, 45, 15, 13, 46, 16], [1, 135, 107, 5, 136, 108], [10, 74, 46, 1, 75, 47], [1, 50, 22, 15, 51, 23], [2, 42, 14, 17, 43, 15], [5, 150, 120, 1, 151, 121], [9, 69, 43, 4, 70, 44], [17, 50, 22, 1, 51, 23], [2, 42, 14, 19, 43, 15], [3, 141, 113, 4, 142, 114], [3, 70, 44, 11, 71, 45], [17, 47, 21, 4, 48, 22], [9, 39, 13, 16, 40, 14], [3, 135, 107, 5, 136, 108], [3, 67, 41, 13, 68, 42], [15, 54, 24, 5, 55, 25], [15, 43, 15, 10, 44, 16], [4, 144, 116, 4, 145, 117], [17, 68, 42], [17, 50, 22, 6, 51, 23], [19, 46, 16, 6, 47, 17], [2, 139, 111, 7, 140, 112], [17, 74, 46], [7, 54, 24, 16, 55, 25], [34, 37, 13], [4, 151, 121, 5, 152, 122], [4, 75, 47, 14, 76, 48], [11, 54, 24, 14, 55, 25], [16, 45, 15, 14, 46, 16], [6, 147, 117, 4, 148, 118], [6, 73, 45, 14, 74, 46], [11, 54, 24, 16, 55, 25], [30, 46, 16, 2, 47, 17], [8, 132, 106, 4, 133, 107], [8, 75, 47, 13, 76, 48], [7, 54, 24, 22, 55, 25], [22, 45, 15, 13, 46, 16], [10, 142, 114, 2, 143, 115], [19, 74, 46, 4, 75, 47], [28, 50, 22, 6, 51, 23], [33, 46, 16, 4, 47, 17], [8, 152, 122, 4, 153, 123], [22, 73, 45, 3, 74, 46], [8, 53, 23, 26, 54, 24], [12, 45, 15, 28, 46, 16], [3, 147, 117, 10, 148, 118], [3, 73, 45, 23, 74, 46], [4, 54, 24, 31, 55, 25], [11, 45, 15, 31, 46, 16], [7, 146, 116, 7, 147, 117], [21, 73, 45, 7, 74, 46], [1, 53, 23, 37, 54, 24], [19, 45, 15, 26, 46, 16], [5, 145, 115, 10, 146, 116], [19, 75, 47, 10, 76, 48], [15, 54, 24, 25, 55, 25], [23, 45, 15, 25, 46, 16], [13, 145, 115, 3, 146, 116], [2, 74, 46, 29, 75, 47], [42, 54, 24, 1, 55, 25], [23, 45, 15, 28, 46, 16], [17, 145, 115], [10, 74, 46, 23, 75, 47], [10, 54, 24, 35, 55, 25], [19, 45, 15, 35, 46, 16], [17, 145, 115, 1, 146, 116], [14, 74, 46, 21, 75, 47], [29, 54, 24, 19, 55, 25], [11, 45, 15, 46, 46, 16], [13, 145, 115, 6, 146, 116], [14, 74, 46, 23, 75, 47], [44, 54, 24, 7, 55, 25], [59, 46, 16, 1, 47, 17], [12, 151, 121, 7, 152, 122], [12, 75, 47, 26, 76, 48], [39, 54, 24, 14, 55, 25], [22, 45, 15, 41, 46, 16], [6, 151, 121, 14, 152, 122], [6, 75, 47, 34, 76, 48], [46, 54, 24, 10, 55, 25], [2, 45, 15, 64, 46, 16], [17, 152, 122, 4, 153, 123], [29, 74, 46, 14, 75, 47], [49, 54, 24, 10, 55, 25], [24, 45, 15, 46, 46, 16], [4, 152, 122, 18, 153, 123], [13, 74, 46, 32, 75, 47], [48, 54, 24, 14, 55, 25], [42, 45, 15, 32, 46, 16], [20, 147, 117, 4, 148, 118], [40, 75, 47, 7, 76, 48], [43, 54, 24, 22, 55, 25], [10, 45, 15, 67, 46, 16], [19, 148, 118, 6, 149, 119], [18, 75, 47, 31, 76, 48], [34, 54, 24, 34, 55, 25], [20, 45, 15, 61, 46, 16]], O = function(E, S) {
              var M = {};
              return M.totalCount = E, M.dataCount = S, M;
            }, I = { getRSBlocks: function(E, S) {
              var M = function(q, K) {
                switch (K) {
                  case x.L:
                    return P[4 * (q - 1) + 0];
                  case x.M:
                    return P[4 * (q - 1) + 1];
                  case x.Q:
                    return P[4 * (q - 1) + 2];
                  case x.H:
                    return P[4 * (q - 1) + 3];
                  default:
                    return;
                }
              }(E, S);
              if (M === void 0) throw "bad rs block @ typeNumber:" + E + "/errorCorrectionLevel:" + S;
              for (var D = M.length / 3, N = [], z = 0; z < D; z += 1) for (var Y = M[3 * z + 0], H = M[3 * z + 1], X = M[3 * z + 2], Q = 0; Q < Y; Q += 1) N.push(O(H, X));
              return N;
            } };
            return I;
          }(), R = function() {
            var P = [], O = 0, I = { getBuffer: function() {
              return P;
            }, getAt: function(E) {
              var S = Math.floor(E / 8);
              return (P[S] >>> 7 - E % 8 & 1) == 1;
            }, put: function(E, S) {
              for (var M = 0; M < S; M += 1) I.putBit((E >>> S - M - 1 & 1) == 1);
            }, getLengthInBits: function() {
              return O;
            }, putBit: function(E) {
              var S = Math.floor(O / 8);
              P.length <= S && P.push(0), E && (P[S] |= 128 >>> O % 8), O += 1;
            } };
            return I;
          }, T = function(P) {
            var O = P, I = { getMode: function() {
              return 1;
            }, getLength: function(M) {
              return O.length;
            }, write: function(M) {
              for (var D = O, N = 0; N + 2 < D.length; ) M.put(E(D.substring(N, N + 3)), 10), N += 3;
              N < D.length && (D.length - N == 1 ? M.put(E(D.substring(N, N + 1)), 4) : D.length - N == 2 && M.put(E(D.substring(N, N + 2)), 7));
            } }, E = function(M) {
              for (var D = 0, N = 0; N < M.length; N += 1) D = 10 * D + S(M.charAt(N));
              return D;
            }, S = function(M) {
              if ("0" <= M && M <= "9") return M.charCodeAt(0) - 48;
              throw "illegal char :" + M;
            };
            return I;
          }, k = function(P) {
            var O = P, I = { getMode: function() {
              return 2;
            }, getLength: function(S) {
              return O.length;
            }, write: function(S) {
              for (var M = O, D = 0; D + 1 < M.length; ) S.put(45 * E(M.charAt(D)) + E(M.charAt(D + 1)), 11), D += 2;
              D < M.length && S.put(E(M.charAt(D)), 6);
            } }, E = function(S) {
              if ("0" <= S && S <= "9") return S.charCodeAt(0) - 48;
              if ("A" <= S && S <= "Z") return S.charCodeAt(0) - 65 + 10;
              switch (S) {
                case " ":
                  return 36;
                case "$":
                  return 37;
                case "%":
                  return 38;
                case "*":
                  return 39;
                case "+":
                  return 40;
                case "-":
                  return 41;
                case ".":
                  return 42;
                case "/":
                  return 43;
                case ":":
                  return 44;
                default:
                  throw "illegal char :" + S;
              }
            };
            return I;
          }, j = function(P) {
            var O = d.stringToBytes(P);
            return { getMode: function() {
              return 4;
            }, getLength: function(I) {
              return O.length;
            }, write: function(I) {
              for (var E = 0; E < O.length; E += 1) I.put(O[E], 8);
            } };
          }, A = function(P) {
            var O = d.stringToBytesFuncs.SJIS;
            if (!O) throw "sjis not supported.";
            (function() {
              var S = O("友");
              if (S.length != 2 || (S[0] << 8 | S[1]) != 38726) throw "sjis not supported.";
            })();
            var I = O(P), E = { getMode: function() {
              return 8;
            }, getLength: function(S) {
              return ~~(I.length / 2);
            }, write: function(S) {
              for (var M = I, D = 0; D + 1 < M.length; ) {
                var N = (255 & M[D]) << 8 | 255 & M[D + 1];
                if (33088 <= N && N <= 40956) N -= 33088;
                else {
                  if (!(57408 <= N && N <= 60351)) throw "illegal char at " + (D + 1) + "/" + N;
                  N -= 49472;
                }
                N = 192 * (N >>> 8 & 255) + (255 & N), S.put(N, 13), D += 2;
              }
              if (D < M.length) throw "illegal char at " + (D + 1);
            } };
            return E;
          }, $ = function() {
            var P = [], O = { writeByte: function(I) {
              P.push(255 & I);
            }, writeShort: function(I) {
              O.writeByte(I), O.writeByte(I >>> 8);
            }, writeBytes: function(I, E, S) {
              E = E || 0, S = S || I.length;
              for (var M = 0; M < S; M += 1) O.writeByte(I[M + E]);
            }, writeString: function(I) {
              for (var E = 0; E < I.length; E += 1) O.writeByte(I.charCodeAt(E));
            }, toByteArray: function() {
              return P;
            }, toString: function() {
              var I = "";
              I += "[";
              for (var E = 0; E < P.length; E += 1) E > 0 && (I += ","), I += P[E];
              return I + "]";
            } };
            return O;
          }, F = function(P) {
            var O = P, I = 0, E = 0, S = 0, M = { read: function() {
              for (; S < 8; ) {
                if (I >= O.length) {
                  if (S == 0) return -1;
                  throw "unexpected end of file./" + S;
                }
                var N = O.charAt(I);
                if (I += 1, N == "=") return S = 0, -1;
                N.match(/^\s$/) || (E = E << 6 | D(N.charCodeAt(0)), S += 6);
              }
              var z = E >>> S - 8 & 255;
              return S -= 8, z;
            } }, D = function(N) {
              if (65 <= N && N <= 90) return N - 65;
              if (97 <= N && N <= 122) return N - 97 + 26;
              if (48 <= N && N <= 57) return N - 48 + 52;
              if (N == 43) return 62;
              if (N == 47) return 63;
              throw "c:" + N;
            };
            return M;
          }, L = function(P, O, I) {
            for (var E = function(H, X) {
              var Q = H, q = X, K = new Array(H * X), ne = { setPixel: function(G, ee, U) {
                K[ee * Q + G] = U;
              }, write: function(G) {
                G.writeString("GIF87a"), G.writeShort(Q), G.writeShort(q), G.writeByte(128), G.writeByte(0), G.writeByte(0), G.writeByte(0), G.writeByte(0), G.writeByte(0), G.writeByte(255), G.writeByte(255), G.writeByte(255), G.writeString(","), G.writeShort(0), G.writeShort(0), G.writeShort(Q), G.writeShort(q), G.writeByte(0);
                var ee = oe(2);
                G.writeByte(2);
                for (var U = 0; ee.length - U > 255; ) G.writeByte(255), G.writeBytes(ee, U, 255), U += 255;
                G.writeByte(ee.length - U), G.writeBytes(ee, U, ee.length - U), G.writeByte(0), G.writeString(";");
              } }, oe = function(G) {
                for (var ee = 1 << G, U = 1 + (1 << G), J = G + 1, re = te(), se = 0; se < ee; se += 1) re.add(String.fromCharCode(se));
                re.add(String.fromCharCode(ee)), re.add(String.fromCharCode(U));
                var de, ce, pe, we = $(), Ne = (de = we, ce = 0, pe = 0, { write: function(je, ge) {
                  if (je >>> ge) throw "length over";
                  for (; ce + ge >= 8; ) de.writeByte(255 & (je << ce | pe)), ge -= 8 - ce, je >>>= 8 - ce, pe = 0, ce = 0;
                  pe |= je << ce, ce += ge;
                }, flush: function() {
                  ce > 0 && de.writeByte(pe);
                } });
                Ne.write(ee, J);
                var Le = 0, Re = String.fromCharCode(K[Le]);
                for (Le += 1; Le < K.length; ) {
                  var Se = String.fromCharCode(K[Le]);
                  Le += 1, re.contains(Re + Se) ? Re += Se : (Ne.write(re.indexOf(Re), J), re.size() < 4095 && (re.size() == 1 << J && (J += 1), re.add(Re + Se)), Re = Se);
                }
                return Ne.write(re.indexOf(Re), J), Ne.write(U, J), Ne.flush(), we.toByteArray();
              }, te = function() {
                var G = {}, ee = 0, U = { add: function(J) {
                  if (U.contains(J)) throw "dup key:" + J;
                  G[J] = ee, ee += 1;
                }, size: function() {
                  return ee;
                }, indexOf: function(J) {
                  return G[J];
                }, contains: function(J) {
                  return G[J] !== void 0;
                } };
                return U;
              };
              return ne;
            }(P, O), S = 0; S < O; S += 1) for (var M = 0; M < P; M += 1) E.setPixel(M, S, I(M, S));
            var D = $();
            E.write(D);
            for (var N = function() {
              var H = 0, X = 0, Q = 0, q = "", K = {}, ne = function(te) {
                q += String.fromCharCode(oe(63 & te));
              }, oe = function(te) {
                if (!(te < 0)) {
                  if (te < 26) return 65 + te;
                  if (te < 52) return te - 26 + 97;
                  if (te < 62) return te - 52 + 48;
                  if (te == 62) return 43;
                  if (te == 63) return 47;
                }
                throw "n:" + te;
              };
              return K.writeByte = function(te) {
                for (H = H << 8 | 255 & te, X += 8, Q += 1; X >= 6; ) ne(H >>> X - 6), X -= 6;
              }, K.flush = function() {
                if (X > 0 && (ne(H << 6 - X), H = 0, X = 0), Q % 3 != 0) for (var te = 3 - Q % 3, G = 0; G < te; G += 1) q += "=";
              }, K.toString = function() {
                return q;
              }, K;
            }(), z = D.toByteArray(), Y = 0; Y < z.length; Y += 1) N.writeByte(z[Y]);
            return N.flush(), "data:image/gif;base64," + N;
          };
          return d;
        }();
        u.stringToBytesFuncs["UTF-8"] = function(d) {
          return function(h) {
            for (var p = [], g = 0; g < h.length; g++) {
              var v = h.charCodeAt(g);
              v < 128 ? p.push(v) : v < 2048 ? p.push(192 | v >> 6, 128 | 63 & v) : v < 55296 || v >= 57344 ? p.push(224 | v >> 12, 128 | v >> 6 & 63, 128 | 63 & v) : (g++, v = 65536 + ((1023 & v) << 10 | 1023 & h.charCodeAt(g)), p.push(240 | v >> 18, 128 | v >> 12 & 63, 128 | v >> 6 & 63, 128 | 63 & v));
            }
            return p;
          }(d);
        }, (c = typeof (l = function() {
          return u;
        }) == "function" ? l.apply(s, []) : l) === void 0 || (a.exports = c);
      } }, n = {};
      function o(a) {
        var s = n[a];
        if (s !== void 0) return s.exports;
        var l = n[a] = { exports: {} };
        return r[a](l, l.exports, o), l.exports;
      }
      o.n = (a) => {
        var s = a && a.__esModule ? () => a.default : () => a;
        return o.d(s, { a: s }), s;
      }, o.d = (a, s) => {
        for (var l in s) o.o(s, l) && !o.o(a, l) && Object.defineProperty(a, l, { enumerable: !0, get: s[l] });
      }, o.o = (a, s) => Object.prototype.hasOwnProperty.call(a, s);
      var i = {};
      return (() => {
        o.d(i, { default: () => O });
        const a = (I) => !!I && typeof I == "object" && !Array.isArray(I);
        function s(I, ...E) {
          if (!E.length) return I;
          const S = E.shift();
          return S !== void 0 && a(I) && a(S) ? (I = Object.assign({}, I), Object.keys(S).forEach((M) => {
            const D = I[M], N = S[M];
            Array.isArray(D) && Array.isArray(N) ? I[M] = N : a(D) && a(N) ? I[M] = s(Object.assign({}, D), N) : I[M] = N;
          }), s(I, ...E)) : I;
        }
        function l(I, E) {
          const S = document.createElement("a");
          S.download = E, S.href = I, document.body.appendChild(S), S.click(), document.body.removeChild(S);
        }
        const c = { L: 0.07, M: 0.15, Q: 0.25, H: 0.3 };
        class u {
          constructor({ svg: E, type: S, window: M }) {
            this._svg = E, this._type = S, this._window = M;
          }
          draw(E, S, M, D) {
            let N;
            switch (this._type) {
              case "dots":
                N = this._drawDot;
                break;
              case "classy":
                N = this._drawClassy;
                break;
              case "classy-rounded":
                N = this._drawClassyRounded;
                break;
              case "rounded":
                N = this._drawRounded;
                break;
              case "extra-rounded":
                N = this._drawExtraRounded;
                break;
              default:
                N = this._drawSquare;
            }
            N.call(this, { x: E, y: S, size: M, getNeighbor: D });
          }
          _rotateFigure({ x: E, y: S, size: M, rotation: D = 0, draw: N }) {
            var z;
            const Y = E + M / 2, H = S + M / 2;
            N(), (z = this._element) === null || z === void 0 || z.setAttribute("transform", `rotate(${180 * D / Math.PI},${Y},${H})`);
          }
          _basicDot(E) {
            const { size: S, x: M, y: D } = E;
            this._rotateFigure(Object.assign(Object.assign({}, E), { draw: () => {
              this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "circle"), this._element.setAttribute("cx", String(M + S / 2)), this._element.setAttribute("cy", String(D + S / 2)), this._element.setAttribute("r", String(S / 2));
            } }));
          }
          _basicSquare(E) {
            const { size: S, x: M, y: D } = E;
            this._rotateFigure(Object.assign(Object.assign({}, E), { draw: () => {
              this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "rect"), this._element.setAttribute("x", String(M)), this._element.setAttribute("y", String(D)), this._element.setAttribute("width", String(S)), this._element.setAttribute("height", String(S));
            } }));
          }
          _basicSideRounded(E) {
            const { size: S, x: M, y: D } = E;
            this._rotateFigure(Object.assign(Object.assign({}, E), { draw: () => {
              this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "path"), this._element.setAttribute("d", `M ${M} ${D}v ${S}h ` + S / 2 + `a ${S / 2} ${S / 2}, 0, 0, 0, 0 ${-S}`);
            } }));
          }
          _basicCornerRounded(E) {
            const { size: S, x: M, y: D } = E;
            this._rotateFigure(Object.assign(Object.assign({}, E), { draw: () => {
              this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "path"), this._element.setAttribute("d", `M ${M} ${D}v ${S}h ${S}v ` + -S / 2 + `a ${S / 2} ${S / 2}, 0, 0, 0, ${-S / 2} ${-S / 2}`);
            } }));
          }
          _basicCornerExtraRounded(E) {
            const { size: S, x: M, y: D } = E;
            this._rotateFigure(Object.assign(Object.assign({}, E), { draw: () => {
              this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "path"), this._element.setAttribute("d", `M ${M} ${D}v ${S}h ${S}a ${S} ${S}, 0, 0, 0, ${-S} ${-S}`);
            } }));
          }
          _basicCornersRounded(E) {
            const { size: S, x: M, y: D } = E;
            this._rotateFigure(Object.assign(Object.assign({}, E), { draw: () => {
              this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "path"), this._element.setAttribute("d", `M ${M} ${D}v ` + S / 2 + `a ${S / 2} ${S / 2}, 0, 0, 0, ${S / 2} ${S / 2}h ` + S / 2 + "v " + -S / 2 + `a ${S / 2} ${S / 2}, 0, 0, 0, ${-S / 2} ${-S / 2}`);
            } }));
          }
          _drawDot({ x: E, y: S, size: M }) {
            this._basicDot({ x: E, y: S, size: M, rotation: 0 });
          }
          _drawSquare({ x: E, y: S, size: M }) {
            this._basicSquare({ x: E, y: S, size: M, rotation: 0 });
          }
          _drawRounded({ x: E, y: S, size: M, getNeighbor: D }) {
            const N = D ? +D(-1, 0) : 0, z = D ? +D(1, 0) : 0, Y = D ? +D(0, -1) : 0, H = D ? +D(0, 1) : 0, X = N + z + Y + H;
            if (X !== 0) if (X > 2 || N && z || Y && H) this._basicSquare({ x: E, y: S, size: M, rotation: 0 });
            else {
              if (X === 2) {
                let Q = 0;
                return N && Y ? Q = Math.PI / 2 : Y && z ? Q = Math.PI : z && H && (Q = -Math.PI / 2), void this._basicCornerRounded({ x: E, y: S, size: M, rotation: Q });
              }
              if (X === 1) {
                let Q = 0;
                return Y ? Q = Math.PI / 2 : z ? Q = Math.PI : H && (Q = -Math.PI / 2), void this._basicSideRounded({ x: E, y: S, size: M, rotation: Q });
              }
            }
            else this._basicDot({ x: E, y: S, size: M, rotation: 0 });
          }
          _drawExtraRounded({ x: E, y: S, size: M, getNeighbor: D }) {
            const N = D ? +D(-1, 0) : 0, z = D ? +D(1, 0) : 0, Y = D ? +D(0, -1) : 0, H = D ? +D(0, 1) : 0, X = N + z + Y + H;
            if (X !== 0) if (X > 2 || N && z || Y && H) this._basicSquare({ x: E, y: S, size: M, rotation: 0 });
            else {
              if (X === 2) {
                let Q = 0;
                return N && Y ? Q = Math.PI / 2 : Y && z ? Q = Math.PI : z && H && (Q = -Math.PI / 2), void this._basicCornerExtraRounded({ x: E, y: S, size: M, rotation: Q });
              }
              if (X === 1) {
                let Q = 0;
                return Y ? Q = Math.PI / 2 : z ? Q = Math.PI : H && (Q = -Math.PI / 2), void this._basicSideRounded({ x: E, y: S, size: M, rotation: Q });
              }
            }
            else this._basicDot({ x: E, y: S, size: M, rotation: 0 });
          }
          _drawClassy({ x: E, y: S, size: M, getNeighbor: D }) {
            const N = D ? +D(-1, 0) : 0, z = D ? +D(1, 0) : 0, Y = D ? +D(0, -1) : 0, H = D ? +D(0, 1) : 0;
            N + z + Y + H !== 0 ? N || Y ? z || H ? this._basicSquare({ x: E, y: S, size: M, rotation: 0 }) : this._basicCornerRounded({ x: E, y: S, size: M, rotation: Math.PI / 2 }) : this._basicCornerRounded({ x: E, y: S, size: M, rotation: -Math.PI / 2 }) : this._basicCornersRounded({ x: E, y: S, size: M, rotation: Math.PI / 2 });
          }
          _drawClassyRounded({ x: E, y: S, size: M, getNeighbor: D }) {
            const N = D ? +D(-1, 0) : 0, z = D ? +D(1, 0) : 0, Y = D ? +D(0, -1) : 0, H = D ? +D(0, 1) : 0;
            N + z + Y + H !== 0 ? N || Y ? z || H ? this._basicSquare({ x: E, y: S, size: M, rotation: 0 }) : this._basicCornerExtraRounded({ x: E, y: S, size: M, rotation: Math.PI / 2 }) : this._basicCornerExtraRounded({ x: E, y: S, size: M, rotation: -Math.PI / 2 }) : this._basicCornersRounded({ x: E, y: S, size: M, rotation: Math.PI / 2 });
          }
        }
        const d = { dot: "dot", square: "square", extraRounded: "extra-rounded" }, h = Object.values(d);
        class p {
          constructor({ svg: E, type: S, window: M }) {
            this._svg = E, this._type = S, this._window = M;
          }
          draw(E, S, M, D) {
            let N;
            switch (this._type) {
              case d.square:
                N = this._drawSquare;
                break;
              case d.extraRounded:
                N = this._drawExtraRounded;
                break;
              default:
                N = this._drawDot;
            }
            N.call(this, { x: E, y: S, size: M, rotation: D });
          }
          _rotateFigure({ x: E, y: S, size: M, rotation: D = 0, draw: N }) {
            var z;
            const Y = E + M / 2, H = S + M / 2;
            N(), (z = this._element) === null || z === void 0 || z.setAttribute("transform", `rotate(${180 * D / Math.PI},${Y},${H})`);
          }
          _basicDot(E) {
            const { size: S, x: M, y: D } = E, N = S / 7;
            this._rotateFigure(Object.assign(Object.assign({}, E), { draw: () => {
              this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "path"), this._element.setAttribute("clip-rule", "evenodd"), this._element.setAttribute("d", `M ${M + S / 2} ${D}a ${S / 2} ${S / 2} 0 1 0 0.1 0zm 0 ${N}a ${S / 2 - N} ${S / 2 - N} 0 1 1 -0.1 0Z`);
            } }));
          }
          _basicSquare(E) {
            const { size: S, x: M, y: D } = E, N = S / 7;
            this._rotateFigure(Object.assign(Object.assign({}, E), { draw: () => {
              this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "path"), this._element.setAttribute("clip-rule", "evenodd"), this._element.setAttribute("d", `M ${M} ${D}v ${S}h ${S}v ` + -S + `zM ${M + N} ${D + N}h ` + (S - 2 * N) + "v " + (S - 2 * N) + "h " + (2 * N - S) + "z");
            } }));
          }
          _basicExtraRounded(E) {
            const { size: S, x: M, y: D } = E, N = S / 7;
            this._rotateFigure(Object.assign(Object.assign({}, E), { draw: () => {
              this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "path"), this._element.setAttribute("clip-rule", "evenodd"), this._element.setAttribute("d", `M ${M} ${D + 2.5 * N}v ` + 2 * N + `a ${2.5 * N} ${2.5 * N}, 0, 0, 0, ${2.5 * N} ${2.5 * N}h ` + 2 * N + `a ${2.5 * N} ${2.5 * N}, 0, 0, 0, ${2.5 * N} ${2.5 * -N}v ` + -2 * N + `a ${2.5 * N} ${2.5 * N}, 0, 0, 0, ${2.5 * -N} ${2.5 * -N}h ` + -2 * N + `a ${2.5 * N} ${2.5 * N}, 0, 0, 0, ${2.5 * -N} ${2.5 * N}M ${M + 2.5 * N} ${D + N}h ` + 2 * N + `a ${1.5 * N} ${1.5 * N}, 0, 0, 1, ${1.5 * N} ${1.5 * N}v ` + 2 * N + `a ${1.5 * N} ${1.5 * N}, 0, 0, 1, ${1.5 * -N} ${1.5 * N}h ` + -2 * N + `a ${1.5 * N} ${1.5 * N}, 0, 0, 1, ${1.5 * -N} ${1.5 * -N}v ` + -2 * N + `a ${1.5 * N} ${1.5 * N}, 0, 0, 1, ${1.5 * N} ${1.5 * -N}`);
            } }));
          }
          _drawDot({ x: E, y: S, size: M, rotation: D }) {
            this._basicDot({ x: E, y: S, size: M, rotation: D });
          }
          _drawSquare({ x: E, y: S, size: M, rotation: D }) {
            this._basicSquare({ x: E, y: S, size: M, rotation: D });
          }
          _drawExtraRounded({ x: E, y: S, size: M, rotation: D }) {
            this._basicExtraRounded({ x: E, y: S, size: M, rotation: D });
          }
        }
        const g = { dot: "dot", square: "square" }, v = Object.values(g);
        class m {
          constructor({ svg: E, type: S, window: M }) {
            this._svg = E, this._type = S, this._window = M;
          }
          draw(E, S, M, D) {
            let N;
            N = this._type === g.square ? this._drawSquare : this._drawDot, N.call(this, { x: E, y: S, size: M, rotation: D });
          }
          _rotateFigure({ x: E, y: S, size: M, rotation: D = 0, draw: N }) {
            var z;
            const Y = E + M / 2, H = S + M / 2;
            N(), (z = this._element) === null || z === void 0 || z.setAttribute("transform", `rotate(${180 * D / Math.PI},${Y},${H})`);
          }
          _basicDot(E) {
            const { size: S, x: M, y: D } = E;
            this._rotateFigure(Object.assign(Object.assign({}, E), { draw: () => {
              this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "circle"), this._element.setAttribute("cx", String(M + S / 2)), this._element.setAttribute("cy", String(D + S / 2)), this._element.setAttribute("r", String(S / 2));
            } }));
          }
          _basicSquare(E) {
            const { size: S, x: M, y: D } = E;
            this._rotateFigure(Object.assign(Object.assign({}, E), { draw: () => {
              this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "rect"), this._element.setAttribute("x", String(M)), this._element.setAttribute("y", String(D)), this._element.setAttribute("width", String(S)), this._element.setAttribute("height", String(S));
            } }));
          }
          _drawDot({ x: E, y: S, size: M, rotation: D }) {
            this._basicDot({ x: E, y: S, size: M, rotation: D });
          }
          _drawSquare({ x: E, y: S, size: M, rotation: D }) {
            this._basicSquare({ x: E, y: S, size: M, rotation: D });
          }
        }
        const x = "circle", y = [[1, 1, 1, 1, 1, 1, 1], [1, 0, 0, 0, 0, 0, 1], [1, 0, 0, 0, 0, 0, 1], [1, 0, 0, 0, 0, 0, 1], [1, 0, 0, 0, 0, 0, 1], [1, 0, 0, 0, 0, 0, 1], [1, 1, 1, 1, 1, 1, 1]], b = [[0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0], [0, 0, 1, 1, 1, 0, 0], [0, 0, 1, 1, 1, 0, 0], [0, 0, 1, 1, 1, 0, 0], [0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0]];
        class w {
          constructor(E, S) {
            this._roundSize = (M) => this._options.dotsOptions.roundSize ? Math.floor(M) : M, this._window = S, this._element = this._window.document.createElementNS("http://www.w3.org/2000/svg", "svg"), this._element.setAttribute("width", String(E.width)), this._element.setAttribute("height", String(E.height)), this._element.setAttribute("xmlns:xlink", "http://www.w3.org/1999/xlink"), E.dotsOptions.roundSize || this._element.setAttribute("shape-rendering", "crispEdges"), this._element.setAttribute("viewBox", `0 0 ${E.width} ${E.height}`), this._defs = this._window.document.createElementNS("http://www.w3.org/2000/svg", "defs"), this._element.appendChild(this._defs), this._imageUri = E.image, this._instanceId = w.instanceCount++, this._options = E;
          }
          get width() {
            return this._options.width;
          }
          get height() {
            return this._options.height;
          }
          getElement() {
            return this._element;
          }
          async drawQR(E) {
            const S = E.getModuleCount(), M = Math.min(this._options.width, this._options.height) - 2 * this._options.margin, D = this._options.shape === x ? M / Math.sqrt(2) : M, N = this._roundSize(D / S);
            let z = { hideXDots: 0, hideYDots: 0, width: 0, height: 0 };
            if (this._qr = E, this._options.image) {
              if (await this.loadImage(), !this._image) return;
              const { imageOptions: Y, qrOptions: H } = this._options, X = Y.imageSize * c[H.errorCorrectionLevel], Q = Math.floor(X * S * S);
              z = function({ originalHeight: q, originalWidth: K, maxHiddenDots: ne, maxHiddenAxisDots: oe, dotSize: te }) {
                const G = { x: 0, y: 0 }, ee = { x: 0, y: 0 };
                if (q <= 0 || K <= 0 || ne <= 0 || te <= 0) return { height: 0, width: 0, hideYDots: 0, hideXDots: 0 };
                const U = q / K;
                return G.x = Math.floor(Math.sqrt(ne / U)), G.x <= 0 && (G.x = 1), oe && oe < G.x && (G.x = oe), G.x % 2 == 0 && G.x--, ee.x = G.x * te, G.y = 1 + 2 * Math.ceil((G.x * U - 1) / 2), ee.y = Math.round(ee.x * U), (G.y * G.x > ne || oe && oe < G.y) && (oe && oe < G.y ? (G.y = oe, G.y % 2 == 0 && G.x--) : G.y -= 2, ee.y = G.y * te, G.x = 1 + 2 * Math.ceil((G.y / U - 1) / 2), ee.x = Math.round(ee.y / U)), { height: ee.y, width: ee.x, hideYDots: G.y, hideXDots: G.x };
              }({ originalWidth: this._image.width, originalHeight: this._image.height, maxHiddenDots: Q, maxHiddenAxisDots: S - 14, dotSize: N });
            }
            this.drawBackground(), this.drawDots((Y, H) => {
              var X, Q, q, K, ne, oe;
              return !(this._options.imageOptions.hideBackgroundDots && Y >= (S - z.hideYDots) / 2 && Y < (S + z.hideYDots) / 2 && H >= (S - z.hideXDots) / 2 && H < (S + z.hideXDots) / 2 || !((X = y[Y]) === null || X === void 0) && X[H] || !((Q = y[Y - S + 7]) === null || Q === void 0) && Q[H] || !((q = y[Y]) === null || q === void 0) && q[H - S + 7] || !((K = b[Y]) === null || K === void 0) && K[H] || !((ne = b[Y - S + 7]) === null || ne === void 0) && ne[H] || !((oe = b[Y]) === null || oe === void 0) && oe[H - S + 7]);
            }), this.drawCorners(), this._options.image && await this.drawImage({ width: z.width, height: z.height, count: S, dotSize: N });
          }
          drawBackground() {
            var E, S, M;
            const D = this._element, N = this._options;
            if (D) {
              const z = (E = N.backgroundOptions) === null || E === void 0 ? void 0 : E.gradient, Y = (S = N.backgroundOptions) === null || S === void 0 ? void 0 : S.color;
              let H = N.height, X = N.width;
              if (z || Y) {
                const Q = this._window.document.createElementNS("http://www.w3.org/2000/svg", "rect");
                this._backgroundClipPath = this._window.document.createElementNS("http://www.w3.org/2000/svg", "clipPath"), this._backgroundClipPath.setAttribute("id", `clip-path-background-color-${this._instanceId}`), this._defs.appendChild(this._backgroundClipPath), !((M = N.backgroundOptions) === null || M === void 0) && M.round && (H = X = Math.min(N.width, N.height), Q.setAttribute("rx", String(H / 2 * N.backgroundOptions.round))), Q.setAttribute("x", String(this._roundSize((N.width - X) / 2))), Q.setAttribute("y", String(this._roundSize((N.height - H) / 2))), Q.setAttribute("width", String(X)), Q.setAttribute("height", String(H)), this._backgroundClipPath.appendChild(Q), this._createColor({ options: z, color: Y, additionalRotation: 0, x: 0, y: 0, height: N.height, width: N.width, name: `background-color-${this._instanceId}` });
              }
            }
          }
          drawDots(E) {
            var S, M;
            if (!this._qr) throw "QR code is not defined";
            const D = this._options, N = this._qr.getModuleCount();
            if (N > D.width || N > D.height) throw "The canvas is too small.";
            const z = Math.min(D.width, D.height) - 2 * D.margin, Y = D.shape === x ? z / Math.sqrt(2) : z, H = this._roundSize(Y / N), X = this._roundSize((D.width - N * H) / 2), Q = this._roundSize((D.height - N * H) / 2), q = new u({ svg: this._element, type: D.dotsOptions.type, window: this._window });
            this._dotsClipPath = this._window.document.createElementNS("http://www.w3.org/2000/svg", "clipPath"), this._dotsClipPath.setAttribute("id", `clip-path-dot-color-${this._instanceId}`), this._defs.appendChild(this._dotsClipPath), this._createColor({ options: (S = D.dotsOptions) === null || S === void 0 ? void 0 : S.gradient, color: D.dotsOptions.color, additionalRotation: 0, x: 0, y: 0, height: D.height, width: D.width, name: `dot-color-${this._instanceId}` });
            for (let K = 0; K < N; K++) for (let ne = 0; ne < N; ne++) E && !E(K, ne) || !((M = this._qr) === null || M === void 0) && M.isDark(K, ne) && (q.draw(X + ne * H, Q + K * H, H, (oe, te) => !(ne + oe < 0 || K + te < 0 || ne + oe >= N || K + te >= N) && !(E && !E(K + te, ne + oe)) && !!this._qr && this._qr.isDark(K + te, ne + oe)), q._element && this._dotsClipPath && this._dotsClipPath.appendChild(q._element));
            if (D.shape === x) {
              const K = this._roundSize((z / H - N) / 2), ne = N + 2 * K, oe = X - K * H, te = Q - K * H, G = [], ee = this._roundSize(ne / 2);
              for (let U = 0; U < ne; U++) {
                G[U] = [];
                for (let J = 0; J < ne; J++) U >= K - 1 && U <= ne - K && J >= K - 1 && J <= ne - K || Math.sqrt((U - ee) * (U - ee) + (J - ee) * (J - ee)) > ee ? G[U][J] = 0 : G[U][J] = this._qr.isDark(J - 2 * K < 0 ? J : J >= N ? J - 2 * K : J - K, U - 2 * K < 0 ? U : U >= N ? U - 2 * K : U - K) ? 1 : 0;
              }
              for (let U = 0; U < ne; U++) for (let J = 0; J < ne; J++) G[U][J] && (q.draw(oe + J * H, te + U * H, H, (re, se) => {
                var de;
                return !!(!((de = G[U + se]) === null || de === void 0) && de[J + re]);
              }), q._element && this._dotsClipPath && this._dotsClipPath.appendChild(q._element));
            }
          }
          drawCorners() {
            if (!this._qr) throw "QR code is not defined";
            const E = this._element, S = this._options;
            if (!E) throw "Element code is not defined";
            const M = this._qr.getModuleCount(), D = Math.min(S.width, S.height) - 2 * S.margin, N = S.shape === x ? D / Math.sqrt(2) : D, z = this._roundSize(N / M), Y = 7 * z, H = 3 * z, X = this._roundSize((S.width - M * z) / 2), Q = this._roundSize((S.height - M * z) / 2);
            [[0, 0, 0], [1, 0, Math.PI / 2], [0, 1, -Math.PI / 2]].forEach(([q, K, ne]) => {
              var oe, te, G, ee, U, J, re, se, de, ce, pe, we, Ne, Le;
              const Re = X + q * z * (M - 7), Se = Q + K * z * (M - 7);
              let je = this._dotsClipPath, ge = this._dotsClipPath;
              if ((!((oe = S.cornersSquareOptions) === null || oe === void 0) && oe.gradient || !((te = S.cornersSquareOptions) === null || te === void 0) && te.color) && (je = this._window.document.createElementNS("http://www.w3.org/2000/svg", "clipPath"), je.setAttribute("id", `clip-path-corners-square-color-${q}-${K}-${this._instanceId}`), this._defs.appendChild(je), this._cornersSquareClipPath = this._cornersDotClipPath = ge = je, this._createColor({ options: (G = S.cornersSquareOptions) === null || G === void 0 ? void 0 : G.gradient, color: (ee = S.cornersSquareOptions) === null || ee === void 0 ? void 0 : ee.color, additionalRotation: ne, x: Re, y: Se, height: Y, width: Y, name: `corners-square-color-${q}-${K}-${this._instanceId}` })), ((U = S.cornersSquareOptions) === null || U === void 0 ? void 0 : U.type) && h.includes(S.cornersSquareOptions.type)) {
                const Ve = new p({ svg: this._element, type: S.cornersSquareOptions.type, window: this._window });
                Ve.draw(Re, Se, Y, ne), Ve._element && je && je.appendChild(Ve._element);
              } else {
                const Ve = new u({ svg: this._element, type: ((J = S.cornersSquareOptions) === null || J === void 0 ? void 0 : J.type) || S.dotsOptions.type, window: this._window });
                for (let Xe = 0; Xe < y.length; Xe++) for (let ye = 0; ye < y[Xe].length; ye++) !((re = y[Xe]) === null || re === void 0) && re[ye] && (Ve.draw(Re + ye * z, Se + Xe * z, z, (at, st) => {
                  var ft;
                  return !!(!((ft = y[Xe + st]) === null || ft === void 0) && ft[ye + at]);
                }), Ve._element && je && je.appendChild(Ve._element));
              }
              if ((!((se = S.cornersDotOptions) === null || se === void 0) && se.gradient || !((de = S.cornersDotOptions) === null || de === void 0) && de.color) && (ge = this._window.document.createElementNS("http://www.w3.org/2000/svg", "clipPath"), ge.setAttribute("id", `clip-path-corners-dot-color-${q}-${K}-${this._instanceId}`), this._defs.appendChild(ge), this._cornersDotClipPath = ge, this._createColor({ options: (ce = S.cornersDotOptions) === null || ce === void 0 ? void 0 : ce.gradient, color: (pe = S.cornersDotOptions) === null || pe === void 0 ? void 0 : pe.color, additionalRotation: ne, x: Re + 2 * z, y: Se + 2 * z, height: H, width: H, name: `corners-dot-color-${q}-${K}-${this._instanceId}` })), ((we = S.cornersDotOptions) === null || we === void 0 ? void 0 : we.type) && v.includes(S.cornersDotOptions.type)) {
                const Ve = new m({ svg: this._element, type: S.cornersDotOptions.type, window: this._window });
                Ve.draw(Re + 2 * z, Se + 2 * z, H, ne), Ve._element && ge && ge.appendChild(Ve._element);
              } else {
                const Ve = new u({ svg: this._element, type: ((Ne = S.cornersDotOptions) === null || Ne === void 0 ? void 0 : Ne.type) || S.dotsOptions.type, window: this._window });
                for (let Xe = 0; Xe < b.length; Xe++) for (let ye = 0; ye < b[Xe].length; ye++) !((Le = b[Xe]) === null || Le === void 0) && Le[ye] && (Ve.draw(Re + ye * z, Se + Xe * z, z, (at, st) => {
                  var ft;
                  return !!(!((ft = b[Xe + st]) === null || ft === void 0) && ft[ye + at]);
                }), Ve._element && ge && ge.appendChild(Ve._element));
              }
            });
          }
          loadImage() {
            return new Promise((E, S) => {
              var M;
              const D = this._options;
              if (!D.image) return S("Image is not defined");
              if (!((M = D.nodeCanvas) === null || M === void 0) && M.loadImage) D.nodeCanvas.loadImage(D.image).then((N) => {
                var z, Y;
                if (this._image = N, this._options.imageOptions.saveAsBlob) {
                  const H = (z = D.nodeCanvas) === null || z === void 0 ? void 0 : z.createCanvas(this._image.width, this._image.height);
                  (Y = H?.getContext("2d")) === null || Y === void 0 || Y.drawImage(N, 0, 0), this._imageUri = H?.toDataURL();
                }
                E();
              }).catch(S);
              else {
                const N = new this._window.Image();
                typeof D.imageOptions.crossOrigin == "string" && (N.crossOrigin = D.imageOptions.crossOrigin), this._image = N, N.onload = async () => {
                  this._options.imageOptions.saveAsBlob && (this._imageUri = await async function(z, Y) {
                    return new Promise((H) => {
                      const X = new Y.XMLHttpRequest();
                      X.onload = function() {
                        const Q = new Y.FileReader();
                        Q.onloadend = function() {
                          H(Q.result);
                        }, Q.readAsDataURL(X.response);
                      }, X.open("GET", z), X.responseType = "blob", X.send();
                    });
                  }(D.image || "", this._window)), E();
                }, N.src = D.image;
              }
            });
          }
          async drawImage({ width: E, height: S, count: M, dotSize: D }) {
            const N = this._options, z = this._roundSize((N.width - M * D) / 2), Y = this._roundSize((N.height - M * D) / 2), H = z + this._roundSize(N.imageOptions.margin + (M * D - E) / 2), X = Y + this._roundSize(N.imageOptions.margin + (M * D - S) / 2), Q = E - 2 * N.imageOptions.margin, q = S - 2 * N.imageOptions.margin, K = this._window.document.createElementNS("http://www.w3.org/2000/svg", "image");
            K.setAttribute("href", this._imageUri || ""), K.setAttribute("xlink:href", this._imageUri || ""), K.setAttribute("x", String(H)), K.setAttribute("y", String(X)), K.setAttribute("width", `${Q}px`), K.setAttribute("height", `${q}px`), this._element.appendChild(K);
          }
          _createColor({ options: E, color: S, additionalRotation: M, x: D, y: N, height: z, width: Y, name: H }) {
            const X = Y > z ? Y : z, Q = this._window.document.createElementNS("http://www.w3.org/2000/svg", "rect");
            if (Q.setAttribute("x", String(D)), Q.setAttribute("y", String(N)), Q.setAttribute("height", String(z)), Q.setAttribute("width", String(Y)), Q.setAttribute("clip-path", `url('#clip-path-${H}')`), E) {
              let q;
              if (E.type === "radial") q = this._window.document.createElementNS("http://www.w3.org/2000/svg", "radialGradient"), q.setAttribute("id", H), q.setAttribute("gradientUnits", "userSpaceOnUse"), q.setAttribute("fx", String(D + Y / 2)), q.setAttribute("fy", String(N + z / 2)), q.setAttribute("cx", String(D + Y / 2)), q.setAttribute("cy", String(N + z / 2)), q.setAttribute("r", String(X / 2));
              else {
                const K = ((E.rotation || 0) + M) % (2 * Math.PI), ne = (K + 2 * Math.PI) % (2 * Math.PI);
                let oe = D + Y / 2, te = N + z / 2, G = D + Y / 2, ee = N + z / 2;
                ne >= 0 && ne <= 0.25 * Math.PI || ne > 1.75 * Math.PI && ne <= 2 * Math.PI ? (oe -= Y / 2, te -= z / 2 * Math.tan(K), G += Y / 2, ee += z / 2 * Math.tan(K)) : ne > 0.25 * Math.PI && ne <= 0.75 * Math.PI ? (te -= z / 2, oe -= Y / 2 / Math.tan(K), ee += z / 2, G += Y / 2 / Math.tan(K)) : ne > 0.75 * Math.PI && ne <= 1.25 * Math.PI ? (oe += Y / 2, te += z / 2 * Math.tan(K), G -= Y / 2, ee -= z / 2 * Math.tan(K)) : ne > 1.25 * Math.PI && ne <= 1.75 * Math.PI && (te += z / 2, oe += Y / 2 / Math.tan(K), ee -= z / 2, G -= Y / 2 / Math.tan(K)), q = this._window.document.createElementNS("http://www.w3.org/2000/svg", "linearGradient"), q.setAttribute("id", H), q.setAttribute("gradientUnits", "userSpaceOnUse"), q.setAttribute("x1", String(Math.round(oe))), q.setAttribute("y1", String(Math.round(te))), q.setAttribute("x2", String(Math.round(G))), q.setAttribute("y2", String(Math.round(ee)));
              }
              E.colorStops.forEach(({ offset: K, color: ne }) => {
                const oe = this._window.document.createElementNS("http://www.w3.org/2000/svg", "stop");
                oe.setAttribute("offset", 100 * K + "%"), oe.setAttribute("stop-color", ne), q.appendChild(oe);
              }), Q.setAttribute("fill", `url('#${H}')`), this._defs.appendChild(q);
            } else S && Q.setAttribute("fill", S);
            this._element.appendChild(Q);
          }
        }
        w.instanceCount = 0;
        const _ = w, R = "canvas", T = {};
        for (let I = 0; I <= 40; I++) T[I] = I;
        const k = { type: R, shape: "square", width: 300, height: 300, data: "", margin: 0, qrOptions: { typeNumber: T[0], mode: void 0, errorCorrectionLevel: "Q" }, imageOptions: { saveAsBlob: !0, hideBackgroundDots: !0, imageSize: 0.4, crossOrigin: void 0, margin: 0 }, dotsOptions: { type: "square", color: "#000", roundSize: !0 }, backgroundOptions: { round: 0, color: "#fff" } };
        function j(I) {
          const E = Object.assign({}, I);
          if (!E.colorStops || !E.colorStops.length) throw "Field 'colorStops' is required in gradient";
          return E.rotation ? E.rotation = Number(E.rotation) : E.rotation = 0, E.colorStops = E.colorStops.map((S) => Object.assign(Object.assign({}, S), { offset: Number(S.offset) })), E;
        }
        function A(I) {
          const E = Object.assign({}, I);
          return E.width = Number(E.width), E.height = Number(E.height), E.margin = Number(E.margin), E.imageOptions = Object.assign(Object.assign({}, E.imageOptions), { hideBackgroundDots: !!E.imageOptions.hideBackgroundDots, imageSize: Number(E.imageOptions.imageSize), margin: Number(E.imageOptions.margin) }), E.margin > Math.min(E.width, E.height) && (E.margin = Math.min(E.width, E.height)), E.dotsOptions = Object.assign({}, E.dotsOptions), E.dotsOptions.gradient && (E.dotsOptions.gradient = j(E.dotsOptions.gradient)), E.cornersSquareOptions && (E.cornersSquareOptions = Object.assign({}, E.cornersSquareOptions), E.cornersSquareOptions.gradient && (E.cornersSquareOptions.gradient = j(E.cornersSquareOptions.gradient))), E.cornersDotOptions && (E.cornersDotOptions = Object.assign({}, E.cornersDotOptions), E.cornersDotOptions.gradient && (E.cornersDotOptions.gradient = j(E.cornersDotOptions.gradient))), E.backgroundOptions && (E.backgroundOptions = Object.assign({}, E.backgroundOptions), E.backgroundOptions.gradient && (E.backgroundOptions.gradient = j(E.backgroundOptions.gradient))), E;
        }
        var $ = o(873), F = o.n($);
        function L(I) {
          if (!I) throw new Error("Extension must be defined");
          I[0] === "." && (I = I.substring(1));
          const E = { bmp: "image/bmp", gif: "image/gif", ico: "image/vnd.microsoft.icon", jpeg: "image/jpeg", jpg: "image/jpeg", png: "image/png", svg: "image/svg+xml", tif: "image/tiff", tiff: "image/tiff", webp: "image/webp", pdf: "application/pdf" }[I.toLowerCase()];
          if (!E) throw new Error(`Extension "${I}" is not supported`);
          return E;
        }
        class P {
          constructor(E) {
            E?.jsdom ? this._window = new E.jsdom("", { resources: "usable" }).window : this._window = window, this._options = E ? A(s(k, E)) : k, this.update();
          }
          static _clearContainer(E) {
            E && (E.innerHTML = "");
          }
          _setupSvg() {
            if (!this._qr) return;
            const E = new _(this._options, this._window);
            this._svg = E.getElement(), this._svgDrawingPromise = E.drawQR(this._qr).then(() => {
              var S;
              this._svg && ((S = this._extension) === null || S === void 0 || S.call(this, E.getElement(), this._options));
            });
          }
          _setupCanvas() {
            var E, S;
            this._qr && (!((E = this._options.nodeCanvas) === null || E === void 0) && E.createCanvas ? (this._nodeCanvas = this._options.nodeCanvas.createCanvas(this._options.width, this._options.height), this._nodeCanvas.width = this._options.width, this._nodeCanvas.height = this._options.height) : (this._domCanvas = document.createElement("canvas"), this._domCanvas.width = this._options.width, this._domCanvas.height = this._options.height), this._setupSvg(), this._canvasDrawingPromise = (S = this._svgDrawingPromise) === null || S === void 0 ? void 0 : S.then(() => {
              var M;
              if (!this._svg) return;
              const D = this._svg, N = new this._window.XMLSerializer().serializeToString(D), z = btoa(N), Y = `data:${L("svg")};base64,${z}`;
              if (!((M = this._options.nodeCanvas) === null || M === void 0) && M.loadImage) return this._options.nodeCanvas.loadImage(Y).then((H) => {
                var X, Q;
                H.width = this._options.width, H.height = this._options.height, (Q = (X = this._nodeCanvas) === null || X === void 0 ? void 0 : X.getContext("2d")) === null || Q === void 0 || Q.drawImage(H, 0, 0);
              });
              {
                const H = new this._window.Image();
                return new Promise((X) => {
                  H.onload = () => {
                    var Q, q;
                    (q = (Q = this._domCanvas) === null || Q === void 0 ? void 0 : Q.getContext("2d")) === null || q === void 0 || q.drawImage(H, 0, 0), X();
                  }, H.src = Y;
                });
              }
            }));
          }
          async _getElement(E = "png") {
            if (!this._qr) throw "QR code is empty";
            return E.toLowerCase() === "svg" ? (this._svg && this._svgDrawingPromise || this._setupSvg(), await this._svgDrawingPromise, this._svg) : ((this._domCanvas || this._nodeCanvas) && this._canvasDrawingPromise || this._setupCanvas(), await this._canvasDrawingPromise, this._domCanvas || this._nodeCanvas);
          }
          update(E) {
            P._clearContainer(this._container), this._options = E ? A(s(this._options, E)) : this._options, this._options.data && (this._qr = F()(this._options.qrOptions.typeNumber, this._options.qrOptions.errorCorrectionLevel), this._qr.addData(this._options.data, this._options.qrOptions.mode || function(S) {
              switch (!0) {
                case /^[0-9]*$/.test(S):
                  return "Numeric";
                case /^[0-9A-Z $%*+\-./:]*$/.test(S):
                  return "Alphanumeric";
                default:
                  return "Byte";
              }
            }(this._options.data)), this._qr.make(), this._options.type === R ? this._setupCanvas() : this._setupSvg(), this.append(this._container));
          }
          append(E) {
            if (E) {
              if (typeof E.appendChild != "function") throw "Container should be a single DOM node";
              this._options.type === R ? this._domCanvas && E.appendChild(this._domCanvas) : this._svg && E.appendChild(this._svg), this._container = E;
            }
          }
          applyExtension(E) {
            if (!E) throw "Extension function should be defined.";
            this._extension = E, this.update();
          }
          deleteExtension() {
            this._extension = void 0, this.update();
          }
          async getRawData(E = "png") {
            if (!this._qr) throw "QR code is empty";
            const S = await this._getElement(E), M = L(E);
            if (!S) return null;
            if (E.toLowerCase() === "svg") {
              const D = `<?xml version="1.0" standalone="no"?>\r
${new this._window.XMLSerializer().serializeToString(S)}`;
              return typeof Blob > "u" || this._options.jsdom ? Buffer.from(D) : new Blob([D], { type: M });
            }
            return new Promise((D) => {
              const N = S;
              if ("toBuffer" in N) if (M === "image/png") D(N.toBuffer(M));
              else if (M === "image/jpeg") D(N.toBuffer(M));
              else {
                if (M !== "application/pdf") throw Error("Unsupported extension");
                D(N.toBuffer(M));
              }
              else "toBlob" in N && N.toBlob(D, M, 1);
            });
          }
          async download(E) {
            if (!this._qr) throw "QR code is empty";
            if (typeof Blob > "u") throw "Cannot download in Node.js, call getRawData instead.";
            let S = "png", M = "qr";
            typeof E == "string" ? (S = E, console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")) : typeof E == "object" && E !== null && (E.name && (M = E.name), E.extension && (S = E.extension));
            const D = await this._getElement(S);
            if (D) if (S.toLowerCase() === "svg") {
              let N = new XMLSerializer().serializeToString(D);
              N = `<?xml version="1.0" standalone="no"?>\r
` + N, l(`data:${L(S)};charset=utf-8,${encodeURIComponent(N)}`, `${M}.svg`);
            } else l(D.toDataURL(L(S)), `${M}.${S}`);
          }
        }
        const O = P;
      })(), i.default;
    })());
  }(qs)), qs.exports;
}
var J5 = Q5();
const Vw = /* @__PURE__ */ Td(J5), eF = (e) => {
  const [t, r] = Ce("https://veltix.app");
  return ze(() => {
    new Vw({
      data: e.text
    }).getRawData().then((o) => {
      if (o) {
        const i = new FileReader();
        i.readAsDataURL(o), i.onloadend = () => {
          r(i.result);
        };
      }
    });
  }, [e.text]), /* @__PURE__ */ f.jsx("div", { children: t ? /* @__PURE__ */ f.jsx("img", { src: t, alt: "QR Code" }) : /* @__PURE__ */ f.jsx("div", { children: "Loading..." }) });
}, tF = ({ context: e }) => {
  const [t, r] = Ce(""), n = (i) => {
    e.editor.add(
      {
        type: "qrcode",
        props: {
          text: t,
          src: i
        }
      },
      {
        width: 260,
        height: 260
      }
    );
  }, o = async () => {
    const a = await new Vw({
      data: t
    }).getRawData();
    if (a) {
      const s = new FileReader();
      s.readAsDataURL(a), s.onloadend = () => {
        n(s.result);
      };
    }
  };
  return /* @__PURE__ */ f.jsxs("div", { className: "p-4", children: [
    /* @__PURE__ */ f.jsx("h1", { className: "mb-4 font-extrabold text-gray-900 dark:text-white", children: /* @__PURE__ */ f.jsx("span", { className: "bg-gradient-to-r from-cyan-200 to-emerald-600 bg-clip-text text-transparent", children: "QR Code" }) }),
    /* @__PURE__ */ f.jsx("div", { className: "mb-4", children: /* @__PURE__ */ f.jsx(
      "textarea",
      {
        rows: 4,
        className: "block w-full rounded-lg border border-gray-300 bg-gray-50 p-2 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",
        onChange: (i) => r(i.target.value),
        value: t,
        placeholder: "Enter text to generate QR code"
      }
    ) }),
    /* @__PURE__ */ f.jsx(
      "button",
      {
        onClick: o,
        className: "mb-2 me-2 w-full rounded-lg bg-[#2557D6] px-5 py-2 text-center text-sm font-medium text-white hover:bg-[#2557D6]/90 focus:outline-none focus:ring-4 focus:ring-[#2557D6]/50 dark:focus:ring-[#2557D6]/50",
        disabled: !t,
        children: "Generate"
      }
    )
  ] });
}, rF = {
  id: "qrcode",
  title: "QR Code",
  icon: Pr,
  viewContainer: tF,
  activate: () => {
  },
  components: [
    {
      type: "qrcode",
      title: "QR Code",
      description: "QR Code",
      defaultProps: {},
      icon: Pr,
      main: eF
    }
  ]
};
function cg() {
  return /* @__PURE__ */ f.jsx("div", { children: "Hello" });
}
const nF = Mr()(
  jd(
    (e, t) => ({
      extensions: [rF],
      enabled: {},
      register: (r) => {
        e((n) => ({
          extensions: [...n.extensions, r]
        }));
      },
      unregister: (r) => {
        e((n) => {
          const o = n.extensions.filter((a) => a.id !== r), i = { ...n.enabled };
          return delete i[r], { extensions: o, enabled: i };
        });
      },
      getExtension: (r) => t().extensions.find((n) => n.id === r),
      enable: (r) => {
        const n = t().extensions.find((o) => o.id === r);
        n && n.activate && n.activate(), e((o) => ({
          enabled: { ...o.enabled, [r]: !0 }
        })), n && (or.getState().registerExtensionViewContainer({
          id: n.id,
          title: n.title,
          icon: n.icon,
          viewContainer: n.viewContainer || cg
        }), n.components && n.components.forEach((o) => {
          br.getState().register({
            type: o.type,
            title: o.title,
            description: o.description,
            icon: o.icon,
            main: o.main,
            hidden: !0
          });
        }), Bt.getState().setActivePanel(n.id));
      },
      disable: (r) => {
        const n = t().extensions.find((o) => o.id === r);
        n && n.deactivate && n.deactivate(), e((o) => ({
          enabled: { ...o.enabled, [r]: !1 }
        })), or.getState().unregisterViewContainer(r), n?.components && n.components.forEach((o) => {
          br.getState().unregister(o.type);
        });
      },
      isEnabled: (r) => !!t().enabled[r],
      getEnabled: () => t().extensions.filter((r) => t().enabled[r.id]),
      rehydration: () => {
        const r = t();
        r.extensions.filter((o) => r.enabled[o.id]).forEach((o) => {
          o.activate && o.activate(), or.getState().registerExtensionViewContainer({
            id: o.id,
            title: o.title,
            icon: o.icon,
            viewContainer: o.viewContainer || cg
          }), o.components && o.components.forEach((i) => {
            br.getState().register({
              type: i.type,
              title: i.title,
              description: i.description,
              icon: i.icon,
              // @ts-ignore
              main: i.main
            });
          });
        });
      }
    }),
    {
      name: "veltix-extensions",
      storage: El(() => localStorage),
      partialize: (e) => ({ enabled: e.enabled }),
      onRehydrateStorage: () => (e) => {
        e && e.rehydration();
      }
    }
  )
), oF = ({ icon: e }) => {
  let t = null;
  if (typeof e == "string") {
    const r = e.startsWith("data:") || e.startsWith("http");
    t = /* @__PURE__ */ f.jsx("span", { className: "w-8 h-8 text-lg inline-flex items-center justify-center", children: r ? /* @__PURE__ */ f.jsx("img", { src: e, alt: "Chart icon", className: "w-10 h-10 object-contain" }) : e });
  } else {
    const r = e;
    t = /* @__PURE__ */ f.jsx("span", { className: "w-10 h-10 text-lg inline-flex items-center justify-center", children: /* @__PURE__ */ f.jsx(r, { className: "w-8 h-8" }) });
  }
  return /* @__PURE__ */ f.jsx("div", { className: "flex justify-center items-center", children: t });
}, ug = (e) => {
  const { icon: t, title: r, onClick: n, removable: o } = e;
  return /* @__PURE__ */ f.jsxs(
    "div",
    {
      className: "flex flex-col items-center justify-center p-4 border rounded w-[90px] h-[90px] text-center text-sm flex-shrink-0 hover:bg-gray-50 hover:border-gray-300 hover:shadow-md transition-all duration-200 cursor-pointer",
      onClick: () => n?.(e),
      children: [
        /* @__PURE__ */ f.jsx("div", { className: "flex items-center justify-center w-8 h-8 mb-2", children: t ? /* @__PURE__ */ f.jsx(oF, { icon: t }) : /* @__PURE__ */ f.jsx("div", { className: "w-8 h-8 bg-gray-200 rounded flex items-center justify-center", children: /* @__PURE__ */ f.jsx("span", { className: "text-sm text-gray-500" }) }) }),
        /* @__PURE__ */ f.jsx("span", { className: "text-xs leading-tight", children: r }),
        o && /* @__PURE__ */ f.jsx("span", { className: "mt-1 text-[10px] text-red-400", children: "Removable" })
      ]
    }
  );
};
function iF({
  title: e,
  description: t,
  extensions: r,
  layout: n = "grid",
  scrollable: o = !1,
  onClick: i
}) {
  const a = bt(null), [s, l] = Ce(!1), [c, u] = Ce(!1), d = () => {
    if (n === "row" && a.current) {
      const p = a.current;
      l(p.scrollLeft > 0), u(p.scrollLeft + p.clientWidth < p.scrollWidth - 1);
    }
  };
  ze(() => {
    if (n === "row" && a.current) {
      const p = a.current;
      return d(), p.addEventListener("scroll", d), window.addEventListener("resize", d), () => {
        p.removeEventListener("scroll", d), window.removeEventListener("resize", d);
      };
    }
  }, [r, n]), ze(() => {
    n === "row" && a.current && d();
  }, [r, n]);
  const h = (p) => {
    a.current && a.current.scrollBy({ left: p === "right" ? 200 : -200, behavior: "smooth" });
  };
  return /* @__PURE__ */ f.jsxs("section", { className: "mb-8", children: [
    /* @__PURE__ */ f.jsx("h2", { className: "text-xl font-semibold mb-2", children: e }),
    t && /* @__PURE__ */ f.jsx("p", { className: "text-gray-600 mb-4", children: t }),
    /* @__PURE__ */ f.jsx("div", { className: n === "grid" ? "grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4" : "relative", children: n === "row" ? /* @__PURE__ */ f.jsxs(f.Fragment, { children: [
      o && s && /* @__PURE__ */ f.jsx(
        "button",
        {
          type: "button",
          className: "absolute left-0 top-0 h-full flex items-center bg-gradient-to-r from-white pl-2 pointer-events-auto z-10",
          onClick: () => h("left"),
          tabIndex: -1,
          "aria-label": "Scroll left",
          children: /* @__PURE__ */ f.jsx(hg, { className: "h-6 w-6 text-gray-500" })
        }
      ),
      /* @__PURE__ */ f.jsx("div", { ref: a, className: "flex overflow-x-auto scrollbar-hide space-x-4 pb-2", children: r.map((p, g) => /* @__PURE__ */ f.jsx(ug, { ...p, onClick: i }, g)) }),
      o && c && /* @__PURE__ */ f.jsx(
        "button",
        {
          type: "button",
          className: "absolute right-0 top-0 h-full flex items-center bg-gradient-to-l from-white pr-2 pointer-events-auto z-10",
          onClick: () => h("right"),
          tabIndex: -1,
          "aria-label": "Scroll right",
          children: /* @__PURE__ */ f.jsx(ho, { className: "h-6 w-6 text-gray-500" })
        }
      )
    ] }) : r.map((p, g) => /* @__PURE__ */ f.jsx(ug, { ...p, onClick: i }, g)) })
  ] });
}
function aF() {
  const e = nF(), t = [
    {
      title: "More from Veltix",
      description: "",
      layout: "grid",
      extensions: e.extensions
    },
    {
      title: "Popular",
      layout: "row",
      scrollable: !0,
      disabled: !0,
      extensions: [
        { icon: Pr, name: "QR code" },
        { icon: Pr, name: "Emoji" },
        { icon: Pr, name: "Pexels" },
        { icon: Pr, name: "Pixabay" },
        { icon: Pr, name: "Giphy" },
        { icon: Pr, name: "Google Maps" }
      ]
    },
    {
      title: "AI generation",
      layout: "grid",
      disabled: !0,
      extensions: [{ image: "/placeholder.svg?height=64&width=64", name: "Magic Morph" }]
    },
    {
      title: "Graphic design",
      layout: "grid",
      disabled: !0,
      extensions: [
        { icon: Pr, name: "QR code" },
        { image: "/placeholder.svg?height=64&width=64", name: "Mockups" }
      ]
    },
    {
      title: "Marketing",
      layout: "grid",
      disabled: !0,
      extensions: [
        { icon: Pr, name: "QR code" },
        { image: "/placeholder.svg?height=64&width=64", name: "Mockups" }
      ]
    },
    {
      title: "Other apps",
      layout: "row",
      scrollable: !0,
      disabled: !0,
      extensions: [
        { image: "/placeholder.svg?height=64&width=64", name: "Pexels" },
        { image: "/placeholder.svg?height=64&width=64", name: "Pixabay" },
        { image: "/placeholder.svg?height=64&width=64", name: "Giphy" },
        { image: "/placeholder.svg?height=64&width=64", name: "Google Maps" },
        { image: "/placeholder.svg?height=64&width=64", name: "QR code" },
        { image: "/placeholder.svg?height=64&width=64", name: "Emoji" }
      ]
    }
  ];
  return /* @__PURE__ */ f.jsx("div", { className: "", children: /* @__PURE__ */ f.jsx("div", { className: "max-w-4xl mx-auto", children: t.filter((r) => !r.disabled).map((r, n) => /* @__PURE__ */ f.jsx(
    iF,
    {
      title: r.title,
      description: r.description,
      extensions: r.extensions,
      layout: r.layout,
      scrollable: r.scrollable,
      onClick: (o) => {
        e.enable(o.id);
      }
    },
    n
  )) }) });
}
Tr(
  {
    id: "apps",
    title: "Apps",
    icon: SC,
    viewContainer: () => /* @__PURE__ */ f.jsx(aF, {})
  },
  At.Sidebar
);
const sF = (e) => {
  C.useEffect(() => {
    br.getState().initialize(e.components || []), or.getState().initialize(e.contributes), e.data && (ke.getState().initialize(e.data), e.data.id && Ld.getState().watch(e.data.id)), e.api && Ml.getState().initialize(e.api), e.onMount && e.onMount();
  }, [e.components, e.contributes, e.data, e.api, e.onMount]);
  const t = C.useMemo(() => ({
    doc: {
      width: e.config?.doc?.width || 1920,
      height: e.config?.doc?.height || 1080
    }
  }), [e.config?.doc?.width, e.config?.doc?.height]), r = C.useMemo(() => e.data?.width || t.doc.width, [e.config?.doc, e.data?.width]), n = C.useMemo(() => e.data?.height || t.doc.height, [e.config?.doc, e.data?.height]), o = Yt.getState(), i = C.useMemo(
    () => ({
      config: t,
      width: r,
      height: n,
      editor: o
    }),
    [t, r, n, o]
  );
  return /* @__PURE__ */ f.jsx(kd.Provider, { value: i, children: /* @__PURE__ */ f.jsx($w, {}) });
}, lF = Mr(() => ({
  version: "0.0.1",
  registerViewContainer: (e, t) => {
    or.getState().registerViewContainer(e, t);
  }
})), TF = lF.getState(), jF = sF;
export {
  Aj as AdvancedSettings,
  Tj as EventCard,
  Fj as EventConfig,
  Oj as EventConfigFooter,
  Pj as EventConfigProvider,
  Mj as EventFieldRenderer,
  jj as EventList,
  zj as PRESET_SCHEMAS,
  Rj as TriggerSelector,
  jF as Veltix,
  At as ViewContainerLocation,
  wF as createClickOnlySchema,
  nx as createEventSchema,
  SF as createFullEventSchema,
  CF as extendEventSchema,
  EF as extendPresetSchema,
  $j as getPresetSchema,
  Ef as useEventConfig,
  br as useRegistryStore,
  lF as useVeltixStore,
  or as useViewRegistryStore,
  TF as veltixStore
};
