(function(Ve,X){typeof exports=="object"&&typeof module<"u"?X(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],X):(Ve=typeof globalThis<"u"?globalThis:Ve||self,X(Ve.Veltix={},Ve.React,Ve.ReactDOM))})(this,function(Ve,X,xc){"use strict";function Nh(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}const C=Nh(X),Ka=Nh(xc);var Za=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qa={exports:{}},bi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dh;function qw(){if(Dh)return bi;Dh=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,o,i){var a=null;if(i!==void 0&&(a=""+i),o.key!==void 0&&(a=""+o.key),"key"in o){i={};for(var s in o)s!=="key"&&(i[s]=o[s])}else i=o;return o=i.ref,{$$typeof:e,type:n,key:a,ref:o!==void 0?o:null,props:i}}return bi.Fragment=t,bi.jsx=r,bi.jsxs=r,bi}var wi={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Th;function Xw(){return Th||(Th=1,process.env.NODE_ENV!=="production"&&function(){function e(D){if(D==null)return null;if(typeof D=="function")return D.$$typeof===A?null:D.displayName||D.name||null;if(typeof D=="string")return D;switch(D){case v:return"Fragment";case x:return"Profiler";case m:return"StrictMode";case _:return"Suspense";case T:return"SuspenseList";case R:return"Activity"}if(typeof D=="object")switch(typeof D.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),D.$$typeof){case g:return"Portal";case b:return(D.displayName||"Context")+".Provider";case y:return(D._context.displayName||"Context")+".Consumer";case w:var N=D.render;return D=D.displayName,D||(D=N.displayName||N.name||"",D=D!==""?"ForwardRef("+D+")":"ForwardRef"),D;case j:return N=D.displayName||null,N!==null?N:e(D.type)||"Memo";case k:N=D._payload,D=D._init;try{return e(D(N))}catch{}}return null}function t(D){return""+D}function r(D){try{t(D);var N=!1}catch{N=!0}if(N){N=console;var z=N.error,Y=typeof Symbol=="function"&&Symbol.toStringTag&&D[Symbol.toStringTag]||D.constructor.name||"Object";return z.call(N,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",Y),t(D)}}function n(D){if(D===v)return"<>";if(typeof D=="object"&&D!==null&&D.$$typeof===k)return"<...>";try{var N=e(D);return N?"<"+N+">":"<...>"}catch{return"<...>"}}function o(){var D=$.A;return D===null?null:D.getOwner()}function i(){return Error("react-stack-top-frame")}function a(D){if(F.call(D,"key")){var N=Object.getOwnPropertyDescriptor(D,"key").get;if(N&&N.isReactWarning)return!1}return D.key!==void 0}function s(D,N){function z(){O||(O=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",N))}z.isReactWarning=!0,Object.defineProperty(D,"key",{get:z,configurable:!0})}function l(){var D=e(this.type);return I[D]||(I[D]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),D=this.props.ref,D!==void 0?D:null}function c(D,N,z,Y,H,K,J,q){return z=K.ref,D={$$typeof:p,type:D,key:N,props:K,_owner:H},(z!==void 0?z:null)!==null?Object.defineProperty(D,"ref",{enumerable:!1,get:l}):Object.defineProperty(D,"ref",{enumerable:!1,value:null}),D._store={},Object.defineProperty(D._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(D,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(D,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:J}),Object.defineProperty(D,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:q}),Object.freeze&&(Object.freeze(D.props),Object.freeze(D)),D}function u(D,N,z,Y,H,K,J,q){var Z=N.children;if(Z!==void 0)if(Y)if(L(Z)){for(Y=0;Y<Z.length;Y++)d(Z[Y]);Object.freeze&&Object.freeze(Z)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else d(Z);if(F.call(N,"key")){Z=e(D);var oe=Object.keys(N).filter(function(re){return re!=="key"});Y=0<oe.length?"{key: someKey, "+oe.join(": ..., ")+": ...}":"{key: someKey}",M[Z+Y]||(oe=0<oe.length?"{"+oe.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Y,Z,oe,Z),M[Z+Y]=!0)}if(Z=null,z!==void 0&&(r(z),Z=""+z),a(N)&&(r(N.key),Z=""+N.key),"key"in N){z={};for(var ie in N)ie!=="key"&&(z[ie]=N[ie])}else z=N;return Z&&s(z,typeof D=="function"?D.displayName||D.name||"Unknown":D),c(D,Z,K,H,o(),z,J,q)}function d(D){typeof D=="object"&&D!==null&&D.$$typeof===p&&D._store&&(D._store.validated=1)}var h=X,p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),b=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),A=Symbol.for("react.client.reference"),$=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=Object.prototype.hasOwnProperty,L=Array.isArray,P=console.createTask?console.createTask:function(){return null};h={"react-stack-bottom-frame":function(D){return D()}};var O,I={},E=h["react-stack-bottom-frame"].bind(h,i)(),S=P(n(i)),M={};wi.Fragment=v,wi.jsx=function(D,N,z,Y,H){var K=1e4>$.recentlyCreatedOwnerStacks++;return u(D,N,z,!1,Y,H,K?Error("react-stack-top-frame"):E,K?P(n(D)):S)},wi.jsxs=function(D,N,z,Y,H){var K=1e4>$.recentlyCreatedOwnerStacks++;return u(D,N,z,!0,Y,H,K?Error("react-stack-top-frame"):E,K?P(n(D)):S)}}()),wi}var Mh;function Kw(){return Mh||(Mh=1,process.env.NODE_ENV==="production"?Qa.exports=qw():Qa.exports=Xw()),Qa.exports}var f=Kw();const jh=e=>{let t;const r=new Set,n=(c,u)=>{const d=typeof c=="function"?c(t):c;if(!Object.is(d,t)){const h=t;t=u??(typeof d!="object"||d===null)?d:Object.assign({},t,d),r.forEach(p=>p(t,h))}},o=()=>t,s={setState:n,getState:o,getInitialState:()=>l,subscribe:c=>(r.add(c),()=>r.delete(c))},l=t=e(n,o,s);return s},Zw=e=>e?jh(e):jh,Qw=e=>e;function Jw(e,t=Qw){const r=X.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return X.useDebugValue(r),r}const Rh=e=>{const t=Zw(e),r=n=>Jw(t,n);return Object.assign(r,t),r},ur=e=>e?Rh(e):Rh,kh={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Si=new Map,Ja=e=>{const t=Si.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([r,n])=>[r,n.getState()])):{}},eS=(e,t,r)=>{if(e===void 0)return{type:"untracked",connection:t.connect(r)};const n=Si.get(r.name);if(n)return{type:"tracked",store:e,...n};const o={connection:t.connect(r),stores:{}};return Si.set(r.name,o),{type:"tracked",store:e,...o}},tS=(e,t)=>{if(t===void 0)return;const r=Si.get(e);r&&(delete r.stores[t],Object.keys(r.stores).length===0&&Si.delete(e))},rS=e=>{var t,r;if(!e)return;const n=e.split(`
`),o=n.findIndex(a=>a.includes("api.setState"));if(o<0)return;const i=((t=n[o+1])==null?void 0:t.trim())||"";return(r=/.+ (.+) .+/.exec(i))==null?void 0:r[1]},nS=(e,t={})=>(r,n,o)=>{const{enabled:i,anonymousActionType:a,store:s,...l}=t;let c;try{c=(i??(kh?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!c)return e(r,n,o);const{connection:u,...d}=eS(s,c,l);let h=!0;o.setState=(v,m,x)=>{const y=r(v,m);if(!h)return y;const b=rS(new Error().stack),w=x===void 0?{type:a||b||"anonymous"}:typeof x=="string"?{type:x}:x;return s===void 0?(u?.send(w,n()),y):(u?.send({...w,type:`${s}/${w.type}`},{...Ja(l.name),[s]:o.getState()}),y)},o.devtools={cleanup:()=>{u&&typeof u.unsubscribe=="function"&&u.unsubscribe(),tS(l.name,s)}};const p=(...v)=>{const m=h;h=!1,r(...v),h=m},g=e(o.setState,n,o);if(d.type==="untracked"?u?.init(g):(d.stores[d.store]=o,u?.init(Object.fromEntries(Object.entries(d.stores).map(([v,m])=>[v,v===d.store?g:m.getState()])))),o.dispatchFromDevtools&&typeof o.dispatch=="function"){let v=!1;const m=o.dispatch;o.dispatch=(...x)=>{(kh?"production":void 0)!=="production"&&x[0].type==="__setState"&&!v&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),v=!0),m(...x)}}return u.subscribe(v=>{var m;switch(v.type){case"ACTION":if(typeof v.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return bc(v.payload,x=>{if(x.type==="__setState"){if(s===void 0){p(x.state);return}Object.keys(x.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const y=x.state[s];if(y==null)return;JSON.stringify(o.getState())!==JSON.stringify(y)&&p(y);return}o.dispatchFromDevtools&&typeof o.dispatch=="function"&&o.dispatch(x)});case"DISPATCH":switch(v.payload.type){case"RESET":return p(g),s===void 0?u?.init(o.getState()):u?.init(Ja(l.name));case"COMMIT":if(s===void 0){u?.init(o.getState());return}return u?.init(Ja(l.name));case"ROLLBACK":return bc(v.state,x=>{if(s===void 0){p(x),u?.init(o.getState());return}p(x[s]),u?.init(Ja(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return bc(v.state,x=>{if(s===void 0){p(x);return}JSON.stringify(o.getState())!==JSON.stringify(x[s])&&p(x[s])});case"IMPORT_STATE":{const{nextLiftedState:x}=v.payload,y=(m=x.computedStates.slice(-1)[0])==null?void 0:m.state;if(!y)return;p(s===void 0?y:y[s]),u?.send(null,x);return}case"PAUSE_RECORDING":return h=!h}return}}),g},bc=(e,t)=>{let r;try{r=JSON.parse(e)}catch(n){console.error("[zustand devtools middleware] Could not parse the received json",n)}r!==void 0&&t(r)};function es(e,t){let r;try{r=e()}catch{return}return{getItem:o=>{var i;const a=l=>l===null?null:JSON.parse(l,void 0),s=(i=r.getItem(o))!=null?i:null;return s instanceof Promise?s.then(a):a(s)},setItem:(o,i)=>r.setItem(o,JSON.stringify(i,void 0)),removeItem:o=>r.removeItem(o)}}const wc=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return wc(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return wc(n)(r)}}}},Sc=(e,t)=>(r,n,o)=>{let i={storage:es(()=>localStorage),partialize:v=>v,version:0,merge:(v,m)=>({...m,...v}),...t},a=!1;const s=new Set,l=new Set;let c=i.storage;if(!c)return e((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...v)},n,o);const u=()=>{const v=i.partialize({...n()});return c.setItem(i.name,{state:v,version:i.version})},d=o.setState;o.setState=(v,m)=>{d(v,m),u()};const h=e((...v)=>{r(...v),u()},n,o);o.getInitialState=()=>h;let p;const g=()=>{var v,m;if(!c)return;a=!1,s.forEach(y=>{var b;return y((b=n())!=null?b:h)});const x=((m=i.onRehydrateStorage)==null?void 0:m.call(i,(v=n())!=null?v:h))||void 0;return wc(c.getItem.bind(c))(i.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==i.version){if(i.migrate){const b=i.migrate(y.state,y.version);return b instanceof Promise?b.then(w=>[!0,w]):[!0,b]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var b;const[w,_]=y;if(p=i.merge(_,(b=n())!=null?b:h),r(p,!0),w)return u()}).then(()=>{x?.(p,void 0),p=n(),a=!0,l.forEach(y=>y(p))}).catch(y=>{x?.(void 0,y)})};return o.persist={setOptions:v=>{i={...i,...v},v.storage&&(c=v.storage)},clearStorage:()=>{c?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>a,onHydrate:v=>(s.add(v),()=>{s.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},i.skipHydration||g(),p||h},bt=[];for(let e=0;e<256;++e)bt.push((e+256).toString(16).slice(1));function oS(e,t=0){return(bt[e[t+0]]+bt[e[t+1]]+bt[e[t+2]]+bt[e[t+3]]+"-"+bt[e[t+4]]+bt[e[t+5]]+"-"+bt[e[t+6]]+bt[e[t+7]]+"-"+bt[e[t+8]]+bt[e[t+9]]+"-"+bt[e[t+10]]+bt[e[t+11]]+bt[e[t+12]]+bt[e[t+13]]+bt[e[t+14]]+bt[e[t+15]]).toLowerCase()}let Cc;const iS=new Uint8Array(16);function aS(){if(!Cc){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Cc=crypto.getRandomValues.bind(crypto)}return Cc(iS)}const Ph={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function po(e,t,r){if(Ph.randomUUID&&!e)return Ph.randomUUID();e=e||{};const n=e.random??e.rng?.()??aS();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,oS(n)}const Ah=e=>Symbol.iterator in e,Oh=e=>"entries"in e,Ih=(e,t)=>{const r=e instanceof Map?e:new Map(e.entries()),n=t instanceof Map?t:new Map(t.entries());if(r.size!==n.size)return!1;for(const[o,i]of r)if(!Object.is(i,n.get(o)))return!1;return!0},sS=(e,t)=>{const r=e[Symbol.iterator](),n=t[Symbol.iterator]();let o=r.next(),i=n.next();for(;!o.done&&!i.done;){if(!Object.is(o.value,i.value))return!1;o=r.next(),i=n.next()}return!!o.done&&!!i.done};function lS(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?!1:Ah(e)&&Ah(t)?Oh(e)&&Oh(t)?Ih(e,t):sS(e,t):Ih({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)})}function Ci(e){const t=X.useRef(void 0);return r=>{const n=e(r);return lS(t.current,n)?t.current:t.current=n}}const Ec=X.createContext(null),Ei=()=>{const e=X.useContext(Ec);if(!e)throw new Error("useVeltix must be used within a VeltixProvider");return e},cS={id:po(),title:"Untitled",docs:[{id:po(),title:"Page 1",nodes:[]}]},je=ur((e,t)=>({json:cS,initialize:r=>e({json:r}),update:r=>e(n=>({json:n.json?{...n.json,...r}:void 0})),addDoc:r=>e(n=>n.json?{json:{...n.json,docs:[...n.json.docs,r]}}:{json:void 0}),removeDoc:r=>e(n=>n.json?{json:{...n.json,docs:n.json.docs.filter(o=>o.id!==r)}}:{json:void 0}),updateDoc:(r,n)=>e(o=>{if(!o.json)return{json:void 0};const i=o.json.docs.map(a=>a.id===r?{...a,...n}:a);return{json:{...o.json,docs:i}}}),getDoc:r=>{const n=t();if(n.json)return n.json.docs.find(o=>o.id===r)},updateNode:(r,n,o)=>e(i=>{if(!i.json)return{json:void 0};const a=l=>l.map(c=>c.id===n?{...c,...o}:c.children&&c.children.length>0?{...c,children:a(c.children)}:c),s=i.json.docs.map(l=>l.id!==r?l:{...l,nodes:a(l.nodes)});return{json:{...i.json,docs:s}}}),createNode:(r,n)=>e(o=>{if(!o.json)return{json:void 0};const i=o.json.docs.map(a=>a.id!==r?a:{...a,nodes:[...a.nodes,n]});return{json:{...o.json,docs:i}}}),removeNode:(r,n)=>e(o=>{if(!o.json)return{json:void 0};const i=s=>s.filter(l=>l.id===n?!1:(l.children&&l.children.length>0&&(l.children=i(l.children)),!0)),a=o.json.docs.map(s=>s.id!==r?s:{...s,nodes:i(s.nodes)});return{json:{...o.json,docs:a}}}),cloneNode:(r,n)=>e(o=>{if(!o.json)return{json:void 0};const i=u=>{for(const d of u){if(d.id===n)return d;if(d.children&&d.children.length>0){const h=i(d.children);if(h)return h}}return null},a=o.json.docs.find(u=>u.id===r);if(!a)return{json:o.json};const s=i(a.nodes);if(!s)return{json:o.json};const l={...s,id:`${s.type}-${po().substring(0,8)}`,position:{...s.position,top:s.position.top+20,left:s.position.left+20}},c=o.json.docs.map(u=>u.id!==r?u:{...u,nodes:[...u.nodes,l]});return{json:{...o.json,docs:c}}}),reorderNode:(r,n,o,i=[])=>e(a=>{if(!a.json)return{json:void 0};const s=(c,u)=>{if(u.length===0){const p=[...c],[g]=p.splice(n,1);return p.splice(o,0,g),p}const[d,...h]=u;return c.map((p,g)=>{if(g!==d)return p;const v=p.children||[];return{...p,children:s(v,h)}})},l=a.json.docs.map(c=>c.id!==r?c:{...c,nodes:s(c.nodes,i)});return{json:{...a.json,docs:l}}}),getNode:(r,n)=>{const o=t();if(!o.json)return;const i=o.json.docs.find(a=>a.id===r);if(i)return i.nodes.find(a=>a.id===n)},addNode:r=>e(n=>{if(!n.json||!n.json.docs.length)return{json:void 0};r.id||(r.id=`${r.type}-${po().substring(0,8)}`);const o=n.json.docs[0],i=n.json.docs.map(a=>a.id!==o.id?a:{...a,nodes:[...a.nodes,r]});return{json:{...n.json,docs:i}}}),getWidget:r=>{const n=t();return!n.json||!n.json.docs.length?void 0:n.json.docs[0].nodes.find(i=>i.id===r)},createNodeByManifest:r=>{const n={id:`${r.type}-${po().substring(0,8)}`,type:r.type,title:r.title,props:r.defaultProps||{},position:{top:100,left:100,width:120,height:80}};t().addNode(n)}})),uS=e=>je(Ci(t=>{if(!t.json)return[];const r=t.json.docs.find(n=>n.id===e);return r?r.nodes:[]})),dS=(e=40)=>{const t=Ei();return je(Ci(r=>{if(!r.json||!r.json.docs.length)return{totalWidth:0,totalGap:0,combinedWidth:0};const n=r.json.docs,o=n.reduce((a,s)=>a+(s.width||t.width),0),i=n.length>1?(n.length-1)*e:0;return{totalWidth:o,totalGap:i,combinedWidth:o+i}}))},fS=()=>{const e=Ei();return je(Ci(t=>{if(!t.json||!t.json.docs.length)return{width:0,height:0};const r=t.json.docs,n=r.reduce((a,s)=>a+(s.width||e.width),0),o=Math.max(...r.map(a=>a.height||e.height||0)),i=r.length>1?(r.length-1)*40:0;return{width:n+i,height:o}}))},$t=ur()(Sc((e,t)=>({activeDocId:(je.getState().json?.docs||[])[0].id,selectedNodes:[],nodeContextMenu:{open:!1,position:{x:0,y:0},node:null},setSelectedNodes:r=>e({selectedNodes:r}),addSelectedNode:r=>e(n=>{const o=n.selectedNodes||[];return o.includes(r)?n:{selectedNodes:[...o,r]}}),selectNode:r=>e({selectedNodes:[r]}),removeSelectedNode:()=>e(r=>{const n=r.selectedNodes||[];if(n.length===0)return r;const o=je.getState().json.docs[0].id;return je.getState().removeNode(o,n[0]),{selectedNodes:[]}}),clearSelectedNodes:()=>e({selectedNodes:[]}),clearAllSelectedNodes:()=>e({selectedNodes:[]}),getSelectedNodes:()=>t().selectedNodes||[],openNodeContextMenu:(r,n)=>e({nodeContextMenu:{open:!0,position:r,node:n}}),closeNodeContextMenu:()=>e(r=>({nodeContextMenu:{...r.nodeContextMenu,open:!1}})),getCurrentSelection:()=>{const r=je.getState(),n=t().selectedNodes,o=r.json.docs[0];if(n.length===0||!o)return{selectedDoc:o,selectedNodes:[]};const i=n.map(a=>r.getNode(o.id,a)).filter(Boolean);return{selectedDoc:o,selectedNodes:i}},selectAll:()=>{const n=je.getState().json.docs;if(!n||n.length===0)return;const o=n[0];if(!o)return;const i=o.nodes?o.nodes.map(a=>a.id):[];e({selectedNodes:i})},removeNode:r=>{const n=je.getState(),o=n.json.docs;if(!o||o.length===0)return;const i=o[0];i&&(n.removeNode(i.id,r),e({selectedNodes:[]}))},add:(r,n)=>{const o=je.getState();n&&(r.position=n),o.addNode(r)}}),{name:"veltix-editor",storage:es(()=>localStorage),partialize:e=>({})}));/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pS=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),Fh=e=>{const t=pS(e);return t.charAt(0).toUpperCase()+t.slice(1)},Lh=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),vS=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=X.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:o="",children:i,iconNode:a,...s},l)=>X.createElement("svg",{ref:l,...gS,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Lh("lucide",o),...!i&&!vS(s)&&{"aria-hidden":"true"},...s},[...a.map(([c,u])=>X.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(e,t)=>{const r=X.forwardRef(({className:n,...o},i)=>X.createElement(mS,{ref:i,iconNode:t,className:Lh(`lucide-${hS(Fh(e))}`,`lucide-${e}`,n),...o}));return r.displayName=Fh(e),r};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=ge("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=ge("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=ge("box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=ge("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=ge("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=ge("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=ge("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=ge("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=ge("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=ge("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=ge("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=ge("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=ge("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=ge("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=ge("component",[["path",{d:"M15.536 11.293a1 1 0 0 0 0 1.414l2.376 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z",key:"1uwlt4"}],["path",{d:"M2.297 11.293a1 1 0 0 0 0 1.414l2.377 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414L6.088 8.916a1 1 0 0 0-1.414 0z",key:"10291m"}],["path",{d:"M8.916 17.912a1 1 0 0 0 0 1.415l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.415l-2.377-2.376a1 1 0 0 0-1.414 0z",key:"1tqoq1"}],["path",{d:"M8.916 4.674a1 1 0 0 0 0 1.414l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z",key:"1x6lto"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=ge("copy-check",[["path",{d:"m12 15 2 2 4-4",key:"2c609p"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=ge("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=ge("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=ge("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=ge("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=ge("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=ge("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=ge("file-spreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=ge("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=ge("file-video",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=ge("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=ge("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=ge("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=ge("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=ge("hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=ge("hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=ge("headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=ge("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=ge("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=ge("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=ge("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=ge("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=ge("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=ge("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=ge("magnet",[["path",{d:"m6 15-4-4 6.75-6.77a7.79 7.79 0 0 1 11 11L13 22l-4-4 6.39-6.36a2.14 2.14 0 0 0-3-3L6 15",key:"1i3lhw"}],["path",{d:"m5 8 4 4",key:"j6kj7e"}],["path",{d:"m12 15 4 4",key:"lnac28"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=ge("message-circle-question-mark",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=ge("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=ge("moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=ge("mouse-pointer-2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=ge("mouse-pointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=ge("move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=ge("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=ge("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=ge("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=ge("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=ge("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=ge("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=ge("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=ge("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=ge("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=ge("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=ge("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=ge("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=ge("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=ge("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=ge("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=ge("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=ge("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var _t=(e=>(e.Sidebar="sidebar",e.Panel="panel",e.AuxiliaryBar="auxiliarybar",e.TitleBar="titlebar",e))(_t||{});const ap=e=>({id:e.id,title:e.title,order:e.order,isDefault:!0,isRemovable:!1,viewContainer:({context:t})=>{const r=e.viewContainer;return X.createElement(r,{context:t})}}),Gt=ur((e,t)=>({views:{sidebar:[],panel:[],auxiliarybar:[],titlebar:[]},initialized:!1,initialize:r=>{if(t().initialized||!r?.viewsContainers)return;const n=r.viewsContainers,o=t().views;if(n.sidebar){const i=n.sidebar.map(ap).sort((a,s)=>(a.order??0)-(s.order??0));o.sidebar=[...o.sidebar,...i]}if(n.titlebar){const i=n.titlebar.map(ap).sort((a,s)=>(a.order??0)-(s.order??0));o.titlebar=[...o.titlebar,...i]}e({views:o,initialized:!0})},registerViewContainer:(r,n)=>e(o=>o.views[n]&&o.views[n].some(i=>i.id===r.id)?o:{views:{...o.views,[n]:[...o.views[n],r]}}),registerExtensionViewContainer:r=>e(n=>n.views.sidebar&&n.views.sidebar.some(o=>o.id===r.id)?n:{views:{...n.views,sidebar:[...n.views.sidebar,{...r,isRemovable:!0}]}}),getViewsByLocation:r=>{const i=[...(t().views[r]??[]).filter(l=>!l.hidden)].sort((l,c)=>l.order!==void 0&&c.order!==void 0?l.order-c.order:l.order!==void 0?-1:c.order!==void 0?1:0),a=i.filter(l=>l.isRemovable);return[...i.filter(l=>!l.isRemovable),...a]},getViewContainer:r=>t().views.sidebar.find(i=>i.id===r),unregisterViewContainer(r){e(n=>{const o=n.views.sidebar,i=o.findIndex(a=>a.id===r);return i!==-1&&o.splice(i,1),{views:{...n.views,sidebar:o}}})}})),US=()=>Gt.getState().getViewsByLocation("sidebar"),HS=e=>Gt.getState().getViewContainer(e);function dr(e,t){Gt.getState().registerViewContainer(e,t)}const WS=({icon:e})=>{let t=null;if(typeof e=="string"){const r=e.startsWith("data:")||e.startsWith("http");t=f.jsx("span",{className:"w-8 h-8 text-lg inline-flex items-center justify-center",children:r?f.jsx("img",{src:e,alt:"Chart icon",className:"w-10 h-10 object-contain"}):e})}else{const r=e;e&&(t=f.jsx("span",{className:"w-10 h-10 text-lg inline-flex items-center justify-center",children:f.jsx(r,{className:"w-8 h-8"})}))}return f.jsx("div",{className:"flex justify-center items-center",children:t})},YS=({chart:e,onDragStart:t,onClick:r})=>f.jsxs("div",{className:"rounded-lg p-1.5 cursor-move hover:bg-gray-100/50 transition-colors border border-gray-200",draggable:!0,onDragStart:n=>t(n,e),onClick:()=>r(e),children:[f.jsx(WS,{icon:e.icon}),f.jsxs("div",{className:"mt-1 text-center",children:[f.jsx("div",{className:"font-medium text-sm leading-tight",children:e.title}),f.jsx("div",{className:"text-xs text-gray-500 mt-0.5 line-clamp-1",title:e.description,children:e.description})]})]},e.type),sp=({components:e,handleDragStart:t,handleAddChart:r})=>f.jsx("div",{className:"space-y-4",children:f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-2 gap-3",children:e.map(n=>f.jsx(YS,{chart:n,onDragStart:t,onClick:r},n.type))})}),qS=()=>{const e=qt(),{createNodeByManifest:t}=je(),r=X.useMemo(()=>e.all(),[e]),n=X.useCallback((i,a)=>{i.dataTransfer.setData("chart-type",a.type)},[]),o=X.useCallback(i=>{t(i)},[t]);return f.jsxs("div",{className:"pb-4 flex flex-col h-full",children:[f.jsx("h2",{className:"text-xl font-bold sticky top-0 z-20 bg-white py-2",children:"Components"}),f.jsx("div",{className:"space-y-6 flex-1 overflow-y-auto veltix-scrollbar",children:f.jsx(sp,{components:r,handleDragStart:n,handleAddChart:o})})]})},XS=()=>{dr({id:"components",title:"Components",icon:Gh,viewContainer:()=>f.jsx(qS,{}),order:1},_t.Sidebar)},KS=({components:e,title:t})=>{const{createNodeByManifest:r}=je(),n=X.useCallback((i,a)=>{i.dataTransfer.setData("chart-type",a.type)},[]),o=X.useCallback(i=>{r(i)},[r]);return f.jsxs("div",{className:"pb-4 flex flex-col h-full",children:[f.jsx("h2",{className:"text-xl font-bold sticky top-0 z-20 bg-white py-2",children:t}),f.jsx("div",{className:"space-y-6 flex-1 overflow-y-auto veltix-scrollbar",children:f.jsx(sp,{components:e,handleDragStart:n,handleAddChart:o})})]})},ZS=e=>{if(!e||e.length===0)return{flattenedComponents:[],groups:[]};const t=[],r=[];for(const n of e)"type"in n?t.push(n):(t.push(...n.components),r.push(n));return{flattenedComponents:t,groups:r}},QS=e=>()=>X.createElement(KS,{components:e.components,title:e.title});function JS(e){const t=Gt.getState();e.forEach((r,n)=>{t.registerViewContainer({id:`group-${r.id}`,title:r.title,icon:r.icon,viewContainer:QS(r),order:n+1,isRemovable:!1},_t.Sidebar)})}const qt=ur((e,t)=>({initialize:r=>{const{flattenedComponents:n,groups:o}=ZS(r);o.length===0&&n.length>0&&XS();const i=new Map;o.forEach(a=>{a.components.forEach(s=>{i.set(s.type,a.id)})}),e(a=>{const s=new Map(a.components);return n.forEach(l=>{s.set(l.type,l)}),{components:s,componentGroups:i}}),JS(o)},components:new Map,componentGroups:new Map,register:r=>{if(t().components.has(r.type))throw new Error(`Component "${r.type}" is already registered`);e(o=>{const i=new Map(o.components);return i.set(r.type,r),{components:i}})},get:r=>t().components.get(r),has:r=>t().components.has(r),unregister:r=>{if(!t().components.has(r))throw new Error(`Component "${r}" is not registered`);e(o=>{const i=new Map(o.components);return i.delete(r),{components:i}})},getRegisteredNames:()=>{const r=t();return Array.from(r.components.keys())},clear:()=>{e({components:new Map,componentGroups:new Map})},all:(r=!0)=>{const n=t(),i=Array.from(n.components.values()).filter(a=>!a.hidden);return r?i.filter(a=>!n.componentGroups.get(a.type)):i}})),eC=e=>qt().get(e)?.eventConfigSchema,lp=e=>qt().get(e),is=ur(e=>({api:null,initialize:t=>e({api:t})}));function cp(e,t){const r=[],n=[],o=[],i=[],a=(h,p="")=>{const g=[];return h==null?[p]:typeof h!="object"?[p]:(Array.isArray(h)?h.forEach((v,m)=>{const x=p?`${p}[${m}]`:`[${m}]`;g.push(x),g.push(...a(v,x))}):Object.keys(h).forEach(v=>{const m=p?`${p}.${v}`:v;g.push(m),g.push(...a(h[v],m))}),g)},s=(h,p)=>{if(!p)return h;const g=p.split(/[.\[\]]/).filter(Boolean);let v=h;for(const m of g){if(v==null)return;if(Array.isArray(v)){const x=parseInt(m);if(isNaN(x))return;v=v[x]}else v=v[m]}return v},l=(h,p)=>h===p?!0:h===null||p===null?h===p:typeof h!=typeof p?!1:typeof h=="object"?JSON.stringify(h)===JSON.stringify(p):!1,c=new Set(a(e)),u=new Set(a(t)),d=new Set([...c,...u]);for(const h of d){const p=s(e,h),g=s(t,h),v=c.has(h),m=u.has(h);!v&&m?r.push(h):v&&!m?n.push(h):v&&m&&(l(p,g)?i.push(h):o.push(h))}return{added:r,removed:n,modified:o,unchanged:i,summary:{totalChanges:r.length+n.length+o.length,additions:r.length,deletions:n.length,modifications:o.length}}}function tC(e){const{summary:t,added:r,removed:n,modified:o}=e;if(t.totalChanges===0)return"No changes detected";const i=[];return t.additions>0&&i.push(`${t.additions} addition${t.additions>1?"s":""}`),t.deletions>0&&i.push(`${t.deletions} deletion${t.deletions>1?"s":""}`),t.modifications>0&&i.push(`${t.modifications} modification${t.modifications>1?"s":""}`),i.join(", ")}function rC(e,t){return cp(e,t).summary.totalChanges>0}const jc={compareJson:cp,getDiffSummary:tC,hasChanges:rC},Rc=ur((e,t)=>{const r=()=>{const{unsubscribe:n}=t();n&&n();const o=je.subscribe(()=>{t().projectId&&!t().isInitialLoad&&t().markForSave(),t().isInitialLoad&&e({isInitialLoad:!1})});e({unsubscribe:o})};return{status:"idle",lastSaved:null,error:null,pendingSave:!1,saveTimeout:null,projectId:null,unsubscribe:null,isInitialLoad:!0,lastSavedJson:null,diffResult:null,watch:n=>{e({projectId:n});const{json:o}=je.getState();o&&e({lastSavedJson:o}),r()},markForSave:()=>{const{saveTimeout:n,pendingSave:o,lastSavedJson:i}=t(),{json:a}=je.getState();if(o)return;if(i&&a){const l=jc.compareJson(i,a);if(l.summary.totalChanges===0){console.log("No changes detected, skipping save");return}console.log("Changes detected:",jc.getDiffSummary(l)),console.log("Detailed changes:",l),e({diffResult:l})}n&&clearTimeout(n);const s=setTimeout(()=>{t().saveNow()},2e3);e({pendingSave:!0,saveTimeout:s,status:"idle"})},saveNow:async()=>{const{projectId:n,saveTimeout:o}=t(),{api:i}=is.getState(),a=je.getState().json;if(!(!n||!a||!i)){o&&clearTimeout(o),e({status:"saving",saveTimeout:null});try{await i.updateProject(n,a),e({status:"saved",lastSaved:new Date,pendingSave:!1,error:null,lastSavedJson:a,diffResult:null}),setTimeout(()=>{e(s=>s.status==="saved"?{status:"idle"}:{})},3e3)}catch(s){e({status:"error",pendingSave:!1,error:s})}}},clearSaveState:()=>{const{saveTimeout:n,unsubscribe:o}=t();n&&clearTimeout(n),o&&o(),e({status:"idle",pendingSave:!1,saveTimeout:null,error:null,unsubscribe:null,isInitialLoad:!0,lastSavedJson:null,diffResult:null})},getDiffSummary:()=>{const{diffResult:n}=t();return n?jc.getDiffSummary(n):"No changes detected"}}}),At=ur()(Sc(e=>({activePanelId:null,layout:{sidebar:{visible:!0}},setActivePanel:t=>e({activePanelId:t,layout:{sidebar:{visible:t!==""}}}),selectedTargets:[],zoom:1,isPinching:!1,isDragging:!1,position:{x:0,y:0},spacePressed:!1,dragStart:{x:0,y:0},isTouchPadDragging:!1,cursorMode:"arrow",guidesSize:20,showHorizontalGuides:!0,showVerticalGuides:!0,horizontalGuides:[],verticalGuides:[],mode:"select",isAiChatOpen:!1,setIsAiChatOpen:t=>e({isAiChatOpen:t}),setSelectedTargets:t=>e({selectedTargets:t}),setZoom:t=>e({zoom:t}),zoomIn:()=>e(t=>({zoom:Math.min(t.zoom+.1,3)})),zoomOut:()=>e(t=>({zoom:Math.max(t.zoom-.1,.1)})),resetZoom:()=>e({zoom:1}),setPinching:t=>e({isPinching:t}),handlePinch:t=>e(r=>({zoom:Math.max(.1,Math.min(3,r.zoom*t))})),setDragging:t=>e({isDragging:t}),setCanvasState:t=>e(r=>({...r,...t})),setSpacePressed:t=>e({spacePressed:t}),setDragStart:t=>e({dragStart:t}),setIsTouchPadDragging:t=>e({isTouchPadDragging:t}),setCursorMode:t=>e({cursorMode:t}),setMode:t=>e({mode:t}),toggleHorizontalGuides:()=>e(t=>({showHorizontalGuides:!t.showHorizontalGuides})),toggleVerticalGuides:()=>e(t=>({showVerticalGuides:!t.showVerticalGuides})),setHorizontalGuides:t=>e({horizontalGuides:t}),setVerticalGuides:t=>e({verticalGuides:t}),checkBlur:()=>{},setSelectedTargetsElements:async(t,r=!1,n,o)=>{console.log("isRestore",r),t=t.filter(a=>t.every(s=>s===a||!s.contains(a)));const i=t.map(a=>a.dataset.scenaElementId);return e({selectedTargets:i}),o&&o.setSelectedTargets(t),n&&n.setSelectedTargets(t),t},selectEndMaker:(t,r)=>{if(!r)return!1;const n=r.getSelected?.(),o=t.width,i=t.height;return!(!n||!n.maker||!o||!i)},toggleGuides:()=>{e(t=>({showHorizontalGuides:!t.showHorizontalGuides,showVerticalGuides:!t.showVerticalGuides}))},setIsDragging(t){e({isDragging:t})}}),{name:"veltix-ui",storage:es(()=>localStorage),partialize:e=>({zoom:e.zoom,mode:e.mode,cursorMode:e.cursorMode,position:e.position,activePanelId:e.activePanelId})}));function up(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=up(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ni(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=up(e))&&(n&&(n+=" "),n+=t);return n}const kc="-",nC=e=>{const t=iC(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:a=>{const s=a.split(kc);return s[0]===""&&s.length!==1&&s.shift(),dp(s,t)||oC(a)},getConflictingClassGroupIds:(a,s)=>{const l=r[a]||[];return s&&n[a]?[...l,...n[a]]:l}}},dp=(e,t)=>{if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),o=n?dp(e.slice(1),n):void 0;if(o)return o;if(t.validators.length===0)return;const i=e.join(kc);return t.validators.find(({validator:a})=>a(i))?.classGroupId},fp=/^\[(.+)\]$/,oC=e=>{if(fp.test(e)){const t=fp.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},iC=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return sC(Object.entries(e.classGroups),r).forEach(([i,a])=>{Pc(a,n,i,t)}),n},Pc=(e,t,r,n)=>{e.forEach(o=>{if(typeof o=="string"){const i=o===""?t:hp(t,o);i.classGroupId=r;return}if(typeof o=="function"){if(aC(o)){Pc(o(n),t,r,n);return}t.validators.push({validator:o,classGroupId:r});return}Object.entries(o).forEach(([i,a])=>{Pc(a,hp(t,i),r,n)})})},hp=(e,t)=>{let r=e;return t.split(kc).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},aC=e=>e.isThemeGetter,sC=(e,t)=>t?e.map(([r,n])=>{const o=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,s])=>[t+a,s])):i);return[r,o]}):e,lC=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const o=(i,a)=>{r.set(i,a),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let a=r.get(i);if(a!==void 0)return a;if((a=n.get(i))!==void 0)return o(i,a),a},set(i,a){r.has(i)?r.set(i,a):o(i,a)}}},pp="!",cC=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,o=t[0],i=t.length,a=s=>{const l=[];let c=0,u=0,d;for(let m=0;m<s.length;m++){let x=s[m];if(c===0){if(x===o&&(n||s.slice(m,m+i)===t)){l.push(s.slice(u,m)),u=m+i;continue}if(x==="/"){d=m;continue}}x==="["?c++:x==="]"&&c--}const h=l.length===0?s:s.substring(u),p=h.startsWith(pp),g=p?h.substring(1):h,v=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:v}};return r?s=>r({className:s,parseClassName:a}):a},uC=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},dC=e=>({cache:lC(e.cacheSize),parseClassName:cC(e),...nC(e)}),fC=/\s+/,hC=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:o}=t,i=[],a=e.trim().split(fC);let s="";for(let l=a.length-1;l>=0;l-=1){const c=a[l],{modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:p}=r(c);let g=!!p,v=n(g?h.substring(0,p):h);if(!v){if(!g){s=c+(s.length>0?" "+s:s);continue}if(v=n(h),!v){s=c+(s.length>0?" "+s:s);continue}g=!1}const m=uC(u).join(":"),x=d?m+pp:m,y=x+v;if(i.includes(y))continue;i.push(y);const b=o(v,g);for(let w=0;w<b.length;++w){const _=b[w];i.push(x+_)}s=c+(s.length>0?" "+s:s)}return s};function pC(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=vp(t))&&(n&&(n+=" "),n+=r);return n}const vp=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=vp(e[n]))&&(r&&(r+=" "),r+=t);return r};function vC(e,...t){let r,n,o,i=a;function a(l){const c=t.reduce((u,d)=>d(u),e());return r=dC(c),n=r.cache.get,o=r.cache.set,i=s,s(l)}function s(l){const c=n(l);if(c)return c;const u=hC(l,r);return o(l,u),u}return function(){return i(pC.apply(null,arguments))}}const qe=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},gp=/^\[(?:([a-z-]+):)?(.+)\]$/i,gC=/^\d+\/\d+$/,mC=new Set(["px","full","screen"]),xC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,yC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,wC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,SC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Xr=e=>mo(e)||mC.has(e)||gC.test(e),an=e=>xo(e,"length",jC),mo=e=>!!e&&!Number.isNaN(Number(e)),Ac=e=>xo(e,"number",mo),Di=e=>!!e&&Number.isInteger(Number(e)),CC=e=>e.endsWith("%")&&mo(e.slice(0,-1)),Pe=e=>gp.test(e),sn=e=>xC.test(e),EC=new Set(["length","size","percentage"]),_C=e=>xo(e,EC,mp),NC=e=>xo(e,"position",mp),DC=new Set(["image","url"]),TC=e=>xo(e,DC,kC),MC=e=>xo(e,"",RC),Ti=()=>!0,xo=(e,t,r)=>{const n=gp.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},jC=e=>yC.test(e)&&!bC.test(e),mp=()=>!1,RC=e=>wC.test(e),kC=e=>SC.test(e),xp=vC(()=>{const e=qe("colors"),t=qe("spacing"),r=qe("blur"),n=qe("brightness"),o=qe("borderColor"),i=qe("borderRadius"),a=qe("borderSpacing"),s=qe("borderWidth"),l=qe("contrast"),c=qe("grayscale"),u=qe("hueRotate"),d=qe("invert"),h=qe("gap"),p=qe("gradientColorStops"),g=qe("gradientColorStopPositions"),v=qe("inset"),m=qe("margin"),x=qe("opacity"),y=qe("padding"),b=qe("saturate"),w=qe("scale"),_=qe("sepia"),T=qe("skew"),j=qe("space"),k=qe("translate"),R=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",Pe,t],F=()=>[Pe,t],L=()=>["",Xr,an],P=()=>["auto",mo,Pe],O=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],I=()=>["solid","dashed","dotted","double","none"],E=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],S=()=>["start","end","center","between","around","evenly","stretch"],M=()=>["","0",Pe],D=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>[mo,Pe];return{cacheSize:500,separator:":",theme:{colors:[Ti],spacing:[Xr,an],blur:["none","",sn,Pe],brightness:N(),borderColor:[e],borderRadius:["none","","full",sn,Pe],borderSpacing:F(),borderWidth:L(),contrast:N(),grayscale:M(),hueRotate:N(),invert:M(),gap:F(),gradientColorStops:[e],gradientColorStopPositions:[CC,an],inset:$(),margin:$(),opacity:N(),padding:F(),saturate:N(),scale:N(),sepia:M(),skew:N(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Pe]}],container:["container"],columns:[{columns:[sn]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...O(),Pe]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Di,Pe]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Pe]}],grow:[{grow:M()}],shrink:[{shrink:M()}],order:[{order:["first","last","none",Di,Pe]}],"grid-cols":[{"grid-cols":[Ti]}],"col-start-end":[{col:["auto",{span:["full",Di,Pe]},Pe]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[Ti]}],"row-start-end":[{row:["auto",{span:[Di,Pe]},Pe]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Pe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Pe]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...S()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...S(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...S(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[m]}],mx:[{mx:[m]}],my:[{my:[m]}],ms:[{ms:[m]}],me:[{me:[m]}],mt:[{mt:[m]}],mr:[{mr:[m]}],mb:[{mb:[m]}],ml:[{ml:[m]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Pe,t]}],"min-w":[{"min-w":[Pe,t,"min","max","fit"]}],"max-w":[{"max-w":[Pe,t,"none","full","min","max","fit","prose",{screen:[sn]},sn]}],h:[{h:[Pe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Pe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Pe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Pe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",sn,an]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ac]}],"font-family":[{font:[Ti]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Pe]}],"line-clamp":[{"line-clamp":["none",mo,Ac]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Xr,Pe]}],"list-image":[{"list-image":["none",Pe]}],"list-style-type":[{list:["none","disc","decimal",Pe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...I(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Xr,an]}],"underline-offset":[{"underline-offset":["auto",Xr,Pe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...O(),NC]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",_C]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},TC]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...I(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:I()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...I()]}],"outline-offset":[{"outline-offset":[Xr,Pe]}],"outline-w":[{outline:[Xr,an]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Xr,an]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",sn,MC]}],"shadow-color":[{shadow:[Ti]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...E(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":E()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",sn,Pe]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Pe]}],duration:[{duration:N()}],ease:[{ease:["linear","in","out","in-out",Pe]}],delay:[{delay:N()}],animate:[{animate:["none","spin","ping","pulse","bounce",Pe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[Di,Pe]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Pe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Xr,an,Ac]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}),yo="data-veltix-node-id";function yp(e){return e.contentEditable==="inherit"?yp(e.parentElement):e.contentEditable==="true"?e:null}function bp(e){return e.getAttribute(yo)}function jr(...e){return xp(Ni(e))}const PC=({icon:e,title:t,active:r,isRemovable:n,onClick:o,onRemove:i})=>{const a=s=>{s.stopPropagation(),i?.()};return f.jsxs("button",{className:jr("w-16 h-16 flex-shrink-0 flex flex-col items-center justify-center relative group transition-all duration-200",r?"text-purple-600 dark:text-white":"text-foreground hover:text-foreground/90"),onClick:o,title:t,children:[n&&r&&f.jsx("div",{className:"absolute top-0 left-2 w-3 h-3 bg-gray-300 hover:bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center text-xs font-bold z-10",onClick:a,title:"Remove",children:""}),f.jsx("div",{className:"flex items-center justify-center",children:f.jsx("span",{className:jr("flex items-center justify-center overflow-hidden p-1 rounded-lg w-8 h-8","group-hover:bg-gray-100 group-hover:text-[#4a53fa]",r?"text-[#4a53fa] bg-white dark:bg-gray-200 shadow-[0px_0px_0px_1px_rgba(64,87,109,0.04),0px_6px_20px_-4px_rgba(64,87,109,0.3)]":""),children:e?X.isValidElement(e)?e:X.createElement(e,{className:"w-5 h-5"}):f.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-sm"})})}),f.jsx("div",{className:"text-[11px] mt-1 font-medium truncate w-full text-center whitespace-nowrap overflow-hidden px-0.5",children:t})]})};function wp(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function as(...e){return t=>{let r=!1;const n=e.map(o=>{const i=wp(o,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let o=0;o<n.length;o++){const i=n[o];typeof i=="function"?i():wp(e[o],null)}}}}function Ee(...e){return C.useCallback(as(...e),e)}function On(e){const t=OC(e),r=C.forwardRef((n,o)=>{const{children:i,...a}=n,s=C.Children.toArray(i),l=s.find(FC);if(l){const c=l.props.children,u=s.map(d=>d===l?C.Children.count(c)>1?C.Children.only(null):C.isValidElement(c)?c.props.children:null:d);return f.jsx(t,{...a,ref:o,children:C.isValidElement(c)?C.cloneElement(c,void 0,u):null})}return f.jsx(t,{...a,ref:o,children:i})});return r.displayName=`${e}.Slot`,r}var AC=On("Slot");function OC(e){const t=C.forwardRef((r,n)=>{const{children:o,...i}=r;if(C.isValidElement(o)){const a=BC(o),s=LC(i,o.props);return o.type!==C.Fragment&&(s.ref=n?as(n,a):a),C.cloneElement(o,s)}return C.Children.count(o)>1?C.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Sp=Symbol("radix.slottable");function IC(e){const t=({children:r})=>f.jsx(f.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=Sp,t}function FC(e){return C.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Sp}function LC(e,t){const r={...t};for(const n in t){const o=e[n],i=t[n];/^on[A-Z]/.test(n)?o&&i?r[n]=(...s)=>{const l=i(...s);return o(...s),l}:o&&(r[n]=o):n==="style"?r[n]={...o,...i}:n==="className"&&(r[n]=[o,i].filter(Boolean).join(" "))}return{...e,...r}}function BC(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const Cp=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Ep=Ni,Oc=(e,t)=>r=>{var n;if(t?.variants==null)return Ep(e,r?.class,r?.className);const{variants:o,defaultVariants:i}=t,a=Object.keys(o).map(c=>{const u=r?.[c],d=i?.[c];if(u===null)return null;const h=Cp(u)||Cp(d);return o[c][h]}),s=r&&Object.entries(r).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:d,className:h,...p}=u;return Object.entries(p).every(g=>{let[v,m]=g;return Array.isArray(m)?m.includes({...i,...s}[v]):{...i,...s}[v]===m})?[...c,d,h]:c},[]);return Ep(e,a,l,r?.class,r?.className)};function _e(...e){return xp(Ni(e))}const zC=Oc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Oe({className:e,variant:t,size:r,asChild:n=!1,...o}){const i=n?AC:"button";return f.jsx(i,{"data-slot":"button",className:_e(zC({variant:t,size:r,className:e})),...o})}const In=C.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:_e("rounded-xl border bg-card text-card-foreground shadow",e),...t}));In.displayName="Card";const _p=C.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:_e("flex flex-col space-y-1.5 p-6",e),...t}));_p.displayName="CardHeader";const Np=C.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:_e("font-semibold leading-none tracking-tight",e),...t}));Np.displayName="CardTitle";const $C=C.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:_e("text-sm text-muted-foreground",e),...t}));$C.displayName="CardDescription";const bo=C.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:_e("p-6 pt-0",e),...t}));bo.displayName="CardContent";const GC=C.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:_e("flex items-center p-6 pt-0",e),...t}));GC.displayName="CardFooter";function de(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e?.(o),r===!1||!o.defaultPrevented)return t?.(o)}}function VC(e,t){const r=C.createContext(t),n=i=>{const{children:a,...s}=i,l=C.useMemo(()=>s,Object.values(s));return f.jsx(r.Provider,{value:l,children:a})};n.displayName=e+"Provider";function o(i){const a=C.useContext(r);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,o]}function Ot(e,t=[]){let r=[];function n(i,a){const s=C.createContext(a),l=r.length;r=[...r,a];const c=d=>{const{scope:h,children:p,...g}=d,v=h?.[e]?.[l]||s,m=C.useMemo(()=>g,Object.values(g));return f.jsx(v.Provider,{value:m,children:p})};c.displayName=i+"Provider";function u(d,h){const p=h?.[e]?.[l]||s,g=C.useContext(p);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[c,u]}const o=()=>{const i=r.map(a=>C.createContext(a));return function(s){const l=s?.[e]||i;return C.useMemo(()=>({[`__scope${e}`]:{...s,[e]:l}}),[s,l])}};return o.scopeName=e,[n,UC(o,...t)]}function UC(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const a=n.reduce((s,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...s,...d}},{});return C.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var xt=globalThis?.document?C.useLayoutEffect:()=>{},HC=C[" useId ".trim().toString()]||(()=>{}),WC=0;function Xt(e){const[t,r]=C.useState(HC());return xt(()=>{r(n=>n??String(WC++))},[e]),t?`radix-${t}`:""}var YC=C[" useInsertionEffect ".trim().toString()]||xt;function fr({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[o,i,a]=qC({defaultProp:t,onChange:r}),s=e!==void 0,l=s?e:o;{const u=C.useRef(e!==void 0);C.useEffect(()=>{const d=u.current;d!==s&&console.warn(`${n} is changing from ${d?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=s},[s,n])}const c=C.useCallback(u=>{if(s){const d=XC(u)?u(e):u;d!==e&&a.current?.(d)}else i(u)},[s,e,i,a]);return[l,c]}function qC({defaultProp:e,onChange:t}){const[r,n]=C.useState(e),o=C.useRef(r),i=C.useRef(t);return YC(()=>{i.current=t},[t]),C.useEffect(()=>{o.current!==r&&(i.current?.(r),o.current=r)},[r,o]),[r,n,i]}function XC(e){return typeof e=="function"}var KC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xe=KC.reduce((e,t)=>{const r=On(`Primitive.${t}`),n=C.forwardRef((o,i)=>{const{asChild:a,...s}=o,l=a?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(l,{...s,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Dp(e,t){e&&Ka.flushSync(()=>e.dispatchEvent(t))}function wt(e){const t=C.useRef(e);return C.useEffect(()=>{t.current=e}),C.useMemo(()=>(...r)=>t.current?.(...r),[])}function ZC(e,t=globalThis?.document){const r=wt(e);C.useEffect(()=>{const n=o=>{o.key==="Escape"&&r(o)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var QC="DismissableLayer",Ic="dismissableLayer.update",JC="dismissableLayer.pointerDownOutside",eE="dismissableLayer.focusOutside",Tp,Mp=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Mi=C.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:a,onDismiss:s,...l}=e,c=C.useContext(Mp),[u,d]=C.useState(null),h=u?.ownerDocument??globalThis?.document,[,p]=C.useState({}),g=Ee(t,j=>d(j)),v=Array.from(c.layers),[m]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(m),y=u?v.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,w=y>=x,_=nE(j=>{const k=j.target,R=[...c.branches].some(A=>A.contains(k));!w||R||(o?.(j),a?.(j),j.defaultPrevented||s?.())},h),T=oE(j=>{const k=j.target;[...c.branches].some(A=>A.contains(k))||(i?.(j),a?.(j),j.defaultPrevented||s?.())},h);return ZC(j=>{y===c.layers.size-1&&(n?.(j),!j.defaultPrevented&&s&&(j.preventDefault(),s()))},h),C.useEffect(()=>{if(u)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Tp=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),jp(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Tp)}},[u,h,r,c]),C.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),jp())},[u,c]),C.useEffect(()=>{const j=()=>p({});return document.addEventListener(Ic,j),()=>document.removeEventListener(Ic,j)},[]),f.jsx(xe.div,{...l,ref:g,style:{pointerEvents:b?w?"auto":"none":void 0,...e.style},onFocusCapture:de(e.onFocusCapture,T.onFocusCapture),onBlurCapture:de(e.onBlurCapture,T.onBlurCapture),onPointerDownCapture:de(e.onPointerDownCapture,_.onPointerDownCapture)})});Mi.displayName=QC;var tE="DismissableLayerBranch",rE=C.forwardRef((e,t)=>{const r=C.useContext(Mp),n=C.useRef(null),o=Ee(t,n);return C.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),f.jsx(xe.div,{...e,ref:o})});rE.displayName=tE;function nE(e,t=globalThis?.document){const r=wt(e),n=C.useRef(!1),o=C.useRef(()=>{});return C.useEffect(()=>{const i=s=>{if(s.target&&!n.current){let l=function(){Rp(JC,r,c,{discrete:!0})};const c={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=l,t.addEventListener("click",o.current,{once:!0})):l()}else t.removeEventListener("click",o.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",i),t.removeEventListener("click",o.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function oE(e,t=globalThis?.document){const r=wt(e),n=C.useRef(!1);return C.useEffect(()=>{const o=i=>{i.target&&!n.current&&Rp(eE,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function jp(){const e=new CustomEvent(Ic);document.dispatchEvent(e)}function Rp(e,t,r,{discrete:n}){const o=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&o.addEventListener(e,t,{once:!0}),n?Dp(o,i):o.dispatchEvent(i)}var Fc="focusScope.autoFocusOnMount",Lc="focusScope.autoFocusOnUnmount",kp={bubbles:!1,cancelable:!0},iE="FocusScope",ss=C.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...a}=e,[s,l]=C.useState(null),c=wt(o),u=wt(i),d=C.useRef(null),h=Ee(t,v=>l(v)),p=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect(()=>{if(n){let v=function(b){if(p.paused||!s)return;const w=b.target;s.contains(w)?d.current=w:ln(d.current,{select:!0})},m=function(b){if(p.paused||!s)return;const w=b.relatedTarget;w!==null&&(s.contains(w)||ln(d.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const _ of b)_.removedNodes.length>0&&ln(s)};document.addEventListener("focusin",v),document.addEventListener("focusout",m);const y=new MutationObserver(x);return s&&y.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",m),y.disconnect()}}},[n,s,p.paused]),C.useEffect(()=>{if(s){Op.add(p);const v=document.activeElement;if(!s.contains(v)){const x=new CustomEvent(Fc,kp);s.addEventListener(Fc,c),s.dispatchEvent(x),x.defaultPrevented||(aE(dE(Pp(s)),{select:!0}),document.activeElement===v&&ln(s))}return()=>{s.removeEventListener(Fc,c),setTimeout(()=>{const x=new CustomEvent(Lc,kp);s.addEventListener(Lc,u),s.dispatchEvent(x),x.defaultPrevented||ln(v??document.body,{select:!0}),s.removeEventListener(Lc,u),Op.remove(p)},0)}}},[s,c,u,p]);const g=C.useCallback(v=>{if(!r&&!n||p.paused)return;const m=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(m&&x){const y=v.currentTarget,[b,w]=sE(y);b&&w?!v.shiftKey&&x===w?(v.preventDefault(),r&&ln(b,{select:!0})):v.shiftKey&&x===b&&(v.preventDefault(),r&&ln(w,{select:!0})):x===y&&v.preventDefault()}},[r,n,p.paused]);return f.jsx(xe.div,{tabIndex:-1,...a,ref:h,onKeyDown:g})});ss.displayName=iE;function aE(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(ln(n,{select:t}),document.activeElement!==r)return}function sE(e){const t=Pp(e),r=Ap(t,e),n=Ap(t.reverse(),e);return[r,n]}function Pp(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const o=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||o?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Ap(e,t){for(const r of e)if(!lE(r,{upTo:t}))return r}function lE(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function cE(e){return e instanceof HTMLInputElement&&"select"in e}function ln(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&cE(e)&&t&&e.select()}}var Op=uE();function uE(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=Ip(e,t),e.unshift(t)},remove(t){e=Ip(e,t),e[0]?.resume()}}}function Ip(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function dE(e){return e.filter(t=>t.tagName!=="A")}var fE="Portal",ji=C.forwardRef((e,t)=>{const{container:r,...n}=e,[o,i]=C.useState(!1);xt(()=>i(!0),[]);const a=r||o&&globalThis?.document?.body;return a?xc.createPortal(f.jsx(xe.div,{...n,ref:t}),a):null});ji.displayName=fE;function hE(e,t){return C.useReducer((r,n)=>t[r][n]??r,e)}var St=e=>{const{present:t,children:r}=e,n=pE(t),o=typeof r=="function"?r({present:n.isPresent}):C.Children.only(r),i=Ee(n.ref,vE(o));return typeof r=="function"||n.isPresent?C.cloneElement(o,{ref:i}):null};St.displayName="Presence";function pE(e){const[t,r]=C.useState(),n=C.useRef(null),o=C.useRef(e),i=C.useRef("none"),a=e?"mounted":"unmounted",[s,l]=hE(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const c=ls(n.current);i.current=s==="mounted"?c:"none"},[s]),xt(()=>{const c=n.current,u=o.current;if(u!==e){const h=i.current,p=ls(c);e?l("MOUNT"):p==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,l]),xt(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,d=p=>{const v=ls(n.current).includes(p.animationName);if(p.target===t&&v&&(l("ANIMATION_END"),!o.current)){const m=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=m)})}},h=p=>{p.target===t&&(i.current=ls(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:C.useCallback(c=>{n.current=c?getComputedStyle(c):null,r(c)},[])}}function ls(e){return e?.animationName||"none"}function vE(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Bc=0;function zc(){C.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Fp()),document.body.insertAdjacentElement("beforeend",e[1]??Fp()),Bc++,()=>{Bc===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Bc--}},[])}function Fp(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Rr=function(){return Rr=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Rr.apply(this,arguments)};function Lp(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function gE(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}typeof SuppressedError=="function"&&SuppressedError;var cs="right-scroll-bar-position",us="width-before-scroll-bar",mE="with-scroll-bars-hidden",xE="--removed-body-scroll-bar-size";function $c(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function yE(e,t){var r=X.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var o=r.value;o!==n&&(r.value=n,r.callback(n,o))}}}})[0];return r.callback=t,r.facade}var bE=typeof window<"u"?C.useLayoutEffect:C.useEffect,Bp=new WeakMap;function wE(e,t){var r=yE(null,function(n){return e.forEach(function(o){return $c(o,n)})});return bE(function(){var n=Bp.get(r);if(n){var o=new Set(n),i=new Set(e),a=r.current;o.forEach(function(s){i.has(s)||$c(s,null)}),i.forEach(function(s){o.has(s)||$c(s,a)})}Bp.set(r,e)},[e]),r}function SE(e){return e}function CE(e,t){t===void 0&&(t=SE);var r=[],n=!1,o={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var a=t(i,n);return r.push(a),function(){r=r.filter(function(s){return s!==a})}},assignSyncMedium:function(i){for(n=!0;r.length;){var a=r;r=[],a.forEach(i)}r={push:function(s){return i(s)},filter:function(){return r}}},assignMedium:function(i){n=!0;var a=[];if(r.length){var s=r;r=[],s.forEach(i),a=r}var l=function(){var u=a;a=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),r={push:function(u){a.push(u),c()},filter:function(u){return a=a.filter(u),r}}}};return o}function EE(e){e===void 0&&(e={});var t=CE(null);return t.options=Rr({async:!0,ssr:!1},e),t}var zp=function(e){var t=e.sideCar,r=Lp(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return C.createElement(n,Rr({},r))};zp.isSideCarExport=!0;function _E(e,t){return e.useMedium(t),zp}var $p=EE(),Gc=function(){},ds=C.forwardRef(function(e,t){var r=C.useRef(null),n=C.useState({onScrollCapture:Gc,onWheelCapture:Gc,onTouchMoveCapture:Gc}),o=n[0],i=n[1],a=e.forwardProps,s=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,h=e.sideCar,p=e.noRelative,g=e.noIsolation,v=e.inert,m=e.allowPinchZoom,x=e.as,y=x===void 0?"div":x,b=e.gapMode,w=Lp(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=h,T=wE([r,t]),j=Rr(Rr({},w),o);return C.createElement(C.Fragment,null,u&&C.createElement(_,{sideCar:$p,removeScrollBar:c,shards:d,noRelative:p,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!m,lockRef:r,gapMode:b}),a?C.cloneElement(C.Children.only(s),Rr(Rr({},j),{ref:T})):C.createElement(y,Rr({},j,{className:l,ref:T}),s))});ds.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},ds.classNames={fullWidth:us,zeroRight:cs};var NE=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function DE(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=NE();return t&&e.setAttribute("nonce",t),e}function TE(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function ME(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var jE=function(){var e=0,t=null;return{add:function(r){e==0&&(t=DE())&&(TE(t,r),ME(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},RE=function(){var e=jE();return function(t,r){C.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},Gp=function(){var e=RE(),t=function(r){var n=r.styles,o=r.dynamic;return e(n,o),null};return t},kE={left:0,top:0,right:0,gap:0},Vc=function(e){return parseInt(e||"",10)||0},PE=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[Vc(r),Vc(n),Vc(o)]},AE=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return kE;var t=PE(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},OE=Gp(),wo="data-scroll-locked",IE=function(e,t,r,n){var o=e.left,i=e.top,a=e.right,s=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(mE,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(s,"px ").concat(n,`;
  }
  body[`).concat(wo,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(s,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(cs,` {
    right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(us,` {
    margin-right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(cs," .").concat(cs,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(us," .").concat(us,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(wo,`] {
    `).concat(xE,": ").concat(s,`px;
  }
`)},Vp=function(){var e=parseInt(document.body.getAttribute(wo)||"0",10);return isFinite(e)?e:0},FE=function(){C.useEffect(function(){return document.body.setAttribute(wo,(Vp()+1).toString()),function(){var e=Vp()-1;e<=0?document.body.removeAttribute(wo):document.body.setAttribute(wo,e.toString())}},[])},LE=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,o=n===void 0?"margin":n;FE();var i=C.useMemo(function(){return AE(o)},[o]);return C.createElement(OE,{styles:IE(i,!t,o,r?"":"!important")})},Uc=!1;if(typeof window<"u")try{var fs=Object.defineProperty({},"passive",{get:function(){return Uc=!0,!0}});window.addEventListener("test",fs,fs),window.removeEventListener("test",fs,fs)}catch{Uc=!1}var So=Uc?{passive:!1}:!1,BE=function(e){return e.tagName==="TEXTAREA"},Up=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!BE(e)&&r[t]==="visible")},zE=function(e){return Up(e,"overflowY")},$E=function(e){return Up(e,"overflowX")},Hp=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var o=Wp(e,n);if(o){var i=Yp(e,n),a=i[1],s=i[2];if(a>s)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},GE=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},VE=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Wp=function(e,t){return e==="v"?zE(t):$E(t)},Yp=function(e,t){return e==="v"?GE(t):VE(t)},UE=function(e,t){return e==="h"&&t==="rtl"?-1:1},HE=function(e,t,r,n,o){var i=UE(e,window.getComputedStyle(t).direction),a=i*n,s=r.target,l=t.contains(s),c=!1,u=a>0,d=0,h=0;do{if(!s)break;var p=Yp(e,s),g=p[0],v=p[1],m=p[2],x=v-m-i*g;(g||x)&&Wp(e,s)&&(d+=x,h+=g);var y=s.parentNode;s=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!l&&s!==document.body||l&&(t.contains(s)||t===s));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(c=!0),c},hs=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},qp=function(e){return[e.deltaX,e.deltaY]},Xp=function(e){return e&&"current"in e?e.current:e},WE=function(e,t){return e[0]===t[0]&&e[1]===t[1]},YE=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},qE=0,Co=[];function XE(e){var t=C.useRef([]),r=C.useRef([0,0]),n=C.useRef(),o=C.useState(qE++)[0],i=C.useState(Gp)[0],a=C.useRef(e);C.useEffect(function(){a.current=e},[e]),C.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var v=gE([e.lockRef.current],(e.shards||[]).map(Xp),!0).filter(Boolean);return v.forEach(function(m){return m.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),v.forEach(function(m){return m.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var s=C.useCallback(function(v,m){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var x=hs(v),y=r.current,b="deltaX"in v?v.deltaX:y[0]-x[0],w="deltaY"in v?v.deltaY:y[1]-x[1],_,T=v.target,j=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in v&&j==="h"&&T.type==="range")return!1;var k=Hp(j,T);if(!k)return!0;if(k?_=j:(_=j==="v"?"h":"v",k=Hp(j,T)),!k)return!1;if(!n.current&&"changedTouches"in v&&(b||w)&&(n.current=_),!_)return!0;var R=n.current||_;return HE(R,m,v,R==="h"?b:w)},[]),l=C.useCallback(function(v){var m=v;if(!(!Co.length||Co[Co.length-1]!==i)){var x="deltaY"in m?qp(m):hs(m),y=t.current.filter(function(_){return _.name===m.type&&(_.target===m.target||m.target===_.shadowParent)&&WE(_.delta,x)})[0];if(y&&y.should){m.cancelable&&m.preventDefault();return}if(!y){var b=(a.current.shards||[]).map(Xp).filter(Boolean).filter(function(_){return _.contains(m.target)}),w=b.length>0?s(m,b[0]):!a.current.noIsolation;w&&m.cancelable&&m.preventDefault()}}},[]),c=C.useCallback(function(v,m,x,y){var b={name:v,delta:m,target:x,should:y,shadowParent:KE(x)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),u=C.useCallback(function(v){r.current=hs(v),n.current=void 0},[]),d=C.useCallback(function(v){c(v.type,qp(v),v.target,s(v,e.lockRef.current))},[]),h=C.useCallback(function(v){c(v.type,hs(v),v.target,s(v,e.lockRef.current))},[]);C.useEffect(function(){return Co.push(i),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,So),document.addEventListener("touchmove",l,So),document.addEventListener("touchstart",u,So),function(){Co=Co.filter(function(v){return v!==i}),document.removeEventListener("wheel",l,So),document.removeEventListener("touchmove",l,So),document.removeEventListener("touchstart",u,So)}},[]);var p=e.removeScrollBar,g=e.inert;return C.createElement(C.Fragment,null,g?C.createElement(i,{styles:YE(o)}):null,p?C.createElement(LE,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function KE(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ZE=_E($p,XE);var ps=C.forwardRef(function(e,t){return C.createElement(ds,Rr({},e,{ref:t,sideCar:ZE}))});ps.classNames=ds.classNames;var QE=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Eo=new WeakMap,vs=new WeakMap,gs={},Hc=0,Kp=function(e){return e&&(e.host||Kp(e.parentNode))},JE=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=Kp(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},e_=function(e,t,r,n){var o=JE(t,Array.isArray(e)?e:[e]);gs[r]||(gs[r]=new WeakMap);var i=gs[r],a=[],s=new Set,l=new Set(o),c=function(d){!d||s.has(d)||(s.add(d),c(d.parentNode))};o.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(s.has(h))u(h);else try{var p=h.getAttribute(n),g=p!==null&&p!=="false",v=(Eo.get(h)||0)+1,m=(i.get(h)||0)+1;Eo.set(h,v),i.set(h,m),a.push(h),v===1&&g&&vs.set(h,!0),m===1&&h.setAttribute(r,"true"),g||h.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return u(t),s.clear(),Hc++,function(){a.forEach(function(d){var h=Eo.get(d)-1,p=i.get(d)-1;Eo.set(d,h),i.set(d,p),h||(vs.has(d)||d.removeAttribute(n),vs.delete(d)),p||d.removeAttribute(r)}),Hc--,Hc||(Eo=new WeakMap,Eo=new WeakMap,vs=new WeakMap,gs={})}},Wc=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),o=QE(e);return o?(n.push.apply(n,Array.from(o.querySelectorAll("[aria-live], script"))),e_(n,o,r,"aria-hidden")):function(){return null}},ms="Dialog",[Zp,J5]=Ot(ms),[t_,hr]=Zp(ms),Qp=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:o,onOpenChange:i,modal:a=!0}=e,s=C.useRef(null),l=C.useRef(null),[c,u]=fr({prop:n,defaultProp:o??!1,onChange:i,caller:ms});return f.jsx(t_,{scope:t,triggerRef:s,contentRef:l,contentId:Xt(),titleId:Xt(),descriptionId:Xt(),open:c,onOpenChange:u,onOpenToggle:C.useCallback(()=>u(d=>!d),[u]),modal:a,children:r})};Qp.displayName=ms;var Jp="DialogTrigger",ev=C.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=hr(Jp,r),i=Ee(t,o.triggerRef);return f.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Xc(o.open),...n,ref:i,onClick:de(e.onClick,o.onOpenToggle)})});ev.displayName=Jp;var Yc="DialogPortal",[r_,tv]=Zp(Yc,{forceMount:void 0}),rv=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:o}=e,i=hr(Yc,t);return f.jsx(r_,{scope:t,forceMount:r,children:C.Children.map(n,a=>f.jsx(St,{present:r||i.open,children:f.jsx(ji,{asChild:!0,container:o,children:a})}))})};rv.displayName=Yc;var xs="DialogOverlay",nv=C.forwardRef((e,t)=>{const r=tv(xs,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,i=hr(xs,e.__scopeDialog);return i.modal?f.jsx(St,{present:n||i.open,children:f.jsx(o_,{...o,ref:t})}):null});nv.displayName=xs;var n_=On("DialogOverlay.RemoveScroll"),o_=C.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=hr(xs,r);return f.jsx(ps,{as:n_,allowPinchZoom:!0,shards:[o.contentRef],children:f.jsx(xe.div,{"data-state":Xc(o.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Fn="DialogContent",ov=C.forwardRef((e,t)=>{const r=tv(Fn,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,i=hr(Fn,e.__scopeDialog);return f.jsx(St,{present:n||i.open,children:i.modal?f.jsx(i_,{...o,ref:t}):f.jsx(a_,{...o,ref:t})})});ov.displayName=Fn;var i_=C.forwardRef((e,t)=>{const r=hr(Fn,e.__scopeDialog),n=C.useRef(null),o=Ee(t,r.contentRef,n);return C.useEffect(()=>{const i=n.current;if(i)return Wc(i)},[]),f.jsx(iv,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:de(e.onCloseAutoFocus,i=>{i.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:de(e.onPointerDownOutside,i=>{const a=i.detail.originalEvent,s=a.button===0&&a.ctrlKey===!0;(a.button===2||s)&&i.preventDefault()}),onFocusOutside:de(e.onFocusOutside,i=>i.preventDefault())})}),a_=C.forwardRef((e,t)=>{const r=hr(Fn,e.__scopeDialog),n=C.useRef(!1),o=C.useRef(!1);return f.jsx(iv,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,o.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const a=i.target;r.triggerRef.current?.contains(a)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),iv=C.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:i,...a}=e,s=hr(Fn,r),l=C.useRef(null),c=Ee(t,l);return zc(),f.jsxs(f.Fragment,{children:[f.jsx(ss,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:i,children:f.jsx(Mi,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":Xc(s.open),...a,ref:c,onDismiss:()=>s.onOpenChange(!1)})}),f.jsxs(f.Fragment,{children:[f.jsx(l_,{titleId:s.titleId}),f.jsx(u_,{contentRef:l,descriptionId:s.descriptionId})]})]})}),qc="DialogTitle",av=C.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=hr(qc,r);return f.jsx(xe.h2,{id:o.titleId,...n,ref:t})});av.displayName=qc;var sv="DialogDescription",s_=C.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=hr(sv,r);return f.jsx(xe.p,{id:o.descriptionId,...n,ref:t})});s_.displayName=sv;var lv="DialogClose",cv=C.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=hr(lv,r);return f.jsx(xe.button,{type:"button",...n,ref:t,onClick:de(e.onClick,()=>o.onOpenChange(!1))})});cv.displayName=lv;function Xc(e){return e?"open":"closed"}var uv="DialogTitleWarning",[eF,dv]=VC(uv,{contentName:Fn,titleName:qc,docsSlug:"dialog"}),l_=({titleId:e})=>{const t=dv(uv),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return C.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},c_="DialogDescriptionWarning",u_=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${dv(c_).contentName}}.`;return C.useEffect(()=>{const o=e.current?.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},d_=Qp,f_=ev,h_=rv,p_=nv,v_=ov,g_=av,m_=cv;function fv({...e}){return f.jsx(d_,{"data-slot":"dialog",...e})}function hv({...e}){return f.jsx(f_,{"data-slot":"dialog-trigger",...e})}function x_({...e}){return f.jsx(h_,{"data-slot":"dialog-portal",...e})}function y_({className:e,...t}){return f.jsx(p_,{"data-slot":"dialog-overlay",className:_e("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function pv({className:e,children:t,showCloseButton:r=!0,...n}){return f.jsxs(x_,{"data-slot":"dialog-portal",children:[f.jsx(y_,{}),f.jsxs(v_,{"data-slot":"dialog-content",className:_e("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,r&&f.jsxs(m_,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[f.jsx(os,{}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function b_({className:e,...t}){return f.jsx("div",{"data-slot":"dialog-header",className:_e("flex flex-col gap-2 text-center sm:text-left",e),...t})}function vv({className:e,...t}){return f.jsx(g_,{"data-slot":"dialog-title",className:_e("text-lg leading-none font-semibold",e),...t})}const w_=["top","right","bottom","left"],cn=Math.min,Vt=Math.max,ys=Math.round,bs=Math.floor,kr=e=>({x:e,y:e}),S_={left:"right",right:"left",bottom:"top",top:"bottom"},C_={start:"end",end:"start"};function Kc(e,t,r){return Vt(e,cn(t,r))}function Kr(e,t){return typeof e=="function"?e(t):e}function Zr(e){return e.split("-")[0]}function _o(e){return e.split("-")[1]}function Zc(e){return e==="x"?"y":"x"}function Qc(e){return e==="y"?"height":"width"}function Pr(e){return["top","bottom"].includes(Zr(e))?"y":"x"}function Jc(e){return Zc(Pr(e))}function E_(e,t,r){r===void 0&&(r=!1);const n=_o(e),o=Jc(e),i=Qc(o);let a=o==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=ws(a)),[a,ws(a)]}function __(e){const t=ws(e);return[eu(e),t,eu(t)]}function eu(e){return e.replace(/start|end/g,t=>C_[t])}function N_(e,t,r){const n=["left","right"],o=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return r?t?o:n:t?n:o;case"left":case"right":return t?i:a;default:return[]}}function D_(e,t,r,n){const o=_o(e);let i=N_(Zr(e),r==="start",n);return o&&(i=i.map(a=>a+"-"+o),t&&(i=i.concat(i.map(eu)))),i}function ws(e){return e.replace(/left|right|bottom|top/g,t=>S_[t])}function T_(e){return{top:0,right:0,bottom:0,left:0,...e}}function gv(e){return typeof e!="number"?T_(e):{top:e,right:e,bottom:e,left:e}}function Ss(e){const{x:t,y:r,width:n,height:o}=e;return{width:n,height:o,top:r,left:t,right:t+n,bottom:r+o,x:t,y:r}}function mv(e,t,r){let{reference:n,floating:o}=e;const i=Pr(t),a=Jc(t),s=Qc(a),l=Zr(t),c=i==="y",u=n.x+n.width/2-o.width/2,d=n.y+n.height/2-o.height/2,h=n[s]/2-o[s]/2;let p;switch(l){case"top":p={x:u,y:n.y-o.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:d};break;case"left":p={x:n.x-o.width,y:d};break;default:p={x:n.x,y:n.y}}switch(_o(t)){case"start":p[a]-=h*(r&&c?-1:1);break;case"end":p[a]+=h*(r&&c?-1:1);break}return p}const M_=async(e,t,r)=>{const{placement:n="bottom",strategy:o="absolute",middleware:i=[],platform:a}=r,s=i.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:d}=mv(c,n,l),h=n,p={},g=0;for(let v=0;v<s.length;v++){const{name:m,fn:x}=s[v],{x:y,y:b,data:w,reset:_}=await x({x:u,y:d,initialPlacement:n,placement:h,strategy:o,middlewareData:p,rects:c,platform:a,elements:{reference:e,floating:t}});u=y??u,d=b??d,p={...p,[m]:{...p[m],...w}},_&&g<=50&&(g++,typeof _=="object"&&(_.placement&&(h=_.placement),_.rects&&(c=_.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:o}):_.rects),{x:u,y:d}=mv(c,h,l)),v=-1)}return{x:u,y:d,placement:h,strategy:o,middlewareData:p}};async function Ri(e,t){var r;t===void 0&&(t={});const{x:n,y:o,platform:i,rects:a,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=Kr(t,e),g=gv(p),m=s[h?d==="floating"?"reference":"floating":d],x=Ss(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(m)))==null||r?m:m.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:l})),y=d==="floating"?{x:n,y:o,width:a.floating.width,height:a.floating.height}:a.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),w=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},_=Ss(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:y,offsetParent:b,strategy:l}):y);return{top:(x.top-_.top+g.top)/w.y,bottom:(_.bottom-x.bottom+g.bottom)/w.y,left:(x.left-_.left+g.left)/w.x,right:(_.right-x.right+g.right)/w.x}}const j_=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:o,rects:i,platform:a,elements:s,middlewareData:l}=t,{element:c,padding:u=0}=Kr(e,t)||{};if(c==null)return{};const d=gv(u),h={x:r,y:n},p=Jc(o),g=Qc(p),v=await a.getDimensions(c),m=p==="y",x=m?"top":"left",y=m?"bottom":"right",b=m?"clientHeight":"clientWidth",w=i.reference[g]+i.reference[p]-h[p]-i.floating[g],_=h[p]-i.reference[p],T=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let j=T?T[b]:0;(!j||!await(a.isElement==null?void 0:a.isElement(T)))&&(j=s.floating[b]||i.floating[g]);const k=w/2-_/2,R=j/2-v[g]/2-1,A=cn(d[x],R),$=cn(d[y],R),F=A,L=j-v[g]-$,P=j/2-v[g]/2+k,O=Kc(F,P,L),I=!l.arrow&&_o(o)!=null&&P!==O&&i.reference[g]/2-(P<F?A:$)-v[g]/2<0,E=I?P<F?P-F:P-L:0;return{[p]:h[p]+E,data:{[p]:O,centerOffset:P-O-E,...I&&{alignmentOffset:E}},reset:I}}}),R_=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:o,middlewareData:i,rects:a,initialPlacement:s,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...m}=Kr(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const x=Zr(o),y=Pr(s),b=Zr(s)===s,w=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=h||(b||!v?[ws(s)]:__(s)),T=g!=="none";!h&&T&&_.push(...D_(s,v,g,w));const j=[s,..._],k=await Ri(t,m),R=[];let A=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&R.push(k[x]),d){const P=E_(o,a,w);R.push(k[P[0]],k[P[1]])}if(A=[...A,{placement:o,overflows:R}],!R.every(P=>P<=0)){var $,F;const P=((($=i.flip)==null?void 0:$.index)||0)+1,O=j[P];if(O&&(!(d==="alignment"?y!==Pr(O):!1)||A.every(S=>S.overflows[0]>0&&Pr(S.placement)===y)))return{data:{index:P,overflows:A},reset:{placement:O}};let I=(F=A.filter(E=>E.overflows[0]<=0).sort((E,S)=>E.overflows[1]-S.overflows[1])[0])==null?void 0:F.placement;if(!I)switch(p){case"bestFit":{var L;const E=(L=A.filter(S=>{if(T){const M=Pr(S.placement);return M===y||M==="y"}return!0}).map(S=>[S.placement,S.overflows.filter(M=>M>0).reduce((M,D)=>M+D,0)]).sort((S,M)=>S[1]-M[1])[0])==null?void 0:L[0];E&&(I=E);break}case"initialPlacement":I=s;break}if(o!==I)return{reset:{placement:I}}}return{}}}};function xv(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function yv(e){return w_.some(t=>e[t]>=0)}const k_=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...o}=Kr(e,t);switch(n){case"referenceHidden":{const i=await Ri(t,{...o,elementContext:"reference"}),a=xv(i,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:yv(a)}}}case"escaped":{const i=await Ri(t,{...o,altBoundary:!0}),a=xv(i,r.floating);return{data:{escapedOffsets:a,escaped:yv(a)}}}default:return{}}}}};async function P_(e,t){const{placement:r,platform:n,elements:o}=e,i=await(n.isRTL==null?void 0:n.isRTL(o.floating)),a=Zr(r),s=_o(r),l=Pr(r)==="y",c=["left","top"].includes(a)?-1:1,u=i&&l?-1:1,d=Kr(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&typeof g=="number"&&(p=s==="end"?g*-1:g),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}const A_=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:o,y:i,placement:a,middlewareData:s}=t,l=await P_(t,e);return a===((r=s.offset)==null?void 0:r.placement)&&(n=s.arrow)!=null&&n.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:a}}}}},O_=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:o}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:s={fn:m=>{let{x,y}=m;return{x,y}}},...l}=Kr(e,t),c={x:r,y:n},u=await Ri(t,l),d=Pr(Zr(o)),h=Zc(d);let p=c[h],g=c[d];if(i){const m=h==="y"?"top":"left",x=h==="y"?"bottom":"right",y=p+u[m],b=p-u[x];p=Kc(y,p,b)}if(a){const m=d==="y"?"top":"left",x=d==="y"?"bottom":"right",y=g+u[m],b=g-u[x];g=Kc(y,g,b)}const v=s.fn({...t,[h]:p,[d]:g});return{...v,data:{x:v.x-r,y:v.y-n,enabled:{[h]:i,[d]:a}}}}}},I_=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:o,rects:i,middlewareData:a}=t,{offset:s=0,mainAxis:l=!0,crossAxis:c=!0}=Kr(e,t),u={x:r,y:n},d=Pr(o),h=Zc(d);let p=u[h],g=u[d];const v=Kr(s,t),m=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const b=h==="y"?"height":"width",w=i.reference[h]-i.floating[b]+m.mainAxis,_=i.reference[h]+i.reference[b]-m.mainAxis;p<w?p=w:p>_&&(p=_)}if(c){var x,y;const b=h==="y"?"width":"height",w=["top","left"].includes(Zr(o)),_=i.reference[d]-i.floating[b]+(w&&((x=a.offset)==null?void 0:x[d])||0)+(w?0:m.crossAxis),T=i.reference[d]+i.reference[b]+(w?0:((y=a.offset)==null?void 0:y[d])||0)-(w?m.crossAxis:0);g<_?g=_:g>T&&(g=T)}return{[h]:p,[d]:g}}}},F_=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:o,rects:i,platform:a,elements:s}=t,{apply:l=()=>{},...c}=Kr(e,t),u=await Ri(t,c),d=Zr(o),h=_o(o),p=Pr(o)==="y",{width:g,height:v}=i.floating;let m,x;d==="top"||d==="bottom"?(m=d,x=h===(await(a.isRTL==null?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(x=d,m=h==="end"?"top":"bottom");const y=v-u.top-u.bottom,b=g-u.left-u.right,w=cn(v-u[m],y),_=cn(g-u[x],b),T=!t.middlewareData.shift;let j=w,k=_;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(k=b),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(j=y),T&&!h){const A=Vt(u.left,0),$=Vt(u.right,0),F=Vt(u.top,0),L=Vt(u.bottom,0);p?k=g-2*(A!==0||$!==0?A+$:Vt(u.left,u.right)):j=v-2*(F!==0||L!==0?F+L:Vt(u.top,u.bottom))}await l({...t,availableWidth:k,availableHeight:j});const R=await a.getDimensions(s.floating);return g!==R.width||v!==R.height?{reset:{rects:!0}}:{}}}};function Cs(){return typeof window<"u"}function No(e){return bv(e)?(e.nodeName||"").toLowerCase():"#document"}function Ut(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ar(e){var t;return(t=(bv(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function bv(e){return Cs()?e instanceof Node||e instanceof Ut(e).Node:!1}function pr(e){return Cs()?e instanceof Element||e instanceof Ut(e).Element:!1}function Or(e){return Cs()?e instanceof HTMLElement||e instanceof Ut(e).HTMLElement:!1}function wv(e){return!Cs()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ut(e).ShadowRoot}function ki(e){const{overflow:t,overflowX:r,overflowY:n,display:o}=vr(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(o)}function L_(e){return["table","td","th"].includes(No(e))}function Es(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function tu(e){const t=ru(),r=pr(e)?vr(e):e;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function B_(e){let t=un(e);for(;Or(t)&&!Do(t);){if(tu(t))return t;if(Es(t))return null;t=un(t)}return null}function ru(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Do(e){return["html","body","#document"].includes(No(e))}function vr(e){return Ut(e).getComputedStyle(e)}function _s(e){return pr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function un(e){if(No(e)==="html")return e;const t=e.assignedSlot||e.parentNode||wv(e)&&e.host||Ar(e);return wv(t)?t.host:t}function Sv(e){const t=un(e);return Do(t)?e.ownerDocument?e.ownerDocument.body:e.body:Or(t)&&ki(t)?t:Sv(t)}function Pi(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const o=Sv(e),i=o===((n=e.ownerDocument)==null?void 0:n.body),a=Ut(o);if(i){const s=nu(a);return t.concat(a,a.visualViewport||[],ki(o)?o:[],s&&r?Pi(s):[])}return t.concat(o,Pi(o,[],r))}function nu(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Cv(e){const t=vr(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const o=Or(e),i=o?e.offsetWidth:r,a=o?e.offsetHeight:n,s=ys(r)!==i||ys(n)!==a;return s&&(r=i,n=a),{width:r,height:n,$:s}}function ou(e){return pr(e)?e:e.contextElement}function To(e){const t=ou(e);if(!Or(t))return kr(1);const r=t.getBoundingClientRect(),{width:n,height:o,$:i}=Cv(t);let a=(i?ys(r.width):r.width)/n,s=(i?ys(r.height):r.height)/o;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const z_=kr(0);function Ev(e){const t=Ut(e);return!ru()||!t.visualViewport?z_:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function $_(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Ut(e)?!1:t}function Ln(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const o=e.getBoundingClientRect(),i=ou(e);let a=kr(1);t&&(n?pr(n)&&(a=To(n)):a=To(e));const s=$_(i,r,n)?Ev(i):kr(0);let l=(o.left+s.x)/a.x,c=(o.top+s.y)/a.y,u=o.width/a.x,d=o.height/a.y;if(i){const h=Ut(i),p=n&&pr(n)?Ut(n):n;let g=h,v=nu(g);for(;v&&n&&p!==g;){const m=To(v),x=v.getBoundingClientRect(),y=vr(v),b=x.left+(v.clientLeft+parseFloat(y.paddingLeft))*m.x,w=x.top+(v.clientTop+parseFloat(y.paddingTop))*m.y;l*=m.x,c*=m.y,u*=m.x,d*=m.y,l+=b,c+=w,g=Ut(v),v=nu(g)}}return Ss({width:u,height:d,x:l,y:c})}function iu(e,t){const r=_s(e).scrollLeft;return t?t.left+r:Ln(Ar(e)).left+r}function _v(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),o=n.left+t.scrollLeft-(r?0:iu(e,n)),i=n.top+t.scrollTop;return{x:o,y:i}}function G_(e){let{elements:t,rect:r,offsetParent:n,strategy:o}=e;const i=o==="fixed",a=Ar(n),s=t?Es(t.floating):!1;if(n===a||s&&i)return r;let l={scrollLeft:0,scrollTop:0},c=kr(1);const u=kr(0),d=Or(n);if((d||!d&&!i)&&((No(n)!=="body"||ki(a))&&(l=_s(n)),Or(n))){const p=Ln(n);c=To(n),u.x=p.x+n.clientLeft,u.y=p.y+n.clientTop}const h=a&&!d&&!i?_v(a,l,!0):kr(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:r.y*c.y-l.scrollTop*c.y+u.y+h.y}}function V_(e){return Array.from(e.getClientRects())}function U_(e){const t=Ar(e),r=_s(e),n=e.ownerDocument.body,o=Vt(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Vt(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+iu(e);const s=-r.scrollTop;return vr(n).direction==="rtl"&&(a+=Vt(t.clientWidth,n.clientWidth)-o),{width:o,height:i,x:a,y:s}}function H_(e,t){const r=Ut(e),n=Ar(e),o=r.visualViewport;let i=n.clientWidth,a=n.clientHeight,s=0,l=0;if(o){i=o.width,a=o.height;const c=ru();(!c||c&&t==="fixed")&&(s=o.offsetLeft,l=o.offsetTop)}return{width:i,height:a,x:s,y:l}}function W_(e,t){const r=Ln(e,!0,t==="fixed"),n=r.top+e.clientTop,o=r.left+e.clientLeft,i=Or(e)?To(e):kr(1),a=e.clientWidth*i.x,s=e.clientHeight*i.y,l=o*i.x,c=n*i.y;return{width:a,height:s,x:l,y:c}}function Nv(e,t,r){let n;if(t==="viewport")n=H_(e,r);else if(t==="document")n=U_(Ar(e));else if(pr(t))n=W_(t,r);else{const o=Ev(e);n={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Ss(n)}function Dv(e,t){const r=un(e);return r===t||!pr(r)||Do(r)?!1:vr(r).position==="fixed"||Dv(r,t)}function Y_(e,t){const r=t.get(e);if(r)return r;let n=Pi(e,[],!1).filter(s=>pr(s)&&No(s)!=="body"),o=null;const i=vr(e).position==="fixed";let a=i?un(e):e;for(;pr(a)&&!Do(a);){const s=vr(a),l=tu(a);!l&&s.position==="fixed"&&(o=null),(i?!l&&!o:!l&&s.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||ki(a)&&!l&&Dv(e,a))?n=n.filter(u=>u!==a):o=s,a=un(a)}return t.set(e,n),n}function q_(e){let{element:t,boundary:r,rootBoundary:n,strategy:o}=e;const a=[...r==="clippingAncestors"?Es(t)?[]:Y_(t,this._c):[].concat(r),n],s=a[0],l=a.reduce((c,u)=>{const d=Nv(t,u,o);return c.top=Vt(d.top,c.top),c.right=cn(d.right,c.right),c.bottom=cn(d.bottom,c.bottom),c.left=Vt(d.left,c.left),c},Nv(t,s,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function X_(e){const{width:t,height:r}=Cv(e);return{width:t,height:r}}function K_(e,t,r){const n=Or(t),o=Ar(t),i=r==="fixed",a=Ln(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const l=kr(0);function c(){l.x=iu(o)}if(n||!n&&!i)if((No(t)!=="body"||ki(o))&&(s=_s(t)),n){const p=Ln(t,!0,i,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else o&&c();i&&!n&&o&&c();const u=o&&!n&&!i?_v(o,s):kr(0),d=a.left+s.scrollLeft-l.x-u.x,h=a.top+s.scrollTop-l.y-u.y;return{x:d,y:h,width:a.width,height:a.height}}function au(e){return vr(e).position==="static"}function Tv(e,t){if(!Or(e)||vr(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Ar(e)===r&&(r=r.ownerDocument.body),r}function Mv(e,t){const r=Ut(e);if(Es(e))return r;if(!Or(e)){let o=un(e);for(;o&&!Do(o);){if(pr(o)&&!au(o))return o;o=un(o)}return r}let n=Tv(e,t);for(;n&&L_(n)&&au(n);)n=Tv(n,t);return n&&Do(n)&&au(n)&&!tu(n)?r:n||B_(e)||r}const Z_=async function(e){const t=this.getOffsetParent||Mv,r=this.getDimensions,n=await r(e.floating);return{reference:K_(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Q_(e){return vr(e).direction==="rtl"}const J_={convertOffsetParentRelativeRectToViewportRelativeRect:G_,getDocumentElement:Ar,getClippingRect:q_,getOffsetParent:Mv,getElementRects:Z_,getClientRects:V_,getDimensions:X_,getScale:To,isElement:pr,isRTL:Q_};function jv(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function e2(e,t){let r=null,n;const o=Ar(e);function i(){var s;clearTimeout(n),(s=r)==null||s.disconnect(),r=null}function a(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),i();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:p}=c;if(s||t(),!h||!p)return;const g=bs(d),v=bs(o.clientWidth-(u+h)),m=bs(o.clientHeight-(d+p)),x=bs(u),b={rootMargin:-g+"px "+-v+"px "+-m+"px "+-x+"px",threshold:Vt(0,cn(1,l))||1};let w=!0;function _(T){const j=T[0].intersectionRatio;if(j!==l){if(!w)return a();j?a(!1,j):n=setTimeout(()=>{a(!1,1e-7)},1e3)}j===1&&!jv(c,e.getBoundingClientRect())&&a(),w=!1}try{r=new IntersectionObserver(_,{...b,root:o.ownerDocument})}catch{r=new IntersectionObserver(_,b)}r.observe(e)}return a(!0),i}function t2(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=ou(e),u=o||i?[...c?Pi(c):[],...Pi(t)]:[];u.forEach(x=>{o&&x.addEventListener("scroll",r,{passive:!0}),i&&x.addEventListener("resize",r)});const d=c&&s?e2(c,r):null;let h=-1,p=null;a&&(p=new ResizeObserver(x=>{let[y]=x;y&&y.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),r()}),c&&!l&&p.observe(c),p.observe(t));let g,v=l?Ln(e):null;l&&m();function m(){const x=Ln(e);v&&!jv(v,x)&&r(),v=x,g=requestAnimationFrame(m)}return r(),()=>{var x;u.forEach(y=>{o&&y.removeEventListener("scroll",r),i&&y.removeEventListener("resize",r)}),d?.(),(x=p)==null||x.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const r2=A_,n2=O_,o2=R_,i2=F_,a2=k_,Rv=j_,s2=I_,l2=(e,t,r)=>{const n=new Map,o={platform:J_,...r},i={...o.platform,_c:n};return M_(e,t,{...o,platform:i})};var c2=typeof document<"u",u2=function(){},Ns=c2?X.useLayoutEffect:u2;function Ds(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Ds(e[n],t[n]))return!1;return!0}if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,o[n]))return!1;for(n=r;n--!==0;){const i=o[n];if(!(i==="_owner"&&e.$$typeof)&&!Ds(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function kv(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Pv(e,t){const r=kv(e);return Math.round(t*r)/r}function su(e){const t=C.useRef(e);return Ns(()=>{t.current=e}),t}function d2(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:o,elements:{reference:i,floating:a}={},transform:s=!0,whileElementsMounted:l,open:c}=e,[u,d]=C.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=C.useState(n);Ds(h,n)||p(n);const[g,v]=C.useState(null),[m,x]=C.useState(null),y=C.useCallback(S=>{S!==T.current&&(T.current=S,v(S))},[]),b=C.useCallback(S=>{S!==j.current&&(j.current=S,x(S))},[]),w=i||g,_=a||m,T=C.useRef(null),j=C.useRef(null),k=C.useRef(u),R=l!=null,A=su(l),$=su(o),F=su(c),L=C.useCallback(()=>{if(!T.current||!j.current)return;const S={placement:t,strategy:r,middleware:h};$.current&&(S.platform=$.current),l2(T.current,j.current,S).then(M=>{const D={...M,isPositioned:F.current!==!1};P.current&&!Ds(k.current,D)&&(k.current=D,Ka.flushSync(()=>{d(D)}))})},[h,t,r,$,F]);Ns(()=>{c===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,d(S=>({...S,isPositioned:!1})))},[c]);const P=C.useRef(!1);Ns(()=>(P.current=!0,()=>{P.current=!1}),[]),Ns(()=>{if(w&&(T.current=w),_&&(j.current=_),w&&_){if(A.current)return A.current(w,_,L);L()}},[w,_,L,A,R]);const O=C.useMemo(()=>({reference:T,floating:j,setReference:y,setFloating:b}),[y,b]),I=C.useMemo(()=>({reference:w,floating:_}),[w,_]),E=C.useMemo(()=>{const S={position:r,left:0,top:0};if(!I.floating)return S;const M=Pv(I.floating,u.x),D=Pv(I.floating,u.y);return s?{...S,transform:"translate("+M+"px, "+D+"px)",...kv(I.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:M,top:D}},[r,s,I.floating,u.x,u.y]);return C.useMemo(()=>({...u,update:L,refs:O,elements:I,floatingStyles:E}),[u,L,O,I,E])}const f2=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:o}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Rv({element:n.current,padding:o}).fn(r):{}:n?Rv({element:n,padding:o}).fn(r):{}}}},h2=(e,t)=>({...r2(e),options:[e,t]}),p2=(e,t)=>({...n2(e),options:[e,t]}),v2=(e,t)=>({...s2(e),options:[e,t]}),g2=(e,t)=>({...o2(e),options:[e,t]}),m2=(e,t)=>({...i2(e),options:[e,t]}),x2=(e,t)=>({...a2(e),options:[e,t]}),y2=(e,t)=>({...f2(e),options:[e,t]});var b2="Arrow",Av=C.forwardRef((e,t)=>{const{children:r,width:n=10,height:o=5,...i}=e;return f.jsx(xe.svg,{...i,ref:t,width:n,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});Av.displayName=b2;var w2=Av;function Ts(e){const[t,r]=C.useState(void 0);return xt(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const i=o[0];let a,s;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;a=c.inlineSize,s=c.blockSize}else a=e.offsetWidth,s=e.offsetHeight;r({width:a,height:s})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var lu="Popper",[Ov,Mo]=Ot(lu),[S2,Iv]=Ov(lu),Fv=e=>{const{__scopePopper:t,children:r}=e,[n,o]=C.useState(null);return f.jsx(S2,{scope:t,anchor:n,onAnchorChange:o,children:r})};Fv.displayName=lu;var Lv="PopperAnchor",Bv=C.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...o}=e,i=Iv(Lv,r),a=C.useRef(null),s=Ee(t,a);return C.useEffect(()=>{i.onAnchorChange(n?.current||a.current)}),n?null:f.jsx(xe.div,{...o,ref:s})});Bv.displayName=Lv;var cu="PopperContent",[C2,E2]=Ov(cu),zv=C.forwardRef((e,t)=>{const{__scopePopper:r,side:n="bottom",sideOffset:o=0,align:i="center",alignOffset:a=0,arrowPadding:s=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:g,...v}=e,m=Iv(cu,r),[x,y]=C.useState(null),b=Ee(t,q=>y(q)),[w,_]=C.useState(null),T=Ts(w),j=T?.width??0,k=T?.height??0,R=n+(i!=="center"?"-"+i:""),A=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},$=Array.isArray(c)?c:[c],F=$.length>0,L={padding:A,boundary:$.filter(N2),altBoundary:F},{refs:P,floatingStyles:O,placement:I,isPositioned:E,middlewareData:S}=d2({strategy:"fixed",placement:R,whileElementsMounted:(...q)=>t2(...q,{animationFrame:p==="always"}),elements:{reference:m.anchor},middleware:[h2({mainAxis:o+k,alignmentAxis:a}),l&&p2({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?v2():void 0,...L}),l&&g2({...L}),m2({...L,apply:({elements:q,rects:Z,availableWidth:oe,availableHeight:ie})=>{const{width:re,height:G}=Z.reference,te=q.floating.style;te.setProperty("--radix-popper-available-width",`${oe}px`),te.setProperty("--radix-popper-available-height",`${ie}px`),te.setProperty("--radix-popper-anchor-width",`${re}px`),te.setProperty("--radix-popper-anchor-height",`${G}px`)}}),w&&y2({element:w,padding:s}),D2({arrowWidth:j,arrowHeight:k}),h&&x2({strategy:"referenceHidden",...L})]}),[M,D]=Vv(I),N=wt(g);xt(()=>{E&&N?.()},[E,N]);const z=S.arrow?.x,Y=S.arrow?.y,H=S.arrow?.centerOffset!==0,[K,J]=C.useState();return xt(()=>{x&&J(window.getComputedStyle(x).zIndex)},[x]),f.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...O,transform:E?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[S.transformOrigin?.x,S.transformOrigin?.y].join(" "),...S.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:f.jsx(C2,{scope:r,placedSide:M,onArrowChange:_,arrowX:z,arrowY:Y,shouldHideArrow:H,children:f.jsx(xe.div,{"data-side":M,"data-align":D,...v,ref:b,style:{...v.style,animation:E?void 0:"none"}})})})});zv.displayName=cu;var $v="PopperArrow",_2={top:"bottom",right:"left",bottom:"top",left:"right"},Gv=C.forwardRef(function(t,r){const{__scopePopper:n,...o}=t,i=E2($v,n),a=_2[i.placedSide];return f.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:f.jsx(w2,{...o,ref:r,style:{...o.style,display:"block"}})})});Gv.displayName=$v;function N2(e){return e!==null}var D2=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:n,middlewareData:o}=t,a=o.arrow?.centerOffset!==0,s=a?0:e.arrowWidth,l=a?0:e.arrowHeight,[c,u]=Vv(r),d={start:"0%",center:"50%",end:"100%"}[u],h=(o.arrow?.x??0)+s/2,p=(o.arrow?.y??0)+l/2;let g="",v="";return c==="bottom"?(g=a?d:`${h}px`,v=`${-l}px`):c==="top"?(g=a?d:`${h}px`,v=`${n.floating.height+l}px`):c==="right"?(g=`${-l}px`,v=a?d:`${p}px`):c==="left"&&(g=`${n.floating.width+l}px`,v=a?d:`${p}px`),{data:{x:g,y:v}}}});function Vv(e){const[t,r="center"]=e.split("-");return[t,r]}var uu=Fv,du=Bv,fu=zv,hu=Gv,Uv=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),T2="VisuallyHidden",Hv=C.forwardRef((e,t)=>f.jsx(xe.span,{...e,ref:t,style:{...Uv,...e.style}}));Hv.displayName=T2;var M2=Hv,[Ms,tF]=Ot("Tooltip",[Mo]),js=Mo(),Wv="TooltipProvider",j2=700,pu="tooltip.open",[R2,vu]=Ms(Wv),Yv=e=>{const{__scopeTooltip:t,delayDuration:r=j2,skipDelayDuration:n=300,disableHoverableContent:o=!1,children:i}=e,a=C.useRef(!0),s=C.useRef(!1),l=C.useRef(0);return C.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),f.jsx(R2,{scope:t,isOpenDelayedRef:a,delayDuration:r,onOpen:C.useCallback(()=>{window.clearTimeout(l.current),a.current=!1},[]),onClose:C.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.current=!0,n)},[n]),isPointerInTransitRef:s,onPointerInTransitChange:C.useCallback(c=>{s.current=c},[]),disableHoverableContent:o,children:i})};Yv.displayName=Wv;var Ai="Tooltip",[k2,Oi]=Ms(Ai),qv=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:o,onOpenChange:i,disableHoverableContent:a,delayDuration:s}=e,l=vu(Ai,e.__scopeTooltip),c=js(t),[u,d]=C.useState(null),h=Xt(),p=C.useRef(0),g=a??l.disableHoverableContent,v=s??l.delayDuration,m=C.useRef(!1),[x,y]=fr({prop:n,defaultProp:o??!1,onChange:j=>{j?(l.onOpen(),document.dispatchEvent(new CustomEvent(pu))):l.onClose(),i?.(j)},caller:Ai}),b=C.useMemo(()=>x?m.current?"delayed-open":"instant-open":"closed",[x]),w=C.useCallback(()=>{window.clearTimeout(p.current),p.current=0,m.current=!1,y(!0)},[y]),_=C.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y(!1)},[y]),T=C.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{m.current=!0,y(!0),p.current=0},v)},[v,y]);return C.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),f.jsx(uu,{...c,children:f.jsx(k2,{scope:t,contentId:h,open:x,stateAttribute:b,trigger:u,onTriggerChange:d,onTriggerEnter:C.useCallback(()=>{l.isOpenDelayedRef.current?T():w()},[l.isOpenDelayedRef,T,w]),onTriggerLeave:C.useCallback(()=>{g?_():(window.clearTimeout(p.current),p.current=0)},[_,g]),onOpen:w,onClose:_,disableHoverableContent:g,children:r})})};qv.displayName=Ai;var gu="TooltipTrigger",Xv=C.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,o=Oi(gu,r),i=vu(gu,r),a=js(r),s=C.useRef(null),l=Ee(t,s,o.onTriggerChange),c=C.useRef(!1),u=C.useRef(!1),d=C.useCallback(()=>c.current=!1,[]);return C.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),f.jsx(du,{asChild:!0,...a,children:f.jsx(xe.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...n,ref:l,onPointerMove:de(e.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(o.onTriggerEnter(),u.current=!0)}),onPointerLeave:de(e.onPointerLeave,()=>{o.onTriggerLeave(),u.current=!1}),onPointerDown:de(e.onPointerDown,()=>{o.open&&o.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:de(e.onFocus,()=>{c.current||o.onOpen()}),onBlur:de(e.onBlur,o.onClose),onClick:de(e.onClick,o.onClose)})})});Xv.displayName=gu;var mu="TooltipPortal",[P2,A2]=Ms(mu,{forceMount:void 0}),Kv=e=>{const{__scopeTooltip:t,forceMount:r,children:n,container:o}=e,i=Oi(mu,t);return f.jsx(P2,{scope:t,forceMount:r,children:f.jsx(St,{present:r||i.open,children:f.jsx(ji,{asChild:!0,container:o,children:n})})})};Kv.displayName=mu;var jo="TooltipContent",Zv=C.forwardRef((e,t)=>{const r=A2(jo,e.__scopeTooltip),{forceMount:n=r.forceMount,side:o="top",...i}=e,a=Oi(jo,e.__scopeTooltip);return f.jsx(St,{present:n||a.open,children:a.disableHoverableContent?f.jsx(Qv,{side:o,...i,ref:t}):f.jsx(O2,{side:o,...i,ref:t})})}),O2=C.forwardRef((e,t)=>{const r=Oi(jo,e.__scopeTooltip),n=vu(jo,e.__scopeTooltip),o=C.useRef(null),i=Ee(t,o),[a,s]=C.useState(null),{trigger:l,onClose:c}=r,u=o.current,{onPointerInTransitChange:d}=n,h=C.useCallback(()=>{s(null),d(!1)},[d]),p=C.useCallback((g,v)=>{const m=g.currentTarget,x={x:g.clientX,y:g.clientY},y=B2(x,m.getBoundingClientRect()),b=z2(x,y),w=$2(v.getBoundingClientRect()),_=V2([...b,...w]);s(_),d(!0)},[d]);return C.useEffect(()=>()=>h(),[h]),C.useEffect(()=>{if(l&&u){const g=m=>p(m,u),v=m=>p(m,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",v)}}},[l,u,p,h]),C.useEffect(()=>{if(a){const g=v=>{const m=v.target,x={x:v.clientX,y:v.clientY},y=l?.contains(m)||u?.contains(m),b=!G2(x,a);y?h():b&&(h(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,a,c,h]),f.jsx(Qv,{...e,ref:i})}),[I2,F2]=Ms(Ai,{isInside:!1}),L2=IC("TooltipContent"),Qv=C.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":o,onEscapeKeyDown:i,onPointerDownOutside:a,...s}=e,l=Oi(jo,r),c=js(r),{onClose:u}=l;return C.useEffect(()=>(document.addEventListener(pu,u),()=>document.removeEventListener(pu,u)),[u]),C.useEffect(()=>{if(l.trigger){const d=h=>{h.target?.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),f.jsx(Mi,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:f.jsxs(fu,{"data-state":l.stateAttribute,...c,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[f.jsx(L2,{children:n}),f.jsx(I2,{scope:r,isInside:!0,children:f.jsx(M2,{id:l.contentId,role:"tooltip",children:o||n})})]})})});Zv.displayName=jo;var Jv="TooltipArrow",eg=C.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,o=js(r);return F2(Jv,r).isInside?null:f.jsx(hu,{...o,...n,ref:t})});eg.displayName=Jv;function B2(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,o,i)){case i:return"left";case o:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function z2(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function $2(e){const{top:t,right:r,bottom:n,left:o}=e;return[{x:o,y:t},{x:r,y:t},{x:r,y:n},{x:o,y:n}]}function G2(e,t){const{x:r,y:n}=e;let o=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const s=t[i],l=t[a],c=s.x,u=s.y,d=l.x,h=l.y;u>n!=h>n&&r<(d-c)*(n-u)/(h-u)+c&&(o=!o)}return o}function V2(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),U2(t)}function U2(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const o=e[n];for(;t.length>=2;){const i=t[t.length-1],a=t[t.length-2];if((i.x-a.x)*(o.y-a.y)>=(i.y-a.y)*(o.x-a.x))t.pop();else break}t.push(o)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const o=e[n];for(;r.length>=2;){const i=r[r.length-1],a=r[r.length-2];if((i.x-a.x)*(o.y-a.y)>=(i.y-a.y)*(o.x-a.x))r.pop();else break}r.push(o)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var H2=Yv,W2=qv,Y2=Xv,q2=Kv,X2=Zv,K2=eg;function Z2({delayDuration:e=0,...t}){return f.jsx(H2,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function Ro({...e}){return f.jsx(Z2,{children:f.jsx(W2,{"data-slot":"tooltip",...e})})}function ko({...e}){return f.jsx(Y2,{"data-slot":"tooltip-trigger",...e})}function Po({className:e,sideOffset:t=0,children:r,...n}){return f.jsx(q2,{children:f.jsxs(X2,{"data-slot":"tooltip-content",sideOffset:t,className:_e("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...n,children:[r,f.jsx(K2,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const Q2=()=>{const{json:e}=je(),[t,r]=X.useState(!1);if(!e)return null;const n=(i,a=0)=>{const s="  ".repeat(a);if(typeof i=="object"&&i!==null){if(Array.isArray(i))return i.length===0?"[]":`[
${i.map(l=>s+"  "+n(l,a+1)).join(`,
`)}
${s}]`;{const l=Object.keys(i);return l.length===0?"{}":`{
${l.map(c=>{const u=n(i[c],a+1);return`${s}  "${c}": ${u}`}).join(`,
`)}
${s}}`}}else return typeof i=="string"?`"${i}"`:String(i)},o=n(e);return f.jsxs(fv,{open:t,onOpenChange:r,children:[f.jsx(hv,{asChild:!0,children:f.jsxs(Ro,{children:[f.jsx(ko,{asChild:!0,children:f.jsx(Oe,{variant:"outline",size:"sm",className:"h-6 px-2 py-1",onClick:()=>r(!0),children:f.jsx(MS,{className:"h-4 w-4"})})}),f.jsx(Po,{children:"View Project Schema"})]})}),f.jsxs(pv,{className:"!w-[80vw] !h-[80vh] !max-w-none overflow-hidden flex flex-col",children:[f.jsx(b_,{children:f.jsx(vv,{className:"flex items-center justify-between",children:f.jsx("span",{children:"Project Schema"})})}),f.jsx("div",{className:"flex-1 overflow-auto",children:f.jsx("pre",{className:"text-sm bg-gray-50 p-4 rounded-md overflow-auto max-h-[60vh]",children:f.jsx("code",{children:o})})})]})]})},J2=({isOpen:e,onClose:t,position:r={bottom:20,left:6}})=>{const[n,o]=X.useState(!1);return X.useEffect(()=>{o(!0)},[]),!e||!n?null:xc.createPortal(f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"fixed inset-0 z-40",onClick:t}),f.jsxs(In,{className:"fixed w-80 max-h-96 overflow-auto shadow-xl z-50",style:{bottom:`${r.bottom}px`,left:`${r.left}px`},children:[f.jsxs(_p,{className:"flex flex-row items-center justify-between space-y-0 !p-4 !py-2 sticky top-0 bg-white",children:[f.jsx(Np,{className:"text-lg",children:"Help & Support"}),f.jsx(Oe,{variant:"ghost",size:"sm",onClick:t,className:"h-8 w-8 p-0",children:f.jsx(os,{className:"w-4 h-4"})})]}),f.jsxs(bo,{className:"space-y-4 !p-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold mb-2",children:"Getting Started"}),f.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Welcome to our application! Here are some quick tips to get you started."})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold mb-2",children:"Project Tools"}),f.jsx("div",{className:"space-y-2",children:f.jsx(Q2,{})})]}),f.jsx("div",{className:"pt-4 border-t",children:f.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Version 0.0.0"})})]})]})]}),document.body)},eN=()=>{const[e,t]=X.useState(!1);return f.jsxs(f.Fragment,{children:[f.jsx(Oe,{variant:"ghost",size:"icon",className:"size-8 group",onClick:()=>t(!0),children:f.jsx(FS,{className:"!w-6 !h-6 group-hover:scale-110 transform"})}),f.jsx(J2,{isOpen:e,onClose:()=>t(!1),position:{bottom:32,left:32}})]})},tN=({children:e})=>{const{activePanelId:t,setActivePanel:r}=At(),n=US(),[o,i]=X.useState(!1),a=l=>{t===l?(i(!0),r("")):(i(!1),r(l))};X.useEffect(()=>{if(!t&&!o&&n.length>0){const l=n[0]?.id;r(l)}},[t,o,n]);const s=l=>{Gt.getState().unregisterViewContainer(l);const u=n.length>0&&n.length>1?n[n.length-2].id:"";a(u)};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex-1 flex flex-col items-center space-y-2 w-full",children:[n.map(l=>f.jsx(PC,{...l,active:t===l.id,onClick:()=>a(l.id),onRemove:()=>s(l.id)},l.id)),e]}),f.jsx("div",{children:f.jsx(eN,{})})]})};function Rs(e){const t=e+"CollectionProvider",[r,n]=Ot(t),[o,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=v=>{const{scope:m,children:x}=v,y=X.useRef(null),b=X.useRef(new Map).current;return f.jsx(o,{scope:m,itemMap:b,collectionRef:y,children:x})};a.displayName=t;const s=e+"CollectionSlot",l=On(s),c=X.forwardRef((v,m)=>{const{scope:x,children:y}=v,b=i(s,x),w=Ee(m,b.collectionRef);return f.jsx(l,{ref:w,children:y})});c.displayName=s;const u=e+"CollectionItemSlot",d="data-radix-collection-item",h=On(u),p=X.forwardRef((v,m)=>{const{scope:x,children:y,...b}=v,w=X.useRef(null),_=Ee(m,w),T=i(u,x);return X.useEffect(()=>(T.itemMap.set(w,{ref:w,...b}),()=>void T.itemMap.delete(w))),f.jsx(h,{[d]:"",ref:_,children:y})});p.displayName=u;function g(v){const m=i(e+"CollectionConsumer",v);return X.useCallback(()=>{const y=m.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${d}]`));return Array.from(m.itemMap.values()).sort((T,j)=>b.indexOf(T.ref.current)-b.indexOf(j.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:a,Slot:c,ItemSlot:p},g,n]}var rN=C.createContext(void 0);function Ao(e){const t=C.useContext(rN);return e||t||"ltr"}var xu="rovingFocusGroup.onEntryFocus",nN={bubbles:!1,cancelable:!0},Ii="RovingFocusGroup",[yu,tg,oN]=Rs(Ii),[iN,ks]=Ot(Ii,[oN]),[aN,sN]=iN(Ii),rg=C.forwardRef((e,t)=>f.jsx(yu.Provider,{scope:e.__scopeRovingFocusGroup,children:f.jsx(yu.Slot,{scope:e.__scopeRovingFocusGroup,children:f.jsx(lN,{...e,ref:t})})}));rg.displayName=Ii;var lN=C.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:o=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,h=C.useRef(null),p=Ee(t,h),g=Ao(i),[v,m]=fr({prop:a,defaultProp:s??null,onChange:l,caller:Ii}),[x,y]=C.useState(!1),b=wt(c),w=tg(r),_=C.useRef(!1),[T,j]=C.useState(0);return C.useEffect(()=>{const k=h.current;if(k)return k.addEventListener(xu,b),()=>k.removeEventListener(xu,b)},[b]),f.jsx(aN,{scope:r,orientation:n,dir:g,loop:o,currentTabStopId:v,onItemFocus:C.useCallback(k=>m(k),[m]),onItemShiftTab:C.useCallback(()=>y(!0),[]),onFocusableItemAdd:C.useCallback(()=>j(k=>k+1),[]),onFocusableItemRemove:C.useCallback(()=>j(k=>k-1),[]),children:f.jsx(xe.div,{tabIndex:x||T===0?-1:0,"data-orientation":n,...d,ref:p,style:{outline:"none",...e.style},onMouseDown:de(e.onMouseDown,()=>{_.current=!0}),onFocus:de(e.onFocus,k=>{const R=!_.current;if(k.target===k.currentTarget&&R&&!x){const A=new CustomEvent(xu,nN);if(k.currentTarget.dispatchEvent(A),!A.defaultPrevented){const $=w().filter(I=>I.focusable),F=$.find(I=>I.active),L=$.find(I=>I.id===v),O=[F,L,...$].filter(Boolean).map(I=>I.ref.current);ig(O,u)}}_.current=!1}),onBlur:de(e.onBlur,()=>y(!1))})})}),ng="RovingFocusGroupItem",og=C.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:o=!1,tabStopId:i,children:a,...s}=e,l=Xt(),c=i||l,u=sN(ng,r),d=u.currentTabStopId===c,h=tg(r),{onFocusableItemAdd:p,onFocusableItemRemove:g,currentTabStopId:v}=u;return C.useEffect(()=>{if(n)return p(),()=>g()},[n,p,g]),f.jsx(yu.ItemSlot,{scope:r,id:c,focusable:n,active:o,children:f.jsx(xe.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...s,ref:t,onMouseDown:de(e.onMouseDown,m=>{n?u.onItemFocus(c):m.preventDefault()}),onFocus:de(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:de(e.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){u.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const x=dN(m,u.orientation,u.dir);if(x!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let b=h().filter(w=>w.focusable).map(w=>w.ref.current);if(x==="last")b.reverse();else if(x==="prev"||x==="next"){x==="prev"&&b.reverse();const w=b.indexOf(m.currentTarget);b=u.loop?fN(b,w+1):b.slice(w+1)}setTimeout(()=>ig(b))}}),children:typeof a=="function"?a({isCurrentTabStop:d,hasTabStop:v!=null}):a})})});og.displayName=ng;var cN={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function uN(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function dN(e,t,r){const n=uN(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return cN[n]}function ig(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function fN(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var ag=rg,sg=og,Ps="Tabs",[hN,rF]=Ot(Ps,[ks]),lg=ks(),[pN,bu]=hN(Ps),cg=C.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:o,defaultValue:i,orientation:a="horizontal",dir:s,activationMode:l="automatic",...c}=e,u=Ao(s),[d,h]=fr({prop:n,onChange:o,defaultProp:i??"",caller:Ps});return f.jsx(pN,{scope:r,baseId:Xt(),value:d,onValueChange:h,orientation:a,dir:u,activationMode:l,children:f.jsx(xe.div,{dir:u,"data-orientation":a,...c,ref:t})})});cg.displayName=Ps;var ug="TabsList",dg=C.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...o}=e,i=bu(ug,r),a=lg(r);return f.jsx(ag,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:n,children:f.jsx(xe.div,{role:"tablist","aria-orientation":i.orientation,...o,ref:t})})});dg.displayName=ug;var fg="TabsTrigger",hg=C.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:o=!1,...i}=e,a=bu(fg,r),s=lg(r),l=gg(a.baseId,n),c=mg(a.baseId,n),u=n===a.value;return f.jsx(sg,{asChild:!0,...s,focusable:!o,active:u,children:f.jsx(xe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:l,...i,ref:t,onMouseDown:de(e.onMouseDown,d=>{!o&&d.button===0&&d.ctrlKey===!1?a.onValueChange(n):d.preventDefault()}),onKeyDown:de(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&a.onValueChange(n)}),onFocus:de(e.onFocus,()=>{const d=a.activationMode!=="manual";!u&&!o&&d&&a.onValueChange(n)})})})});hg.displayName=fg;var pg="TabsContent",vg=C.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:o,children:i,...a}=e,s=bu(pg,r),l=gg(s.baseId,n),c=mg(s.baseId,n),u=n===s.value,d=C.useRef(u);return C.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),f.jsx(St,{present:o||u,children:({present:h})=>f.jsx(xe.div,{"data-state":u?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:h&&i})})});vg.displayName=pg;function gg(e,t){return`${e}-trigger-${t}`}function mg(e,t){return`${e}-content-${t}`}var vN=cg,xg=dg,yg=hg,bg=vg;const wg=vN,wu=C.forwardRef(({className:e,...t},r)=>f.jsx(xg,{ref:r,className:_e("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));wu.displayName=xg.displayName;const Fi=C.forwardRef(({className:e,...t},r)=>f.jsx(yg,{ref:r,className:_e("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));Fi.displayName=yg.displayName;const Li=C.forwardRef(({className:e,...t},r)=>f.jsx(bg,{ref:r,className:_e("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Li.displayName=bg.displayName;function gN(){const{api:e}=is(),[t,r]=X.useState([]),[n,o]=X.useState(null),[i,a]=X.useState(!0),[s,l]=X.useState(null),c=async()=>{try{a(!0);const p=await e.getAllDataSources();r(p),p.length>0&&o(p[0]),l(null)}catch(p){l(p instanceof Error?p.message:"Failed to load data sources")}finally{a(!1)}};return X.useEffect(()=>{c()},[]),{dataSources:t,selectedSource:n,loading:i,error:s,setSelectedSource:o,loadDataSources:c,saveDataSource:async(p,g)=>{try{if(g==="add"){const v=await e.createDataSource({name:p.name,type:p.type,status:p.status,config:p.config});r([...t,v]),o(v)}else{const v=await e.updateDataSource(p.id,{name:p.name,type:p.type,status:p.status,config:p.config});r(t.map(m=>m.id===v.id?v:m)),o(v)}l(null)}catch(v){throw l(v instanceof Error?v.message:"Failed to save data source"),v}},removeDataSource:async p=>{try{await e.deleteDataSource(p);const g=t.filter(v=>v.id!==p);r(g),n?.id===p&&g.length>0?o(g[0]):g.length===0&&o(null),l(null)}catch(g){throw l(g instanceof Error?g.message:"Failed to delete data source"),g}},testConnection:async p=>{try{const g=await e.testDataSourceConnection(p),v={...p,status:g.status};return r(t.map(m=>m.id===v.id?v:m)),o(v),l(null),g}catch(g){throw l(g instanceof Error?g.message:"Failed to test connection"),g}},setError:l}}function mN(){const{api:e}=is(),[t,r]=X.useState([]),[n,o]=X.useState(null),i=X.useCallback(async l=>{try{const c=await e.getDatasetsByDataSource(l);r(c),o(null)}catch(c){throw o(c instanceof Error?c.message:"Failed to load datasets"),c}},[]);return{datasets:t,error:n,loadDatasets:i,saveDataset:async(l,c)=>{try{if(c==="add"){const u=await e.createDataset({name:l.name,query:l.query,fields:l.fields,transform:l.transform,previewData:l.previewData,status:l.status,dataSourceId:l.dataSourceId});r([...t,u])}else{const u=await e.updateDataset(l.id,{name:l.name,query:l.query,fields:l.fields,transform:l.transform,previewData:l.previewData,status:l.status});r(t.map(d=>d.id===u.id?u:d))}o(null)}catch(u){throw o(u instanceof Error?u.message:"Failed to save dataset"),u}},removeDataset:async l=>{try{await e.deleteDataset(l),r(t.filter(c=>c.id!==l)),o(null)}catch(c){throw o(c instanceof Error?c.message:"Failed to delete dataset"),c}},setError:o}}const Sg=X.createContext(null);function xN({children:e,initialValues:t,onConfigChange:r}){const{dataSources:n}=gN(),{datasets:o,loadDatasets:i}=mN(),[a,s]=X.useState(null),[l,c]=X.useState(!1),[u,d]=X.useState(t||{sourceId:"",mode:"static",fieldMapping:{}}),h=u.sourceId,p=u.datasetId;X.useEffect(()=>{h&&i(h)},[h,i]),X.useEffect(()=>{if(p){const T=o.find(j=>j.id===p)||null;s(T)}else s(null)},[p,o]),X.useEffect(()=>{t&&d(t)},[t]);const g=X.useRef(null),v=X.useRef(!0);X.useEffect(()=>{if(v.current){v.current=!1,g.current={...u};return}!(JSON.stringify(g.current)===JSON.stringify(u))&&r&&(r(u),g.current={...u})},[u,r]);const m=X.useCallback((T,j)=>{d(k=>({...k,[T]:j}))},[]),x=X.useCallback((T,j)=>{d(k=>({...k,fieldMapping:{...k.fieldMapping,[T]:j}}))},[]),y=()=>a?a.fields&&Array.isArray(a.fields)?a.fields:a.previewData&&a.previewData.length>0?Object.keys(a.previewData[0]):[]:[],b=y(),_={formValues:u,setFormValue:m,setFieldMapping:x,dataSources:n,datasets:o,selectedDataset:a,sourceId:h,datasetId:p,showFormOutput:l,setShowFormOutput:c,copyFormValues:async()=>{try{await navigator.clipboard.writeText(JSON.stringify(u,null,2))}catch(T){console.error("Copy failed:",T)}},getAvailableFields:y,availableFields:b};return f.jsx(Sg.Provider,{value:_,children:e})}function Bi(){const e=X.useContext(Sg);if(!e)throw new Error("useDataBinding must be used within a DataBindingProvider");return e}var yN="Label",Cg=C.forwardRef((e,t)=>f.jsx(xe.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Cg.displayName=yN;var Eg=Cg;const bN=Oc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Te=C.forwardRef(({className:e,...t},r)=>f.jsx(Eg,{ref:r,className:_e(bN(),e),...t}));Te.displayName=Eg.displayName;function zi(e,[t,r]){return Math.min(r,Math.max(t,e))}function As(e){const t=C.useRef({value:e,previous:e});return C.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var wN=[" ","Enter","ArrowUp","ArrowDown"],SN=[" ","Enter"],Bn="Select",[Os,Is,CN]=Rs(Bn),[Oo,nF]=Ot(Bn,[CN,Mo]),Fs=Mo(),[EN,dn]=Oo(Bn),[_N,NN]=Oo(Bn),_g=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:o,onOpenChange:i,value:a,defaultValue:s,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:h,required:p,form:g}=e,v=Fs(t),[m,x]=C.useState(null),[y,b]=C.useState(null),[w,_]=C.useState(!1),T=Ao(c),[j,k]=fr({prop:n,defaultProp:o??!1,onChange:i,caller:Bn}),[R,A]=fr({prop:a,defaultProp:s,onChange:l,caller:Bn}),$=C.useRef(null),F=m?g||!!m.closest("form"):!0,[L,P]=C.useState(new Set),O=Array.from(L).map(I=>I.props.value).join(";");return f.jsx(uu,{...v,children:f.jsxs(EN,{required:p,scope:t,trigger:m,onTriggerChange:x,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:w,onValueNodeHasChildrenChange:_,contentId:Xt(),value:R,onValueChange:A,open:j,onOpenChange:k,dir:T,triggerPointerDownPosRef:$,disabled:h,children:[f.jsx(Os.Provider,{scope:t,children:f.jsx(_N,{scope:e.__scopeSelect,onNativeOptionAdd:C.useCallback(I=>{P(E=>new Set(E).add(I))},[]),onNativeOptionRemove:C.useCallback(I=>{P(E=>{const S=new Set(E);return S.delete(I),S})},[]),children:r})}),F?f.jsxs(Xg,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:R,onChange:I=>A(I.target.value),disabled:h,form:g,children:[R===void 0?f.jsx("option",{value:""}):null,Array.from(L)]},O):null]})})};_g.displayName=Bn;var Ng="SelectTrigger",Dg=C.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...o}=e,i=Fs(r),a=dn(Ng,r),s=a.disabled||n,l=Ee(t,a.onTriggerChange),c=Is(r),u=C.useRef("touch"),[d,h,p]=Zg(v=>{const m=c().filter(b=>!b.disabled),x=m.find(b=>b.value===a.value),y=Qg(m,v,x);y!==void 0&&a.onValueChange(y.value)}),g=v=>{s||(a.onOpenChange(!0),p()),v&&(a.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return f.jsx(du,{asChild:!0,...i,children:f.jsx(xe.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":Kg(a.value)?"":void 0,...o,ref:l,onClick:de(o.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&g(v)}),onPointerDown:de(o.onPointerDown,v=>{u.current=v.pointerType;const m=v.target;m.hasPointerCapture(v.pointerId)&&m.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(g(v),v.preventDefault())}),onKeyDown:de(o.onKeyDown,v=>{const m=d.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(m&&v.key===" ")&&wN.includes(v.key)&&(g(),v.preventDefault())})})})});Dg.displayName=Ng;var Tg="SelectValue",Mg=C.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:o,children:i,placeholder:a="",...s}=e,l=dn(Tg,r),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,d=Ee(t,l.onValueNodeChange);return xt(()=>{c(u)},[c,u]),f.jsx(xe.span,{...s,ref:d,style:{pointerEvents:"none"},children:Kg(l.value)?f.jsx(f.Fragment,{children:a}):i})});Mg.displayName=Tg;var DN="SelectIcon",jg=C.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...o}=e;return f.jsx(xe.span,{"aria-hidden":!0,...o,ref:t,children:n||""})});jg.displayName=DN;var TN="SelectPortal",Rg=e=>f.jsx(ji,{asChild:!0,...e});Rg.displayName=TN;var zn="SelectContent",kg=C.forwardRef((e,t)=>{const r=dn(zn,e.__scopeSelect),[n,o]=C.useState();if(xt(()=>{o(new DocumentFragment)},[]),!r.open){const i=n;return i?Ka.createPortal(f.jsx(Pg,{scope:e.__scopeSelect,children:f.jsx(Os.Slot,{scope:e.__scopeSelect,children:f.jsx("div",{children:e.children})})}),i):null}return f.jsx(Ag,{...e,ref:t})});kg.displayName=zn;var gr=10,[Pg,fn]=Oo(zn),MN="SelectContentImpl",jN=On("SelectContent.RemoveScroll"),Ag=C.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:i,onPointerDownOutside:a,side:s,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:v,avoidCollisions:m,...x}=e,y=dn(zn,r),[b,w]=C.useState(null),[_,T]=C.useState(null),j=Ee(t,q=>w(q)),[k,R]=C.useState(null),[A,$]=C.useState(null),F=Is(r),[L,P]=C.useState(!1),O=C.useRef(!1);C.useEffect(()=>{if(b)return Wc(b)},[b]),zc();const I=C.useCallback(q=>{const[Z,...oe]=F().map(G=>G.ref.current),[ie]=oe.slice(-1),re=document.activeElement;for(const G of q)if(G===re||(G?.scrollIntoView({block:"nearest"}),G===Z&&_&&(_.scrollTop=0),G===ie&&_&&(_.scrollTop=_.scrollHeight),G?.focus(),document.activeElement!==re))return},[F,_]),E=C.useCallback(()=>I([k,b]),[I,k,b]);C.useEffect(()=>{L&&E()},[L,E]);const{onOpenChange:S,triggerPointerDownPosRef:M}=y;C.useEffect(()=>{if(b){let q={x:0,y:0};const Z=ie=>{q={x:Math.abs(Math.round(ie.pageX)-(M.current?.x??0)),y:Math.abs(Math.round(ie.pageY)-(M.current?.y??0))}},oe=ie=>{q.x<=10&&q.y<=10?ie.preventDefault():b.contains(ie.target)||S(!1),document.removeEventListener("pointermove",Z),M.current=null};return M.current!==null&&(document.addEventListener("pointermove",Z),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Z),document.removeEventListener("pointerup",oe,{capture:!0})}}},[b,S,M]),C.useEffect(()=>{const q=()=>S(!1);return window.addEventListener("blur",q),window.addEventListener("resize",q),()=>{window.removeEventListener("blur",q),window.removeEventListener("resize",q)}},[S]);const[D,N]=Zg(q=>{const Z=F().filter(re=>!re.disabled),oe=Z.find(re=>re.ref.current===document.activeElement),ie=Qg(Z,q,oe);ie&&setTimeout(()=>ie.ref.current.focus())}),z=C.useCallback((q,Z,oe)=>{const ie=!O.current&&!oe;(y.value!==void 0&&y.value===Z||ie)&&(R(q),ie&&(O.current=!0))},[y.value]),Y=C.useCallback(()=>b?.focus(),[b]),H=C.useCallback((q,Z,oe)=>{const ie=!O.current&&!oe;(y.value!==void 0&&y.value===Z||ie)&&$(q)},[y.value]),K=n==="popper"?Su:Og,J=K===Su?{side:s,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:v,avoidCollisions:m}:{};return f.jsx(Pg,{scope:r,content:b,viewport:_,onViewportChange:T,itemRefCallback:z,selectedItem:k,onItemLeave:Y,itemTextRefCallback:H,focusSelectedItem:E,selectedItemText:A,position:n,isPositioned:L,searchRef:D,children:f.jsx(ps,{as:jN,allowPinchZoom:!0,children:f.jsx(ss,{asChild:!0,trapped:y.open,onMountAutoFocus:q=>{q.preventDefault()},onUnmountAutoFocus:de(o,q=>{y.trigger?.focus({preventScroll:!0}),q.preventDefault()}),children:f.jsx(Mi,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:q=>q.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:f.jsx(K,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:q=>q.preventDefault(),...x,...J,onPlaced:()=>P(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:de(x.onKeyDown,q=>{const Z=q.ctrlKey||q.altKey||q.metaKey;if(q.key==="Tab"&&q.preventDefault(),!Z&&q.key.length===1&&N(q.key),["ArrowUp","ArrowDown","Home","End"].includes(q.key)){let ie=F().filter(re=>!re.disabled).map(re=>re.ref.current);if(["ArrowUp","End"].includes(q.key)&&(ie=ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(q.key)){const re=q.target,G=ie.indexOf(re);ie=ie.slice(G+1)}setTimeout(()=>I(ie)),q.preventDefault()}})})})})})})});Ag.displayName=MN;var RN="SelectItemAlignedPosition",Og=C.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...o}=e,i=dn(zn,r),a=fn(zn,r),[s,l]=C.useState(null),[c,u]=C.useState(null),d=Ee(t,j=>u(j)),h=Is(r),p=C.useRef(!1),g=C.useRef(!0),{viewport:v,selectedItem:m,selectedItemText:x,focusSelectedItem:y}=a,b=C.useCallback(()=>{if(i.trigger&&i.valueNode&&s&&c&&v&&m&&x){const j=i.trigger.getBoundingClientRect(),k=c.getBoundingClientRect(),R=i.valueNode.getBoundingClientRect(),A=x.getBoundingClientRect();if(i.dir!=="rtl"){const re=A.left-k.left,G=R.left-re,te=j.left-G,U=j.width+te,ee=Math.max(U,k.width),ne=window.innerWidth-gr,le=zi(G,[gr,Math.max(gr,ne-ee)]);s.style.minWidth=U+"px",s.style.left=le+"px"}else{const re=k.right-A.right,G=window.innerWidth-R.right-re,te=window.innerWidth-j.right-G,U=j.width+te,ee=Math.max(U,k.width),ne=window.innerWidth-gr,le=zi(G,[gr,Math.max(gr,ne-ee)]);s.style.minWidth=U+"px",s.style.right=le+"px"}const $=h(),F=window.innerHeight-gr*2,L=v.scrollHeight,P=window.getComputedStyle(c),O=parseInt(P.borderTopWidth,10),I=parseInt(P.paddingTop,10),E=parseInt(P.borderBottomWidth,10),S=parseInt(P.paddingBottom,10),M=O+I+L+S+E,D=Math.min(m.offsetHeight*5,M),N=window.getComputedStyle(v),z=parseInt(N.paddingTop,10),Y=parseInt(N.paddingBottom,10),H=j.top+j.height/2-gr,K=F-H,J=m.offsetHeight/2,q=m.offsetTop+J,Z=O+I+q,oe=M-Z;if(Z<=H){const re=$.length>0&&m===$[$.length-1].ref.current;s.style.bottom="0px";const G=c.clientHeight-v.offsetTop-v.offsetHeight,te=Math.max(K,J+(re?Y:0)+G+E),U=Z+te;s.style.height=U+"px"}else{const re=$.length>0&&m===$[0].ref.current;s.style.top="0px";const te=Math.max(H,O+v.offsetTop+(re?z:0)+J)+oe;s.style.height=te+"px",v.scrollTop=Z-H+v.offsetTop}s.style.margin=`${gr}px 0`,s.style.minHeight=D+"px",s.style.maxHeight=F+"px",n?.(),requestAnimationFrame(()=>p.current=!0)}},[h,i.trigger,i.valueNode,s,c,v,m,x,i.dir,n]);xt(()=>b(),[b]);const[w,_]=C.useState();xt(()=>{c&&_(window.getComputedStyle(c).zIndex)},[c]);const T=C.useCallback(j=>{j&&g.current===!0&&(b(),y?.(),g.current=!1)},[b,y]);return f.jsx(PN,{scope:r,contentWrapper:s,shouldExpandOnScrollRef:p,onScrollButtonChange:T,children:f.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:f.jsx(xe.div,{...o,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});Og.displayName=RN;var kN="SelectPopperPosition",Su=C.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:o=gr,...i}=e,a=Fs(r);return f.jsx(fu,{...a,...i,ref:t,align:n,collisionPadding:o,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Su.displayName=kN;var[PN,Cu]=Oo(zn,{}),Eu="SelectViewport",Ig=C.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...o}=e,i=fn(Eu,r),a=Cu(Eu,r),s=Ee(t,i.onViewportChange),l=C.useRef(0);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),f.jsx(Os.Slot,{scope:r,children:f.jsx(xe.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:de(o.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=a;if(h?.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const g=window.innerHeight-gr*2,v=parseFloat(d.style.minHeight),m=parseFloat(d.style.height),x=Math.max(v,m);if(x<g){const y=x+p,b=Math.min(g,y),w=y-b;d.style.height=b+"px",d.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});Ig.displayName=Eu;var Fg="SelectGroup",[AN,ON]=Oo(Fg),IN=C.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,o=Xt();return f.jsx(AN,{scope:r,id:o,children:f.jsx(xe.div,{role:"group","aria-labelledby":o,...n,ref:t})})});IN.displayName=Fg;var Lg="SelectLabel",Bg=C.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,o=ON(Lg,r);return f.jsx(xe.div,{id:o.id,...n,ref:t})});Bg.displayName=Lg;var Ls="SelectItem",[FN,zg]=Oo(Ls),$g=C.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:o=!1,textValue:i,...a}=e,s=dn(Ls,r),l=fn(Ls,r),c=s.value===n,[u,d]=C.useState(i??""),[h,p]=C.useState(!1),g=Ee(t,y=>l.itemRefCallback?.(y,n,o)),v=Xt(),m=C.useRef("touch"),x=()=>{o||(s.onValueChange(n),s.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return f.jsx(FN,{scope:r,value:n,disabled:o,textId:v,isSelected:c,onItemTextChange:C.useCallback(y=>{d(b=>b||(y?.textContent??"").trim())},[]),children:f.jsx(Os.ItemSlot,{scope:r,value:n,disabled:o,textValue:u,children:f.jsx(xe.div,{role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...a,ref:g,onFocus:de(a.onFocus,()=>p(!0)),onBlur:de(a.onBlur,()=>p(!1)),onClick:de(a.onClick,()=>{m.current!=="mouse"&&x()}),onPointerUp:de(a.onPointerUp,()=>{m.current==="mouse"&&x()}),onPointerDown:de(a.onPointerDown,y=>{m.current=y.pointerType}),onPointerMove:de(a.onPointerMove,y=>{m.current=y.pointerType,o?l.onItemLeave?.():m.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:de(a.onPointerLeave,y=>{y.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:de(a.onKeyDown,y=>{l.searchRef?.current!==""&&y.key===" "||(SN.includes(y.key)&&x(),y.key===" "&&y.preventDefault())})})})})});$g.displayName=Ls;var $i="SelectItemText",Gg=C.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:o,...i}=e,a=dn($i,r),s=fn($i,r),l=zg($i,r),c=NN($i,r),[u,d]=C.useState(null),h=Ee(t,x=>d(x),l.onItemTextChange,x=>s.itemTextRefCallback?.(x,l.value,l.disabled)),p=u?.textContent,g=C.useMemo(()=>f.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:v,onNativeOptionRemove:m}=c;return xt(()=>(v(g),()=>m(g)),[v,m,g]),f.jsxs(f.Fragment,{children:[f.jsx(xe.span,{id:l.textId,...i,ref:h}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Ka.createPortal(i.children,a.valueNode):null]})});Gg.displayName=$i;var Vg="SelectItemIndicator",Ug=C.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return zg(Vg,r).isSelected?f.jsx(xe.span,{"aria-hidden":!0,...n,ref:t}):null});Ug.displayName=Vg;var _u="SelectScrollUpButton",Hg=C.forwardRef((e,t)=>{const r=fn(_u,e.__scopeSelect),n=Cu(_u,e.__scopeSelect),[o,i]=C.useState(!1),a=Ee(t,n.onScrollButtonChange);return xt(()=>{if(r.viewport&&r.isPositioned){let s=function(){const c=l.scrollTop>0;i(c)};const l=r.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[r.viewport,r.isPositioned]),o?f.jsx(Yg,{...e,ref:a,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=r;s&&l&&(s.scrollTop=s.scrollTop-l.offsetHeight)}}):null});Hg.displayName=_u;var Nu="SelectScrollDownButton",Wg=C.forwardRef((e,t)=>{const r=fn(Nu,e.__scopeSelect),n=Cu(Nu,e.__scopeSelect),[o,i]=C.useState(!1),a=Ee(t,n.onScrollButtonChange);return xt(()=>{if(r.viewport&&r.isPositioned){let s=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;i(u)};const l=r.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[r.viewport,r.isPositioned]),o?f.jsx(Yg,{...e,ref:a,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=r;s&&l&&(s.scrollTop=s.scrollTop+l.offsetHeight)}}):null});Wg.displayName=Nu;var Yg=C.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...o}=e,i=fn("SelectScrollButton",r),a=C.useRef(null),s=Is(r),l=C.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return C.useEffect(()=>()=>l(),[l]),xt(()=>{s().find(u=>u.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[s]),f.jsx(xe.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:de(o.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:de(o.onPointerMove,()=>{i.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:de(o.onPointerLeave,()=>{l()})})}),LN="SelectSeparator",qg=C.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return f.jsx(xe.div,{"aria-hidden":!0,...n,ref:t})});qg.displayName=LN;var Du="SelectArrow",BN=C.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,o=Fs(r),i=dn(Du,r),a=fn(Du,r);return i.open&&a.position==="popper"?f.jsx(hu,{...o,...n,ref:t}):null});BN.displayName=Du;var zN="SelectBubbleInput",Xg=C.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const o=C.useRef(null),i=Ee(n,o),a=As(t);return C.useEffect(()=>{const s=o.current;if(!s)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==t&&u){const d=new Event("change",{bubbles:!0});u.call(s,t),s.dispatchEvent(d)}},[a,t]),f.jsx(xe.select,{...r,style:{...Uv,...r.style},ref:i,defaultValue:t})});Xg.displayName=zN;function Kg(e){return e===""||e===void 0}function Zg(e){const t=wt(e),r=C.useRef(""),n=C.useRef(0),o=C.useCallback(a=>{const s=r.current+a;t(s),function l(c){r.current=c,window.clearTimeout(n.current),c!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(s)},[t]),i=C.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return C.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,o,i]}function Qg(e,t,r){const o=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let a=$N(e,Math.max(i,0));o.length===1&&(a=a.filter(c=>c!==r));const l=a.find(c=>c.textValue.toLowerCase().startsWith(o.toLowerCase()));return l!==r?l:void 0}function $N(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var GN=_g,Jg=Dg,VN=Mg,UN=jg,HN=Rg,em=kg,WN=Ig,tm=Bg,rm=$g,YN=Gg,qN=Ug,nm=Hg,om=Wg,im=qg;const Ir=GN,hn=VN,mr=C.forwardRef(({className:e,children:t,...r},n)=>f.jsxs(Jg,{ref:n,className:_e("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,f.jsx(UN,{asChild:!0,children:f.jsx(on,{className:"h-4 w-4 opacity-50"})})]}));mr.displayName=Jg.displayName;const am=C.forwardRef(({className:e,...t},r)=>f.jsx(nm,{ref:r,className:_e("flex cursor-default items-center justify-center py-1",e),...t,children:f.jsx(_c,{className:"h-4 w-4"})}));am.displayName=nm.displayName;const sm=C.forwardRef(({className:e,...t},r)=>f.jsx(om,{ref:r,className:_e("flex cursor-default items-center justify-center py-1",e),...t,children:f.jsx(on,{className:"h-4 w-4"})}));sm.displayName=om.displayName;const xr=C.forwardRef(({className:e,children:t,position:r="popper",...n},o)=>f.jsx(HN,{children:f.jsxs(em,{ref:o,className:_e("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[f.jsx(am,{}),f.jsx(WN,{className:_e("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),f.jsx(sm,{})]})}));xr.displayName=em.displayName;const XN=C.forwardRef(({className:e,...t},r)=>f.jsx(tm,{ref:r,className:_e("px-2 py-1.5 text-sm font-semibold",e),...t}));XN.displayName=tm.displayName;const dt=C.forwardRef(({className:e,children:t,...r},n)=>f.jsxs(rm,{ref:n,className:_e("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[f.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(qN,{children:f.jsx(ts,{className:"h-4 w-4"})})}),f.jsx(YN,{children:t})]}));dt.displayName=rm.displayName;const KN=C.forwardRef(({className:e,...t},r)=>f.jsx(im,{ref:r,className:_e("-mx-1 my-1 h-px bg-muted",e),...t}));KN.displayName=im.displayName;var Bs="Collapsible",[ZN,oF]=Ot(Bs),[QN,Tu]=ZN(Bs),lm=C.forwardRef((e,t)=>{const{__scopeCollapsible:r,open:n,defaultOpen:o,disabled:i,onOpenChange:a,...s}=e,[l,c]=fr({prop:n,defaultProp:o??!1,onChange:a,caller:Bs});return f.jsx(QN,{scope:r,disabled:i,contentId:Xt(),open:l,onOpenToggle:C.useCallback(()=>c(u=>!u),[c]),children:f.jsx(xe.div,{"data-state":ju(l),"data-disabled":i?"":void 0,...s,ref:t})})});lm.displayName=Bs;var cm="CollapsibleTrigger",um=C.forwardRef((e,t)=>{const{__scopeCollapsible:r,...n}=e,o=Tu(cm,r);return f.jsx(xe.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":ju(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...n,ref:t,onClick:de(e.onClick,o.onOpenToggle)})});um.displayName=cm;var Mu="CollapsibleContent",dm=C.forwardRef((e,t)=>{const{forceMount:r,...n}=e,o=Tu(Mu,e.__scopeCollapsible);return f.jsx(St,{present:r||o.open,children:({present:i})=>f.jsx(JN,{...n,ref:t,present:i})})});dm.displayName=Mu;var JN=C.forwardRef((e,t)=>{const{__scopeCollapsible:r,present:n,children:o,...i}=e,a=Tu(Mu,r),[s,l]=C.useState(n),c=C.useRef(null),u=Ee(t,c),d=C.useRef(0),h=d.current,p=C.useRef(0),g=p.current,v=a.open||s,m=C.useRef(v),x=C.useRef(void 0);return C.useEffect(()=>{const y=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(y)},[]),xt(()=>{const y=c.current;if(y){x.current=x.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const b=y.getBoundingClientRect();d.current=b.height,p.current=b.width,m.current||(y.style.transitionDuration=x.current.transitionDuration,y.style.animationName=x.current.animationName),l(n)}},[a.open,n]),f.jsx(xe.div,{"data-state":ju(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!v,...i,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...e.style},children:v&&o})});function ju(e){return e?"open":"closed"}var eD=lm;function tD({...e}){return f.jsx(eD,{"data-slot":"collapsible",...e})}function rD({...e}){return f.jsx(um,{"data-slot":"collapsible-trigger",...e})}function nD({...e}){return f.jsx(dm,{"data-slot":"collapsible-content",...e})}function zs({title:e,icon:t,children:r,defaultOpen:n=!0,className:o}){const[i,a]=C.useState(n);return f.jsxs(tD,{open:i,onOpenChange:a,className:o,children:[f.jsx(rD,{asChild:!0,children:f.jsxs(Oe,{variant:"ghost",className:"w-full justify-between p-2 h-auto font-medium text-sm",children:[f.jsxs("div",{className:"flex items-center",children:[t?f.jsx("span",{className:"mr-2",children:t}):null,f.jsx("span",{children:e})]}),i?f.jsx(on,{className:"h-4 w-4"}):f.jsx(Pn,{className:"h-4 w-4"})]})}),f.jsx(nD,{className:"px-3 pb-3 pt-2",children:f.jsx("div",{className:"space-y-2",children:r})})]})}function oD(){const{dataSources:e,datasets:t,sourceId:r,formValues:n,setFormValue:o}=Bi();return f.jsx(zs,{title:"Data Source",icon:f.jsx(NS,{className:"h-4 w-4"}),children:f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(Te,{className:"text-xs font-medium",children:"Data Source"}),f.jsxs(Ir,{onValueChange:i=>o("sourceId",i),value:r||"",children:[f.jsx(mr,{className:"w-40 h-7 text-xs",children:f.jsx(hn,{placeholder:"Select data source"})}),f.jsx(xr,{children:e.map(i=>f.jsx(dt,{value:i.id,children:i.name},i.id))})]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(Te,{className:"text-xs font-medium",children:"Dataset"}),f.jsxs(Ir,{onValueChange:i=>o("datasetId",i),value:n.datasetId||"",disabled:!r||t.length===0,children:[f.jsx(mr,{className:"w-40 h-7 text-xs",children:f.jsx(hn,{placeholder:"Select dataset"})}),f.jsx(xr,{children:t.map(i=>f.jsx(dt,{value:i.id,children:i.name},i.id))})]})]})]})})}const Ue=C.forwardRef(({className:e,type:t,...r},n)=>f.jsx("input",{type:t,className:_e("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));Ue.displayName="Input";function iD({fieldConfig:e,availableFields:t}){const[r,n]=X.useState(!1),{formValues:o,setFieldMapping:i}=Bi(),a=u=>typeof u=="string"?u:typeof u=="object"&&u!==null&&(u.name||u.label||u.key)||String(u),s=u=>typeof u=="string"?u:typeof u=="object"&&u!==null&&(u.name||u.value||u.key)||String(u),l=o.fieldMapping?.[e.key]?.sourceField||"",c=u=>{const d=u.dataProcessing;return f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d?.dataType&&f.jsxs("div",{className:"space-y-1",children:[f.jsx(Te,{className:"text-xs",children:""}),f.jsxs(Ir,{defaultValue:d.dataType,children:[f.jsx(mr,{className:"h-6 text-xs",children:f.jsx(hn,{placeholder:""})}),f.jsxs(xr,{children:[f.jsx(dt,{value:"string",children:""}),f.jsx(dt,{value:"number",children:""}),f.jsx(dt,{value:"date",children:""}),f.jsx(dt,{value:"datetime",children:""}),f.jsx(dt,{value:"boolean",children:""}),f.jsx(dt,{value:"currency",children:""}),f.jsx(dt,{value:"percentage",children:""})]})]})]}),d?.format?.dateFormat&&f.jsxs("div",{className:"space-y-1",children:[f.jsx(Te,{className:"text-xs",children:""}),f.jsx(Ue,{className:"h-6 text-xs",placeholder:"YYYY-MM-DD",defaultValue:d.format.dateFormat})]}),d?.format?.numberFormat&&f.jsxs("div",{className:"space-y-1",children:[f.jsx(Te,{className:"text-xs",children:""}),f.jsx(Ue,{className:"h-6 text-xs",type:"number",defaultValue:d.format.numberFormat.decimals||0})]})]})};return f.jsxs("div",{className:"space-y-2",children:[f.jsxs(Te,{className:"text-xs font-medium",children:[e.label,e.required&&f.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.description&&f.jsx("p",{className:"text-xs text-muted-foreground",children:e.description}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs(Ir,{onValueChange:u=>i(e.key,{sourceField:u}),value:l,children:[f.jsx(mr,{className:"h-7 text-xs flex-1",children:f.jsx(hn,{placeholder:e.placeholder||`Select ${e.label} Field`})}),f.jsxs(xr,{children:[f.jsx(dt,{value:"none",children:"Select"}),e.options?e.options.map(u=>f.jsx(dt,{value:u.value,children:u.label},u.value)):t.map((u,d)=>f.jsx(dt,{value:s(u),children:a(u)},d))]})]}),f.jsx("button",{type:"button",className:"p-1 rounded hover:bg-muted flex-shrink-0",onClick:()=>n(u=>!u),"aria-label":"",children:f.jsx(go,{className:`h-4 w-4 ${r?"text-primary":"text-muted-foreground"}`})})]}),f.jsxs("div",{className:`mt-2 p-2 bg-muted rounded text-xs transition-all duration-200 ${r?"":"hidden"}`,children:[f.jsx("div",{className:"font-medium mb-2",children:""}),r&&c(e)]})]})}function aD({schema:e}){const{availableFields:t}=Bi(),r=e||[{key:"xField",label:" (xField)",type:"select",required:!0},{key:"yField",label:" (yField)",type:"select",required:!0},{key:"seriesField",label:" (seriesField)",type:"select",required:!1}];return f.jsx(zs,{title:"Field Mapping",icon:f.jsx(Zh,{className:"h-4 w-4"}),children:r.map(n=>f.jsx(iD,{fieldConfig:n,availableFields:t},n.key))})}const Io=C.forwardRef(({className:e,...t},r)=>f.jsx("textarea",{className:_e("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));Io.displayName="Textarea";function sD({watchedValues:e}){return f.jsx(Io,{className:"text-xs overflow-auto h-60 bg-white dark:bg-gray-800 rounded border ",value:JSON.stringify(e,null,2),readOnly:!0})}function lD(){const{showFormOutput:e,setShowFormOutput:t,copyFormValues:r,formValues:n}=Bi();return f.jsxs("div",{className:"p-3",children:[f.jsxs("div",{className:"flex items-center mb-2",children:[f.jsx("h2",{className:"text-lg font-semibold"}),f.jsx("div",{className:"flex gap-2",children:f.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>t(!e),title:e?"Hide Output":"Show Output",children:e?f.jsx($h,{}):f.jsx($h,{})})})]}),e&&f.jsx("div",{className:"mb-4",children:f.jsx(sD,{watchedValues:n})})]})}function cD(){return f.jsx(f.Fragment,{})}function uD({schema:e}){const{selectedDataset:t}=Bi();return f.jsxs("div",{className:"h-full",children:[f.jsx(cD,{}),f.jsxs("div",{className:"divide-y divide-border",children:[f.jsx(oD,{}),f.jsx(aD,{schema:e?.fieldMapping}),t&&f.jsx(f.Fragment,{})]}),process.env.NODE_ENV==="development"&&f.jsx(lD,{})]})}const dD=({initialValues:e,onConfigChange:t,schema:r})=>f.jsx(xN,{initialValues:e,onConfigChange:t,schema:r,children:f.jsx(uD,{schema:r})}),fm=e=>{let t;const r=new Set,n=(c,u)=>{const d=typeof c=="function"?c(t):c;if(!Object.is(d,t)){const h=t;t=u??(typeof d!="object"||d===null)?d:Object.assign({},t,d),r.forEach(p=>p(t,h))}},o=()=>t,s={setState:n,getState:o,getInitialState:()=>l,subscribe:c=>(r.add(c),()=>r.delete(c))},l=t=e(n,o,s);return s},fD=e=>e?fm(e):fm,hD=e=>e;function pD(e,t=hD){const r=X.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return X.useDebugValue(r),r}const hm=e=>{const t=fD(e),r=n=>pD(t,n);return Object.assign(r,t),r};(e=>e?hm(e):hm)((e,t)=>({errors:[],addError:(r,n)=>{e(o=>{const i=o.errors.filter(s=>s.id!==r),a={...n,id:r,timestamp:new Date,isRead:!1};return{errors:[...i,a]}})},removeError:r=>{e(n=>({errors:n.errors.filter(i=>i.id!==r)}))},clearErrors:()=>{e({errors:[]})},getError:r=>t().errors.find(n=>n.id===r),hasErrors:()=>t().errors.length>0,getErrorsByType:r=>t().errors.filter(n=>n.type===r),markAsRead:r=>{e(n=>({errors:n.errors.map(i=>i.id===r?{...i,isRead:!0}:i)}))},markAllAsRead:()=>{e(r=>({errors:r.errors.map(o=>({...o,isRead:!0}))}))},getUnreadCount:()=>t().errors.filter(r=>!r.isRead).length}));const Fr=Object.create(null);Fr.open="0",Fr.close="1",Fr.ping="2",Fr.pong="3",Fr.message="4",Fr.upgrade="5",Fr.noop="6";const $s=Object.create(null);Object.keys(Fr).forEach(e=>{$s[Fr[e]]=e});const Ru={type:"error",data:"parser error"},pm=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",vm=typeof ArrayBuffer=="function",gm=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,ku=({type:e,data:t},r,n)=>pm&&t instanceof Blob?r?n(t):mm(t,n):vm&&(t instanceof ArrayBuffer||gm(t))?r?n(t):mm(new Blob([t]),n):n(Fr[e]+(t||"")),mm=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function xm(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Pu;function vD(e,t){if(pm&&e.data instanceof Blob)return e.data.arrayBuffer().then(xm).then(t);if(vm&&(e.data instanceof ArrayBuffer||gm(e.data)))return t(xm(e.data));ku(e,!1,r=>{Pu||(Pu=new TextEncoder),t(Pu.encode(r))})}const ym="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gi=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<ym.length;e++)Gi[ym.charCodeAt(e)]=e;const gD=e=>{let t=e.length*.75,r=e.length,n,o=0,i,a,s,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const c=new ArrayBuffer(t),u=new Uint8Array(c);for(n=0;n<r;n+=4)i=Gi[e.charCodeAt(n)],a=Gi[e.charCodeAt(n+1)],s=Gi[e.charCodeAt(n+2)],l=Gi[e.charCodeAt(n+3)],u[o++]=i<<2|a>>4,u[o++]=(a&15)<<4|s>>2,u[o++]=(s&3)<<6|l&63;return c},mD=typeof ArrayBuffer=="function",Au=(e,t)=>{if(typeof e!="string")return{type:"message",data:bm(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:xD(e.substring(1),t)}:$s[r]?e.length>1?{type:$s[r],data:e.substring(1)}:{type:$s[r]}:Ru},xD=(e,t)=>{if(mD){const r=gD(e);return bm(r,t)}else return{base64:!0,data:e}},bm=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},wm="",yD=(e,t)=>{const r=e.length,n=new Array(r);let o=0;e.forEach((i,a)=>{ku(i,!1,s=>{n[a]=s,++o===r&&t(n.join(wm))})})},bD=(e,t)=>{const r=e.split(wm),n=[];for(let o=0;o<r.length;o++){const i=Au(r[o],t);if(n.push(i),i.type==="error")break}return n};function wD(){return new TransformStream({transform(e,t){vD(e,r=>{const n=r.length;let o;if(n<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,n);else if(n<65536){o=new Uint8Array(3);const i=new DataView(o.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{o=new Uint8Array(9);const i=new DataView(o.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(o[0]|=128),t.enqueue(o),t.enqueue(r)})}})}let Ou;function Gs(e){return e.reduce((t,r)=>t+r.length,0)}function Vs(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let o=0;o<t;o++)r[o]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function SD(e,t){Ou||(Ou=new TextDecoder);const r=[];let n=0,o=-1,i=!1;return new TransformStream({transform(a,s){for(r.push(a);;){if(n===0){if(Gs(r)<1)break;const l=Vs(r,1);i=(l[0]&128)===128,o=l[0]&127,o<126?n=3:o===126?n=1:n=2}else if(n===1){if(Gs(r)<2)break;const l=Vs(r,2);o=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),n=3}else if(n===2){if(Gs(r)<8)break;const l=Vs(r,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){s.enqueue(Ru);break}o=u*Math.pow(2,32)+c.getUint32(4),n=3}else{if(Gs(r)<o)break;const l=Vs(r,o);s.enqueue(Au(i?l:Ou.decode(l),t)),n=0}if(o===0||o>e){s.enqueue(Ru);break}}}})}const Sm=4;function ft(e){if(e)return CD(e)}function CD(e){for(var t in ft.prototype)e[t]=ft.prototype[t];return e}ft.prototype.on=ft.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},ft.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},ft.prototype.off=ft.prototype.removeListener=ft.prototype.removeAllListeners=ft.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===t||n.fn===t){r.splice(o,1);break}return r.length===0&&delete this._callbacks["$"+e],this},ft.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,o=r.length;n<o;++n)r[n].apply(this,t)}return this},ft.prototype.emitReserved=ft.prototype.emit,ft.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},ft.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Us=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),Kt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),ED="arraybuffer";function aF(){}function Cm(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const _D=Kt.setTimeout,ND=Kt.clearTimeout;function Hs(e,t){t.useNativeTimers?(e.setTimeoutFn=_D.bind(Kt),e.clearTimeoutFn=ND.bind(Kt)):(e.setTimeoutFn=Kt.setTimeout.bind(Kt),e.clearTimeoutFn=Kt.clearTimeout.bind(Kt))}const DD=1.33;function TD(e){return typeof e=="string"?MD(e):Math.ceil((e.byteLength||e.size)*DD)}function MD(e){let t=0,r=0;for(let n=0,o=e.length;n<o;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function Em(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function jD(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function RD(e){let t={},r=e.split("&");for(let n=0,o=r.length;n<o;n++){let i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class kD extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class Iu extends ft{constructor(t){super(),this.writable=!1,Hs(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new kD(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Au(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=jD(t);return r.length?"?"+r:""}}class PD extends Iu{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};bD(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,yD(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Em()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let _m=!1;try{_m=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const AD=_m;function OD(){}class ID extends PD{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(o,i)=>{this.onError("xhr post error",o,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}class Lr extends ft{constructor(t,r,n){super(),this.createRequest=t,Hs(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=Cm(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&n.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var o;n.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=Lr.requestsCount++,Lr.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=OD,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Lr.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(Lr.requestsCount=0,Lr.requests={},typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Nm);else if(typeof addEventListener=="function"){const e="onpagehide"in Kt?"pagehide":"unload";addEventListener(e,Nm,!1)}}function Nm(){for(let e in Lr.requests)Lr.requests.hasOwnProperty(e)&&Lr.requests[e].abort()}const FD=function(){const e=Dm({xdomain:!1});return e&&e.responseType!==null}();class LD extends ID{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=FD&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Lr(Dm,this.uri(),t)}}function Dm(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||AD))return new XMLHttpRequest}catch{}if(!t)try{return new Kt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Tm=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class BD extends Iu{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=Tm?{}:Cm(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],o=r===t.length-1;ku(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}o&&Us(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Em()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Fu=Kt.WebSocket||Kt.MozWebSocket;class zD extends BD{createSocket(t,r,n){return Tm?new Fu(t,r,n):r?new Fu(t,r):new Fu(t)}doWrite(t,r){this.ws.send(r)}}class $D extends Iu{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=SD(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),o=wD();o.readable.pipeTo(t.writable),this._writer=o.writable.getWriter();const i=()=>{n.read().then(({done:s,value:l})=>{s||(this.onPacket(l),i())}).catch(s=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],o=r===t.length-1;this._writer.write(n).then(()=>{o&&Us(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const GD={websocket:zD,webtransport:$D,polling:LD},VD=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,UD=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Lu(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let o=VD.exec(e||""),i={},a=14;for(;a--;)i[UD[a]]=o[a]||"";return r!=-1&&n!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=HD(i,i.path),i.queryKey=WD(i,i.query),i}function HD(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function WD(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,o,i){o&&(r[o]=i)}),r}const Bu=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ws=[];Bu&&addEventListener("offline",()=>{Ws.forEach(e=>e())},!1);class pn extends ft{constructor(t,r){if(super(),this.binaryType=ED,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=Lu(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=Lu(r.host).host);Hs(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const o=n.prototype.name;this.transports.push(o),this._transportsByName[o]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=RD(this.opts.query)),Bu&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ws.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=Sm,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&pn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",pn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const o=this.writeBuffer[n].data;if(o&&(r+=TD(o)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Us(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,o){if(typeof r=="function"&&(o=r,r=void 0),typeof n=="function"&&(o=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:t,data:r,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),o&&this.once("flush",o),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(pn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Bu&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Ws.indexOf(this._offlineEventListener);n!==-1&&Ws.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}pn.protocol=Sm;class YD extends pn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;pn.priorWebsocketSuccess=!1;const o=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",d=>{if(!n)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;pn.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=r.name,this.emitReserved("upgradeError",h)}}))};function i(){n||(n=!0,u(),r.close(),r=null)}const a=d=>{const h=new Error("probe error: "+d);h.transport=r.name,i(),this.emitReserved("upgradeError",h)};function s(){a("transport closed")}function l(){a("socket closed")}function c(d){r&&d.name!==r.name&&i()}const u=()=>{r.removeListener("open",o),r.removeListener("error",a),r.removeListener("close",s),this.off("close",l),this.off("upgrading",c)};r.once("open",o),r.once("error",a),r.once("close",s),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let qD=class extends YD{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(o=>GD[o]).filter(o=>!!o)),super(t,n)}};function XD(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=Lu(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}const KD=typeof ArrayBuffer=="function",ZD=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Mm=Object.prototype.toString,QD=typeof Blob=="function"||typeof Blob<"u"&&Mm.call(Blob)==="[object BlobConstructor]",JD=typeof File=="function"||typeof File<"u"&&Mm.call(File)==="[object FileConstructor]";function zu(e){return KD&&(e instanceof ArrayBuffer||ZD(e))||QD&&e instanceof Blob||JD&&e instanceof File}function Ys(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(Ys(e[r]))return!0;return!1}if(zu(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Ys(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Ys(e[r]))return!0;return!1}function eT(e){const t=[],r=e.data,n=e;return n.data=$u(r,t),n.attachments=t.length,{packet:n,buffers:t}}function $u(e,t){if(!e)return e;if(zu(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=$u(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=$u(e[n],t));return r}return e}function tT(e,t){return e.data=Gu(e.data,t),delete e.attachments,e}function Gu(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Gu(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Gu(e[r],t));return e}const rT=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],nT=5;var Le;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Le||(Le={}));class oT{constructor(t){this.replacer=t}encode(t){return(t.type===Le.EVENT||t.type===Le.ACK)&&Ys(t)?this.encodeAsBinary({type:t.type===Le.EVENT?Le.BINARY_EVENT:Le.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===Le.BINARY_EVENT||t.type===Le.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=eT(t),n=this.encodeAsString(r.packet),o=r.buffers;return o.unshift(n),o}}function jm(e){return Object.prototype.toString.call(e)==="[object Object]"}class Vu extends ft{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===Le.BINARY_EVENT;n||r.type===Le.BINARY_ACK?(r.type=n?Le.EVENT:Le.ACK,this.reconstructor=new iT(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(zu(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(Le[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Le.BINARY_EVENT||n.type===Le.BINARY_ACK){const i=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const a=t.substring(i,r);if(a!=Number(a)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(a)}if(t.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(i,r)}else n.nsp="/";const o=t.charAt(r+1);if(o!==""&&Number(o)==o){const i=r+1;for(;++r;){const a=t.charAt(r);if(a==null||Number(a)!=a){--r;break}if(r===t.length)break}n.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){const i=this.tryParse(t.substr(r));if(Vu.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case Le.CONNECT:return jm(r);case Le.DISCONNECT:return r===void 0;case Le.CONNECT_ERROR:return typeof r=="string"||jm(r);case Le.EVENT:case Le.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&rT.indexOf(r[0])===-1);case Le.ACK:case Le.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class iT{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=tT(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const aT=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Vu,Encoder:oT,get PacketType(){return Le},protocol:nT},Symbol.toStringTag,{value:"Module"}));function yr(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const sT=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Rm extends ft{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[yr(t,"open",this.onopen.bind(this)),yr(t,"packet",this.onpacket.bind(this)),yr(t,"error",this.onerror.bind(this)),yr(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,o,i;if(sT.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const a={type:Le.EVENT,data:r};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const u=this.ids++,d=r.pop();this._registerAckCallback(u,d),a.id=u}const s=(o=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||o===void 0?void 0:o.writable,l=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!s||(l?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(t,r){var n;const o=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(o===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===t&&this.sendBuffer.splice(s,1);r.call(this,new Error("operation has timed out"))},o),a=(...s)=>{this.io.clearTimeoutFn(i),r.apply(this,s)};a.withError=!0,this.acks[t]=a}emitWithAck(t,...r){return new Promise((n,o)=>{const i=(a,s)=>a?o(a):n(s);i.withError=!0,r.push(i),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((o,...i)=>n!==this._queue[0]?void 0:(o!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(o)):(this._queue.shift(),r&&r(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Le.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Le.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Le.EVENT:case Le.BINARY_EVENT:this.onevent(t);break;case Le.ACK:case Le.BINARY_ACK:this.onack(t);break;case Le.DISCONNECT:this.ondisconnect();break;case Le.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...o){n||(n=!0,r.packet({type:Le.ACK,id:t,data:o}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Le.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function Fo(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Fo.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-r:e+r}return Math.min(e,this.max)|0},Fo.prototype.reset=function(){this.attempts=0},Fo.prototype.setMin=function(e){this.ms=e},Fo.prototype.setMax=function(e){this.max=e},Fo.prototype.setJitter=function(e){this.jitter=e};class Uu extends ft{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Hs(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Fo({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const o=r.parser||aT;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new qD(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const o=yr(r,"open",function(){n.onopen(),t&&t()}),i=s=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",s),t?t(s):this.maybeReconnectOnOpen()},a=yr(r,"error",i);if(this._timeout!==!1){const s=this._timeout,l=this.setTimeoutFn(()=>{o(),i(new Error("timeout")),r.close()},s);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(o),this.subs.push(a),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(yr(t,"ping",this.onping.bind(this)),yr(t,"data",this.ondata.bind(this)),yr(t,"error",this.onerror.bind(this)),yr(t,"close",this.onclose.bind(this)),yr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){Us(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new Rm(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(o=>{o?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",o)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Vi={};function Hu(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=XD(e,t.path||"/socket.io"),n=r.source,o=r.id,i=r.path,a=Vi[o]&&i in Vi[o].nsps,s=t.forceNew||t["force new connection"]||t.multiplex===!1||a;let l;return s?l=new Uu(n,t):(Vi[o]||(Vi[o]=new Uu(n,t)),l=Vi[o]),r.query&&!t.query&&(t.query=r.queryKey),l.socket(r.path,t)}Object.assign(Hu,{Manager:Uu,Socket:Rm,io:Hu,connect:Hu});var qs={exports:{}},Wu,km;function lT(){if(km)return Wu;km=1;var e=1e3,t=e*60,r=t*60,n=r*24,o=n*7,i=n*365.25;Wu=function(u,d){d=d||{};var h=typeof u;if(h==="string"&&u.length>0)return a(u);if(h==="number"&&isFinite(u))return d.long?l(u):s(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function a(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var h=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return h*i;case"weeks":case"week":case"w":return h*o;case"days":case"day":case"d":return h*n;case"hours":case"hour":case"hrs":case"hr":case"h":return h*r;case"minutes":case"minute":case"mins":case"min":case"m":return h*t;case"seconds":case"second":case"secs":case"sec":case"s":return h*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function s(u){var d=Math.abs(u);return d>=n?Math.round(u/n)+"d":d>=r?Math.round(u/r)+"h":d>=t?Math.round(u/t)+"m":d>=e?Math.round(u/e)+"s":u+"ms"}function l(u){var d=Math.abs(u);return d>=n?c(u,d,n,"day"):d>=r?c(u,d,r,"hour"):d>=t?c(u,d,t,"minute"):d>=e?c(u,d,e,"second"):u+" ms"}function c(u,d,h,p){var g=d>=h*1.5;return Math.round(u/h)+" "+p+(g?"s":"")}return Wu}var Yu,Pm;function cT(){if(Pm)return Yu;Pm=1;function e(t){n.debug=n,n.default=n,n.coerce=c,n.disable=s,n.enable=i,n.enabled=l,n.humanize=lT(),n.destroy=u,Object.keys(t).forEach(d=>{n[d]=t[d]}),n.names=[],n.skips=[],n.formatters={};function r(d){let h=0;for(let p=0;p<d.length;p++)h=(h<<5)-h+d.charCodeAt(p),h|=0;return n.colors[Math.abs(h)%n.colors.length]}n.selectColor=r;function n(d){let h,p=null,g,v;function m(...x){if(!m.enabled)return;const y=m,b=Number(new Date),w=b-(h||b);y.diff=w,y.prev=h,y.curr=b,h=b,x[0]=n.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let _=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(j,k)=>{if(j==="%%")return"%";_++;const R=n.formatters[k];if(typeof R=="function"){const A=x[_];j=R.call(y,A),x.splice(_,1),_--}return j}),n.formatArgs.call(y,x),(y.log||n.log).apply(y,x)}return m.namespace=d,m.useColors=n.useColors(),m.color=n.selectColor(d),m.extend=o,m.destroy=n.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(g!==n.namespaces&&(g=n.namespaces,v=n.enabled(d)),v),set:x=>{p=x}}),typeof n.init=="function"&&n.init(m),m}function o(d,h){const p=n(this.namespace+(typeof h>"u"?":":h)+d);return p.log=this.log,p}function i(d){n.save(d),n.namespaces=d,n.names=[],n.skips=[];const h=(typeof d=="string"?d:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const p of h)p[0]==="-"?n.skips.push(p.slice(1)):n.names.push(p)}function a(d,h){let p=0,g=0,v=-1,m=0;for(;p<d.length;)if(g<h.length&&(h[g]===d[p]||h[g]==="*"))h[g]==="*"?(v=g,m=p,g++):(p++,g++);else if(v!==-1)g=v+1,m++,p=m;else return!1;for(;g<h.length&&h[g]==="*";)g++;return g===h.length}function s(){const d=[...n.names,...n.skips.map(h=>"-"+h)].join(",");return n.enable(""),d}function l(d){for(const h of n.skips)if(a(d,h))return!1;for(const h of n.names)if(a(d,h))return!0;return!1}function c(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return Yu=e,Yu}var Am;function uT(){return Am||(Am=1,function(e,t){t.formatArgs=n,t.save=o,t.load=i,t.useColors=r,t.storage=a(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;l.splice(1,0,c,"color: inherit");let u=0,d=0;l[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(u++,h==="%c"&&(d=u))}),l.splice(d,0,c)}t.log=console.debug||console.log||(()=>{});function o(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function i(){let l;try{l=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}function a(){try{return localStorage}catch{}}e.exports=cT()(t);const{formatters:s}=e.exports;s.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}}(qs,qs.exports)),qs.exports}var dT=uT();const fT=yc(dT),Lo="@veltix/pusher",hT={JOB:`${Lo}:job`,TIMER:`${Lo}:timer`,SCHEDULER:`${Lo}:scheduler`,SOCKET:`${Lo}:socket`,API:`${Lo}:api`,DB:`${Lo}:db`},qu=e=>fT(hT[e]);qu("JOB"),qu("TIMER"),qu("SCHEDULER");var Xs="Switch",[pT,sF]=Ot(Xs),[vT,gT]=pT(Xs),Om=C.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:o,defaultChecked:i,required:a,disabled:s,value:l="on",onCheckedChange:c,form:u,...d}=e,[h,p]=C.useState(null),g=Ee(t,b=>p(b)),v=C.useRef(!1),m=h?u||!!h.closest("form"):!0,[x,y]=fr({prop:o,defaultProp:i??!1,onChange:c,caller:Xs});return f.jsxs(vT,{scope:r,checked:x,disabled:s,children:[f.jsx(xe.button,{type:"button",role:"switch","aria-checked":x,"aria-required":a,"data-state":Bm(x),"data-disabled":s?"":void 0,disabled:s,value:l,...d,ref:g,onClick:de(e.onClick,b=>{y(w=>!w),m&&(v.current=b.isPropagationStopped(),v.current||b.stopPropagation())})}),m&&f.jsx(Lm,{control:h,bubbles:!v.current,name:n,value:l,checked:x,required:a,disabled:s,form:u,style:{transform:"translateX(-100%)"}})]})});Om.displayName=Xs;var Im="SwitchThumb",Fm=C.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,o=gT(Im,r);return f.jsx(xe.span,{"data-state":Bm(o.checked),"data-disabled":o.disabled?"":void 0,...n,ref:t})});Fm.displayName=Im;var mT="SwitchBubbleInput",Lm=C.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...o},i)=>{const a=C.useRef(null),s=Ee(a,i),l=As(r),c=Ts(t);return C.useEffect(()=>{const u=a.current;if(!u)return;const d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==r&&p){const g=new Event("click",{bubbles:n});p.call(u,r),u.dispatchEvent(g)}},[l,r,n]),f.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...o,tabIndex:-1,ref:s,style:{...o.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Lm.displayName=mT;function Bm(e){return e?"checked":"unchecked"}var xT=Om,yT=Fm;function vn({className:e,...t}){return f.jsx(xT,{"data-slot":"switch",className:_e("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:f.jsx(yT,{"data-slot":"switch-thumb",className:_e("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function bT(){const e=je(),t=qt(),{selectedDoc:r,selectedNodes:n}=$t().getCurrentSelection(),o=n[0];if(o?.type){const i=t.get(o?.type);if(o)return i?.dataConfigSchema?f.jsx(dD,{initialValues:o.dataConfig,schema:i.dataConfigSchema,onConfigChange:a=>{console.log("update data binding",a),e.updateNode(r.id,o.id,{dataConfig:a})}},o.id):f.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[f.jsx("div",{className:"mb-4 p-3 rounded-full bg-muted/50",children:f.jsx(go,{className:"h-6 w-6 text-muted-foreground"})}),f.jsx("h3",{className:"text-sm font-medium text-foreground mb-2",children:"No Configuration Available"}),f.jsx("p",{className:"text-xs text-muted-foreground max-w-sm leading-relaxed",children:"This component type doesn't support data configuration. Select a different component or check the component documentation."})]})}return null}const wT=[{name:"Fade In",type:"animate",config:{from:{opacity:0},to:{opacity:1}}},{name:"Slide In",type:"animate",config:{from:{x:-50},to:{x:0}}},{name:"Scale Up",type:"animate",config:{from:{scale:.8},to:{scale:1}}},{name:"Bounce",type:"animate",config:{from:{y:0},to:{y:-20}}},{name:"Rotate",type:"animate",config:{from:{rotate:0},to:{rotate:360}}},{name:"Blur",type:"filter",config:{blur:5}},{name:"Glow",type:"filter",config:{glow:10}},{name:"Brightness",type:"filter",config:{brightness:150}},{name:"Particles",type:"particle",config:{count:20,size:2}}],zm={effects:[],selectedEffectId:null,previewingEffectId:null,globalPreview:!1,expandedSections:new Set(["basic"])},Br=ur()(nS((e,t)=>({...zm,addEffect:r=>{if("id"in r&&r.id){const n=r;e(o=>({effects:[...o.effects,n],selectedEffectId:n.id}))}else{const n=r,o={id:`effect_${Date.now()}`,type:n.type,name:n.name,enabled:!0,duration:1e3,delay:0,easing:"ease-in-out",loop:!1,config:n.config};e(i=>({effects:[...i.effects,o],selectedEffectId:o.id}))}},initializeEffects:r=>{e({effects:r})},updateEffect:(r,n)=>{e(o=>({effects:o.effects.map(i=>i.id===r?{...i,...n}:i)}))},deleteEffect:r=>{e(n=>({effects:n.effects.filter(o=>o.id!==r),selectedEffectId:n.selectedEffectId===r?null:n.selectedEffectId,previewingEffectId:n.previewingEffectId===r?null:n.previewingEffectId}))},setSelectedEffect:r=>{e({selectedEffectId:r})},setPreviewingEffect:r=>{e({previewingEffectId:r})},toggleEffectPreview:r=>{e(n=>({previewingEffectId:n.previewingEffectId===r?null:r,globalPreview:!1}))},toggleGlobalPreview:()=>{e(r=>({globalPreview:!r.globalPreview,previewingEffectId:r.globalPreview?r.previewingEffectId:null}))},toggleSection:r=>{e(n=>{const o=new Set(n.expandedSections);return o.has(r)?o.delete(r):o.add(r),{expandedSections:o}})},resetState:()=>{e(zm)},getSelectedEffect:()=>{const r=t();return r.effects.find(n=>n.id===r.selectedEffectId)||null},getPreviewingEffect:()=>{const r=t();return r.effects.find(n=>n.id===r.previewingEffectId)||null},getPresets:()=>wT}),{name:"effects-config-store"}));function ST(){const{effects:e,previewingEffectId:t,setPreviewingEffect:r}=Br();X.useEffect(()=>{if(t){const n=e.find(o=>o.id===t);if(n){const o=setTimeout(()=>{r(null)},n.duration+n.delay);return()=>clearTimeout(o)}}},[t,e,r])}function CT(){const{globalPreview:e,toggleGlobalPreview:t,effects:r}=Br();return f.jsx("div",{className:"p-3 py-2 border-b",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{children:f.jsx("h3",{className:"font-medium text-sm",children:"Node Effects"})}),f.jsx(Oe,{variant:e?"destructive":"outline",className:"w-7 h-7",onClick:t,disabled:r.length===0,title:r.length===0?"No effects to preview":"Toggle global preview",children:e?f.jsx(rp,{className:"!w-4 !h-4"}):f.jsx(An,{className:"!w-4 !h-4"})})]})})}const ET=Oc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ui({className:e,variant:t,...r}){return f.jsx("div",{className:_e(ET({variant:t}),e),...r})}function _T(){const{getSelectedEffect:e,updateEffect:t}=Br(),r=e();return r?f.jsx(f.Fragment,{children:f.jsxs("div",{className:"space-y-3 mt-2",children:[f.jsxs("div",{children:[f.jsx(Te,{className:"text-xs",children:"Name"}),f.jsx(Ue,{value:r.name,onChange:n=>t(r.id,{name:n.target.value}),className:"h-7 text-xs mt-1"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsxs("div",{children:[f.jsx(Te,{className:"text-xs",children:"Duration (ms)"}),f.jsx(Ue,{type:"number",value:r.duration,onChange:n=>t(r.id,{duration:Number.parseInt(n.target.value)}),className:"h-7 text-xs mt-1"})]}),f.jsxs("div",{children:[f.jsx(Te,{className:"text-xs",children:"Delay (ms)"}),f.jsx(Ue,{type:"number",value:r.delay,onChange:n=>t(r.id,{delay:Number.parseInt(n.target.value)}),className:"h-7 text-xs mt-1"})]})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(vn,{id:"loop",checked:r.loop,onCheckedChange:n=>t(r.id,{loop:n}),className:"scale-75"}),f.jsx(Te,{htmlFor:"loop",className:"text-xs",children:"Loop Animation"})]})]})}):null}var $m=["PageUp","PageDown"],Gm=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Vm={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Bo="Slider",[Xu,NT,DT]=Rs(Bo),[Um,lF]=Ot(Bo,[DT]),[TT,Ks]=Um(Bo),Hm=C.forwardRef((e,t)=>{const{name:r,min:n=0,max:o=100,step:i=1,orientation:a="horizontal",disabled:s=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[n],value:u,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:p=!1,form:g,...v}=e,m=C.useRef(new Set),x=C.useRef(0),b=a==="horizontal"?MT:jT,[w=[],_]=fr({prop:u,defaultProp:c,onChange:$=>{[...m.current][x.current]?.focus(),d($)}}),T=C.useRef(w);function j($){const F=OT(w,$);A($,F)}function k($){A($,x.current)}function R(){const $=T.current[x.current];w[x.current]!==$&&h(w)}function A($,F,{commit:L}={commit:!1}){const P=BT(i),O=zT(Math.round(($-n)/i)*i+n,P),I=zi(O,[n,o]);_((E=[])=>{const S=PT(E,I,F);if(LT(S,l*i)){x.current=S.indexOf(I);const M=String(S)!==String(E);return M&&L&&h(S),M?S:E}else return E})}return f.jsx(TT,{scope:e.__scopeSlider,name:r,disabled:s,min:n,max:o,valueIndexToChangeRef:x,thumbs:m.current,values:w,orientation:a,form:g,children:f.jsx(Xu.Provider,{scope:e.__scopeSlider,children:f.jsx(Xu.Slot,{scope:e.__scopeSlider,children:f.jsx(b,{"aria-disabled":s,"data-disabled":s?"":void 0,...v,ref:t,onPointerDown:de(v.onPointerDown,()=>{s||(T.current=w)}),min:n,max:o,inverted:p,onSlideStart:s?void 0:j,onSlideMove:s?void 0:k,onSlideEnd:s?void 0:R,onHomeKeyDown:()=>!s&&A(n,0,{commit:!0}),onEndKeyDown:()=>!s&&A(o,w.length-1,{commit:!0}),onStepKeyDown:({event:$,direction:F})=>{if(!s){const O=$m.includes($.key)||$.shiftKey&&Gm.includes($.key)?10:1,I=x.current,E=w[I],S=i*O*F;A(E+S,I,{commit:!0})}}})})})})});Hm.displayName=Bo;var[Wm,Ym]=Um(Bo,{startEdge:"left",endEdge:"right",size:"width",direction:1}),MT=C.forwardRef((e,t)=>{const{min:r,max:n,dir:o,inverted:i,onSlideStart:a,onSlideMove:s,onSlideEnd:l,onStepKeyDown:c,...u}=e,[d,h]=C.useState(null),p=Ee(t,b=>h(b)),g=C.useRef(void 0),v=Ao(o),m=v==="ltr",x=m&&!i||!m&&i;function y(b){const w=g.current||d.getBoundingClientRect(),_=[0,w.width],j=Qu(_,x?[r,n]:[n,r]);return g.current=w,j(b-w.left)}return f.jsx(Wm,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:f.jsx(qm,{dir:v,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const w=y(b.clientX);a?.(w)},onSlideMove:b=>{const w=y(b.clientX);s?.(w)},onSlideEnd:()=>{g.current=void 0,l?.()},onStepKeyDown:b=>{const _=Vm[x?"from-left":"from-right"].includes(b.key);c?.({event:b,direction:_?-1:1})}})})}),jT=C.forwardRef((e,t)=>{const{min:r,max:n,inverted:o,onSlideStart:i,onSlideMove:a,onSlideEnd:s,onStepKeyDown:l,...c}=e,u=C.useRef(null),d=Ee(t,u),h=C.useRef(void 0),p=!o;function g(v){const m=h.current||u.current.getBoundingClientRect(),x=[0,m.height],b=Qu(x,p?[n,r]:[r,n]);return h.current=m,b(v-m.top)}return f.jsx(Wm,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:f.jsx(qm,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const m=g(v.clientY);i?.(m)},onSlideMove:v=>{const m=g(v.clientY);a?.(m)},onSlideEnd:()=>{h.current=void 0,s?.()},onStepKeyDown:v=>{const x=Vm[p?"from-bottom":"from-top"].includes(v.key);l?.({event:v,direction:x?-1:1})}})})}),qm=C.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:o,onSlideEnd:i,onHomeKeyDown:a,onEndKeyDown:s,onStepKeyDown:l,...c}=e,u=Ks(Bo,r);return f.jsx(xe.span,{...c,ref:t,onKeyDown:de(e.onKeyDown,d=>{d.key==="Home"?(a(d),d.preventDefault()):d.key==="End"?(s(d),d.preventDefault()):$m.concat(Gm).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:de(e.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(h)?h.focus():n(d)}),onPointerMove:de(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&o(d)}),onPointerUp:de(e.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),i(d))})})}),Xm="SliderTrack",Km=C.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,o=Ks(Xm,r);return f.jsx(xe.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...n,ref:t})});Km.displayName=Xm;var Ku="SliderRange",Zm=C.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,o=Ks(Ku,r),i=Ym(Ku,r),a=C.useRef(null),s=Ee(t,a),l=o.values.length,c=o.values.map(h=>e0(h,o.min,o.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return f.jsx(xe.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...n,ref:s,style:{...e.style,[i.startEdge]:u+"%",[i.endEdge]:d+"%"}})});Zm.displayName=Ku;var Zu="SliderThumb",Qm=C.forwardRef((e,t)=>{const r=NT(e.__scopeSlider),[n,o]=C.useState(null),i=Ee(t,s=>o(s)),a=C.useMemo(()=>n?r().findIndex(s=>s.ref.current===n):-1,[r,n]);return f.jsx(RT,{...e,ref:i,index:a})}),RT=C.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:o,...i}=e,a=Ks(Zu,r),s=Ym(Zu,r),[l,c]=C.useState(null),u=Ee(t,y=>c(y)),d=l?a.form||!!l.closest("form"):!0,h=Ts(l),p=a.values[n],g=p===void 0?0:e0(p,a.min,a.max),v=AT(n,a.values.length),m=h?.[s.size],x=m?IT(m,g,s.direction):0;return C.useEffect(()=>{if(l)return a.thumbs.add(l),()=>{a.thumbs.delete(l)}},[l,a.thumbs]),f.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[s.startEdge]:`calc(${g}% + ${x}px)`},children:[f.jsx(Xu.ItemSlot,{scope:e.__scopeSlider,children:f.jsx(xe.span,{role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":a.min,"aria-valuenow":p,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...i,ref:u,style:p===void 0?{display:"none"}:e.style,onFocus:de(e.onFocus,()=>{a.valueIndexToChangeRef.current=n})})}),d&&f.jsx(Jm,{name:o??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:p},n)]})});Qm.displayName=Zu;var kT="RadioBubbleInput",Jm=C.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const o=C.useRef(null),i=Ee(o,n),a=As(t);return C.useEffect(()=>{const s=o.current;if(!s)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==t&&u){const d=new Event("input",{bubbles:!0});u.call(s,t),s.dispatchEvent(d)}},[a,t]),f.jsx(xe.input,{style:{display:"none"},...r,ref:i,defaultValue:t})});Jm.displayName=kT;function PT(e=[],t,r){const n=[...e];return n[r]=t,n.sort((o,i)=>o-i)}function e0(e,t,r){const i=100/(r-t)*(e-t);return zi(i,[0,100])}function AT(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function OT(e,t){if(e.length===1)return 0;const r=e.map(o=>Math.abs(o-t)),n=Math.min(...r);return r.indexOf(n)}function IT(e,t,r){const n=e/2,i=Qu([0,50],[0,n]);return(n-i(t)*r)*r}function FT(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function LT(e,t){if(t>0){const r=FT(e);return Math.min(...r)>=t}return!0}function Qu(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function BT(e){return(String(e).split(".")[1]||"").length}function zT(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var $T=Hm,GT=Km,VT=Zm,UT=Qm;function gn({className:e,defaultValue:t,value:r,min:n=0,max:o=100,...i}){const a=C.useMemo(()=>Array.isArray(r)?r:Array.isArray(t)?t:[n,o],[r,t,n,o]);return f.jsxs($T,{"data-slot":"slider",defaultValue:t,value:r,min:n,max:o,className:_e("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[f.jsx(GT,{"data-slot":"slider-track",className:_e("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:f.jsx(VT,{"data-slot":"slider-range",className:_e("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:a.length},(s,l)=>f.jsx(UT,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}function HT(){const{expandedSections:e,toggleSection:t,getSelectedEffect:r,updateEffect:n}=Br(),o=r();return!o||o.type!=="filter"?null:f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>t("filter"),children:[f.jsx(Te,{className:"text-xs font-medium",children:"Filter Settings"}),e.has("filter")?f.jsx(on,{className:"w-3 h-3"}):f.jsx(Pn,{className:"w-3 h-3"})]}),e.has("filter")&&f.jsxs("div",{className:"space-y-2 mt-2",children:[o.config.blur!==void 0&&f.jsxs("div",{children:[f.jsxs(Te,{className:"text-xs",children:["Blur: ",o.config.blur,"px"]}),f.jsx(gn,{value:[o.config.blur],onValueChange:([i])=>n(o.id,{config:{...o.config,blur:i}}),max:20,min:0,step:1,className:"mt-1"})]}),o.config.glow!==void 0&&f.jsxs("div",{children:[f.jsxs(Te,{className:"text-xs",children:["Glow: ",o.config.glow,"px"]}),f.jsx(gn,{value:[o.config.glow],onValueChange:([i])=>n(o.id,{config:{...o.config,glow:i}}),max:30,min:0,step:1,className:"mt-1"})]}),o.config.brightness!==void 0&&f.jsxs("div",{children:[f.jsxs(Te,{className:"text-xs",children:["Brightness: ",o.config.brightness,"%"]}),f.jsx(gn,{value:[o.config.brightness],onValueChange:([i])=>n(o.id,{config:{...o.config,brightness:i}}),max:200,min:50,step:5,className:"mt-1"})]})]})]})}function WT(){const{expandedSections:e,toggleSection:t,getSelectedEffect:r,updateEffect:n}=Br(),o=r();return!o||o.type!=="particle"?null:f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>t("particle"),children:[f.jsx(Te,{className:"text-xs font-medium",children:"Particle Settings"}),e.has("particle")?f.jsx(on,{className:"w-3 h-3"}):f.jsx(Pn,{className:"w-3 h-3"})]}),e.has("particle")&&f.jsxs("div",{className:"space-y-2 mt-2",children:[f.jsxs("div",{children:[f.jsxs(Te,{className:"text-xs",children:["Count: ",o.config.count]}),f.jsx(gn,{value:[o.config.count],onValueChange:([i])=>n(o.id,{config:{...o.config,count:i}}),max:100,min:1,step:1,className:"mt-1"})]}),f.jsxs("div",{children:[f.jsxs(Te,{className:"text-xs",children:["Size: ",o.config.size,"px"]}),f.jsx(gn,{value:[o.config.size],onValueChange:([i])=>n(o.id,{config:{...o.config,size:i}}),max:10,min:1,step:1,className:"mt-1"})]})]})]})}function YT(){const{getSelectedEffect:e}=Br();return e()?f.jsx(f.Fragment,{children:f.jsxs("div",{className:"space-y-3",children:[f.jsx(_T,{}),f.jsx(HT,{}),f.jsx(WT,{})]})}):null}function qT(){const{effects:e,selectedEffectId:t,previewingEffectId:r,setSelectedEffect:n,toggleEffectPreview:o,updateEffect:i,deleteEffect:a}=Br(),s=l=>({animate:f.jsx(rs,{className:"w-3 h-3"}),filter:f.jsx(Wh,{className:"w-3 h-3"}),particle:f.jsx(_i,{className:"w-3 h-3"}),transition:f.jsx(Mc,{className:"w-3 h-3"})})[l]||f.jsx(go,{className:"w-3 h-3"});return e.length===0?f.jsx("div",{className:"p-3",children:f.jsx("p",{className:"text-xs text-gray-400 text-center py-4",children:"No effects added"})}):f.jsx("div",{className:"p-3 space-y-2",children:e.map((l,c)=>f.jsxs("div",{children:[f.jsxs("div",{className:`flex items-center justify-between p-2 rounded border text-xs transition-all ${t===l.id?"bg-blue-50 border-blue-200":r===l.id?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,onClick:()=>n(l.id),children:[f.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[s(l.type),f.jsx("span",{className:"truncate",children:l.name}),f.jsxs(Ui,{variant:"secondary",className:"text-xs px-1 py-0",children:[l.duration,"ms"]}),r===l.id&&f.jsx(Ui,{variant:"default",className:"text-xs px-1 py-0 bg-green-500",children:"Playing"})]}),f.jsxs("div",{className:"flex items-center space-x-1",children:[f.jsx(Oe,{variant:r===l.id?"destructive":"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:u=>{u.stopPropagation(),o(l.id)},title:r===l.id?"Stop Preview":"Preview Effect",disabled:!l.enabled,children:r===l.id?f.jsx(rp,{className:"w-3 h-3"}):f.jsx(An,{className:"w-3 h-3"})}),f.jsx(vn,{checked:l.enabled,onCheckedChange:u=>i(l.id,{enabled:u}),className:"scale-75"}),f.jsx(Oe,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:u=>{u.stopPropagation(),a(l.id)},children:f.jsx(ns,{className:"w-3 h-3"})})]})]}),t===l.id&&f.jsx(YT,{})]},l.id))})}var XT="Separator",t0="horizontal",KT=["horizontal","vertical"],r0=C.forwardRef((e,t)=>{const{decorative:r,orientation:n=t0,...o}=e,i=ZT(n)?n:t0,s=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return f.jsx(xe.div,{"data-orientation":i,...s,...o,ref:t})});r0.displayName=XT;function ZT(e){return KT.includes(e)}var n0=r0;const $n=C.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},o)=>f.jsx(n0,{ref:o,decorative:r,orientation:t,className:_e("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));$n.displayName=n0.displayName;function QT(){const{expandedSections:e,toggleSection:t,addEffect:r,getPresets:n}=Br(),o=i=>({animate:f.jsx(rs,{className:"w-3 h-3"}),filter:f.jsx(Wh,{className:"w-3 h-3"}),particle:f.jsx(_i,{className:"w-3 h-3"}),transition:f.jsx(Mc,{className:"w-3 h-3"})})[i]||f.jsx(go,{className:"w-3 h-3"});return f.jsxs(f.Fragment,{children:[f.jsx($n,{}),f.jsxs("div",{className:"p-3",children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>t("presets"),children:[f.jsx(Te,{className:"text-xs font-medium",children:"Quick Add"}),e.has("presets")?f.jsx(on,{className:"w-3 h-3"}):f.jsx(Pn,{className:"w-3 h-3"})]}),e.has("presets")&&f.jsx("div",{className:"grid grid-cols-3 gap-1 mt-2",children:n().map((i,a)=>f.jsxs(Oe,{variant:"outline",size:"sm",className:"h-8 text-xs p-1 bg-transparent",onClick:()=>r(i),children:[o(i.type),f.jsx("span",{className:"ml-1 truncate",children:i.name})]},a))})]})]})}function JT(){const{globalPreview:e,getPreviewingEffect:t,effects:r}=Br(),n=t(),o=i=>{switch(i.type){case"animate":return i.config.from?.opacity!==void 0?"animate-pulse":i.config.from?.x!==void 0?"animate-bounce":i.config.from?.scale!==void 0?"animate-ping":i.config.from?.y!==void 0?"animate-bounce":i.config.from?.rotate!==void 0?"animate-spin":"animate-pulse";case"filter":return"animate-pulse";case"particle":return"animate-bounce";default:return"animate-pulse"}};return f.jsxs(f.Fragment,{children:[f.jsx($n,{}),f.jsx("div",{className:"p-3",children:f.jsxs("div",{className:"h-20 bg-gradient-to-r from-blue-50 to-purple-50 rounded border-2 border-dashed border-gray-200 flex items-center justify-center relative overflow-hidden",children:[r.length===0?f.jsxs("div",{className:"flex flex-col items-center justify-center",children:[f.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded mb-2"}),f.jsx("p",{className:"text-xs text-gray-400",children:"No effects to preview"})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:`w-8 h-8 bg-blue-500 rounded transition-all duration-1000 ${e?"animate-pulse scale-110":n?o(n):""}`,style:{filter:n?.type==="filter"&&n.config.blur?`blur(${n.config.blur}px)`:n?.type==="filter"&&n.config.brightness?`brightness(${n.config.brightness}%)`:"none"}}),(e||n?.type==="particle")&&f.jsx("div",{className:"absolute inset-0",children:Array.from({length:n?.config.count||8}).map((i,a)=>f.jsx("div",{className:"absolute bg-yellow-400 rounded-full animate-bounce",style:{width:`${n?.config.size||1}px`,height:`${n?.config.size||1}px`,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`}},a))})]}),f.jsx("div",{className:"absolute bottom-1 right-1 flex items-center justify-between",children:n&&f.jsx(Ui,{variant:"outline",className:"text-xs",children:n.name})})]})})]})}function eM({onChange:e,initialValues:t}){const{effects:r,resetState:n,initializeEffects:o,setSelectedEffect:i,toggleSection:a}=Br(),s=X.useRef(!1),l=X.useRef(r);ST(),X.useEffect(()=>{t&&!s.current&&(s.current=!0,n(),t.effects&&Array.isArray(t.effects)&&t.effects.length>0&&(o(t.effects),t.effects[0]?.id&&i(t.effects[0].id)))},[t,n,o,i]);const c=X.useCallback(u=>{e&&e({effects:u})},[e]);return X.useEffect(()=>{s.current&&r!==l.current&&(l.current=r,c(r))},[r,c]),f.jsxs("div",{className:"",children:[f.jsx(CT,{}),f.jsx(qT,{}),f.jsx(QT,{}),f.jsx(JT,{})]})}function tM(){const e=je(),t=$t(),r=e.getNode(e.json?.docs[0].id,t.selectedNodes[0]);return f.jsx(eM,{initialValues:r.effectConfig,onChange:n=>{e.updateNode(e.json?.docs[0].id,r.id,{effectConfig:n})}})}function rM(e,t){return C.useReducer((r,n)=>t[r][n]??r,e)}var Ju="ScrollArea",[o0,cF]=Ot(Ju),[nM,Zt]=o0(Ju),i0=C.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:o,scrollHideDelay:i=600,...a}=e,[s,l]=C.useState(null),[c,u]=C.useState(null),[d,h]=C.useState(null),[p,g]=C.useState(null),[v,m]=C.useState(null),[x,y]=C.useState(0),[b,w]=C.useState(0),[_,T]=C.useState(!1),[j,k]=C.useState(!1),R=Ee(t,$=>l($)),A=Ao(o);return f.jsx(nM,{scope:r,type:n,dir:A,scrollHideDelay:i,scrollArea:s,viewport:c,onViewportChange:u,content:d,onContentChange:h,scrollbarX:p,onScrollbarXChange:g,scrollbarXEnabled:_,onScrollbarXEnabledChange:T,scrollbarY:v,onScrollbarYChange:m,scrollbarYEnabled:j,onScrollbarYEnabledChange:k,onCornerWidthChange:y,onCornerHeightChange:w,children:f.jsx(xe.div,{dir:A,...a,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});i0.displayName=Ju;var a0="ScrollAreaViewport",s0=C.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:o,...i}=e,a=Zt(a0,r),s=C.useRef(null),l=Ee(t,s,a.onViewportChange);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),f.jsx(xe.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:f.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});s0.displayName=a0;var zr="ScrollAreaScrollbar",l0=C.forwardRef((e,t)=>{const{forceMount:r,...n}=e,o=Zt(zr,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=o,s=e.orientation==="horizontal";return C.useEffect(()=>(s?i(!0):a(!0),()=>{s?i(!1):a(!1)}),[s,i,a]),o.type==="hover"?f.jsx(oM,{...n,ref:t,forceMount:r}):o.type==="scroll"?f.jsx(iM,{...n,ref:t,forceMount:r}):o.type==="auto"?f.jsx(c0,{...n,ref:t,forceMount:r}):o.type==="always"?f.jsx(ed,{...n,ref:t}):null});l0.displayName=zr;var oM=C.forwardRef((e,t)=>{const{forceMount:r,...n}=e,o=Zt(zr,e.__scopeScrollArea),[i,a]=C.useState(!1);return C.useEffect(()=>{const s=o.scrollArea;let l=0;if(s){const c=()=>{window.clearTimeout(l),a(!0)},u=()=>{l=window.setTimeout(()=>a(!1),o.scrollHideDelay)};return s.addEventListener("pointerenter",c),s.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),s.removeEventListener("pointerenter",c),s.removeEventListener("pointerleave",u)}}},[o.scrollArea,o.scrollHideDelay]),f.jsx(St,{present:r||i,children:f.jsx(c0,{"data-state":i?"visible":"hidden",...n,ref:t})})}),iM=C.forwardRef((e,t)=>{const{forceMount:r,...n}=e,o=Zt(zr,e.__scopeScrollArea),i=e.orientation==="horizontal",a=el(()=>l("SCROLL_END"),100),[s,l]=rM("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return C.useEffect(()=>{if(s==="idle"){const c=window.setTimeout(()=>l("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(c)}},[s,o.scrollHideDelay,l]),C.useEffect(()=>{const c=o.viewport,u=i?"scrollLeft":"scrollTop";if(c){let d=c[u];const h=()=>{const p=c[u];d!==p&&(l("SCROLL"),a()),d=p};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[o.viewport,i,l,a]),f.jsx(St,{present:r||s!=="hidden",children:f.jsx(ed,{"data-state":s==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:de(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:de(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),c0=C.forwardRef((e,t)=>{const r=Zt(zr,e.__scopeScrollArea),{forceMount:n,...o}=e,[i,a]=C.useState(!1),s=e.orientation==="horizontal",l=el(()=>{if(r.viewport){const c=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;a(s?c:u)}},10);return zo(r.viewport,l),zo(r.content,l),f.jsx(St,{present:n||i,children:f.jsx(ed,{"data-state":i?"visible":"hidden",...o,ref:t})})}),ed=C.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,o=Zt(zr,e.__scopeScrollArea),i=C.useRef(null),a=C.useRef(0),[s,l]=C.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=p0(s.viewport,s.content),u={...n,sizes:s,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:h=>a.current=h};function d(h,p){return dM(h,a.current,s,p)}return r==="horizontal"?f.jsx(aM,{...u,ref:t,onThumbPositionChange:()=>{if(o.viewport&&i.current){const h=o.viewport.scrollLeft,p=v0(h,s,o.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollLeft=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollLeft=d(h,o.dir))}}):r==="vertical"?f.jsx(sM,{...u,ref:t,onThumbPositionChange:()=>{if(o.viewport&&i.current){const h=o.viewport.scrollTop,p=v0(h,s);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollTop=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollTop=d(h))}}):null}),aM=C.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...o}=e,i=Zt(zr,e.__scopeScrollArea),[a,s]=C.useState(),l=C.useRef(null),c=Ee(t,l,i.onScrollbarXChange);return C.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),f.jsx(d0,{"data-orientation":"horizontal",...o,ref:c,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Js(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(i.viewport){const h=i.viewport.scrollLeft+u.deltaX;e.onWheelScroll(h),m0(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&i.viewport&&a&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Qs(a.paddingLeft),paddingEnd:Qs(a.paddingRight)}})}})}),sM=C.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...o}=e,i=Zt(zr,e.__scopeScrollArea),[a,s]=C.useState(),l=C.useRef(null),c=Ee(t,l,i.onScrollbarYChange);return C.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),f.jsx(d0,{"data-orientation":"vertical",...o,ref:c,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Js(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(i.viewport){const h=i.viewport.scrollTop+u.deltaY;e.onWheelScroll(h),m0(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&i.viewport&&a&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Qs(a.paddingTop),paddingEnd:Qs(a.paddingBottom)}})}})}),[lM,u0]=o0(zr),d0=C.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:o,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:s,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...h}=e,p=Zt(zr,r),[g,v]=C.useState(null),m=Ee(t,R=>v(R)),x=C.useRef(null),y=C.useRef(""),b=p.viewport,w=n.content-n.viewport,_=wt(u),T=wt(l),j=el(d,10);function k(R){if(x.current){const A=R.clientX-x.current.left,$=R.clientY-x.current.top;c({x:A,y:$})}}return C.useEffect(()=>{const R=A=>{const $=A.target;g?.contains($)&&_(A,w)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[b,g,w,_]),C.useEffect(T,[n,T]),zo(g,j),zo(p.content,j),f.jsx(lM,{scope:r,scrollbar:g,hasThumb:o,onThumbChange:wt(i),onThumbPointerUp:wt(a),onThumbPositionChange:T,onThumbPointerDown:wt(s),children:f.jsx(xe.div,{...h,ref:m,style:{position:"absolute",...h.style},onPointerDown:de(e.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),x.current=g.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),k(R))}),onPointerMove:de(e.onPointerMove,k),onPointerUp:de(e.onPointerUp,R=>{const A=R.target;A.hasPointerCapture(R.pointerId)&&A.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=y.current,p.viewport&&(p.viewport.style.scrollBehavior=""),x.current=null})})})}),Zs="ScrollAreaThumb",f0=C.forwardRef((e,t)=>{const{forceMount:r,...n}=e,o=u0(Zs,e.__scopeScrollArea);return f.jsx(St,{present:r||o.hasThumb,children:f.jsx(cM,{ref:t,...n})})}),cM=C.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...o}=e,i=Zt(Zs,r),a=u0(Zs,r),{onThumbPositionChange:s}=a,l=Ee(t,d=>a.onThumbChange(d)),c=C.useRef(void 0),u=el(()=>{c.current&&(c.current(),c.current=void 0)},100);return C.useEffect(()=>{const d=i.viewport;if(d){const h=()=>{if(u(),!c.current){const p=fM(d,s);c.current=p,s()}};return s(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[i.viewport,u,s]),f.jsx(xe.div,{"data-state":a.hasThumb?"visible":"hidden",...o,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:de(e.onPointerDownCapture,d=>{const p=d.target.getBoundingClientRect(),g=d.clientX-p.left,v=d.clientY-p.top;a.onThumbPointerDown({x:g,y:v})}),onPointerUp:de(e.onPointerUp,a.onThumbPointerUp)})});f0.displayName=Zs;var td="ScrollAreaCorner",h0=C.forwardRef((e,t)=>{const r=Zt(td,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?f.jsx(uM,{...e,ref:t}):null});h0.displayName=td;var uM=C.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,o=Zt(td,r),[i,a]=C.useState(0),[s,l]=C.useState(0),c=!!(i&&s);return zo(o.scrollbarX,()=>{const u=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(u),l(u)}),zo(o.scrollbarY,()=>{const u=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(u),a(u)}),c?f.jsx(xe.div,{...n,ref:t,style:{width:i,height:s,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Qs(e){return e?parseInt(e,10):0}function p0(e,t){const r=e/t;return isNaN(r)?0:r}function Js(e){const t=p0(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function dM(e,t,r,n="ltr"){const o=Js(r),i=o/2,a=t||i,s=o-a,l=r.scrollbar.paddingStart+a,c=r.scrollbar.size-r.scrollbar.paddingEnd-s,u=r.content-r.viewport,d=n==="ltr"?[0,u]:[u*-1,0];return g0([l,c],d)(e)}function v0(e,t,r="ltr"){const n=Js(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-o,a=t.content-t.viewport,s=i-n,l=r==="ltr"?[0,a]:[a*-1,0],c=zi(e,l);return g0([0,a],[0,s])(c)}function g0(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function m0(e,t){return e>0&&e<t}var fM=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function o(){const i={left:e.scrollLeft,top:e.scrollTop},a=r.left!==i.left,s=r.top!==i.top;(a||s)&&t(),r=i,n=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(n)};function el(e,t){const r=wt(e),n=C.useRef(0);return C.useEffect(()=>()=>window.clearTimeout(n.current),[]),C.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function zo(e,t){const r=wt(t);xt(()=>{let n=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return o.observe(e),()=>{window.cancelAnimationFrame(n),o.unobserve(e)}}},[e,r])}var hM=i0,pM=s0,vM=h0;function gM({className:e,children:t,...r}){return f.jsxs(hM,{"data-slot":"scroll-area",className:_e("relative",e),...r,children:[f.jsx(pM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),f.jsx(mM,{}),f.jsx(vM,{})]})}function mM({className:e,orientation:t="vertical",...r}){return f.jsx(l0,{"data-slot":"scroll-area-scrollbar",orientation:t,className:_e("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...r,children:f.jsx(f0,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const x0=({schema:e,selectedTrigger:t,onTriggerChange:r})=>{const n=o=>({click:Jh,hover:Dc,drag:rs,focus:Mc,load:GS})[o]||Jh;return e?f.jsxs("div",{children:[f.jsx(Te,{className:"text-sm font-medium block mb-2",children:"Trigger Type"}),f.jsxs(Ir,{value:t,onValueChange:r,children:[f.jsx(mr,{children:f.jsx("div",{className:"flex items-center gap-2 w-full",children:(()=>{const o=e?.triggers?.find(a=>a.type===t),i=n(t);return f.jsxs(f.Fragment,{children:[f.jsx(i,{className:"w-4 h-4 flex-shrink-0"}),f.jsx("div",{className:"flex flex-col items-start flex-1 min-w-0",children:f.jsx("div",{className:"font-medium",children:o?.label})})]})})()})}),f.jsx(xr,{children:e?.triggers?.map(o=>{const i=n(o.type);return f.jsx(dt,{value:o.type,children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(i,{className:"w-4 h-4"}),f.jsxs("div",{children:[f.jsx("div",{children:o.label}),o.description&&f.jsx("div",{className:"text-xs text-muted-foreground",children:o.description})]})]})},o.type)})})]})]}):f.jsxs("div",{children:[f.jsx(Te,{className:"text-sm font-medium block mb-2",children:"Trigger Type"}),f.jsx("div",{className:"text-sm text-muted-foreground",children:"No schema provided"})]})};function y0({field:e,value:t,onChange:r}){const n=()=>{switch(e.type){case"text":return f.jsx(Ue,{placeholder:e.placeholder,value:t||e.default||"",onChange:o=>r(o.target.value),className:"h-8"});case"number":return f.jsx(Ue,{type:"number",placeholder:e.placeholder,value:t||e.default||"",onChange:o=>r(Number(o.target.value)),className:"h-8",min:e.min,max:e.max,step:e.step});case"select":return f.jsxs(Ir,{value:t||e.default,onValueChange:r,children:[f.jsx(mr,{className:"h-8",children:f.jsx(hn,{})}),f.jsx(xr,{children:e.options?.map(o=>f.jsx(dt,{value:o.value,children:o.label},o.value))})]});case"code":return f.jsxs("div",{className:"space-y-1",children:[f.jsx(Io,{placeholder:e.placeholder,value:t||e.default||"",onChange:o=>r(o.target.value),className:"min-h-[80px] text-xs font-mono"}),e.language&&f.jsxs("div",{className:"text-xs text-muted-foreground",children:["Language: ",e.language]})]});case"color":return f.jsxs("div",{className:"flex gap-2",children:[f.jsx(Ue,{type:"color",value:t||e.default||"#000000",onChange:o=>r(o.target.value),className:"w-12 h-8 p-1 border rounded"}),f.jsx(Ue,{type:"text",placeholder:e.placeholder,value:t||e.default||"#000000",onChange:o=>r(o.target.value),className:"h-8 flex-1"})]});case"switch":return f.jsx(vn,{checked:t||e.default||!1,onCheckedChange:r});default:return f.jsx(Ue,{placeholder:e.placeholder,value:t||e.default||"",onChange:o=>r(o.target.value),className:"h-8"})}};return f.jsxs("div",{className:"space-y-2",children:[f.jsxs(Te,{className:"text-xs",children:[e.label,e.required&&f.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n()]})}const b0=({event:e,currentTrigger:t,onUpdate:r,onUpdateValue:n,onRemove:o})=>{const a=(s=>t?.options.find(c=>c.name===s.actionName))(e);return a?f.jsx(In,{className:"p-3",children:f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Ui,{variant:"secondary",className:"text-xs",children:a.label}),f.jsx(vn,{checked:e.enabled,onCheckedChange:s=>r(e.id,{enabled:s})})]}),f.jsx(Oe,{size:"sm",variant:"ghost",onClick:()=>o(e.id),children:f.jsx(ns,{className:"w-4 h-4"})})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Te,{className:"text-xs",children:"Action Type"}),f.jsxs(Ir,{value:e.actionName,onValueChange:s=>{const l=t?.options.find(c=>c.name===s);if(l){const c={};l.fields.forEach(u=>{u.default!==void 0&&(c[u.name]=u.default)}),r(e.id,{actionName:s,actionType:l.type,values:c})}},children:[f.jsx(mr,{className:"h-8",children:f.jsx(hn,{})}),f.jsx(xr,{children:t?.options.map(s=>f.jsx(dt,{value:s.name,children:s.label},s.name))})]})]}),a.fields.map(s=>f.jsx(y0,{field:s,value:e.values[s.name],onChange:l=>n(e.id,s.name,l)},s.name))]})}):null},w0=({configuredEvents:e,selectedTrigger:t,currentTrigger:r,onAddEvent:n,onUpdateEvent:o,onUpdateEventValue:i,onRemoveEvent:a})=>{const s=e.filter(l=>l.triggerType===t);return f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs(Te,{className:"text-sm font-medium",children:["Events (",s.length,")"]}),f.jsxs(Oe,{size:"sm",variant:"outline",onClick:n,disabled:!r,children:[f.jsx(vo,{className:"w-4 h-4 mr-1"}),"Add"]})]}),f.jsx("div",{className:"space-y-3",children:s.map(l=>f.jsx(b0,{event:l,currentTrigger:r,onUpdate:o,onUpdateValue:i,onRemove:a},l.id))})]})},S0={selectedTrigger:"click",configuredEvents:[],advancedSettings:{preventDefault:!1,stopPropagation:!1,debugMode:!1}};function xM(e,t){switch(t.type){case"SET_SELECTED_TRIGGER":return{...e,selectedTrigger:t.payload};case"ADD_EVENT":return{...e,configuredEvents:[...e.configuredEvents,t.payload]};case"UPDATE_EVENT":return{...e,configuredEvents:e.configuredEvents.map(r=>r.id===t.payload.id?{...r,...t.payload.updates}:r)};case"UPDATE_EVENT_VALUE":return{...e,configuredEvents:e.configuredEvents.map(r=>r.id===t.payload.id?{...r,values:{...r.values,[t.payload.fieldName]:t.payload.value}}:r)};case"REMOVE_EVENT":return{...e,configuredEvents:e.configuredEvents.filter(r=>r.id!==t.payload)};case"UPDATE_ADVANCED_SETTINGS":return{...e,advancedSettings:t.payload};case"SET_ALL":return t.payload;case"RESET":return S0;default:return e}}const C0=X.createContext(void 0),E0=({children:e,initialValue:t={},onChange:r})=>{const[n,o]=X.useReducer(xM,{...S0,...t}),i=X.useRef(n);X.useEffect(()=>{r&&JSON.stringify(n)!==JSON.stringify(i.current)&&(i.current={...n},r(n))},[n,r]);const p={state:n,dispatch:o,setSelectedTrigger:g=>{o({type:"SET_SELECTED_TRIGGER",payload:g})},addEvent:g=>{o({type:"ADD_EVENT",payload:g})},updateEvent:(g,v)=>{o({type:"UPDATE_EVENT",payload:{id:g,updates:v}})},updateEventValue:(g,v,m)=>{o({type:"UPDATE_EVENT_VALUE",payload:{id:g,fieldName:v,value:m}})},removeEvent:g=>{o({type:"REMOVE_EVENT",payload:g})},updateAdvancedSettings:g=>{o({type:"UPDATE_ADVANCED_SETTINGS",payload:g})},reset:()=>{o({type:"RESET"})}};return f.jsx(C0.Provider,{value:p,children:e})},tl=()=>{const e=X.useContext(C0);if(e===void 0)throw new Error("useEventConfig must be used within an EventConfigProvider");return e},_0=({settings:e,onSettingsChange:t})=>{const[r,n]=X.useState(!1),{state:o,updateAdvancedSettings:i}=tl(),a=e||o.advancedSettings,s=t||i,l=(c,u)=>{s({...a,[c]:u})};return f.jsxs("div",{className:"space-y-3",children:[f.jsxs(Oe,{variant:"ghost",className:"w-full justify-start",onClick:()=>n(!r),children:[r?f.jsx(on,{className:"w-4 h-4 mr-2"}):f.jsx(Pn,{className:"w-4 h-4 mr-2"}),f.jsx(Te,{className:"text-sm font-medium cursor-pointer",children:"Advanced Settings"})]}),r&&f.jsxs("div",{className:"space-y-3 pl-6",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(Te,{htmlFor:"prevent-default",className:"text-sm",children:"Prevent Default Behavior"}),f.jsx(vn,{id:"prevent-default",checked:a.preventDefault,onCheckedChange:c=>l("preventDefault",c)})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(Te,{htmlFor:"stop-propagation",className:"text-sm",children:"Stop Event Propagation"}),f.jsx(vn,{id:"stop-propagation",checked:a.stopPropagation,onCheckedChange:c=>l("stopPropagation",c)})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(Te,{htmlFor:"debug-mode",className:"text-sm",children:"Debug Mode"}),f.jsx(vn,{id:"debug-mode",checked:a.debugMode,onCheckedChange:c=>l("debugMode",c)})]})]})]})},N0=({eventData:e})=>{const{state:t}=tl(),r=e||t,n=()=>{if(!r){console.log("No event data to export");return}const o={timestamp:new Date().toISOString(),eventConfiguration:r,summary:{totalEvents:r.configuredEvents?.length||0,enabledEvents:r.configuredEvents?.filter(c=>c.enabled).length||0,triggers:[...new Set(r.configuredEvents?.map(c=>c.triggerType)||[])],actions:[...new Set(r.configuredEvents?.map(c=>c.actionType)||[])]}};console.log("=== Event Configuration Export ==="),console.log("Export Data:",o),console.log("Event Values:",r.configuredEvents?.map(c=>({id:c.id,triggerType:c.triggerType,actionType:c.actionType,actionName:c.actionName,enabled:c.enabled,values:c.values}))),console.log("Advanced Settings:",r.advancedSettings),console.log("================================");const i=JSON.stringify(o,null,2),a=new Blob([i],{type:"application/json"}),s=URL.createObjectURL(a),l=document.createElement("a");l.href=s,l.download=`event-config-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s)};return f.jsxs("div",{className:"p-4 border-t border-border space-y-2",children:[f.jsxs("div",{className:"flex gap-2",children:[f.jsxs(Oe,{size:"sm",className:"flex-1",children:[f.jsx(An,{className:"w-4 h-4 mr-1"}),"Test Events"]}),f.jsx(Oe,{size:"sm",variant:"outline",children:f.jsx(go,{className:"w-4 h-4"})})]}),f.jsxs(Oe,{size:"sm",variant:"outline",className:"w-full bg-transparent",onClick:n,children:[f.jsx(Vh,{className:"w-4 h-4 mr-1"}),"Export Configuration"]})]})},yM=({schema:e,onClick:t})=>{const{state:r,setSelectedTrigger:n,addEvent:o,updateEvent:i,updateEventValue:a,removeEvent:s,updateAdvancedSettings:l}=tl();if(!e)return f.jsxs("div",{className:"w-full flex flex-col",children:[f.jsxs("div",{className:"p-4 border-b border-border",children:[f.jsx("h2",{className:"text-lg font-semibold mb-1",children:"Event Settings"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure interactions for selected element"})]}),f.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:f.jsx("p",{className:"text-sm text-muted-foreground",children:"No event schema provided"})})]});const c=e?.triggers?.find(v=>v.type===r.selectedTrigger),u=()=>{if(!c||!c.options||c.options.length===0)return;const v=c.options[0],m={};v.fields&&v.fields.forEach(y=>{y.default!==void 0&&(m[y.name]=y.default)});const x={id:Date.now().toString(),triggerType:r.selectedTrigger,actionType:v.type,actionName:v.name,values:m,enabled:!0};o(x)},d=(v,m)=>{i(v,m)},h=(v,m,x)=>{a(v,m,x)},p=v=>{s(v)},g=v=>{l(v)};return f.jsxs("div",{className:"w-full flex flex-col",children:[f.jsxs("div",{className:"p-4 border-b border-border",children:[f.jsx("h2",{className:"text-lg font-semibold mb-1",children:"Event Settings"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure interactions for selected element"})]}),f.jsx(gM,{className:"flex-1",children:f.jsxs("div",{className:"p-4 space-y-6",children:[f.jsx(x0,{schema:e,selectedTrigger:r.selectedTrigger,onTriggerChange:n}),f.jsx($n,{}),f.jsx(w0,{configuredEvents:r.configuredEvents,selectedTrigger:r.selectedTrigger,currentTrigger:c,onAddEvent:u,onUpdateEvent:d,onUpdateEventValue:h,onRemoveEvent:p}),f.jsx($n,{}),f.jsx(_0,{settings:r.advancedSettings,onSettingsChange:g})]})}),f.jsx(N0,{eventData:r})]})},D0=({schema:e,initialValue:t={},onChange:r,onClick:n})=>f.jsx(E0,{initialValue:t,onChange:r,children:f.jsx(yM,{schema:e,onClick:n})}),bM={emit:{label:"Emit Data",type:"emit",name:"emit_data",fields:[{label:"Event Name",name:"eventName",type:"text",required:!0,placeholder:"Enter event name",default:"data_click"},{label:"Data Content",name:"data",type:"code",language:"json",placeholder:'{"key": "value"}',default:"{}"}]},navigate:{label:"Navigate",type:"link",name:"navigate",fields:[{label:"URL",name:"url",type:"text",required:!0,placeholder:"https://example.com",default:""},{label:"Target",name:"target",type:"select",options:[{label:"Current Window",value:"_self"},{label:"New Window",value:"_blank"}],default:"_self"}]},tooltip:{label:"Show Tooltip",type:"tooltip",name:"show_tooltip",fields:[{label:"Tooltip Content",name:"content",type:"text",required:!0,placeholder:"Enter tooltip content",default:""},{label:"Duration",name:"duration",type:"number",min:1e3,max:1e4,default:3e3}]},refresh:{label:"Auto Refresh",type:"refresh",name:"auto_refresh",fields:[{label:"Enable Auto Refresh",name:"enabled",type:"switch",default:!1},{label:"Refresh Interval",name:"interval",type:"number",min:1e3,max:6e4,default:5e3}]}},wM={click:{type:"click",label:"Click Event",description:"Triggered when user clicks the component",defaultActions:["emit","navigate"]},hover:{type:"hover",label:"Hover Event",description:"Triggered when user hovers over the component",defaultActions:["tooltip"]},load:{type:"load",label:"Load Event",description:"Triggered when component finishes loading",defaultActions:["refresh"]}};function rd(e={}){const{triggers:t=["click","hover"],customActions:r={},excludeActions:n=[]}=e,o={triggers:[]};return t.forEach(i=>{const a=wM[i];if(!a)return;const l=a.defaultActions.filter(c=>!n.includes(c)).map(c=>r[c]||bM[c]).filter(Boolean);l.length>0&&o.triggers.push({...a,options:l})}),o}function SM(e){return rd({triggers:["click"],customActions:e})}function CM(e){return rd({triggers:["click","hover","load"],customActions:e})}function EM(e,t){const r={...e};return r.triggers=r.triggers.map(n=>({...n,options:[...n.options,...Object.values(t)]})),r}const T0={CLICK_ONLY:{triggers:[{type:"click",label:"Click Event",description:"Triggered when user clicks the component",options:[{label:"Emit Data",type:"emit",name:"emit_data",fields:[{label:"Event Name",name:"eventName",type:"text",required:!0,placeholder:"Enter event name",default:"data_click"},{label:"Data Content",name:"data",type:"code",language:"json",placeholder:'{"key": "value"}',default:"{}"}]},{label:"Navigate",type:"link",name:"navigate",fields:[{label:"URL",name:"url",type:"text",required:!0,placeholder:"https://example.com",default:""},{label:"Target",name:"target",type:"select",options:[{label:"Current Window",value:"_self"},{label:"New Window",value:"_blank"}],default:"_self"}]}]}]},INTERACTIVE:{triggers:[{type:"click",label:"Click Event",description:"Triggered when user clicks the component",options:[{label:"Emit Data",type:"emit",name:"emit_data",fields:[{label:"Event Name",name:"eventName",type:"text",required:!0,placeholder:"Enter event name",default:"data_click"},{label:"Data Content",name:"data",type:"code",language:"json",placeholder:'{"key": "value"}',default:"{}"}]},{label:"Navigate",type:"link",name:"navigate",fields:[{label:"URL",name:"url",type:"text",required:!0,placeholder:"https://example.com",default:""},{label:"Target",name:"target",type:"select",options:[{label:"Current Window",value:"_self"},{label:"New Window",value:"_blank"}],default:"_self"}]}]},{type:"hover",label:"Hover Event",description:"Triggered when user hovers over the component",options:[{label:"Show Tooltip",type:"tooltip",name:"show_tooltip",fields:[{label:"Tooltip Content",name:"content",type:"text",required:!0,placeholder:"Enter tooltip content",default:""},{label:"Duration",name:"duration",type:"number",min:1e3,max:1e4,default:3e3}]}]}]},DATA_COMPONENT:{triggers:[{type:"load",label:"Load Event",description:"Triggered when component finishes loading",options:[{label:"Auto Refresh",type:"refresh",name:"auto_refresh",fields:[{label:"Enable Auto Refresh",name:"enabled",type:"switch",default:!1},{label:"Refresh Interval",name:"interval",type:"number",min:1e3,max:6e4,default:5e3}]}]},{type:"click",label:"Click Event",description:"Triggered when user clicks the component",options:[{label:"Emit Data",type:"emit",name:"emit_data",fields:[{label:"Event Name",name:"eventName",type:"text",required:!0,placeholder:"Enter event name",default:"data_click"},{label:"Data Content",name:"data",type:"code",language:"json",placeholder:'{"key": "value"}',default:"{}"}]}]}]},FULL_FEATURED:{triggers:[{type:"click",label:"Click Event",description:"Triggered when user clicks the component",options:[{label:"Emit Data",type:"emit",name:"emit_data",fields:[{label:"Event Name",name:"eventName",type:"text",required:!0,placeholder:"Enter event name",default:"data_click"},{label:"Data Content",name:"data",type:"code",language:"json",placeholder:'{"key": "value"}',default:"{}"}]},{label:"Navigate",type:"link",name:"navigate",fields:[{label:"URL",name:"url",type:"text",required:!0,placeholder:"https://example.com",default:""},{label:"Target",name:"target",type:"select",options:[{label:"Current Window",value:"_self"},{label:"New Window",value:"_blank"}],default:"_self"}]}]},{type:"hover",label:"Hover Event",description:"Triggered when user hovers over the component",options:[{label:"Show Tooltip",type:"tooltip",name:"show_tooltip",fields:[{label:"Tooltip Content",name:"content",type:"text",required:!0,placeholder:"Enter tooltip content",default:""},{label:"Duration",name:"duration",type:"number",min:1e3,max:1e4,default:3e3}]}]},{type:"load",label:"Load Event",description:"Triggered when component finishes loading",options:[{label:"Auto Refresh",type:"refresh",name:"auto_refresh",fields:[{label:"Enable Auto Refresh",name:"enabled",type:"switch",default:!1},{label:"Refresh Interval",name:"interval",type:"number",min:1e3,max:6e4,default:5e3}]}]}]}};function M0(e){return T0[e]}function _M(e,t){const n={...M0(e)};return n.triggers=n.triggers.map(o=>({...o,options:[...o.options,...Object.values(t)]})),n}function NM(){const e=je(),t=$t(),{selectedDoc:r,selectedNodes:n}=t.getCurrentSelection(),o=n[0],i=eC(o.type);return f.jsx("div",{children:f.jsx(D0,{schema:i,initialValue:o.eventConfig,onChange:a=>{e.updateNode(r.id,o.id,{eventConfig:a})}})})}var Hi={exports:{}};Hi.exports;var j0;function DM(){return j0||(j0=1,function(e,t){var r=200,n="__lodash_hash_undefined__",o=1,i=2,a=9007199254740991,s="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",h="[object Error]",p="[object Function]",g="[object GeneratorFunction]",v="[object Map]",m="[object Number]",x="[object Null]",y="[object Object]",b="[object Promise]",w="[object Proxy]",_="[object RegExp]",T="[object Set]",j="[object String]",k="[object Symbol]",R="[object Undefined]",A="[object WeakMap]",$="[object ArrayBuffer]",F="[object DataView]",L="[object Float32Array]",P="[object Float64Array]",O="[object Int8Array]",I="[object Int16Array]",E="[object Int32Array]",S="[object Uint8Array]",M="[object Uint8ClampedArray]",D="[object Uint16Array]",N="[object Uint32Array]",z=/[\\^$.*+?()[\]{}|]/g,Y=/^\[object .+?Constructor\]$/,H=/^(?:0|[1-9]\d*)$/,K={};K[L]=K[P]=K[O]=K[I]=K[E]=K[S]=K[M]=K[D]=K[N]=!0,K[s]=K[l]=K[$]=K[u]=K[F]=K[d]=K[h]=K[p]=K[v]=K[m]=K[y]=K[_]=K[T]=K[j]=K[A]=!1;var J=typeof Za=="object"&&Za&&Za.Object===Object&&Za,q=typeof self=="object"&&self&&self.Object===Object&&self,Z=J||q||Function("return this")(),oe=t&&!t.nodeType&&t,ie=oe&&!0&&e&&!e.nodeType&&e,re=ie&&ie.exports===oe,G=re&&J.process,te=function(){try{return G&&G.binding&&G.binding("util")}catch{}}(),U=te&&te.isTypedArray;function ee(B,Q){for(var se=-1,pe=B==null?0:B.length,Je=0,Ae=[];++se<pe;){var st=B[se];Q(st,se,B)&&(Ae[Je++]=st)}return Ae}function ne(B,Q){for(var se=-1,pe=Q.length,Je=B.length;++se<pe;)B[Je+se]=Q[se];return B}function le(B,Q){for(var se=-1,pe=B==null?0:B.length;++se<pe;)if(Q(B[se],se,B))return!0;return!1}function fe(B,Q){for(var se=-1,pe=Array(B);++se<B;)pe[se]=Q(se);return pe}function ue(B){return function(Q){return B(Q)}}function ve(B,Q){return B.has(Q)}function Se(B,Q){return B?.[Q]}function De(B){var Q=-1,se=Array(B.size);return B.forEach(function(pe,Je){se[++Q]=[Je,pe]}),se}function Fe(B,Q){return function(se){return B(Q(se))}}function Me(B){var Q=-1,se=Array(B.size);return B.forEach(function(pe){se[++Q]=pe}),se}var Ce=Array.prototype,ke=Function.prototype,me=Object.prototype,Ge=Z["__core-js_shared__"],Qe=ke.toString,we=me.hasOwnProperty,it=function(){var B=/[^.]+$/.exec(Ge&&Ge.keys&&Ge.keys.IE_PROTO||"");return B?"Symbol(src)_1."+B:""}(),at=me.toString,gt=RegExp("^"+Qe.call(we).replace(z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qr=re?Z.Buffer:void 0,zt=Z.Symbol,Dt=Z.Uint8Array,uc=me.propertyIsEnumerable,wh=Ce.splice,Dr=zt?zt.toStringTag:void 0,He=Object.getOwnPropertySymbols,Ct=qr?qr.isBuffer:void 0,dc=Fe(Object.keys,Object),xi=yi(Z,"DataView"),so=yi(Z,"Map"),lo=yi(Z,"Promise"),Sh=yi(Z,"Set"),Ch=yi(Z,"WeakMap"),Ya=yi(Object,"create"),W4=fo(xi),Y4=fo(so),q4=fo(lo),X4=fo(Sh),K4=fo(Ch),Fw=zt?zt.prototype:void 0,Eh=Fw?Fw.valueOf:void 0;function co(B){var Q=-1,se=B==null?0:B.length;for(this.clear();++Q<se;){var pe=B[Q];this.set(pe[0],pe[1])}}function Z4(){this.__data__=Ya?Ya(null):{},this.size=0}function Q4(B){var Q=this.has(B)&&delete this.__data__[B];return this.size-=Q?1:0,Q}function J4(B){var Q=this.__data__;if(Ya){var se=Q[B];return se===n?void 0:se}return we.call(Q,B)?Q[B]:void 0}function eI(B){var Q=this.__data__;return Ya?Q[B]!==void 0:we.call(Q,B)}function tI(B,Q){var se=this.__data__;return this.size+=this.has(B)?0:1,se[B]=Ya&&Q===void 0?n:Q,this}co.prototype.clear=Z4,co.prototype.delete=Q4,co.prototype.get=J4,co.prototype.has=eI,co.prototype.set=tI;function rn(B){var Q=-1,se=B==null?0:B.length;for(this.clear();++Q<se;){var pe=B[Q];this.set(pe[0],pe[1])}}function rI(){this.__data__=[],this.size=0}function nI(B){var Q=this.__data__,se=hc(Q,B);if(se<0)return!1;var pe=Q.length-1;return se==pe?Q.pop():wh.call(Q,se,1),--this.size,!0}function oI(B){var Q=this.__data__,se=hc(Q,B);return se<0?void 0:Q[se][1]}function iI(B){return hc(this.__data__,B)>-1}function aI(B,Q){var se=this.__data__,pe=hc(se,B);return pe<0?(++this.size,se.push([B,Q])):se[pe][1]=Q,this}rn.prototype.clear=rI,rn.prototype.delete=nI,rn.prototype.get=oI,rn.prototype.has=iI,rn.prototype.set=aI;function uo(B){var Q=-1,se=B==null?0:B.length;for(this.clear();++Q<se;){var pe=B[Q];this.set(pe[0],pe[1])}}function sI(){this.size=0,this.__data__={hash:new co,map:new(so||rn),string:new co}}function lI(B){var Q=pc(this,B).delete(B);return this.size-=Q?1:0,Q}function cI(B){return pc(this,B).get(B)}function uI(B){return pc(this,B).has(B)}function dI(B,Q){var se=pc(this,B),pe=se.size;return se.set(B,Q),this.size+=se.size==pe?0:1,this}uo.prototype.clear=sI,uo.prototype.delete=lI,uo.prototype.get=cI,uo.prototype.has=uI,uo.prototype.set=dI;function fc(B){var Q=-1,se=B==null?0:B.length;for(this.__data__=new uo;++Q<se;)this.add(B[Q])}function fI(B){return this.__data__.set(B,n),this}function hI(B){return this.__data__.has(B)}fc.prototype.add=fc.prototype.push=fI,fc.prototype.has=hI;function jn(B){var Q=this.__data__=new rn(B);this.size=Q.size}function pI(){this.__data__=new rn,this.size=0}function vI(B){var Q=this.__data__,se=Q.delete(B);return this.size=Q.size,se}function gI(B){return this.__data__.get(B)}function mI(B){return this.__data__.has(B)}function xI(B,Q){var se=this.__data__;if(se instanceof rn){var pe=se.__data__;if(!so||pe.length<r-1)return pe.push([B,Q]),this.size=++se.size,this;se=this.__data__=new uo(pe)}return se.set(B,Q),this.size=se.size,this}jn.prototype.clear=pI,jn.prototype.delete=vI,jn.prototype.get=gI,jn.prototype.has=mI,jn.prototype.set=xI;function yI(B,Q){var se=vc(B),pe=!se&&AI(B),Je=!se&&!pe&&_h(B),Ae=!se&&!pe&&!Je&&Ww(B),st=se||pe||Je||Ae,yt=st?fe(B.length,String):[],Et=yt.length;for(var ot in B)we.call(B,ot)&&!(st&&(ot=="length"||Je&&(ot=="offset"||ot=="parent")||Ae&&(ot=="buffer"||ot=="byteLength"||ot=="byteOffset")||MI(ot,Et)))&&yt.push(ot);return yt}function hc(B,Q){for(var se=B.length;se--;)if(Gw(B[se][0],Q))return se;return-1}function bI(B,Q,se){var pe=Q(B);return vc(B)?pe:ne(pe,se(B))}function qa(B){return B==null?B===void 0?R:x:Dr&&Dr in Object(B)?DI(B):PI(B)}function Lw(B){return Xa(B)&&qa(B)==s}function Bw(B,Q,se,pe,Je){return B===Q?!0:B==null||Q==null||!Xa(B)&&!Xa(Q)?B!==B&&Q!==Q:wI(B,Q,se,pe,Bw,Je)}function wI(B,Q,se,pe,Je,Ae){var st=vc(B),yt=vc(Q),Et=st?l:Rn(B),ot=yt?l:Rn(Q);Et=Et==s?y:Et,ot=ot==s?y:ot;var Yt=Et==y,Tr=ot==y,Tt=Et==ot;if(Tt&&_h(B)){if(!_h(Q))return!1;st=!0,Yt=!1}if(Tt&&!Yt)return Ae||(Ae=new jn),st||Ww(B)?zw(B,Q,se,pe,Je,Ae):_I(B,Q,Et,se,pe,Je,Ae);if(!(se&o)){var lr=Yt&&we.call(B,"__wrapped__"),cr=Tr&&we.call(Q,"__wrapped__");if(lr||cr){var kn=lr?B.value():B,nn=cr?Q.value():Q;return Ae||(Ae=new jn),Je(kn,nn,se,pe,Ae)}}return Tt?(Ae||(Ae=new jn),NI(B,Q,se,pe,Je,Ae)):!1}function SI(B){if(!Hw(B)||RI(B))return!1;var Q=Vw(B)?gt:Y;return Q.test(fo(B))}function CI(B){return Xa(B)&&Uw(B.length)&&!!K[qa(B)]}function EI(B){if(!kI(B))return dc(B);var Q=[];for(var se in Object(B))we.call(B,se)&&se!="constructor"&&Q.push(se);return Q}function zw(B,Q,se,pe,Je,Ae){var st=se&o,yt=B.length,Et=Q.length;if(yt!=Et&&!(st&&Et>yt))return!1;var ot=Ae.get(B);if(ot&&Ae.get(Q))return ot==Q;var Yt=-1,Tr=!0,Tt=se&i?new fc:void 0;for(Ae.set(B,Q),Ae.set(Q,B);++Yt<yt;){var lr=B[Yt],cr=Q[Yt];if(pe)var kn=st?pe(cr,lr,Yt,Q,B,Ae):pe(lr,cr,Yt,B,Q,Ae);if(kn!==void 0){if(kn)continue;Tr=!1;break}if(Tt){if(!le(Q,function(nn,ho){if(!ve(Tt,ho)&&(lr===nn||Je(lr,nn,se,pe,Ae)))return Tt.push(ho)})){Tr=!1;break}}else if(!(lr===cr||Je(lr,cr,se,pe,Ae))){Tr=!1;break}}return Ae.delete(B),Ae.delete(Q),Tr}function _I(B,Q,se,pe,Je,Ae,st){switch(se){case F:if(B.byteLength!=Q.byteLength||B.byteOffset!=Q.byteOffset)return!1;B=B.buffer,Q=Q.buffer;case $:return!(B.byteLength!=Q.byteLength||!Ae(new Dt(B),new Dt(Q)));case u:case d:case m:return Gw(+B,+Q);case h:return B.name==Q.name&&B.message==Q.message;case _:case j:return B==Q+"";case v:var yt=De;case T:var Et=pe&o;if(yt||(yt=Me),B.size!=Q.size&&!Et)return!1;var ot=st.get(B);if(ot)return ot==Q;pe|=i,st.set(B,Q);var Yt=zw(yt(B),yt(Q),pe,Je,Ae,st);return st.delete(B),Yt;case k:if(Eh)return Eh.call(B)==Eh.call(Q)}return!1}function NI(B,Q,se,pe,Je,Ae){var st=se&o,yt=$w(B),Et=yt.length,ot=$w(Q),Yt=ot.length;if(Et!=Yt&&!st)return!1;for(var Tr=Et;Tr--;){var Tt=yt[Tr];if(!(st?Tt in Q:we.call(Q,Tt)))return!1}var lr=Ae.get(B);if(lr&&Ae.get(Q))return lr==Q;var cr=!0;Ae.set(B,Q),Ae.set(Q,B);for(var kn=st;++Tr<Et;){Tt=yt[Tr];var nn=B[Tt],ho=Q[Tt];if(pe)var Yw=st?pe(ho,nn,Tt,Q,B,Ae):pe(nn,ho,Tt,B,Q,Ae);if(!(Yw===void 0?nn===ho||Je(nn,ho,se,pe,Ae):Yw)){cr=!1;break}kn||(kn=Tt=="constructor")}if(cr&&!kn){var gc=B.constructor,mc=Q.constructor;gc!=mc&&"constructor"in B&&"constructor"in Q&&!(typeof gc=="function"&&gc instanceof gc&&typeof mc=="function"&&mc instanceof mc)&&(cr=!1)}return Ae.delete(B),Ae.delete(Q),cr}function $w(B){return bI(B,FI,TI)}function pc(B,Q){var se=B.__data__;return jI(Q)?se[typeof Q=="string"?"string":"hash"]:se.map}function yi(B,Q){var se=Se(B,Q);return SI(se)?se:void 0}function DI(B){var Q=we.call(B,Dr),se=B[Dr];try{B[Dr]=void 0;var pe=!0}catch{}var Je=at.call(B);return pe&&(Q?B[Dr]=se:delete B[Dr]),Je}var TI=He?function(B){return B==null?[]:(B=Object(B),ee(He(B),function(Q){return uc.call(B,Q)}))}:LI,Rn=qa;(xi&&Rn(new xi(new ArrayBuffer(1)))!=F||so&&Rn(new so)!=v||lo&&Rn(lo.resolve())!=b||Sh&&Rn(new Sh)!=T||Ch&&Rn(new Ch)!=A)&&(Rn=function(B){var Q=qa(B),se=Q==y?B.constructor:void 0,pe=se?fo(se):"";if(pe)switch(pe){case W4:return F;case Y4:return v;case q4:return b;case X4:return T;case K4:return A}return Q});function MI(B,Q){return Q=Q??a,!!Q&&(typeof B=="number"||H.test(B))&&B>-1&&B%1==0&&B<Q}function jI(B){var Q=typeof B;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?B!=="__proto__":B===null}function RI(B){return!!it&&it in B}function kI(B){var Q=B&&B.constructor,se=typeof Q=="function"&&Q.prototype||me;return B===se}function PI(B){return at.call(B)}function fo(B){if(B!=null){try{return Qe.call(B)}catch{}try{return B+""}catch{}}return""}function Gw(B,Q){return B===Q||B!==B&&Q!==Q}var AI=Lw(function(){return arguments}())?Lw:function(B){return Xa(B)&&we.call(B,"callee")&&!uc.call(B,"callee")},vc=Array.isArray;function OI(B){return B!=null&&Uw(B.length)&&!Vw(B)}var _h=Ct||BI;function II(B,Q){return Bw(B,Q)}function Vw(B){if(!Hw(B))return!1;var Q=qa(B);return Q==p||Q==g||Q==c||Q==w}function Uw(B){return typeof B=="number"&&B>-1&&B%1==0&&B<=a}function Hw(B){var Q=typeof B;return B!=null&&(Q=="object"||Q=="function")}function Xa(B){return B!=null&&typeof B=="object"}var Ww=U?ue(U):CI;function FI(B){return OI(B)?yI(B):EI(B)}function LI(){return[]}function BI(){return!1}e.exports=II}(Hi,Hi.exports)),Hi.exports}var TM=DM();const MM=yc(TM),jM=ur(e=>({config:{},setConfig:(t,r)=>e(n=>({config:{...n.config,[t]:r}})),setAll:t=>e({config:t})})),R0=X.createContext({config:{},setConfig:(e,t)=>{}}),RM=({children:e,initialValue:t={},onChange:r})=>{const{config:n,setConfig:o,setAll:i}=jM(),a=X.useRef({});return X.useEffect(()=>{Object.keys(t).length>0&&i(t)},[t,i]),X.useEffect(()=>{r&&Object.keys(n).length>0&&!MM(n,a.current)&&(a.current={...n},r(n))},[n,r]),f.jsx(R0.Provider,{value:{config:n,setConfig:o},children:e})},kM=()=>X.useContext(R0);function PM({field:e,value:t,onChange:r}){return f.jsx(Ue,{type:"text",value:t||"",placeholder:e.placeholder,onChange:n=>r(n.target.value)})}function AM({value:e,onChange:t}){return f.jsx(vn,{checked:!!e,onCheckedChange:t})}function OM({value:e,onChange:t}){return f.jsx(Ue,{type:"number",value:e??"",onChange:r=>t(Number(r.target.value))})}function IM({value:e,onChange:t}){return f.jsx(Ue,{type:"color",value:e,onChange:r=>t(r.target.value)})}function FM({field:e,value:t,onChange:r}){return f.jsxs(Ir,{value:t,onValueChange:r,children:[f.jsx(mr,{children:t}),f.jsx(xr,{children:e.options.map(n=>f.jsx(dt,{value:n.value,children:n.label},n.value))})]})}function LM({field:e,value:t,onChange:r}){return f.jsx(Io,{value:t||"",placeholder:e.placeholder,rows:e.rows||3,onChange:n=>r(n.target.value)})}function BM({value:e=[],onChange:t}){const[r,n]=X.useState(null),[o,i]=X.useState(null),a=X.useRef(null),s=()=>{const m=[...e,"#5470c6"];t?.(m)},l=m=>{const x=e.filter((y,b)=>b!==m);t?.(x)},c=(m,x)=>{const y=[...e];y[m]=x,t?.(y)},u=(m,x)=>{const y=x==="up"?m-1:m+1;if(y<0||y>=e.length)return;const b=[...e],[w]=b.splice(m,1);b.splice(y,0,w),t?.(b)},d=(m,x)=>{n(x),m.dataTransfer.effectAllowed="move",m.dataTransfer.setData("text/html","")},h=(m,x)=>{m.preventDefault(),m.dataTransfer.dropEffect="move",i(x)},p=()=>{i(null)},g=(m,x)=>{if(m.preventDefault(),r===null||r===x)return;const y=[...e],[b]=y.splice(r,1);y.splice(x,0,b),t?.(y),n(null),i(null)},v=()=>{n(null),i(null)};return f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("span",{className:"text-sm font-medium",children:["Colors (",e.length,")"]}),f.jsx(Oe,{type:"button",variant:"outline",size:"sm",onClick:s,className:"h-6 px-2 text-xs",children:f.jsx(vo,{className:"h-3 w-3 mr-1"})})]}),f.jsx("div",{className:"space-y-1",children:e.map((m,x)=>f.jsxs("div",{ref:a,draggable:!0,onDragStart:y=>d(y,x),onDragOver:y=>h(y,x),onDragLeave:p,onDrop:y=>g(y,x),onDragEnd:v,className:`flex items-center gap-1.5 p-1.5 rounded-md transition-all duration-200 ${r===x?"bg-primary/20 shadow-lg":o===x?"bg-primary/10":"bg-muted/30 hover:bg-muted/50"}`,children:[f.jsx("div",{className:"cursor-grab active:cursor-grabbing p-0.5 hover:bg-muted/50 rounded",title:"Drag to reorder",children:f.jsx(qh,{className:"h-3 w-3 text-muted-foreground"})}),f.jsxs("div",{className:"flex items-center gap-1.5 flex-1",children:[f.jsx(Ue,{type:"color",value:m,onChange:y=>c(x,y.target.value),className:"w-8 h-6 p-0.5 border-0"}),f.jsx(Ue,{type:"text",value:m,onChange:y=>c(x,y.target.value),className:"flex-1 h-6 text-xs",placeholder:"#000000"})]}),f.jsxs("div",{className:"flex items-center gap-0.5",children:[f.jsx(Oe,{type:"button",variant:"ghost",size:"sm",onClick:()=>u(x,"up"),disabled:x===0,className:"h-5 w-5 p-0",children:f.jsx(_c,{className:"h-3 w-3"})}),f.jsx(Oe,{type:"button",variant:"ghost",size:"sm",onClick:()=>u(x,"down"),disabled:x===e.length-1,className:"h-5 w-5 p-0",children:f.jsx(on,{className:"h-3 w-3"})}),f.jsx(Oe,{type:"button",variant:"ghost",size:"sm",onClick:()=>l(x),className:"h-5 w-5 p-0 text-destructive hover:text-destructive",disabled:e.length<=1,children:f.jsx(os,{className:"h-3 w-3"})})]})]},x))}),e.length===0&&f.jsxs("div",{className:"text-center text-sm text-muted-foreground py-4 border-2 border-dashed border-muted rounded-md",children:[f.jsx(vo,{className:"h-6 w-6 mx-auto mb-1 text-muted-foreground"}),f.jsx("p",{className:"text-xs",children:"No colors added"}),f.jsx("p",{className:"text-xs text-muted-foreground",children:'Click "Add" to get started'})]})]})}const zM={input:PM,switch:AM,number:OM,color:IM,select:FM,textarea:LM,colorArray:BM},$M=({label:e,layout:t="vertical",children:r})=>{const n=t==="horizontal";return f.jsxs("div",{className:`${n?"flex items-center justify-between gap-4":"flex flex-col gap-1"}`,children:[e&&f.jsx(Te,{className:jr("text-xs shrink-0 font-normal",n?"w-24":""),children:e}),f.jsx("div",{className:`${n&&e?"flex-1":""}`,children:r})]})};function GM({field:e,layout:t="horizontal"}){const{config:r,setConfig:n}=kM(),o=r[e.name]??e.default,i=s=>n(e.name,s),a=zM[e.type];return a?f.jsx($M,{label:e.label,layout:t,children:f.jsx(a,{field:e,value:o,onChange:i,layout:t})}):null}const VM=({schema:e,initialValue:t={},onChange:r})=>f.jsx(RM,{initialValue:t,onChange:r,children:f.jsx("div",{className:"divide-y divide-border",children:e?.sections?.map((n,o)=>f.jsx(zs,{title:n.title,icon:null,children:n.settings.map(i=>f.jsx(GM,{field:i},i.name))},`${n.type}-${o}`))})}),UM=({children:e})=>f.jsx("div",{className:"space-y-3",children:e}),HM=({children:e})=>f.jsx("div",{className:"grid grid-cols-2 gap-3",children:e}),rl=X.memo(function({label:t,value:r,unit:n="px",propertyKey:o,onChange:i,disabled:a=!1}){return f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs(Te,{className:"text-xs font-medium w-10",children:[" ",t," "]}),f.jsxs("div",{className:"flex flex-1 items-center",children:[f.jsx(Ue,{type:"number",value:Math.round(r),className:"h-7 text-xs px-2 text-right",onChange:s=>!a&&i(o,Math.round(+s.target.value)),disabled:a}),f.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:[" ",n," "]})]})]})}),WM=X.memo(function({value:t,onChange:r}){const n=t.locked===!0,o=X.useCallback((i,a)=>{if(r&&!n){const s={...t,[i]:a};r(s)}},[r,t,n]);return f.jsxs(zs,{title:"Position & Size",icon:f.jsx(rs,{className:"h-4 w-4"}),className:"border-b",children:[n&&f.jsx("div",{className:"mb-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded text-xs text-yellow-800 dark:text-yellow-200",children:" This node is locked and cannot be moved or resized"}),f.jsxs(HM,{children:[f.jsx(rl,{label:"X",propertyKey:"left",value:t.left,onChange:o,disabled:n}),f.jsx(rl,{label:"Y",propertyKey:"top",value:t.top,onChange:o,disabled:n}),f.jsx(rl,{label:"W",propertyKey:"width",value:t.width,onChange:o,disabled:n}),f.jsx(rl,{label:"H",propertyKey:"height",value:t.height,onChange:o,disabled:n})]}),f.jsx(UM,{children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(Te,{className:"text-xs font-medium w-14",children:" Rotation "}),f.jsxs("div",{className:"flex flex-1 items-center gap-2",children:[f.jsx(gn,{value:[Math.round(t.rotation||0)],min:0,max:360,step:1,className:"w-20",onValueChange:([i])=>!n&&o("rotation",Math.round(i)),disabled:n}),f.jsxs("div",{className:"inline-flex w-20",children:[f.jsx(Ue,{type:"number",value:Math.round(t.rotation||0),className:"w-16 h-7 text-xs px-2",step:"1",onChange:i=>!n&&o("rotation",Math.round(+i.target.value)),disabled:n}),f.jsx("span",{className:"text-xs text-muted-foreground",children:""})]})]})]})})]})});function YM(){const e=$t(),t=je(),r=qt(),{selectedDoc:n,selectedNodes:o}=e.getCurrentSelection(),i=o[0];if(i?.type){const a=r.get(i?.type);return f.jsxs(f.Fragment,{children:[f.jsx(WM,{value:i.position,onChange:s=>{t.updateNode(n.id,i.id,{position:s})}}),a?.propertiesSchema&&f.jsx(VM,{initialValue:i.props||{},schema:a.propertiesSchema,onChange:s=>{t.updateNode(n.id,i.id,{props:s})}})]})}return f.jsx("div",{children:"No selected widget"})}const nd=()=>({project:je.getState(),editor:$t.getState()});dr({id:"data",title:"Data",isDefault:!0,viewContainer:()=>f.jsx(bT,{})},_t.AuxiliaryBar),dr({id:"style",title:"Style",order:0,viewContainer:()=>f.jsx(YM,{})},_t.AuxiliaryBar),dr({id:"events",title:"Events",viewContainer:()=>f.jsx(NM,{})},_t.AuxiliaryBar),dr({id:"effects",title:"Effects",viewContainer:()=>f.jsx(tM,{})},_t.AuxiliaryBar);const k0=C.memo(()=>f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx(In,{className:"w-full border-none shadow-none bg-transparent",children:f.jsxs(bo,{className:"flex flex-col items-center justify-center p-8 text-center",children:[f.jsx("div",{className:"mb-4 p-3 rounded-full bg-muted",children:f.jsx($S,{className:"h-8 w-8 text-muted-foreground"})}),f.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Node Selected"}),f.jsx("p",{className:"text-sm text-muted-foreground mb-6 max-w-sm",children:"Select a node for configuration"})]})})}));k0.displayName="EmptyView";const P0=C.memo(({view:e,context:t})=>f.jsx(Li,{value:e.id,className:"mt-0",children:e.viewContainer({context:t})},e.id));P0.displayName="MemoizedTabsContent";const A0=C.memo(()=>{const e=$t(Ci(d=>{const{selectedNodes:h}=d.getCurrentSelection();return h})),t=C.useMemo(()=>e[0],[e]),r=lp(t?.type),n=C.useMemo(()=>nd(),[]),o=Gt(Ci(d=>d.getViewsByLocation(_t.AuxiliaryBar))),i=C.useMemo(()=>r?o.filter(d=>{switch(d.id){case"data":return!!r.dataConfigSchema;case"style":return!0;case"events":return!!r.eventConfigSchema;case"effects":return!0;default:return!0}}):o,[o,r]),a=C.useMemo(()=>i.find(d=>d.isDefault)?.id||i[0]?.id,[i]),s=C.useMemo(()=>`h-full ${t?"overflow-y-auto":"overflow-hidden"}`,[t]),l=C.useMemo(()=>({gridTemplateColumns:`repeat(${i.length}, 1fr)`}),[i.length]),c=C.useMemo(()=>i.map(d=>f.jsx(P0,{view:d,context:n},d.id)),[i,n]),u=C.useMemo(()=>i.map(d=>f.jsx(Fi,{value:d.id,className:"text-xs h-8",children:d.title},d.id)),[i]);return f.jsx(f.Fragment,{children:f.jsx("div",{className:s,children:t?f.jsx(f.Fragment,{children:f.jsxs(wg,{defaultValue:a,className:"w-full h-full",children:[f.jsx(wu,{className:"grid w-full m-0 rounded-none h-10 sticky top-0 z-10",style:l,children:u}),f.jsx(f.Fragment,{children:c})]})}):f.jsx(k0,{})})})});A0.displayName="Auxiliarybar";function od(e,t){for(var r=e.length,n=0;n<r;++n)if(t(e[n],n))return!0;return!1}function O0(e,t){for(var r=e.length,n=0;n<r;++n)if(t(e[n],n))return e[n];return null}function I0(e){var t=e;if(typeof t>"u"){if(typeof navigator>"u"||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}function id(e,t){try{return new RegExp(e,"g").exec(t)}catch{return null}}function qM(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var e=navigator.userAgentData,t=e.brands||e.uaList;return!!(t&&t.length)}function XM(e,t){var r=id("("+e+")((?:\\/|\\s|:)([0-9|\\.|_]+))",t);return r?r[3]:""}function ad(e){return e.replace(/_/g,".")}function Wi(e,t){var r=null,n="-1";return od(e,function(o){var i=id("("+o.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",t);return!i||o.brand?!1:(r=o,n=i[3]||"-1",o.versionAlias?n=o.versionAlias:o.versionTest&&(n=XM(o.versionTest.toLowerCase(),t)||n),n=ad(n),!0)}),{preset:r,version:n}}function nl(e,t){var r={brand:"",version:"-1"};return od(e,function(n){var o=F0(t,n);return o?(r.brand=n.id,r.version=n.versionAlias||o.version,r.version!=="-1"):!1}),r}function F0(e,t){return O0(e,function(r){var n=r.brand;return id(""+t.test,n.toLowerCase())})}var L0=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],B0=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],sd=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],z0=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],$0=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function G0(e){return!!Wi(z0,e).preset}function KM(e){var t=I0(e),r=!!/mobi/g.exec(t),n={name:"unknown",version:"-1",majorVersion:-1,webview:G0(t),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},o={name:"unknown",version:"-1",majorVersion:-1},i=Wi(L0,t),a=i.preset,s=i.version,l=Wi($0,t),c=l.preset,u=l.version,d=Wi(B0,t);if(n.chromium=!!d.preset,n.chromiumVersion=d.version,!n.chromium){var h=Wi(sd,t);n.webkit=!!h.preset,n.webkitVersion=h.version}return c&&(o.name=c.id,o.version=u,o.majorVersion=parseInt(u,10)),a&&(n.name=a.id,n.version=s,n.webview&&o.name==="ios"&&n.name!=="safari"&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:o,isMobile:r,isHints:!1}}function ZM(e){var t=navigator.userAgentData,r=(t.uaList||t.brands).slice(),n=t.mobile||!1,o=r[0],i=(t.platform||navigator.platform).toLowerCase(),a={name:o.brand,version:o.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!nl(z0,r).brand||G0(I0())},s={name:"unknown",version:"-1",majorVersion:-1};a.webkit=!a.chromium&&od(sd,function(h){return F0(r,h)});var l=nl(B0,r);if(a.chromium=!!l.brand,a.chromiumVersion=l.version||"-1",!a.chromium){var c=nl(sd,r);a.webkit=!!c.brand,a.webkitVersion=c.version||"-1"}var u=O0($0,function(h){return new RegExp(""+h.test,"g").exec(i)});s.name=u?u.id:"";{var d=nl(L0,r);a.name=d.brand||a.name,a.version=d.brand&&e?e.uaFullVersion:d.version}return a.webkit&&(s.name=n?"ios":"mac"),s.name==="ios"&&a.webview&&(a.version="-1"),s.version=ad(s.version),a.version=ad(a.version),s.majorVersion=parseInt(s.version,10),a.majorVersion=parseInt(a.version,10),{browser:a,os:s,isMobile:n,isHints:!0}}function QM(e){return qM()?ZM():KM(e)}function JM(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.map(function(n){return n.split(" ").map(function(o){return o?""+e+o:""}).join(" ")}).join(" ")}function ej(e,t){return t.replace(/([^}{]*){/gm,function(r,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+e+"$1")+"{"})}function mn(e,t){return function(r){r&&(e[t]=r)}}function V0(e,t,r){return function(n){n&&(e[t][r]=n)}}function tj(e,t){return function(r){var n=r.prototype;e.forEach(function(o){t(n,o)})}}function U0(e,t){return t===void 0&&(t={}),function(r,n){e.forEach(function(o){var i=t[o]||o;i in r||(r[i]=function(){for(var a,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var c=(a=this[n])[o].apply(a,s);return c===this[n]?this:c})})}}var H0="rgb",ld="rgba",W0="hsl",Y0="hsla",rj=[H0,ld,W0,Y0],Yi="function",ol="property",cd="array",qi="object",q0="string",X0="number",Xi="undefined",il=typeof window!==Xi,Gn=typeof document!==Xi&&document,K0=["webkit","ms","moz","o"],ud=function(e){if(!Gn)return"";var t=(Gn.body||Gn.documentElement).style,r=K0.length;if(typeof t[e]!==Xi)return e;for(var n=0;n<r;++n){var o="-"+K0[n]+"-"+e;if(typeof t[o]!==Xi)return o}return""},Z0=ud("transform"),dd=ud("filter"),Ki=ud("animation"),nj=Ki.replace("animation","keyframes"),oj=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],ht=1e-7,al={cm:function(e){return e*96/2.54},mm:function(e){return e*96/254},in:function(e){return e*96},pt:function(e){return e*96/72},pc:function(e){return e*96/6},"%":function(e,t){return e*t/100},vw:function(e,t){return t===void 0&&(t=window.innerWidth),e/100*t},vh:function(e,t){return t===void 0&&(t=window.innerHeight),e/100*t},vmax:function(e,t){return t===void 0&&(t=Math.max(window.innerWidth,window.innerHeight)),e/100*t},vmin:function(e,t){return t===void 0&&(t=Math.min(window.innerWidth,window.innerHeight)),e/100*t}};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */function ij(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}function $o(e,t,r,n){return(e*n+t*r)/(r+n)}function br(e){return typeof e===Xi}function rt(e){return e&&typeof e===qi}function $e(e){return Array.isArray(e)}function et(e){return typeof e===q0}function Zi(e){return typeof e===X0}function It(e){return typeof e===Yi}function aj(e,t){var r=e===""||e==" ",n=t===""||t==" ";return n&&r||e===t}function Q0(e,t,r,n,o){var i=fd(e,t,r);return i?r:sj(e,t,r+1,n,o)}function fd(e,t,r){if(!e.ignore)return null;var n=t.slice(Math.max(r-3,0),r+3).join("");return new RegExp(e.ignore).exec(n)}function sj(e,t,r,n,o){for(var i=function(c){var u=t[c].trim();if(u===e.close&&!fd(e,t,c))return{value:c};var d=c,h=Ft(o,function(p){var g=p.open;return g===u});if(h&&(d=Q0(h,t,c,n,o)),d===-1)return a=c,"break";c=d,a=c},a,s=r;s<n;++s){var l=i(s);if(s=a,typeof l=="object")return l.value;if(l==="break")break}return-1}function Qi(e,t){var r=et(t)?{separator:t}:t,n=r.separator,o=n===void 0?",":n,i=r.isSeparateFirst,a=r.isSeparateOnlyOpenClose,s=r.isSeparateOpenClose,l=s===void 0?a:s,c=r.openCloseCharacters,u=c===void 0?oj:c,d=u.map(function(j){var k=j.open,R=j.close;return k===R?k:k+"|"+R}).join("|"),h="(\\s*"+o+"\\s*|"+d+"|\\s+)",p=new RegExp(h,"g"),g=e.split(p).filter(function(j){return j&&j!=="undefined"}),v=g.length,m=[],x=[];function y(){return x.length?(m.push(x.join("")),x=[],!0):!1}for(var b=function(j){var k=g[j].trim(),R=j,A=Ft(u,function(L){var P=L.open;return P===k}),$=Ft(u,function(L){var P=L.close;return P===k});if(A){if(R=Q0(A,g,j,v,u),R!==-1&&l)return y()&&i||(m.push(g.slice(j,R+1).join("")),j=R,i)?(w=j,"break"):(w=j,"continue")}else if($&&!fd($,g,j)){var F=ij(u);return F.splice(u.indexOf($),1),{value:Qi(e,{separator:o,isSeparateFirst:i,isSeparateOnlyOpenClose:a,isSeparateOpenClose:l,openCloseCharacters:F})}}else if(aj(k,o)&&!a)return y(),i?(w=j,"break"):(w=j,"continue");R===-1&&(R=v-1),x.push(g.slice(j,R+1).join("")),j=R,w=j},w,_=0;_<v;++_){var T=b(_);if(_=w,typeof T=="object")return T.value;if(T==="break")break}return x.length&&m.push(x.join("")),m}function Qr(e){return Qi(e,"")}function Qt(e){return Qi(e,",")}function sl(e){var t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(e);return!t||t.length<4?{}:{prefix:t[1],value:t[2],suffix:t[3]}}function $r(e){var t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(e);if(!t)return{prefix:"",unit:"",value:NaN};var r=t[1],n=t[2],o=t[3];return{prefix:r,unit:o,value:parseFloat(n)}}function Go(e){return e.replace(/[\s-_]+([^\s-_])/g,function(t,r){return r.toUpperCase()})}function hd(e,t){return t===void 0&&(t="-"),e.replace(/([a-z])([A-Z])/g,function(r,n,o){return""+n+t+o.toLowerCase()})}function pd(e){return[].slice.call(e)}function Ji(){return Date.now?Date.now():new Date().getTime()}function Gr(e,t,r){r===void 0&&(r=-1);for(var n=e.length,o=0;o<n;++o)if(t(e[o],o,e))return o;return r}function Ft(e,t,r){var n=Gr(e,t);return n>-1?e[n]:r}var ll=function(){var e=Ji(),t=il&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return t?t.bind(window):function(r){var n=Ji(),o=setTimeout(function(){r(n-e)},1e3/60);return o}}(),J0=function(){var e=il&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return e?e.bind(window):function(t){clearTimeout(t)}}();function Jt(e){return Object.keys(e)}function ea(e,t){t===void 0&&(t=[]),e.sort(function(r,n){var o=t.indexOf(r),i=t.indexOf(n);return i===-1&&o===-1?0:o===-1?1:i===-1?-1:o-i})}function We(e,t){var r=$r(e),n=r.value,o=r.unit;if(rt(t)){var i=t[o];if(i){if(It(i))return i(n);if(al[o])return al[o](n,i)}}else if(o==="%")return n*t/100;return al[o]?al[o](n):n}function ta(e,t,r){return Math.max(t,Math.min(e,r))}function e1(e,t,r,n){return n===void 0&&(n=e[0]/e[1]),[[Ne(t[0],ht),Ne(t[0]/n,ht)],[Ne(t[1]*n,ht),Ne(t[1],ht)]].filter(function(o){return o.every(function(i,a){var s=t[a],l=Ne(s,ht);return r?i<=s||i<=l:i>=s||i>=l})})[0]||e}function vd(e,t,r,n){if(!n)return e.map(function(p,g){return ta(p,t[g],r[g])});var o=e[0],i=e[1],a=n===!0?o/i:n,s=e1(e,t,!1,a),l=s[0],c=s[1],u=e1(e,r,!0,a),d=u[0],h=u[1];return o<l||i<c?(o=l,i=c):(o>d||i>h)&&(o=d,i=h),[o,i]}function lj(e){for(var t=e.length,r=0,n=t-1;n>=0;--n)r+=e[n];return r}function gd(e){for(var t=e.length,r=0,n=t-1;n>=0;--n)r+=e[n];return t?r/t:0}function ct(e,t){var r=t[0]-e[0],n=t[1]-e[1],o=Math.atan2(n,r);return o>=0?o:o+Math.PI*2}function cj(e){return[0,1].map(function(t){return gd(e.map(function(r){return r[t]}))})}function t1(e){var t=cj(e),r=ct(t,e[0]),n=ct(t,e[1]);return r<n&&n-r<Math.PI||r>n&&n-r<-Math.PI?1:-1}function Vr(e,t){return Math.sqrt(Math.pow((t?t[0]:0)-e[0],2)+Math.pow((t?t[1]:0)-e[1],2))}function Ne(e,t){if(!t)return e;var r=1/t;return Math.round(e/t)/r}function r1(e,t){return e.forEach(function(r,n){e[n]=Ne(e[n],t)}),e}function uj(e){for(var t=[],r=0;r<e;++r)t.push(r);return t}function dj(e){return e.reduce(function(t,r){return t.concat(r)},[])}function fj(e){return e.replace("#","")}function n1(e){var t=fj(e),r=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16),i=parseInt(t.substring(6,8),16)/255;return isNaN(i)&&(i=1),[r,n,o,i]}function hj(e){var t=e.charAt(1),r=e.charAt(2),n=e.charAt(3),o=e.charAt(4),i=["#",t,t,r,r,n,n,o,o];return i.join("")}function pj(e){var t,r=e[0],n=e[1],o=e[2];r<0&&(r+=Math.floor((Math.abs(r)+360)/360)*360),r%=360;var i=(1-Math.abs(2*o-1))*n,a=i*(1-Math.abs(r/60%2-1)),s=o-i/2,l;return r<60?l=[i,a,0]:r<120?l=[a,i,0]:r<180?l=[0,i,a]:r<240?l=[0,a,i]:r<300?l=[a,0,i]:r<360?l=[i,0,a]:l=[0,0,0],[Math.round((l[0]+s)*255),Math.round((l[1]+s)*255),Math.round((l[2]+s)*255),(t=e[3])!==null&&t!==void 0?t:1]}function o1(e){if(e.charAt(0)==="#")return e.length===4||e.length===5?n1(hj(e)):n1(e);if(e.indexOf("(")!==-1){var t=sl(e),r=t.prefix,n=t.value;if(!r||!n)return;var o=Qt(n),i=[0,0,0,1],a=o.length;switch(r){case H0:case ld:for(var s=0;s<a;++s)i[s]=parseFloat(o[s]);return i;case W0:case Y0:for(var s=0;s<a;++s)o[s].indexOf("%")!==-1?i[s]=parseFloat(o[s])/100:i[s]=parseFloat(o[s]);return pj(i)}}}function cl(e,t){return Gn?t?Gn.querySelectorAll(e):Gn.querySelector(e):t?[]:null}function ut(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function ra(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function Vo(e,t){if(e.classList)e.classList.remove(t);else{var r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(r," ")}}function vj(e,t){if(!e||!t||!t.length)return{};var r;if(e instanceof Element)r=e;else if(e.length)r=e[0];else return{};for(var n={},o=Ht(r).getComputedStyle(r),i=t.length,a=0;a<i;++a)n[t[a]]=o[t[a]];return n}function tt(e,t,r,n){e.addEventListener(t,r,n)}function Xe(e,t,r,n){e.removeEventListener(t,r,n)}function wr(e){return e?.ownerDocument||Gn}function md(e){return wr(e).documentElement}function xn(e){return wr(e).body}function Ht(e){var t;return((t=e?.ownerDocument)===null||t===void 0?void 0:t.defaultView)||window}function i1(e){return e&&"postMessage"in e&&"blur"in e&&"self"in e}function na(e){return rt(e)&&e.nodeName&&e.nodeType&&"ownerDocument"in e}function gj(e,t,r,n,o,i){for(var a=0;a<o;++a){var s=r+a*o,l=n+a*o;e[s]+=e[l]*i,t[s]+=t[l]*i}}function mj(e,t,r,n,o){for(var i=0;i<o;++i){var a=r+i*o,s=n+i*o,l=e[a],c=t[a];e[a]=e[s],e[s]=l,t[a]=t[s],t[s]=c}}function xj(e,t,r,n,o){for(var i=0;i<n;++i){var a=r+i*n;e[a]/=o,t[a]/=o}}function a1(e,t,r){for(var n=e.slice(),o=0;o<r;++o)n[o*r+t-1]=0,n[(t-1)*r+o]=0;return n[(t-1)*(r+1)]=1,n}function Sr(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=e.slice(),n=Ke(t),o=0;o<t;++o){var i=t*o+o;if(!Ne(r[i],ht)){for(var a=o+1;a<t;++a)if(r[t*o+a]){mj(r,n,o,a,t);break}}if(!Ne(r[i],ht))return[];xj(r,n,o,t,r[i]);for(var a=0;a<t;++a){var s=a,l=a+o*t,c=r[l];!Ne(c,ht)||o===a||gj(r,n,s,o,t,-c)}}return n}function yj(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=[],n=0;n<t;++n)for(var o=0;o<t;++o)r[o*t+n]=e[t*n+o];return r}function s1(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=[],n=e[t*t-1],o=0;o<t-1;++o)r[o]=e[t*(t-1)+o]/n;return r[t-1]=0,r}function bj(e,t){for(var r=Ke(t),n=0;n<t-1;++n)r[t*(t-1)+n]=e[n]||0;return r}function Vn(e,t){for(var r=e.slice(),n=e.length;n<t-1;++n)r[n]=0;return r[t-1]=1,r}function Cr(e,t,r){if(t===void 0&&(t=Math.sqrt(e.length)),t===r)return e;for(var n=Ke(r),o=Math.min(t,r),i=0;i<o-1;++i){for(var a=0;a<o-1;++a)n[i*r+a]=e[i*t+a];n[(i+1)*r-1]=e[(i+1)*t-1],n[(r-1)*r+i]=e[(t-1)*t+i]}return n[r*r-1]=e[t*t-1],n}function ul(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Ke(e);return t.forEach(function(o){n=Ye(n,o,e)}),n}function Ye(e,t,r){r===void 0&&(r=Math.sqrt(e.length));var n=[],o=e.length/r,i=t.length/o;if(o){if(!i)return e}else return t;for(var a=0;a<r;++a)for(var s=0;s<i;++s){n[s*r+a]=0;for(var l=0;l<o;++l)n[s*r+a]+=e[l*r+a]*t[s*o+l]}return n}function Be(e,t){for(var r=Math.min(e.length,t.length),n=e.slice(),o=0;o<r;++o)n[o]=n[o]+t[o];return n}function be(e,t){for(var r=Math.min(e.length,t.length),n=e.slice(),o=0;o<r;++o)n[o]=n[o]-t[o];return n}function wj(e,t){return t===void 0&&(t=e.length===6),t?[e[0],e[1],0,e[2],e[3],0,e[4],e[5],1]:e}function l1(e,t){return t===void 0&&(t=e.length===9),t?[e[0],e[1],e[3],e[4],e[6],e[7]]:e}function Nt(e,t,r){r===void 0&&(r=t.length);var n=Ye(e,t,r),o=n[r-1];return n.map(function(i){return i/o})}function Sj(e,t){return Ye(e,[1,0,0,0,0,Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1],4)}function Cj(e,t){return Ye(e,[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1],4)}function Ej(e,t){return Ye(e,ia(t,4))}function dl(e,t){var r=t[0],n=r===void 0?1:r,o=t[1],i=o===void 0?1:o,a=t[2],s=a===void 0?1:a;return Ye(e,[n,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1],4)}function oa(e,t){return Nt(ia(t,3),Vn(e,3))}function xd(e,t){var r=t[0],n=r===void 0?0:r,o=t[1],i=o===void 0?0:o,a=t[2],s=a===void 0?0:a;return Ye(e,[1,0,0,0,0,1,0,0,0,0,1,0,n,i,s,1],4)}function yd(e,t){return Ye(e,t,4)}function ia(e,t){var r=Math.cos(e),n=Math.sin(e),o=Ke(t);return o[0]=r,o[1]=n,o[t]=-n,o[t+1]=r,o}function Ke(e){for(var t=e*e,r=[],n=0;n<t;++n)r[n]=n%(e+1)?0:1;return r}function bd(e,t){for(var r=Ke(t),n=Math.min(e.length,t-1),o=0;o<n;++o)r[(t+1)*o]=e[o];return r}function Un(e,t){for(var r=Ke(t),n=Math.min(e.length,t-1),o=0;o<n;++o)r[t*(t-1)+o]=e[o];return r}function wd(e,t,r,n,o,i,a,s){var l=e[0],c=e[1],u=t[0],d=t[1],h=r[0],p=r[1],g=n[0],v=n[1],m=o[0],x=o[1],y=i[0],b=i[1],w=a[0],_=a[1],T=s[0],j=s[1],k=[l,0,u,0,h,0,g,0,c,0,d,0,p,0,v,0,1,0,1,0,1,0,1,0,0,l,0,u,0,h,0,g,0,c,0,d,0,p,0,v,0,1,0,1,0,1,0,1,-m*l,-x*l,-y*u,-b*u,-w*h,-_*h,-T*g,-j*g,-m*c,-x*c,-y*d,-b*d,-w*p,-_*p,-T*v,-j*v],R=Sr(k,8);if(!R.length)return[];var A=Ye(R,[m,x,y,b,w,_,T,j],8);return A[8]=1,Cr(yj(A),3,4)}var aa=function(){return aa=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},aa.apply(this,arguments)};function Sd(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Uo(e,t){return t===void 0&&(t=0),Ho(Wo(e,t))}function fl(e,t){var r=Nt(e,[t[0],t[1]||0,t[2]||0,1],4),n=r[3]||1;return[r[0]/n,r[1]/n,r[2]/n]}function _j(e,t){t===void 0&&(t=document.body);for(var r=e,n=Sd();r;){var o=getComputedStyle(r).transform;if(n=yd(Uo(o),n),r===t)break;r=r.parentElement}return n=Sr(n,4),n[12]=0,n[13]=0,n[14]=0,n}function Ho(e){var t=Sd();return e.forEach(function(r){var n=r.matrixFunction,o=r.functionValue;n&&(t=n(t,o))}),t}function Wo(e,t){t===void 0&&(t=0);var r=$e(e)?e:Qr(e);return r.map(function(n){var o=sl(n),i=o.prefix,a=o.value,s=null,l=i,c="";if(i==="translate"||i==="translateX"||i==="translate3d"){var u=rt(t)?aa(aa({},t),{"o%":t["%"]}):{"%":t,"o%":t},d=Qt(a).map(function(L,P){return P===0&&"x%"in u?u["%"]=t["x%"]:P===1&&"y%"in u?u["%"]=t["y%"]:u["%"]=t["o%"],We(L,u)}),h=d[0],p=d[1],g=p===void 0?0:p,v=d[2],m=v===void 0?0:v;s=xd,c=[h,g,m]}else if(i==="translateY"){var x=rt(t)?aa({"%":t["y%"]},t):{"%":t},g=We(a,x);s=xd,c=[0,g,0]}else if(i==="translateZ"){var m=parseFloat(a);s=xd,c=[0,0,m]}else if(i==="scale"||i==="scale3d"){var y=Qt(a).map(function(L){return parseFloat(L)}),b=y[0],w=y[1],_=w===void 0?b:w,T=y[2],j=T===void 0?1:T;s=dl,c=[b,_,j]}else if(i==="scaleX"){var b=parseFloat(a);s=dl,c=[b,1,1]}else if(i==="scaleY"){var _=parseFloat(a);s=dl,c=[1,_,1]}else if(i==="scaleZ"){var j=parseFloat(a);s=dl,c=[1,1,j]}else if(i==="rotate"||i==="rotateZ"||i==="rotateX"||i==="rotateY"){var k=$r(a),R=k.unit,A=k.value,$=R==="rad"?A:A*Math.PI/180;i==="rotate"||i==="rotateZ"?(l="rotateZ",s=Ej):i==="rotateX"?s=Sj:i==="rotateY"&&(s=Cj),c=$}else if(i==="matrix3d")s=yd,c=Qt(a).map(function(L){return parseFloat(L)});else if(i==="matrix"){var F=Qt(a).map(function(L){return parseFloat(L)});s=yd,c=[F[0],F[1],0,0,F[2],F[3],0,0,0,0,1,0,F[4],F[5],0,1]}else l="";return{name:i,functionName:l,value:a,matrixFunction:s,functionValue:c}})}var Nj=function(){function e(){this.keys=[],this.values=[]}var t=e.prototype;return t.get=function(r){return this.values[this.keys.indexOf(r)]},t.set=function(r,n){var o=this.keys,i=this.values,a=o.indexOf(r),s=a===-1?o.length:a;o[s]=r,i[s]=n},e}(),Dj=function(){function e(){this.object={}}var t=e.prototype;return t.get=function(r){return this.object[r]},t.set=function(r,n){this.object[r]=n},e}(),Tj=typeof Map=="function",Mj=function(){function e(){}var t=e.prototype;return t.connect=function(r,n){this.prev=r,this.next=n,r&&(r.next=this),n&&(n.prev=this)},t.disconnect=function(){var r=this.prev,n=this.next;r&&(r.next=n),n&&(n.prev=r)},t.getIndex=function(){for(var r=this,n=-1;r;)r=r.prev,++n;return n},e}();function jj(e,t){var r=[],n=[];return e.forEach(function(o){var i=o[0],a=o[1],s=new Mj;r[i]=s,n[a]=s}),r.forEach(function(o,i){o.connect(r[i-1])}),e.filter(function(o,i){return!t[i]}).map(function(o,i){var a=o[0],s=o[1];if(a===s)return[0,0];var l=r[a],c=n[s-1],u=l.getIndex();l.disconnect(),c?l.connect(c,c.next):l.connect(void 0,r[0]);var d=l.getIndex();return[u,d]})}var Rj=function(){function e(r,n,o,i,a,s,l,c){this.prevList=r,this.list=n,this.added=o,this.removed=i,this.changed=a,this.maintained=s,this.changedBeforeAdded=l,this.fixed=c}var t=e.prototype;return Object.defineProperty(t,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),t.caculateOrdered=function(){var r=jj(this.changedBeforeAdded,this.fixed),n=this.changed,o=[];this.cacheOrdered=r.filter(function(i,a){var s=i[0],l=i[1],c=n[a],u=c[0],d=c[1];if(s!==l)return o.push([u,d]),!0}),this.cachePureChanged=o},e}();function Cd(e,t,r){var n=Tj?Map:r?Dj:Nj,o=r||function(y){return y},i=[],a=[],s=[],l=e.map(o),c=t.map(o),u=new n,d=new n,h=[],p=[],g={},v=[],m=0,x=0;return l.forEach(function(y,b){u.set(y,b)}),c.forEach(function(y,b){d.set(y,b)}),l.forEach(function(y,b){var w=d.get(y);typeof w>"u"?(++x,a.push(b)):g[w]=x}),c.forEach(function(y,b){var w=u.get(y);typeof w>"u"?(i.push(b),++m):(s.push([w,b]),x=g[b]||0,h.push([w-x,b-m]),p.push(b===w),w!==b&&v.push([w,b]))}),a.reverse(),new Rj(e,t,i,a,v,s,h,p)}var kj=function(){function e(r,n){r===void 0&&(r=[]),this.findKeyCallback=n,this.list=[].slice.call(r)}var t=e.prototype;return t.update=function(r){var n=[].slice.call(r),o=Cd(this.list,n,this.findKeyCallback);return this.list=n,o},e}();/*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var Ed=function(e,t){return Ed=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},Ed(e,t)};function Pj(e,t){Ed(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var c1=typeof Map=="function"?void 0:function(){var e=0;return function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++e)}}(),u1=function(e){Pj(t,e);function t(r){return r===void 0&&(r=[]),e.call(this,r,c1)||this}return t}(kj);function Yo(e,t){return Cd(e,t,c1)}/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var _d=function(){return _d=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},_d.apply(this,arguments)};function Aj(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}var yn=function(){function e(){this._events={}}var t=e.prototype;return t.on=function(r,n){if(rt(r))for(var o in r)this.on(o,r[o]);else this._addEvent(r,n,{});return this},t.off=function(r,n){if(!r)this._events={};else if(rt(r))for(var o in r)this.off(o);else if(!n)this._events[r]=[];else{var i=this._events[r];if(i){var a=Gr(i,function(s){return s.listener===n});a>-1&&i.splice(a,1)}}return this},t.once=function(r,n){var o=this;return n&&this._addEvent(r,n,{once:!0}),new Promise(function(i){o._addEvent(r,i,{once:!0})})},t.emit=function(r,n){var o=this;n===void 0&&(n={});var i=this._events[r];if(!r||!i)return!0;var a=!1;return n.eventType=r,n.stop=function(){a=!0},n.currentTarget=this,Aj(i).forEach(function(s){s.listener(n),s.once&&o.off(r,s.listener)}),!a},t.trigger=function(r,n){return n===void 0&&(n={}),this.emit(r,n)},t._addEvent=function(r,n,o){var i=this._events;i[r]=i[r]||[];var a=i[r];a.push(_d({listener:n},o))},e}();/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Nd=function(e,t){return Nd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},Nd(e,t)};function Oj(e,t){Nd(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var qo=function(){return qo=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},qo.apply(this,arguments)};function Ij(e){var t=e.container;return t===document.body?[t.scrollLeft||document.documentElement.scrollLeft,t.scrollTop||document.documentElement.scrollTop]:[t.scrollLeft,t.scrollTop]}function d1(e,t){return e.addEventListener("scroll",t),function(){e.removeEventListener("scroll",t)}}function hl(e){if(e){if(et(e))return document.querySelector(e)}else return null;if(It(e))return e();if(e instanceof Element)return e;if("current"in e)return e.current;if("value"in e)return e.value}var f1=function(e){Oj(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n._flag=!1,n._currentOptions=null,n._lock=!1,n._unregister=null,n._onScroll=function(){var o=n._currentOptions;n._lock||!o||n.emit("scrollDrag",{next:function(i){n.checkScroll({container:o.container,inputEvent:i})}})},n}var r=t.prototype;return r.dragStart=function(n,o){var i=hl(o.container);if(!i){this._flag=!1;return}var a=0,s=0,l=0,c=0;if(i===document.body)l=window.innerWidth,c=window.innerHeight;else{var u=i.getBoundingClientRect();a=u.top,s=u.left,l=u.width,c=u.height}this._flag=!0,this._startPos=[n.clientX,n.clientY],this._startRect={top:a,left:s,width:l,height:c},this._prevScrollPos=this._getScrollPosition([0,0],o),this._currentOptions=o,this._registerScrollEvent(o)},r.drag=function(n,o){if(clearTimeout(this._timer),!!this._flag){var i=n.clientX,a=n.clientY,s=o.threshold,l=s===void 0?0:s,c=this,u=c._startRect,d=c._startPos;this._currentOptions=o;var h=[0,0];return u.top>a-l?(d[1]>u.top||a<d[1])&&(h[1]=-1):u.top+u.height<a+l&&(d[1]<u.top+u.height||a>d[1])&&(h[1]=1),u.left>i-l?(d[0]>u.left||i<d[0])&&(h[0]=-1):u.left+u.width<i+l&&(d[0]<u.left+u.width||i>d[0])&&(h[0]=1),!h[0]&&!h[1]?!1:this._continueDrag(qo(qo({},o),{direction:h,inputEvent:n,isDrag:!0}))}},r.checkScroll=function(n){var o=this;if(this._isWait)return!1;var i=n.prevScrollPos,a=i===void 0?this._prevScrollPos:i,s=n.direction,l=n.throttleTime,c=l===void 0?0:l,u=n.inputEvent,d=n.isDrag,h=this._getScrollPosition(s||[0,0],n),p=h[0]-a[0],g=h[1]-a[1],v=s||[p?Math.abs(p)/p:0,g?Math.abs(g)/g:0];return this._prevScrollPos=h,this._lock=!1,!p&&!g?!1:(this.emit("move",{offsetX:v[0]?p:0,offsetY:v[1]?g:0,inputEvent:u}),c&&d&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){o._continueDrag(n)},c)),!0)},r.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},r._getScrollPosition=function(n,o){var i=o.container,a=o.getScrollPosition,s=a===void 0?Ij:a;return s({container:hl(i),direction:n})},r._continueDrag=function(n){var o=this,i,a=n.container,s=n.direction,l=n.throttleTime,c=n.useScroll,u=n.isDrag,d=n.inputEvent;if(!(!this._flag||u&&this._isWait)){var h=Ji(),p=Math.max(l+this._prevTime-h,0);if(p>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){o._continueDrag(n)},p),!1;this._prevTime=h;var g=this._getScrollPosition(s,n);this._prevScrollPos=g,u&&(this._isWait=!0),c||(this._lock=!0);var v={container:hl(a),direction:s,inputEvent:d};return(i=n.requestScroll)===null||i===void 0||i.call(n,v),this.emit("scroll",v),this._isWait=!1,c||this.checkScroll(qo(qo({},n),{prevScrollPos:g,direction:s,inputEvent:d}))}},r._registerScrollEvent=function(n){this._unregisterScrollEvent();var o=n.checkScrollEvent;if(o){var i=o===!0?d1:o,a=hl(n.container);o===!0&&(a===document.body||a===document.documentElement)?this._unregister=d1(window,this._onScroll):this._unregister=i(a,this._onScroll)}},r._unregisterScrollEvent=function(){var n;(n=this._unregister)===null||n===void 0||n.call(this),this._unregister=null},t}(yn);/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */function Fj(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}function Lt(e){return Ne(e,ht)}function Lj(e,t){return e.every(function(r,n){return Lt(r-t[n])===0})}function Bj(e,t){return!Lt(e[0]-t[0])&&!Lt(e[1]-t[1])}function sa(e){return e.length<3?0:Math.abs(lj(e.map(function(t,r){var n=e[r+1]||e[0];return t[0]*n[1]-n[0]*t[1]})))/2}function Dd(e,t){var r=t.width,n=t.height,o=t.left,i=t.top,a=Hn(e),s=a.minX,l=a.minY,c=a.maxX,u=a.maxY,d=r/(c-s),h=n/(u-l);return e.map(function(p){return[o+(p[0]-s)*d,i+(p[1]-l)*h]})}function Hn(e){var t=e.map(function(n){return n[0]}),r=e.map(function(n){return n[1]});return{minX:Math.min.apply(Math,t),minY:Math.min.apply(Math,r),maxX:Math.max.apply(Math,t),maxY:Math.max.apply(Math,r)}}function pl(e,t,r){var n=e[0],o=e[1],i=Hn(t),a=i.minX,s=i.maxX,l=[[a,o],[s,o]],c=vl(l[0],l[1]),u=Md(t),d=[];if(u.forEach(function(g){var v=vl(g[0],g[1]),m=g[0];if(Lj(c,v))d.push({pos:e,line:g,type:"line"});else{var x=h1(Td(c,v),[l,g]);x.forEach(function(y){g.some(function(b){return Bj(b,y)})?d.push({pos:y,line:g,type:"point"}):Lt(m[1]-o)!==0&&d.push({pos:y,line:g,type:"intersection"})})}}),Ft(d,function(g){return g[0]===n}))return!0;var h=0,p={};return d.forEach(function(g){var v=g.pos,m=g.type,x=g.line;if(!(v[0]>n))if(m==="intersection")++h;else{if(m==="line")return;if(m==="point"){var y=Ft(x,function(_){return _[1]!==o}),b=p[v[0]],w=y[1]>o?1:-1;b?b!==w&&++h:p[v[0]]=w}}}),h%2===1}function vl(e,t){var r=e[0],n=e[1],o=t[0],i=t[1],a=o-r,s=i-n;Math.abs(a)<ht&&(a=0),Math.abs(s)<ht&&(s=0);var l=0,c=0,u=0;return a?s?(l=-s/a,c=1,u=-l*r-n):(c=1,u=-n):s&&(l=-1,u=r),[l,c,u]}function Td(e,t){var r=e[0],n=e[1],o=e[2],i=t[0],a=t[1],s=t[2],l=r===0&&i===0,c=n===0&&a===0,u=[];if(l&&c)return[];if(l){var d=-o/n,h=-s/a;return d!==h?[]:[[-1/0,d],[1/0,d]]}else if(c){var p=-o/r,g=-s/i;return p!==g?[]:[[p,-1/0],[p,1/0]]}else if(r===0){var v=-o/n,m=-(a*v+s)/i;u=[[m,v]]}else if(i===0){var v=-s/a,m=-(n*v+o)/r;u=[[m,v]]}else if(n===0){var m=-o/r,v=-(i*m+s)/a;u=[[m,v]]}else if(a===0){var m=-s/i,v=-(r*m+o)/n;u=[[m,v]]}else{var m=(n*s-a*o)/(a*r-n*i),v=-(r*m+o)/n;u=[[m,v]]}return u.map(function(x){return[x[0],x[1]]})}function h1(e,t){var r=t.map(function(d){return[0,1].map(function(h){return[Math.min(d[0][h],d[1][h]),Math.max(d[0][h],d[1][h])]})}),n=[];if(e.length===2){var o=e[0],i=o[0],a=o[1];if(Lt(i-e[1][0])){if(!Lt(a-e[1][1])){var c=Math.max.apply(Math,r.map(function(d){return d[0][0]})),u=Math.min.apply(Math,r.map(function(d){return d[0][1]}));if(Lt(c-u)>0)return[];n=[[c,a],[u,a]]}}else{var s=Math.max.apply(Math,r.map(function(d){return d[1][0]})),l=Math.min.apply(Math,r.map(function(d){return d[1][1]}));if(Lt(s-l)>0)return[];n=[[i,s],[i,l]]}}return n.length||(n=e.filter(function(d){var h=d[0],p=d[1];return r.every(function(g){return 0<=Lt(h-g[0][0])&&0<=Lt(g[0][1]-h)&&0<=Lt(p-g[1][0])&&0<=Lt(g[1][1]-p)})})),n.map(function(d){return[Lt(d[0]),Lt(d[1])]})}function Md(e){return Fj(e.slice(1),[e[0]]).map(function(t,r){return[e[r],t]})}function zj(e,t){var r=e.slice(),n=t.slice();t1(r)===-1&&r.reverse(),t1(n)===-1&&n.reverse();var o=Md(r),i=Md(n),a=o.map(function(u){return vl(u[0],u[1])}),s=i.map(function(u){return vl(u[0],u[1])}),l=[];a.forEach(function(u,d){var h=o[d],p=[];s.forEach(function(g,v){var m=Td(u,g),x=h1(m,[h,i[v]]);p.push.apply(p,x.map(function(y){return{index1:d,index2:v,pos:y,type:"intersection"}}))}),p.sort(function(g,v){return Vr(h[0],g.pos)-Vr(h[0],v.pos)}),l.push.apply(l,p),pl(h[1],n)&&l.push({index1:d,index2:-1,pos:h[1],type:"inside"})}),i.forEach(function(u,d){if(pl(u[1],r)){var h=!1,p=Gr(l,function(g){var v=g.index2;return v===d?(h=!0,!1):!!h});p===-1&&(h=!1,p=Gr(l,function(g){var v=g.index1,m=g.index2;return v===-1&&m+1===d?(h=!0,!1):!!h})),p===-1?l.push({index1:-1,index2:d,pos:u[1],type:"inside"}):l.splice(p,0,{index1:-1,index2:d,pos:u[1],type:"inside"})}});var c={};return l.filter(function(u){var d=u.pos,h=d[0]+"x"+d[1];return c[h]?!1:(c[h]=!0,!0)})}function jd(e,t){var r=zj(e,t);return r.map(function(n){var o=n.pos;return o})}function $j(e,t){var r=jd(e,t);return sa(r)}/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Rd=function(e,t){return Rd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},Rd(e,t)};function Gj(e,t){Rd(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var pt=function(){return pt=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},pt.apply(this,arguments)};function Vj(e,t){var r=t[0]-e[0],n=t[1]-e[1],o=Math.atan2(n,r);return o>=0?o:o+Math.PI*2}function kd(e){return Vj([e[0].clientX,e[0].clientY],[e[1].clientX,e[1].clientY])/Math.PI*180}function Uj(e){return e.touches&&e.touches.length>=2}function gl(e){return e?e.touches?Wj(e.touches):[v1(e)]:[]}function Hj(e){return e&&(e.type.indexOf("mouse")>-1||"button"in e)}function p1(e,t,r){var n=r.length,o=la(e,n),i=o.clientX,a=o.clientY,s=o.originalClientX,l=o.originalClientY,c=la(t,n),u=c.clientX,d=c.clientY,h=la(r,n),p=h.clientX,g=h.clientY,v=i-u,m=a-d,x=i-p,y=a-g;return{clientX:s,clientY:l,deltaX:v,deltaY:m,distX:x,distY:y}}function Pd(e){return Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2))}function Wj(e){for(var t=Math.min(e.length,2),r=[],n=0;n<t;++n)r.push(v1(e[n]));return r}function v1(e){return{clientX:e.clientX,clientY:e.clientY}}function la(e,t){t===void 0&&(t=e.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=Math.min(e.length,t),o=0;o<n;++o){var i=e[o];r.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,r.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,r.clientX+=i.clientX,r.clientY+=i.clientY}return t?{clientX:r.clientX/t,clientY:r.clientY/t,originalClientX:r.originalClientX/t,originalClientY:r.originalClientY/t}:r}var Ad=function(){function e(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return e.prototype.getAngle=function(t){return t===void 0&&(t=this.prevClients),kd(t)},e.prototype.getRotation=function(t){return t===void 0&&(t=this.prevClients),kd(t)-kd(this.startClients)},e.prototype.getPosition=function(t,r){t===void 0&&(t=this.prevClients);var n=p1(t||this.prevClients,this.prevClients,this.startClients),o=n.deltaX,i=n.deltaY;return this.movement+=Math.sqrt(o*o+i*i),this.prevClients=t,n},e.prototype.getPositions=function(t){t===void 0&&(t=this.prevClients);for(var r=this.prevClients,n=this.startClients,o=Math.min(this.length,r.length),i=[],a=0;a<o;++a)i[a]=p1([t[a]],[r[a]],[n[a]]);return i},e.prototype.getMovement=function(t){var r=this.movement;if(!t)return r;var n=la(t,this.length),o=la(this.prevClients,this.length),i=n.clientX-o.clientX,a=n.clientY-o.clientY;return Math.sqrt(i*i+a*a)+r},e.prototype.getDistance=function(t){return t===void 0&&(t=this.prevClients),Pd(t)},e.prototype.getScale=function(t){return t===void 0&&(t=this.prevClients),Pd(t)/Pd(this.startClients)},e.prototype.move=function(t,r){this.startClients.forEach(function(n){n.clientX-=t,n.clientY-=r}),this.prevClients.forEach(function(n){n.clientX-=t,n.clientY-=r})},e}(),g1=["textarea","input"],m1=function(e){Gj(t,e);function t(r,n){n===void 0&&(n={});var o=e.call(this)||this;o.options={},o.flag=!1,o.pinchFlag=!1,o.data={},o.isDrag=!1,o.isPinch=!1,o.clientStores=[],o.targets=[],o.prevTime=0,o.doubleFlag=!1,o._useMouse=!1,o._useTouch=!1,o._useDrag=!1,o._dragFlag=!1,o._isTrusted=!1,o._isMouseEvent=!1,o._isSecondaryButton=!1,o._preventMouseEvent=!1,o._prevInputEvent=null,o._isDragAPI=!1,o._isIdle=!0,o._preventMouseEventId=0,o._window=window,o.onDragStart=function(h,p){if(p===void 0&&(p=!0),!(!o.flag&&h.cancelable===!1)){var g=h.type.indexOf("drag")>=-1;if(!(o.flag&&g)){o._isDragAPI=!0;var v=o.options,m=v.container,x=v.pinchOutside,y=v.preventWheelClick,b=v.preventRightClick,w=v.preventDefault,_=v.checkInput,T=v.dragFocusedInput,j=v.preventClickEventOnDragStart,k=v.preventClickEventOnDrag,R=v.preventClickEventByCondition,A=o._useTouch,$=!o.flag;if(o._isSecondaryButton=h.which===3||h.button===2,y&&(h.which===2||h.button===1)||b&&(h.which===3||h.button===2))return o.stop(),!1;if($){var F=o._window.document.activeElement,L=h.target;if(L){var P=L.tagName.toLowerCase(),O=g1.indexOf(P)>-1,I=L.isContentEditable;if(O||I){if(_||!T&&F===L)return!1;if(F&&(F===L||I&&F.isContentEditable&&F.contains(L)))if(T)L.blur();else return!1}else if((w||h.type==="touchstart")&&F){var E=F.tagName.toLowerCase();(F.isContentEditable||g1.indexOf(E)>-1)&&F.blur()}(j||k||R)&&tt(o._window,"click",o._onClick,!0)}o.clientStores=[new Ad(gl(h))],o._isIdle=!1,o.flag=!0,o.isDrag=!1,o._isTrusted=p,o._dragFlag=!0,o._prevInputEvent=h,o.data={},o.doubleFlag=Ji()-o.prevTime<200,o._isMouseEvent=Hj(h),!o._isMouseEvent&&o._preventMouseEvent&&o._allowMouseEvent();var S=o._preventMouseEvent||o.emit("dragStart",pt(pt({data:o.data,datas:o.data,inputEvent:h,isMouseEvent:o._isMouseEvent,isSecondaryButton:o._isSecondaryButton,isTrusted:p,isDouble:o.doubleFlag},o.getCurrentStore().getPosition()),{preventDefault:function(){h.preventDefault()},preventDrag:function(){o._dragFlag=!1}}));S===!1&&o.stop(),o._isMouseEvent&&o.flag&&w&&h.preventDefault()}if(!o.flag)return!1;var M=0;if($?(o._attchDragEvent(),A&&x&&(M=setTimeout(function(){tt(m,"touchstart",o.onDragStart,{passive:!1})}))):A&&x&&Xe(m,"touchstart",o.onDragStart),o.flag&&Uj(h)){if(clearTimeout(M),$&&h.touches.length!==h.changedTouches.length)return;o.pinchFlag||o.onPinchStart(h)}}}},o.onDrag=function(h,p){if(o.flag){var g=o.options.preventDefault;!o._isMouseEvent&&g&&h.preventDefault(),o._prevInputEvent=h;var v=gl(h),m=o.moveClients(v,h,!1);if(o._dragFlag){if(o.pinchFlag||m.deltaX||m.deltaY){var x=o._preventMouseEvent||o.emit("drag",pt(pt({},m),{isScroll:!!p,inputEvent:h}));if(x===!1){o.stop();return}}o.pinchFlag&&o.onPinch(h,v)}o.getCurrentStore().getPosition(v,!0)}},o.onDragEnd=function(h){if(o.flag){var p=o.options,g=p.pinchOutside,v=p.container,m=p.preventClickEventOnDrag,x=p.preventClickEventOnDragStart,y=p.preventClickEventByCondition,b=o.isDrag;(m||x||y)&&requestAnimationFrame(function(){o._allowClickEvent()}),!y&&!x&&m&&!b&&o._allowClickEvent(),o._useTouch&&g&&Xe(v,"touchstart",o.onDragStart),o.pinchFlag&&o.onPinchEnd(h);var w=h?.touches?gl(h):[],_=w.length;_===0||!o.options.keepDragging?o.flag=!1:o._addStore(new Ad(w));var T=o._getPosition(),j=Ji(),k=!b&&o.doubleFlag;o._prevInputEvent=null,o.prevTime=b||k?0:j,o.flag||(o._dettachDragEvent(),o._preventMouseEvent||o.emit("dragEnd",pt({data:o.data,datas:o.data,isDouble:k,isDrag:b,isClick:!b,isMouseEvent:o._isMouseEvent,isSecondaryButton:o._isSecondaryButton,inputEvent:h,isTrusted:o._isTrusted},T)),o.clientStores=[],o._isMouseEvent||(o._preventMouseEvent=!0,clearTimeout(o._preventMouseEventId),o._preventMouseEventId=setTimeout(function(){o._preventMouseEvent=!1},200)),o._isIdle=!0)}},o.onBlur=function(){o.onDragEnd()},o._allowClickEvent=function(){Xe(o._window,"click",o._onClick,!0)},o._onClick=function(h){o._allowClickEvent(),o._allowMouseEvent();var p=o.options.preventClickEventByCondition;p?.(h)||(h.stopPropagation(),h.preventDefault())},o._onContextMenu=function(h){var p=o.options;p.preventRightClick?o.onDragEnd(h):h.preventDefault()},o._passCallback=function(){};var i=[].concat(r),a=i[0];o._window=i1(a)?a:Ht(a),o.options=pt({checkInput:!1,container:a&&!("document"in a)?Ht(a):a,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var s=o.options,l=s.container,c=s.events,u=s.checkWindowBlur;if(o._useDrag=c.indexOf("drag")>-1,o._useTouch=c.indexOf("touch")>-1,o._useMouse=c.indexOf("mouse")>-1,o.targets=i,o._useDrag&&i.forEach(function(h){tt(h,"dragstart",o.onDragStart)}),o._useMouse&&(i.forEach(function(h){tt(h,"mousedown",o.onDragStart),tt(h,"mousemove",o._passCallback)}),tt(l,"contextmenu",o._onContextMenu)),u&&tt(Ht(),"blur",o.onBlur),o._useTouch){var d={passive:!1};i.forEach(function(h){tt(h,"touchstart",o.onDragStart,d),tt(h,"touchmove",o._passCallback,d)})}return o}return t.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},t.prototype.getMovement=function(r){return this.getCurrentStore().getMovement(r)+this.clientStores.slice(1).reduce(function(n,o){return n+o.movement},0)},t.prototype.isDragging=function(){return this.isDrag},t.prototype.isIdle=function(){return this._isIdle},t.prototype.isFlag=function(){return this.flag},t.prototype.isPinchFlag=function(){return this.pinchFlag},t.prototype.isDoubleFlag=function(){return this.doubleFlag},t.prototype.isPinching=function(){return this.isPinch},t.prototype.scrollBy=function(r,n,o,i){i===void 0&&(i=!0),this.flag&&(this.clientStores[0].move(r,n),i&&this.onDrag(o,!0))},t.prototype.move=function(r,n){var o=r[0],i=r[1],a=this.getCurrentStore(),s=a.prevClients;return this.moveClients(s.map(function(l){var c=l.clientX,u=l.clientY;return{clientX:c+o,clientY:u+i,originalClientX:c,originalClientY:u}}),n,!0)},t.prototype.triggerDragStart=function(r){this.onDragStart(r,!1)},t.prototype.setEventData=function(r){var n=this.data;for(var o in r)n[o]=r[o];return this},t.prototype.setEventDatas=function(r){return this.setEventData(r)},t.prototype.getCurrentEvent=function(r){return r===void 0&&(r=this._prevInputEvent),pt(pt({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:r})},t.prototype.getEventData=function(){return this.data},t.prototype.getEventDatas=function(){return this.data},t.prototype.unset=function(){var r=this,n=this.targets,o=this.options.container;this.off(),Xe(this._window,"blur",this.onBlur),this._useDrag&&n.forEach(function(i){Xe(i,"dragstart",r.onDragStart)}),this._useMouse&&(n.forEach(function(i){Xe(i,"mousedown",r.onDragStart)}),Xe(o,"contextmenu",this._onContextMenu)),this._useTouch&&(n.forEach(function(i){Xe(i,"touchstart",r.onDragStart)}),Xe(o,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},t.prototype.onPinchStart=function(r){var n=this,o=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>o)){var i=new Ad(gl(r));this.pinchFlag=!0,this._addStore(i);var a=this.emit("pinchStart",pt(pt({data:this.data,datas:this.data,angle:i.getAngle(),touches:this.getCurrentStore().getPositions()},i.getPosition()),{inputEvent:r,isTrusted:this._isTrusted,preventDefault:function(){r.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));a===!1&&(this.pinchFlag=!1)}},t.prototype.onPinch=function(r,n){if(!(!this.flag||!this.pinchFlag||n.length<2)){var o=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",pt(pt({data:this.data,datas:this.data,movement:this.getMovement(n),angle:o.getAngle(n),rotation:o.getRotation(n),touches:o.getPositions(n),scale:o.getScale(n),distance:o.getDistance(n)},o.getPosition(n)),{inputEvent:r,isTrusted:this._isTrusted}))}},t.prototype.onPinchEnd=function(r){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var o=this.getCurrentStore();this.emit("pinchEnd",pt(pt({data:this.data,datas:this.data,isPinch:n,touches:o.getPositions()},o.getPosition()),{inputEvent:r}))}},t.prototype.getCurrentStore=function(){return this.clientStores[0]},t.prototype.moveClients=function(r,n,o){var i=this._getPosition(r,o),a=this.isDrag;(i.deltaX||i.deltaY)&&(this.isDrag=!0);var s=!1;return!a&&this.isDrag&&(s=!0),pt(pt({data:this.data,datas:this.data},i),{movement:this.getMovement(r),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:n,isTrusted:this._isTrusted,isFirstDrag:s})},t.prototype._addStore=function(r){this.clientStores.splice(0,0,r)},t.prototype._getPosition=function(r,n){var o=this.getCurrentStore(),i=o.getPosition(r,n),a=this.clientStores.slice(1).reduce(function(c,u){var d=u.getPosition();return c.distX+=d.distX,c.distY+=d.distY,c},i),s=a.distX,l=a.distY;return pt(pt({},i),{distX:s,distY:l})},t.prototype._attchDragEvent=function(){var r=this._window,n=this.options.container,o={passive:!1};this._isDragAPI&&(tt(n,"dragover",this.onDrag,o),tt(r,"dragend",this.onDragEnd)),this._useMouse&&(tt(n,"mousemove",this.onDrag),tt(r,"mouseup",this.onDragEnd)),this._useTouch&&(tt(n,"touchmove",this.onDrag,o),tt(r,"touchend",this.onDragEnd,o),tt(r,"touchcancel",this.onDragEnd,o))},t.prototype._dettachDragEvent=function(){var r=this._window,n=this.options.container;this._isDragAPI&&(Xe(n,"dragover",this.onDrag),Xe(r,"dragend",this.onDragEnd)),this._useMouse&&(Xe(n,"mousemove",this.onDrag),Xe(r,"mouseup",this.onDragEnd)),this._useTouch&&(Xe(n,"touchstart",this.onDragStart),Xe(n,"touchmove",this.onDrag),Xe(r,"touchend",this.onDragEnd),Xe(r,"touchcancel",this.onDragEnd))},t.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},t}(yn);function Yj(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return t>>>0}var qj=Yj;function Xj(e){return qj(e).toString(36)}function Kj(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function Zj(e,t,r){return r.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(n,o){var i=o.trim();return(i?Qt(i):[""]).map(function(a){var s=a.trim();return s.indexOf("@")===0?s:s.indexOf(":global")>-1?s.replace(/\:global/g,""):s.indexOf(":host")>-1?"".concat(s.replace(/\:host/g,".".concat(e))):s?".".concat(e," ").concat(s):".".concat(e)}).join(", ")+" {"})}function Qj(e,t,r,n,o){var i=wr(n),a=i.createElement("style");return a.setAttribute("type","text/css"),a.setAttribute("data-styled-id",e),a.setAttribute("data-styled-count","1"),r.nonce&&a.setAttribute("nonce",r.nonce),a.innerHTML=Zj(e,t,r),(o||i.head||i.body).appendChild(a),a}function ml(e){var t="rCS"+Xj(e);return{className:t,inject:function(r,n){n===void 0&&(n={});var o=Kj(r),i=(o||r.ownerDocument||document).querySelector('style[data-styled-id="'.concat(t,'"]'));if(!i)i=Qj(t,e,n,r,o);else{var a=parseFloat(i.getAttribute("data-styled-count"))||0;i.setAttribute("data-styled-count","".concat(a+1))}return{destroy:function(){var s,l=parseFloat(i.getAttribute("data-styled-count"))||0;l<=1?(i.remove?i.remove():(s=i.parentNode)===null||s===void 0||s.removeChild(i),i=null):i.setAttribute("data-styled-count","".concat(l-1))}}}}}var Od=function(){return Od=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Od.apply(this,arguments)};function Jj(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function x1(e,t){var r=ml(t),n=r.className;return X.forwardRef(function(o,i){var a=o.className,s=a===void 0?"":a;o.cspNonce;var l=Jj(o,["className","cspNonce"]),c=X.useRef();return X.useImperativeHandle(i,function(){return c.current},[]),X.useEffect(function(){var u=r.inject(c.current,{nonce:o.cspNonce});return function(){u.destroy()}},[]),X.createElement(e,Od({ref:c,"data-styled-id":n,className:"".concat(s," ").concat(n)},l))})}var Id=function(e,t){return Id=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Id(e,t)};function ca(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Id(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var V=function(){return V=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},V.apply(this,arguments)};function eR(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function tR(e,t,r,n){var o=arguments.length,i=o<3?t:n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}function rR(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function ce(e,t,r){if(arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function ua(e,t){return V({events:[],props:[],name:e},t)}var nR=["n","w","s","e"],Fd=["n","w","s","e","nw","ne","sw","se"];function oR(e,t){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*e,'px" height="').concat(32*e,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(t,'deg);transform-origin: 16px 16px"></path></svg>')}function iR(e){var t=oR(1,e),r=Math.round(e/45)*45%180,n="ns-resize";return r===135?n="nwse-resize":r===45?n="nesw-resize":r===90&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(t,"') 16 16, ").concat(n,";")}var Xo=QM(),y1=Xo.browser.webkit,b1=y1&&function(){var e=typeof window>"u"?{userAgent:""}:window.navigator,t=/applewebkit\/([^\s]+)/g.exec(e.userAgent.toLowerCase());return t?parseFloat(t[1])<605:!1}(),w1=Xo.browser.name,S1=parseInt(Xo.browser.version,10),aR=w1==="chrome",sR=Xo.browser.chromium,lR=parseInt(Xo.browser.chromiumVersion,10)||0,cR=aR&&S1>=109||sR&&lR>=109,uR=w1==="firefox",dR=parseInt(Xo.browser.webkitVersion,10)>=612||S1>=15,Ld="moveable-",fR=Fd.map(function(e){var t="",r="",n="center",o="center",i="calc(var(--moveable-control-padding, 20) * -1px)";return e.indexOf("n")>-1&&(t="top: ".concat(i,";"),o="bottom"),e.indexOf("s")>-1&&(t="top: 0px;",o="top"),e.indexOf("w")>-1&&(r="left: ".concat(i,";"),n="right"),e.indexOf("e")>-1&&(r="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(e,`"] {
        `).concat(r).concat(t,`
        transform-origin: `).concat(n," ").concat(o,`;
    }`)}).join(`
`),hR=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(fR,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(e){return`
.direction[data-rotation="`.concat(e,'"], :global .view-control-rotation').concat(e,` {
`).concat(iR(e),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(b1?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),pR=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Bd=1e-4,Mt=1e-7,xl=1e-9,zd=Math.pow(10,10),C1=-zd,vR={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},$d={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},E1={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},gR=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function da(e,t,r,n,o,i){var a,s;i===void 0&&(i="draggable");var l=(s=(a=t.gestos[i])===null||a===void 0?void 0:a.move(r,e.inputEvent))!==null&&s!==void 0?s:{},c=l.originalDatas||l.datas,u=c[i]||(c[i]={});return V(V({},l),{isPinch:!!n,parentEvent:!0,datas:u,originalDatas:e.originalDatas})}var Ko=function(){function e(t){var r;t===void 0&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(r={},r[t]={},r)}return e.prototype.dragStart=function(t,r){this.isDrag=!1,this.isFlag=!1;var n=r.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),V(V({},this.move(t,r.inputEvent)),{type:"dragstart"})},e.prototype.drag=function(t,r){return this.move([t[0]-this.prevX,t[1]-this.prevY],r)},e.prototype.move=function(t,r){var n,o,i=!1;if(!this.isFlag)this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],o=t[1],this.isFlag=!0;else{var a=this.isDrag;n=this.prevX+t[0],o=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0),!a&&this.isDrag&&(i=!0)}return this.prevX=n,this.prevY=o,{type:"drag",clientX:n,clientY:o,inputEvent:r,isFirstDrag:i,isDrag:this.isDrag,distX:n-this.startX,distY:o-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},e}();function Zo(e,t,r,n){var o=e.length===16,i=o?4:3,a=Xn(e,r,n,i),s=W(a,4),l=W(s[0],2),c=l[0],u=l[1],d=W(s[1],2),h=d[0],p=d[1],g=W(s[2],2),v=g[0],m=g[1],x=W(s[3],2),y=x[0],b=x[1],w=W(nt(e,t,i),2),_=w[0],T=w[1],j=Math.min(c,h,v,y),k=Math.min(u,p,m,b),R=Math.max(c,h,v,y),A=Math.max(u,p,m,b);c=c-j||0,h=h-j||0,v=v-j||0,y=y-j||0,u=u-k||0,p=p-k||0,m=m-k||0,b=b-k||0,_=_-j||0,T=T-k||0;var $=e[0],F=e[i+1],L=kt($*F);return{left:j,top:k,right:R,bottom:A,origin:[_,T],pos1:[c,u],pos2:[h,p],pos3:[v,m],pos4:[y,b],direction:L}}function _1(e,t){var r=t.clientX,n=t.clientY,o=t.datas,i=e.state,a=i.moveableClientRect,s=i.rootMatrix,l=i.is3d,c=i.pos1,u=a.left,d=a.top,h=l?4:3,p=W(be(ii(s,[r-u,n-d],h),c),2),g=p[0],v=p[1],m=W(Ur({datas:o,distX:g,distY:v}),2),x=m[0],y=m[1];return[x,y]}function Wn(e,t){var r=t.datas,n=e.state,o=n.allMatrix,i=n.beforeMatrix,a=n.is3d,s=n.left,l=n.top,c=n.origin,u=n.offsetMatrix,d=n.targetMatrix,h=n.transformOrigin,p=a?4:3;r.is3d=a,r.matrix=o,r.targetMatrix=d,r.beforeMatrix=i,r.offsetMatrix=u,r.transformOrigin=h,r.inverseMatrix=Sr(o,p),r.inverseBeforeMatrix=Sr(i,p),r.absoluteOrigin=Vn(Be([s,l],c),p),r.startDragBeforeDist=Nt(r.inverseBeforeMatrix,r.absoluteOrigin,p),r.startDragDist=Nt(r.inverseMatrix,r.absoluteOrigin,p)}function mR(e){return Zo(e.datas.beforeTransform,[50,50],100,100).direction}function yl(e,t,r){var n=t.datas,o=t.originalDatas.beforeRenderable,i=n.transformIndex,a=o.nextTransforms,s=a.length,l=o.nextTransformAppendedIndexes,c=-1;i===-1?(r==="translate"?c=0:r==="rotate"&&(c=Gr(a,function(p){return p.match(/scale\(/g)})),c===-1&&(c=a.length),n.transformIndex=c):Ft(l,function(p){return p.index===i&&p.functionName===r})?c=i:c=i+l.filter(function(p){return p.index<i}).length;var u=Vk(a,e.state,c),d=u.targetFunction,h=r==="rotate"?"rotateZ":r;n.beforeFunctionTexts=u.beforeFunctionTexts,n.afterFunctionTexts=u.afterFunctionTexts,n.beforeTransform=u.beforeFunctionMatrix,n.beforeTransform2=u.beforeFunctionMatrix2,n.targetTansform=u.targetFunctionMatrix,n.afterTransform=u.afterFunctionMatrix,n.afterTransform2=u.afterFunctionMatrix2,n.targetAllTransform=u.allFunctionMatrix,d.functionName===h?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):s>c&&(n.isAppendTransform=!0,o.nextTransformAppendedIndexes=ce(ce([],W(l),!1),[{functionName:r,index:c,isAppend:!0}],!1))}function bl(e,t,r){return"".concat(e.beforeFunctionTexts.join(" ")," ").concat(e.isAppendTransform?r:t," ").concat(e.afterFunctionTexts.join(" "))}function xR(e){var t=e.datas,r=e.distX,n=e.distY,o=W(D1({datas:t,distX:r,distY:n}),2),i=o[0],a=o[1],s=N1(t,bj([i,a],4));return Nt(s,Vn([0,0,0],4),4)}function N1(e,t,r){var n=e.beforeTransform,o=e.afterTransform,i=e.beforeTransform2,a=e.afterTransform2,s=e.targetAllTransform,l=r?Ye(s,t,4):Ye(t,s,4),c=Ye(Sr(r?i:n,4),l,4),u=Ye(c,Sr(r?a:o,4),4);return u}function D1(e){var t=e.datas,r=e.distX,n=e.distY,o=t.inverseBeforeMatrix,i=t.is3d,a=t.startDragBeforeDist,s=t.absoluteOrigin,l=i?4:3;return be(Nt(o,Be(s,[r,n]),l),a)}function Ur(e,t){var r=e.datas,n=e.distX,o=e.distY,i=r.inverseBeforeMatrix,a=r.inverseMatrix,s=r.is3d,l=r.startDragBeforeDist,c=r.startDragDist,u=r.absoluteOrigin,d=s?4:3;return be(Nt(t?i:a,Be(u,[n,o]),d),t?l:c)}function yR(e,t){var r=e.datas,n=e.distX,o=e.distY;r.beforeMatrix;var i=r.matrix,a=r.is3d;r.startDragBeforeDist;var s=r.startDragDist,l=r.absoluteOrigin,c=a?4:3;return be(Nt(i,Be(s,[n,o]),c),l)}function bR(e,t,r,n,o,i){return n===void 0&&(n=t),o===void 0&&(o=r),i===void 0&&(i=[0,0]),e?e.map(function(a,s){var l=$r(a),c=l.value,u=l.unit,d=s?o:n,h=s?r:t;if(a==="%"||isNaN(c)){var p=d?i[s]/d:0;return h*p}else if(u!=="%")return c;return h*c/100}):i}function T1(e){var t=[];return e[1]>=0&&(e[0]>=0&&t.push(3),e[0]<=0&&t.push(2)),e[1]<=0&&(e[0]>=0&&t.push(1),e[0]<=0&&t.push(0)),t}function wR(e,t){return T1(t).map(function(r){return e[r]})}function Gd(e,t){var r=(t+1)/2;return[$o(e[0][0],e[1][0],r,1-r),$o(e[0][1],e[1][1],r,1-r)]}function mt(e,t){var r=Gd([e[0],e[1]],t[0]),n=Gd([e[2],e[3]],t[0]);return Gd([r,n],t[1])}function SR(e,t,r,n,o,i){var a=Xn(t,r,n,o),s=mt(a,i),l=e[0]-s[0],c=e[1]-s[1];return[l,c]}function fa(e,t,r,n){return Ye(e,ga(t,n,r),n)}function CR(e,t,r,n){var o=e.transformOrigin,i=e.offsetMatrix,a=e.is3d,s=a?4:3,l;if(et(r)){var c=t.beforeTransform,u=t.afterTransform;n?l=Cr(Uo(r),4,s):l=Cr(Ye(Ye(c,Uo([r]),4),u,4),4,s)}else l=r;return fa(i,l,o,s)}function ER(e,t){var r=e.transformOrigin,n=e.offsetMatrix,o=e.is3d,i=e.targetMatrix,a=e.targetAllTransform,s=o?4:3;return fa(n,Ye(a||i,bd(t,s),s),r,s)}function wl(e,t){var r=Qo(t);return{setTransform:function(n,o){o===void 0&&(o=-1),r.startTransforms=$e(n)?n:Qr(n),Vd(e,t,o)},setTransformIndex:function(n){Vd(e,t,n)}}}function Sl(e,t,r){var n=Qo(t),o=n.startTransforms;Vd(e,t,Gr(o,function(i){return i.indexOf("".concat(r,"("))===0}))}function Vd(e,t,r){var n=Qo(t),o=t.datas;if(o.transformIndex=r,r!==-1){var i=n.startTransforms[r];if(i){var a=e.state,s=Wo([i],{"x%":function(l){return l/100*a.offsetWidth},"y%":function(l){return l/100*a.offsetHeight}});o.startValue=s[0].functionValue}}}function Ud(e,t){var r=Qo(e);r.nextTransforms=Qr(t)}function Qo(e){return e.originalDatas.beforeRenderable}function Cl(e){var t=e.originalDatas.beforeRenderable;return t.nextTransforms}function El(e){return(Cl(e)||[]).join(" ")}function _l(e){return Qo(e).nextStyle}function M1(e,t,r,n,o){Ud(o,t);var i=jt.drag(e,da(o,e.state,r,n)),a=i?i.transform:t;return V(V({transform:t,drag:i},Rt({transform:a},o)),{afterTransform:a})}function Hd(e,t,r,n,o,i){var a=CR(e.state,o,t,i),s=DR(e,r,n,a);return s}function j1(e,t,r,n,o,i,a){var s=Hd(e,t,r,o,i,a),l=e.state,c=l.left,u=l.top,d=e.props.groupable,h=d?c:0,p=d?u:0,g=be(n,s);return be(g,[h,p])}function _R(e,t,r,n,o,i,a){var s=j1(e,t,r,n,o,i,a);return s}function NR(e,t,r){return[t?-1+e[0]/(t/2):0,r?-1+e[1]/(r/2):0]}function DR(e,t,r,n){n===void 0&&(n=e.state.allMatrix);var o=e.state,i=o.width,a=o.height,s=o.is3d,l=s?4:3,c=[i/2*(1+t[0])+r[0],a/2*(1+t[1])+r[1]];return nt(n,c,l)}function TR(e,t,r){var n=r.fixedDirection,o=r.fixedPosition,i=r.fixedOffset;return j1(e,"rotate(".concat(t,"deg)"),n,o,i,r)}function MR(e,t,r,n,o,i){var a=e.props.groupable,s=e.state,l=s.transformOrigin,c=s.offsetMatrix,u=s.is3d,d=s.width,h=s.height,p=s.left,g=s.top,v=i.fixedDirection,m=i.nextTargetMatrix||s.targetMatrix,x=u?4:3,y=bR(o,t,r,d,h,l),b=a?p:0,w=a?g:0,_=fa(c,m,y,x),T=SR(n,_,t,r,x,v);return be(T,[b,w])}function jR(e,t){return mt(rr(e.state),t)}function RR(e,t){var r=e.targetGesto,n=e.controlGesto,o;return r?.isFlag()&&(o=r.getEventData()[t]),!o&&n?.isFlag()&&(o=n.getEventData()[t]),o||{}}function kR(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function PR(e){var t=e("scale"),r=e("rotate"),n=e("translate"),o=[];return n&&n!=="0px"&&n!=="none"&&o.push("translate(".concat(n.split(/\s+/).join(","),")")),r&&r!=="1"&&r!=="none"&&o.push("rotate(".concat(r,")")),t&&t!=="1"&&t!=="none"&&o.push("scale(".concat(t.split(/\s+/).join(","),")")),o}function R1(e,t,r){for(var n=e,o=[],i=md(e)||xn(e),a=!r&&e===t||e===i,s=a,l=!1,c=3,u,d,h,p=!1,g=ma(t,t,!0).offsetParent,v=1;n&&!s;){s=a;var m=Bt(n),x=m("position"),y=mx(n),b=x==="fixed",w=PR(m),_=wj(jk(y)),T=void 0,j=!1,k=!1,R=0,A=0,$=0,F=0,L={hasTransform:!1,fixedContainer:null};b&&(p=!0,L=Ok(n),g=L.fixedContainer);var P=_.length;!l&&(P===16||w.length)&&(l=!0,c=4,cf(o),h&&(h=Cr(h,3,4))),l&&P===9&&(_=Cr(_,3,4));var O=Ak(n,e),I=O.tagName,E=O.hasOffset,S=O.isSVG,M=O.origin,D=O.targetOrigin,N=O.offset,z=W(N,2),Y=z[0],H=z[1];I==="svg"&&!n.ownerSVGElement&&h&&(o.push({type:"target",target:n,matrix:Ik(n,c)}),o.push({type:"offset",target:n,matrix:Ke(c)}));var K=parseFloat(m("zoom"))||1;if(b)T=L.fixedContainer,j=!0;else{var J=ma(n,t,!1,!0,m),q=J.offsetZoom;if(T=J.offsetParent,j=J.isEnd,k=J.isStatic,v*=q,(J.isCustomElement||q!==1)&&k)Y-=T.offsetLeft,H-=T.offsetTop;else if(uR||cR){var Z=J.parentSlotElement;if(Z){for(var oe=T,ie=0,re=0;oe&&kR(oe);)ie+=oe.offsetLeft,re+=oe.offsetTop,oe=oe.offsetParent;Y-=ie,H-=re}}}if(y1&&!dR&&E&&!S&&k&&(x==="relative"||x==="static")&&(Y-=T.offsetLeft,H-=T.offsetTop,a=a||j),b)E&&L.hasTransform&&($=T.clientLeft,F=T.clientTop);else if(E&&g!==T&&(R=T.clientLeft,A=T.clientTop),E&&T===i){var G=xx(n,!1);Y+=G[0],H+=G[1]}if(o.push({type:"target",target:n,matrix:ga(_,c,M)}),w.length&&(o.push({type:"offset",target:n,matrix:Ke(c)}),o.push({type:"target",target:n,matrix:ga(Uo(w),c,M)})),E){var te=n===e,U=te?0:n.scrollLeft,ee=te?0:n.scrollTop;o.push({type:"offset",target:n,matrix:Un([Y-U+R-$,H-ee+A-F],c)})}else o.push({type:"offset",target:n,origin:M});if(K!==1&&o.push({type:"zoom",target:n,matrix:ga(bd([K,K],c),c,[0,0])}),h||(h=_),u||(u=M),d||(d=D),s||b)break;n=T,a=j,(!r||n===i)&&(s=a)}return h||(h=Ke(c)),u||(u=[0,0]),d||(d=[0,0]),{zoom:v,offsetContainer:g,matrixes:o,targetMatrix:h,transformOrigin:u,targetOrigin:d,is3d:l,hasFixed:p}}var Yn=null,qn=null,Jo=null;function ei(e){e?(window.Map&&(Yn=new Map,qn=new Map),Jo=[]):(Yn=null,Jo=null,qn=null)}function AR(e){var t=qn?.get(e);if(t)return t;var r=ya(e,!0);return qn&&qn.set(e,r),r}function OR(e,t){if(Jo){var r=Ft(Jo,function(o){return o[0][0]==e&&o[0][1]==t});if(r)return r[1]}var n=R1(e,t,!0);return Jo&&Jo.push([[e,t],n]),n}function Bt(e){var t=Yn?.get(e);if(!t){var r=Ht(e).getComputedStyle(e);if(!Yn)return function(i){return r[i]};t={style:r,cached:{}},Yn.set(e,t)}var n=t.cached,o=t.style;return function(i){return i in n||(n[i]=o[i]),n[i]}}function Er(e,t,r){var n=r.originalDatas;n.groupable=n.groupable||{};var o=n.groupable;o.childDatas=o.childDatas||[];var i=o.childDatas;return e.moveables.map(function(a,s){return i[s]=i[s]||{},i[s][t]=i[s][t]||{},V(V({},r),{isRequestChild:!0,datas:i[s][t],originalDatas:i[s]})})}function Wd(e,t,r,n,o,i,a){var s=!!r.match(/Start$/g),l=!!r.match(/End$/g),c=o.isPinch,u=o.datas,d=Er(e,t.name,o),h=e.moveables,p=[],g=d.map(function(v,m){var x=h[m],y=x.state,b=y.gestos,w=v;if(s)w=new Ko(a).dragStart(n,v),p.push(w);else{if(b[a]||(b[a]=u.childGestos[m]),!b[a])return;w=da(v,y,n,c,i,a),p.push(w)}var _=t[r](x,V(V({},w),{parentFlag:!0}));return l&&(b[a]=null),_});return s&&(u.childGestos=h.map(function(v){return v.state.gestos[a]})),{eventParams:g,childEvents:p}}function Jr(e,t,r,n,o,i){o===void 0&&(o=function(u,d){return d});var a=!!r.match(/End$/g),s=Er(e,t.name,n),l=e.moveables,c=s.map(function(u,d){var h=l[d],p=u;p=o(h,u);var g=t[r](h,V(V({},p),{parentFlag:!0}));return a&&(h.state.gestos={}),g});return c}function Nl(e,t,r,n){var o=r.fixedDirection,i=r.fixedPosition,a=n.datas.startPositions||rr(t.state),s=mt(a,o),l=W(Nt(ia(-e.rotation/180*Math.PI,3),[s[0]-i[0],s[1]-i[1],1],3),2),c=l[0],u=l[1];return n.datas.originalX=c,n.datas.originalY=u,n}function k1(e,t,r,n){var o=e.getState(),i=o.renderPoses,a=o.rotation,s=o.direction,l=Kn(e.props,t).zoom,c=va(a/Math.PI*180),u={},d=e.renderState;d.renderDirectionMap||(d.renderDirectionMap={});var h=d.renderDirectionMap;r.forEach(function(g){var v=g.dir;u[v]=!0});var p=kt(s);return r.map(function(g){var v=g.data,m=g.classNames,x=g.dir,y=$d[x];if(!y||!u[x])return null;h[x]=!0;var b=(Ne(c,15)+p*E1[x]+720)%180,w={};return Jt(v).forEach(function(_){w["data-".concat(_)]=v[_]}),n.createElement("div",V({className:ye.apply(void 0,ce(["control","direction",x,t],W(m),!1)),"data-rotation":b,"data-direction":x},w,{key:"direction-".concat(x),style:Il.apply(void 0,ce([a,l],W(y.map(function(_){return i[_]})),!1))}))})}function P1(e,t,r,n){var o=Kn(e.props,r),i=o.renderDirections,a=i===void 0?t:i,s=o.displayAroundControls;if(!a)return[];var l=a===!0?Fd:a;return ce(ce([],W(s?F1(e,n,r,l):[]),!1),W(k1(e,r,l.map(function(c){return{data:{},classNames:[],dir:c}}),n)),!1)}function ha(e,t,r,n,o,i){for(var a=[],s=6;s<arguments.length;s++)a[s-6]=arguments[s];var l=ct(r,n),c=t?Ne(l/Math.PI*180,15)%180:-1;return e.createElement("div",{key:"line-".concat(i),className:ye.apply(void 0,ce(["line","direction",t?"edge":"",t],W(a),!1)),"data-rotation":c,"data-line-key":i,"data-direction":t,style:xa(r,n,o,l)})}function A1(e,t,r,n,o){var i=r===!0?nR:r;return i.map(function(a,s){var l=W($d[a],2),c=l[0],u=l[1];if(u!=null)return ha(e,a,n[c],n[u],o,"".concat(t,"Edge").concat(s),t)}).filter(Boolean)}function O1(e){return function(t,r){var n=Kn(t.props,e).edge;return n&&(n===!0||n.length)?ce(ce([],W(A1(r,e,n,t.getState().renderPoses,t.props.zoom)),!1),W(IR(t,e,r)),!1):I1(t,e,r)}}function I1(e,t,r){return P1(e,Fd,t,r)}function IR(e,t,r){return P1(e,["nw","ne","sw","se"],t,r)}function F1(e,t,r,n){var o=e.renderState;o.renderDirectionMap||(o.renderDirectionMap={});var i=e.getState(),a=i.renderPoses,s=i.rotation,l=i.direction,c=o.renderDirectionMap,u=e.props.zoom,d=kt(l),h=s/Math.PI*180;return(n||Jt(c)).map(function(p){var g=$d[p];if(!g)return null;var v=(Ne(h,15)+d*E1[p]+720)%180,m=["around-control"];return r&&m.push("direction",r),t.createElement("div",{className:ye.apply(void 0,ce([],W(m),!1)),"data-rotation":v,"data-direction":p,key:"direction-around-".concat(p),style:Il.apply(void 0,ce([s,u],W(g.map(function(x){return a[x]})),!1))})})}function Yd(e,t,r){var n=e||{},o=n.position,i=o===void 0?"client":o,a=n.left,s=a===void 0?-1/0:a,l=n.top,c=l===void 0?-1/0:l,u=n.right,d=u===void 0?1/0:u,h=n.bottom,p=h===void 0?1/0:h,g={position:i,left:s,top:c,right:d,bottom:p};return{vertical:L1(g,t,!0),horizontal:L1(g,r,!1)}}function Dl(e,t){var r=e.state,n=r.containerClientRect,o=n.clientHeight,i=n.clientWidth,a=n.clientLeft,s=n.clientTop,l=r.snapOffset,c=l.left,u=l.top,d=l.right,h=l.bottom,p=t||e.props.bounds||{},g=p.position||"client",v=g==="css",m=p.left,x=m===void 0?-1/0:m,y=p.top,b=y===void 0?-1/0:y,w=p.right,_=w===void 0?v?-1/0:1/0:w,T=p.bottom,j=T===void 0?v?-1/0:1/0:T;return v&&(_=i+d-c-_,j=o+h-u-j),{left:x+c-a,right:_+c-a,top:b+u-s,bottom:j+u-s}}function FR(e,t,r){var n=Dl(e),o=n.left,i=n.top,a=n.right,s=n.bottom,l=W(r,2),c=l[0],u=l[1],d=W(be(r,t),2),h=d[0],p=d[1];ae(h)<Mt&&(h=0),ae(p)<Mt&&(p=0);var g=p>0,v=h>0,m={isBound:!1,offset:0,pos:0},x={isBound:!1,offset:0,pos:0};if(h===0&&p===0)return{vertical:m,horizontal:x};if(h===0)g?s<u&&(x.pos=s,x.offset=u-s):i>u&&(x.pos=i,x.offset=u-i);else if(p===0)v?a<c&&(m.pos=a,m.offset=c-a):o>c&&(m.pos=o,m.offset=c-o);else{var y=p/h,b=r[1]-y*c,w=0,_=0,T=!1;v&&a<=c?(w=y*a+b,_=a,T=!0):!v&&c<=o&&(w=y*o+b,_=o,T=!0),T&&(w<i||w>s)&&(T=!1),T||(g&&s<=u?(w=s,_=(w-b)/y,T=!0):!g&&u<=i&&(w=i,_=(w-b)/y,T=!0)),T&&(m.isBound=!0,m.pos=_,m.offset=c-_,x.isBound=!0,x.pos=w,x.offset=u-w)}return{vertical:m,horizontal:x}}function L1(e,t,r){var n=e[r?"left":"top"],o=e[r?"right":"bottom"],i=Math.min.apply(Math,ce([],W(t),!1)),a=Math.max.apply(Math,ce([],W(t),!1)),s=[];return n+1>i&&s.push({direction:"start",isBound:!0,offset:i-n,pos:n}),o-1<a&&s.push({direction:"end",isBound:!0,offset:a-o,pos:o}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(l,c){return ae(c.offset)-ae(l.offset)})}function B1(e,t,r){var n=r?e.map(function(o){return oa(o,r)}):e;return n.some(function(o){return o[0]<t.left&&ae(o[0]-t.left)>.1||o[0]>t.right&&ae(o[0]-t.right)>.1||o[1]<t.top&&ae(o[1]-t.top)>.1||o[1]>t.bottom&&ae(o[1]-t.bottom)>.1})}function LR(e,t,r){var n=tr(e),o=Math.sqrt(n*n-t*t)||0;return[o,-o].sort(function(i,a){return ae(i-e[r?0:1])-ae(a-e[r?0:1])}).map(function(i){return ct([0,0],r?[i,t]:[t,i])})}function BR(e,t,r,n,o){if(!e.props.bounds)return[];var i=o*Math.PI/180,a=Dl(e),s=a.left,l=a.top,c=a.right,u=a.bottom,d=s-n[0],h=c-n[0],p=l-n[1],g=u-n[1],v={left:d,top:p,right:h,bottom:g};if(!B1(r,v,0))return[];var m=[];return[[d,0],[h,0],[p,1],[g,1]].forEach(function(x){var y=W(x,2),b=y[0],w=y[1];r.forEach(function(_){var T=ct([0,0],_);m.push.apply(m,ce([],W(LR(_,b,w).map(function(j){return i+j-T}).filter(function(j){return!B1(t,v,j)}).map(function(j){return Ne(j*180/Math.PI,Mt)})),!1))})}),m}var zR=["left","right","center"],$R=["top","bottom","middle"],z1={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},bn={start:"left",end:"right",center:"center"},wn={start:"top",end:"bottom",center:"middle"};function ti(){return{left:!1,top:!1,right:!1,bottom:!1}}function ri(e,t){var r=e.props,n=r.snappable,o=r.bounds,i=r.innerBounds,a=r.verticalGuidelines,s=r.horizontalGuidelines,l=r.snapGridWidth,c=r.snapGridHeight,u=e.state,d=u.guidelines,h=u.enableSnap;return!n||!h||t&&n!==!0&&n.indexOf(t)<0?!1:!!(l||c||o||i||d&&d.length||a&&a.length||s&&s.length)}function qd(e){return e===!1?{}:e===!0||!e?{left:!0,right:!0,top:!0,bottom:!0}:e}function GR(e,t){var r=qd(e),n={};for(var o in r)o in t&&r[o]&&(n[o]=t[o]);return n}function Xd(e,t){var r=GR(e,t),n=$R.filter(function(i){return i in r}),o=zR.filter(function(i){return i in r});return{horizontalNames:n,verticalNames:o,horizontal:n.map(function(i){return r[i]}),vertical:o.map(function(i){return r[i]})}}function VR(e,t,r){var n=nt(e,[t.clientLeft,t.clientTop],r);return[t.left+n[0],t.top+n[1]]}function UR(e){var t=W(e,2),r=t[0],n=t[1],o=n[0]-r[0],i=n[1]-r[1];Math.abs(o)<ht&&(o=0),Math.abs(i)<ht&&(i=0);var a=0,s=0,l=0;return o?i?(a=-i/o,s=1,l=a*r[0]-r[1]):(s=1,l=-r[1]):(a=-1,l=r[0]),[a,s,l].map(function(c){return Ne(c,ht)})}var $1="snapRotationThreshold",G1="snapRotationDegrees",V1="snapHorizontalThreshold",U1="snapVerticalThreshold";function Tl(e,t,r,n,o,i,a){var s;n===void 0&&(n=[]),o===void 0&&(o=[]);var l=e.props,c=((s=e.state.snapThresholdInfo)===null||s===void 0?void 0:s.multiples)||[1,1],u=Dx(a,l[V1],5),d=Dx(i,l[U1],5);return H1(e.state.guidelines,t,r,n,o,u,d,c)}function H1(e,t,r,n,o,i,a,s){return{vertical:Y1(e,"vertical",t,a*s[0],n),horizontal:Y1(e,"horizontal",r,i*s[1],o)}}function HR(e,t,r){var n=W(r,2),o=n[0],i=n[1],a=W(t,2),s=a[0],l=a[1],c=W(be(r,t),2),u=c[0],d=c[1],h=d>0,p=u>0;u=zl(u),d=zl(d);var g={isSnap:!1,offset:0,pos:0},v={isSnap:!1,offset:0,pos:0};if(u===0&&d===0)return{vertical:g,horizontal:v};var m=Tl(e,u?[o]:[],d?[i]:[],[],[],void 0,void 0),x=m.vertical,y=m.horizontal;x.posInfos.filter(function(I){var E=I.pos;return p?E>=s:E<=s}),y.posInfos.filter(function(I){var E=I.pos;return h?E>=l:E<=l}),x.isSnap=x.posInfos.length>0,y.isSnap=y.posInfos.length>0;var b=Kd(x),w=b.isSnap,_=b.guideline,T=Kd(y),j=T.isSnap,k=T.guideline,R=j?k.pos[1]:0,A=w?_.pos[0]:0;if(u===0)j&&(v.isSnap=!0,v.pos=k.pos[1],v.offset=i-v.pos);else if(d===0)w&&(g.isSnap=!0,g.pos=A,g.offset=o-A);else{var $=d/u,F=r[1]-$*o,L=0,P=0,O=!1;w?(P=A,L=$*P+F,O=!0):j&&(L=R,P=(L-F)/$,O=!0),O&&(g.isSnap=!0,g.pos=P,g.offset=o-P,v.isSnap=!0,v.pos=L,v.offset=i-L)}return{vertical:g,horizontal:v}}function Sn(e){var t="";return e===-1||e==="top"||e==="left"?t="start":e===0||e==="center"||e==="middle"?t="center":(e===1||e==="right"||e==="bottom")&&(t="end"),t}function W1(e,t,r,n){var o=Xd(e.props.snapDirections,t),i=Tl(e,o.vertical,o.horizontal,o.verticalNames.map(function(l){return Sn(l)}),o.horizontalNames.map(function(l){return Sn(l)}),r,n),a=Sn(o.horizontalNames[i.horizontal.index]),s=Sn(o.verticalNames[i.vertical.index]);return{vertical:V(V({},i.vertical),{direction:s}),horizontal:V(V({},i.horizontal),{direction:a})}}function Kd(e){var t=e.isSnap;if(!t)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=e.posInfos[0],n=r.guidelineInfos[0],o=n.offset,i=n.dist,a=n.guideline;return{isSnap:t,offset:o,dist:i,pos:r.pos,guideline:a}}function Y1(e,t,r,n,o){var i,a;if(o===void 0&&(o=[]),!e||!e.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var s=t==="vertical",l=s?0:1,c=r.map(function(d,h){var p=o[h]||"",g=e.map(function(v){var m=v.pos,x=d-m[l];return{offset:x,dist:ae(x),guideline:v,direction:p}}).filter(function(v){var m=v.guideline,x=v.dist,y=m.type;return!(y!==t||x>n)}).sort(function(v,m){return v.dist-m.dist});return{pos:d,index:h,guidelineInfos:g,direction:p}}).filter(function(d){return d.guidelineInfos.length>0}).sort(function(d,h){return d.guidelineInfos[0].dist-h.guidelineInfos[0].dist}),u=c.length>0;return{isSnap:u,index:u?c[0].index:-1,direction:(a=(i=c[0])===null||i===void 0?void 0:i.direction)!==null&&a!==void 0?a:"",posInfos:c}}function WR(e,t,r,n,o){var i=[];r[0]&&r[1]?i=[r,[-r[0],r[1]],[r[0],-r[1]]]:!r[0]&&!r[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(h,p,g){var v=g[p+1]||g[0];i.push(h),i.push([(h[0]+v[0])/2,(h[1]+v[1])/2])}):e.props.keepRatio?i.push([-1,-1],[-1,1],[1,-1],[1,1],r):(i.push.apply(i,ce([],W(wR([[-1,-1],[1,-1],[-1,-1],[1,1]],r)),!1)),i.length>1&&i.push([(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]));var a=i.map(function(h){return mt(t,h)}),s=a.map(function(h){return h[0]}),l=a.map(function(h){return h[1]}),c=Tl(e,s,l,i.map(function(h){return Sn(h[0])}),i.map(function(h){return Sn(h[1])}),n,o),u=Sn(i.map(function(h){return h[0]})[c.vertical.index]),d=Sn(i.map(function(h){return h[1]})[c.horizontal.index]);return{vertical:V(V({},c.vertical),{direction:u}),horizontal:V(V({},c.horizontal),{direction:d})}}function q1(e,t){var r=ae(e.offset),n=ae(t.offset);return e.isBound&&t.isBound?n-r:e.isBound?-1:t.isBound?1:e.isSnap&&t.isSnap?n-r:e.isSnap?-1:t.isSnap||r<Mt?1:n<Mt?-1:r-n}function Ml(e,t){return e.slice().sort(function(r,n){var o=r.sign[t],i=n.sign[t],a=r.offset[t],s=n.offset[t];if(o){if(!i)return-1}else return 1;return q1({isBound:r.isBound,isSnap:r.isSnap,offset:a},{isBound:n.isBound,isSnap:n.isSnap,offset:s})})[0]}function YR(e,t,r){var n=[];if(r)ae(t[0])!==1||ae(t[1])!==1?n.push([t,[-1,-1]],[t,[-1,1]],[t,[1,-1]],[t,[1,1]]):n.push([t,[e[0],-e[1]]],[t,[-e[0],e[1]]]),n.push([t,e]);else if(e[0]&&e[1]||!e[0]&&!e[1]){var o=e[0]?e:[1,1];[1,-1].forEach(function(a){[1,-1].forEach(function(s){var l=[a*o[0],s*o[1]];t[0]===l[0]&&t[1]===l[1]||n.push([t,l])})})}else if(e[0]){var i=ae(t[0])===1?[1]:[1,-1];i.forEach(function(a){n.push([[t[0],-1],[a*e[0],-1]],[[t[0],0],[a*e[0],0]],[[t[0],1],[a*e[0],1]])})}else if(e[1]){var i=ae(t[1])===1?[1]:[1,-1];i.forEach(function(s){n.push([[-1,t[1]],[-1,s*e[1]]],[[0,t[1]],[0,s*e[1]]],[[1,t[1]],[1,s*e[1]]])})}return n}function X1(e,t){var r=gd([t[0][0],t[1][0]]),n=gd([t[0][1],t[1][1]]);return{vertical:r<=e[0],horizontal:n<=e[1]}}function Zd(e,t){var r=W(t,2),n=r[0],o=r[1],i=o[0]-n[0],a=o[1]-n[1];ae(i)<Mt&&(i=0),ae(a)<Mt&&(a=0);var s,l;if(!i)s=n[0],l=e[0];else if(!a)s=n[1],l=e[1];else{var c=a/i;s=c*(e[0]-n[0])+n[1],l=e[1]}return s-l}function K1(e,t,r,n){return n===void 0&&(n=Mt),e.every(function(o){var i=Zd(o,t),a=i<=0;return a===r||ae(i)<=n})}function Z1(e,t,r,n,o){return o===void 0&&(o=0),n&&t-o<=e||!n&&e<=r+o?{isBound:!0,offset:n?t-e:r-e}:{isBound:!1,offset:0}}function qR(e,t){var r=t.line,n=t.centerSign,o=t.verticalSign,i=t.horizontalSign,a=t.lineConstants,s=e.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=s.left,c=s.top,u=s.width,d=s.height,h=[[l,c],[l,c+d]],p=[[l,c],[l+u,c]],g=[[l+u,c],[l+u,c+d]],v=[[l,c+d],[l+u,c+d]];if(K1([[l,c],[l+u,c],[l,c+d],[l+u,c+d]],r,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var m=Cn(r,a,p,o),x=Cn(r,a,v,o),y=Cn(r,a,h,i),b=Cn(r,a,g,i),w=m.isBound&&x.isBound,_=m.isBound||x.isBound,T=y.isBound&&b.isBound,j=y.isBound||b.isBound,k=oi(m.offset,x.offset),R=oi(y.offset,b.offset),A=[0,0],$=!1,F=!1;return ae(R)<ae(k)?(A=[k,0],$=_,F=w):(A=[0,R],$=j,F=T),{isAllBound:F,isVerticalBound:_,isHorizontalBound:j,isBound:$,offset:A}}function Cn(e,t,r,n,o,i){var a=W(t,2),s=a[0],l=a[1],c=e[0],u=r[0],d=r[1],h=zl(d[1]-u[1]),p=zl(d[0]-u[0]),g=l,v=s,m=-s/l;if(p){if(!h){if(i&&!g)return{isBound:!1,offset:0};if(v){var w=(u[1]-c[1])/m+c[0];return Z1(w,u[0],d[0],n,o)}else{var y=u[1]-c[1],b=ae(y)<=(o||0);return{isBound:b,offset:b?y:0}}}}else{if(i&&!v)return{isBound:!1,offset:0};if(g){var x=m*(u[0]-c[0])+c[1];return Z1(x,u[1],d[1],n,o)}else{var y=u[0]-c[0],b=ae(y)<=(o||0);return{isBound:b,offset:b?y:0}}}return{isBound:!1,offset:0}}function Q1(e,t,r){return t.map(function(n){var o=qR(e,n),i=o.isBound,a=o.offset,s=o.isVerticalBound,l=o.isHorizontalBound,c=n.multiple,u=Ur({datas:r,distX:a[0],distY:a[1]}).map(function(d,h){return d*(c[h]?2/c[h]:0)});return{sign:c,isBound:i,isVerticalBound:s,isHorizontalBound:l,isSnap:!1,offset:u}})}function XR(e,t,r){var n,o=Qd(e,t,[0,0],!1).map(function(h){return V(V({},h),{multiple:h.multiple.map(function(p){return ae(p)*2})})}),i=Q1(e,o,r),a=Ml(i,0),s=Ml(i,1),l=0,c=0,u=a.isVerticalBound||s.isVerticalBound,d=a.isHorizontalBound||s.isHorizontalBound;return(u||d)&&(n=W(yR({datas:r,distX:-a.offset[0],distY:-s.offset[1]}),2),l=n[0],c=n[1]),{vertical:{isBound:u,offset:l},horizontal:{isBound:d,offset:c}}}function KR(e,t){var r=[],n=e[0],o=e[1];return n&&o?r.push([[0,o*2],e,[-n,o]],[[n*2,0],e,[n,-o]]):n?(r.push([[n*2,0],[n,1],[n,-1]]),t&&r.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):o?(r.push([[0,o*2],[1,o],[-1,o]]),t&&r.push([[-1,0],[-1,o],[-1,-o]],[[1,0],[1,o],[1,-o]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}function Qd(e,t,r,n){var o=e.state,i=o.allMatrix,a=o.is3d,s=Xn(i,100,100,a?4:3),l=mt(s,[0,0]);return KR(r,n).map(function(c){var u=W(c,3),d=u[0],h=u[1],p=u[2],g=[mt(s,h),mt(s,p)],v=UR(g),m=X1(l,g),x=m.vertical,y=m.horizontal,b=Zd(l,g)<=0;return{multiple:d,centerSign:b,verticalSign:x,horizontalSign:y,lineConstants:v,line:[mt(t,h),mt(t,p)]}})}function J1(e,t,r,n){var o=n?e.map(function(i){return oa(i,n)}):e;return[[o[0],o[1]],[o[1],o[3]],[o[3],o[2]],[o[2],o[0]]].some(function(i){var a=Zd(r,i)<=0;return!K1(t,i,a)})}function ZR(e){var t=W(e,2),r=t[0],n=t[1],o=n[0]-r[0],i=n[1]-r[1];if(!o)return ae(r[0]);if(!i)return ae(r[1]);var a=i/o;return ae((-a*r[0]+r[1])/Math.sqrt(Math.pow(a,2)+1))}function QR(e){var t=W(e,2),r=t[0],n=t[1],o=n[0]-r[0],i=n[1]-r[1];if(!o)return[r[0],0];if(!i)return[0,r[1]];var a=i/o,s=-a*r[0]+r[1];return[-s/(a+1/a),s/(a*a+1)]}function JR(e,t,r,n,o){var i=e.props.innerBounds,a=o*Math.PI/180;if(!i)return[];var s=i.left,l=i.top,c=i.width,u=i.height,d=s-n[0],h=s+c-n[0],p=l-n[1],g=l+u-n[1],v=[[d,p],[h,p],[d,g],[h,g]],m=mt(r,[0,0]);if(!J1(r,v,m,0))return[];var x=[],y=v.map(function(b){return[tr(b),ct([0,0],b)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(b){var w=ct([0,0],QR(b)),_=ZR(b);x.push.apply(x,ce([],W(y.filter(function(T){var j=W(T,1),k=j[0];return k&&_<=k}).map(function(T){var j=W(T,2),k=j[0],R=j[1],A=Math.acos(k?_/k:0),$=R+A,F=R-A;return[a+$-w,a+F-w]}).reduce(function(T,j){return T.push.apply(T,ce([],W(j),!1)),T},[]).filter(function(T){return!J1(t,v,m,T)}).map(function(T){return Ne(T*180/Math.PI,Mt)})),!1))}),x}function ek(e){var t=e.props.innerBounds,r=ti();if(!t)return{boundMap:r,vertical:[],horizontal:[]};var n=e.getRect(),o=n.pos1,i=n.pos2,a=n.pos3,s=n.pos4,l=[o,i,a,s],c=mt(l,[0,0]),u=t.left,d=t.top,h=t.width,p=t.height,g=[[u,d],[u,d+p]],v=[[u,d],[u+h,d]],m=[[u+h,d],[u+h,d+p]],x=[[u,d+p],[u+h,d+p]],y=Qd(e,l,[0,0],!1),b=[],w=[];return y.forEach(function(_){var T=_.line,j=_.lineConstants,k=X1(c,T),R=k.horizontal,A=k.vertical,$=Cn(T,j,v,A,1,!0),F=Cn(T,j,x,A,1,!0),L=Cn(T,j,g,R,1,!0),P=Cn(T,j,m,R,1,!0);$.isBound&&!r.top&&(b.push(d),r.top=!0),F.isBound&&!r.bottom&&(b.push(d+p),r.bottom=!0),L.isBound&&!r.left&&(w.push(u),r.left=!0),P.isBound&&!r.right&&(w.push(u+h),r.right=!0)}),{boundMap:r,horizontal:b,vertical:w}}function tk(e,t,r,n){var o=t[0]-e[0],i=t[1]-e[1];if(ae(o)<ht&&(o=0),ae(i)<ht&&(i=0),!o)return n?[0,0]:[0,r];if(!i)return n?[r,0]:[0,0];var a=i/o,s=e[1]-a*e[0];if(n){var l=a*(t[0]+r)+s;return[r,l-t[1]]}else{var c=(t[1]+r-s)/a;return[c-t[0],r]}}function Jd(e,t,r,n,o){var i=tk(e,t,r,n);if(!i)return{isOutside:!1,offset:[0,0]};var a=Vr(e,t),s=Vr(i,e),l=Vr(i,t),c=s>a||l>a,u=W(Ur({datas:o,distX:i[0],distY:i[1]}),2),d=u[0],h=u[1];return{offset:[d,h],isOutside:c}}function jl(e,t){return e.isBound?e.offset:t.isSnap?Kd(t).offset:0}function rk(e,t,r,n,o){var i=W(t,2),a=i[0],s=i[1],l=W(r,2),c=l[0],u=l[1],d=W(n,2),h=d[0],p=d[1],g=W(o,2),v=g[0],m=g[1],x=-v,y=-m;if(e&&a&&s){x=0,y=0;var b=[];if(c&&u?b.push([0,m],[v,0]):c?b.push([v,0]):u?b.push([0,m]):h&&p?b.push([0,m],[v,0]):h?b.push([v,0]):p&&b.push([0,m]),b.length){b.sort(function(j,k){return tr(be([a,s],j))-tr(be([a,s],k))});var w=b[0];if(w[0]&&ae(a)>ht)x=-w[0],y=s*ae(a+x)/ae(a)-s;else if(w[1]&&ae(s)>ht){var _=s;y=-w[1],x=a*ae(s+y)/ae(_)-a}if(e&&u&&c)if(ae(x)>ht&&ae(x)<ae(v)){var T=ae(v)/ae(x);x*=T,y*=T}else if(ae(y)>ht&&ae(y)<ae(m)){var T=ae(m)/ae(y);x*=T,y*=T}else x=oi(-v,x),y=oi(-m,y)}}else x=a||c?-v:0,y=s||u?-m:0;return[x,y]}function nk(e,t,r,n,o,i){if(!ri(e,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a=ff(i.absolutePoses,[t,r]),s=er(a),l=s.left,c=s.right,u=s.top,d=s.bottom,h={horizontal:a.map(function(P){return P[1]}),vertical:a.map(function(P){return P[0]})},p=qd(e.props.snapDirections),g=Xd(p,{left:l,right:c,top:u,bottom:d,center:(l+c)/2,middle:(u+d)/2}),v=Rl(e,o,g,h),m=v.vertical,x=v.horizontal,y=XR(e,a,i),b=y.vertical,w=y.horizontal,_=m.isSnap,T=x.isSnap,j=m.isBound||b.isBound,k=x.isBound||w.isBound,R=oi(m.offset,b.offset),A=oi(x.offset,w.offset),$=W(rk(n,[t,r],[j,k],[_,T],[R,A]),2),F=$[0],L=$[1];return[{isBound:j,isSnap:_,offset:F},{isBound:k,isSnap:T,offset:L}]}function Rl(e,t,r,n){n===void 0&&(n=r);var o=Yd(Dl(e),n.vertical,n.horizontal),i=o.horizontal,a=o.vertical,s=t?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Tl(e,r.vertical,r.horizontal,void 0,void 0,void 0,void 0),l=s.horizontal,c=s.vertical,u=jl(i[0],l),d=jl(a[0],c),h=ae(u),p=ae(d);return{horizontal:{isBound:i[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:u,dist:h,bounds:i,snap:l},vertical:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:d,dist:p,bounds:a,snap:c}}}function ex(e,t,r,n,o,i,a){a===void 0&&(a=[1,1]);var s=Yd(t,r,n),l=s.horizontal,c=s.vertical,u=H1(e,r,n,[],[],o,i,a),d=u.horizontal,h=u.vertical,p=jl(l[0],d),g=jl(c[0],h),v=ae(p),m=ae(g);return{horizontal:{isBound:l[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:p,dist:v,bounds:l,snap:d},vertical:{isBound:c[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:g,dist:m,bounds:c,snap:h}}}function ok(e,t,r,n){var o=ct(e,t)/Math.PI*180,i=r.vertical,a=i.isBound,s=i.isSnap,l=i.dist,c=r.horizontal,u=c.isBound,d=c.isSnap,h=c.dist,p=o%180,g=p<3||p>177,v=p>87&&p<93;return h<l&&(a||s&&!v&&(!n||!g))?"vertical":u||d&&!g&&(!n||!v)?"horizontal":""}function ik(e,t,r,n,o,i){return r.map(function(a){var s=W(a,2),l=s[0],c=s[1],u=mt(t,l),d=mt(t,c),h=n?ak(e,u,d,o):Rl(e,o,{vertical:[d[0]],horizontal:[d[1]]}),p=h.horizontal,g=p.offset,v=p.isBound,m=p.isSnap,x=h.vertical,y=x.offset,b=x.isBound,w=x.isSnap,_=be(c,l);if(!y&&!g)return{isBound:b||v,isSnap:w||m,sign:_,offset:[0,0]};var T=ok(u,d,h,n);if(!T)return{sign:_,isBound:!1,isSnap:!1,offset:[0,0]};var j=T==="vertical",k=[0,0];return!n&&ae(c[0])===1&&ae(c[1])===1&&l[0]!==c[0]&&l[1]!==c[1]?k=Ur({datas:i,distX:-y,distY:-g}):k=Jd(u,d,-(j?y:g),j,i).offset,k=k.map(function(R,A){return R*(_[A]?2/_[A]:0)}),{sign:_,isBound:j?b:v,isSnap:j?w:m,offset:k}})}function tx(e,t){return e.isBound?e.offset:t.isSnap?t.offset:0}function ak(e,t,r,n){var o=FR(e,t,r),i=o.horizontal,a=o.vertical,s=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:HR(e,t,r),l=s.horizontal,c=s.vertical,u=tx(i,l),d=tx(a,c),h=ae(u),p=ae(d);return{horizontal:{isBound:i.isBound,isSnap:l.isSnap,offset:u,dist:h},vertical:{isBound:a.isBound,isSnap:c.isSnap,offset:d,dist:p}}}function sk(e,t,r,n,o){var i=[-r[0],-r[1]],a=e.state,s=a.width,l=a.height,c=e.props.bounds,u=1/0,d=1/0;if(c){var h=[[r[0],-r[1]],[-r[0],r[1]]],p=c.left,g=p===void 0?-1/0:p,v=c.top,m=v===void 0?-1/0:v,x=c.right,y=x===void 0?1/0:x,b=c.bottom,w=b===void 0?1/0:b;h.forEach(function(_){var T=_[0]!==i[0],j=_[1]!==i[1],k=mt(t,_),R=ct(n,k)*360/Math.PI;if(j){var A=k.slice();(ae(R-360)<2||ae(R-180)<2)&&(A[1]=n[1]);var $=Jd(n,A,(n[1]<k[1]?w:m)-k[1],!1,o),F=W($.offset,2),L=F[1],P=$.isOutside;isNaN(L)||(d=l+(P?1:-1)*ae(L))}if(T){var A=k.slice();(ae(R-90)<2||ae(R-270)<2)&&(A[0]=n[0]);var O=Jd(n,A,(n[0]<k[0]?y:g)-k[0],!0,o),I=W(O.offset,1),E=I[0],S=O.isOutside;isNaN(E)||(u=s+(S?1:-1)*ae(E))}})}return{maxWidth:u,maxHeight:d}}var jt={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(e,t){var r=e.props,n=r.hideThrottleDragRotateLine,o=r.throttleDragRotate,i=r.zoom,a=e.getState(),s=a.dragInfo,l=a.beforeOrigin;if(n||!o||!s)return[];var c=s.dist;if(!c[0]&&!c[1])return[];var u=tr(c),d=ct(c,[0,0]);return[t.createElement("div",{className:ye("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(u,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(d,"rad) scaleY(").concat(i,")")}})]},dragStart:function(e,t){var r=t.datas,n=t.parentEvent,o=t.parentGesto,i=e.state,a=i.gestos,s=i.style;if(a.draggable)return!1;a.draggable=o||e.targetGesto,r.datas={},r.left=parseFloat(s.left||"")||0,r.top=parseFloat(s.top||"")||0,r.bottom=parseFloat(s.bottom||"")||0,r.right=parseFloat(s.right||"")||0,r.startValue=[0,0],Wn(e,t),Sl(e,t,"translate"),Nk(e,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var l=Re(e,t,V({set:function(u){r.startValue=u}},wl(e,t))),c=n||he(e,"onDragStart",l);return c!==!1?(r.isDrag=!0,e.state.dragInfo={startRect:e.getRect(),dist:[0,0]}):(a.draggable=null,r.isPinch=!1),r.isDrag?l:!1},drag:function(e,t){if(t){yl(e,t,"translate");var r=t.datas,n=t.parentEvent,o=t.parentFlag,i=t.isPinch,a=t.deltaOffset,s=t.useSnap,l=t.isRequest,c=t.isGroup,u=t.parentThrottleDrag,d=t.distX,h=t.distY,p=r.isDrag,g=r.prevDist,v=r.prevBeforeDist,m=r.startValue;if(p){a&&(d+=a[0],h+=a[1]);var x=e.props,y=x.parentMoveable,b=c?0:x.throttleDrag||u||0,w=n?0:x.throttleDragRotate||0,_=0,T=!1,j=!1,k=!1,R=!1;if(!n&&w>0&&(d||h)){var A=x.startDragRotate||0,$=Ne(A+ct([0,0],[d,h])*180/Math.PI,w)-A,F=h*Math.abs(Math.cos(($-90)/180*Math.PI)),L=d*Math.abs(Math.cos($/180*Math.PI)),P=tr([L,F]);_=$*Math.PI/180,d=P*Math.cos(_),h=P*Math.sin(_)}if(!i&&!n&&!o){var O=W(nk(e,d,h,w,!s&&l||a,r),2),I=O[0],E=O[1];T=I.isSnap,j=I.isBound,k=E.isSnap,R=E.isBound;var S=I.offset,M=E.offset;d+=S,h+=M}var D=Be(D1({datas:r,distX:d,distY:h}),m),N=Be(xR({datas:r,distX:d,distY:h}),m);r1(N,Mt),r1(D,Mt),w||(!T&&!j&&(N[0]=Ne(N[0],b),D[0]=Ne(D[0],b)),!k&&!R&&(N[1]=Ne(N[1],b),D[1]=Ne(D[1],b)));var z=be(D,m),Y=be(N,m),H=be(Y,g),K=be(z,v);r.prevDist=Y,r.prevBeforeDist=z,r.passDelta=H,r.passDist=Y;var J=r.left+z[0],q=r.top+z[1],Z=r.right-z[0],oe=r.bottom-z[1],ie=bl(r,"translate(".concat(N[0],"px, ").concat(N[1],"px)"),"translate(".concat(Y[0],"px, ").concat(Y[1],"px)"));if(Ud(t,ie),e.state.dragInfo.dist=n?[0,0]:Y,!(!n&&!y&&H.every(function(ee){return!ee})&&K.some(function(ee){return!ee}))){var re=e.state,G=re.width,te=re.height,U=Re(e,t,V({transform:ie,dist:Y,delta:H,translate:N,beforeDist:z,beforeDelta:K,beforeTranslate:D,left:J,top:q,right:Z,bottom:oe,width:G,height:te,isPinch:i},Rt({transform:ie},t)));return!n&&he(e,"onDrag",U),U}}}},dragAfter:function(e,t){var r=t.datas,n=r.deltaOffset;return n[0]||n[1]?(r.deltaOffset=[0,0],this.drag(e,V(V({},t),{deltaOffset:n}))):!1},dragEnd:function(e,t){var r=t.parentEvent,n=t.datas;if(e.state.dragInfo=null,!!n.isDrag){n.isDrag=!1;var o=Wt(e,t,{});return!r&&he(e,"onDragEnd",o),o}},dragGroupStart:function(e,t){var r,n,o=t.datas,i=t.clientX,a=t.clientY,s=this.dragStart(e,t);if(!s)return!1;var l=Wd(e,this,"dragStart",[i||0,a||0],t,!1,"draggable"),c=l.childEvents,u=l.eventParams,d=V(V({},s),{targets:e.props.targets,events:u}),h=he(e,"onDragGroupStart",d);o.isDrag=h!==!1;var p=(n=(r=c[0])===null||r===void 0?void 0:r.datas.startValue)!==null&&n!==void 0?n:[0,0];return o.throttleOffset=[p[0]%1,p[1]%1],o.isDrag?s:!1},dragGroup:function(e,t){var r=t.datas;if(r.isDrag){var n=this.drag(e,V(V({},t),{parentThrottleDrag:e.props.throttleDrag})),o=t.datas.passDelta,i=Wd(e,this,"drag",o,t,!1,"draggable").eventParams;if(n){var a=V({targets:e.props.targets,events:i},n);return he(e,"onDragGroup",a),a}}},dragGroupEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isDrag){this.dragEnd(e,t);var o=Wd(e,this,"dragEnd",[0,0],t,!1,"draggable").eventParams;return he(e,"onDragGroupEnd",Wt(e,t,{targets:e.props.targets,events:o})),r}},request:function(e){var t={},r=e.getRect(),n=0,o=0,i=!1;return{isControl:!1,requestStart:function(a){return i=a.useSnap,{datas:t,useSnap:i}},request:function(a){return"x"in a?n=a.x-r.left:"deltaX"in a&&(n+=a.deltaX),"y"in a?o=a.y-r.top:"deltaY"in a&&(o+=a.deltaY),{datas:t,distX:n,distY:o,useSnap:i}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:i}}}},unset:function(e){e.state.gestos.draggable=null,e.state.dragInfo=null}};function rx(e,t){var r=mt(e,t),n=[0,0];return{fixedPosition:r,fixedDirection:t,fixedOffset:n}}function lk(e,t){var r=e.allMatrix,n=e.is3d,o=e.width,i=e.height,a=n?4:3,s=[o/2*(1+t[0]),i/2*(1+t[1])],l=nt(r,s,a),c=[0,0];return{fixedPosition:l,fixedDirection:t,fixedOffset:c}}function nx(e,t){var r=e.allMatrix,n=e.is3d,o=e.width,i=e.height,a=n?4:3,s=NR(t,o,i),l=nt(r,t,a),c=[o?0:t[0],i?0:t[1]];return{fixedPosition:l,fixedDirection:s,fixedOffset:c}}var ox=mf("resizable"),ef={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:O1("resizable"),dragControlCondition:ox,viewClassName:gf("resizable"),dragControlStart:function(e,t){var r,n=t.inputEvent,o=t.isPinch,i=t.isGroup,a=t.parentDirection,s=t.parentGesto,l=t.datas,c=t.parentFixedDirection,u=t.parentEvent,d=Ex(a,o,n,l),h=e.state,p=h.target,g=h.width,v=h.height,m=h.gestos;if(!d||!p||m.resizable)return!1;m.resizable=s||e.controlGesto,!o&&Wn(e,t),l.datas={},l.direction=d,l.startOffsetWidth=g,l.startOffsetHeight=v,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=h.inlineCSSWidth||h.cssWidth,l.startHeight=h.inlineCSSHeight||h.cssHeight,l.maxSize=[1/0,1/0],i||(l.minSize=[h.minOffsetWidth,h.minOffsetHeight],l.maxSize=[h.maxOffsetWidth,h.maxOffsetHeight]);var x=e.props.transformOrigin||"% %";l.transformOrigin=et(x)?x.split(" "):x,l.startOffsetMatrix=h.offsetMatrix,l.startTransformOrigin=h.transformOrigin,l.isWidth=(r=t?.parentIsWidth)!==null&&r!==void 0?r:!d[0]&&!d[1]||d[0]||!d[1];function y(R){l.ratio=R&&isFinite(R)?R:0}l.startPositions=rr(e.state);function b(R){var A=rx(l.startPositions,R);l.fixedDirection=A.fixedDirection,l.fixedPosition=A.fixedPosition,l.fixedOffset=A.fixedOffset}function w(R){var A=nx(e.state,R);l.fixedDirection=A.fixedDirection,l.fixedPosition=A.fixedPosition,l.fixedOffset=A.fixedOffset}function _(R){l.minSize=[We("".concat(R[0]),0)||0,We("".concat(R[1]),0)||0]}function T(R){var A=[R[0]||1/0,R[1]||1/0];(!Zi(A[0])||isFinite(A[0]))&&(A[0]=We("".concat(A[0]),0)||1/0),(!Zi(A[1])||isFinite(A[1]))&&(A[1]=We("".concat(A[1]),0)||1/0),l.maxSize=A}y(g/v),b(c||[-d[0],-d[1]]),l.setFixedDirection=b,l.setFixedPosition=w,l.setMin=_,l.setMax=T;var j=Re(e,t,{direction:d,startRatio:l.ratio,set:function(R){var A=W(R,2),$=A[0],F=A[1];l.startWidth=$,l.startHeight=F},setMin:_,setMax:T,setRatio:y,setFixedDirection:b,setFixedPosition:w,setOrigin:function(R){l.transformOrigin=R},dragStart:jt.dragStart(e,new Ko().dragStart([0,0],t))}),k=u||he(e,"onResizeStart",j);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,k!==!1&&(l.isResize=!0,e.state.snapRenderInfo={request:t.isRequest,direction:d}),l.isResize?j:!1},dragControl:function(e,t){var r,n=t.datas,o=t.parentFlag,i=t.isPinch,a=t.parentKeepRatio,s=t.dragClient,l=t.parentDist,c=t.useSnap,u=t.isRequest,d=t.isGroup,h=t.parentEvent,p=t.resolveMatrix,g=n.isResize,v=n.transformOrigin,m=n.startWidth,x=n.startHeight,y=n.prevWidth,b=n.prevHeight,w=n.minSize,_=n.maxSize,T=n.ratio,j=n.startOffsetWidth,k=n.startOffsetHeight,R=n.isWidth;if(!g)return;if(p){var A=e.state.is3d,$=n.startOffsetMatrix,F=n.startTransformOrigin,L=A?4:3,P=Uo(Cl(t)),O=Math.sqrt(P.length);L!==O&&(P=Cr(P,O,L));var I=fa($,P,F,L),E=Xn(I,j,k,L);n.startPositions=E,n.nextTargetMatrix=P,n.nextAllMatrix=I}var S=Kn(e.props,"resizable"),M=S.resizeFormat,D=S.throttleResize,N=D===void 0?o?0:1:D,z=S.parentMoveable,Y=S.keepRatioFinally,H=n.direction,K=H,J=0,q=0;!H[0]&&!H[1]&&(K=[1,1]);var Z=T&&(a??S.keepRatio)||!1;function oe(){var Me=n.fixedDirection,Ce=kx(K,Z,n,t);J=Ce.distWidth,q=Ce.distHeight;var ke=K[0]-Me[0]||Z?Math.max(j+J,Mt):j,me=K[1]-Me[1]||Z?Math.max(k+q,Mt):k;return Z&&j&&k&&(R?me=ke/T:ke=me*T),[ke,me]}var ie=W(oe(),2),re=ie[0],G=ie[1];h||(n.setFixedDirection(n.fixedDirection),he(e,"onBeforeResize",Re(e,t,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function(Me){var Ce;return n.setFixedDirection(Me),Ce=W(oe(),2),re=Ce[0],G=Ce[1],[re,G]},setFixedPosition:function(Me){var Ce;return n.setFixedPosition(Me),Ce=W(oe(),2),re=Ce[0],G=Ce[1],[re,G]},boundingWidth:re,boundingHeight:G,setSize:function(Me){var Ce;Ce=W(Me,2),re=Ce[0],G=Ce[1]}},!0)));var te=s;s||(!o&&i?te=jR(e,[0,0]):te=n.fixedPosition);var U=[0,0];i||(U=Ek(e,re,G,H,te,!c&&u,n)),l&&(!l[0]&&(U[0]=0),!l[1]&&(U[1]=0));function ee(){var Me;M&&(Me=W(M([re,G]),2),re=Me[0],G=Me[1]),re=Ne(re,N),G=Ne(G,N)}if(Z){K[0]&&K[1]&&U[0]&&U[1]&&(ae(U[0])>ae(U[1])?U[1]=0:U[0]=0);var ne=!U[0]&&!U[1];ne&&ee(),K[0]&&!K[1]||U[0]&&!U[1]||ne&&R?(re+=U[0],G=re/T):(!K[0]&&K[1]||!U[0]&&U[1]||ne&&!R)&&(G+=U[1],re=G*T)}else re+=U[0],G+=U[1],re=Math.max(0,re),G=Math.max(0,G);r=W(vd([re,G],w,_,Z?T:!1),2),re=r[0],G=r[1],ee(),Z&&(d||Y)&&(R?G=re/T:re=G*T),J=re-j,q=G-k;var le=[J-y,q-b];n.prevWidth=J,n.prevHeight=q;var fe=MR(e,re,G,te,v,n);if(!(!z&&le.every(function(Me){return!Me})&&fe.every(function(Me){return!Me}))){var ue=jt.drag(e,da(t,e.state,fe,!!i,!1,"draggable")),ve=ue.transform,Se=m+J,De=x+q,Fe=Re(e,t,V({width:Se,height:De,offsetWidth:Math.round(re),offsetHeight:Math.round(G),startRatio:T,boundingWidth:re,boundingHeight:G,direction:H,dist:[J,q],delta:le,isPinch:!!i,drag:ue},Nx({style:{width:"".concat(Se,"px"),height:"".concat(De,"px")},transform:ve},ue,t)));return!h&&he(e,"onResize",Fe),Fe}},dragControlAfter:function(e,t){var r=t.datas,n=r.isResize,o=r.startOffsetWidth,i=r.startOffsetHeight,a=r.prevWidth,s=r.prevHeight;if(!(!n||e.props.checkResizableError===!1)){var l=e.state,c=l.width,u=l.height,d=c-(o+a),h=u-(i+s),p=ae(d)>3,g=ae(h)>3;if(p&&(r.startWidth+=d,r.startOffsetWidth+=d,r.prevWidth+=d),g&&(r.startHeight+=h,r.startOffsetHeight+=h,r.prevHeight+=h),p||g)return this.dragControl(e,t)}},dragControlEnd:function(e,t){var r=t.datas,n=t.parentEvent;if(r.isResize){r.isResize=!1;var o=Wt(e,t,{});return!n&&he(e,"onResizeEnd",o),o}},dragGroupControlCondition:ox,dragGroupControlStart:function(e,t){var r=t.datas,n=this.dragControlStart(e,V(V({},t),{isGroup:!0}));if(!n)return!1;var o=Er(e,"resizable",t),i=r.startOffsetWidth,a=r.startOffsetHeight;function s(){var p=r.minSize;o.forEach(function(g){var v=g.datas,m=v.minSize,x=v.startOffsetWidth,y=v.startOffsetHeight,b=i*(x?m[0]/x:0),w=a*(y?m[1]/y:0);p[0]=Math.max(p[0],b),p[1]=Math.max(p[1],w)})}function l(){var p=r.maxSize;o.forEach(function(g){var v=g.datas,m=v.maxSize,x=v.startOffsetWidth,y=v.startOffsetHeight,b=i*(x?m[0]/x:0),w=a*(y?m[1]/y:0);p[0]=Math.min(p[0],b),p[1]=Math.min(p[1],w)})}var c=Jr(e,this,"dragControlStart",t,function(p,g){return Nl(e,p,r,g)});s(),l();var u=function(p){n.setFixedDirection(p),c.forEach(function(g,v){g.setFixedDirection(p),Nl(e,g.moveable,r,o[v])})};r.setFixedDirection=u;var d=V(V({},n),{targets:e.props.targets,events:c.map(function(p){return V(V({},p),{setMin:function(g){p.setMin(g),s()},setMax:function(g){p.setMax(g),l()}})}),setFixedDirection:u,setMin:function(p){n.setMin(p),s()},setMax:function(p){n.setMax(p),l()}}),h=he(e,"onResizeGroupStart",d);return r.isResize=h!==!1,r.isResize?n:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isResize){var n=Kn(e.props,"resizable");Ll(e,"onBeforeResize",function(p){he(e,"onBeforeResizeGroup",Re(e,t,V(V({},p),{targets:n.targets}),!0))});var o=this.dragControl(e,V(V({},t),{isGroup:!0}));if(o){var i=o.boundingWidth,a=o.boundingHeight,s=o.dist,l=n.keepRatio,c=[i/(i-s[0]),a/(a-s[1])],u=r.fixedPosition,d=Jr(e,this,"dragControl",t,function(p,g){var v=W(Nt(ia(e.rotation/180*Math.PI,3),[g.datas.originalX*c[0],g.datas.originalY*c[1],1],3),2),m=v[0],x=v[1];return V(V({},g),{parentDist:null,parentScale:c,dragClient:Be(u,[m,x]),parentKeepRatio:l})}),h=V({targets:n.targets,events:d},o);return he(e,"onResizeGroup",h),h}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isResize){this.dragControlEnd(e,t);var o=Jr(e,this,"dragControlEnd",t),i=Wt(e,t,{targets:e.props.targets,events:o});return he(e,"onResizeGroupEnd",i),r}},request:function(e){var t={},r=0,n=0,o=!1,i=e.getRect();return{isControl:!0,requestStart:function(a){var s;return o=a.useSnap,{datas:t,parentDirection:a.direction||[1,1],parentIsWidth:(s=a?.horizontal)!==null&&s!==void 0?s:!0,useSnap:o}},request:function(a){return"offsetWidth"in a?r=a.offsetWidth-i.offsetWidth:"deltaWidth"in a&&(r+=a.deltaWidth),"offsetHeight"in a?n=a.offsetHeight-i.offsetHeight:"deltaHeight"in a&&(n+=a.deltaHeight),{datas:t,parentDist:[r,n],parentKeepRatio:a.keepRatio,useSnap:o}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:o}}}},unset:function(e){e.state.gestos.resizable=null}};function tf(e,t,r,n,o){var i=e.props.groupable,a=e.state,s=a.is3d?4:3,l=t.origin,c=nt(e.state.rootMatrix,be([l[0],l[1]],i?[0,0]:[a.left,a.top]),s),u=Be([o.left,o.top],c);t.startAbsoluteOrigin=u,t.prevDeg=ct(u,[r,n])/Math.PI*180,t.defaultDeg=t.prevDeg,t.prevSnapDeg=0,t.loop=0,t.startDist=Vr(u,[r,n])}function kl(e,t,r){var n=r.defaultDeg,o=r.prevDeg,i=o%360,a=Math.floor(o/360);i<0&&(i+=360),i>e&&i>270&&e<90?++a:i<e&&i<90&&e>270&&--a;var s=t*(a*360+e-n);return r.prevDeg=n+s,s}function rf(e,t,r,n){return kl(ct(n.startAbsoluteOrigin,[e,t])/Math.PI*180,r,n)}function nf(e,t,r,n,o,i){var a=e.props.throttleRotate,s=a===void 0?0:a,l=r.prevSnapDeg,c=0,u=!1;if(i){var d=Ck(e,t,n,o+n);u=d.isSnap,c=o+d.dist}u||(c=Ne(o+n,s));var h=c-o;return r.prevSnapDeg=h,[h-l,h,c]}function ix(e,t,r){var n=W(t,4),o=n[0],i=n[1],a=n[2],s=n[3];if(e==="none")return[];if($e(e))return e.map(function(m){return ix(m,[o,i,a,s],r)[0]});var l=W((e||"top").split("-"),2),c=l[0],u=l[1],d=[o,i];c==="left"?d=[a,o]:c==="right"?d=[i,s]:c==="bottom"&&(d=[s,a]);var h=[(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2],p=Sx(d,r);if(u){var g=u==="top"||u==="left",v=c==="bottom"||c==="left";h=d[g&&!v||!g&&v?0:1]}return[[h,p]]}function of(e,t){if(t.isRequest)return t.requestAble==="rotatable";var r=t.inputEvent.target;if(ut(r,ye("rotation-control"))||e.props.rotateAroundControls&&ut(r,ye("around-control"))||ut(r,ye("control"))&&ut(r,ye("rotatable")))return!0;var n=e.props.rotationTarget;return n?xf(n,!0).some(function(o){return o?r===o||r.contains(o):!1}):!1}var ck=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,uk={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[ck],viewClassName:function(e){return e.isDragging("rotatable")?ye("view-rotation-dragging"):""},render:function(e,t){var r=Kn(e.props,"rotatable"),n=r.rotatable,o=r.rotationPosition,i=r.zoom,a=r.renderDirections,s=r.rotateAroundControls,l=r.resolveAblesWithRotatable,c=e.getState(),u=c.renderPoses,d=c.direction;if(!n)return null;var h=ix(o,u,d),p=[];if(h.forEach(function(x,y){var b=W(x,2),w=b[0],_=b[1];p.push(t.createElement("div",{key:"rotation".concat(y),className:ye("rotation"),style:{transform:"translate(-50%) translate(".concat(w[0],"px, ").concat(w[1],"px) rotate(").concat(_,"rad)")}},t.createElement("div",{className:ye("line rotation-line"),style:{transform:"scaleX(".concat(i,")")}}),t.createElement("div",{className:ye("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(i,")")}})))}),a){var g=Jt(l||{}),v={};g.forEach(function(x){l[x].forEach(function(y){v[y]=x})});var m=[];$e(a)&&(m=a.map(function(x){var y=v[x];return{data:y?{resolve:y}:{},classNames:y?["move"]:[],dir:x}})),p.push.apply(p,ce([],W(k1(e,"rotatable",m,t)),!1))}return s&&p.push.apply(p,ce([],W(F1(e,t)),!1)),p},dragControlCondition:of,dragControlStart:function(e,t){var r,n,o=t.datas,i=t.clientX,a=t.clientY,s=t.parentRotate,l=t.parentFlag,c=t.isPinch,u=t.isRequest,d=e.state,h=d.target,p=d.left,g=d.top,v=d.direction,m=d.beforeDirection,x=d.targetTransform,y=d.moveableClientRect,b=d.offsetMatrix,w=d.targetMatrix,_=d.allMatrix,T=d.width,j=d.height;if(!u&&!h)return!1;var k=e.getRect();o.rect=k,o.transform=x,o.left=p,o.top=g;var R=function(K){var J=nx(e.state,K);o.fixedDirection=J.fixedDirection,o.fixedOffset=J.fixedOffset,o.fixedPosition=J.fixedPosition,N&&N.setFixedPosition(K)},A=function(K){var J=lk(e.state,K);o.fixedDirection=J.fixedDirection,o.fixedOffset=J.fixedOffset,o.fixedPosition=J.fixedPosition,N&&N.setFixedDirection(K)},$=i,F=a;if(u||c||l){var L=s||0;o.beforeInfo={origin:k.beforeOrigin,prevDeg:L,defaultDeg:L,prevSnapDeg:0,startDist:0},o.afterInfo=V(V({},o.beforeInfo),{origin:k.origin}),o.absoluteInfo=V(V({},o.beforeInfo),{origin:k.origin,startValue:L})}else{var P=(n=t.inputEvent)===null||n===void 0?void 0:n.target;if(P){var O=P.getAttribute("data-direction")||"",I=vR[O];if(I){o.isControl=!0,o.isAroundControl=ut(P,ye("around-control")),o.controlDirection=I;var E=P.getAttribute("data-resolve");E&&(o.resolveAble=E);var S=Bk(d.rootMatrix,d.renderPoses,y);r=W(mt(S,I),2),$=r[0],F=r[1]}}o.beforeInfo={origin:k.beforeOrigin},o.afterInfo={origin:k.origin},o.absoluteInfo={origin:k.origin,startValue:k.rotation};var M=R;R=function(K){var J=d.is3d?4:3,q=W(Be(s1(w,J),K),2),Z=q[0],oe=q[1],ie=Nt(b,Vn([Z,oe],J)),re=Nt(_,Vn([K[0],K[1]],J));M(K);var G=d.posDelta;o.beforeInfo.origin=be(ie,G),o.afterInfo.origin=be(re,G),o.absoluteInfo.origin=be(re,G),tf(e,o.beforeInfo,$,F,y),tf(e,o.afterInfo,$,F,y),tf(e,o.absoluteInfo,$,F,y)},A=function(K){var J=mt([[0,0],[T,0],[0,j],[T,j]],K);R(J)}}o.startClientX=$,o.startClientY=F,o.direction=v,o.beforeDirection=m,o.startValue=0,o.datas={},Sl(e,t,"rotate");var D=!1,N=!1;if(o.isControl&&o.resolveAble){var z=o.resolveAble;z==="resizable"&&(N=ef.dragControlStart(e,V(V({},new Ko("resizable").dragStart([0,0],t)),{parentPosition:o.controlPosition,parentFixedPosition:o.fixedPosition})))}N||(D=jt.dragStart(e,new Ko().dragStart([0,0],t))),R(zk(e));var Y=Re(e,t,V(V({set:function(K){o.startValue=K*Math.PI/180},setFixedDirection:A,setFixedPosition:R},wl(e,t)),{dragStart:D,resizeStart:N})),H=he(e,"onRotateStart",Y);return o.isRotate=H!==!1,d.snapRenderInfo={request:t.isRequest},o.isRotate?Y:!1},dragControl:function(e,t){var r,n,o,i=t.datas,a=t.clientDistX,s=t.clientDistY,l=t.parentRotate,c=t.parentFlag,u=t.isPinch,d=t.groupDelta,h=t.resolveMatrix,p=i.beforeDirection,g=i.beforeInfo,v=i.afterInfo,m=i.absoluteInfo,x=i.isRotate,y=i.startValue,b=i.rect,w=i.startClientX,_=i.startClientY;if(x){yl(e,t,"rotate");var T=mR(t),j=p*T,k=e.props.parentMoveable,R=0,A,$,F=0,L,P,O=0,I,E,S=180/Math.PI*y,M=m.startValue,D=!1,N=w+a,z=_+s;if(!c&&"parentDist"in t){var Y=t.parentDist;A=Y,L=Y,I=Y}else u||c?(A=kl(l,p,g),L=kl(l,j,v),I=kl(l,j,m)):(A=rf(N,z,p,g),L=rf(N,z,j,v),I=rf(N,z,j,m),D=!0);if($=S+A,P=S+L,E=M+I,he(e,"onBeforeRotate",Re(e,t,{beforeRotation:$,rotation:P,absoluteRotation:E,setRotation:function(te){L=te-S,A=L,I=L}},!0)),r=W(nf(e,b,g,A,S,D),3),R=r[0],A=r[1],$=r[2],n=W(nf(e,b,v,L,S,D),3),F=n[0],L=n[1],P=n[2],o=W(nf(e,b,m,I,M,D),3),O=o[0],I=o[1],E=o[2],!(!O&&!F&&!R&&!k&&!h)){var H=bl(i,"rotate(".concat(P,"deg)"),"rotate(".concat(L,"deg)"));h&&(i.fixedPosition=Hd(e,i.targetAllTransform,i.fixedDirection,i.fixedOffset,i));var K=TR(e,L,i),J=be(Be(d||[0,0],K),i.prevInverseDist||[0,0]);i.prevInverseDist=K,i.requestValue=null;var q=M1(e,H,J,u,t),Z=q,oe=Vr([N,z],m.startAbsoluteOrigin)-m.startDist,ie=void 0;if(i.resolveAble==="resizable"){var re=ef.dragControl(e,V(V({},da(t,e.state,[t.deltaX,t.deltaY],!!u,!1,"resizable")),{resolveMatrix:!0,parentDistance:oe}));re&&(ie=re,Z=Nx(Z,re,t))}var G=Re(e,t,V(V({delta:F,dist:L,rotate:P,rotation:P,beforeDist:A,beforeDelta:R,beforeRotate:$,beforeRotation:$,absoluteDist:I,absoluteDelta:O,absoluteRotate:E,absoluteRotation:E,isPinch:!!u,resize:ie},q),Z));return he(e,"onRotate",G),G}}},dragControlEnd:function(e,t){var r=t.datas;if(r.isRotate){r.isRotate=!1;var n=Wt(e,t,{});return he(e,"onRotateEnd",n),n}},dragGroupControlCondition:of,dragGroupControlStart:function(e,t){var r=t.datas,n=e.state,o=n.left,i=n.top,a=n.beforeOrigin,s=this.dragControlStart(e,t);if(!s)return!1;s.set(r.beforeDirection*e.rotation);var l=Jr(e,this,"dragControlStart",t,function(d,h){var p=d.state,g=p.left,v=p.top,m=p.beforeOrigin,x=Be(be([g,v],[o,i]),be(m,a));return h.datas.startGroupClient=x,h.datas.groupClient=x,V(V({},h),{parentRotate:0})}),c=V(V({},s),{targets:e.props.targets,events:l}),u=he(e,"onRotateGroupStart",c);return r.isRotate=u!==!1,r.isRotate?s:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isRotate){Ll(e,"onBeforeRotate",function(c){he(e,"onBeforeRotateGroup",Re(e,t,V(V({},c),{targets:e.props.targets}),!0))});var n=this.dragControl(e,t);if(n){var o=r.beforeDirection,i=n.beforeDist,a=i/180*Math.PI,s=Jr(e,this,"dragControl",t,function(c,u){var d=u.datas.startGroupClient,h=W(u.datas.groupClient,2),p=h[0],g=h[1],v=W(oa(d,a*o),2),m=v[0],x=v[1],y=[m-p,x-g];return u.datas.groupClient=[m,x],V(V({},u),{parentRotate:i,groupDelta:y})});e.rotation=o*n.beforeRotation;var l=V({targets:e.props.targets,events:s,set:function(c){e.rotation=c},setGroupRotation:function(c){e.rotation=c}},n);return he(e,"onRotateGroup",l),l}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isRotate){this.dragControlEnd(e,t);var o=Jr(e,this,"dragControlEnd",t),i=Wt(e,t,{targets:e.props.targets,events:o});return he(e,"onRotateGroupEnd",i),r}},request:function(e){var t={},r=0,n=e.getRotation();return{isControl:!0,requestStart:function(){return{datas:t}},request:function(o){return"deltaRotate"in o?r+=o.deltaRotate:"rotate"in o&&(r=o.rotate-n),{datas:t,parentDist:r}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function dk(e,t){var r,n=e.direction,o=e.classNames,i=e.size,a=e.pos,s=e.zoom,l=e.key,c=n==="horizontal",u=c?"Y":"X";return t.createElement("div",{key:l,className:o.join(" "),style:(r={},r[c?"width":"height"]="".concat(i),r.transform="translate(".concat(a[0],", ").concat(a[1],") translate").concat(u,"(-50%) scale").concat(u,"(").concat(s,")"),r)})}function af(e,t){return dk(V(V({},e),{classNames:ce([ye("line","guideline",e.direction)],W(e.classNames),!1).filter(function(r){return r}),size:e.size||"".concat(e.sizeValue,"px"),pos:e.pos||e.posValue.map(function(r){return"".concat(Ne(r,.1),"px")})}),t)}function ax(e,t,r,n,o,i,a,s){var l=e.props.zoom;return r.map(function(c,u){var d=c.type,h=c.pos,p=[0,0];return p[a]=n,p[a?0:1]=-o+h,af({key:"".concat(t,"TargetGuideline").concat(u),classNames:[ye("target","bold",d)],posValue:p,sizeValue:i,zoom:l,direction:t},s)})}function sx(e,t,r,n,o,i){var a=e.props,s=a.zoom,l=a.isDisplayInnerSnapDigit,c=t==="horizontal"?bn:wn,u=o[c.start],d=o[c.end];return r.filter(function(h){var p=h.hide,g=h.elementRect;if(p)return!1;if(l&&g){var v=g.rect;if(v[c.start]<=u&&d<=v[c.end])return!1}return!0}).map(function(h,p){var g=h.pos,v=h.size,m=h.element,x=h.className,y=[-n[0]+g[0],-n[1]+g[1]];return af({key:"".concat(t,"-default-guideline-").concat(p),classNames:m?[ye("bold"),x]:[ye("normal"),x],direction:t,posValue:y,sizeValue:v,zoom:s},i)})}function pa(e,t,r,n,o,i,a,s){var l,c=e.props,u=c.snapDigit,d=u===void 0?0:u,h=c.isDisplaySnapDigit,p=h===void 0?!0:h,g=c.snapDistFormat,v=g===void 0?function(_,T){return _}:g,m=c.zoom,x=t==="horizontal"?"X":"Y",y=t==="vertical"?"height":"width",b=Math.abs(o),w=p?parseFloat(b.toFixed(d)):0;return s.createElement("div",{key:"".concat(t,"-").concat(r,"-guideline-").concat(n),className:ye("guideline-group",t),style:(l={left:"".concat(i[0],"px"),top:"".concat(i[1],"px")},l[y]="".concat(b,"px"),l)},af({direction:t,classNames:[ye(r),a],size:"100%",posValue:[0,0],sizeValue:b,zoom:m},s),s.createElement("div",{className:ye("size-value","gap"),style:{transform:"translate".concat(x,"(-50%) scale(").concat(m,")")}},w>0?v(w,t):""))}function fk(e,t,r,n){var o=e==="vertical"?0:1,i=e==="vertical"?1:0,a=o?bn:wn,s=r[a.start],l=r[a.end];return Tx(t,function(c){return c.pos[o]}).map(function(c){var u=[],d=[],h=[];return c.forEach(function(p){var g,v,m=p.element,x=p.elementRect.rect;if(x[a.end]<s)u.push(p);else if(l<x[a.start])d.push(p);else if(x[a.start]<=s&&l<=x[a.end]&&n){var y=p.pos,b={element:m,rect:V(V({},x),(g={},g[a.end]=x[a.start],g))},w={element:m,rect:V(V({},x),(v={},v[a.start]=x[a.end],v))},_=[0,0],T=[0,0];_[o]=y[o],_[i]=y[i],T[o]=y[o],T[i]=y[i]+p.size,u.push({type:e,pos:_,size:0,elementRect:b,direction:"",elementDirection:"end"}),d.push({type:e,pos:T,size:0,elementRect:w,direction:"",elementDirection:"start"})}}),u.sort(function(p,g){return g.pos[i]-p.pos[i]}),d.sort(function(p,g){return p.pos[i]-g.pos[i]}),{total:c,start:u,end:d,inner:h}})}function hk(e,t,r,n,o){var i=e.props.isDisplayInnerSnapDigit,a=[];return["vertical","horizontal"].forEach(function(s){var l=t.filter(function(m){return m.type===s}),c=s==="vertical"?1:0,u=c?0:1,d=fk(s,l,n,i),h=c?wn:bn,p=c?bn:wn,g=n[h.start],v=n[h.end];d.forEach(function(m){var x=m.total,y=m.start,b=m.end,w=m.inner,_=r[u]+x[0].pos[u]-n[p.start],T=n;y.forEach(function(j){var k=j.elementRect.rect,R=T[h.start]-k[h.end];if(R>0){var A=[0,0];A[c]=r[c]+T[h.start]-g-R,A[u]=_,a.push(pa(e,s,"dashed",a.length,R,A,j.className,o))}T=k}),T=n,b.forEach(function(j){var k=j.elementRect.rect,R=k[h.start]-T[h.end];if(R>0){var A=[0,0];A[c]=r[c]+T[h.end]-g,A[u]=_,a.push(pa(e,s,"dashed",a.length,R,A,j.className,o))}T=k}),w.forEach(function(j){var k=j.elementRect.rect,R=g-k[h.start],A=k[h.end]-v,$=[0,0],F=[0,0];$[c]=r[c]-R,$[u]=_,F[c]=r[c]+v-g,F[u]=_,a.push(pa(e,s,"dashed",a.length,R,$,j.className,o)),a.push(pa(e,s,"dashed",a.length,A,F,j.className,o))})})}),a}function pk(e,t,r,n,o){var i=[];return["horizontal","vertical"].forEach(function(a){var s=t.filter(function(m){return m.type===a}).slice(0,1),l=a==="vertical"?0:1,c=l?0:1,u=l?wn:bn,d=l?bn:wn,h=n[u.start],p=n[u.end],g=n[d.start],v=n[d.end];s.forEach(function(m){var x=m.gap,y=m.gapRects,b=Math.max.apply(Math,ce([g],W(y.map(function(T){var j=T.rect;return j[d.start]})),!1)),w=Math.min.apply(Math,ce([v],W(y.map(function(T){var j=T.rect;return j[d.end]})),!1)),_=(b+w)/2;b===w||_===(g+v)/2||y.forEach(function(T){var j=T.rect,k=T.className,R=[r[0],r[1]];if(j[u.end]<h)R[l]+=j[u.end]-h;else if(p<j[u.start])R[l]+=j[u.start]-h-x;else return;R[c]+=_-g,i.push(pa(e,l?"vertical":"horizontal","gap",i.length,x,R,k,o))})})}),i}function sf(e){var t,r,n=e.state,o=n.containerClientRect,i=n.hasFixed,a=o.overflow,s=o.scrollHeight,l=o.scrollWidth,c=o.clientHeight,u=o.clientWidth,d=o.clientLeft,h=o.clientTop,p=e.props,g=p.snapGap,v=g===void 0?!0:g,m=p.verticalGuidelines,x=p.horizontalGuidelines,y=p.snapThreshold,b=y===void 0?5:y,w=p.maxSnapElementGuidelineDistance,_=w===void 0?1/0:w,T=p.isDisplayGridGuidelines,j=er(rr(e.state)),k=j.top,R=j.left,A=j.bottom,$=j.right,F={top:k,left:R,bottom:A,right:$,center:(R+$)/2,middle:(k+A)/2},L=xk(e),P=ce([],W(L),!1),O=((r=(t=n.snapThresholdInfo)===null||t===void 0?void 0:t.multiples)!==null&&r!==void 0?r:[1,1]).map(function(M){return M*b});v&&P.push.apply(P,ce([],W(vk(e,F,O)),!1));var I=V({},n.snapOffset||{left:0,top:0,bottom:0,right:0});if(P.push.apply(P,ce([],W(mk(e,a?l:u,a?s:c,d,h,I,T)),!1)),i){var E=o.left,S=o.top;I.left+=E,I.top+=S,I.right+=E,I.bottom+=S}return P.push.apply(P,ce([],W(ux(x||!1,m||!1,a?l:u,a?s:c,d,h,I)),!1)),P=P.filter(function(M){var D=M.element,N=M.elementRect,z=M.type;if(!D||!N)return!0;var Y=N.rect;return lx(F,Y,z,_)}),P}function vk(e,t,r){var n=e.props,o=n.maxSnapElementGuidelineDistance,i=o===void 0?1/0:o,a=n.maxSnapElementGapDistance,s=a===void 0?1/0:a,l=e.state.elementRects,c=[];return[["vertical",bn,wn],["horizontal",wn,bn]].forEach(function(u){var d=W(u,3),h=d[0],p=d[1],g=d[2],v=t[p.start],m=t[p.end],x=t[p.center],y=t[g.start],b=t[g.end],w={left:r[0],top:r[1]};function _(k){var R=k.rect,A=w[p.start];return R[p.end]<v+A?v-R[p.end]:m-A<R[p.start]?R[p.start]-m:-1}var T=l.filter(function(k){var R=k.rect;return R[g.start]>b||R[g.end]<y?!1:_(k)>0}).sort(function(k,R){return _(k)-_(R)}),j=[];T.forEach(function(k){T.forEach(function(R){if(k!==R){var A=k.rect,$=R.rect,F=A[g.start],L=A[g.end],P=$[g.start],O=$[g.end];F>O||P>L||j.push([k,R])}})}),j.forEach(function(k){var R=W(k,2),A=R[0],$=R[1],F=A.rect,L=$.rect,P=F[p.start],O=F[p.end],I=L[p.start],E=L[p.end],S=w[p.start],M=0,D=0,N=!1,z=!1,Y=!1;if(O<=v&&m<=I){if(z=!0,M=(I-O-(m-v))/2,D=O+M+(m-v)/2,ae(D-x)>S)return}else if(O<I&&E<v+S){if(N=!0,M=I-O,D=E+M,ae(D-v)>S)return}else if(O<I&&m-S<P){if(Y=!0,M=I-O,D=P-M,ae(D-m)>S)return}else return;M&&lx(t,L,h,i)&&(M>s||c.push({type:h,pos:h==="vertical"?[D,0]:[0,D],element:$.element,size:0,className:$.className,isStart:N,isCenter:z,isEnd:Y,gap:M,hide:!0,gapRects:[A,$],direction:"",elementDirection:""}))})}),c}function gk(e,t,r,n){var o,i,a=e.props,s=e.state,l=a.snapGridAll,c=a.snapGridWidth,u=c===void 0?0:c,d=a.snapGridHeight,h=d===void 0?0:d,p=s.snapRenderInfo,g=p&&(((o=p.direction)===null||o===void 0?void 0:o[0])||((i=p.direction)===null||i===void 0?void 0:i[1])),v=e.moveables;if(l&&v&&g&&(u||h)){if(s.snapThresholdInfo)return;s.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var m=e.getRect(),x=m.children,y=p.direction;if(x){var b=y.map(function(_,T){var j=T===0?{snapSize:u,posName:"left",sizeName:"width",clientOffset:n.left-t}:{snapSize:h,posName:"top",sizeName:"height",clientOffset:n.top-r},k=j.snapSize,R=j.posName,A=j.sizeName,$=j.clientOffset;if(!k)return{dir:_,multiple:1,snapSize:k,snapOffset:0};var F=m[A],L=m[R],P=dj(x.map(function(N){return[N[R]-L,N[A],F-N[A]-N[R]+L]})).filter(function(N){return N}).sort(function(N,z){return N-z}),O=P[0],I=P.map(function(N){return Ne(N/O,.1)*k}),E=1,S=Ne(F/O,.1);for(E=1;E<=10&&!I.every(function(N){return N*E%1===0});++E);var M=(-_+1)/2,D=$o(L-$,L-$+F,M,1-M);return{multiple:S*E,dir:_,snapSize:k,snapOffset:Math.round(D/k)}}),w=b.map(function(_){return _.multiple||1});s.snapThresholdInfo.multiples=w,s.snapThresholdInfo.offset=b.map(function(_){return _.snapOffset}),b.forEach(function(_,T){_.snapSize})}}else s.snapThresholdInfo=null}function mk(e,t,r,n,o,i,a){n===void 0&&(n=0),o===void 0&&(o=0);var s=e.props,l=e.state,c=s.snapGridWidth,u=c===void 0?0:c,d=s.snapGridHeight,h=d===void 0?0:d,p=[],g=i.left,v=i.top,m=[0,0];gk(e,n,o,i);var x=l.snapThresholdInfo,y=u,b=h;if(x&&(u*=x.multiples[0]||1,h*=x.multiples[1]||1,m=x.offset),h){for(var w=function(T){p.push({type:"horizontal",pos:[g,Ne(m[1]*b+T-o+v,.1)],className:ye("grid-guideline"),size:t,hide:!a,direction:"",grid:!0})},_=0;_<=r*2;_+=h)w(_);for(var _=-h;_>=-r;_-=h)w(_)}if(u){for(var w=function(j){p.push({type:"vertical",pos:[Ne(m[0]*y+j-n+g,.1),v],className:ye("grid-guideline"),size:r,hide:!a,direction:"",grid:!0})},_=0;_<=t*2;_+=u)w(_);for(var _=-u;_>=-t;_-=u)w(_)}return p}function lx(e,t,r,n){return r==="horizontal"?ae(e.right-t.left)<=n||ae(e.left-t.right)<=n||e.left<=t.right&&t.left<=e.right:r==="vertical"?ae(e.bottom-t.top)<=n||ae(e.top-t.bottom)<=n||e.top<=t.bottom&&t.top<=e.bottom:!0}function xk(e){var t=e.state,r=e.props.elementGuidelines,n=r===void 0?[]:r;if(!n.length)return t.elementRects=[],[];var o=(t.elementRects||[]).filter(function(h){return!h.refresh}),i=n.map(function(h){return rt(h)&&"element"in h?V(V({},h),{element:Hr(h.element,!0)}):{element:Hr(h,!0)}}).filter(function(h){return h.element}),a=Yo(o.map(function(h){return h.element}),i.map(function(h){return h.element})),s=a.maintained,l=a.added,c=[];s.forEach(function(h){var p=W(h,2),g=p[0],v=p[1];c[v]=o[g]}),yk(e,l.map(function(h){return i[h]})).map(function(h,p){c[l[p]]=h}),t.elementRects=c;var u=qd(e.props.elementSnapDirections),d=[];return c.forEach(function(h){var p=h.element,g=h.top,v=g===void 0?u.top:g,m=h.left,x=m===void 0?u.left:m,y=h.right,b=y===void 0?u.right:y,w=h.bottom,_=w===void 0?u.bottom:w,T=h.center,j=T===void 0?u.center:T,k=h.middle,R=k===void 0?u.middle:k,A=h.className,$=h.rect,F=Xd({top:v,right:b,left:x,bottom:_,center:j,middle:R},$),L=F.horizontal,P=F.vertical,O=F.horizontalNames,I=F.verticalNames,E=$.top,S=$.left,M=$.right-S,D=$.bottom-E,N=[M,D];P.forEach(function(z,Y){d.push({type:"vertical",element:p,pos:[Ne(z,.1),E],size:D,sizes:N,className:A,elementRect:h,elementDirection:z1[I[Y]]||I[Y],direction:""})}),L.forEach(function(z,Y){d.push({type:"horizontal",element:p,pos:[S,Ne(z,.1)],size:M,sizes:N,className:A,elementRect:h,elementDirection:z1[O[Y]]||O[Y],direction:""})})}),d}function cx(e,t){return e?e.map(function(r){var n=rt(r)?r:{pos:r},o=n.pos;return Zi(o)?n:V(V({},n),{pos:We(o,t)})}):[]}function ux(e,t,r,n,o,i,a){o===void 0&&(o=0),i===void 0&&(i=0),a===void 0&&(a={left:0,top:0,right:0,bottom:0});var s=[],l=a.left,c=a.top,u=a.bottom,d=a.right,h=r+d-l,p=n+u-c;return cx(e,p).forEach(function(g){s.push({type:"horizontal",pos:[l,Ne(g.pos-i+c,.1)],size:h,className:g.className,direction:""})}),cx(t,h).forEach(function(g){s.push({type:"vertical",pos:[Ne(g.pos-o+l,.1),c],size:p,className:g.className,direction:""})}),s}function yk(e,t){if(!t.length)return[];var r=e.props.groupable,n=e.state,o=n.containerClientRect,i=n.rootMatrix,a=n.is3d,s=n.offsetDelta,l=a?4:3,c=W(VR(i,o,l),2),u=c[0],d=c[1],h=r?0:s[0],p=r?0:s[1];return t.map(function(g){var v=g.element.getBoundingClientRect(),m=v.left-u-h,x=v.top-d-p,y=x+v.height,b=m+v.width,w=W(ii(i,[m,x],l),2),_=w[0],T=w[1],j=W(ii(i,[b,y],l),2),k=j[0],R=j[1];return V(V({},g),{rect:{left:_,right:k,top:T,bottom:R,center:(_+k)/2,middle:(T+R)/2}})})}function Pl(e){var t=e.state,r=t.container,n=e.props.snapContainer||r;if(t.snapContainer===n&&t.guidelines&&t.guidelines.length)return!1;var o=t.containerClientRect,i={left:0,top:0,bottom:0,right:0};if(r!==n){var a=Hr(n,!0);if(a){var s=ya(a),l=jx(t,[s.left-o.left,s.top-o.top]),c=jx(t,[s.right-o.right,s.bottom-o.bottom]);i.left=Ne(l[0],1e-5),i.top=Ne(l[1],1e-5),i.right=Ne(c[0],1e-5),i.bottom=Ne(c[1],1e-5)}}return t.snapContainer=n,t.snapOffset=i,t.guidelines=sf(e),t.enableSnap=!0,!0}function dx(e,t,r,n,o,i){var a=Xn(e,t,r,i?4:3),s=mt(a,n);return ff(a,be(o,s))}function fx(e){return e?e/ae(e):0}function bk(e,t,r,n,o,i){var a=i.fixedDirection,s=YR(r,a,n),l=Qd(e,t,r,n),c=ce(ce([],W(ik(e,t,s,n,o,i)),!1),W(Q1(e,l,i)),!1),u=Ml(c,0),d=Ml(c,1);return{width:{isBound:u.isBound,offset:u.offset[0]},height:{isBound:d.isBound,offset:d.offset[1]}}}function wk(e,t,r,n,o,i,a,s,l){var c=mt(t,a),u=Rl(e,s,{vertical:[c[0]],horizontal:[c[1]]}),d=u.horizontal.offset,h=u.vertical.offset;if(Ne(h,Bd)||Ne(d,Bd)){var p=W(Ur({datas:l,distX:-h,distY:-d}),2),g=p[0],v=p[1],m=Math.min(o||1/0,r+a[0]*g),x=Math.min(i||1/0,n+a[1]*v);return[m-r,x-n]}return[0,0]}function hx(e,t,r,n,o,i,a,s){for(var l=rr(e.state),c=e.props.keepRatio,u=0,d=0,h=0;h<2;++h){var p=t(u,d),g=bk(e,p,o,c,a,s),v=g.width,m=g.height,x=v.isBound,y=m.isBound,b=v.offset,w=m.offset;if(h===1&&(x||(b=0),y||(w=0)),h===0&&a&&!x&&!y)return[0,0];if(c){var _=ae(b)*(r?1/r:1),T=ae(w)*(n?1/n:1),j=x&&y?_<T:y||!x&&_<T;j?b=r*w/n:w=n*b/r}u+=b,d+=w}if(!c&&o[0]&&o[1]){var k=sk(e,l,o,i,s),R=k.maxWidth,A=k.maxHeight,$=W(wk(e,t(u,d).map(function(P){return P.map(function(O){return Ne(O,Bd)})}),r+u,n+d,R,A,o,a,s),2),b=$[0],w=$[1];u+=b,d+=w}return[u,d]}function va(e){return e<0&&(e=e%360+360),e%=360,e}function Sk(e,t){t=va(t);var r=Math.floor(e/360),n=r*360+360-t,o=r*360+t;return ae(e-n)<ae(e-o)?n:o}function lf(e,t){e=va(e),t=va(t);var r=va(e-t);return Math.min(r,360-r)}function Ck(e,t,r,n){var o,i=e.props,a=(o=i[$1])!==null&&o!==void 0?o:5,s=i[G1];if(ri(e,"rotatable")){var l=t.pos1,c=t.pos2,u=t.pos3,d=t.pos4,h=t.origin,p=r*Math.PI/180,g=[l,c,u,d].map(function(w){return be(w,h)}),v=g.map(function(w){return oa(w,p)}),m=ce(ce([],W(BR(e,g,v,h,r)),!1),W(JR(e,g,v,h,r)),!1);m.sort(function(w,_){return ae(w-r)-ae(_-r)});var x=m.length>0;if(x)return{isSnap:x,dist:x?m[0]:r}}if(s?.length&&a){var y=s.slice().sort(function(w,_){return lf(w,n)-lf(_,n)}),b=y[0];if(lf(b,n)<=a)return{isSnap:!0,dist:r+Sk(n,b)-n}}return{isSnap:!1,dist:r}}function Ek(e,t,r,n,o,i,a){if(!ri(e,"resizable"))return[0,0];var s=a.fixedDirection,l=a.nextAllMatrix,c=e.state,u=c.allMatrix,d=c.is3d;return hx(e,function(h,p){return dx(l||u,t+h,r+p,s,o,d)},t,r,n,o,i,a)}function _k(e,t,r,n,o){if(!ri(e,"scalable"))return[0,0];var i=o.startOffsetWidth,a=o.startOffsetHeight,s=o.fixedPosition,l=o.fixedDirection,c=o.is3d,u=hx(e,function(d,h){return dx(ER(o,Be(t,[d/i,h/a])),i,a,l,s,c)},i,a,r,s,n,o);return[u[0]/i,u[1]/a]}function Nk(e,t){t.absolutePoses=rr(e.state)}function px(e){var t=[];return e.forEach(function(r){r.guidelineInfos.forEach(function(n){var o=n.guideline;Ft(t,function(i){return i.guideline===o})||(o.direction="",t.push({guideline:o,posInfo:r}))})}),t.map(function(r){var n=r.guideline,o=r.posInfo;return V(V({},n),{direction:o.direction})})}function vx(e,t,r,n,o,i){var a=Yd(Dl(e,i),t,r),s=a.vertical,l=a.horizontal,c=ti();s.forEach(function(g){g.isBound&&(g.direction==="start"&&(c.left=!0),g.direction==="end"&&(c.right=!0),n.push({type:"bounds",pos:g.pos}))}),l.forEach(function(g){g.isBound&&(g.direction==="start"&&(c.top=!0),g.direction==="end"&&(c.bottom=!0),o.push({type:"bounds",pos:g.pos}))});var u=ek(e),d=u.boundMap,h=u.vertical,p=u.horizontal;return h.forEach(function(g){Gr(n,function(v){var m=v.type,x=v.pos;return m==="bounds"&&x===g})>=0||n.push({type:"bounds",pos:g})}),p.forEach(function(g){Gr(o,function(v){var m=v.type,x=v.pos;return m==="bounds"&&x===g})>=0||o.push({type:"bounds",pos:g})}),{boundMap:c,innerBoundMap:d}}var Dk=mf("",["resizable","scalable"]),Tk={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",$1,G1,V1,U1,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(e,t){var r=e.state,n=r.top,o=r.left,i=r.pos1,a=r.pos2,s=r.pos3,l=r.pos4,c=r.snapRenderInfo,u=e.props.snapRenderThreshold,d=u===void 0?1:u;if(!c||!c.render||!ri(e,""))return ai(e,"boundMap",ti(),function(H){return JSON.stringify(H)}),ai(e,"innerBoundMap",ti(),function(H){return JSON.stringify(H)}),[];r.guidelines=sf(e);var h=Math.min(i[0],a[0],s[0],l[0]),p=Math.min(i[1],a[1],s[1],l[1]),g=c.externalPoses||[],v=rr(e.state),m=[],x=[],y=[],b=[],w=[],_=er(v),T=_.width,j=_.height,k=_.top,R=_.left,A=_.bottom,$=_.right,F={left:R,right:$,top:k,bottom:A,center:(R+$)/2,middle:(k+A)/2},L=g.length>0,P=L?er(g):{};if(!c.request){if(c.direction&&w.push(WR(e,v,c.direction,d,d)),c.snap){var O=er(v);c.center&&(O.middle=(O.top+O.bottom)/2,O.center=(O.left+O.right)/2),w.push(W1(e,O,d,d))}L&&(c.center&&(P.middle=(P.top+P.bottom)/2,P.center=(P.left+P.right)/2),w.push(W1(e,P,d,d))),w.forEach(function(H){var K=H.vertical.posInfos,J=H.horizontal.posInfos;m.push.apply(m,ce([],W(K.filter(function(q){var Z=q.guidelineInfos;return Z.some(function(oe){var ie=oe.guideline;return!ie.hide})}).map(function(q){return{type:"snap",pos:q.pos}})),!1)),x.push.apply(x,ce([],W(J.filter(function(q){var Z=q.guidelineInfos;return Z.some(function(oe){var ie=oe.guideline;return!ie.hide})}).map(function(q){return{type:"snap",pos:q.pos}})),!1)),y.push.apply(y,ce([],W(px(K)),!1)),b.push.apply(b,ce([],W(px(J)),!1))})}var I=vx(e,[R,$],[k,A],m,x),E=I.boundMap,S=I.innerBoundMap;L&&vx(e,[P.left,P.right],[P.top,P.bottom],m,x,c.externalBounds);var M=ce(ce([],W(y),!1),W(b),!1),D=M.filter(function(H){return H.element&&!H.gapRects}),N=M.filter(function(H){return H.gapRects}).sort(function(H,K){return H.gap-K.gap});he(e,"onSnap",{guidelines:M.filter(function(H){var K=H.element;return!K}),elements:D,gaps:N},!0);var z=ai(e,"boundMap",E,function(H){return JSON.stringify(H)},ti()),Y=ai(e,"innerBoundMap",S,function(H){return JSON.stringify(H)},ti());return(E===z||S===Y)&&he(e,"onBound",{bounds:E,innerBounds:S},!0),ce(ce(ce(ce(ce(ce([],W(hk(e,D,[h,p],F,t)),!1),W(pk(e,N,[h,p],F,t)),!1),W(sx(e,"horizontal",b,[o,n],F,t)),!1),W(sx(e,"vertical",y,[o,n],F,t)),!1),W(ax(e,"horizontal",x,h,n,T,0,t)),!1),W(ax(e,"vertical",m,p,o,j,1,t)),!1)},dragStart:function(e,t){e.state.snapRenderInfo={request:t.isRequest,snap:!0,center:!0},Pl(e)},drag:function(e){var t=e.state;Pl(e)||(t.guidelines=sf(e)),t.snapRenderInfo&&(t.snapRenderInfo.render=!0)},pinchStart:function(e){this.unset(e)},dragEnd:function(e){this.unset(e)},dragControlCondition:function(e,t){if(Dk(e,t)||of(e,t))return!0;if(!t.isRequest&&t.inputEvent)return ut(t.inputEvent.target,ye("snap-control"))},dragControlStart:function(e){e.state.snapRenderInfo=null,Pl(e)},dragControl:function(e){this.drag(e)},dragControlEnd:function(e){this.unset(e)},dragGroupStart:function(e,t){this.dragStart(e,t)},dragGroup:function(e){this.drag(e)},dragGroupEnd:function(e){this.unset(e)},dragGroupControlStart:function(e){e.state.snapRenderInfo=null,Pl(e)},dragGroupControl:function(e){this.drag(e)},dragGroupControlEnd:function(e){this.unset(e)},unset:function(e){var t=e.state;t.enableSnap=!1,t.guidelines=[],t.snapRenderInfo=null,t.elementRects=[]}};function Mk(e,t){return[e[0]*t[0],e[1]*t[1]]}function ye(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return JM.apply(void 0,ce([Ld],W(e),!1))}function gx(e){e()}function jk(e){return!e||e==="none"?[1,0,0,1,0,0]:rt(e)?e:Uo(e)}function ga(e,t,r){return ul(t,Un(r,t),e,Un(r.map(function(n){return-n}),t))}function Rk(e,t,r){if(t==="%"){var n=uf(e.ownerSVGElement);return n[r?"width":"height"]/100}return 1}function kk(e){var t=Pk(pf(e,":before"));return t.map(function(r,n){var o=$r(r),i=o.value,a=o.unit;return i*Rk(e,a,n===0)})}function Al(e){return e?e.split(" "):["0","0"]}function Pk(e){return Al(e.transformOrigin)}function mx(e){var t=Bt(e),r=t("transform");if(r&&r!=="none")return r;if("transform"in e){var n=e.transform,o=n.baseVal;if(!o)return"";var i=o.length;if(!i)return"";for(var a=[],s=function(c){var u=o[c].matrix;a.push("matrix(".concat(["a","b","c","d","e","f"].map(function(d){return u[d]}).join(", "),")"))},l=0;l<i;++l)s(l);return a.join(" ")}return""}function ma(e,t,r,n,o){var i,a,s=md(e)||xn(e),l=!1,c,u;if(!e||r)c=e;else{var d=(i=e?.assignedSlot)===null||i===void 0?void 0:i.parentElement,h=e.parentElement;d?(l=!0,u=h,c=d):c=h}for(var p=!1,g=e===t||c===t,v="relative",m=1,x=parseFloat(o?.("zoom"))||1,y=o?.("position");c&&c!==s;){t===c&&(g=!0);var b=Bt(c),w=c.tagName.toLowerCase(),_=mx(c),T=b("willChange"),j=parseFloat(b("zoom"))||1;if(v=b("position"),n&&j!==1){m=j;break}if(!r&&n&&x!==1&&y&&y!=="absolute"||w==="svg"||w==="foreignobject"||v!=="static"||_&&_!=="none"||T==="transform")break;var k=(a=e?.assignedSlot)===null||a===void 0?void 0:a.parentNode,R=c.parentNode;k&&(l=!0,u=R);var A=R;if(A&&A.nodeType===11){c=A.host,p=!0,v=Bt(c)("position");break}c=A,v="relative"}return{offsetZoom:m,hasSlot:l,parentSlotElement:u,isCustomElement:p,isStatic:v==="static",isEnd:g||!c||c===s,offsetParent:c||s}}function Ak(e,t){var r,n=e.tagName.toLowerCase(),o=e.offsetLeft,i=e.offsetTop,a=Bt(e),s=br(o),l=!s,c,u;return!l&&(n!=="svg"||e.ownerSVGElement)?(c=b1?kk(e):Al(a("transformOrigin")).map(function(d){return parseFloat(d)}),u=c.slice(),l=!0,n==="svg"?(o=0,i=0):(r=W(Fk(e,c,e===t&&t.tagName.toLowerCase()==="g"),4),o=r[0],i=r[1],c[0]=r[2],c[1]=r[3])):(c=Al(a("transformOrigin")).map(function(d){return parseFloat(d)}),u=c.slice()),{tagName:n,isSVG:s,hasOffset:l,offset:[o||0,i||0],origin:c,targetOrigin:u}}function xx(e,t){var r=Bt(e),n=Bt(xn(e)),o=n("position");if(!t&&(!o||o==="static"))return[0,0];var i=parseInt(n("marginLeft"),10),a=parseInt(n("marginTop"),10);return r("position")==="absolute"&&((r("top")!=="auto"||r("bottom")!=="auto")&&(a=0),(r("left")!=="auto"||r("right")!=="auto")&&(i=0)),[i,a]}function cf(e){e.forEach(function(t){var r=t.matrix;r&&(t.matrix=Cr(r,3,4))})}function Ok(e){for(var t=e.parentElement,r=!1,n=xn(e);t;){var o=pf(t).transform;if(o&&o!=="none"){r=!0;break}if(t===n)break;t=t.parentElement}return{fixedContainer:t||n,hasTransform:r}}function Ol(e,t){return t===void 0&&(t=e.length>9),"".concat(t?"matrix3d":"matrix","(").concat(l1(e,!t).join(","),")")}function uf(e){var t=e.clientWidth,r=e.clientHeight;if(!e)return{x:0,y:0,width:0,height:0,clientWidth:t,clientHeight:r};var n=e.viewBox,o=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:o.x,y:o.y,width:o.width||t,height:o.height||r,clientWidth:t,clientHeight:r}}function Ik(e,t){var r,n=uf(e),o=n.width,i=n.height,a=n.clientWidth,s=n.clientHeight,l=a/o,c=s/i,u=e.preserveAspectRatio.baseVal,d=u.align,h=u.meetOrSlice,p=[0,0],g=[l,c],v=[0,0];if(d!==1){var m=(d-2)%3,x=Math.floor((d-2)/3);p[0]=o*m/2,p[1]=i*x/2;var y=h===2?Math.max(c,l):Math.min(l,c);g[0]=y,g[1]=y,v[0]=(a-o)/2*m,v[1]=(s-i)/2*x}var b=bd(g,t);return r=W(v,2),b[t*(t-1)]=r[0],b[t*(t-1)+1]=r[1],ga(b,t,p)}function Fk(e,t,r){var n=e.tagName.toLowerCase();if(!e.getBBox||!r&&n==="g")return[0,0,0,0];var o=Bt(e),i=o("transform-box")==="fill-box",a=e.getBBox(),s=uf(e.ownerSVGElement),l=a.x,c=a.y;n==="foreignobject"&&!l&&!c&&(l=parseFloat(e.getAttribute("x"))||0,c=parseFloat(e.getAttribute("y"))||0);var u=l-s.x,d=c-s.y,h=i?t[0]:t[0]-u,p=i?t[1]:t[1]-d;return[u,d,h,p]}function nt(e,t,r){return Nt(e,Vn(t,r),r)}function Xn(e,t,r,n){return[[0,0],[t,0],[0,r],[t,r]].map(function(o){return nt(e,o,n)})}function er(e){var t=e.map(function(c){return c[0]}),r=e.map(function(c){return c[1]}),n=Math.min.apply(Math,ce([],W(t),!1)),o=Math.min.apply(Math,ce([],W(r),!1)),i=Math.max.apply(Math,ce([],W(t),!1)),a=Math.max.apply(Math,ce([],W(r),!1)),s=i-n,l=a-o;return{left:n,top:o,right:i,bottom:a,width:s,height:l}}function yx(e,t,r,n){var o=Xn(e,t,r,n);return er(o)}function Lk(e,t,r,n,o){var i,a=e.target,s=e.origin,l=t.matrix,c=wx(a),u=c.offsetWidth,d=c.offsetHeight,h=r.getBoundingClientRect(),p=[0,0];r===xn(r)&&(p=xx(a,!0));for(var g=a.getBoundingClientRect(),v=g.left-h.left+r.scrollLeft-(r.clientLeft||0)+p[0],m=g.top-h.top+r.scrollTop-(r.clientTop||0)+p[1],x=g.width,y=g.height,b=ul(n,o,l),w=yx(b,u,d,n),_=w.left,T=w.top,j=w.width,k=w.height,R=nt(b,s,n),A=be(R,[_,T]),$=[v+A[0]*x/j,m+A[1]*y/k],F=[0,0],L=0;++L<10;){var P=Sr(o,n);i=W(be(nt(P,$,n),nt(P,R,n)),2),F[0]=i[0],F[1]=i[1];var O=ul(n,o,Un(F,n),l),I=yx(O,u,d,n),E=I.left,S=I.top,M=E-v,D=S-m;if(ae(M)<2&&ae(D)<2)break;$[0]-=M,$[1]-=D}return F.map(function(N){return Math.round(N)})}function Bk(e,t,r){var n=e.length===16,o=n?4:3,i=t.map(function(l){return nt(e,l,o)}),a=r.left,s=r.top;return i.map(function(l){return[l[0]+a,l[1]+s]})}function tr(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function bx(e,t){return tr([t[0]-e[0],t[1]-e[1]])}function xa(e,t,r,n){r===void 0&&(r=1),n===void 0&&(n=ct(e,t));var o=bx(e,t);return{transform:"translateY(-50%) translate(".concat(e[0],"px, ").concat(e[1],"px) rotate(").concat(n,"rad) scaleY(").concat(r,")"),width:"".concat(o,"px")}}function Il(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r.length,i=r.reduce(function(s,l){return s+l[0]},0)/o,a=r.reduce(function(s,l){return s+l[1]},0)/o;return{transform:"translateZ(0px) translate(".concat(i,"px, ").concat(a,"px) rotate(").concat(e,"rad) scale(").concat(t,")")}}function Kn(e,t){var r=e[t];return rt(r)?V(V({},e),r):e}function wx(e){var t=e&&!br(e.offsetWidth),r=0,n=0,o=0,i=0,a=0,s=0,l=0,c=0,u=0,d=0,h=0,p=0,g=1/0,v=1/0,m=1/0,x=1/0,y=0,b=0,w=!1;if(e)if(!t&&e.ownerSVGElement){var _=e.getBBox();w=!0,r=_.width,n=_.height,a=r,s=n,l=r,c=n,o=r,i=n}else{var T=Bt(e),j=e.style,k=T("boxSizing")==="border-box",R=parseFloat(T("borderLeftWidth"))||0,A=parseFloat(T("borderRightWidth"))||0,$=parseFloat(T("borderTopWidth"))||0,F=parseFloat(T("borderBottomWidth"))||0,L=parseFloat(T("paddingLeft"))||0,P=parseFloat(T("paddingRight"))||0,O=parseFloat(T("paddingTop"))||0,I=parseFloat(T("paddingBottom"))||0,E=L+P,S=O+I,M=R+A,D=$+F,N=E+M,z=S+D,Y=T("position"),H=0,K=0;if("clientLeft"in e){var J=null;if(Y==="absolute"){var q=ma(e,xn(e));J=q.offsetParent}else J=e.parentElement;if(J){var Z=Bt(J);H=parseFloat(Z("width")),K=parseFloat(Z("height"))}}u=Math.max(E,We(T("minWidth"),H)||0),d=Math.max(S,We(T("minHeight"),K)||0),g=We(T("maxWidth"),H),v=We(T("maxHeight"),K),isNaN(g)&&(g=1/0),isNaN(v)&&(v=1/0),y=We(j.width,0)||0,b=We(j.height,0)||0,a=parseFloat(T("width"))||0,s=parseFloat(T("height"))||0,l=ae(a-y)<1?ta(u,y||a,g):a,c=ae(s-b)<1?ta(d,b||s,v):s,r=l,n=c,o=l,i=c,k?(m=g,x=v,h=u,p=d,l=r-N,c=n-z):(m=g+N,x=v+z,h=u+N,p=d+z,r=l+N,n=c+z),o=l+E,i=c+S}return{svg:w,offsetWidth:r,offsetHeight:n,clientWidth:o,clientHeight:i,contentWidth:l,contentHeight:c,inlineCSSWidth:y,inlineCSSHeight:b,cssWidth:a,cssHeight:s,minWidth:u,minHeight:d,maxWidth:g,maxHeight:v,minOffsetWidth:h,minOffsetHeight:p,maxOffsetWidth:m,maxOffsetHeight:x}}function Sx(e,t){return ct(t>0?e[0]:e[1],t>0?e[1]:e[0])}function Fl(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Cx(e,t){var r=e===xn(e)||e===md(e),n={clientLeft:e.clientLeft,clientTop:e.clientTop,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,overflow:!1};return r&&(n.clientHeight=Math.max(t.height,n.clientHeight),n.scrollHeight=Math.max(t.height,n.scrollHeight)),n.overflow=Bt(e)("overflow")!=="visible",V(V({},t),n)}function df(e,t,r,n){var o=e.left,i=e.right,a=e.top,s=e.bottom,l=t.top,c=t.left,u={left:c+o,top:l+a,right:c+i,bottom:l+s,width:i-o,height:s-a};return r&&n?Cx(r,u):u}function ya(e,t){var r=0,n=0,o=0,i=0;if(e){var a=e.getBoundingClientRect();r=a.left,n=a.top,o=a.width,i=a.height}var s={left:r,top:n,width:o,height:i,right:r+o,bottom:n+i};return e&&t?Cx(e,s):s}function zk(e){var t=e.props,r=t.groupable,n=t.svgOrigin,o=e.getState(),i=o.offsetWidth,a=o.offsetHeight,s=o.svg,l=o.transformOrigin;return!r&&s&&n?bf(n,i,a):l}function Ex(e,t,r,n){var o;if(e)o=e;else if(t)o=[0,0];else{var i=r.target;o=_x(i,n)}return o}function _x(e,t){if(e){var r=e.getAttribute("data-rotation")||"",n=e.getAttribute("data-direction");if(t.deg=r,!!n){var o=[0,0];return n.indexOf("w")>-1&&(o[0]=-1),n.indexOf("e")>-1&&(o[0]=1),n.indexOf("n")>-1&&(o[1]=-1),n.indexOf("s")>-1&&(o[1]=1),o}}}function ff(e,t){return[Be(t,e[0]),Be(t,e[1]),Be(t,e[2]),Be(t,e[3])]}function rr(e){var t=e.left,r=e.top,n=e.pos1,o=e.pos2,i=e.pos3,a=e.pos4;return ff([n,o,i,a],[t,r])}function hf(e,t){e[t?"controlAbles":"targetAbles"].forEach(function(r){r.unset&&r.unset(e)})}function ni(e,t){var r=t?"controlGesto":"targetGesto",n=e[r];n?.isIdle()===!1&&hf(e,t),n?.unset(),e[r]=null}function Rt(e,t){if(t){var r=Qo(t);r.nextStyle=V(V({},r.nextStyle),e)}return{style:e,cssText:Jt(e).map(function(n){return"".concat(hd(n,"-"),": ").concat(e[n],";")}).join("")}}function Nx(e,t,r){var n=t.afterTransform||t.transform;return V(V({},Rt(V(V(V({},e.style),t.style),{transform:n}),r)),{afterTransform:n,transform:e.transform})}function Re(e,t,r,n){var o=t.datas;o.datas||(o.datas={});var i=V(V({},r),{target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,moveable:e,datas:o.datas,isRequest:t.isRequest,isRequestChild:t.isRequestChild,isFirstDrag:!!t.isFirstDrag,isTrusted:t.isTrusted!==!1,stopAble:function(){o.isEventStart=!1},stopDrag:function(){var a;(a=t.stop)===null||a===void 0||a.call(t)}});return o.isStartEvent?n||(o.lastEvent=i):o.isStartEvent=!0,i}function Wt(e,t,r){var n=t.datas,o="isDrag"in r?r.isDrag:t.isDrag;return n.datas||(n.datas={}),V(V({isDrag:o},r),{moveable:e,target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,lastEvent:n.lastEvent,isDouble:t.isDouble,datas:n.datas,isFirstDrag:!!t.isFirstDrag})}function Ll(e,t,r){e._emitter.on(t,r)}function he(e,t,r,n,o){return e.triggerEvent(t,r,n,o)}function pf(e,t){return Ht(e).getComputedStyle(e,t)}function Bl(e,t,r){var n={},o={};return e.filter(function(i){var a=i.name;if(n[a]||!t.some(function(s){return i[s]}))return!1;if(!r&&i.ableGroup){if(o[i.ableGroup])return!1;o[i.ableGroup]=!0}return n[a]=!0,!0})}function vf(e,t){return e===t||e==null&&t==null}function Dx(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e.length-1,n=0;n<r;++n){var o=e[n];if(!br(o))return o}return e[r]}function Tx(e,t){var r=[],n=[];return e.forEach(function(o,i){var a=t(o,i,e),s=n.indexOf(a),l=r[s]||[];s===-1&&(n.push(a),r.push(l)),l.push(o)}),r}function $k(e,t){var r=[],n={};return e.forEach(function(o,i){var a=t(o,i,e),s=n[a];s||(s=[],n[a]=s,r.push(s)),s.push(o)}),r}function Mx(e){return e.reduce(function(t,r){return t.concat(r)},[])}function oi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.sort(function(r,n){return ae(n)-ae(r)}),e[0]}function ii(e,t,r){return Nt(Sr(e,r),Vn(t,r),r)}function Gk(e,t){var r,n=e.is3d,o=e.rootMatrix,i=n?4:3;return r=W(ii(o,[t.distX,t.distY],i),2),t.distX=r[0],t.distY=r[1],t}function nr(e,t,r,n){if(!r[0]&&!r[1])return t;var o=nt(e,[fx(r[0]||1),0],n),i=nt(e,[0,fx(r[1]||1)],n),a=nt(e,[r[0]/tr(o),r[1]/tr(i)],n);return Be(t,a)}function _r(e,t,r){return r?"".concat(e/t*100,"%"):"".concat(e,"px")}function zl(e){return ae(e)<=Mt?0:e}function gf(e){return function(t){if(!t.isDragging(e))return"";var r=RR(t,e),n=r.deg;return n?ye("view-control-rotation".concat(n)):""}}function mf(e,t){return t===void 0&&(t=[e]),function(r,n){if(n.isRequest)return t.some(function(i){return n.requestAble===i})?n.parentDirection:!1;var o=n.inputEvent.target;return ut(o,ye("direction"))&&(!e||ut(o,ye(e)))}}function Vk(e,t,r){var n,o=Wo(e,{"x%":function(_){return _/100*t.offsetWidth},"y%":function(_){return _/100*t.offsetHeight}}),i=e.slice(0,r<0?void 0:r),a=e.slice(0,r<0?void 0:r+1),s=e[r]||"",l=r<0?[]:e.slice(r),c=r<0?[]:e.slice(r+1),u=o.slice(0,r<0?void 0:r),d=o.slice(0,r<0?void 0:r+1),h=(n=o[r])!==null&&n!==void 0?n:Wo([""])[0],p=r<0?[]:o.slice(r),g=r<0?[]:o.slice(r+1),v=h?[h]:[],m=Ho(u),x=Ho(d),y=Ho(p),b=Ho(g),w=Ye(m,y,4);return{transforms:e,beforeFunctionMatrix:m,beforeFunctionMatrix2:x,targetFunctionMatrix:Ho(v),afterFunctionMatrix:y,afterFunctionMatrix2:b,allFunctionMatrix:w,beforeFunctions:u,beforeFunctions2:d,targetFunction:v[0],afterFunctions:p,afterFunctions2:g,beforeFunctionTexts:i,beforeFunctionTexts2:a,targetFunctionText:s,afterFunctionTexts:l,afterFunctionTexts2:c}}function Uk(e){return!e||!rt(e)||na(e)?!1:$e(e)||"length"in e}function Hr(e,t){return e?na(e)?e:et(e)?t?document.querySelector(e):e:It(e)?e():i1(e)?e:"current"in e?e.current:e:null}function xf(e,t){if(!e)return[];var r=Uk(e)?[].slice.call(e):[e];return r.reduce(function(n,o){return et(o)&&t?ce(ce([],W(n),!1),W([].slice.call(document.querySelectorAll(o))),!1):($e(o)?n.push(xf(o,t)):n.push(Hr(o,t)),n)},[])}function Hk(e,t,r){var n=ct(e,t)/Math.PI*180;return n=r>=0?n:180-n,n=n>=0?n:360+n,n}function jx(e,t){var r=e.rootMatrix,n=e.is3d,o=n?4:3,i=Sr(r,o);return n||(i=Cr(i,3,4)),i[12]=0,i[13]=0,i[14]=0,fl(i,t)}function Rx(e,t,r,n,o){var i=W(e,2),a=i[0],s=i[1],l=0,c=0;if(o&&a&&s){var u=ct([0,0],t),d=ct([0,0],n),h=tr(t),p=Math.cos(u-d)*h;if(!n[0])c=p,l=c*r;else if(!n[1])l=p,c=l/r;else{var g=n[0]*a,v=n[1]*s,m=Math.atan2(g+t[0],v+t[1]),x=Math.atan2(g,v);m<0&&(m+=Math.PI*2),x<0&&(x+=Math.PI*2);var y=0;ae(m-x)<Math.PI/2||ae(m-x)>Math.PI/2*3||(x+=Math.PI),y=m-x,y>Math.PI*2?y-=Math.PI*2:y>Math.PI?y=2*Math.PI-y:y<-Math.PI&&(y=-2*Math.PI-y);var b=tr([g+t[0],v+t[1]])*Math.cos(y);l=b*Math.sin(x)-g,c=b*Math.cos(x)-v,n[0]<0&&(l*=-1),n[1]<0&&(c*=-1)}}else l=n[0]*t[0],c=n[1]*t[1];return[l,c]}function kx(e,t,r,n){var o,i=r.ratio,a=r.startOffsetWidth,s=r.startOffsetHeight,l=0,c=0,u=n.distX,d=n.distY,h=n.pinchScale,p=n.parentDistance,g=n.parentDist,v=n.parentScale,m=r.fixedDirection,x=[0,1].map(function(j){return ae(e[j]-m[j])}),y=[0,1].map(function(j){var k=x[j];return k!==0&&(k=2/k),k});if(g)l=g[0],c=g[1],t&&(l?c||(c=l/i):l=c*i);else if(Zi(h))l=(h-1)*a,c=(h-1)*s;else if(v)l=(v[0]-1)*a,c=(v[1]-1)*s;else if(p){var b=a*x[0],w=s*x[1],_=tr([b,w]);l=p/_*b*y[0],c=p/_*w*y[1]}else{var T=Ur({datas:r,distX:u,distY:d});T=y.map(function(j,k){return T[k]*j}),o=W(Rx([a,s],T,i,e,t),2),l=o[0],c=o[1]}return{distWidth:l,distHeight:c}}function yf(e,t){if(t){if(e==="left")return{x:"0%",y:"50%"};if(e==="top")return{x:"50%",y:"50%"};if(e==="center")return{x:"50%",y:"50%"};if(e==="right")return{x:"100%",y:"50%"};if(e==="bottom")return{x:"50%",y:"100%"};var r=W(e.split(" "),2),n=r[0],o=r[1],i=yf(n||""),a=yf(o||""),s=V(V({},i),a),l={x:"50%",y:"50%"};return s.x&&(l.x=s.x),s.y&&(l.y=s.y),s.value&&(s.x&&!s.y&&(l.y=s.value),!s.x&&s.y&&(l.x=s.value)),l}return e==="left"?{x:"0%"}:e==="right"?{x:"100%"}:e==="top"?{y:"0%"}:e==="bottom"?{y:"100%"}:e?e==="center"?{value:"50%"}:{value:e}:{}}function bf(e,t,r){var n=yf(e,!0),o=n.x,i=n.y;return[We(o,t)||0,We(i,r)||0]}function Wk(e,t,r){var n=e.map(function(i){return be(i,t)}),o=n.map(function(i){return oa(i,r)});return{prev:n,next:o,result:o.map(function(i){return Be(i,t)})}}function Px(e,t){return e.length===t.length&&e.every(function(r,n){var o=t[n],i=$e(r),a=$e(o);return i&&a?Px(r,o):!i&&!a?r===o:!1})}function ai(e,t,r,n,o){var i=e._store,a=i[t];if(!(t in i))if(o!=null)i[t]=o,a=o;else return i[t]=r,r;return a===r||n(a)===n(r)?a:(i[t]=r,r)}function kt(e){return e>=0?1:-1}function ae(e){return Math.abs(e)}function wf(e,t){return uj(e).map(function(r){return t(r)})}function Ax(e){return Zi(e)?{top:e,left:e,right:e,bottom:e}:{left:e.left||0,top:e.top||0,right:e.right||0,bottom:e.bottom||0}}var Yk=ua("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(e,t){var r=t.datas,n=t.targets,o=t.angle,i=t.originalDatas,a=e.props,s=a.pinchable,l=a.ables;if(!s)return!1;var c="onPinch".concat(n?"Group":"","Start"),u="drag".concat(n?"Group":"","ControlStart"),d=(s===!0?e.controlAbles:l.filter(function(v){return s.indexOf(v.name)>-1})).filter(function(v){return v.canPinch&&v[u]}),h=Re(e,t,{});n&&(h.targets=n);var p=he(e,c,h);r.isPinch=p!==!1,r.ables=d;var g=r.isPinch;return g?(d.forEach(function(v){if(i[v.name]=i[v.name]||{},!!v[u]){var m=V(V({},t),{datas:i[v.name],parentRotate:o,isPinch:!0});v[u](e,m)}}),e.state.snapRenderInfo={request:t.isRequest,direction:[0,0]},g):!1},pinch:function(e,t){var r=t.datas,n=t.scale,o=t.distance,i=t.originalDatas,a=t.inputEvent,s=t.targets,l=t.angle;if(r.isPinch){var c=o*(1-1/n),u=Re(e,t,{});s&&(u.targets=s);var d="onPinch".concat(s?"Group":"");he(e,d,u);var h=r.ables,p="drag".concat(s?"Group":"","Control");return h.forEach(function(g){g[p]&&g[p](e,V(V({},t),{datas:i[g.name],inputEvent:a,resolveMatrix:!0,pinchScale:n,parentDistance:c,parentRotate:l,isPinch:!0}))}),u}},pinchEnd:function(e,t){var r=t.datas,n=t.isPinch,o=t.inputEvent,i=t.targets,a=t.originalDatas;if(r.isPinch){var s="onPinch".concat(i?"Group":"","End"),l=Wt(e,t,{isDrag:n});i&&(l.targets=i),he(e,s,l);var c=r.ables,u="drag".concat(i?"Group":"","ControlEnd");return c.forEach(function(d){d[u]&&d[u](e,V(V({},t),{isDrag:n,datas:a[d.name],inputEvent:o,isPinch:!0}))}),n}},pinchGroupStart:function(e,t){return this.pinchStart(e,V(V({},t),{targets:e.props.targets}))},pinchGroup:function(e,t){return this.pinch(e,V(V({},t),{targets:e.props.targets}))},pinchGroupEnd:function(e,t){return this.pinchEnd(e,V(V({},t),{targets:e.props.targets}))}}),Ox=mf("scalable"),qk={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:O1("scalable"),dragControlCondition:Ox,viewClassName:gf("scalable"),dragControlStart:function(e,t){var r=t.datas,n=t.isPinch,o=t.inputEvent,i=t.parentDirection,a=Ex(i,n,o,r),s=e.state,l=s.width,c=s.height,u=s.targetTransform,d=s.target,h=s.pos1,p=s.pos2,g=s.pos4;if(!a||!d)return!1;n||Wn(e,t),r.datas={},r.transform=u,r.prevDist=[1,1],r.direction=a,r.startOffsetWidth=l,r.startOffsetHeight=c,r.startValue=[1,1];var v=!a[0]&&!a[1]||a[0]||!a[1];Sl(e,t,"scale"),r.isWidth=v;function m(T){r.ratio=T&&isFinite(T)?T:0}r.startPositions=rr(e.state);function x(T){var j=rx(r.startPositions,T);r.fixedDirection=j.fixedDirection,r.fixedPosition=j.fixedPosition,r.fixedOffset=j.fixedOffset}r.setFixedDirection=x,m(Vr(h,p)/Vr(p,g)),x([-a[0],-a[1]]);var y=function(T){r.minScaleSize=T},b=function(T){r.maxScaleSize=T};y([-1/0,-1/0]),b([1/0,1/0]);var w=Re(e,t,V(V({direction:a,set:function(T){r.startValue=T},setRatio:m,setFixedDirection:x,setMinScaleSize:y,setMaxScaleSize:b},wl(e,t)),{dragStart:jt.dragStart(e,new Ko().dragStart([0,0],t))})),_=he(e,"onScaleStart",w);return r.startFixedDirection=r.fixedDirection,_!==!1&&(r.isScale=!0,e.state.snapRenderInfo={request:t.isRequest,direction:a}),r.isScale?w:!1},dragControl:function(e,t){yl(e,t,"scale");var r=t.datas,n=t.parentKeepRatio,o=t.parentFlag,i=t.isPinch,a=t.dragClient,s=t.isRequest,l=t.useSnap,c=t.resolveMatrix,u=r.prevDist,d=r.direction,h=r.startOffsetWidth,p=r.startOffsetHeight,g=r.isScale,v=r.startValue,m=r.isWidth,x=r.ratio;if(!g)return!1;var y=e.props,b=y.throttleScale,w=y.parentMoveable,_=d;!d[0]&&!d[1]&&(_=[1,1]);var T=x&&(n??y.keepRatio)||!1,j=e.state,k=[v[0],v[1]];function R(){var re=kx(_,T,r,t),G=re.distWidth,te=re.distHeight,U=h?(h+G)/h:1,ee=p?(p+te)/p:1;v[0]||(k[0]=G/h),v[1]||(k[1]=te/p);var ne=(_[0]||T?U:1)*k[0],le=(_[1]||T?ee:1)*k[1];return ne===0&&(ne=kt(u[0])*xl),le===0&&(le=kt(u[1])*xl),[ne,le]}var A=R();if(!i&&e.props.groupable){var $=j.snapRenderInfo||{},F=$.direction;$e(F)&&(F[0]||F[1])&&(j.snapRenderInfo={direction:d,request:t.isRequest})}he(e,"onBeforeScale",Re(e,t,{scale:A,setFixedDirection:function(re){return r.setFixedDirection(re),A=R(),A},startFixedDirection:r.startFixedDirection,setScale:function(re){A=re}},!0));var L=[A[0]/k[0],A[1]/k[1]],P=a,O=[0,0],I=kt(L[0]*L[1]),E=!a&&!o&&i;if(E||c?P=Hd(e,r.targetAllTransform,[0,0],[0,0],r):a||(P=r.fixedPosition),i||(O=_k(e,L,d,!l&&s,r)),T){_[0]&&_[1]&&O[0]&&O[1]&&(Math.abs(O[0]*h)>Math.abs(O[1]*p)?O[1]=0:O[0]=0);var S=!O[0]&&!O[1];if(S&&(m?L[0]=Ne(L[0]*k[0],b)/k[0]:L[1]=Ne(L[1]*k[1],b)/k[1]),_[0]&&!_[1]||O[0]&&!O[1]||S&&m){L[0]+=O[0];var M=h*L[0]*k[0]/x;L[1]=kt(I*L[0])*ae(M/p/k[1])}else if(!_[0]&&_[1]||!O[0]&&O[1]||S&&!m){L[1]+=O[1];var D=p*L[1]*k[1]*x;L[0]=kt(I*L[1])*ae(D/h/k[0])}}else L[0]+=O[0],L[1]+=O[1],O[0]||(L[0]=Ne(L[0]*k[0],b)/k[0]),O[1]||(L[1]=Ne(L[1]*k[1],b)/k[1]);L[0]===0&&(L[0]=kt(u[0])*xl),L[1]===0&&(L[1]=kt(u[1])*xl),A=Mk(L,[k[0],k[1]]);var N=[h,p],z=[h*A[0],p*A[1]];z=vd(z,r.minScaleSize,r.maxScaleSize,T?x:!1),A=wf(2,function(re){return N[re]?z[re]/N[re]:z[re]}),L=wf(2,function(re){return A[re]/k[re]});var Y=wf(2,function(re){return u[re]?L[re]/u[re]:L[re]}),H="scale(".concat(L.join(", "),")"),K="scale(".concat(A.join(", "),")"),J=bl(r,K,H),q=!v[0]||!v[1],Z=_R(e,q?K:H,r.fixedDirection,P,r.fixedOffset,r,q),oe=E?Z:be(Z,r.prevInverseDist||[0,0]);if(r.prevDist=L,r.prevInverseDist=Z,A[0]===u[0]&&A[1]===u[1]&&oe.every(function(re){return!re})&&!w&&!E)return!1;var ie=Re(e,t,V({offsetWidth:h,offsetHeight:p,direction:d,scale:A,dist:L,delta:Y,isPinch:!!i},M1(e,J,oe,i,t)));return he(e,"onScale",ie),ie},dragControlEnd:function(e,t){var r=t.datas;if(!r.isScale)return!1;r.isScale=!1;var n=Wt(e,t,{});return he(e,"onScaleEnd",n),n},dragGroupControlCondition:Ox,dragGroupControlStart:function(e,t){var r=t.datas,n=this.dragControlStart(e,t);if(!n)return!1;var o=Er(e,"resizable",t);r.moveableScale=e.scale;var i=Jr(e,this,"dragControlStart",t,function(c,u){return Nl(e,c,r,u)}),a=function(c){n.setFixedDirection(c),i.forEach(function(u,d){u.setFixedDirection(c),Nl(e,u.moveable,r,o[d])})};r.setFixedDirection=a;var s=V(V({},n),{targets:e.props.targets,events:i,setFixedDirection:a}),l=he(e,"onScaleGroupStart",s);return r.isScale=l!==!1,r.isScale?s:!1},dragGroupControl:function(e,t){var r=t.datas;if(r.isScale){Ll(e,"onBeforeScale",function(u){he(e,"onBeforeScaleGroup",Re(e,t,V(V({},u),{targets:e.props.targets}),!0))});var n=this.dragControl(e,t);if(n){var o=n.dist,i=r.moveableScale;e.scale=[o[0]*i[0],o[1]*i[1]];var a=e.props.keepRatio,s=r.fixedPosition,l=Jr(e,this,"dragControl",t,function(u,d){var h=W(Nt(ia(e.rotation/180*Math.PI,3),[d.datas.originalX*o[0],d.datas.originalY*o[1],1],3),2),p=h[0],g=h[1];return V(V({},d),{parentDist:null,parentScale:o,parentKeepRatio:a,dragClient:Be(s,[p,g])})}),c=V({targets:e.props.targets,events:l},n);return he(e,"onScaleGroup",c),c}}},dragGroupControlEnd:function(e,t){var r=t.isDrag,n=t.datas;if(n.isScale){this.dragControlEnd(e,t);var o=Jr(e,this,"dragControlEnd",t),i=Wt(e,t,{targets:e.props.targets,events:o});return he(e,"onScaleGroupEnd",i),r}},request:function(){var e={},t=0,r=0,n=!1;return{isControl:!0,requestStart:function(o){return n=o.useSnap,{datas:e,parentDirection:o.direction||[1,1],useSnap:n}},request:function(o){return t+=o.deltaWidth,r+=o.deltaHeight,{datas:e,parentDist:[t,r],parentKeepRatio:o.keepRatio,useSnap:n}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:n}}}}};function En(e,t){return e.map(function(r,n){return $o(r,t[n],1,2)})}function Ix(e,t,r){var n=ct(e,t),o=ct(e,r),i=o-n;return i>=0?i:i+2*Math.PI}function Xk(e,t){var r=Ix(e[0],e[1],e[2]),n=Ix(t[0],t[1],t[2]),o=Math.PI;return!(r>=o&&n<=o||r<=o&&n>=o)}var Kk={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:gf("warpable"),render:function(e,t){var r=e.props,n=r.resizable,o=r.scalable,i=r.warpable,a=r.zoom;if(n||o||!i)return[];var s=e.state,l=s.pos1,c=s.pos2,u=s.pos3,d=s.pos4,h=En(l,c),p=En(c,l),g=En(l,u),v=En(u,l),m=En(u,d),x=En(d,u),y=En(c,d),b=En(d,c);return ce([t.createElement("div",{className:ye("line"),key:"middeLine1",style:xa(h,m,a)}),t.createElement("div",{className:ye("line"),key:"middeLine2",style:xa(p,x,a)}),t.createElement("div",{className:ye("line"),key:"middeLine3",style:xa(g,y,a)}),t.createElement("div",{className:ye("line"),key:"middeLine4",style:xa(v,b,a)})],W(I1(e,"warpable",t)),!1)},dragControlCondition:function(e,t){if(t.isRequest)return!1;var r=t.inputEvent.target;return ut(r,ye("direction"))&&ut(r,ye("warpable"))},dragControlStart:function(e,t){var r=t.datas,n=t.inputEvent,o=e.props.target,i=n.target,a=_x(i,r);if(!a||!o)return!1;var s=e.state,l=s.transformOrigin,c=s.is3d,u=s.targetTransform,d=s.targetMatrix,h=s.width,p=s.height,g=s.left,v=s.top;r.datas={},r.targetTransform=u,r.warpTargetMatrix=c?d:Cr(d,3,4),r.targetInverseMatrix=a1(Sr(r.warpTargetMatrix,4),3,4),r.direction=a,r.left=g,r.top=v,r.poses=[[0,0],[h,0],[0,p],[h,p]].map(function(y){return be(y,l)}),r.nextPoses=r.poses.map(function(y){var b=W(y,2),w=b[0],_=b[1];return Nt(r.warpTargetMatrix,[w,_,0,1],4)}),r.startValue=Ke(4),r.prevMatrix=Ke(4),r.absolutePoses=rr(s),r.posIndexes=T1(a),Wn(e,t),Sl(e,t,"matrix3d"),s.snapRenderInfo={request:t.isRequest,direction:a};var m=Re(e,t,V({set:function(y){r.startValue=y}},wl(e,t))),x=he(e,"onWarpStart",m);return x!==!1&&(r.isWarp=!0),r.isWarp},dragControl:function(e,t){var r=t.datas,n=t.isRequest,o=t.distX,i=t.distY,a=r.targetInverseMatrix,s=r.prevMatrix,l=r.isWarp,c=r.startValue,u=r.poses,d=r.posIndexes,h=r.absolutePoses;if(!l)return!1;if(yl(e,t,"matrix3d"),ri(e,"warpable")){var p=d.map(function(R){return h[R]});p.length>1&&p.push([(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]);var g=Rl(e,n,{horizontal:p.map(function(R){return R[1]+i}),vertical:p.map(function(R){return R[0]+o})}),v=g.horizontal,m=g.vertical;i-=v.offset,o-=m.offset}var x=Ur({datas:r,distX:o,distY:i},!0),y=r.nextPoses.slice();if(d.forEach(function(R){y[R]=Be(y[R],x)}),!pR.every(function(R){return Xk(R.map(function(A){return u[A]}),R.map(function(A){return y[A]}))}))return!1;var b=wd(u[0],u[2],u[1],u[3],y[0],y[2],y[1],y[3]);if(!b.length)return!1;var w=Ye(a,b,4),_=N1(r,w,!0),T=Ye(Sr(s,4),_,4);r.prevMatrix=_;var j=Ye(c,_,4),k=bl(r,"matrix3d(".concat(j.join(", "),")"),"matrix3d(".concat(_.join(", "),")"));return Ud(t,k),he(e,"onWarp",Re(e,t,V({delta:T,matrix:j,dist:_,multiply:Ye,transform:k},Rt({transform:k},t)))),!0},dragControlEnd:function(e,t){var r=t.datas,n=t.isDrag;return r.isWarp?(r.isWarp=!1,he(e,"onWarpEnd",Wt(e,t,{})),n):!1}},Zk=ye("area-pieces"),$l=ye("area-piece"),Fx=ye("avoid"),Qk=ye("view-dragging");function Sf(e){var t=e.areaElement;if(t){var r=e.state,n=r.width,o=r.height;Vo(t,Fx),t.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(o,"px")}}function Lx(e){return e.createElement("div",{key:"area_pieces",className:Zk},e.createElement("div",{className:$l}),e.createElement("div",{className:$l}),e.createElement("div",{className:$l}),e.createElement("div",{className:$l}))}var Bx={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(e,t){var r=e.props,n=r.target,o=r.dragArea,i=r.groupable,a=r.passDragArea,s=e.getState(),l=s.width,c=s.height,u=s.renderPoses,d=a?ye("area","pass"):ye("area");if(i)return[t.createElement("div",{key:"area",ref:mn(e,"areaElement"),className:d}),Lx(t)];if(!n||!o)return[];var h=wd([0,0],[l,0],[0,c],[l,c],u[0],u[1],u[2],u[3]),p=h.length?Ol(h,!0):"none";return[t.createElement("div",{key:"area",ref:mn(e,"areaElement"),className:d,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(c,"px"),transformOrigin:"0 0",transform:p}}),Lx(t)]},dragStart:function(e,t){var r=t.datas,n=t.clientX,o=t.clientY,i=t.inputEvent;if(!i)return!1;r.isDragArea=!1;var a=e.areaElement,s=e.state,l=s.moveableClientRect,c=s.renderPoses,u=s.rootMatrix,d=s.is3d,h=l.left,p=l.top,g=er(c),v=g.left,m=g.top,x=g.width,y=g.height,b=d?4:3,w=W(ii(u,[n-h,o-p],b),2),_=w[0],T=w[1];_-=v,T-=m;var j=[{left:v,top:m,width:x,height:T-10},{left:v,top:m,width:_-10,height:y},{left:v,top:m+T+10,width:x,height:y-T-10},{left:v+_+10,top:m,width:x-_-10,height:y}],k=[].slice.call(a.nextElementSibling.children);j.forEach(function(R,A){k[A].style.cssText="left: ".concat(R.left,"px;top: ").concat(R.top,"px; width: ").concat(R.width,"px; height: ").concat(R.height,"px;")}),ra(a,Fx),s.disableNativeEvent=!0},drag:function(e,t){var r=t.datas,n=t.inputEvent;if(this.enableNativeEvent(e),!n)return!1;r.isDragArea||(r.isDragArea=!0,Sf(e))},dragEnd:function(e,t){this.enableNativeEvent(e);var r=t.inputEvent,n=t.datas;if(!r)return!1;n.isDragArea||Sf(e)},dragGroupStart:function(e,t){return this.dragStart(e,t)},dragGroup:function(e,t){return this.drag(e,t)},dragGroupEnd:function(e,t){return this.dragEnd(e,t)},unset:function(e){Sf(e),e.state.disableNativeEvent=!1},enableNativeEvent:function(e){var t=e.state;t.disableNativeEvent&&ll(function(){t.disableNativeEvent=!1})}},Jk=ua("origin",{props:["origin","svgOrigin"],render:function(e,t){var r=e.props,n=r.zoom,o=r.svgOrigin,i=r.groupable,a=e.getState(),s=a.beforeOrigin,l=a.rotation,c=a.svg,u=a.allMatrix,d=a.is3d,h=a.left,p=a.top,g=a.offsetWidth,v=a.offsetHeight,m;if(!i&&c&&o){var x=W(bf(o,g,v),2),y=x[0],b=x[1],w=d?4:3,_=nt(u,[y,b],w);m=Il(l,n,be(_,[h,p]))}else m=Il(l,n,s);return[t.createElement("div",{className:ye("control","origin"),style:m,key:"beforeOrigin"})]}});function e3(e){var t=e.scrollContainer;return[t.scrollLeft,t.scrollTop]}var t3={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(e,t){var r=e.props,n=r.scrollContainer,o=n===void 0?e.getContainer():n,i=r.scrollOptions,a=new f1,s=Hr(o,!0);t.datas.dragScroll=a,e.state.dragScroll=a;var l=t.isControl?"controlGesto":"targetGesto",c=t.targets;a.on("scroll",function(u){var d=u.container,h=u.direction,p=Re(e,t,{scrollContainer:d,direction:h}),g=c?"onScrollGroup":"onScroll";c&&(p.targets=c),he(e,g,p)}).on("move",function(u){var d=u.offsetX,h=u.offsetY,p=u.inputEvent;e[l].scrollBy(d,h,p.inputEvent,!1)}).on("scrollDrag",function(u){var d=u.next;d(e[l].getCurrentEvent())}),a.dragStart(t,V({container:s},i))},checkScroll:function(e,t){var r=t.datas.dragScroll;if(r){var n=e.props,o=n.scrollContainer,i=o===void 0?e.getContainer():o,a=n.scrollThreshold,s=a===void 0?0:a,l=n.scrollThrottleTime,c=l===void 0?0:l,u=n.getScrollPosition,d=u===void 0?e3:u,h=n.scrollOptions;return r.drag(t,V({container:i,threshold:s,throttleTime:c,getScrollPosition:function(p){return d({scrollContainer:p.container,direction:p.direction})}},h)),!0}},drag:function(e,t){return this.checkScroll(e,t)},dragEnd:function(e,t){t.datas.dragScroll.dragEnd(),t.datas.dragScroll=null},dragControlStart:function(e,t){return this.dragStart(e,V(V({},t),{isControl:!0}))},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupStart:function(e,t){return this.dragStart(e,V(V({},t),{targets:e.props.targets}))},dragGroup:function(e,t){return this.drag(e,V(V({},t),{targets:e.props.targets}))},dragGroupEnd:function(e,t){return this.dragEnd(e,V(V({},t),{targets:e.props.targets}))},dragGroupControlStart:function(e,t){return this.dragStart(e,V(V({},t),{targets:e.props.targets,isControl:!0}))},dragGroupControl:function(e,t){return this.drag(e,V(V({},t),{targets:e.props.targets}))},dragGroupControEnd:function(e,t){return this.dragEnd(e,V(V({},t),{targets:e.props.targets}))},unset:function(e){var t,r=e.state;(t=r.dragScroll)===null||t===void 0||t.dragEnd(),r.dragScroll=null}},zx={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},r3=ua("padding",{props:["padding"],render:function(e,t){var r=e.props;if(r.dragArea)return[];var n=Ax(r.padding||{}),o=n.left,i=n.top,a=n.right,s=n.bottom,l=e.getState(),c=l.renderPoses,u=l.pos1,d=l.pos2,h=l.pos3,p=l.pos4,g=[u,d,h,p],v=[];return o>0&&v.push([0,2]),i>0&&v.push([0,1]),a>0&&v.push([1,3]),s>0&&v.push([2,3]),v.map(function(m,x){var y=W(m,2),b=y[0],w=y[1],_=g[b],T=g[w],j=c[b],k=c[w],R=wd([0,0],[100,0],[0,100],[100,100],_,T,j,k);if(R.length)return t.createElement("div",{key:"padding".concat(x),className:ye("padding"),style:{transform:Ol(R,!0)}})})}}),$x=["nw","ne","se","sw"];function Gl(e,t){var r=e[0]+e[1],n=r>t?t/r:1;return e[0]*=n,e[1]=t-e[1]*n,e}var n3=[1,2,5,6],o3=[0,3,4,7],Zn=[1,-1,-1,1],Qn=[1,1,-1,-1];function Cf(e,t,r,n,o,i,a,s){o===void 0&&(o=0),i===void 0&&(i=0),a===void 0&&(a=r),s===void 0&&(s=n);var l=[],c=!1,u=e.filter(function(h){return!h.virtual}),d=u.map(function(h){var p=h.horizontal,g=h.vertical,v=h.pos;if(g&&!c&&(c=!0,l.push("/")),c){var m=Math.max(0,g===1?v[1]-i:s-v[1]);return l.push(_r(m,n,t)),m}else{var m=Math.max(0,p===1?v[0]-o:a-v[0]);return l.push(_r(m,r,t)),m}});return{radiusPoses:u,styles:l,raws:d}}function Gx(e){for(var t=[0,0],r=[0,0],n=e.length,o=0;o<n;++o){var i=e[o];i.sub&&(i.horizontal&&(t[1]===0&&(t[0]=o),t[1]=o-t[0]+1,r[0]=o+1),i.vertical&&(r[1]===0&&(r[0]=o),r[1]=o-r[0]+1))}return{horizontalRange:t,verticalRange:r}}function Vx(e,t,r,n,o,i,a){var s,l,c,u;i===void 0&&(i=[0,0]),a===void 0&&(a=!1);var d=e.indexOf("/"),h=(d>-1?e.slice(0,d):e).length,p=e.slice(0,h),g=e.slice(h+1),v=p.length,m=g.length,x=m>0,y=W(p,4),b=y[0],w=b===void 0?"0px":b,_=y[1],T=_===void 0?w:_,j=y[2],k=j===void 0?w:j,R=y[3],A=R===void 0?T:R,$=W(g,4),F=$[0],L=F===void 0?w:F,P=$[1],O=P===void 0?x?L:T:P,I=$[2],E=I===void 0?x?L:k:I,S=$[3],M=S===void 0?x?O:A:S,D=[w,T,k,A].map(function(J){return We(J,t)}),N=[L,O,E,M].map(function(J){return We(J,r)}),z=D.slice(),Y=N.slice();s=W(Gl([z[0],z[1]],t),2),z[0]=s[0],z[1]=s[1],l=W(Gl([z[3],z[2]],t),2),z[3]=l[0],z[2]=l[1],c=W(Gl([Y[0],Y[3]],r),2),Y[0]=c[0],Y[3]=c[1],u=W(Gl([Y[1],Y[2]],r),2),Y[1]=u[0],Y[2]=u[1];var H=a?z:z.slice(0,Math.max(i[0],v)),K=a?Y:Y.slice(0,Math.max(i[1],m));return ce(ce([],W(H.map(function(J,q){var Z=$x[q];return{virtual:q>=v,horizontal:Zn[q],vertical:0,pos:[n+J,o+(Qn[q]===-1?r:0)],sub:!0,raw:D[q],direction:Z}})),!1),W(K.map(function(J,q){var Z=$x[q];return{virtual:q>=m,horizontal:0,vertical:Qn[q],pos:[n+(Zn[q]===-1?t:0),o+J],sub:!0,raw:N[q],direction:Z}})),!1)}function i3(e,t,r,n,o){o===void 0&&(o=t.length);var i=Gx(e.slice(n)),a=i.horizontalRange,s=i.verticalRange,l=r-n,c=0;if(l===0)c=o;else if(l>0&&l<a[1])c=a[1]-l;else if(l>=s[0])c=s[0]+s[1]-l;else return;e.splice(r,c),t.splice(r,c)}function a3(e,t,r,n,o,i,a,s,l,c,u){c===void 0&&(c=0),u===void 0&&(u=0);var d=Gx(e.slice(r)),h=d.horizontalRange,p=d.verticalRange;if(n>-1)for(var g=Zn[n]===1?i-c:s-i,v=h[1];v<=n;++v){var m=Qn[v]===1?u:l,x=0;if(n===v?x=i:v===0?x=c+g:Zn[v]===-1&&(x=s-(t[r][0]-c)),e.splice(r+v,0,{horizontal:Zn[v],vertical:0,pos:[x,m]}),t.splice(r+v,0,[x,m]),v===0)break}else if(o>-1){var y=Qn[o]===1?a-u:l-a;if(h[1]===0&&p[1]===0){var b=[c+y,u];e.push({horizontal:Zn[0],vertical:0,pos:b}),t.push(b)}for(var w=p[0],v=p[1];v<=o;++v){var x=Zn[v]===1?c:s,m=0;if(o===v?m=a:v===0?m=u+y:Qn[v]===1?m=t[r+w][1]:Qn[v]===-1&&(m=l-(t[r+w][1]-u)),e.push({horizontal:0,vertical:Qn[v],pos:[x,m]}),t.push([x,m]),v===0)break}}}function s3(e,t){t===void 0&&(t=e.map(function(o){return o.raw}));var r=e.map(function(o,i){return o.horizontal?t[i]:null}).filter(function(o){return o!=null}),n=e.map(function(o,i){return o.vertical?t[i]:null}).filter(function(o){return o!=null});return{horizontals:r,verticals:n}}var l3=[[0,-1,"n"],[1,0,"e"]],c3=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Ef(e,t,r){var n=e.props.clipRelative,o=e.state,i=o.width,a=o.height,s=t,l=s.type,c=s.poses,u=l==="rect",d=l==="circle";if(l==="polygon")return r.map(function(T){return"".concat(_r(T[0],i,n)," ").concat(_r(T[1],a,n))});if(u||l==="inset"){var h=r[1][1],p=r[3][0],g=r[7][0],v=r[5][1];if(u)return[h,p,v,g].map(function(T){return"".concat(T,"px")});var m=[h,i-p,a-v,g].map(function(T,j){return _r(T,j%2?i:a,n)});if(r.length>8){var x=W(be(r[4],r[0]),2),y=x[0],b=x[1];m.push.apply(m,ce(["round"],W(Cf(c.slice(8).map(function(T,j){return V(V({},T),{pos:r[j]})}),n,y,b,g,h,p,v).styles),!1))}return m}else if(d||l==="ellipse"){var w=r[0],_=_r(ae(r[1][1]-w[1]),d?Math.sqrt((i*i+a*a)/2):a,n),m=d?[_]:[_r(ae(r[2][0]-w[0]),i,n),_];return m.push("at",_r(w[0],i,n),_r(w[1],a,n)),m}}function Vl(e,t,r,n){var o=[n,(n+t)/2,t],i=[e,(e+r)/2,r];return c3.map(function(a){var s=W(a,3),l=s[0],c=s[1],u=s[2],d=o[l+1],h=i[c+1];return{vertical:ae(c),horizontal:ae(l),direction:u,pos:[d,h]}})}function Ux(e){var t=[1/0,-1/0],r=[1/0,-1/0];return e.forEach(function(n){var o=n.pos;t[0]=Math.min(t[0],o[0]),t[1]=Math.max(t[1],o[0]),r[0]=Math.min(r[0],o[1]),r[1]=Math.max(r[1],o[1])}),[ae(t[1]-t[0]),ae(r[1]-r[0])]}function Hx(e,t,r,n,o){var i,a,s,l,c,u,d,h,p;if(e){var g=o;if(!g){var v=Bt(e),m=v("clipPath");g=m!=="none"?m:v("clip")}if(!((!g||g==="none"||g==="auto")&&(g=n,!g))){var x=sl(g),y=x.prefix,b=y===void 0?g:y,w=x.value,_=w===void 0?"":w,T=b==="circle",j=" ";if(b==="polygon"){var k=Qt(_||"0% 0%, 100% 0%, 100% 100%, 0% 100%");j=",";var R=k.map(function(Se){var De=W(Se.split(" "),2),Fe=De[0],Me=De[1];return{vertical:1,horizontal:1,pos:[We(Fe,t),We(Me,r)]}}),A=Hn(R.map(function(Se){return Se.pos}));return{type:b,clipText:g,poses:R,splitter:j,left:A.minX,right:A.maxX,top:A.minY,bottom:A.maxY}}else if(T||b==="ellipse"){var $="",F="",L=0,P=0,k=Qr(_);if(T){var O="";i=W(k,4),a=i[0],O=a===void 0?"50%":a,s=i[2],$=s===void 0?"50%":s,l=i[3],F=l===void 0?"50%":l,L=We(O,Math.sqrt((t*t+r*r)/2)),P=L}else{var I="",E="";c=W(k,5),u=c[0],I=u===void 0?"50%":u,d=c[1],E=d===void 0?"50%":d,h=c[3],$=h===void 0?"50%":h,p=c[4],F=p===void 0?"50%":p,L=We(I,t),P=We(E,r)}var S=[We($,t),We(F,r)],R=ce([{vertical:1,horizontal:1,pos:S,direction:"nesw"}],W(l3.slice(0,T?1:2).map(function(Fe){return{vertical:ae(Fe[1]),horizontal:Fe[0],direction:Fe[2],sub:!0,pos:[S[0]+Fe[0]*L,S[1]+Fe[1]*P]}})),!1);return{type:b,clipText:g,radiusX:L,radiusY:P,left:S[0]-L,top:S[1]-P,right:S[0]+L,bottom:S[1]+P,poses:R,splitter:j}}else if(b==="inset"){var k=Qr(_||"0 0 0 0"),M=k.indexOf("round"),D=(M>-1?k.slice(0,M):k).length,N=k.slice(D+1),z=W(k.slice(0,D),4),Y=z[0],H=z[1],K=H===void 0?Y:H,J=z[2],q=J===void 0?Y:J,Z=z[3],oe=Z===void 0?K:Z,ie=W([Y,q].map(function(Fe){return We(Fe,r)}),2),re=ie[0],G=ie[1],te=W([oe,K].map(function(Fe){return We(Fe,t)}),2),U=te[0],ee=te[1],ne=t-ee,le=r-G,fe=Vx(N,ne-U,le-re,U,re),R=ce(ce([],W(Vl(re,ne,le,U)),!1),W(fe),!1);return{type:"inset",clipText:g,poses:R,top:re,left:U,right:ne,bottom:le,radius:N,splitter:j}}else if(b==="rect"){var k=Qt(_||"0px, ".concat(t,"px, ").concat(r,"px, 0px"));j=",";var ue=W(k.map(function(ke){var me=$r(ke).value;return me}),4),ve=ue[0],ee=ue[1],G=ue[2],U=ue[3],R=Vl(ve,ee,G,U);return{type:"rect",clipText:g,poses:R,top:ve,right:ee,bottom:G,left:U,values:k,splitter:j}}}}}function u3(e,t,r,n,o){var i=e[t],a=i.direction,s=i.sub,l=e.map(function(){return[0,0]}),c=a?a.split(""):[];if(n&&t<8){var u=c.filter(function(L){return L==="w"||L==="e"}),d=c.filter(function(L){return L==="n"||L==="s"}),h=u[0],p=d[0];l[t]=r;var g=W(Ux(e),2),v=g[0],m=g[1],x=v&&m?v/m:0;if(x&&o){var y=(t+4)%8,b=e[y].pos,w=[0,0];a.indexOf("w")>-1?w[0]=-1:a.indexOf("e")>-1&&(w[0]=1),a.indexOf("n")>-1?w[1]=-1:a.indexOf("s")>-1&&(w[1]=1);var _=Rx([v,m],r,x,w,!0),T=v+_[0],j=m+_[1],k=b[1],R=b[1],A=b[0],$=b[0];w[0]===-1?A=$-T:w[0]===1?$=A+T:(A=A-T/2,$=$+T/2),w[1]===-1?k=R-j:(w[1]===1||(k=R-j/2),R=k+j);var F=Vl(k,$,R,A);e.forEach(function(L,P){l[P][0]=F[P].pos[0]-L.pos[0],l[P][1]=F[P].pos[1]-L.pos[1]})}else e.forEach(function(L,P){var O=L.direction;O&&(O.indexOf(h)>-1&&(l[P][0]=r[0]),O.indexOf(p)>-1&&(l[P][1]=r[1]))}),h&&(l[1][0]=r[0]/2,l[5][0]=r[0]/2),p&&(l[3][1]=r[1]/2,l[7][1]=r[1]/2)}else a&&!s?c.forEach(function(L){var P=L==="n"||L==="s";e.forEach(function(O,I){var E=O.direction,S=O.horizontal,M=O.vertical;!E||E.indexOf(L)===-1||(l[I]=[P||!S?0:r[0],!P||!M?0:r[1]])})}):l[t]=r;return l}function d3(e,t){var r=W(_1(e,t),2),n=r[0],o=r[1],i=t.datas,a=i.clipPath,s=i.clipIndex,l=a,c=l.type,u=l.poses,d=l.splitter,h=u.map(function(y){return y.pos});if(c==="polygon")h.splice(s,0,[n,o]);else if(c==="inset"){var p=n3.indexOf(s),g=o3.indexOf(s),v=u.length;if(a3(u,h,8,p,g,n,o,h[4][0],h[4][1],h[0][0],h[0][1]),v===u.length)return}else return;var m=Ef(e,a,h),x="".concat(c,"(").concat(m.join(d),")");he(e,"onClip",Re(e,t,V({clipEventType:"added",clipType:c,poses:h,clipStyles:m,clipStyle:x,distX:0,distY:0},Rt({clipPath:x},t))))}function f3(e,t){var r=t.datas,n=r.clipPath,o=r.clipIndex,i=n,a=i.type,s=i.poses,l=i.splitter,c=s.map(function(p){return p.pos}),u=c.length;if(a==="polygon")s.splice(o,1),c.splice(o,1);else if(a==="inset"){if(o<8||(i3(s,c,o,8,u),u===s.length))return}else return;var d=Ef(e,n,c),h="".concat(a,"(").concat(d.join(l),")");he(e,"onClip",Re(e,t,V({clipEventType:"removed",clipType:a,poses:c,clipStyles:d,clipStyle:h,distX:0,distY:0},Rt({clipPath:h},t))))}var h3={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(e,t){var r=e.props,n=r.customClipPath,o=r.defaultClipPath,i=r.clipArea,a=r.zoom,s=r.groupable,l=e.getState(),c=l.target,u=l.width,d=l.height,h=l.allMatrix,p=l.is3d,g=l.left,v=l.top,m=l.pos1,x=l.pos2,y=l.pos3,b=l.pos4,w=l.clipPathState,_=l.snapBoundInfos,T=l.rotation;if(!c||s)return[];var j=Hx(c,u,d,o||"inset",w||n);if(!j)return[];var k=p?4:3,R=j.type,A=j.poses,$=A.map(function(ee){var ne=nt(h,ee.pos,k);return[ne[0]-g,ne[1]-v]}),F=[],L=[],P=R==="rect",O=R==="inset",I=R==="polygon";if(P||O||I){var E=O?$.slice(0,8):$;L=E.map(function(ee,ne){var le=ne===0?E[E.length-1]:E[ne-1],fe=ct(le,ee),ue=bx(le,ee);return t.createElement("div",{key:"clipLine".concat(ne),className:ye("line","clip-line","snap-control"),"data-clip-index":ne,style:{width:"".concat(ue,"px"),transform:"translate(".concat(le[0],"px, ").concat(le[1],"px) rotate(").concat(fe,"rad) scaleY(").concat(a,")")}})})}if(F=$.map(function(ee,ne){return t.createElement("div",{key:"clipControl".concat(ne),className:ye("control","clip-control","snap-control"),"data-clip-index":ne,style:{transform:"translate(".concat(ee[0],"px, ").concat(ee[1],"px) rotate(").concat(T,"rad) scale(").concat(a,")")}})}),O&&F.push.apply(F,ce([],W($.slice(8).map(function(ee,ne){return t.createElement("div",{key:"clipRadiusControl".concat(ne),className:ye("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+ne,style:{transform:"translate(".concat(ee[0],"px, ").concat(ee[1],"px) rotate(").concat(T,"rad) scale(").concat(a,")")}})})),!1)),R==="circle"||R==="ellipse"){var S=j.left,M=j.top,D=j.radiusX,N=j.radiusY,z=W(be(nt(h,[S,M],k),nt(h,[0,0],k)),2),Y=z[0],H=z[1],K="none";if(!i){for(var J=Math.max(10,D/5,N/5),q=[],Z=0;Z<=J;++Z){var oe=Math.PI*2/J*Z;q.push([D+(D-a)*Math.cos(oe),N+(N-a)*Math.sin(oe)])}q.push([D,-2]),q.push([-2,-2]),q.push([-2,N*2+2]),q.push([D*2+2,N*2+2]),q.push([D*2+2,-2]),q.push([D,-2]),K="polygon(".concat(q.map(function(ee){return"".concat(ee[0],"px ").concat(ee[1],"px")}).join(", "),")")}F.push(t.createElement("div",{key:"clipEllipse",className:ye("clip-ellipse","snap-control"),style:{width:"".concat(D*2,"px"),height:"".concat(N*2,"px"),clipPath:K,transform:"translate(".concat(-g+Y,"px, ").concat(-v+H,"px) ").concat(Ol(h))}}))}if(i){var ie=er(ce([m,x,y,b],W($),!1)),re=ie.width,G=ie.height,te=ie.left,U=ie.top;if(I||P||O){var q=O?$.slice(0,8):$;F.push(t.createElement("div",{key:"clipArea",className:ye("clip-area","snap-control"),style:{width:"".concat(re,"px"),height:"".concat(G,"px"),transform:"translate(".concat(te,"px, ").concat(U,"px)"),clipPath:"polygon(".concat(q.map(function(ne){return"".concat(ne[0]-te,"px ").concat(ne[1]-U,"px")}).join(", "),")")}}))}}return _&&["vertical","horizontal"].forEach(function(ee){var ne=_[ee],le=ee==="horizontal";ne.isSnap&&L.push.apply(L,ce([],W(ne.snap.posInfos.map(function(fe,ue){var ve=fe.pos,Se=be(nt(h,le?[0,ve]:[ve,0],k),[g,v]),De=be(nt(h,le?[u,ve]:[ve,d],k),[g,v]);return ha(t,"",Se,De,a,"clip".concat(ee,"snap").concat(ue),"guideline")})),!1)),ne.isBound&&L.push.apply(L,ce([],W(ne.bounds.map(function(fe,ue){var ve=fe.pos,Se=be(nt(h,le?[0,ve]:[ve,0],k),[g,v]),De=be(nt(h,le?[u,ve]:[ve,d],k),[g,v]);return ha(t,"",Se,De,a,"clip".concat(ee,"bounds").concat(ue),"guideline","bounds","bold")})),!1))}),ce(ce([],W(F),!1),W(L),!1)},dragControlCondition:function(e,t){return t.inputEvent&&(t.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(e,t){var r=e.props,n=r.dragWithClip,o=n===void 0?!0:n;return o?!1:this.dragControlStart(e,t)},drag:function(e,t){return this.dragControl(e,V(V({},t),{isDragTarget:!0}))},dragEnd:function(e,t){return this.dragControlEnd(e,t)},dragControlStart:function(e,t){var r=e.state,n=e.props,o=n.defaultClipPath,i=n.customClipPath,a=r.target,s=r.width,l=r.height,c=t.inputEvent?t.inputEvent.target:null,u=c&&c.getAttribute("class")||"",d=t.datas,h=Hx(a,s,l,o||"inset",i);if(!h)return!1;var p=h.clipText,g=h.type,v=h.poses,m=he(e,"onClipStart",Re(e,t,{clipType:g,clipStyle:p,poses:v.map(function(x){return x.pos})}));return m===!1?(d.isClipStart=!1,!1):(d.isControl=u&&u.indexOf("clip-control")>-1,d.isLine=u.indexOf("clip-line")>-1,d.isArea=u.indexOf("clip-area")>-1||u.indexOf("clip-ellipse")>-1,d.clipIndex=c?parseInt(c.getAttribute("data-clip-index"),10):-1,d.clipPath=h,d.isClipStart=!0,r.clipPathState=p,Wn(e,t),!0)},dragControl:function(e,t){var r,n,o,i=t.datas,a=t.originalDatas,s=t.isDragTarget;if(!i.isClipStart)return!1;var l=i,c=l.isControl,u=l.isLine,d=l.isArea,h=l.clipIndex,p=l.clipPath;if(!p)return!1;var g=Kn(e.props,"clippable"),v=g.keepRatio,m=0,x=0,y=a.draggable,b=Ur(t);s&&y?(r=W(y.prevBeforeDist,2),m=r[0],x=r[1]):(n=W(b,2),m=n[0],x=n[1]);var w=[m,x],_=e.state,T=_.width,j=_.height,k=!d&&!c&&!u,R=p.type,A=p.poses,$=p.splitter,F=A.map(function(He){return He.pos});k&&(m=-m,x=-x);var L=!c||A[h].direction==="nesw",P=R==="inset"||R==="rect",O=A.map(function(){return[0,0]});if(c&&!L){var I=A[h],E=I.horizontal,S=I.vertical,M=[m*ae(E),x*ae(S)];O=u3(A,h,M,P,v)}else L&&(O=F.map(function(){return[m,x]}));var D=F.map(function(He,Ct){return Be(He,O[Ct])}),N=ce([],W(D),!1);_.snapBoundInfos=null;var z=p.type==="circle",Y=p.type==="ellipse";if(z||Y){var H=er(D),K=ae(H.bottom-H.top),J=ae(Y?H.right-H.left:K),q=D[0][1]+K,Z=D[0][0]-J,oe=D[0][0]+J;z&&(N.push([oe,H.bottom]),O.push([1,0])),N.push([H.left,q]),O.push([0,1]),N.push([Z,H.bottom]),O.push([1,0])}var ie=ux((g.clipHorizontalGuidelines||[]).map(function(He){return We("".concat(He),j)}),(g.clipVerticalGuidelines||[]).map(function(He){return We("".concat(He),T)}),T,j),re=[],G=[];if(z||Y)re=[N[4][0],N[2][0]],G=[N[1][1],N[3][1]];else if(P){var te=[N[0],N[2],N[4],N[6]],U=[O[0],O[2],O[4],O[6]];re=te.filter(function(He,Ct){return U[Ct][0]}).map(function(He){return He[0]}),G=te.filter(function(He,Ct){return U[Ct][1]}).map(function(He){return He[1]})}else re=N.filter(function(He,Ct){return O[Ct][0]}).map(function(He){return He[0]}),G=N.filter(function(He,Ct){return O[Ct][1]}).map(function(He){return He[1]});var ee=[0,0],ne=ex(ie,g.clipTargetBounds&&{left:0,top:0,right:T,bottom:j},re,G,5,5),le=ne.horizontal,fe=ne.vertical,ue=le.offset,ve=fe.offset;if(le.isBound&&(ee[1]+=ue),fe.isBound&&(ee[0]+=ve),(Y||z)&&O[0][0]===0&&O[0][1]===0){var H=er(D),Se=H.bottom-H.top,De=Y?H.right-H.left:Se,Fe=fe.isBound?ae(ve):fe.snapIndex===0?-ve:ve,Me=le.isBound?ae(ue):le.snapIndex===0?-ue:ue;De-=Fe,Se-=Me,z&&(Se=q1(fe,le)>0?Se:De,De=Se);var Ce=N[0];N[1][1]=Ce[1]-Se,N[2][0]=Ce[0]+De,N[3][1]=Ce[1]+Se,N[4][0]=Ce[0]-De}else if(P&&v&&c){var ke=W(Ux(A),2),me=ke[0],Ge=ke[1],Qe=me&&Ge?me/Ge:0,we=A[h],it=we.direction||"",at=N[1][1],q=N[5][1],Z=N[7][0],oe=N[3][0];ae(ue)<=ae(ve)?ue=kt(ue)*ae(ve)/Qe:ve=kt(ve)*ae(ue)*Qe,it.indexOf("w")>-1?Z-=ve:it.indexOf("e")>-1?oe-=ve:(Z+=ve/2,oe-=ve/2),it.indexOf("n")>-1?at-=ue:it.indexOf("s")>-1?q-=ue:(at+=ue/2,q-=ue/2);var gt=Vl(at,oe,q,Z);N.forEach(function(xi,so){var lo;lo=W(gt[so].pos,2),xi[0]=lo[0],xi[1]=lo[1]})}else N.forEach(function(He,Ct){var dc=O[Ct];dc[0]&&(He[0]-=ve),dc[1]&&(He[1]-=ue)});var qr=Ef(e,p,D),zt="".concat(R,"(").concat(qr.join($),")");if(_.clipPathState=zt,z||Y)re=[N[4][0],N[2][0]],G=[N[1][1],N[3][1]];else if(P){var te=[N[0],N[2],N[4],N[6]];re=te.map(function(Ct){return Ct[0]}),G=te.map(function(Ct){return Ct[1]})}else re=N.map(function(He){return He[0]}),G=N.map(function(He){return He[1]});if(_.snapBoundInfos=ex(ie,g.clipTargetBounds&&{left:0,top:0,right:T,bottom:j},re,G,1,1),y){var Dt=_.is3d,uc=_.allMatrix,wh=Dt?4:3,Dr=ee;s&&(Dr=[w[0]+ee[0]-b[0],w[1]+ee[1]-b[1]]),y.deltaOffset=Ye(uc,[Dr[0],Dr[1],0,0],wh)}return he(e,"onClip",Re(e,t,V({clipEventType:"changed",clipType:R,poses:D,clipStyle:zt,clipStyles:qr,distX:m,distY:x},Rt((o={},o[R==="rect"?"clip":"clipPath"]=zt,o),t)))),!0},dragControlEnd:function(e,t){this.unset(e);var r=t.isDrag,n=t.datas,o=t.isDouble,i=n.isLine,a=n.isClipStart,s=n.isControl;return a?(he(e,"onClipEnd",Wt(e,t,{})),o&&(s?f3(e,t):i&&d3(e,t)),o||r):!1},unset:function(e){e.state.clipPathState="",e.state.snapBoundInfos=null}},p3={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(e,t){return t.isRequest?t.requestAble==="originDraggable":ut(t.inputEvent.target,ye("origin"))},dragControlStart:function(e,t){var r=t.datas;Wn(e,t);var n=Re(e,t,{dragStart:jt.dragStart(e,new Ko().dragStart([0,0],t))}),o=he(e,"onDragOriginStart",n);return r.startOrigin=e.state.transformOrigin,r.startTargetOrigin=e.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,o===!1?(r.isDragOrigin=!1,!1):n},dragControl:function(e,t){var r=t.datas,n=t.isPinch,o=t.isRequest;if(!r.isDragOrigin)return!1;var i=W(Ur(t),2),a=i[0],s=i[1],l=e.state,c=l.width,u=l.height,d=l.offsetMatrix,h=l.targetMatrix,p=l.is3d,g=e.props.originRelative,v=g===void 0?!0:g,m=p?4:3,x=[a,s];if(o){var y=t.distOrigin;(y[0]||y[1])&&(x=y)}var b=Be(r.startOrigin,x),w=Be(r.startTargetOrigin,x),_=be(x,r.prevOrigin),T=fa(d,h,b,m),j=e.getRect(),k=er(Xn(T,c,u,m)),R=[j.left-k.left,j.top-k.top];r.prevOrigin=x;var A=[_r(w[0],c,v),_r(w[1],u,v)].join(" "),$=jt.drag(e,da(t,e.state,R,!!n)),F=Re(e,t,V(V({width:c,height:u,origin:b,dist:x,delta:_,transformOrigin:A,drag:$},Rt({transformOrigin:A,transform:$.transform},t)),{afterTransform:$.transform}));return he(e,"onDragOrigin",F),F},dragControlEnd:function(e,t){var r=t.datas;return r.isDragOrigin?(he(e,"onDragOriginEnd",Wt(e,t,{})),!0):!1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragGroupControlStart:function(e,t){var r=this.dragControlStart(e,t);return!!r},dragGroupControl:function(e,t){var r=this.dragControl(e,t);return r?(e.transformOrigin=r.transformOrigin,!0):!1},request:function(e){var t={},r=e.getRect(),n=0,o=0,i=r.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:t}},request:function(s){return"deltaOrigin"in s?(a[0]+=s.deltaOrigin[0],a[1]+=s.deltaOrigin[1]):"origin"in s?(a[0]=s.origin[0]-i[0],a[1]=s.origin[1]-i[1]):("x"in s?n=s.x-r.left:"deltaX"in s&&(n+=s.deltaX),"y"in s?o=s.y-r.top:"deltaY"in s&&(o+=s.deltaY)),{datas:t,distX:n,distY:o,distOrigin:a}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function v3(e,t,r,n){var o=e.filter(function(l){var c=l.virtual,u=l.horizontal;return u&&!c}).length,i=e.filter(function(l){var c=l.virtual,u=l.vertical;return u&&!c}).length,a=-1;if(t===0&&(o===0?a=0:o===1&&(a=1)),t===2&&(o<=2?a=2:o<=3&&(a=3)),t===3&&(i===0?a=4:i<4&&(a=7)),t===1&&(i<=1?a=5:i<=2&&(a=6)),!(a===-1||!e[a].virtual)){var s=e[a];g3(e,a),a<4?s.pos[0]=r:s.pos[1]=n}}function g3(e,t){t<4?e.slice(0,t+1).forEach(function(r){r.virtual=!1}):(e[0].virtual&&(e[0].virtual=!1),e.slice(4,t+1).forEach(function(r){r.virtual=!1}))}function m3(e,t){t<4?e.slice(t,4).forEach(function(r){r.virtual=!0}):e.slice(t).forEach(function(r){r.virtual=!0})}function Wx(e,t,r,n,o){n===void 0&&(n=[0,0]);var i=[];return!e||e==="0px"?i=[]:i=Qr(e),Vx(i,t,r,0,0,n,o)}function Yx(e,t,r,n,o){var i=e.state,a=i.width,s=i.height,l=Cf(o,e.props.roundRelative,a,s),c=l.raws,u=l.styles,d=l.radiusPoses,h=s3(d,c),p=h.horizontals,g=h.verticals,v=u.join(" ");i.borderRadiusState=v;var m=Re(e,t,V({horizontals:p,verticals:g,borderRadius:v,width:a,height:s,delta:n,dist:r},Rt({borderRadius:v},t)));return he(e,"onRound",m),m}function qx(e){var t,r,n=e.getState().style,o=n.borderRadius||"";if(!o&&e.props.groupable){var i=e.moveables[0],a=e.getTargets()[0];a&&(i?.props.target===a?(o=(r=(t=e.moveables[0])===null||t===void 0?void 0:t.state.style.borderRadius)!==null&&r!==void 0?r:"",n.borderRadius=o):(o=pf(a).borderRadius,n.borderRadius=o))}return o}var x3={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(e){var t=e.props.roundClickable;return t===!0||t==="line"?ye("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(e,t){var r=e.getState(),n=r.target,o=r.width,i=r.height,a=r.allMatrix,s=r.is3d,l=r.left,c=r.top,u=r.borderRadiusState,d=e.props,h=d.minRoundControls,p=h===void 0?[0,0]:h,g=d.maxRoundControls,v=g===void 0?[4,4]:g,m=d.zoom,x=d.roundPadding,y=x===void 0?0:x,b=d.isDisplayShadowRoundControls,w=d.groupable;if(!n)return null;var _=u||qx(e),T=s?4:3,j=Wx(_,o,i,p,!0);if(!j)return null;var k=0,R=0,A=w?[0,0]:[l,c];return j.map(function($,F){var L=$.horizontal,P=$.vertical,O=$.direction||"",I=ce([],W($.pos),!1);R+=Math.abs(L),k+=Math.abs(P),L&&O.indexOf("n")>-1&&(I[1]-=y),P&&O.indexOf("w")>-1&&(I[0]-=y),L&&O.indexOf("s")>-1&&(I[1]+=y),P&&O.indexOf("e")>-1&&(I[0]+=y);var E=be(nt(a,I,T),A),S=b&&b!=="horizontal",M=$.vertical?k<=v[1]&&(S||!$.virtual):R<=v[0]&&(b||!$.virtual);return t.createElement("div",{key:"borderRadiusControl".concat(F),className:ye("control","border-radius",$.vertical?"vertical":"",$.virtual?"virtual":""),"data-radius-index":F,style:{display:M?"block":"none",transform:"translate(".concat(E[0],"px, ").concat(E[1],"px) scale(").concat(m,")")}})})},dragControlCondition:function(e,t){if(!t.inputEvent||t.isRequest)return!1;var r=t.inputEvent.target.getAttribute("class")||"";return r.indexOf("border-radius")>-1||r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragControlStart:function(e,t){var r=t.inputEvent,n=t.datas,o=r.target,i=o.getAttribute("class")||"",a=i.indexOf("border-radius")>-1,s=i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1,l=a?parseInt(o.getAttribute("data-radius-index"),10):-1,c=-1;if(s){var u=o.getAttribute("data-line-key")||"";u&&(c=parseInt(u.replace(/render-line-/g,""),10),isNaN(c)&&(c=-1))}if(!a&&!s)return!1;var d=Re(e,t,{}),h=he(e,"onRoundStart",d);if(h===!1)return!1;n.lineIndex=c,n.controlIndex=l,n.isControl=a,n.isLine=s,Wn(e,t);var p=e.props,g=p.roundRelative,v=p.minRoundControls,m=v===void 0?[0,0]:v,x=e.state,y=x.width,b=x.height;n.isRound=!0,n.prevDist=[0,0];var w=qx(e),_=Wx(w||"",y,b,m,!0)||[];return n.controlPoses=_,x.borderRadiusState=Cf(_,g,y,b).styles.join(" "),d},dragControl:function(e,t){var r=t.datas,n=r.controlPoses;if(!r.isRound||!r.isControl||!n.length)return!1;var o=r.controlIndex,i=W(Ur(t),2),a=i[0],s=i[1],l=[a,s],c=be(l,r.prevDist),u=e.props.maxRoundControls,d=u===void 0?[4,4]:u,h=e.state,p=h.width,g=h.height,v=n[o],m=v.vertical,x=v.horizontal,y=n.map(function(w){var _=w.horizontal,T=w.vertical,j=[_*x*l[0],T*m*l[1]];if(_){if(d[0]===1)return j;if(d[0]<4&&_!==x)return j}else{if(d[1]===0)return j[1]=T*x*l[0]/p*g,j;if(m){if(d[1]===1)return j;if(d[1]<4&&T!==m)return j}}return[0,0]});y[o]=l;var b=n.map(function(w,_){return V(V({},w),{pos:Be(w.pos,y[_])})});return o<4?b.slice(0,o+1).forEach(function(w){w.virtual=!1}):b.slice(4,o+1).forEach(function(w){w.virtual=!1}),r.prevDist=[a,s],Yx(e,t,l,c,b)},dragControlEnd:function(e,t){var r=e.state;r.borderRadiusState="";var n=t.datas,o=t.isDouble;if(!n.isRound)return!1;var i=n.isControl,a=n.controlIndex,s=n.isLine,l=n.lineIndex,c=n.controlPoses,u=c.filter(function(x){var y=x.virtual;return y}).length,d=e.props.roundClickable,h=d===void 0?!0:d;if(o&&h){if(i&&(h===!0||h==="control"))m3(c,a);else if(s&&(h===!0||h==="line")){var p=W(_1(e,t),2),g=p[0],v=p[1];v3(c,l,g,v)}u!==c.filter(function(x){var y=x.virtual;return y}).length&&Yx(e,t,[0,0],[0,0],c)}var m=Wt(e,t,{});return he(e,"onRoundEnd",m),r.borderRadiusState="",m},dragGroupControlStart:function(e,t){var r=this.dragControlStart(e,t);if(!r)return!1;var n=e.moveables,o=e.props.targets,i=Er(e,"roundable",t),a=V({targets:e.props.targets,events:i.map(function(s,l){return V(V({},s),{target:o[l],moveable:n[l],currentTarget:n[l]})})},r);return he(e,"onRoundGroupStart",a),r},dragGroupControl:function(e,t){var r=this.dragControl(e,t);if(!r)return!1;var n=e.moveables,o=e.props.targets,i=Er(e,"roundable",t),a=V({targets:e.props.targets,events:i.map(function(s,l){return V(V(V({},s),{target:o[l],moveable:n[l],currentTarget:n[l]}),Rt({borderRadius:r.borderRadius},s))})},r);return he(e,"onRoundGroup",a),a},dragGroupControlEnd:function(e,t){var r=e.moveables,n=e.props.targets,o=Er(e,"roundable",t);Ll(e,"onRound",function(s){var l=V({targets:e.props.targets,events:o.map(function(c,u){return V(V(V({},c),{target:n[u],moveable:r[u],currentTarget:r[u]}),Rt({borderRadius:s.borderRadius},c))})},s);he(e,"onRoundGroup",l)});var i=this.dragControlEnd(e,t);if(!i)return!1;var a=V({targets:e.props.targets,events:o.map(function(s,l){var c;return V(V({},s),{target:n[l],moveable:r[l],currentTarget:r[l],lastEvent:(c=s.datas)===null||c===void 0?void 0:c.lastEvent})})},i);return he(e,"onRoundGroupEnd",a),a},unset:function(e){e.state.borderRadiusState=""}};function y3(e,t){var r=t?4:3,n=Ke(r),o="matrix".concat(t?"3d":"","(").concat(n.join(","),")");return e===o||e==="matrix(1,0,0,1,0,0)"}var Xx={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(e,t){var r=e.state,n=r.is3d,o=r.targetMatrix,i=r.inlineTransform,a=n?"matrix3d(".concat(o.join(","),")"):"matrix(".concat(l1(o,!0),")"),s=!i||i==="none"?a:i;t.datas.startTransforms=y3(s,n)?[]:Qr(s)},resetStyle:function(e){var t=e.datas;t.nextStyle={},t.nextTransforms=e.datas.startTransforms,t.nextTransformAppendedIndexes=[]},fillDragStartParams:function(e,t){return Re(e,t,{setTransform:function(r){t.datas.startTransforms=$e(r)?r:Qr(r)},isPinch:!!t.isPinch})},fillDragParams:function(e,t){return Re(e,t,{isPinch:!!t.isPinch})},dragStart:function(e,t){this.setTransform(e,t),this.resetStyle(t),he(e,"onBeforeRenderStart",this.fillDragStartParams(e,t))},drag:function(e,t){t.datas.startTransforms||this.setTransform(e,t),this.resetStyle(t),he(e,"onBeforeRender",Re(e,t,{isPinch:!!t.isPinch}))},dragEnd:function(e,t){t.datas.startTransforms||(this.setTransform(e,t),this.resetStyle(t)),he(e,"onBeforeRenderEnd",Re(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag}))},dragGroupStart:function(e,t){var r=this;this.dragStart(e,t);var n=Er(e,"beforeRenderable",t),o=e.moveables,i=n.map(function(a,s){var l=o[s];return r.setTransform(l,a),r.resetStyle(a),r.fillDragStartParams(l,a)});he(e,"onBeforeRenderGroupStart",Re(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,setTransform:function(){},events:i}))},dragGroup:function(e,t){var r=this;this.drag(e,t);var n=Er(e,"beforeRenderable",t),o=e.moveables,i=n.map(function(a,s){var l=o[s];return r.resetStyle(a),r.fillDragParams(l,a)});he(e,"onBeforeRenderGroup",Re(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,events:i}))},dragGroupEnd:function(e,t){this.dragEnd(e,t),he(e,"onBeforeRenderGroupEnd",Re(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets}))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)}},Kx={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(e,t){he(e,"onRenderStart",Re(e,t,{isPinch:!!t.isPinch}))},drag:function(e,t){he(e,"onRender",this.fillDragParams(e,t))},dragAfter:function(e,t){return this.drag(e,t)},dragEnd:function(e,t){he(e,"onRenderEnd",this.fillDragEndParams(e,t))},dragGroupStart:function(e,t){he(e,"onRenderGroupStart",Re(e,t,{isPinch:!!t.isPinch,targets:e.props.targets}))},dragGroup:function(e,t){var r=this,n=Er(e,"beforeRenderable",t),o=e.moveables,i=n.map(function(a,s){var l=o[s];return r.fillDragParams(l,a)});he(e,"onRenderGroup",Re(e,t,V(V({isPinch:!!t.isPinch,targets:e.props.targets,transform:El(t),transformObject:{}},Rt(_l(t))),{events:i})))},dragGroupEnd:function(e,t){var r=this,n=Er(e,"beforeRenderable",t),o=e.moveables,i=n.map(function(a,s){var l=o[s];return r.fillDragEndParams(l,a)});he(e,"onRenderGroupEnd",Re(e,t,V({isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets,events:i,transformObject:{},transform:El(t)},Rt(_l(t)))))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlAfter:function(e,t){return this.dragAfter(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)},fillDragParams:function(e,t){var r={};return Wo(Cl(t)||[]).forEach(function(n){r[n.name]=n.functionValue}),Re(e,t,V({isPinch:!!t.isPinch,transformObject:r,transform:El(t)},Rt(_l(t))))},fillDragEndParams:function(e,t){var r={};return Wo(Cl(t)||[]).forEach(function(n){r[n.name]=n.functionValue}),Re(e,t,V({isPinch:!!t.isPinch,isDrag:t.isDrag,transformObject:r,transform:El(t)},Rt(_l(t))))}};function ba(e,t,r,n,o,i,a){i.clientDistX=i.distX,i.clientDistY=i.distY;var s=o==="Start",l=o==="End",c=o==="After",u=e.state.target,d=i.isRequest,h=n.indexOf("Control")>-1;if(!u||s&&h&&!d&&e.areaElement===i.inputEvent.target)return!1;var p=ce([],W(t),!1);if(d){var g=i.requestAble;p.some(function(F){return F.name===g})||p.push.apply(p,ce([],W(e.props.ables.filter(function(F){return F.name===g})),!1))}if(!p.length||p.every(function(F){return F.dragRelation}))return!1;var v=i.inputEvent,m;l&&v&&(m=document.elementFromPoint(i.clientX,i.clientY)||v.target);var x=!1,y=function(){var F;x=!0,(F=i.stop)===null||F===void 0||F.call(i)},b=s&&(!e.targetGesto||!e.controlGesto||!e.targetGesto.isFlag()||!e.controlGesto.isFlag());b&&e.updateRect(o,!0,!1);var w=i.datas,_=h?"controlGesto":"targetGesto",T=e[_],j=function(F,L,P){if(!(L in F)||T!==e[_])return!1;var O=F.name,I=w[O]||(w[O]={});if(s&&(I.isEventStart=!P||!F[P]||F[P](e,i)),!I.isEventStart)return!1;var E=F[L](e,V(V({},i),{stop:y,datas:I,originalDatas:w,inputTarget:m}));return e._emitter.off(),s&&E===!1&&(I.isEventStart=!1),E};b&&p.forEach(function(F){F.unset&&F.unset(e)}),j(Xx,"drag".concat(n).concat(o));var k=0,R=0;r.forEach(function(F){if(x)return!1;var L="".concat(F).concat(n).concat(o),P="".concat(F).concat(n,"Condition");o===""&&!d&&Gk(e.state,i);var O=p.filter(function(S){return S[L]});O=O.filter(function(S,M){return S.name&&O.indexOf(S)===M});var I=O.filter(function(S){return j(S,L,P)}),E=I.length;x&&++k,E&&++R,!x&&s&&O.length&&!E&&(k+=O.filter(function(S){var M=S.name,D=w[M];return D.isEventStart?S.dragRelation!=="strong":!1}).length?1:0)}),(!c||R)&&j(Kx,"drag".concat(n).concat(o));var A=T!==e[_]||k===r.length;if((l||x||A)&&(e.state.gestos={},e.moveables&&e.moveables.forEach(function(F){F.state.gestos={}}),p.forEach(function(F){F.unset&&F.unset(e)})),s&&!A&&!d&&R&&e.props.preventDefault&&i?.preventDefault(),e.isUnmounted||A)return!1;if(!s&&R&&!a||l){var $=e.props.flushSync||gx;$(function(){e.updateRect(l?o:"",!0,!1),e.forceUpdate()})}return!s&&!l&&!c&&R&&!a&&ba(e,t,r,n,o+"After",i),!0}function _f(e,t){return function(r,n){var o;n===void 0&&(n=r.inputEvent.target);var i=n,a=e.areaElement,s=e._dragTarget;return!s||!t&&(!((o=e.controlGesto)===null||o===void 0)&&o.isFlag())?!1:i===s||s.contains(i)||i===a||!e.isMoveableElement(i)&&!e.controlBox.contains(i)||ut(i,"moveable-area")||ut(i,"moveable-padding")||ut(i,"moveable-edgeDraggable")}}function Zx(e,t,r){var n=e.controlBox,o=[],i=e.props,a=i.dragArea,s=e.state.target,l=i.dragTarget;o.push(n),(!a||l)&&o.push(t),!a&&l&&s&&t!==s&&i.dragTargetSelf&&o.push(s);var c=_f(e);return Jx(e,o,"targetAbles",r,{dragStart:c,pinchStart:c})}function Qx(e,t){var r=e.controlBox,n=[];n.push(r);var o=_f(e,!0),i=function(a,s){if(s===void 0&&(s=a.inputEvent.target),s===r)return!0;var l=o(a,s);return!l};return Jx(e,n,"controlAbles",t,{dragStart:i,pinchStart:i})}function Jx(e,t,r,n,o){o===void 0&&(o={});var i=r==="targetAbles",a=e.props,s=a.pinchOutside,l=a.pinchThreshold,c=a.preventClickEventOnDrag,u=a.preventClickDefault,d=a.checkInput,h=a.dragFocusedInput,p=a.preventDefault,g=p===void 0?!0:p,v=a.preventRightClick,m=v===void 0?!0:v,x=a.preventWheelClick,y=x===void 0?!0:x,b=a.dragContainer,w=Hr(b,!0),_={preventDefault:g,preventRightClick:m,preventWheelClick:y,container:w||Ht(e.getControlBoxElement()),pinchThreshold:l,pinchOutside:s,preventClickEventOnDrag:i?c:!1,preventClickEventOnDragStart:i?u:!1,preventClickEventByCondition:i?null:function(k){return e.controlBox.contains(k.target)},checkInput:i?d:!1,dragFocusedInput:h},T=new m1(t,_),j=n==="Control";return["drag","pinch"].forEach(function(k){["Start","","End"].forEach(function(R){T.on("".concat(k).concat(R),function(A){var $,F=A.eventType,L=k==="drag"&&A.isPinch;if(o[F]&&!o[F](A)){A.stop();return}if(!L){var P=k==="drag"?[k]:["drag",k],O=ce([],W(e[r]),!1),I=ba(e,O,P,n,R,A);I?(e.props.stopPropagation||R==="Start"&&j)&&(($=A?.inputEvent)===null||$===void 0||$.stopPropagation()):A.stop()}})})}),T}var b3=function(){function e(t,r,n){var o=this;this.target=t,this.moveable=r,this.eventName=n,this.ables=[],this._onEvent=function(i){var a=o.eventName,s=o.moveable;s.state.disableNativeEvent||o.ables.forEach(function(l){l[a](s,{inputEvent:i})})},t.addEventListener(n.toLowerCase(),this._onEvent)}return e.prototype.setAbles=function(t){this.ables=t},e.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},e}();function w3(e,t,r,n){var o;r===void 0&&(r=t);var i=R1(e,t),a=i.matrixes,s=i.is3d,l=i.targetMatrix,c=i.transformOrigin,u=i.targetOrigin,d=i.offsetContainer,h=i.hasFixed,p=i.zoom,g=OR(d,r),v=g.matrixes,m=g.is3d,x=g.offsetContainer,y=g.zoom,b=n,w=4,_=e.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in e,T=l,j=Ke(w),k=Ke(w),R=Ke(w),A=Ke(w),$=a.length,F=v.map(function(M){return V(V({},M),{matrix:M.matrix?ce([],W(M.matrix),!1):void 0})}).reverse();a.reverse(),!s&&b&&(T=Cr(T,3,4),cf(a)),!m&&b&&cf(F),F.forEach(function(M){k=Ye(k,M.matrix,w)});var L=r||xn(e),P=((o=F[0])===null||o===void 0?void 0:o.target)||ma(L,L,!0).offsetParent,O=F.slice(1).reduce(function(M,D){return Ye(M,D.matrix,w)},Ke(w));a.forEach(function(M,D){if($-2===D&&(R=j.slice()),$-1===D&&(A=j.slice()),!M.matrix){var N=a[D+1],z=Lk(M,N,P,w,Ye(O,j,w));M.matrix=Un(z,w)}j=Ye(j,M.matrix,w)});var I=!_&&s;T||(T=Ke(I?4:3));var E=Ol(_&&T.length===16?Cr(T,4,3):T,I),S=k;return k=a1(k,w,w),{hasZoom:p!==1||y!==1,hasFixed:h,matrixes:a,rootMatrix:k,originalRootMatrix:S,beforeMatrix:R,offsetMatrix:A,allMatrix:j,targetMatrix:T,targetTransform:E,inlineTransform:e.style.transform,transformOrigin:c,targetOrigin:u,is3d:b,offsetContainer:d,offsetRootContainer:x}}function ey(e,t,r,n){r===void 0&&(r=t);var o=0,i=0,a=0,s={},l=wx(e);if(e&&(o=l.offsetWidth,i=l.offsetHeight),e){var c=w3(e,t,r,n),u=Zo(c.allMatrix,c.transformOrigin,o,i);s=V(V({},c),u);var d=Zo(c.allMatrix,[50,50],100,100);a=Sx([d.pos1,d.pos2],d.direction)}var h=4;return V(V(V({hasZoom:!1,width:o,height:i,rotation:a},l),{originalRootMatrix:Ke(h),rootMatrix:Ke(h),beforeMatrix:Ke(h),offsetMatrix:Ke(h),allMatrix:Ke(h),targetMatrix:Ke(h),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),s)}function S3(e,t,r){return r===void 0&&(r=t),ey(e,t,r,!0)}function Nf(e,t,r,n,o,i){i===void 0&&(i=[]);var a=1,s=[0,0],l=Fl(),c=Fl(),u=Fl(),d=Fl(),h=[0,0],p={},g=ey(t,r,o,!0);if(t){var v=Bt(t);i.forEach(function(F){p[F]=v(F)});var m=g.is3d?4:3,x=Zo(g.offsetMatrix,Be(g.transformOrigin,s1(g.targetMatrix,m)),g.width,g.height);a=x.direction,s=Be(x.origin,[x.left-g.left,x.top-g.top]),d=ya(g.offsetRootContainer);var y=ma(n,n,!0).offsetParent||g.offsetRootContainer;if(g.hasZoom){var b=Zo(Ye(g.originalRootMatrix,g.allMatrix),g.transformOrigin,g.width,g.height),w=Zo(g.originalRootMatrix,Al(Bt(y)("transformOrigin")).map(function(F){return parseFloat(F)}),y.offsetWidth,y.offsetHeight);if(l=df(b,d),u=df(w,d,y,!0),e){var _=b.left,T=b.top;c=df({left:_,top:T,bottom:T,right:T},d)}}else{l=ya(t),u=AR(y),e&&(c=ya(e));var j=u.left,k=u.top,R=u.clientLeft,A=u.clientTop,$=[l.left-j,l.top-k];h=be(ii(g.rootMatrix,$,4),[R+g.left,A+g.top])}}return V({targetClientRect:l,containerClientRect:u,moveableClientRect:c,rootContainerClientRect:d,beforeDirection:a,beforeOrigin:s,originalBeforeOrigin:s,target:t,style:p,offsetDelta:h},g)}function ty(e){var t=e.pos1,r=e.pos2,n=e.pos3,o=e.pos4;if(!t||!r||!n||!o)return null;var i=Hn([t,r,n,o]),a=[i.minX,i.minY],s=be(e.origin,a);return t=be(t,a),r=be(r,a),n=be(n,a),o=be(o,a),V(V({},e),{left:e.left,top:e.top,posDelta:a,pos1:t,pos2:r,pos3:n,pos4:o,origin:s,beforeOrigin:s,isPersisted:!0})}var si=function(e){ca(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state=V({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},Nf(null)),r.renderState={},r.enabledAbles=[],r.targetAbles=[],r.controlAbles=[],r.rotation=0,r.scale=[1,1],r.isMoveableMounted=!1,r.isUnmounted=!1,r.events={mouseEnter:null,mouseLeave:null},r._emitter=new yn,r._prevOriginalDragTarget=null,r._originalDragTarget=null,r._prevDragTarget=null,r._dragTarget=null,r._prevPropTarget=null,r._propTarget=null,r._prevDragArea=!1,r._isPropTargetChanged=!1,r._hasFirstTarget=!1,r._reiszeObserver=null,r._observerId=0,r._mutationObserver=null,r._rootContainer=null,r._viewContainer=null,r._viewClassNames=[],r._store={},r.checkUpdateRect=function(){if(!r.isDragging()){var n=r.props.parentMoveable;if(n){n.checkUpdateRect();return}J0(r._observerId),r._observerId=ll(function(){r.isDragging()||r.updateRect()})}},r._onPreventClick=function(n){n.stopPropagation(),n.preventDefault()},r}return t.prototype.render=function(){var r=this.props,n=this.getState(),o=r.parentPosition,i=r.className,a=r.target,s=r.zoom,l=r.cspNonce,c=r.translateZ,u=r.cssStyled,d=r.groupable,h=r.linePadding,p=r.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var g=W(o||[0,0],2),v=g[0],m=g[1],x=n.left,y=n.top,b=n.target,w=n.direction,_=n.hasFixed,T=n.offsetDelta,j=r.targets,k=this.isDragging(),R={};this.getEnabledAbles().forEach(function(O){R["data-able-".concat(O.name.toLowerCase())]=!0});var A=this._getAbleClassName(),$=j&&j.length&&(b||d)||a||!this._hasFirstTarget&&this.state.isPersisted,F=this.controlBox||this.props.firstRenderState||this.props.persistData,L=[x-v,y-m];!d&&r.useAccuratePosition&&(L[0]+=T[0],L[1]+=T[1]);var P={position:_?"fixed":"absolute",display:$?"block":"none",visibility:F?"visible":"hidden",transform:"translate3d(".concat(L[0],"px, ").concat(L[1],"px, ").concat(c,")"),"--zoom":s,"--zoompx":"".concat(s,"px")};return h&&(P["--moveable-line-padding"]=h),p&&(P["--moveable-control-padding"]=p),C.createElement(u,V({cspNonce:l,ref:mn(this,"controlBox"),className:"".concat(ye("control-box",w===-1?"reverse":"",k?"dragging":"")," ").concat(A," ").concat(i)},R,{onClick:this._onPreventClick,style:P}),this.renderAbles(),this._renderLines())},t.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var r=this.props,n=r.parentMoveable,o=r.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!o&&!n&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},t.prototype.componentDidUpdate=function(r){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(r)},t.prototype.componentWillUnmount=function(){var r,n;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(r=this._reiszeObserver)===null||r===void 0||r.disconnect(),(n=this._mutationObserver)===null||n===void 0||n.disconnect();var o=this._viewContainer;o&&this._changeAbleViewClassNames([]),ni(this,!1),ni(this,!0);var i=this.events;for(var a in i){var s=i[a];s&&s.destroy()}},t.prototype.getTargets=function(){var r=this.props.target;return r?[r]:[]},t.prototype.getAble=function(r){var n=this.props.ables||[];return Ft(n,function(o){return o.name===r})},t.prototype.getContainer=function(){var r=this.props,n=r.parentMoveable,o=r.wrapperMoveable,i=r.container;return i||o&&o.getContainer()||n&&n.getContainer()||this.controlBox.parentElement},t.prototype.getControlBoxElement=function(){return this.controlBox},t.prototype.getDragElement=function(){return this._dragTarget},t.prototype.isMoveableElement=function(r){var n;return r&&(((n=r.getAttribute)===null||n===void 0?void 0:n.call(r,"class"))||"").indexOf(Ld)>-1},t.prototype.dragStart=function(r,n){n===void 0&&(n=r.target);var o=this.targetGesto,i=this.controlGesto;return o&&_f(this)({inputEvent:r},n)?o.isFlag()||o.triggerDragStart(r):i&&this.isMoveableElement(n)&&(i.isFlag()||i.triggerDragStart(r)),this},t.prototype.hitTest=function(r){var n=this.state,o=n.target,i=n.pos1,a=n.pos2,s=n.pos3,l=n.pos4,c=n.targetClientRect;if(!o)return 0;var u;if(na(r)){var d=r.getBoundingClientRect();u={left:d.left,top:d.top,width:d.width,height:d.height}}else u=V({width:0,height:0},r);var h=u.left,p=u.top,g=u.width,v=u.height,m=Dd([i,a,l,s],c),x=$j(m,[[h,p],[h+g,p],[h+g,p+v],[h,p+v]]),y=sa(m);return!x||!y?0:Math.min(100,x/y*100)},t.prototype.isInside=function(r,n){var o=this.state,i=o.target,a=o.pos1,s=o.pos2,l=o.pos3,c=o.pos4,u=o.targetClientRect;return i?pl([r,n],Dd([a,s,c,l],u)):!1},t.prototype.updateRect=function(r,n,o){o===void 0&&(o=!0);var i=this.props,a=!i.parentPosition&&!i.wrapperMoveable;a&&ei(!0);var s=i.parentMoveable,l=this.state,c=l.target||i.target,u=this.getContainer(),d=s?s._rootContainer:this._rootContainer,h=Nf(this.controlBox,c,u,u,d||u,this._getRequestStyles());if(!c&&this._hasFirstTarget&&i.persistData){var p=ty(i.persistData);for(var g in p)h[g]=p[g]}a&&ei(),this.updateState(h,s?!1:o)},t.prototype.isDragging=function(r){var n,o,i=this.targetGesto,a=this.controlGesto;if(i?.isFlag()){if(!r)return!0;var s=i.getEventData();return!!(!((n=s[r])===null||n===void 0)&&n.isEventStart)}if(a?.isFlag()){if(!r)return!0;var s=a.getEventData();return!!(!((o=s[r])===null||o===void 0)&&o.isEventStart)}return!1},t.prototype.updateTarget=function(r){this.updateRect(r,!0)},t.prototype.getRect=function(){var r=this.state,n=rr(this.state),o=W(n,4),i=o[0],a=o[1],s=o[2],l=o[3],c=er(n),u=r.width,d=r.height,h=c.width,p=c.height,g=c.left,v=c.top,m=[r.left,r.top],x=Be(m,r.origin),y=Be(m,r.beforeOrigin),b=r.transformOrigin;return{width:h,height:p,left:g,top:v,pos1:i,pos2:a,pos3:s,pos4:l,offsetWidth:u,offsetHeight:d,beforeOrigin:y,origin:x,transformOrigin:b,rotation:this.getRotation()}},t.prototype.getManager=function(){return this},t.prototype.stopDrag=function(r){if(!r||r==="target"){var n=this.targetGesto;n?.isIdle()===!1&&hf(this,!1),n?.stop()}if(!r||r==="control"){var n=this.controlGesto;n?.isIdle()===!1&&hf(this,!0),n?.stop()}},t.prototype.getRotation=function(){var r=this.state,n=r.pos1,o=r.pos2,i=r.direction;return Hk(n,o,i)},t.prototype.request=function(r,n,o){n===void 0&&(n={});var i=this,a=i.props,s=a.parentMoveable||a.wrapperMoveable||i,l=s.props.ables,c=a.groupable,u=Ft(l,function(x){return x.name===r});if(this.isDragging()||!u||!u.request)return{request:function(){return this},requestEnd:function(){return this}};var d=u.request(i),h=o||n.isInstant,p=d.isControl?"controlAbles":"targetAbles",g="".concat(c?"Group":"").concat(d.isControl?"Control":""),v=ce([],W(s[p]),!1),m={request:function(x){return ba(i,v,["drag"],g,"",V(V({},d.request(x)),{requestAble:r,isRequest:!0}),h),m},requestEnd:function(){return ba(i,v,["drag"],g,"End",V(V({},d.requestEnd()),{requestAble:r,isRequest:!0}),h),m}};return ba(i,v,["drag"],g,"Start",V(V({},d.requestStart(n)),{requestAble:r,isRequest:!0}),h),h?m.request(n).requestEnd():m},t.prototype.getMoveables=function(){return[this]},t.prototype.destroy=function(){this.componentWillUnmount()},t.prototype.updateRenderPoses=function(){var r=this.getState(),n=this.props,o=n.padding,i=r.originalBeforeOrigin,a=r.transformOrigin,s=r.allMatrix,l=r.is3d,c=r.pos1,u=r.pos2,d=r.pos3,h=r.pos4,p=r.left,g=r.top,v=r.isPersisted,m=n.zoom||1;if(!o&&m<=1){r.renderPoses=[c,u,d,h],r.renderLines=[[c,u],[u,h],[h,d],[d,c]];return}var x=Ax(o||{}),y=x.left,b=x.top,w=x.bottom,_=x.right,T=l?4:3,j=[];v?j=a:this.controlBox&&n.groupable?j=i:j=Be(i,[p,g]);var k=ul(T,Un(j.map(function(P){return-P}),T),s,Un(a,T)),R=nr(k,c,[-y,-b],T),A=nr(k,u,[_,-b],T),$=nr(k,d,[-y,w],T),F=nr(k,h,[_,w],T);r.renderPoses=[R,A,$,F],r.renderLines=[[R,A],[A,F],[F,$],[$,R]];{var L=m/2;r.renderLines=[[nr(k,c,[-y-L,-b],T),nr(k,u,[_+L,-b],T)],[nr(k,u,[_,-b-L],T),nr(k,h,[_,w+L],T)],[nr(k,h,[_+L,w],T),nr(k,d,[-y-L,w],T)],[nr(k,d,[-y,w+L],T),nr(k,c,[-y,-b-L],T)]]}},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var r=this.props,n=r.target,o=r.container,i=r.parentMoveable,a=this.state,s=a.target,l=a.container;if(!(!s&&!n)){this.updateAbles();var c=!vf(s,n),u=c||!vf(l,o);if(u){var d=o||this.controlBox;d&&this.unsetAbles(),this.updateState({target:n,container:o}),!i&&d&&this.updateRect("End",!1,!1),this._isPropTargetChanged=c}}},t.prototype.waitToChangeTarget=function(){return new Promise(function(){})},t.prototype.triggerEvent=function(r,n){var o=this.props;if(this._emitter.trigger(r,n),o.parentMoveable&&n.isRequest&&!n.isRequestChild)return o.parentMoveable.triggerEvent(r,n,!0);var i=o[r];return i&&i(n)},t.prototype.useCSS=function(r,n){var o=this.props.customStyledMap,i=r+n;return o[i]||(o[i]=x1(r,n)),o[i]},t.prototype.getState=function(){var r,n=this.props;(n.target||!((r=n.targets)===null||r===void 0)&&r.length)&&(this._hasFirstTarget=!0);var o=this.controlBox,i=n.persistData,a=n.firstRenderState;if(a&&!o)return a;if(!this._hasFirstTarget&&i){var s=ty(i);if(s)return this.updateState(s,!1),this.state}return this.state.isPersisted=!1,this.state},t.prototype.updateSelectors=function(){},t.prototype.unsetAbles=function(){var r=this;this.targetAbles.forEach(function(n){n.unset&&n.unset(r)})},t.prototype.updateAbles=function(r,n){r===void 0&&(r=this.props.ables),n===void 0&&(n="");var o=this.props,i=o.triggerAblesSimultaneously,a=this.getEnabledAbles(r),s="drag".concat(n,"Start"),l="pinch".concat(n,"Start"),c="drag".concat(n,"ControlStart"),u=Bl(a,[s,l],i),d=Bl(a,[c],i);this.enabledAbles=a,this.targetAbles=u,this.controlAbles=d},t.prototype.updateState=function(r,n){if(n){if(this.isUnmounted)return;this.setState(r)}else{var o=this.state;for(var i in r)o[i]=r[i]}},t.prototype.getEnabledAbles=function(r){r===void 0&&(r=this.props.ables);var n=this.props;return r.filter(function(o){return o&&(o.always&&n[o.name]!==!1||n[o.name])})},t.prototype.renderAbles=function(){var r=this,n=this.props,o=n.triggerAblesSimultaneously,i={createElement:X.createElement};return this.renderState={},$k(Mx(Bl(this.getEnabledAbles(),["render"],o).map(function(a){var s=a.render;return s(r,i)||[]})).filter(function(a){return a}),function(a){var s=a.key;return s}).map(function(a){return a[0]})},t.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},t.prototype._getRequestStyles=function(){var r=this.getEnabledAbles().reduce(function(n,o){var i,a,s=(a=(i=o.requestStyle)===null||i===void 0?void 0:i.call(o))!==null&&a!==void 0?a:[];return ce(ce([],W(n),!1),W(s),!1)},ce([],W(this.props.requestStyles||[]),!1));return r},t.prototype._updateObserver=function(r){this._updateResizeObserver(r),this._updateMutationObserver(r)},t.prototype._updateEvents=function(){var r=this.targetAbles.length,n=this.controlAbles.length,o=this._dragTarget,i=!r&&this.targetGesto||this._isTargetChanged(!0);i&&(ni(this,!1),this.updateState({gestos:{}})),n||ni(this,!0),o&&r&&!this.targetGesto&&(this.targetGesto=Zx(this,o,"")),!this.controlGesto&&n&&(this.controlGesto=Qx(this,"Control"))},t.prototype._updateTargets=function(){var r=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=r.dragArea,this._propTarget=r.target,this._originalDragTarget=r.dragTarget||r.target,this._dragTarget=Hr(this._originalDragTarget,!0)},t.prototype._renderLines=function(){var r=this.props,n=r,o=n.zoom,i=n.hideDefaultLines,a=n.hideChildMoveableDefaultLines,s=n.parentMoveable;if(i||s&&a)return[];var l=this.getState(),c={createElement:X.createElement};return l.renderLines.map(function(u,d){return ha(c,"",u[0],u[1],o,"render-line-".concat(d))})},t.prototype._isTargetChanged=function(r){var n=this.props,o=n.dragTarget||n.target,i=this._prevOriginalDragTarget,a=this._prevDragArea,s=n.dragArea,l=!s&&i!==o,c=(r||s)&&a!==s;return l||c||this._prevPropTarget!=this._propTarget},t.prototype._updateNativeEvents=function(){var r=this,n=this.props,o=n.dragArea?this.areaElement:this.state.target,i=this.events,a=Jt(i);if(this._isTargetChanged())for(var s in i){var l=i[s];l&&l.destroy(),i[s]=null}if(o){var c=this.enabledAbles;a.forEach(function(u){var d=Bl(c,[u]),h=d.length>0,p=i[u];if(!h){p&&(p.destroy(),i[u]=null);return}p||(p=new b3(o,r,u),i[u]=p),p.setAbles(d)})}},t.prototype._checkUpdateRootContainer=function(){var r=this.props.rootContainer;!this._rootContainer&&r&&(this._rootContainer=Hr(r,!0))},t.prototype._checkUpdateViewContainer=function(){var r=this.props.viewContainer;!this._viewContainer&&r&&(this._viewContainer=Hr(r,!0));var n=this._viewContainer;n&&this._changeAbleViewClassNames(ce(ce([],W(this._getAbleViewClassNames()),!1),[this.isDragging()?Qk:""],!1))},t.prototype._changeAbleViewClassNames=function(r){var n=this._viewContainer,o=Tx(r.filter(Boolean),function(c){return c}).map(function(c){var u=W(c,1),d=u[0];return d}),i=this._viewClassNames,a=Cd(i,o),s=a.removed,l=a.added;s.forEach(function(c){Vo(n,i[c])}),l.forEach(function(c){ra(n,o[c])}),this._viewClassNames=o},t.prototype._getAbleViewClassNames=function(){var r=this;return(this.getEnabledAbles().map(function(n){var o;return((o=n.viewClassName)===null||o===void 0?void 0:o.call(n,r))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},t.prototype._getAbleClassName=function(r){var n=this;r===void 0&&(r="");var o=this.getEnabledAbles(),i=this.targetGesto,a=this.controlGesto,s=i?.isFlag()?i.getEventData():{},l=a?.isFlag()?a.getEventData():{};return o.map(function(c){var u,d,h,p=c.name,g=((u=c.className)===null||u===void 0?void 0:u.call(c,n))||"";return(!((d=s[p])===null||d===void 0)&&d.isEventStart||!((h=l[p])===null||h===void 0)&&h.isEventStart)&&(g+=" ".concat(ye("".concat(p).concat(r,"-dragging")))),g.trim()}).filter(Boolean).join(" ")},t.prototype._updateResizeObserver=function(r){var n,o=this.props,i=o.target,a=Ht(this.getControlBoxElement());if(!a.ResizeObserver||!i||!o.useResizeObserver){(n=this._reiszeObserver)===null||n===void 0||n.disconnect();return}if(!(r.target===i&&this._reiszeObserver)){var s=new a.ResizeObserver(this.checkUpdateRect);s.observe(i,{box:"border-box"}),this._reiszeObserver=s}},t.prototype._updateMutationObserver=function(r){var n=this,o,i=this.props,a=i.target,s=Ht(this.getControlBoxElement());if(!s.MutationObserver||!a||!i.useMutationObserver){(o=this._mutationObserver)===null||o===void 0||o.disconnect();return}if(!(r.target===a&&this._mutationObserver)){var l=new s.MutationObserver(function(c){var u,d;try{for(var h=rR(c),p=h.next();!p.done;p=h.next()){var g=p.value;g.type==="attributes"&&g.attributeName==="style"&&n.checkUpdateRect()}}catch(v){u={error:v}}finally{try{p&&!p.done&&(d=h.return)&&d.call(h)}finally{if(u)throw u.error}}});l.observe(a,{attributes:!0}),this._mutationObserver=l}},t.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:gx,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},t}(C.PureComponent),Df={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(e,t){var r,n=e.props,o=n.targets||[],i=e.getState(),a=i.left,s=i.top,l=i.isPersisted,c=n.zoom||1,u=e.renderGroupRects,d=((r=n.persistData)===null||r===void 0?void 0:r.children)||[];l?o=d.map(function(){return null}):d=[];var h=ai(e,"parentPosition",[a,s],function(g){return g.join(",")}),p=ai(e,"requestStyles",e.getRequestChildStyles(),function(g){return g.join(",")});return e.moveables=e.moveables.slice(0,o.length),ce(ce([],W(o.map(function(g,v){return t.createElement(si,{key:"moveable"+v,ref:V0(e,"moveables",v),target:g,origin:!1,requestStyles:p,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,useMutationObserver:n.useMutationObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:e,parentPosition:[a,s],persistData:d[v],zoom:c})})),!1),W(Mx(u.map(function(g,v){var m=g.pos1,x=g.pos2,y=g.pos3,b=g.pos4,w=[m,x,y,b];return[[0,1],[1,3],[3,2],[2,0]].map(function(_,T){var j=W(_,2),k=j[0],R=j[1];return ha(t,"",be(w[k],h),be(w[R],h),c,"group-rect-".concat(v,"-").concat(T))})}))),!1)}},C3=ua("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(e,t){t.datas.inputTarget=t.inputEvent&&t.inputEvent.target},dragEnd:function(e,t){var r=e.props.target,n=t.inputEvent,o=t.inputTarget,i=e.isMoveableElement(o),a=!i&&e.controlBox.contains(o);if(!(!n||!o||t.isDrag||e.isMoveableElement(o)||a)){var s=r.contains(o);he(e,"onClick",Re(e,t,{isDouble:t.isDouble,inputTarget:o,isTarget:r===o,moveableTarget:e.props.target,containsTarget:s}))}},dragGroupEnd:function(e,t){var r=t.inputEvent,n=t.inputTarget;if(!(!r||!n||t.isDrag||e.isMoveableElement(n)||t.datas.inputTarget===n)){var o=e.props.targets,i=o.indexOf(n),a=i>-1,s=!1;i===-1&&(i=Gr(o,function(l){return l.contains(n)}),s=i>-1),he(e,"onClickGroup",Re(e,t,{isDouble:t.isDouble,targets:o,inputTarget:n,targetIndex:i,isTarget:a,containsTarget:s,moveableTarget:o[i]}))}},dragControlEnd:function(e,t){this.dragEnd(e,t)},dragGroupControlEnd:function(e,t){this.dragEnd(e,t)}});function li(e){var t=e.originalDatas.draggable;return t||(e.originalDatas.draggable={},t=e.originalDatas.draggable),V(V({},e),{datas:t})}var E3=ua("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(e,t){var r=e.props,n=r.edgeDraggable;return n?A1(t,"edgeDraggable",n,e.getState().renderPoses,r.zoom):[]},dragCondition:function(e,t){var r,n=e.props,o=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!n.edgeDraggable||!o?!1:!n.draggable&&ut(o,ye("direction"))&&ut(o,ye("edge"))&&ut(o,ye("edgeDraggable"))},dragStart:function(e,t){return jt.dragStart(e,li(t))},drag:function(e,t){return jt.drag(e,li(t))},dragEnd:function(e,t){return jt.dragEnd(e,li(t))},dragGroupCondition:function(e,t){var r,n=e.props,o=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!n.edgeDraggable||!o?!1:!n.draggable&&ut(o,ye("direction"))&&ut(o,ye("line"))},dragGroupStart:function(e,t){return jt.dragGroupStart(e,li(t))},dragGroup:function(e,t){return jt.dragGroup(e,li(t))},dragGroupEnd:function(e,t){return jt.dragGroupEnd(e,li(t))},unset:function(e){return jt.unset(e)}}),ry={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},_3=[Xx,zx,Tk,Yk,jt,E3,ef,qk,Kk,uk,t3,r3,Jk,p3,h3,x3,Df,ry,C3,Bx,Kx];function ny(e,t){var r=W(e,3),n=r[0],o=r[1],i=r[2];return(n*t[0]+o*t[1]+i)/Math.sqrt(n*n+o*o)}function Ul(e,t){var r=W(e,2),n=r[0],o=r[1];return-n*t[0]-o*t[1]}function oy(e,t){return Math.max.apply(Math,ce([],W(e.map(function(r){var n=W(r,4),o=n[0],i=n[1],a=n[2],s=n[3];return Math.max(o[t],i[t],a[t],s[t])})),!1))}function iy(e,t){return Math.min.apply(Math,ce([],W(e.map(function(r){var n=W(r,4),o=n[0],i=n[1],a=n[2],s=n[3];return Math.min(o[t],i[t],a[t],s[t])})),!1))}function N3(e,t){var r,n,o,i=[0,0],a=[0,0],s=[0,0],l=[0,0],c=0,u=0;if(!e.length)return{pos1:i,pos2:a,pos3:s,pos4:l,minX:0,minY:0,maxX:0,maxY:0,width:c,height:u,rotation:t};var d=Ne(t,Mt);if(d%90){var h=d/180*Math.PI,p=Math.tan(h),g=-1/p,v=[zd,C1],m=[[0,0],[0,0]],x=[zd,C1],y=[[0,0],[0,0]];e.forEach(function(Y){Y.forEach(function(H){var K=ny([-p,1,0],H),J=ny([-g,1,0],H);v[0]>K&&(m[0]=H,v[0]=K),v[1]<K&&(m[1]=H,v[1]=K),x[0]>J&&(y[0]=H,x[0]=J),x[1]<J&&(y[1]=H,x[1]=J)})});var b=W(m,2),w=b[0],_=b[1],T=W(y,2),j=T[0],k=T[1],R=[-p,1,Ul([-p,1],w)],A=[-p,1,Ul([-p,1],_)],$=[-g,1,Ul([-g,1],j)],F=[-g,1,Ul([-g,1],k)];r=W([[R,$],[R,F],[A,$],[A,F]].map(function(Y){var H=W(Y,2),K=H[0],J=H[1];return Td(K,J)[0]}),4),i=r[0],a=r[1],s=r[2],l=r[3],c=x[1]-x[0],u=v[1]-v[0]}else{var L=iy(e,0),P=iy(e,1),O=oy(e,0),I=oy(e,1);if(i=[L,P],a=[O,P],s=[L,I],l=[O,I],c=O-L,u=I-P,d%180){var E=[s,i,l,a];n=W(E,4),i=n[0],a=n[1],s=n[2],l=n[3],c=I-P,u=O-L}}if(d%360>180){var E=[l,s,a,i];o=W(E,4),i=o[0],a=o[1],s=o[2],l=o[3]}var S=Hn([i,a,s,l]),M=S.minX,D=S.minY,N=S.maxX,z=S.maxY;return{pos1:i,pos2:a,pos3:s,pos4:l,width:c,height:u,minX:M,minY:D,maxX:N,maxY:z,rotation:t}}function ay(e,t){var r=t.map(function(n){if($e(n)){var o=ay(e,n),i=o.length;return i>1?o:i===1?o[0]:null}else{var a=Ft(e,function(s){var l=s.manager;return l.props.target===n});return a?(a.finded=!0,a.manager):null}}).filter(Boolean);return r.length===1&&$e(r[0])?r[0]:r}var D3=function(e){ca(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.differ=new u1,r.moveables=[],r.transformOrigin="50% 50%",r.renderGroupRects=[],r._targetGroups=[],r._hasFirstTargets=!1,r}return t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this)},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(r,n,o){var i;o===void 0&&(o=!0);var a=this.state;if(!this.controlBox||a.isPersisted)return;ei(!0),this.moveables.forEach(function(Z){Z.updateRect(r,!1,!1)});var s=this.props,l=this.moveables,c=a.target||s.target,u=l.map(function(Z){return{finded:!1,manager:Z}}),d=this.props.targetGroups||[],h=ay(u,d),p=s.useDefaultGroupRotate;h.push.apply(h,ce([],W(u.filter(function(Z){var oe=Z.finded;return!oe}).map(function(Z){var oe=Z.manager;return oe})),!1));var g=[],v=!n||r!==""&&s.updateGroup,m=s.defaultGroupRotate||0;if(!this._hasFirstTargets){var x=(i=s.persistData)===null||i===void 0?void 0:i.rotation;x!=null&&(m=x)}function y(Z,oe,ie){var re=Z.map(function(fe){if($e(fe)){var ue=y(fe,oe),ve=[ue.pos1,ue.pos2,ue.pos3,ue.pos4];return g.push(ue),{poses:ve,rotation:ue.rotation}}else return{poses:rr(fe.state),rotation:fe.getRotation()}}),G=re.map(function(fe){var ue=fe.rotation;return ue}),te=0,U=G[0],ee=G.every(function(fe){return Math.abs(U-fe)<.1});v?te=!p&&ee?U:m:te=!p&&!ie&&ee?U:oe;var ne=re.map(function(fe){var ue=fe.poses;return ue}),le=N3(ne,te);return le}var b=y(h,this.rotation,!0);v&&(this.rotation=b.rotation,this.transformOrigin=s.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=d,this.renderGroupRects=g;var w=this.transformOrigin,_=this.rotation,T=this.scale,j=b.width,k=b.height,R=b.minX,A=b.minY,$=Wk([[0,0],[j,0],[0,k],[j,k]],bf(w,j,k),this.rotation/180*Math.PI),F=Hn($.result),L=F.minX,P=F.minY,O=" rotate(".concat(_,"deg)")+" scale(".concat(kt(T[0]),", ").concat(kt(T[1]),")"),I="translate(".concat(-L,"px, ").concat(-P,"px)").concat(O);this.controlBox.style.transform="translate3d(".concat(R,"px, ").concat(A,"px, ").concat(this.props.translateZ||0,")"),c.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(w,";")+"width:".concat(j,"px;height:").concat(k,"px;")+"transform: ".concat(I),a.width=j,a.height=k;var E=this.getContainer(),S=Nf(this.controlBox,c,this.controlBox,this.getContainer(),this._rootContainer||E,[]),M=[S.left,S.top],D=W(rr(S),4),N=D[0],z=D[1],Y=D[2],H=D[3],K=Hn([N,z,Y,H]),J=[K.minX,K.minY],q=kt(T[0]*T[1]);S.pos1=be(N,J),S.pos2=be(z,J),S.pos3=be(Y,J),S.pos4=be(H,J),S.left=R-S.left+J[0],S.top=A-S.top+J[1],S.origin=be(Be(M,S.origin),J),S.beforeOrigin=be(Be(M,S.beforeOrigin),J),S.originalBeforeOrigin=Be(M,S.originalBeforeOrigin),S.transformOrigin=be(Be(M,S.transformOrigin),J),c.style.transform="translate(".concat(-L-J[0],"px, ").concat(-P-J[1],"px)")+O,ei(),this.updateState(V(V({},S),{posDelta:J,direction:q,beforeDirection:q}),o)},t.prototype.getRect=function(){return V(V({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},t.prototype.triggerEvent=function(r,n,o){if(o||r.indexOf("Group")>-1)return e.prototype.triggerEvent.call(this,r,n);this._emitter.trigger(r,n)},t.prototype.getRequestChildStyles=function(){var r=this.getEnabledAbles().reduce(function(n,o){var i,a,s=(a=(i=o.requestChildStyle)===null||i===void 0?void 0:i.call(o))!==null&&a!==void 0?a:[];return ce(ce([],W(n),!1),W(s),!1)},[]);return r},t.prototype.getMoveables=function(){return ce([],W(this.moveables),!1)},t.prototype.updateAbles=function(){e.prototype.updateAbles.call(this,ce(ce([],W(this.props.ables),!1),[Df],!1),"Group")},t.prototype._updateTargets=function(){e.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Hr(this._originalDragTarget,!0)},t.prototype._updateEvents=function(){var r=this.state,n=this.props,o=this._prevDragTarget,i=n.dragTarget||this.areaElement,a=n.targets,s=this.differ.update(a),l=s.added,c=s.changed,u=s.removed,d=l.length||u.length;(d||this._prevOriginalDragTarget!==this._originalDragTarget)&&(ni(this,!1),ni(this,!0),this.updateState({gestos:{}})),o!==i&&(r.target=null),r.target||(r.target=this.areaElement,this.controlBox.style.display="block"),r.target&&(this.targetGesto||(this.targetGesto=Zx(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=Qx(this,"GroupControl")));var h=!vf(r.container,n.container);h&&(r.container=n.container),(h||d||this.transformOrigin!==(n.defaultGroupOrigin||"50% 50%")||c.length||a.length&&!Px(this._targetGroups,n.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!d},t.prototype._updateObserver=function(){},t.defaultProps=V(V({},si.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t}(si),T3=function(e){ca(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.moveables=[],r}return t.prototype.render=function(){var r=this,n,o=this.props,i=o.cspNonce,a=o.cssStyled,s=o.persistData,l=o.targets||[],c=l.length,u=this.isUnmounted||!c,d=(n=s?.children)!==null&&n!==void 0?n:[];return u&&!c&&d.length?l=d.map(function(){return null}):u||(d=[]),C.createElement(a,{cspNonce:i,ref:mn(this,"controlBox"),className:ye("control-box")},l.map(function(h,p){var g,v,m=(v=(g=o.individualGroupableProps)===null||g===void 0?void 0:g.call(o,h,p))!==null&&v!==void 0?v:{};return C.createElement(si,V({key:"moveable"+p,ref:V0(r,"moveables",p)},o,m,{target:h,wrapperMoveable:r,isWrapperMounted:r.isMoveableMounted,persistData:d[p]}))}))},t.prototype.componentDidMount=function(){},t.prototype.componentDidUpdate=function(){},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(r,n,o){o===void 0&&(o=!0),ei(!0),this.moveables.forEach(function(i){i.updateRect(r,n,o)}),ei()},t.prototype.getRect=function(){return V(V({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},t.prototype.request=function(r,n,o){n===void 0&&(n={});var i=this.moveables.map(function(l){return l.request(r,V(V({},n),{isInstant:!1}),!1)}),a=o||n.isInstant,s={request:function(l){return i.forEach(function(c){return c.request(l)}),this},requestEnd:function(){return i.forEach(function(l){return l.requestEnd()}),this}};return a?s.request(n).requestEnd():s},t.prototype.dragStart=function(r,n){n===void 0&&(n=r.target);var o=n,i=Ft(this.moveables,function(a){var s=a.getTargets()[0],l=a.getControlBoxElement(),c=a.getDragElement();return!s||!c?!1:c===o||c.contains(o)||c!==s&&s===o||s.contains(o)||l===o||l.contains(o)});return i&&i.dragStart(r,n),this},t.prototype.hitTest=function(){return 0},t.prototype.isInside=function(){return!1},t.prototype.isDragging=function(){return!1},t.prototype.getDragElement=function(){return null},t.prototype.getMoveables=function(){return ce([],W(this.moveables),!1)},t.prototype.updateRenderPoses=function(){},t.prototype.checkUpdate=function(){},t.prototype.triggerEvent=function(){},t.prototype.updateAbles=function(){},t.prototype._updateEvents=function(){},t.prototype._updateObserver=function(){},t}(si);function sy(e,t){var r=[];return e.forEach(function(n){if(n){if(et(n)){t[n]&&r.push.apply(r,ce([],W(t[n]),!1));return}$e(n)?r.push.apply(r,ce([],W(sy(n,t)),!1)):r.push(n)}}),r}function ly(e,t){var r=[];return e.forEach(function(n){if(n){if(et(n)){t[n]&&r.push.apply(r,ce([],W(t[n]),!1));return}$e(n)?r.push(ly(n,t)):r.push(n)}}),r}function cy(e,t){return e.length!==t.length||e.some(function(r,n){var o=t[n];return!r&&!o?!1:r!=o?$e(r)&&$e(o)?cy(r,o):!0:!1})}var M3=function(e){ca(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.refTargets=[],r.selectorMap={},r._differ=new u1,r._elementTargets=[],r._tmpRefTargets=[],r._tmpSelectorMap={},r._onChangeTargets=null,r}return t.makeStyled=function(){var r={},n=this.getTotalAbles();n.forEach(function(i){var a=i.css;a&&a.forEach(function(s){r[s]=!0})});var o=Jt(r).join(`
`);this.defaultStyled=x1("div",ej(Ld,hR+o))},t.getTotalAbles=function(){return ce([zx,Df,ry,Bx],W(this.defaultAbles),!1)},t.prototype.render=function(){var r,n=this.constructor;n.defaultStyled||n.makeStyled();var o=this.props,i=o.ables,a=o.props,s=eR(o,["ables","props"]),l=W(this._updateRefs(!0),2),c=l[0],u=l[1],d=sy(c,u),h=d.length>1,p=n.getTotalAbles(),g=ce(ce([],W(p),!1),W(i||[]),!1),v=V(V(V({},s),a||{}),{ables:g,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});this._elementTargets=d;var m=null,x=this.moveable,y=s.persistData;if(y?.children&&(h=!0),s.individualGroupable)return C.createElement(T3,V({key:"individual-group",ref:mn(this,"moveable")},v,{target:null,targets:d}));if(h){var b=ly(c,u);if(x&&!x.props.groupable&&!x.props.individualGroupable){var w=x.props.target;w&&d.indexOf(w)>-1&&(m=V({},x.state))}return C.createElement(D3,V({key:"group",ref:mn(this,"moveable")},v,(r=s.groupableProps)!==null&&r!==void 0?r:{},{target:null,targets:d,targetGroups:b,firstRenderState:m}))}else{var _=d[0];if(x&&(x.props.groupable||x.props.individualGroupable)){var T=x.moveables||[],j=Ft(T,function(k){return k.props.target===_});j&&(m=V({},j.state))}return C.createElement(si,V({key:"single",ref:mn(this,"moveable")},v,{target:_,firstRenderState:m}))}},t.prototype.componentDidMount=function(){this._checkChangeTargets()},t.prototype.componentDidUpdate=function(){this._checkChangeTargets()},t.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},t.prototype.getTargets=function(){var r,n;return(n=(r=this.moveable)===null||r===void 0?void 0:r.getTargets())!==null&&n!==void 0?n:[]},t.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},t.prototype.waitToChangeTarget=function(){var r=this,n;return this._onChangeTargets=function(){r._onChangeTargets=null,n()},new Promise(function(o){n=o})},t.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},t.prototype.getManager=function(){return this.moveable},t.prototype.getMoveables=function(){return this.moveable.getMoveables()},t.prototype.getDragElement=function(){return this.moveable.getDragElement()},t.prototype._updateRefs=function(r){var n=this.refTargets,o=xf(this.props.target||this.props.targets),i=typeof document<"u",a=cy(n,o),s=this.selectorMap,l={};return this.refTargets.forEach(function c(u){if(et(u)){var d=s[u];d?l[u]=s[u]:i&&(a=!0,l[u]=[].slice.call(document.querySelectorAll(u)))}else $e(u)&&u.forEach(c)}),this._tmpRefTargets=o,this._tmpSelectorMap=l,[o,l,!r&&a]},t.prototype._checkChangeTargets=function(){var r,n,o;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var i=this._differ.update(this._elementTargets),a=i.added,s=i.removed,l=a.length||s.length;l&&((n=(r=this.props).onChangeTargets)===null||n===void 0||n.call(r,{moveable:this.moveable,targets:this._elementTargets}),(o=this._onChangeTargets)===null||o===void 0||o.call(this));var c=W(this._updateRefs(),3),u=c[0],d=c[1],h=c[2];this.refTargets=u,this.selectorMap=d,h&&this.forceUpdate()},t.defaultAbles=[],t.customStyledMap={},t.defaultStyled=null,tR([U0(gR)],t.prototype,"moveable",void 0),t}(C.PureComponent),uy=function(e){ca(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.defaultAbles=_3,t}(M3),Tf=function(e,t){return Tf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Tf(e,t)};function j3(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Tf(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function R3(e,t){return t={exports:{}},e(t,t.exports),t.exports}var wa=R3(function(e,t){function r(l){if(l&&typeof l=="object"){var c=l.which||l.keyCode||l.charCode;c&&(l=c)}if(typeof l=="number")return a[l];var u=String(l),d=n[u.toLowerCase()];if(d)return d;var d=o[u.toLowerCase()];if(d)return d;if(u.length===1)return u.charCodeAt(0)}r.isEventKey=function(c,u){if(c&&typeof c=="object"){var d=c.which||c.keyCode||c.charCode;if(d==null)return!1;if(typeof u=="string"){var h=n[u.toLowerCase()];if(h)return h===d;var h=o[u.toLowerCase()];if(h)return h===d}else if(typeof u=="number")return u===d;return!1}},t=e.exports=r;var n=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},o=t.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(i=97;i<123;i++)n[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)n[i-48]=i;for(i=1;i<13;i++)n["f"+i]=i+111;for(i=0;i<10;i++)n["numpad "+i]=i+96;var a=t.names=t.title={};for(i in n)a[n[i]]=i;for(var s in o)n[s]=o[s]});wa.code,wa.codes,wa.aliases;var k3=wa.names;wa.title;var dy={"+":"plus","left command":"meta","right command":"meta"},fy={shift:1,ctrl:2,alt:3,meta:4};function hy(e,t){var r=(k3[e]||t||"").toLowerCase();for(var n in dy)r=r.replace(n,dy[n]);return r.replace(/\s/g,"")}function py(e,t){t===void 0&&(t=hy(e.keyCode,e.key));var r=P3(e);return r.indexOf(t)===-1&&r.push(t),r.filter(Boolean)}function P3(e){var t=[e.shiftKey&&"shift",e.ctrlKey&&"ctrl",e.altKey&&"alt",e.metaKey&&"meta"];return t.filter(Boolean)}function vy(e){var t=e.slice();return t.sort(function(r,n){var o=fy[r]||5,i=fy[n]||5;return o-i}),t}var gy,A3=function(e){j3(t,e);function t(n){n===void 0&&(n=window);var o=e.call(this)||this;return o.container=n,o.ctrlKey=!1,o.altKey=!1,o.shiftKey=!1,o.metaKey=!1,o.clear=function(){return o.ctrlKey=!1,o.altKey=!1,o.shiftKey=!1,o.metaKey=!1,o},o.keydownEvent=function(i){o.triggerEvent("keydown",i)},o.keyupEvent=function(i){o.triggerEvent("keyup",i)},o.blur=function(){o.clear(),o.trigger("blur")},tt(n,"blur",o.blur),tt(n,"keydown",o.keydownEvent),tt(n,"keyup",o.keyupEvent),o}var r=t.prototype;return Object.defineProperty(t,"global",{get:function(){return gy||(gy=new t)},enumerable:!1,configurable:!0}),t.setGlobal=function(){return this.global},r.destroy=function(){var n=this.container;this.clear(),this.off(),Xe(n,"blur",this.blur),Xe(n,"keydown",this.keydownEvent),Xe(n,"keyup",this.keyupEvent)},r.keydown=function(n,o){return this.addEvent("keydown",n,o)},r.offKeydown=function(n,o){return this.removeEvent("keydown",n,o)},r.offKeyup=function(n,o){return this.removeEvent("keyup",n,o)},r.keyup=function(n,o){return this.addEvent("keyup",n,o)},r.addEvent=function(n,o,i){return $e(o)?this.on("".concat(n,".").concat(vy(o).join(".")),i):et(o)?this.on("".concat(n,".").concat(o),i):this.on(n,o),this},r.removeEvent=function(n,o,i){return $e(o)?this.off("".concat(n,".").concat(vy(o).join(".")),i):et(o)?this.off("".concat(n,".").concat(o),i):this.off(n,o),this},r.triggerEvent=function(n,o){this.ctrlKey=o.ctrlKey,this.shiftKey=o.shiftKey,this.altKey=o.altKey,this.metaKey=o.metaKey;var i=hy(o.keyCode,o.key),a=i==="ctrl"||i==="shift"||i==="meta"||i==="alt",s={key:i,isToggle:a,inputEvent:o,keyCode:o.keyCode,ctrlKey:o.ctrlKey,altKey:o.altKey,shiftKey:o.shiftKey,metaKey:o.metaKey};this.trigger(n,s),this.trigger("".concat(n,".").concat(i),s);var l=py(o,i);l.length>1&&this.trigger("".concat(n,".").concat(l.join(".")),s)},t}(yn),Mf=function(e,t){return Mf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Mf(e,t)};function my(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Mf(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var vt=function(){return vt=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},vt.apply(this,arguments)};function O3(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function I3(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}function Sa(e,t,r){for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function F3(e){if("touches"in e){var t=e.touches[0]||e.changedTouches[0];return{clientX:t.clientX,clientY:t.clientY}}else return{clientX:e.clientX,clientY:e.clientY}}function L3(e){if(typeof Map>"u")return e.filter(function(r,n){return e.indexOf(r)===n});var t=new Map;return e.filter(function(r){return t.has(r)?!1:(t.set(r,!0),!0)})}function B3(e,t,r){var n=wr(e);return n.elementFromPoint&&n.elementFromPoint(t,r)||null}function xy(e,t,r){var n=e.tag,o=e.children,i=e.attributes,a=e.className,s=e.style,l=t||wr(r).createElement(n);for(var c in i)l.setAttribute(c,i[c]);var u=l.children;if(o.forEach(function(h,p){xy(h,u[p],l)}),a&&a.split(/\s+/g).forEach(function(h){h&&!ut(l,h)&&ra(l,h)}),s){var d=l.style;for(var c in s)d[c]=s[c]}return!t&&r&&r.appendChild(l),l}function z3(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=t||{},i=o.className,a=i===void 0?"":i,s=o.style,l=s===void 0?{}:s,c=O3(o,["className","style"]);return{tag:e,className:a,style:l,attributes:c,children:r}}function jf(e,t,r){e!==t&&r(e,t)}function yy(e,t,r){var n;r===void 0&&(r=e.data.boundArea);var o=e.distX,i=o===void 0?0:o,a=e.distY,s=a===void 0?0:a,l=e.data,c=l.startX,u=l.startY;if(t>0){var d=Math.sqrt((i*i+s*s)/(1+t*t)),h=t*d;i=(i>=0?1:-1)*h,s=(s>=0?1:-1)*d}var p=Math.abs(i),g=Math.abs(s),v=i<0?c-r.left:r.right-c,m=s<0?u-r.top:r.bottom-u;n=vd([p,g],[0,0],[v,m],!!t),p=n[0],g=n[1],i=(i>=0?1:-1)*p,s=(s>=0?1:-1)*g;var x=Math.min(0,i),y=Math.min(0,s),b=c+x,w=u+y;return{left:b,top:w,right:b+p,bottom:w+g,width:p,height:g}}function Hl(e){var t=e.getBoundingClientRect(),r=t.left,n=t.top,o=t.width,i=t.height;return{pos1:[r,n],pos2:[r+o,n],pos3:[r,n+i],pos4:[r+o,n+i]}}function by(e,t,r){var n=Yo(e,t),o=n.list,i=n.prevList,a=n.added,s=n.removed,l=n.maintained;return Sa(Sa(Sa([],a.map(function(c){return o[c]}),!0),s.map(function(c){return i[c]}),!0),r?l.map(function(c){var u=c[1];return o[u]}):[])}function wy(e){for(var t=0,r=e.length,n=1;n<r;++n)t=Math.max(Vr(e[n],e[n-1]),t);return t}var Sy=ml(`
:host {
    position: fixed;
    display: none;
    border: 1px solid #4af;
    background: rgba(68, 170, 255, 0.5);
    pointer-events: none;
    will-change: transform;
    z-index: 100;
}
`),Rf="selecto-selection ".concat(Sy.className),kf=["className","boundContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","continueSelectWithoutDeselect","toggleContinueSelect","toggleContinueSelectWithoutDeselect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault","ratio","getElementRect","preventDragFromInside","rootContainer","dragCondition","clickBySelectEnd","checkOverflow","innerScrollOptions"],$3=Sa(["dragContainer","cspNonce","preventClickEventOnDrag","preventClickEventOnDragStart","preventRightClick"],kf),Cy=["dragStart","drag","dragEnd","selectStart","select","selectEnd","keydown","keyup","scroll","innerScroll"],G3=["clickTarget","getSelectableElements","setSelectedTargets","getElementPoints","getSelectedTargets","findSelectableTargets","triggerDragStart","checkScroll","selectTargetsByPoints","setSelectedTargetsByPoints"],V3=function(e){my(t,e);function t(n){n===void 0&&(n={});var o=e.call(this)||this;o.selectedTargets=[],o.dragScroll=new f1,o._onDragStart=function(s,l){var c=s.data,u=s.clientX,d=s.clientY,h=s.inputEvent,p=o.options,g=p.selectFromInside,v=p.selectByClick,m=p.rootContainer,x=p.boundContainer,y=p.preventDragFromInside,b=y===void 0?!0:y,w=p.clickBySelectEnd,_=p.dragCondition;if(_&&!_(s)){s.stop();return}c.data={};var T=Ht(o.container);c.innerWidth=T.innerWidth,c.innerHeight=T.innerHeight,o.findSelectableTargets(c),c.startSelectedTargets=o.selectedTargets,c.scaleMatrix=Sd(),c.containerX=0,c.containerY=0;var j=o.container,k={left:-1/0,top:-1/0,right:1/0,bottom:1/0};if(m){var R=o.container.getBoundingClientRect();c.containerX=R.left,c.containerY=R.top,c.scaleMatrix=_j(o.container,m)}if(x){var A=rt(x)&&"element"in x?vt({left:!0,top:!0,bottom:!0,right:!0},x):{element:x,left:!0,top:!0,bottom:!0,right:!0},$=A.element,F=void 0;if($){et($)?F=wr(j).querySelector($):$===!0?F=o.container:F=$;var L=F.getBoundingClientRect();A.left&&(k.left=L.left),A.top&&(k.top=L.top),A.right&&(k.right=L.right),A.bottom&&(k.bottom=L.bottom)}}c.boundArea=k;var P={left:u,top:d,right:u,bottom:d,width:0,height:0},O=[],I=v&&!w,E=!1;if(!g||I){var S=o._findElement(l||h.target,c.selectableTargets);E=!!S,I&&(O=S?[S]:[])}var M=!g&&E;if(M&&!v)return s.stop(),!1;var D=h.type,N=D==="mousedown"||D==="touchstart",z=!s.isClick&&N?o.emit("dragStart",vt(vt({},s),{data:c.data})):!0;if(!z)return s.stop(),!1;if(o.continueSelect?(O=by(o.selectedTargets,O,o.continueSelectWithoutDeselect),c.startPassedTargets=o.selectedTargets):c.startPassedTargets=[],o._select(O,P,s,!0,M&&v&&!w&&b),c.startX=u,c.startY=d,c.selectFlag=!1,c.preventDragFromInside=!1,h.target){var Y=fl(c.scaleMatrix,[u-c.containerX,d-c.containerY]);o.target.style.cssText+="position: ".concat(m?"absolute":"fixed",";")+"left:0px;top:0px;"+"transform: translate(".concat(Y[0],"px, ").concat(Y[1],"px)")}if(M&&v&&!w)h.preventDefault(),b&&(o._selectEnd(c.startSelectedTargets,c.startPassedTargets,P,s,!0),c.preventDragFromInside=!0);else{c.selectFlag=!0;var H=o.options,K=H.scrollOptions,J=H.innerScrollOptions,q=!1;if(J){for(var Z=s.inputEvent,oe=Z.target,ie=null,re=oe;re&&re!==wr(j).body;){var G=getComputedStyle(re).overflow!=="visible";if(G){ie=re;break}re=re.parentElement}ie&&(c.innerScrollOptions=vt({container:ie,checkScrollEvent:!0},J===!0?{}:J),o.dragScroll.dragStart(s,c.innerScrollOptions),q=!0)}!q&&K&&K.container&&o.dragScroll.dragStart(s,K),M&&v&&w&&(c.selectFlag=!1,s.preventDrag())}return!0},o._onDrag=function(s){if(s.data.selectFlag){var l=o.scrollOptions,c=s.data.innerScrollOptions,u=c||l?.container;if(u&&!s.isScroll&&o.dragScroll.drag(s,c||l))return}o._checkSelected(s)},o._onDragEnd=function(s){var l=s.data,c=s.inputEvent,u=yy(s,o.options.ratio),d=l.selectFlag,h=o.container;if(c&&o.emit("dragEnd",vt(vt({isDouble:!!s.isDouble,isClick:!!s.isClick,isDrag:!1,isSelect:d},s),{data:l.data,rect:u})),o.target.style.cssText+="display: none;",d)l.selectFlag=!1,o.dragScroll.dragEnd();else if(o.selectByClick&&o.clickBySelectEnd){var p=o._findElement(c?.target||B3(h,s.clientX,s.clientY),l.selectableTargets);o._select(p?[p]:[],u,s)}l.preventDragFromInside||o._selectEnd(l.startSelectedTargets,l.startPassedTargets,u,s)},o._onKeyDown=function(s){var l=o.options,c=!1;if(!o._keydownContinueSelect){var u=o._sameCombiKey(s,l.toggleContinueSelect);o._keydownContinueSelect=u,c||(c=u)}if(!o._keydownContinueSelectWithoutDeselection){var u=o._sameCombiKey(s,l.toggleContinueSelectWithoutDeselect);o._keydownContinueSelectWithoutDeselection=u,c||(c=u)}c&&o.emit("keydown",{keydownContinueSelect:o._keydownContinueSelect,keydownContinueSelectWithoutDeselection:o._keydownContinueSelectWithoutDeselection})},o._onKeyUp=function(s){var l=o.options,c=!1;if(o._keydownContinueSelect){var u=o._sameCombiKey(s,l.toggleContinueSelect,!0);o._keydownContinueSelect=!u,c||(c=u)}if(o._keydownContinueSelectWithoutDeselection){var u=o._sameCombiKey(s,l.toggleContinueSelectWithoutDeselect,!0);o._keydownContinueSelectWithoutDeselection=!u,c||(c=u)}c&&o.emit("keyup",{keydownContinueSelect:o._keydownContinueSelect,keydownContinueSelectWithoutDeselection:o._keydownContinueSelectWithoutDeselection})},o._onBlur=function(){(o._keydownContinueSelect||o._keydownContinueSelectWithoutDeselection)&&(o._keydownContinueSelect=!1,o._keydownContinueSelectWithoutDeselection=!1,o.emit("keyup",{keydownContinueSelect:o._keydownContinueSelect,keydownContinueSelectWithoutDeselection:o._keydownContinueSelectWithoutDeselection}))},o._onDocumentSelectStart=function(s){var l=wr(o.container);if(o.gesto.isFlag()){var c=o.dragContainer;c===Ht(o.container)&&(c=l.documentElement);var u=na(c)?[c]:[].slice.call(c),d=s.target;u.some(function(h){if(h===d||h.contains(d))return s.preventDefault(),!0})}},o.target=n.portalContainer;var i=n.container;o.options=vt({className:"",portalContainer:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,clickBySelectEnd:!1,hitRate:100,continueSelect:!1,continueSelectWithoutDeselect:!1,toggleContinueSelect:null,toggleContinueSelectWithoutDeselect:null,keyContainer:null,scrollOptions:null,checkInput:!1,preventDefault:!1,boundContainer:!1,preventDragFromInside:!0,dragCondition:null,rootContainer:null,checkOverflow:!1,innerScrollOptions:!1,getElementRect:Hl,cspNonce:"",ratio:0},n);var a=o.options.portalContainer;return a&&(i=a.parentElement),o.container=i||document.body,o.initElement(),o.initDragScroll(),o.setKeyController(),o}var r=t.prototype;return r.setSelectedTargets=function(n){var o=this.selectedTargets,i=Yo(o,n),a=i.added,s=i.removed,l=i.prevList,c=i.list;return this.selectedTargets=n,{added:a.map(function(u){return c[u]}),removed:s.map(function(u){return l[u]}),beforeSelected:o,selected:n}},r.setSelectedTargetsByPoints=function(n,o){var i=Math.min(n[0],o[0]),a=Math.min(n[1],o[1]),s=Math.max(n[0],o[0]),l=Math.max(n[1],o[1]),c={left:i,top:a,right:s,bottom:l,width:s-i,height:l-a},u={ignoreClick:!0};this.findSelectableTargets(u);var d=this.hitTest(c,u,!0,null),h=this.setSelectedTargets(d);return vt(vt({},h),{rect:c})},r.selectTargetsByPoints=function(n,o){var i=new MouseEvent("mousedown",{clientX:n[0],clientY:n[1],cancelable:!0,bubbles:!0}),a=new MouseEvent("mousemove",{clientX:o[0],clientY:o[1],cancelable:!0,bubbles:!0}),s=new MouseEvent("mousemove",{clientX:o[0],clientY:o[1],cancelable:!0,bubbles:!0}),l=this.gesto,c=l.onDragStart(i);c!==!1&&(l.onDrag(a),l.onDragEnd(s))},r.getSelectedTargets=function(){return this.selectedTargets},r.triggerDragStart=function(n){return this.gesto.triggerDragStart(n),this},r.destroy=function(){var n;this.off(),this.keycon&&this.keycon.destroy(),this.gesto.unset(),this.injectResult.destroy(),this.dragScroll.dragEnd(),Xe(document,"selectstart",this._onDocumentSelectStart),this.options.portalContainer||(n=this.target.parentElement)===null||n===void 0||n.removeChild(this.target),this.keycon=null,this.gesto=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},r.getElementPoints=function(n){var o=this.getElementRect||Hl,i=o(n),a=[i.pos1,i.pos2,i.pos4,i.pos3];if(o!==Hl){var s=n.getBoundingClientRect();return Dd(a,s)}return a},r.getSelectableElements=function(){var n=this.container,o=[];return this.options.selectableTargets.forEach(function(i){if(It(i)){var a=i();a&&o.push.apply(o,[].slice.call(a))}else if(na(i))o.push(i);else if(rt(i))o.push(i.value||i.current);else{var s=[].slice.call(wr(n).querySelectorAll(i));o.push.apply(o,s)}}),o},r.checkScroll=function(){if(this.gesto.isFlag()){var n=this.scrollOptions,o=this.gesto.getEventData().innerScrollOptions,i=o||n?.container;i&&this.dragScroll.checkScroll(vt({inputEvent:this.gesto.getCurrentEvent()},o||n))}},r.findSelectableTargets=function(n){var o=this;n===void 0&&(n=this.gesto.getEventData());var i=this.getSelectableElements(),a=i.map(function(d){return o.getElementPoints(d)});n.selectableTargets=i,n.selectablePoints=a,n.selectableParentMap=null;var s=this.options,l=s.checkOverflow||s.innerScrollOptions,c=wr(this.container);if(l){var u=new Map;n.selectableInnerScrollParentMap=u,n.selectableInnerScrollPathsList=i.map(function(d,h){for(var p=d.parentElement,g=[],v=[],m=function(){var x=u.get(p);if(!x){var y=getComputedStyle(p).overflow!=="visible";if(y){var b=Hl(p);x={parentElement:p,indexes:[],points:[b.pos1,b.pos2,b.pos4,b.pos3],paths:Sa([],v)},g.push(p),g.forEach(function(w){u.set(w,x)}),g=[]}}x?(p=x.parentElement,u.get(p).indexes.push(h),v.push(p)):g.push(p),p=p.parentElement};p&&p!==c.body;)m();return v})}return s.checkOverflow||(n.selectableInners=i.map(function(){return!0})),this._refreshGroups(n),i},r.clickTarget=function(n,o){var i=F3(n),a=i.clientX,s=i.clientY,l={data:{selectFlag:!1},clientX:a,clientY:s,inputEvent:n,isClick:!0,isTrusted:!1,stop:function(){return!1}};return this._onDragStart(l,o)&&this._onDragEnd(l),this},r.setKeyController=function(){var n=this.options,o=n.keyContainer,i=n.toggleContinueSelect,a=n.toggleContinueSelectWithoutDeselect;this.keycon&&(this.keycon.destroy(),this.keycon=null),(i||a)&&(this.keycon=new A3(o||Ht(this.container)),this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur",this._onBlur))},r.setClassName=function(n){this.options.className=n,this.target.setAttribute("class","".concat(Rf," ").concat(n||""))},r.setKeyEvent=function(){var n=this.options,o=n.toggleContinueSelect,i=n.toggleContinueSelectWithoutDeselect;!o&&!i||this.keycon||this.setKeyController()},r.setKeyContainer=function(n){var o=this,i=this.options;jf(i.keyContainer,n,function(){i.keyContainer=n,o.setKeyController()})},r.getContinueSelect=function(){var n=this.options,o=n.continueSelect,i=n.toggleContinueSelect;return!i||!this._keydownContinueSelect?o:!o},r.getContinueSelectWithoutDeselect=function(){var n=this.options,o=n.continueSelectWithoutDeselect,i=n.toggleContinueSelectWithoutDeselect;return!i||!this._keydownContinueSelectWithoutDeselection?o:!o},r.setToggleContinueSelect=function(n){var o=this,i=this.options;jf(i.toggleContinueSelect,n,function(){i.toggleContinueSelect=n,o.setKeyEvent()})},r.setToggleContinueSelectWithoutDeselect=function(n){var o=this,i=this.options;jf(i.toggleContinueSelectWithoutDeselect,n,function(){i.toggleContinueSelectWithoutDeselect=n,o.setKeyEvent()})},r.setPreventDefault=function(n){this.gesto.options.preventDefault=n},r.setCheckInput=function(n){this.gesto.options.checkInput=n},r.initElement=function(){var n=this.options,o=n.dragContainer,i=n.checkInput,a=n.preventDefault,s=n.preventClickEventOnDragStart,l=n.preventClickEventOnDrag,c=n.preventClickEventByCondition,u=n.preventRightClick,d=u===void 0?!0:u,h=n.className,p=this.container;this.target=xy(z3("div",{className:"".concat(Rf," ").concat(h||"")}),this.target,p);var g=this.target;this.dragContainer=typeof o=="string"?[].slice.call(wr(p).querySelectorAll(o)):o||this.target.parentNode,this.gesto=new m1(this.dragContainer,{checkWindowBlur:!0,container:Ht(p),checkInput:i,preventDefault:a,preventClickEventOnDragStart:s,preventClickEventOnDrag:l,preventClickEventByCondition:c,preventRightClick:d}).on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd}),tt(document,"selectstart",this._onDocumentSelectStart),this.injectResult=Sy.inject(g,{nonce:this.options.cspNonce})},r.hitTest=function(n,o,i,a){var s=this.options,l=s.hitRate,c=s.selectByClick,u=n.left,d=n.top,h=n.right,p=n.bottom,g=o.innerGroups,v=o.innerWidth,m=o.innerHeight,x=a?.clientX,y=a?.clientY,b=o.ignoreClick,w=[[u,d],[h,d],[h,p],[u,p]],_=function(S,M){var D=$r(typeof l=="function"?"".concat(l(M)):"".concat(l)),N=b?!1:pl([x,y],S);if(!i&&c&&N)return!0;var z=jd(w,S);if(!z.length)return!1;var Y=sa(z),H=0;if(Y===0&&sa(S)===0?(H=wy(S),Y=wy(z)):H=sa(S),D.unit==="px")return Y>=D.value;var K=ta(Math.round(Y/H*100),0,100);return K>=Math.min(100,D.value)},T=o.selectableTargets,j=o.selectablePoints,k=o.selectableInners;if(!g)return T.filter(function(S,M){return k[M]?_(j[M],T[M]):!1});for(var R=[],A=Math.floor(u/v),$=Math.floor(h/v),F=Math.floor(d/m),L=Math.floor(p/m),P=A;P<=$;++P){var O=g[P];if(O)for(var I=F;I<=L;++I){var E=O[I];E&&E.forEach(function(S){var M=j[S],D=k[S],N=T[S];D&&_(M,N)&&R.push(N)})}}return L3(R)},r.initDragScroll=function(){var n=this;this.dragScroll.on("scrollDrag",function(o){var i=o.next;i(n.gesto.getCurrentEvent())}).on("scroll",function(o){var i=o.container,a=o.direction,s=n.gesto.getEventData().innerScrollOptions;s?n.emit("innerScroll",{container:i,direction:a}):n.emit("scroll",{container:i,direction:a})}).on("move",function(o){var i=o.offsetX,a=o.offsetY,s=o.inputEvent,l=n.gesto;if(!(!l||!l.isFlag())){var c=n.gesto.getEventData(),u=c.boundArea;c.startX-=i,c.startY-=a;var d=n.gesto.getEventData().innerScrollOptions,h=d?.container,p=!1;if(h){var g=c.selectableInnerScrollParentMap,v=g.get(h);v&&(v.paths.forEach(function(m){var x=g.get(m);x.points.forEach(function(y){y[0]-=i,y[1]-=a})}),v.indexes.forEach(function(m){c.selectablePoints[m].forEach(function(x){x[0]-=i,x[1]-=a})}),p=!0)}p||c.selectablePoints.forEach(function(m){m.forEach(function(x){x[0]-=i,x[1]-=a})}),n._refreshGroups(c),u.left-=i,u.right-=i,u.top-=a,u.bottom-=a,n.gesto.scrollBy(i,a,s.inputEvent),n._checkSelected(n.gesto.getCurrentEvent())}})},r._select=function(n,o,i,a,s){s===void 0&&(s=!1);var l=i.inputEvent,c=i.data,u=this.setSelectedTargets(n),d=Yo(c.startSelectedTargets,n),h=d.added,p=d.removed,g=d.prevList,v=d.list,m={startSelected:g,startAdded:h.map(function(x){return v[x]}),startRemoved:p.map(function(x){return g[x]})};a&&this.emit("selectStart",vt(vt(vt({},u),m),{rect:o,inputEvent:l,data:c.data,isTrusted:i.isTrusted,isDragStartEnd:s})),(u.added.length||u.removed.length)&&this.emit("select",vt(vt(vt({},u),m),{rect:o,inputEvent:l,data:c.data,isTrusted:i.isTrusted,isDragStartEnd:s}))},r._selectEnd=function(n,o,i,a,s){s===void 0&&(s=!1);var l=a.inputEvent,c=a.isDouble,u=a.data,d=l&&l.type,h=d==="mousedown"||d==="touchstart",p=Yo(n,this.selectedTargets),g=p.added,v=p.removed,m=p.prevList,x=p.list,y=Yo(o,this.selectedTargets),b=y.added,w=y.removed,_=y.prevList,T=y.list;this.emit("selectEnd",{startSelected:n,beforeSelected:o,selected:this.selectedTargets,added:g.map(function(j){return x[j]}),removed:v.map(function(j){return m[j]}),afterAdded:b.map(function(j){return T[j]}),afterRemoved:w.map(function(j){return _[j]}),isDragStart:h&&s,isDragStartEnd:h&&s,isClick:!!a.isClick,isDouble:!!c,rect:i,inputEvent:l,data:u.data,isTrusted:a.isTrusted})},r._checkSelected=function(n,o){o===void 0&&(o=yy(n,this.options.ratio));var i=n.data,a=o.top,s=o.left,l=o.width,c=o.height,u=i.selectFlag,d=i.containerX,h=i.containerY,p=i.scaleMatrix,g=fl(p,[s-d,a-h]),v=fl(p,[l,c]),m=[];if(u){this.target.style.cssText+="display: block;left:0px;top:0px;"+"transform: translate(".concat(g[0],"px, ").concat(g[1],"px);")+"width:".concat(v[0],"px;height:").concat(v[1],"px;");var x=this.hitTest(o,i,!0,n);m=by(i.startPassedTargets,x,this.continueSelect&&this.continueSelectWithoutDeselect)}var y=this.emit("drag",vt(vt({},n),{data:i.data,isSelect:u,rect:o}));if(y===!1){this.target.style.cssText+="display: none;",n.stop();return}u&&this._select(m,o,n)},r._sameCombiKey=function(n,o,i){if(!o)return!1;var a=py(n.inputEvent,n.key),s=[].concat(o),l=$e(s[0])?s:[s];if(i){var c=n.key;return l.some(function(u){return u.some(function(d){return d===c})})}return l.some(function(u){return u.every(function(d){return a.indexOf(d)>-1})})},r._findElement=function(n,o){for(var i=n;i&&!(o.indexOf(i)>-1);)i=i.parentElement;return i},r._refreshGroups=function(n){var o,i=n.innerWidth,a=n.innerHeight,s=n.selectablePoints;if(this.options.checkOverflow){var l=(o=this.gesto.getEventData().innerScrollOptions)===null||o===void 0?void 0:o.container,c=n.selectableInnerScrollParentMap,u=n.selectableInnerScrollPathsList;n.selectableInners=u.map(function(p,g){var v=!1;return p.every(function(m){if(v)return!0;if(m===l)return v=!0,!0;var x=c.get(m);if(x){var y=s[g],b=x.points,w=jd(y,b);if(!w.length)return!1}return!0})})}if(!i||!a)n.innerGroups=null;else{var d=n.selectablePoints,h={};d.forEach(function(p,g){var v=1/0,m=-1/0,x=1/0,y=-1/0;p.forEach(function(_){var T=Math.floor(_[0]/i),j=Math.floor(_[1]/a);v=Math.min(T,v),m=Math.max(T,m),x=Math.min(j,x),y=Math.max(j,y)});for(var b=v;b<=m;++b)for(var w=x;w<=y;++w)h[b]=h[b]||{},h[b][w]=h[b][w]||[],h[b][w].push(g)}),n.innerGroups=h}},t=I3([tj(kf,function(n,o){var i={enumerable:!0,configurable:!0,get:function(){return this.options[o]}},a=Go("get ".concat(o));n[a]?i.get=function(){return this[a]()}:i.get=function(){return this.options[o]};var s=Go("set ".concat(o));n[s]?i.set=function(l){this[s](l)}:i.set=function(l){this.options[o]=l},Object.defineProperty(n,o,i)})],t),t}(yn),U3=function(e){my(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(V3),Pf=function(e,t){return Pf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Pf(e,t)};function H3(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Pf(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Wl=function(){return Wl=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Wl.apply(this,arguments)};function W3(e,t,r,n){var o=arguments.length,i=o<3?t:n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}var Ey=Cy.map(function(e){return Go("on ".concat(e))}),Y3=function(e){H3(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){return X.createElement("div",{className:Rf,ref:mn(this,"selectionElement")})},r.componentDidMount=function(){var n=this,o=this.props,i={};$3.forEach(function(a){a in o&&(i[a]=o[a])}),this.selecto=new U3(Wl(Wl({},i),{portalContainer:this.selectionElement})),Cy.forEach(function(a,s){n.selecto.on(a,function(l){var c=n.props,u=c[Ey[s]]&&c[Ey[s]](l);u===!1&&l.stop()})})},r.componentDidUpdate=function(n){var o=this.props,i=this.selecto;kf.forEach(function(a){n[a]!==o[a]&&(i[a]=o[a])})},r.componentWillUnmount=function(){this.selecto.destroy()},W3([U0(G3)],t.prototype,"selecto",void 0),t}(X.PureComponent);const q3=()=>{const e=qt(),t=je(),{zoom:r}=At();return{handleDragOver:i=>{i.preventDefault()},handleDrop:i=>{const a=document.querySelector(".veltix-viewport-canvas");i.preventDefault();const s=i.dataTransfer.getData("chart-type");if(s){const{clientX:l,clientY:c}=i,{left:u,top:d}=a.getBoundingClientRect(),h=(l-u)/r,p=(c-d)/r,g=e.get(s),v={id:po(),type:s,title:g?`${g.title}`:`${s}`,props:{},position:{left:h,top:p,width:300,height:200}};t.addNode(v)}}}};function X3(e,t){let r=null;return function(...n){r&&clearTimeout(r),r=setTimeout(()=>{e(...n)},t)}}function K3({isDragging:e,isTouchPadDragging:t,spacePressed:r,mode:n}){return e||t?"cursor-grabbing":r||n==="hand"?"cursor-grab":"cursor-default"}function Z3(e){return Number(e.toFixed(2))}function Q3(e,t){const o=e.width-120,i=e.height-40*2,a=o/t.width,s=i/t.height,l=Math.min(a,s,1),c=t.width*l,u=t.height*l,d=60+(o-c)/2,h=40+(i-u)/2;return{zoom:l,position:{x:d,y:h}}}function J3({formatZoom:e,editorRef:t,canvasState:r,setCanvasState:n,setSpacePressed:o,setIsDragging:i,setDragStart:a,setIsTouchPadDragging:s,spacePressed:l,mode:c,isDragging:u,dragStart:d}){const h=y=>{y.code==="Space"&&!y.repeat?(y.preventDefault(),o(!0)):(y.metaKey||y.ctrlKey)&&y.key==="1"&&(y.preventDefault(),n({zoom:1,position:r.position}))},p=y=>{y.code==="Space"&&(y.preventDefault(),o(!1),i(!1))},g=y=>{!(l||c==="hand")||y.target.closest(".element")||(i(!0),a({x:y.clientX-r.position.x,y:y.clientY-r.position.y}))},v=y=>{u&&n({...r,position:{x:y.clientX-d.x,y:y.clientY-d.y}})},m=()=>{i(!1)},x=(y,b)=>{const w=t.current;if(w)if(y.ctrlKey||y.metaKey){y.preventDefault();const _=r.zoom,T=b(Math.max(.1,Math.min(2,_-y.deltaY*.004))),j=w.getBoundingClientRect(),k=y.clientX-j.left,R=y.clientY-j.top,A=(k-r.position.x)/_,$=(R-r.position.y)/_,F={x:k-A*T,y:R-$*T};n({zoom:T,position:F})}else y.buttons===0&&(y.preventDefault(),n({...r,position:{x:r.position.x-y.deltaX,y:r.position.y-y.deltaY}}),s(!0))};return X.useEffect(()=>(window.addEventListener("keydown",h),window.addEventListener("keyup",p),()=>{window.removeEventListener("keydown",h),window.removeEventListener("keyup",p)}),[]),X.useEffect(()=>{const y=t.current;if(!y)return;const b=w=>x(w,e);return y.addEventListener("wheel",b,{passive:!1}),()=>{y.removeEventListener("wheel",b)}},[r]),X.useEffect(()=>{const y=()=>{s(!1)};return window.addEventListener("mouseup",y),()=>{window.removeEventListener("mouseup",y)}},[]),X.useEffect(()=>{const y=t.current;if(y)return y.addEventListener("mousedown",g),y.addEventListener("mousemove",v),y.addEventListener("mouseup",m),y.addEventListener("mouseleave",m),()=>{y.removeEventListener("mousedown",g),y.removeEventListener("mousemove",v),y.removeEventListener("mouseup",m),y.removeEventListener("mouseleave",m)}},[r,d,u,l,c]),{handleKeyDown:h,handleKeyUp:p,handleMouseDown:g,handleMouseMove:v,handleMouseUp:m,handleWheel:x}}function _y(){const e=X.useRef(null),{setCanvasState:t,mode:r,spacePressed:n,setSpacePressed:o,isDragging:i,setIsDragging:a,dragStart:s,setDragStart:l,isTouchPadDragging:c,setIsTouchPadDragging:u}=At(),d=At(),h=fS();J3({formatZoom:Z3,editorRef:e,canvasState:d,setCanvasState:t,setSpacePressed:o,setIsDragging:a,setDragStart:l,setIsTouchPadDragging:u,spacePressed:n,mode:r,isDragging:i,dragStart:s});const p=X.useCallback(m=>{const x=e.current||document.querySelector(".veltix-viewport");if(!x)return;const y=x.getBoundingClientRect();if(!m)return;const b=Q3(y,m);t({zoom:b.zoom,position:b.position})},[e,t]),g=X.useCallback(X3(m=>{p(m)},40),[p]),v=X.useCallback(()=>{h&&p(h)},[p,h]);return eP(e,g,h),{ref:e,position:d.position,zoom:d.zoom,isDragging:i,spacePressed:n,isTouchPadDragging:c,mode:r,calculateFitZoom:g,fitViewport:v,cursorStyle:K3({isDragging:i,isTouchPadDragging:c,spacePressed:n,mode:r})}}function eP(e,t,r){X.useEffect(()=>{if(e.current){t(r);const n=new ResizeObserver(()=>{t(r)});return n.observe(e.current),()=>{n.disconnect()}}},[t,r,e])}class tP{constructor(){this.keys=new Map}define(t,r=!1){this.keys.set(t,r)}set(t,r){this.keys.set(t,r)}get(t){return this.keys.get(t)||!1}}const Af=new tP;class rP{constructor(){this.commands=new Map}register(t,r){this.commands.set(t,r)}execute(t,...r){this.commands.get(t)?.(...r)}}const nP=new rP;var ci=(e=>(e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl",e))(ci||{}),ze=(e=>(e[e.DependsOnKbLayout=-1]="DependsOnKbLayout",e[e.Unknown=0]="Unknown",e[e.Backspace=1]="Backspace",e[e.Tab=2]="Tab",e[e.Enter=3]="Enter",e[e.Shift=4]="Shift",e[e.Ctrl=5]="Ctrl",e[e.Alt=6]="Alt",e[e.PauseBreak=7]="PauseBreak",e[e.CapsLock=8]="CapsLock",e[e.Escape=9]="Escape",e[e.Space=10]="Space",e[e.PageUp=11]="PageUp",e[e.PageDown=12]="PageDown",e[e.End=13]="End",e[e.Home=14]="Home",e[e.LeftArrow=15]="LeftArrow",e[e.UpArrow=16]="UpArrow",e[e.RightArrow=17]="RightArrow",e[e.DownArrow=18]="DownArrow",e[e.Insert=19]="Insert",e[e.Delete=20]="Delete",e[e.KEY_0=21]="KEY_0",e[e.KEY_1=22]="KEY_1",e[e.KEY_2=23]="KEY_2",e[e.KEY_3=24]="KEY_3",e[e.KEY_4=25]="KEY_4",e[e.KEY_5=26]="KEY_5",e[e.KEY_6=27]="KEY_6",e[e.KEY_7=28]="KEY_7",e[e.KEY_8=29]="KEY_8",e[e.KEY_9=30]="KEY_9",e[e.KEY_A=31]="KEY_A",e[e.KEY_B=32]="KEY_B",e[e.KEY_C=33]="KEY_C",e[e.KEY_D=34]="KEY_D",e[e.KEY_E=35]="KEY_E",e[e.KEY_F=36]="KEY_F",e[e.KEY_G=37]="KEY_G",e[e.KEY_H=38]="KEY_H",e[e.KEY_I=39]="KEY_I",e[e.KEY_J=40]="KEY_J",e[e.KEY_K=41]="KEY_K",e[e.KEY_L=42]="KEY_L",e[e.KEY_M=43]="KEY_M",e[e.KEY_N=44]="KEY_N",e[e.KEY_O=45]="KEY_O",e[e.KEY_P=46]="KEY_P",e[e.KEY_Q=47]="KEY_Q",e[e.KEY_R=48]="KEY_R",e[e.KEY_S=49]="KEY_S",e[e.KEY_T=50]="KEY_T",e[e.KEY_U=51]="KEY_U",e[e.KEY_V=52]="KEY_V",e[e.KEY_W=53]="KEY_W",e[e.KEY_X=54]="KEY_X",e[e.KEY_Y=55]="KEY_Y",e[e.KEY_Z=56]="KEY_Z",e[e.Meta=57]="Meta",e[e.ContextMenu=58]="ContextMenu",e[e.F1=59]="F1",e[e.F2=60]="F2",e[e.F3=61]="F3",e[e.F4=62]="F4",e[e.F5=63]="F5",e[e.F6=64]="F6",e[e.F7=65]="F7",e[e.F8=66]="F8",e[e.F9=67]="F9",e[e.F10=68]="F10",e[e.F11=69]="F11",e[e.F12=70]="F12",e[e.F13=71]="F13",e[e.F14=72]="F14",e[e.F15=73]="F15",e[e.F16=74]="F16",e[e.F17=75]="F17",e[e.F18=76]="F18",e[e.F19=77]="F19",e[e.NumLock=78]="NumLock",e[e.ScrollLock=79]="ScrollLock",e[e.US_SEMICOLON=80]="US_SEMICOLON",e[e.US_EQUAL=81]="US_EQUAL",e[e.US_COMMA=82]="US_COMMA",e[e.US_MINUS=83]="US_MINUS",e[e.US_DOT=84]="US_DOT",e[e.US_SLASH=85]="US_SLASH",e[e.US_BACKTICK=86]="US_BACKTICK",e[e.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",e[e.US_BACKSLASH=88]="US_BACKSLASH",e[e.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",e[e.US_QUOTE=90]="US_QUOTE",e[e.OEM_8=91]="OEM_8",e[e.OEM_102=92]="OEM_102",e[e.NUMPAD_0=93]="NUMPAD_0",e[e.NUMPAD_1=94]="NUMPAD_1",e[e.NUMPAD_2=95]="NUMPAD_2",e[e.NUMPAD_3=96]="NUMPAD_3",e[e.NUMPAD_4=97]="NUMPAD_4",e[e.NUMPAD_5=98]="NUMPAD_5",e[e.NUMPAD_6=99]="NUMPAD_6",e[e.NUMPAD_7=100]="NUMPAD_7",e[e.NUMPAD_8=101]="NUMPAD_8",e[e.NUMPAD_9=102]="NUMPAD_9",e[e.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",e[e.NUMPAD_ADD=104]="NUMPAD_ADD",e[e.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",e[e.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",e[e.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",e[e.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",e[e.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",e[e.ABNT_C1=110]="ABNT_C1",e[e.ABNT_C2=111]="ABNT_C2",e[e.MAX_VALUE=112]="MAX_VALUE",e))(ze||{});class oP{constructor(){this.bindings=[]}register(t){this.bindings.push(t)}handleKeydown(t){const r=iP(t),n=aP(t),o=this.bindings.filter(i=>typeof i.keys=="number"?i.keys===n&&(!i.when||i.when()):i.keys===r&&(!i.when||i.when())).sort((i,a)=>(a.weight||0)-(i.weight||0));if(o.length>0){t.preventDefault();const i=o[0],a=nd();i.handler?i.handler(a):nP.execute(i.id,a)}}}const Of=new oP;function iP(e){const t=[];return e.ctrlKey&&t.push("Ctrl"),e.metaKey&&t.push("Meta"),e.altKey&&t.push("Alt"),e.shiftKey&&t.push("Shift"),t.push(e.key.length===1?e.key.toUpperCase():e.key),t.join("+")}function aP(e){let t=0;(e.ctrlKey||e.metaKey)&&(t|=ci.CtrlCmd),e.shiftKey&&(t|=ci.Shift),e.altKey&&(t|=ci.Alt);let r=0;switch(e.key.toUpperCase()){case"A":r=ze.KEY_A;break;case"B":r=ze.KEY_B;break;case"C":r=ze.KEY_C;break;case"D":r=ze.KEY_D;break;case"E":r=ze.KEY_E;break;case"F":r=ze.KEY_F;break;case"G":r=ze.KEY_G;break;case"H":r=ze.KEY_H;break;case"I":r=ze.KEY_I;break;case"J":r=ze.KEY_J;break;case"K":r=ze.KEY_K;break;case"L":r=ze.KEY_L;break;case"M":r=ze.KEY_M;break;case"N":r=ze.KEY_N;break;case"O":r=ze.KEY_O;break;case"P":r=ze.KEY_P;break;case"Q":r=ze.KEY_Q;break;case"R":r=ze.KEY_R;break;case"S":r=ze.KEY_S;break;case"T":r=ze.KEY_T;break;case"U":r=ze.KEY_U;break;case"V":r=ze.KEY_V;break;case"W":r=ze.KEY_W;break;case"X":r=ze.KEY_X;break;case"Y":r=ze.KEY_Y;break;case"Z":r=ze.KEY_Z;break;case"BACKSPACE":r=ze.Backspace;break;case"DELETE":r=ze.Delete;break;case"ENTER":r=ze.Enter;break;case" ":r=ze.Space;break;default:r=0;break}return t|r}typeof window<"u"&&window.addEventListener("keydown",e=>Of.handleKeydown(e));class Ny{constructor(t,r){this._key=t,this._defaultValue=r,Af.define(t,r)}get(){return Af.get(this._key)}set(t){Af.set(this._key,t)}get key(){return this._key}get defaultValue(){return this._defaultValue}}var en;(e=>{e.focus=new Ny("editorFocus",!1),e.nodeFocus=new Ny("nodeFocus",!1)})(en||(en={}));const sP=(e,{onFocus:t,onBlur:r})=>(X.useEffect(()=>{const n=e.current;if(!n)return;n.setAttribute("tabIndex","0"),n.style.outline="none";const o=()=>{t()},i=()=>{r()};return n.addEventListener("focus",o),n.addEventListener("blur",i),()=>{n.removeEventListener("focus",o),n.removeEventListener("blur",i)}},[e]),{ref:e}),lP=({selecto:e,moveableManager:t,selectedTargets:r,onCheckBlur:n,onSetSelectedTargets:o,width:i,height:a})=>{const{zoom:s,setZoom:l}=At(),c=b=>{l(Math.max(.1,Math.min(3,s*b.scale)))},u=()=>{},d=b=>{const w=b.inputEvent.target;n(),(w.nodeName==="A"||t.current.getMoveable().isMoveableElement(w)||t.current.getMoveable().isDragging()||r.some(_=>_===w||_.contains(w)))&&b.stop()},h=b=>{b.isDrag||e.current.clickTarget(b.inputEvent)},p=b=>{e.current.triggerDragStart(b.inputEvent)},g=b=>{},v=b=>{const w=b.inputEvent,_=w.target;if(n(),_.isContentEditable){const T=cP(_);T&&T.hasAttribute(yo)&&(b.stop(),o([T]))}(w.type==="touchstart"&&b.isTrusted||t.current.getMoveable().isMoveableElement(_)||r.some(T=>T===_||T.contains(_)))&&b.stop()},m=({direction:b})=>{},x=({isDragStart:b,selected:w,inputEvent:_})=>{b&&_.preventDefault(),o(w).then(()=>{b&&t.current.getMoveable().dragStart(_)})},y=()=>{};return X.useEffect(()=>{const b=w=>{w.touches.length};return document.addEventListener("touchstart",b),()=>{document.removeEventListener("touchstart",b)}},[]),X.useEffect(()=>{const b=w=>{(w.ctrlKey||w.metaKey)&&(w.key==="="||w.key==="+"?(w.preventDefault(),l(Math.min(s+.1,3))):w.key==="-"?(w.preventDefault(),l(Math.max(s-.1,.1))):w.key==="0"&&(w.preventDefault(),l(1)))};return window.addEventListener("keydown",b),()=>{window.removeEventListener("keydown",b)}},[s,l]),{onPinch:c,onPinchEnd:u,onDragStart:d,onDragEnd:h,onAbortPinch:p,onScroll:g,onSelectoDragStart:v,onSelectoScroll:m,onSelectoEnd:x,handleCenterView:y}},cP=e=>e.closest(`[${yo}]`);function uP(e){const t={top:0,left:0,width:0,height:0,rotation:0},r=e.match(/top:\s*([\d.]+)px/),n=e.match(/left:\s*([\d.]+)px/),o=e.match(/width:\s*([\d.]+)px/),i=e.match(/height:\s*([\d.]+)px/);r&&(t.top=parseFloat(r[1])),n&&(t.left=parseFloat(n[1])),o&&(t.width=parseFloat(o[1])),i&&(t.height=parseFloat(i[1]));const a=e.match(/transform:\s*translate\(\s*([-\d.]+)px,\s*([-\d.]+)px\)\s*rotate\(\s*([-\d.]+)deg\)/);if(a){const s=parseFloat(a[1]),l=parseFloat(a[2]),c=parseFloat(a[3]);t.left+=s,t.top+=l,t.rotation=c}return t}const dP={name:"deleteButtonViewable",props:{deleteButtonViewable:Boolean},events:{},render(e,t){const r=e.getRect(),{pos2:n}=e.state;return f.jsx(Ec.Consumer,{children:o=>f.jsx(Oe,{onMouseDown:i=>{i.stopPropagation(),i.preventDefault(),o.editor.removeSelectedNode()},onTouchStart:i=>{i.stopPropagation(),i.preventDefault(),o.editor.removeSelectedNode()},style:{transform:`translate(${n[0]}px, ${n[1]}px) rotate(${r.rotation}deg) translate(10px)`,zIndex:1e3,cursor:"pointer",pointerEvents:"auto"},children:f.jsx(os,{size:16,color:"white"})})},"delete-button-viewer")}},fP={name:"dimensionViewable",props:{dimensionViewable:Boolean},events:{},render(e){const t=e.props.zoom,r=e.getRect();return f.jsxs("div",{className:"moveable-dimension",style:{left:`${r.width/2}px`,top:`${r.height}px`,transform:`translate(-50%, ${20*t}px) scale(${t})`},children:[Math.round(r.offsetWidth)," x ",Math.round(r.offsetHeight)]},"dimension-viewer")}};class hP{constructor(t,r){this.unsubscribe=null,this.syncPositionFromStore=()=>{const{selectedTargets:n}=this.props;if(n.length===0)return;const o=je.getState();o.json?.docs[0]&&n.forEach(a=>{const s=a.dataset.veltixNodeId,l=a.dataset.veltixDocId;if(s&&l){const c=o.getNode(l,s);if(c&&c.position){if(c.position.locked===!0)return;this.updateElementPosition(a,c.position)}}})},this.updateElementPosition=(n,o)=>{let i=`translate(${o.left}px, ${o.top}px)`;o.rotation&&(i+=` rotate(${o.rotation}deg)`),n.style.transform=i,n.style.width=`${o.width}px`,n.style.height=`${o.height}px`;const a=this.props.moveableData.getFrame(n);a&&(a.set("transform","translate",`${o.left}px, ${o.top}px`),o.rotation&&a.set("transform","rotate",`${o.rotation}deg`),this.props.moveableData.render(n)),this.props.updateRect()},this.moveableManager=t,this.props=r}initialize(){this.subscribe()}subscribe(){this.unsubscribe=je.subscribe(t=>{this.syncPositionFromStore()})}cleanup(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}updateProps(t){this.props={...this.props,...t}}}class pP{constructor(){this.map=new Map}get(t){return this.map.get(t)}set(t,r){return this.map.set(t,r)}clear(){this.map.clear()}}/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */function vP(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function gP(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function If(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(gP(arguments[t]));return e}var Ca=function(e){return typeof e>"u"},Dy=function(){function e(r,n){var o,i;if(this._canceled=!1,n)try{for(var a=vP(Object.keys(n)),s=a.next();!s.done;s=a.next()){var l=s.value;this[l]=n[l]}}catch(c){o={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}this.eventType=r}var t=e.prototype;return t.stop=function(){this._canceled=!0},t.isCanceled=function(){return this._canceled},e}(),mP=function(){function e(){this._eventHandler={}}var t=e.prototype;return t.trigger=function(r){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=r instanceof Dy?r.eventType:r,a=If(this._eventHandler[i]||[]);return a.length<=0?this:(r instanceof Dy?(r.currentTarget=this,a.forEach(function(s){s(r)})):a.forEach(function(s){s.apply(void 0,If(n))}),this)},t.once=function(r,n){var o=this;if(typeof r=="object"&&Ca(n)){var i=r;for(var a in i)this.once(a,i[a]);return this}else if(typeof r=="string"&&typeof n=="function"){var s=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];n.apply(void 0,If(l)),o.off(r,s)};this.on(r,s)}return this},t.hasOn=function(r){return!!this._eventHandler[r]},t.on=function(r,n){if(typeof r=="object"&&Ca(n)){var o=r;for(var i in o)this.on(i,o[i]);return this}else if(typeof r=="string"&&typeof n=="function"){var a=this._eventHandler[r];Ca(a)&&(this._eventHandler[r]=[],a=this._eventHandler[r]),a.push(n)}return this},t.off=function(r,n){if(Ca(r))return this._eventHandler={},this;if(Ca(n)){if(typeof r=="string")return delete this._eventHandler[r],this;var o=r;for(var i in o)this.off(i,o[i]);return this}var a=this._eventHandler[r];if(a){for(var s=a.length,l=0;l<s;++l)if(a[l]===n){a.splice(l,1),s<=1&&delete this._eventHandler[r];break}}return this},e.VERSION="3.0.5",e}();function Ty(e){return Object.keys(e)}function xP(e){return typeof e=="object"}function yP(e){return typeof e=="function"}var Ff="__observers__",bP="__computed__",Lf=1,Bf="__CFCS_DETECTED_DEPENDENCIES__",zf=function(e,t){return zf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},zf(e,t)};function wP(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");zf(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function $f(){Object[Bf]=Object[Bf]||{};var e=Object[Bf];return e[Lf]=e[Lf]||[],e[Lf]}function SP(){var e=$f();return e[e.length-1]}function CP(e){var t=$f(),r=[],n={host:e,observers:r,push:function(o){e!==o&&r.indexOf(o)===-1&&r.push(o)}};return t.push(n),n}function EP(){var e=$f();return e.pop()}var My=function(){function e(r){this._emitter=new mP,this._current=r}var t=e.prototype;return Object.defineProperty(t,"current",{get:function(){var r=SP();return r?.push(this),this._current},set:function(r){this._setCurrent(r)},enumerable:!1,configurable:!0}),t.subscribe=function(r){return this.current,this._emitter.on("update",r),this},t.unsubscribe=function(r){return this._emitter.off("update",r),this},t._setCurrent=function(r){var n=this._current,o=r!==n;this._current=r,o&&this._emitter.trigger("update",r,n)},t.toString=function(){return"".concat(this.current)},t.valueOf=function(){return this.current},e}(),_P=function(e){wP(t,e);function t(n){var o=e.call(this)||this;return o._computedCallback=n,o._registered=[],o._onCheckUpdate=function(){o._setCurrent(o.current)},o._current=o.current,o}var r=t.prototype;return Object.defineProperty(r,"current",{get:function(){var n=this;CP(this);var o=this._computedCallback(),i=EP();return this._registered.forEach(function(a){a.unsubscribe(n._onCheckUpdate)}),i.observers.forEach(function(a){a.subscribe(n._onCheckUpdate)}),this._registered=i.observers,o},enumerable:!1,configurable:!0}),t}(My);function jy(e,t,r){r===void 0&&(r=t);var n={configurable:!0,get:function(){return _a(this,r).current},set:function(o){_a(this,r,o).current=o}};Object.defineProperty(e,t,n),r!==t&&Object.defineProperty(e,r,{configurable:!0,get:function(){return _a(this,r).current}})}function NP(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length>1?jy(e[0],e[1]):function(r,n){return jy(r,n,e[0])}}function DP(e){e.subscribe=function(t,r){this[t],_a(this,t).subscribe(r)},e.unsubscribe=function(t,r){var n=this;if(!t){Ty(Vf(this)).forEach(function(o){n.unsubscribe(o)});return}t in this&&_a(this,t).unsubscribe(r)}}function Ry(e,t){var r=yP(e)?e():e,n={};return ky(n),Ty(r).forEach(function(o){var i=r[o];Ay(i)?Py(n,o,i):Py(n,o,Ea(i)),NP(o)(n,o)}),DP(n),n}function TP(e){return Ry(e)}function MP(e){return Ry(e)}function Ea(e){return new My(e)}function Gf(e){return new _P(e)}function ky(e){var t={};return Object.defineProperty(e,Ff,{get:function(){return t}}),t}function Vf(e,t){var r,n;e[Ff]||ky(e);var o=e[Ff];{var i=(n=(r=e?.constructor)===null||r===void 0?void 0:r.prototype)===null||n===void 0?void 0:n[bP];i&&i.forEach(function(a){!(a in o)&&a in e&&e[a]})}return o}function _a(e,t,r){var n=Vf(e);return n[t]||(n[t]=Ea(r)),n[t]}function Py(e,t,r){var n=Vf(e);n[t]=r}function Ay(e){return e&&xP(e)&&"current"in e&&"subscribe"in e&&"unsubscribe"in e}function tn(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var ui=function(){function e(t){this.separator=t,this.orderMap={}}return e.prototype.getFullName=function(t){return t.join(this.separator)},e.prototype.get=function(t){return this.orderMap[this.getFullName(t)]},e.prototype.hasName=function(t){var r=t.length;if(!r)return!1;var n=t[r-1],o=this.get(t.slice(0,r-1));return o?o.indexOf(n)>=0:!1},e.prototype.gets=function(t,r){r===void 0&&(r=!0);var n=[],o=this;function i(a,s){var l=o.get(a);if(l)return l.forEach(function(c){var u=tn(tn([],s,!0),[c],!1),d=i(tn(tn([],a,!0),[c],!1),u);(!d||!d.length)&&n.push(tn(tn([],s,!0),[c],!1))}),l}return i(t,r?t:[]),n},e.prototype.set=function(t,r){var n=this;return t.forEach(function(o,i){n.addName(t.slice(0,i),o)}),this.orderMap[this.getFullName(t)]=r,r},e.prototype.add=function(t){var r=t.length;return r?this.addName(t.slice(0,-1),t[r-1]):[]},e.prototype.addName=function(t,r){var n=this.get(t)||this.set(t,[]);return n.indexOf(r)===-1&&n.push(r),n},e.prototype.findIndex=function(t,r){var n=this.orderMap[this.getFullName(t)];return n?n.indexOf(r):-1},e.prototype.remove=function(t){var r=this.getFullName(t),n=this.orderMap;for(var o in n)o.indexOf(r)===0&&delete n[o];var i=t.length;if(i){var a=t.slice(0,-1),s=t[i-1];this.splice(a,this.findIndex(a,s),1)}return this},e.prototype.filter=function(t,r,n){n===void 0&&(n=!0);var o=this.gets(t,n).filter(r),i=new e(this.separator),a=n?[]:t;return o.forEach(function(s){i.add(tn(tn([],a,!0),s,!0))}),i},e.prototype.splice=function(t,r,n){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];var a=this.get(t)||this.set(t,[]);return a.splice.apply(a,tn([r,n],o,!1)),this},e.prototype.clear=function(){this.orderMap={}},e.prototype.setObject=function(t){var r=this.orderMap;for(var n in t)r[n]=t[n].slice()},e.prototype.getObject=function(){var t={},r=this.orderMap;for(var n in r)t[n]=r[n].slice();return t},e.prototype.clone=function(){var t=new e(this.separator);return t.setObject(t.orderMap),t},e}(),Uf=function(e,t){return Uf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Uf(e,t)};function Yl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Uf(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Na=function(){return Na=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Na.apply(this,arguments)};function jP(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}function Ze(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Oy(e,t,r){var n=1-r;return r*r*r+3*r*r*n*t+3*r*n*n*e}function RP(e,t,r){for(var n=r,o=r,i=1;Math.abs(i)>1/1e3;){if(o=Oy(e,t,n),i=o-r,Math.abs(i)<1/1e3)return n;n-=i/2}return n}function Jn(e,t,r,n){var o=function(i){var a=RP(e,r,ta(i,0,1));return Oy(t,n,a)};return o.easingName="cubic-bezier(".concat(e,",").concat(t,",").concat(r,",").concat(n,")"),o}function Hf(e,t){var r=function(n){var o=1/e;return n>=1?1:(t==="start"?o:0)+Math.floor(n/o)*o};return r.easingName="steps(".concat(e,", ").concat(t,")"),r}var kP=Hf(1,"start"),PP=Hf(1,"end"),AP=Jn(0,0,1,1),OP=Jn(.25,.1,.25,1),IP=Jn(.42,0,1,1),FP=Jn(0,0,.58,1),LP=Jn(.42,0,.58,1),Da,Iy="__SCENEJS_",Fy="data-scene-id",_n="animation-timing-function",Ly={transform:{},filter:{},attribute:{},html:!0},ql={easing:[_n]},BP=(Da={},Da[_n]=!0,Da.contents=!0,Da.html=!0,Da),By=1e6,Ta=1e-6,Wr="duration",Xl="fillMode",Ma="direction",Nr="iterationCount",or="delay",ja="easing",Nn="playSpeed",di="easingName",zP="iterationTime",eo="paused",zy="ended",$P="timeupdate",$y="play",Ra="running",Kl="iteration",fi="startAnimation",Zl="pauseAnimation",Wf="alternate",Gy="reverse",Yf="alternate-reverse",GP="normal",ka="infinite",Dn="playState",qf="playCSS",Xf="prevTime",Tn="tickTime",Ql="currentTime",ir="selector",Vy="transform",Uy={linear:AP,ease:OP,"ease-in":IP,"ease-out":FP,"ease-in-out":LP,"step-start":kP,"step-end":PP},to="_///_",VP=[Wr,Xl,Ma,Nr,or,ja,Nn],hi=function(){function e(t,r){this.prefix="",this.suffix="",this.model="",this.type="",this.separator=",",r&&this.setOptions(r),this.value=et(t)?t.split(this.separator):t}return e.prototype.setOptions=function(t){for(var r in t)this[r]=t[r];return this},e.prototype.size=function(){return this.value.length},e.prototype.get=function(t){return this.value[t]},e.prototype.set=function(t,r){return this.value[t]=r,this},e.prototype.clone=function(){var t=this,r=t.separator,n=t.prefix,o=t.suffix,i=t.model,a=t.type,s=this.value.map(function(l){return gi(l)?l.clone():l});return new e(s,{separator:r,prefix:n,suffix:o,model:i,type:a})},e.prototype.toValue=function(){return this.prefix+this.join()+this.suffix},e.prototype.join=function(){return this.value.map(function(t){return gi(t)?t.toValue():t}).join(this.separator)},e.prototype.forEach=function(t){return this.value.forEach(t),this},e}();function UP(e){for(var t=Qi(e,";"),r={},n=t.length,o=n,i=0;i<n;++i){var a=Qi(t[i],":");if(a.length<2||!a[1]){--o;continue}r[a[0].trim()]=Yr(a[1].trim())}return{styles:r,length:o}}function Hy(e){var t=ld;return e.length===3&&(e[3]=1),new hi(e,{model:t,separator:",",type:"color",prefix:"".concat(t,"("),suffix:")"})}function HP(e){var t=sl(e),r=t.prefix,n=t.value,o=t.suffix;if(typeof n>"u")return e;if(rj.indexOf(r)>-1)return Hy(o1(e));var i=Yr(n,r),a=[n],s=",",l="".concat(r,"("),c=")".concat(o);return gi(i)&&(s=i.separator,a=i.value,l+=i.prefix,c=i.suffix+c),new hi(a,{separator:s,model:r,prefix:l,suffix:c})}function Kf(e,t){return new hi(e,{type:"array",separator:t})}function WP(e){var t=o1(e);return t?Hy(t):e}function Yr(e,t){if(!et(e))return $e(e)?Kf(e,","):e;var r=Qt(e);return r.length>1?Kf(r.map(function(n){return Yr(n)}),","):(r=Qr(e),r.length>1?Kf(r.map(function(n){return Yr(n)})," "):(r=/^(['"])([^'"]*)(['"])$/g.exec(e),r&&r[1]===r[3]?new hi([Yr(r[2])],{prefix:r[1],suffix:r[1]}):e.indexOf("(")!==-1?HP(e):e.charAt(0)==="#"&&t!=="url"?WP(e):e))}function Wy(e,t){t===void 0&&(t={});var r=e.model;if(r){e.setOptions({model:"",suffix:"",prefix:""});var n=e.size()>1?e:e.get(0);t[r]=n}else e.forEach(function(o){Wy(o,t)});return t}function Pa(e){var t=typeof e;if(t===qi){if($e(e))return cd;if(gi(e))return ol}else if(t===q0||t===X0)return"value";return t}function Yy(e){return rt(e)&&e.constructor===Object}function Zf(e,t){var r=[];if(Yy(e))for(var n in e)t.push(n),r=r.concat(Zf(e[n],t)),t.pop();else r.push(t.slice());return r}function qy(e,t){for(var r in t){var n=t[r];if(!Yy(n)){e[r]=!0;continue}rt(e[r])||(e[r]={}),qy(e[r],t[r])}return e}function pi(e){return Math.round(e*By)/By}function Aa(e,t,r){r===void 0&&(r=e.length);for(var n=t,o=0;o<r;++o){if(!rt(n)||n==null)return;n=n[e[o]]}return n}function Xy(e,t,r){var n=t.length,o=e;if(n===0)return!1;for(var i=0;i<n;++i)if(o===!0||(o=o[t[i]],!o||!r&&o===!0))return!1;return!0}function vi(e,t){return Xy(Ly,e,t)}function Qf(e){return Xy(BP,e,!0)}function Jl(e,t){e.state[qf]=t}function Jf(e){return e.state[qf]&&e.isPaused()}function Ky(e){return!e.isEnded()&&e.state[qf]}function Zy(e){for(;;){var t="".concat(Math.floor(Math.random()*1e7));if(!il||!e)return t;var r=cl('[data-scene-id="'.concat(t,'"]'));if(!r)return t}}function Qy(e){return e.getId()||e.setId(Zy(!1)).getId()}function Jy(e){return"".concat(e).match(/[0-9a-zA-Z]+/g).join("")}function eb(e,t,r,n){if(n===void 0&&(n={}),!(!Ki||e.getPlayState()===Ra)){var o=r||fi;if(Jf(e))e.addPlayClass(!0,o,n);else{e.isEnded()&&e.setTime(0),t&&e.exportCSS({className:o});var i=e.addPlayClass(!1,o,n);if(!i)return;YP(e,i),Jl(e,!0)}e.setPlayState(Ra)}}function YP(e,t){var r=e.state,n=e.getDuration(),o=!n||!isFinite(n),i=function(){Jl(e,!1),e.finish()},a=function(){e.trigger($y),tt(t,"animationcancel",i),tt(t,"animationend",i),tt(t,"animationiteration",s)};e.once(zy,function(){Xe(t,"animationcancel",i),Xe(t,"animationend",i),Xe(t,"animationiteration",s),Xe(t,"animationstart",a)});var s=function(l){var c=l.elapsedTime,u=c,d=o?0:u/n;r[Ql]=u,e.setIteration(d)};tt(t,"animationstart",a)}function tb(e){var t;if(et(e))if(e in Uy)t=Uy[e];else{var r=Yr(e);if(et(r))return 0;if(r.model==="cubic-bezier")e=r.value.map(function(n){return parseFloat(n)}),t=Jn(e[0],e[1],e[2],e[3]);else if(r.model==="steps")t=Hf(parseFloat(r.value[0]),r.value[1]);else return 0}else $e(e)?t=Jn(e[0],e[1],e[2],e[3]):t=e;return t}function gi(e){if(!e)return!1;var t=e.constructor.prototype;return!!(t.clone&&t.get&&t.setOptions)}function rb(e){return e&&!!e.constructor.prototype.getItem}function Oa(e){return e&&!!e.constructor.prototype.getFrame}function eh(e){return e&&!!e.constructor.prototype.toCSSText}function nb(e,t){var r={};for(var n in e){var o=e[n];if(eh(o))r[n]=o;else if(rt(o)){var i=nb(o,t);for(var a in i)r["".concat(n).concat(t).concat(a)]=i[a]}}return r}function qP(e){return"length"in e&&e.length>=0}function XP(e,t,r){return function(n){var o=n.prototype;e.forEach(function(i){o[Go("get ".concat(i))]=function(){return this[r][i]}}),t.forEach(function(i){o[Go("set ".concat(i))]=function(a){return this[r][i]=a,this}})}}function ob(e,t,r){return r===Gy?!0:t!==ka&&e===t&&t%1===0?r===(e%2>=1?Yf:Wf):r===(e%2>=1?Wf:Yf)}var ib=["id",Nr,or,Xl,Ma,Nn,Wr,Nn,zP,Dn],KP=Ze(Ze([],ib,!0),[ja,di],!1),th=function(e){Yl(t,e);function t(r){var n=e.call(this)||this;return n.timerId=0,n.state=TP({id:"",easing:0,easingName:"linear",iterationCount:1,delay:0,fillMode:"forwards",direction:GP,playSpeed:1,currentTime:0,iterationTime:-1,iteration:0,tickTime:0,prevTime:0,playState:eo,duration:0}),n.setOptions(r),n}return t.prototype.setEasing=function(r){var n=tb(r),o=n&&n[di]||"linear",i=this.state;return i[ja]=n,i[di]=o,this},t.prototype.setOptions=function(r){r===void 0&&(r={});for(var n in r){var o=r[n];if(n===ja){this.setEasing(o);continue}else if(n===Wr){o&&this.setDuration(o);continue}VP.indexOf(n)>-1&&(this.state[n]=o)}return this},t.prototype.getTotalDuration=function(){return this.getActiveDuration(!0)},t.prototype.getActiveDuration=function(r){var n=this.state,o=n[Nr];return o===ka?1/0:(r?n[or]:0)+this.getDuration()*o},t.prototype.isEnded=function(){return this.state[Tn]===0&&this.state[Dn]===eo?!0:!(this.getTime()<this.getActiveDuration())},t.prototype.isPaused=function(){return this.state[Dn]===eo},t.prototype.start=function(r){r===void 0&&(r=this.state[or]);var n=this.state;return n[Dn]=Ra,n[Tn]>=r?(this.trigger($y),!0):!1},t.prototype.play=function(r){var n=this,o=this.state,i=o[or],a=this.getTime();return o[Dn]=Ra,this.isEnded()&&(a===0||a>=this.getActiveDuration())&&this.setTime(-i,!0),this.timerId=ll(function(s){o[Xf]=s,n.tick(s,r)}),this.start(),this},t.prototype.pause=function(){var r=this.state;return r[Dn]!==eo&&(r[Dn]=eo,this.trigger(eo)),J0(this.timerId),this},t.prototype.finish=function(){return this.setTime(0),this.state[Tn]=0,this.end(),this},t.prototype.end=function(){return this.pause(),this.trigger(zy),this},t.prototype.setTime=function(r,n,o,i){var a=this.getActiveDuration(),s=this.state,l=s[Tn],c=s[or],u=n?r:this.getUnitTime(r);s[Tn]=c+u,u<0?u=0:u>a&&(u=a),s[Ql]=u,this.calculate();var d=n&&!o,h=s[Tn],p=et(r)?parseFloat(r):r;return d&&l<c&&p>=0&&this.start(0),i?.(),d&&(h<l||this.isEnded())?(this.end(),this):this.isDelay()?this:(this.trigger($P,{currentTime:u,time:this.getIterationTime(),iterationCount:s[Kl]}),this)},t.prototype.getTime=function(){return this.state[Ql]},t.prototype.getUnitTime=function(r){if(et(r)){var n=this.getDuration()||100;if(r==="from")return 0;if(r==="to")return n;var o=$r(r),i=o.unit,a=o.value;return i==="%"?(!this.getDuration()&&this.setDuration(n),pi(parseFloat(r)/100*n)):i===">"?a+Ta:a}else return pi(r)},t.prototype.isDelay=function(){var r=this.state,n=r[or],o=r[Tn];return n>0&&o<n},t.prototype.setIteration=function(r){var n=this.state,o=Math.floor(r),i=n[Nr]===ka?1/0:n[Nr];return n[Kl]<o&&o<i&&this.trigger(Kl,{currentTime:n[Ql],iterationCount:o}),n[Kl]=r,this},t.prototype.calculate=function(){var r=this.state,n=r[Nr],o=r[Xl],i=r[Ma],a=this.getDuration(),s=this.getTime(),l=a===0?0:s/a,c=a?s%a:0;if(!a)return this.setIterationTime(0),this;this.setIteration(l);var u=ob(l,n,i),d=isFinite(a);if(d&&u&&(c=a-c),d&&n!==ka){var h=o==="both"||o==="forwards";l>=n&&(c=a*(h?n%1||1:0),u&&(c=a-c))}return this.setIterationTime(c),this},t.prototype.tick=function(r,n){var o=this;if(!this.isPaused()){var i=this.state,a=i[Nn],s=i[Xf],l=i[or],c=i[Tn],u=c+Math.min(1e3,r-s)/1e3*a;i[Xf]=r,n&&n>=u?(this.setTime(n-l,!0),this.pause()):this.setTime(u-l,!0),i[Dn]!==eo&&(this.timerId=ll(function(d){o.tick(d,n)}))}},t=jP([XP(KP,ib,"state")],t),t}(yn);function ab(e,t){if(t===void 0&&(t=[]),!e)return"";var r=[],n=Jt(e);return ea(n,t),n.forEach(function(o){r.push("".concat(o.replace(/\d$/g,""),"(").concat(e[o],")"))}),r.join(" ")}function sb(e,t){return t===void 0&&(t=!1),rh({},e,t)}function rh(e,t,r){r===void 0&&(r=!1);for(var n in t){var o=t[n],i=Pa(o);i===ol?e[n]=r?o.toValue():o.clone():i===Yi?e[n]=r?nh([n],o):o:i===cd?e[n]=o.slice():i===qi?rt(e[n])&&!gi(e[n])?rh(e[n],o,r):e[n]=sb(o,r):e[n]=t[n]}return e}function ec(e){return e[0]in ql?ql[e[0]]:e}function nh(e,t){var r=Pa(t);if(r===ol)return t.toValue();if(r===Yi){if(e[0]!==_n)return nh(e,t())}else if(r===qi)return sb(t,!0);return t}var ro=function(e){Yl(t,e);function t(r){r===void 0&&(r={});var n=e.call(this)||this;return n.properties={},n.orderMap=new ui(to),n.properties={},n.set(r),n}return t.prototype.get=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=this.raw.apply(this,r);return nh(ec(r),o)},t.prototype.getOrders=function(r){return this.orderMap.get(r)},t.prototype.setOrders=function(r,n){var o=this.orderMap.set(r,n);return this._update(),o},t.prototype.getOrderObject=function(){return this.orderMap.getObject()},t.prototype.setOrderObject=function(r){this.orderMap.setObject(r),this._update()},t.prototype.getKeys=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=this.raw.apply(this,r),i=Pa(o)===qi?Jt(o):[];return ea(i,this.orderMap.get(r)),i},t.prototype.gets=function(){for(var r=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=this.get.apply(this,n),a=this.getKeys.apply(this,n);return a.map(function(s){var l=i[s];return{key:s,value:l,children:r.gets.apply(r,Ze(Ze([],n,!1),[s],!1))}})},t.prototype.raw=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return Aa(ec(r),this.properties)},t.prototype.remove=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=ec(r),i=o.length;if(!i)return this;this.orderMap.remove(o);var a=Aa(o,this.properties,i-1);return rt(a)&&delete a[o[i-1]],this._update(),this},t.prototype.set=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return this._set.apply(this,r),this._update(),this},t.prototype.getNames=function(){return Zf(this.properties,[])},t.prototype.has=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=ec(r),i=o.length;return i?!br(Aa(o,this.properties,i)):!1},t.prototype.clone=function(){var r=new t;return r.setOrderObject(this.orderMap.orderMap),r.merge(this)},t.prototype.merge=function(r){var n=this.properties,o=r.properties;return o&&rh(n,o),this},t.prototype.toCSSObject=function(r){var n=this.get(),o={};for(var i in n)if(!vi([i],!0)){var a=n[i];i===_n&&(i=_n.replace("animation",Ki),a=(et(a)?a:a[di])||"initial"),r&&(i=Go(i.replace(/^[-]+/g,""))),o[i]=a}var s=ab(n[Vy],this.orderMap.get([Vy])),l=ab(n.filter,this.orderMap.get([dd]));return Z0&&s&&(o[Z0]=s),dd&&l&&(o[dd]=l),o},t.prototype.toCSSText=function(){var r=this.toCSSObject(),n=[],o=Jt(r);return ea(o,this.orderMap.get([])),o.forEach(function(i){n.push("".concat(hd(i,"-"),":").concat(r[i],";"))}),n.join("")},t.prototype.toCSS=function(){var r=this.toCSSObject(),n=[],o=Jt(r);return ea(o,this.orderMap.get([])),o.forEach(function(i){n.push("".concat(i,":").concat(r[i],";"))}),n.join("")},t.prototype.clear=function(){return this.properties={},this.orderMap.clear(),this},t.prototype._set=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=this,i=r.length,a=r.slice(0,-1),s=r[i-1],l=a[0];if(i===1&&eh(s))o.merge(s);else if(l in ql)o._setByPath(ql[l],s);else if(i===2&&$e(l))o._setByPath(l,s);else if(gi(s))vi(a)?o._set.apply(o,Ze(Ze([],a,!1),[Wy(s)],!1)):o._setByPath(a,s);else if($e(s))o._setByPath(a,s);else if(rt(s)){!o.has.apply(o,a)&&vi(a)&&o._setByPath(a,{});for(var c in s)o._set.apply(o,Ze(Ze([],a,!1),[c,s[c]],!1))}else if(et(s)){if(vi(a,!0)){if(Qf(a)||!vi(a))this._setByPath(a,s);else{var u=Yr(s);rt(u)&&o._set.apply(o,Ze(Ze([],a,!1),[u],!1))}return this}else{var d=UP(s),h=d.styles,p=d.length;for(var g in h)o._set.apply(o,Ze(Ze([],a,!1),[g,h[g]],!1));if(p)return this}o._setByPath(a,s)}else o._setByPath(a,s)},t.prototype._setByPath=function(r,n){for(var o=this.properties,i=r.length,a=0;a<i-1;++a){var s=r[a];!(s in o)&&(o[s]={}),o=o[s]}if(i){var l=r[i-1];this.orderMap.add(r),i===1&&l===_n?o[l]=tb(n):o[l]=et(n)&&!Qf(r)?Yr(n,l):n}},t.prototype._update=function(){this.emit("update")},t}(yn);function oh(e,t,r,n){var o=t.length;return e.map(function(i,a){return a>=o?i:Ia(i,t[a],r,n)})}function ZP(e,t,r,n){var o=e.value,i=t.value,a=e.model,s=t.model;if(a!==s)return Ia(e.toValue(),t.toValue(),r,n);o.length===3&&(o[3]=1),i.length===3&&(i[3]=1);for(var l=oh(o,i,r,n),c=a,u=0;u<3;++u)l[u]=parseInt(l[u],10);var d=new hi(l,{type:"color",model:c,prefix:"".concat(c,"("),suffix:")"});return d}function QP(e,t,r,n){var o=e.type;if(o==="color")return ZP(e,t,r,n);var i=e.value,a=t.value,s=oh(i,a,r,n);return new hi(s,{type:o,separator:e.separator||t.separator,prefix:e.prefix||t.prefix,suffix:e.suffix||t.suffix,model:e.model||t.model})}function Ia(e,t,r,n){if(n===0)return t;if(r===0||r+n===0)return e;var o=Pa(e),i=Pa(t),a=o===Yi,s=i===Yi;if(a||s)return function(){return Ia(a?Yr(e()):e,s?Yr(t()):t,r,n)};if(o===i){if(o===ol)return QP(e,t,r,n);if(o===cd)return oh(e,t,r,n);if(o!=="value")return e}else return e;var l=$r("".concat(e)),c=$r("".concat(t)),u;if(isNaN(l.value)||isNaN(c.value))return e;u=$o(l.value,c.value,r,n);var d=l.prefix||c.prefix,h=l.unit||c.unit;return!d&&!h?u:d+u+h}function JP(e,t,r,n,o,i){if(e===t)return n;if(e===r)return o;if(!i)return Ia(n,o,e-t,r-e);var a=i((e-t)/(r-t)),s=Ia(n,o,a,1-a);return s}function lb(e,t){for(var r=e.length,n=0;n<r;++n){if(e[n]===t)return[n,n];if(e[n]>t)return[n>0?n-1:0,n]}return[r-1,r-1]}function cb(e){var t=[];for(var r in e)t.push("".concat(Ki,"-").concat(hd(r),":").concat(e[r],";"));return t.join("")}function eA(e,t){for(var r=e.length,n=0;n<r;++n)if(t<e[n]){e.splice(n,0,t);return}e[r]=t}function ih(e,t,r){var n=e[e.length-1];(!n||n[0]!==t||n[1]!==r)&&e.push([pi(t),pi(r)])}function tA(e,t){var r=e.map(function(o){return[o,o]}),n=[];return t.forEach(function(o){for(var i=o[Nr],a=o[or],s=o[Nn],l=o[Ma],c=Math.ceil(i),u=r[r.length-1][0],d=r.length,h=u*i,p=0;p<c;++p)for(var g=l===Gy||l===Wf&&p%2||l===Yf&&!(p%2),v=0;v<d;++v){var m=r[g?d-v-1:v],x=m[1],y=u*p+(g?u-m[0]:m[0]),b=r[g?d-v:v-1];if(y>h){if(v!==0){var w=u*p+(g?u-b[0]:b[0]),_=$o(b[1],x,h-w,y-h);ih(n,(a+u*i)/s,_)}break}else if(y===h&&n.length&&n[n.length-1][0]===h+a)break;ih(n,(a+y)/s,x)}a&&n.unshift([0,n[0][1]]),r=n,n=[]}),r}var rA=function(e){Yl(t,e);function t(r,n){var o=e.call(this)||this;return o.times=[],o.items={},o.nameMap=new ui(to),o.elements=[],o.needUpdate=!0,o.registeredElement=!1,o.load(r,n),o}return t.prototype.getDuration=function(){var r=this.times,n=r.length;return(n===0?0:r[n-1])||this.state[Wr]},t.prototype.size=function(){return this.times.length},t.prototype.setDuration=function(r){if(!r)return this;var n=this.getDuration();if(n>0){var o=r/n,i=this,a=i.times,s=i.items,l={};this.times=a.map(function(c){var u=pi(c*o);return l[u]=s[c],u}),this.items=l}else this.newFrame(r);return this},t.prototype.setId=function(r){var n=this.state,o=this.elements,i=o.length;if(n.id=r||Zy(!!i),i&&!n[ir]){var a=Jy(this.getId());n[ir]="[".concat(Fy,'="').concat(a,'"]'),o.forEach(function(s){s.setAttribute(Fy,a)})}return this},t.prototype.set=function(r){for(var n=this,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];if(Oa(r))return this.set(0,r);if($e(r))for(var a=r.length,s=0;s<a;++s){var l=a===1?0:this.getUnitTime("".concat(s/(a-1)*100,"%"));this.set(l,r[s])}else if(rt(r)){var c=function(d){var h=r[d];Qt(d).forEach(function(p){var g=n.getUnitTime(p);isNaN(g)?Zf(h,[p]).forEach(function(v){for(var m,x=Aa(v.slice(1),h),y=$e(x)?x:[Aa(v,n.target),x],b=y.length,w=0;w<b;++w)(m=n.newFrame("".concat(w/(b-1)*100,"%"))).set.apply(m,Ze(Ze([],v,!1),[y[w]],!1))}):n.set(g,h)})};for(var l in r)c(l)}else if(!br(r)){var u=o[0];Qt(r+"").forEach(function(d){var h=n.getUnitTime(d);if(Oa(u)){var p=u.getDelay(),g=u.toObject(!n.hasFrame(h+p)),v=u.getDuration(),m=u.getDirection(),x=m.indexOf("reverse")>-1;for(var y in g){var b=x?v-parseFloat(y):parseFloat(y);n.set(h+b,g[y])}}else if(o.length===1&&$e(u))u.forEach(function(_){n.set(h,_)});else{var w=n.newFrame(h);w.set.apply(w,o)}})}return this.needUpdate=!0,this},t.prototype.get=function(r){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=this.getFrame(r);return i&&i.get.apply(i,n)},t.prototype.getOrders=function(r){return this.needUpdate&&this.update(),this.nameMap.get(r)},t.prototype.setOrders=function(r,n){this.needUpdate&&this.update();var o=this.nameMap.set(r,n);return this.updateFrameOrders(),o},t.prototype.getOrderObject=function(){return this.nameMap.getObject()},t.prototype.setOrderObject=function(r){this.nameMap.setObject(r),this.updateFrameOrders()},t.prototype.remove=function(r){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(n.length){var i=this.getFrame(r);i&&i.remove.apply(i,n)}else this.removeFrame(r);return this.needUpdate=!0,this},t.prototype.append=function(r){return Oa(r)?this.set(this.getDuration(),r):this.append(new t(r)),this},t.prototype.prepend=function(r){if(Oa(r)){var n=r.getDuration()+r.getDelay(),o=this.getFrame(0);this.removeFrame(0),this.unshift(n),this.set(0,r),this.set(n+Ta,o)}else this.prepend(new t(r));return this},t.prototype.unshift=function(r){var n=this,o=n.times,i=n.items,a={};return this.times=o.map(function(s){var l=pi(r+s);return a[l]=i[s],l}),this.items=a,this},t.prototype.toObject=function(r){r===void 0&&(r=!0);var n={},o=this.getDelay();return this.forEach(function(i,a){n[(!a&&!r?Ta:0)+o+a]=i.clone()}),n},t.prototype.setSelector=function(r){return this.setElement(r),this},t.prototype.getElements=function(){return this.elements},t.prototype.setElements=function(r){return this.setElement(r)},t.prototype.setElement=function(r){r!==!0&&this.registeredElement!==r&&(this.registeredElement=r);var n=this.state,o=this.registeredElement,i=r,a=[];if(It(o)&&(i=o(this.getId(),0)),i){if(i===!0||et(i)){var s=et(n[ir])&&n[ir]||"".concat(n.id),l=i===!0?s:i,c=/([\s\S]+)(:+[a-zA-Z]+)$/g.exec(l);try{a=pd(cl(c?c[1]:l,!0))}catch{a=[]}n[ir]=l}else if(qP(i))a=pd(i);else if(i instanceof Element)a=[i];else if("current"in i||"value"in i){var u=i.current||i.value;u?a=[u]:a=[]}}else return this;return a.length?(this.elements=a,this.setId(this.getId()),this.target=a[0].style,this.targetFunc=function(d){var h=d.get("attribute");if(h){var p=function(x){a.forEach(function(y){y.setAttribute(x,h[x])})};for(var g in h)p(g)}if(d.has("html")){var v=d.get("html");a.forEach(function(x){x.innerHTML=v})}var m=d.toCSSText();if(n.cssText!==m)return n.cssText=m,a.forEach(function(x){x.style.cssText+=m}),d},this):this},t.prototype.setTarget=function(r){return this.target=r,this.targetFunc=function(n){var o=n.get();for(var i in o)r[i]=o[i]},this},t.prototype.setCSS=function(r,n){return n===void 0&&(n=[]),this.set(r,vj(this.elements,n)),this},t.prototype.setTime=function(r,n,o,i){var a=this;return e.prototype.setTime.call(this,r,n,o,function(){var s=a.getIterationTime(),l=a.getEasing()||i,c=a.getNowFrame(s,l),u=a.getTime();a.temp=c,a.trigger("animate",{frame:c,currentTime:u,time:s}),a.targetFunc&&a.targetFunc(c)}),this},t.prototype.update=function(){var r=this.nameMap,n={};this.forEach(function(a){qy(n,a.properties)});var o=new ui(to);function i(a,s){var l=Jt(a);ea(l,r.get(s)),o.set(s,l),l.forEach(function(c){var u=a[c];rt(u)&&i(u,Ze(Ze([],s,!0),[c],!1))})}return i(n,[]),this.nameMap=o,this.forEach(function(a){a.setOrderObject(o.orderMap)}),this.needUpdate=!1,this},t.prototype.newFrame=function(r){var n=this.getFrame(r);return n||(n=new ro,this.setFrame(r,n),n)},t.prototype.setFrame=function(r,n){var o=this.getUnitTime(r);return this.items[o]=n,eA(this.times,o),this.needUpdate=!0,this},t.prototype.getFrame=function(r){return this.items[this.getUnitTime(r)]},t.prototype.removeFrame=function(r){var n=this.getUnitTime(r),o=this.items,i=this.times.indexOf(n);return delete o[n],i>-1&&this.times.splice(i,1),this.needUpdate=!0,this},t.prototype.hasFrame=function(r){return this.getUnitTime(r)in this.items},t.prototype.hasName=function(r){return this.needUpdate&&this.update(),!!this.nameMap.hasName(r)},t.prototype.mergeFrame=function(r,n){if(n){var o=this.newFrame(r);o.merge(n)}return this},t.prototype.getNowFrame=function(r,n,o){var i=this;this.needUpdate&&this.update();var a=new ro,s=lb(this.times,r),l=s[0],c=s[1],u=this.getEasing()||n,d=this.nameMap;if(this.hasName([_n])){var h=this.getNowValue(r,[_n],l,c,!1,0,!0);It(h)&&(u=h)}if(o){var p=this.getFrame(r),g=p.orderMap.filter([],function(y){return p.has.apply(p,y)});for(var v in Ly){var m=d.get([v]);g.get([v])&&m&&g.set([v],m)}d=g}var x=d.gets([]);return a.setOrderObject(d.orderMap),x.forEach(function(y){var b=i.getNowValue(r,y,l,c,o,u,Qf(y));br(b)||a.set(y,b)}),a},t.prototype.getCurrentFrame=function(r,n){var o=this.getIterationTime(),i=r||this.needUpdate||!this.temp?this.getComputedFrame(o,n):this.temp;return this.temp=i,i},t.prototype.getComputedFrame=function(r,n,o){return this.getNowFrame(r,n,o)},t.prototype.load=function(r,n){var o;if(r===void 0&&(r={}),n===void 0&&(n=r.options),n&&this.setOptions(n),$e(r))this.set(r);else if(r.keyframes)this.set(r.keyframes);else for(var i in r)i!=="options"&&this.set((o={},o[i]=r[i],o));return n&&n[Wr]&&this.setDuration(n[Wr]),this},t.prototype.clone=function(){var r=new t;return r.setOptions(this.state),r.setOrderObject(this.nameMap.orderMap),this.forEach(function(n,o){r.setFrame(o,n.clone())}),r},t.prototype.forEach=function(r){var n=this.times,o=this.items;return n.forEach(function(i){r(o[i],i,o)}),this},t.prototype.setOptions=function(r){r===void 0&&(r={}),e.prototype.setOptions.call(this,r);var n=r.id,o=r.selector,i=r.elements,a=r.element,s=r.target;return n&&this.setId(n),s?this.setTarget(s):o&&!this.state.noRegisterElement?this.setSelector(o):(i||a)&&this.setElement(i||a),this},t.prototype.toCSS=function(r,n,o){r===void 0&&(r={className:fi}),n===void 0&&(n=this.getDuration()),o===void 0&&(o=[]);var i=this.state,a=i[ir];if(!a)return"";var s=this.getDuration();i[Wr]=s,o.push(i);var l=pd(o).reverse(),c=Jy(Qy(this)),u=o[0],d=Gr(l,function(k){return k[Nr]===ka||!isFinite(k[Wr])},o.length-1),h=l.slice(0,d),p=n||h.reduce(function(k,R){return(R[or]+k*R[Nr])/R[Nn]},s),g=l.slice(d).reduce(function(k,R){return(k+R[or])/R[Nn]},0),v=Ft(l,function(k){return k[ja]&&k[di]},i)[di],m=l[d][Nr],x=u[Xl],y=l[d][Ma],b=cb({fillMode:x,direction:y,iterationCount:m,delay:"".concat(g,"s"),name:"".concat(Iy,"KEYFRAMES_").concat(c),duration:"".concat(p/u[Nn],"s"),timingFunction:v}),w=Qt(a).map(function(k){var R=/([\s\S]+)(:+[a-zA-Z]+)$/g.exec(k);return R?[R[1],R[2]]:[k,""]}),_=r.className,T=r.selector,j=It(T)?T(this,a):T;return`
    `.concat(j||w.map(function(k){var R=k[0],A=k[1];return"".concat(R,".").concat(_).concat(A)})," {").concat(b,`}
    `).concat(w.map(function(k){var R=k[0],A=k[1];return"".concat(R,".").concat(Zl).concat(A)})," {").concat(Ki,`-play-state: paused;}
    @`).concat(nj," ").concat(Iy,"KEYFRAMES_").concat(c,"{").concat(this._toKeyframes(p,h,y),"}")},t.prototype.exportCSS=function(r,n,o){if(!this.elements.length)return"";var i=this.toCSS(r,n,o),a=o&&!br(o[Nr]);return a||(this.styledInjector&&(this.styledInjector.destroy(),this.styledInjector=null),this.styled=ml(i),this.styledInjector=this.styled.inject(this.getAnimationElement(),{original:!0})),this},t.prototype.pause=function(){return e.prototype.pause.call(this),Jf(this)&&this.pauseCSS(),this},t.prototype.pauseCSS=function(){return this.elements.forEach(function(r){ra(r,Zl)}),this},t.prototype.endCSS=function(){return this.elements.forEach(function(r){Vo(r,Zl),Vo(r,fi)}),Jl(this,!1),this},t.prototype.end=function(){return Ky(this)&&this.endCSS(),e.prototype.end.call(this),this},t.prototype.playCSS=function(r,n,o){return r===void 0&&(r=!0),o===void 0&&(o={}),eb(this,r,n,o),this},t.prototype.getAnimationElement=function(){return this.elements[0]},t.prototype.addPlayClass=function(r,n,o){o===void 0&&(o={});var i=this.elements,a=i.length,s=cb(o);if(a)return r?i.forEach(function(l){Vo(l,Zl)}):(i.forEach(function(l){l.style.cssText+=s,ut(l,fi)&&Vo(l,fi)}),i.forEach(function(l){l.clientWidth}),i.forEach(function(l){ra(l,fi)})),i[0]},t.prototype.clear=function(){return this.times=[],this.items={},this.nameMap=new ui(to),this.styledInjector&&this.styledInjector.destroy(),this.styled=null,this.styledInjector=null,this.temp=null,this.needUpdate=!0,this},t.prototype.getNowValue=function(r,n,o,i,a,s,l){var c=this.times,u=c.length,d,h,p,g,v=br(o),m=br(i);if(v||m){var x=lb(c,r);v&&(o=x[0]),m&&(i=x[1])}for(var y=o;y>=0;--y){var b=this.getFrame(c[y]);if(b.has.apply(b,n)){d=c[y],p=b;break}}var w=p&&p.raw.apply(p,n);if(a&&!vi([n[0]]))return d===r?w:void 0;if(l)return w;for(var y=i;y<u;++y){var b=this.getFrame(c[y]);if(b.has.apply(b,n)){h=c[y],g=b;break}}var _=g&&g.raw.apply(g,n);return!p||br(w)?_:!g||br(_)||w===_?w:JP(r,Math.max(d,0),h,w,_,s)},t.prototype._toKeyframes=function(r,n,o){var i=this,a={},s=this.times.slice();if(!s.length)return"";var l=this.getDuration();!this.getFrame(0)&&s.unshift(0),!this.getFrame(l)&&s.push(l);var c=tA(s,n),u=c[c.length-1];u[0]<r&&ih(c,r,u[1]);var d=-1;return c.map(function(h){var p=h[0],g=h[1];a[g]||(a[g]=(!i.hasFrame(g)||g===0||g===l?i.getNowFrame(g):i.getNowFrame(g,0,!0)).toCSSText());var v=p/r*100;return v-d<Ta&&(v+=Ta),d=v,"".concat(Math.min(v,100),`%{
                `).concat(p===0&&!ob(0,1,o)?"":a[g],`
            }`)}).join("")},t.prototype.updateFrameOrders=function(){var r=this.nameMap.orderMap;this.forEach(function(n){n.setOrderObject(r)})},t}(th),ub=function(e){Yl(t,e);function t(r,n){var o=e.call(this)||this;return o.items={},o.orderMap=new ui(to),o.load(r,n),o}return t.prototype.getDuration=function(){var r=0;return this.forEach(function(n){r=Math.max(r,n.getTotalDuration()/n.getPlaySpeed())}),r||this.state[Wr]},t.prototype.setDuration=function(r){this.items;var n=this.getDuration();if(r===0||!isFinite(n))return this;if(n===0)this.forEach(function(i){i.setDuration(r)});else{var o=r/n;this.forEach(function(i){i.setDelay(i.getDelay()*o),i.setDuration(i.getDuration()*o)})}return e.prototype.setDuration.call(this,r),this},t.prototype.getItem=function(r){return this.items[r]},t.prototype.newItem=function(r,n){if(n===void 0&&(n={}),this.items[r])return this.items[r];var o=new rA;return this.setItem(r,o),o.setOptions(n),o},t.prototype.removeItem=function(r){return delete this.items[r],this.orderMap.remove([r]),this},t.prototype.setItem=function(r,n){return n.setId(r),this.items[r]=n,this.orderMap.add([r]),this},t.prototype.getCurrentFrames=function(r,n){var o=this.getEasing()||n,i={};return this.forEach(function(a){var s=a.getId();rb(a)?i[s]=a.getCurrentFrames(r,o):i[s]=a.getCurrentFrame(r,o)}),this.temp=i,i},t.prototype.getCurrentFlattedFrames=function(r,n){var o=this.getCurrentFrames(r,n);return nb(o,to)},t.prototype.setTime=function(r,n,o,i){var a=this;return e.prototype.setTime.call(this,r,n,o,function(){var s=a.getIterationTime(),l=a.getEasing()||i;a.forEach(function(u){u.setTime(s*u.getPlaySpeed()-u.getDelay(),n,!0,l)});var c=a.getCurrentFrames(!1,i);a.trigger("animate",{frames:c,currentTime:a.getTime(),time:s})}),this},t.prototype.forEach=function(r){var n=this.items;return this.getOrders().forEach(function(o,i){r(n[o],o,i,n)}),this},t.prototype.toCSS=function(r,n,o){n===void 0&&(n=this.getDuration()),o===void 0&&(o=[]);var i=!n||!isFinite(n)?0:n,a=[],s=this.state;return s[Wr]=this.getDuration(),this.forEach(function(l){a.push(l.toCSS(r,i,o.concat(s)))}),a.join("")},t.prototype.exportCSS=function(r,n,o){var i=this.toCSS(r,n,o);return(!o||!o.length)&&(this.styledInjector&&(this.styledInjector.destroy(),this.styledInjector=null),this.styled=ml(i),this.styledInjector=this.styled.inject(this.getAnimationElement(),{original:!0})),this},t.prototype.append=function(r){r.setDelay(r.getDelay()+this.getDuration()),this.setItem(Qy(r),r)},t.prototype.pauseCSS=function(){return this.forEach(function(r){r.pauseCSS()})},t.prototype.pause=function(){return e.prototype.pause.call(this),Jf(this)&&this.pauseCSS(),this.forEach(function(r){r.pause()}),this},t.prototype.endCSS=function(){this.forEach(function(r){r.endCSS()}),Jl(this,!1)},t.prototype.end=function(){return Ky(this)&&this.endCSS(),e.prototype.end.call(this),this},t.prototype.getOrders=function(){return this.orderMap.get([])||[]},t.prototype.setOrders=function(r){return this.orderMap.set([],r)},t.prototype.getAnimationElement=function(){var r;return this.forEach(function(n){var o=n.getAnimationElement();!r&&(r=o)}),r},t.prototype.addPlayClass=function(r,n,o){o===void 0&&(o={});var i;return this.forEach(function(a){var s=a.addPlayClass(r,n,o);!i&&(i=s)}),i},t.prototype.playCSS=function(r,n,o){return r===void 0&&(r=!0),o===void 0&&(o={}),eb(this,r,n,o),this},t.prototype.set=function(r){return this.load(r),this},t.prototype.clear=function(){this.finish(),this.items={},this.orderMap=new ui(to),this.styledInjector&&this.styledInjector.destroy(),this.styled=null,this.styledInjector=null},t.prototype.load=function(r,n){if(r===void 0&&(r={}),n===void 0&&(n=r.options),!r)return this;this.setOptions(n);var o=n&&n[ir]||this.state[ir],i=function(l){if(l==="options")return"continue";var c=r[l],u=void 0;if(rb(c)||Oa(c))a.setItem(l,c),u=c;else if(It(c)){var d=[];o&&il&&(a.state.noRegisterElement||(d=cl("".concat(It(o)?o(l):l),!0)));for(var h=d.length,p=h||c.defaultCount||0,g=new t,v=[],m=0;m<p;++m){var x=d[m],y=g.newItem(m);y.setId().load(c(m,d[m])),v.push(y.getId()),x&&y.setElement(x)}if(!h){var b=[];g.state[ir]=function(w){return b.length||(b=cl("".concat(It(o)?o(l):l),!0)),b[v.indexOf(w)]}}return a.setItem(l,g),"continue"}else u=a.newItem(l,{noRegisterElement:!0}),u.load(c);a.state.noRegisterElement||o&&u.setSelector(o)},a=this;for(var s in r)i(s)},t.prototype.setOptions=function(r){r===void 0&&(r={}),e.prototype.setOptions.call(this,r);var n=r.selector;return n&&(this.state[ir]=n),this},t.prototype.setSelector=function(r){var n=this.state,o=r===!0?n[ir]||!0:r;n[ir]=o;var i=It(r);return o&&this.forEach(function(a,s){a.setSelector(i?r(s):o)}),this},t.prototype.start=function(r){r===void 0&&(r=this.state[or]);var n=e.prototype.start.call(this,r);return n?this.forEach(function(o){o.start(0)}):this.forEach(function(o){o.setPlayState(Ra)}),n},t.VERSION="1.10.3",t}(th);function Fa(e){var t=e.prototype;return Jt(t).filter(function(r){var n=Object.getOwnPropertyDescriptor(t,r);return r==="constructor"?!1:!n.get&&!n.set&&It(n.value||t[r])})}var nA=Fa(yn),ah=Ze(Ze([],nA,!0),Fa(th),!0);Ze(Ze([],ah,!0),Fa(ub),!0),Ze(Ze([],ah,!0),Fa(ub),!0);var db=Ze(Ze([],ah,!0),Fa(ro),!0),fb={methods:db,created:function(e){var t=It(e)?e():e,r=Ea(0),n;Ay(t)?n=t:n=Ea(eh(t)?t:new ro(t));var o=Gf(function(){return n.current,r.current,n.current.toCSSText()}),i=Gf(function(){return n.current,o.current,n.current.toCSSObject()}),a=Gf(function(){return n.current,o.current,n.current.toCSSObject(!0)}),s=function(){++r.current};n.subscribe(function(c,u){u.off("update",s),c.on("update",s)});var l=MP(Na({cssText:o,cssObject:i,camelCasedCSSObject:a,onUpdate:s},db.reduce(function(c,u){return c[u]=function(){for(var d,h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];var g=n.current;return g==null?void 0:(d=g[u]).call.apply(d,Ze([g],h,!1))},c},{})));return l},destroy:function(e){e.off("update",e.onUpdate)}};Na(Na({},fb),{created:function(e){var t=It(e)?e():e,r=Ea(new ro);return t.on("animate",function(n){r.current=n.frame}),fb.created(r)}});function oA(e,t){return(e.getOrders(["transform"])||[]).indexOf(t)}class sh{constructor(t={}){this.map=new Map,this.onBeforeRenderStart=r=>{const n=this.testFrame(r);r.setTransform(n?.toCSSObject().transform||"")},this.onBeforeRenderGroupStart=r=>{r.events.forEach(n=>{this.onBeforeRenderStart(n)})},this.onDragStart=r=>{const n=this.testFrame(r);if(!n)return!1;this.setTranasform(r,n,"translate")},this.onDrag=r=>{this.testDrag(r),this.testRender(r.target)},this.onDragGroupStart=r=>{r.events.forEach(n=>{this.onDragStart(n)})},this.onDragGroup=r=>{r.events.forEach(n=>{this.onDrag(n)})},this.onResizeStart=r=>{r.dragStart&&this.onDragStart(r.dragStart),r.setOrigin(["%","%"])},this.onResize=r=>{this.testResize(r),this.testRender(r.target)},this.onResizeGroupStart=r=>{r.events.forEach(n=>{this.onResizeStart(n)})},this.onResizeGroup=r=>{r.events.forEach(n=>{this.onResize(n)})},this.onScaleStart=r=>{const n=this.testFrame(r);if(!n)return!1;this.setTranasform(r,n,"scale"),r.dragStart&&this.onDragStart(r.dragStart)},this.onScale=r=>{this.testScale(r),this.testRender(r.target)},this.onScaleGroupStart=r=>{r.events.forEach(n=>{this.onScaleStart(n)})},this.onScaleGroup=r=>{r.events.forEach(n=>{this.onScale(n)})},this.onRotateStart=r=>{const n=this.testFrame(r);if(!n)return!1;this.setTranasform(r,n,"rotate"),r.dragStart&&this.onDragStart(r.dragStart)},this.onRotate=r=>{this.testRotate(r),this.testRender(r.target)},this.onRotateGroupStart=r=>{r.events.forEach(n=>{this.onRotateStart(n)})},this.onRotateGroup=r=>{r.events.forEach(n=>{this.onRotate(n)})},this.onClip=r=>{const n=this.testFrame(r);n&&(r.clipType==="rect"?n.set("clip",r.clipStyle):n.set("clip-path",r.clipStyle)),this.testRender(r.target)},this.onDragOriginStart=r=>{r.dragStart&&this.onDragStart(r.dragStart)},this.onDragOrigin=r=>{const n=this.testFrame(r);n&&(n.set("transform-origin",r.transformOrigin),this.testDrag(r.drag),this.testRender(r.target))},this.onRound=r=>{const n=this.testFrame(r);n&&(n.set("border-radius",r.borderRadius),this.testRender(r.target))},this.onWarpStart=r=>{const n=this.testFrame(r);if(!n)return!1;this.setTranasform(r,n,"matrix3d")},this.onWarp=r=>{const n=this.testFrame(r);n&&(n.set("transform","matrix3d",r.matrix.join(", ")),this.testRender(r.target))},this.onRender=r=>{const n=r.target,o=this.getFrame(n);!n||!o||this.render(n,o)},this.options={useBeforeRender:!1,useRender:!1,createAuto:!0,...t}}static create(t){return new sh(t)}render(t,r=this.getFrame(t)||new ro){t.style.cssText+=r.toCSS()}clear(){this.map.clear()}getTargets(){return this.map.keys()}getFrames(){return this.map.values()}getFrame(t){return this.map.get(t)}setFrame(t,r){return this.map.set(t,r)}removeFrame(t){this.map.delete(t)}createFrame(t,r={}){const{translate:n,rotate:o,scale:i}=iA(t),a=new ro({transform:{translate:n,rotate:o,scale:i}});return a.set(r),this.map.set(t,a),a}setElements(t){const r=et(t)?document.querySelectorAll(t):t,n=r.length,o=this.map;for(let i=0;i<n;++i){const a=r[i];o.has(a)||this.createFrame(a)}}testFrame(t){const r=t.target,n=this.getFrame(r);if(n)return n;if(!this.options.createAuto&&t.stop){t.stop();return}return this.createFrame(r)}testDrag(t){const r=t.target,n=t.translate,o=this.getFrame(r),i=`${n[0]}px`,a=`${n[1]}px`;o&&(o.has("transform","translate")?o.set("transform","translate",`${i},${a}`):(o.set("transform","translateX",i),o.set("transform","translateY",a)))}testResize(t){const r=t.target,n=this.getFrame(r);n&&(n.set("width",`${t.width}px`),n.set("height",`${t.height}px`),this.testDrag(t.drag))}testScale(t){const r=this.testFrame(t),n=t.scale;r&&(this.testDrag(t.drag),r.set("transform","scale",`${n[0]},${n[1]}`))}testRotate(t){const r=this.testFrame(t),n=t.rotate;r&&(this.testDrag(t.drag),r.set("transform","rotate",`${n}deg`))}testRender(t,r=this.getFrame(t)){this.options.useRender||this.render(t,r)}setTranasform(t,r,n){const o=oA(r,n);this.options.useBeforeRender?t.setTransformIndex(o):t.setTransform(r.toCSSObject().transform||[],o)}}function iA(e){let t="";if(e.style.transform)t=e.style.transform;else{const i=window.getComputedStyle(e);t=i.transform||i.webkitTransform}let r="0px, 0px",n="0deg",o="1, 1";if(t&&t!=="none")if(t.startsWith("matrix")){const i=t.match(/matrix\((.*?)\)/);if(i&&i[1]){const a=i[1].split(",").map(s=>parseFloat(s.trim()));a.length>=6&&(r=`${a[4]}px, ${a[5]}px`)}}else{const i=t.match(/translate\(\s*([\d.]+)px\s*,\s*([\d.]+)px\s*\)/);i&&(r=`${i[1]}px, ${i[2]}px`);const a=t.match(/rotate\(\s*([\d.]+)deg\s*\)/);a&&(n=`${a[1]}deg`);const s=t.match(/scale\(\s*([\d.]+)(?:\s*,\s*([\d.]+))?\s*\)/);s&&(s[2]?o=`${s[1]}, ${s[2]}`:o=`${s[1]}, ${s[1]}`)}return{translate:r,rotate:n,scale:o}}class aA extends sh{constructor(t){super({createAuto:!0,useBeforeRender:!0}),this.memory=t,this.selectedTargets=[]}setSelectedTargets(t){this.selectedTargets=t}getSelectedTargets(){return this.selectedTargets}getSelectedFrames(){return this.getSelectedTargets().map(t=>this.getFrame(t))}renderFrames(){this.getSelectedTargets().forEach(t=>{this.render(t)})}setOrders(t,r){return this.setValue(n=>{n.setOrders(t,r)})}setProperty(t,r){return this.setValue(n=>{n.set(...t,r)})}removeProperties(...t){return this.setValue((r,n)=>{t.forEach(o=>{r.remove(o),n.style.removeProperty(o)})})}getProperties(t,r){const n=this.getSelectedFrames(),o=this.memory;return n.length?t.map((i,a)=>n.map(l=>l.get(...i)).filter(l=>l)[0]||r[a]):t.map((i,a)=>o.get(i.join("///"))||r[a])}setValue(t){const n=this.getSelectedTargets().map(o=>{const i=this.getFrame(o),a=i?.getOrderObject(),s=i?.get();t(i,o);const l=i?.get(),c=i?.getOrderObject();return{id:bp(o),prev:s,prevOrders:a,next:l,nextOrders:c}});return this.renderFrames(),n}}class sA extends C.PureComponent{constructor(t){super(t),this.memory=new pP,this.moveableData=new aA(this.memory),this.moveable=C.createRef(),this.positionSyncManager=null,this.hasLockedElements=()=>{const{selectedTargets:r}=this.props;if(r.length===0)return!1;const n=je.getState();return n.json?.docs[0]?r.some(i=>{const a=i.dataset.veltixNodeId,s=i.dataset.veltixDocId;return a&&s?n.getNode(s,a)?.position?.locked===!0:!1}):!1},this.updatePositionSyncManager=()=>{this.positionSyncManager&&this.positionSyncManager.updateProps({selectedTargets:this.props.selectedTargets})},this.positionSyncManager=new hP(this,{selectedTargets:t.selectedTargets,moveableData:null,updateRect:this.updateRect.bind(this)})}getMoveable(){return this.moveable.current}componentDidMount(){this.positionSyncManager&&(this.positionSyncManager.updateProps({moveableData:this.moveableData}),this.positionSyncManager.initialize())}componentWillUnmount(){this.positionSyncManager&&this.positionSyncManager.cleanup()}componentDidUpdate(t){t.selectedTargets!==this.props.selectedTargets&&this.updatePositionSyncManager()}render(){const{verticalGuidelines:t,horizontalGuidelines:r,selectedTargets:n,zoom:o}=this.props;if(!n.length)return this.renderViewportMoveable();const i=this.hasLockedElements(),a=this.moveableData,s=this.memory,l=[document.querySelector(".scena-viewport"),...a.getTargets()].filter(d=>n.indexOf(d)===-1),c=!1,u="";return f.jsx(uy,{ables:[fP,dP],ref:this.moveable,targets:n,dimensionViewable:!i,deleteButtonViewable:!i,draggable:!i,resizable:!i,pinchable:i?[]:["rotatable"],zoom:1/o,throttleResize:1,clippable:u==="Crop",passDragArea:u==="Text",checkInput:u==="Text",throttleDragRotate:0,keepRatio:n.length>1?!0:c,rotatable:!i,snappable:!i,snapCenter:!0,snapGap:!1,isDisplayInnerSnapDigit:!0,roundable:!i,verticalGuidelines:t,horizontalGuidelines:r,elementGuidelines:l,clipArea:!0,clipVerticalGuidelines:[0,"50%","100%"],clipHorizontalGuidelines:[0,"50%","100%"],clipTargetBounds:!0,onBeforeRenderStart:a.onBeforeRenderStart,onBeforeRenderGroupStart:a.onBeforeRenderGroupStart,onDragStart:d=>{i||a.onDragStart(d)},onDrag:d=>{i||a.onDrag(d)},onDragGroupStart:a.onDragGroupStart,onDragGroup:a.onDragGroup,onScaleStart:a.onScaleStart,onScale:a.onScale,onScaleGroupStart:a.onScaleGroupStart,onScaleGroup:a.onScaleGroup,onResizeStart:a.onResizeStart,onResize:a.onResize,onResizeGroupStart:a.onResizeGroupStart,onResizeGroup:a.onResizeGroup,onRotateStart:a.onRotateStart,onRotate:a.onRotate,onRotateGroupStart:a.onRotateGroupStart,onRotateGroup:a.onRotateGroup,defaultClipPath:s.get("crop")||"inset",onClip:a.onClip,onDragOriginStart:a.onDragOriginStart,onDragOrigin:d=>{i||a.onDragOrigin(d)},onRound:a.onRound,onClick:d=>{const h=d.inputTarget;if(d.isDouble&&h.isContentEditable){const p=yp(h);p&&p.focus()}else $t.getState().selectNode(d.moveableTarget?.dataset.veltixNodeId),this.props.selecto.current?.clickTarget(d.inputEvent,d.inputTarget)},onClickGroup:d=>{this.props.selecto.current?.clickTarget(d.inputEvent,d.inputTarget)},onRenderStart:d=>{d.datas.prevData=a?.getFrame(d.target)?.get()},onRender:d=>{d.datas.isRender=!0},onRenderEnd:d=>{if(!d.datas.isRender)return;const h=d.target,p=h.dataset.veltixNodeId,g=h.dataset.veltixDocId;if(p&&g&&je.getState().getNode(g,p)?.position?.locked===!0)return;const v=bp(d.target),m=uP(d.target.getAttribute("style"));je.getState().updateNode(g,v,{position:m})},onRenderGroupStart:d=>{d.datas.prevDatas=d.targets.map(h=>a.getFrame(h)?.get())},onRenderGroup:d=>{d.datas.isRender=!0},onRenderGroupEnd:d=>{d.datas.isRender}})}renderViewportMoveable(){const t=this.moveableData;return f.jsx(uy,{ref:this.moveable,target:null,origin:!1,onRotateStart:t.onRotateStart,onRotate:t.onRotate})}updateRect(){this.getMoveable().updateRect()}}var lh=["Enter"," "],lA=["ArrowDown","PageUp","Home"],hb=["ArrowUp","PageDown","End"],cA=[...lA,...hb],uA={ltr:[...lh,"ArrowRight"],rtl:[...lh,"ArrowLeft"]},dA={ltr:["ArrowLeft"],rtl:["ArrowRight"]},La="Menu",[Ba,fA,hA]=Rs(La),[no,pb]=Ot(La,[hA,Mo,ks]),tc=Mo(),vb=ks(),[pA,oo]=no(La),[vA,za]=no(La),gb=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:o,onOpenChange:i,modal:a=!0}=e,s=tc(t),[l,c]=C.useState(null),u=C.useRef(!1),d=wt(i),h=Ao(o);return C.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),f.jsx(uu,{...s,children:f.jsx(pA,{scope:t,open:r,onOpenChange:d,content:l,onContentChange:c,children:f.jsx(vA,{scope:t,onClose:C.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:a,children:n})})})};gb.displayName=La;var gA="MenuAnchor",ch=C.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,o=tc(r);return f.jsx(du,{...o,...n,ref:t})});ch.displayName=gA;var uh="MenuPortal",[mA,mb]=no(uh,{forceMount:void 0}),xb=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:o}=e,i=oo(uh,t);return f.jsx(mA,{scope:t,forceMount:r,children:f.jsx(St,{present:r||i.open,children:f.jsx(ji,{asChild:!0,container:o,children:n})})})};xb.displayName=uh;var ar="MenuContent",[xA,dh]=no(ar),yb=C.forwardRef((e,t)=>{const r=mb(ar,e.__scopeMenu),{forceMount:n=r.forceMount,...o}=e,i=oo(ar,e.__scopeMenu),a=za(ar,e.__scopeMenu);return f.jsx(Ba.Provider,{scope:e.__scopeMenu,children:f.jsx(St,{present:n||i.open,children:f.jsx(Ba.Slot,{scope:e.__scopeMenu,children:a.modal?f.jsx(yA,{...o,ref:t}):f.jsx(bA,{...o,ref:t})})})})}),yA=C.forwardRef((e,t)=>{const r=oo(ar,e.__scopeMenu),n=C.useRef(null),o=Ee(t,n);return C.useEffect(()=>{const i=n.current;if(i)return Wc(i)},[]),f.jsx(fh,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:de(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),bA=C.forwardRef((e,t)=>{const r=oo(ar,e.__scopeMenu);return f.jsx(fh,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),wA=On("MenuContent.ScrollLock"),fh=C.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:s,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:p,disableOutsideScroll:g,...v}=e,m=oo(ar,r),x=za(ar,r),y=tc(r),b=vb(r),w=fA(r),[_,T]=C.useState(null),j=C.useRef(null),k=Ee(t,j,m.onContentChange),R=C.useRef(0),A=C.useRef(""),$=C.useRef(0),F=C.useRef(null),L=C.useRef("right"),P=C.useRef(0),O=g?ps:C.Fragment,I=g?{as:wA,allowPinchZoom:!0}:void 0,E=M=>{const D=A.current+M,N=w().filter(q=>!q.disabled),z=document.activeElement,Y=N.find(q=>q.ref.current===z)?.textValue,H=N.map(q=>q.textValue),K=PA(H,D,Y),J=N.find(q=>q.textValue===K)?.ref.current;(function q(Z){A.current=Z,window.clearTimeout(R.current),Z!==""&&(R.current=window.setTimeout(()=>q(""),1e3))})(D),J&&setTimeout(()=>J.focus())};C.useEffect(()=>()=>window.clearTimeout(R.current),[]),zc();const S=C.useCallback(M=>L.current===F.current?.side&&OA(M,F.current?.area),[]);return f.jsx(xA,{scope:r,searchRef:A,onItemEnter:C.useCallback(M=>{S(M)&&M.preventDefault()},[S]),onItemLeave:C.useCallback(M=>{S(M)||(j.current?.focus(),T(null))},[S]),onTriggerLeave:C.useCallback(M=>{S(M)&&M.preventDefault()},[S]),pointerGraceTimerRef:$,onPointerGraceIntentChange:C.useCallback(M=>{F.current=M},[]),children:f.jsx(O,{...I,children:f.jsx(ss,{asChild:!0,trapped:o,onMountAutoFocus:de(i,M=>{M.preventDefault(),j.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:f.jsx(Mi,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:p,children:f.jsx(ag,{asChild:!0,...b,dir:x.dir,orientation:"vertical",loop:n,currentTabStopId:_,onCurrentTabStopIdChange:T,onEntryFocus:de(l,M=>{x.isUsingKeyboardRef.current||M.preventDefault()}),preventScrollOnEntryFocus:!0,children:f.jsx(fu,{role:"menu","aria-orientation":"vertical","data-state":Ib(m.open),"data-radix-menu-content":"",dir:x.dir,...y,...v,ref:k,style:{outline:"none",...v.style},onKeyDown:de(v.onKeyDown,M=>{const N=M.target.closest("[data-radix-menu-content]")===M.currentTarget,z=M.ctrlKey||M.altKey||M.metaKey,Y=M.key.length===1;N&&(M.key==="Tab"&&M.preventDefault(),!z&&Y&&E(M.key));const H=j.current;if(M.target!==H||!cA.includes(M.key))return;M.preventDefault();const J=w().filter(q=>!q.disabled).map(q=>q.ref.current);hb.includes(M.key)&&J.reverse(),RA(J)}),onBlur:de(e.onBlur,M=>{M.currentTarget.contains(M.target)||(window.clearTimeout(R.current),A.current="")}),onPointerMove:de(e.onPointerMove,Ga(M=>{const D=M.target,N=P.current!==M.clientX;if(M.currentTarget.contains(D)&&N){const z=M.clientX>P.current?"right":"left";L.current=z,P.current=M.clientX}}))})})})})})})});yb.displayName=ar;var SA="MenuGroup",hh=C.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return f.jsx(xe.div,{role:"group",...n,ref:t})});hh.displayName=SA;var CA="MenuLabel",bb=C.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return f.jsx(xe.div,{...n,ref:t})});bb.displayName=CA;var rc="MenuItem",wb="menu.itemSelect",nc=C.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...o}=e,i=C.useRef(null),a=za(rc,e.__scopeMenu),s=dh(rc,e.__scopeMenu),l=Ee(t,i),c=C.useRef(!1),u=()=>{const d=i.current;if(!r&&d){const h=new CustomEvent(wb,{bubbles:!0,cancelable:!0});d.addEventListener(wb,p=>n?.(p),{once:!0}),Dp(d,h),h.defaultPrevented?c.current=!1:a.onClose()}};return f.jsx(Sb,{...o,ref:l,disabled:r,onClick:de(e.onClick,u),onPointerDown:d=>{e.onPointerDown?.(d),c.current=!0},onPointerUp:de(e.onPointerUp,d=>{c.current||d.currentTarget?.click()}),onKeyDown:de(e.onKeyDown,d=>{const h=s.searchRef.current!=="";r||h&&d.key===" "||lh.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});nc.displayName=rc;var Sb=C.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:o,...i}=e,a=dh(rc,r),s=vb(r),l=C.useRef(null),c=Ee(t,l),[u,d]=C.useState(!1),[h,p]=C.useState("");return C.useEffect(()=>{const g=l.current;g&&p((g.textContent??"").trim())},[i.children]),f.jsx(Ba.ItemSlot,{scope:r,disabled:n,textValue:o??h,children:f.jsx(sg,{asChild:!0,...s,focusable:!n,children:f.jsx(xe.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:c,onPointerMove:de(e.onPointerMove,Ga(g=>{n?a.onItemLeave(g):(a.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:de(e.onPointerLeave,Ga(g=>a.onItemLeave(g))),onFocus:de(e.onFocus,()=>d(!0)),onBlur:de(e.onBlur,()=>d(!1))})})})}),EA="MenuCheckboxItem",Cb=C.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...o}=e;return f.jsx(Tb,{scope:e.__scopeMenu,checked:r,children:f.jsx(nc,{role:"menuitemcheckbox","aria-checked":oc(r)?"mixed":r,...o,ref:t,"data-state":vh(r),onSelect:de(o.onSelect,()=>n?.(oc(r)?!0:!r),{checkForDefaultPrevented:!1})})})});Cb.displayName=EA;var Eb="MenuRadioGroup",[_A,NA]=no(Eb,{value:void 0,onValueChange:()=>{}}),_b=C.forwardRef((e,t)=>{const{value:r,onValueChange:n,...o}=e,i=wt(n);return f.jsx(_A,{scope:e.__scopeMenu,value:r,onValueChange:i,children:f.jsx(hh,{...o,ref:t})})});_b.displayName=Eb;var Nb="MenuRadioItem",Db=C.forwardRef((e,t)=>{const{value:r,...n}=e,o=NA(Nb,e.__scopeMenu),i=r===o.value;return f.jsx(Tb,{scope:e.__scopeMenu,checked:i,children:f.jsx(nc,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":vh(i),onSelect:de(n.onSelect,()=>o.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});Db.displayName=Nb;var ph="MenuItemIndicator",[Tb,DA]=no(ph,{checked:!1}),Mb=C.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...o}=e,i=DA(ph,r);return f.jsx(St,{present:n||oc(i.checked)||i.checked===!0,children:f.jsx(xe.span,{...o,ref:t,"data-state":vh(i.checked)})})});Mb.displayName=ph;var TA="MenuSeparator",jb=C.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return f.jsx(xe.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});jb.displayName=TA;var MA="MenuArrow",Rb=C.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,o=tc(r);return f.jsx(hu,{...o,...n,ref:t})});Rb.displayName=MA;var jA="MenuSub",[uF,kb]=no(jA),$a="MenuSubTrigger",Pb=C.forwardRef((e,t)=>{const r=oo($a,e.__scopeMenu),n=za($a,e.__scopeMenu),o=kb($a,e.__scopeMenu),i=dh($a,e.__scopeMenu),a=C.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:l}=i,c={__scopeMenu:e.__scopeMenu},u=C.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return C.useEffect(()=>u,[u]),C.useEffect(()=>{const d=s.current;return()=>{window.clearTimeout(d),l(null)}},[s,l]),f.jsx(ch,{asChild:!0,...c,children:f.jsx(Sb,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":o.contentId,"data-state":Ib(r.open),...e,ref:as(t,o.onTriggerChange),onClick:d=>{e.onClick?.(d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:de(e.onPointerMove,Ga(d=>{i.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!r.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:de(e.onPointerLeave,Ga(d=>{u();const h=r.content?.getBoundingClientRect();if(h){const p=r.content?.dataset.side,g=p==="right",v=g?-5:5,m=h[g?"left":"right"],x=h[g?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:m,y:h.top},{x,y:h.top},{x,y:h.bottom},{x:m,y:h.bottom}],side:p}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:de(e.onKeyDown,d=>{const h=i.searchRef.current!=="";e.disabled||h&&d.key===" "||uA[n.dir].includes(d.key)&&(r.onOpenChange(!0),r.content?.focus(),d.preventDefault())})})})});Pb.displayName=$a;var Ab="MenuSubContent",Ob=C.forwardRef((e,t)=>{const r=mb(ar,e.__scopeMenu),{forceMount:n=r.forceMount,...o}=e,i=oo(ar,e.__scopeMenu),a=za(ar,e.__scopeMenu),s=kb(Ab,e.__scopeMenu),l=C.useRef(null),c=Ee(t,l);return f.jsx(Ba.Provider,{scope:e.__scopeMenu,children:f.jsx(St,{present:n||i.open,children:f.jsx(Ba.Slot,{scope:e.__scopeMenu,children:f.jsx(fh,{id:s.contentId,"aria-labelledby":s.triggerId,...o,ref:c,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{a.isUsingKeyboardRef.current&&l.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:de(e.onFocusOutside,u=>{u.target!==s.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:de(e.onEscapeKeyDown,u=>{a.onClose(),u.preventDefault()}),onKeyDown:de(e.onKeyDown,u=>{const d=u.currentTarget.contains(u.target),h=dA[a.dir].includes(u.key);d&&h&&(i.onOpenChange(!1),s.trigger?.focus(),u.preventDefault())})})})})})});Ob.displayName=Ab;function Ib(e){return e?"open":"closed"}function oc(e){return e==="indeterminate"}function vh(e){return oc(e)?"indeterminate":e?"checked":"unchecked"}function RA(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function kA(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function PA(e,t,r){const o=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let a=kA(e,Math.max(i,0));o.length===1&&(a=a.filter(c=>c!==r));const l=a.find(c=>c.toLowerCase().startsWith(o.toLowerCase()));return l!==r?l:void 0}function AA(e,t){const{x:r,y:n}=e;let o=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const s=t[i],l=t[a],c=s.x,u=s.y,d=l.x,h=l.y;u>n!=h>n&&r<(d-c)*(n-u)/(h-u)+c&&(o=!o)}return o}function OA(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return AA(r,t)}function Ga(e){return t=>t.pointerType==="mouse"?e(t):void 0}var IA=gb,FA=ch,LA=xb,BA=yb,zA=hh,$A=bb,GA=nc,VA=Cb,UA=_b,HA=Db,WA=Mb,YA=jb,qA=Rb,XA=Pb,KA=Ob,ic="DropdownMenu",[ZA,dF]=Ot(ic,[pb]),Pt=pb(),[QA,Fb]=ZA(ic),Lb=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:o,defaultOpen:i,onOpenChange:a,modal:s=!0}=e,l=Pt(t),c=C.useRef(null),[u,d]=fr({prop:o,defaultProp:i??!1,onChange:a,caller:ic});return f.jsx(QA,{scope:t,triggerId:Xt(),triggerRef:c,contentId:Xt(),open:u,onOpenChange:d,onOpenToggle:C.useCallback(()=>d(h=>!h),[d]),modal:s,children:f.jsx(IA,{...l,open:u,onOpenChange:d,dir:n,modal:s,children:r})})};Lb.displayName=ic;var Bb="DropdownMenuTrigger",zb=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...o}=e,i=Fb(Bb,r),a=Pt(r);return f.jsx(FA,{asChild:!0,...a,children:f.jsx(xe.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...o,ref:as(t,i.triggerRef),onPointerDown:de(e.onPointerDown,s=>{!n&&s.button===0&&s.ctrlKey===!1&&(i.onOpenToggle(),i.open||s.preventDefault())}),onKeyDown:de(e.onKeyDown,s=>{n||(["Enter"," "].includes(s.key)&&i.onOpenToggle(),s.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(s.key)&&s.preventDefault())})})})});zb.displayName=Bb;var JA="DropdownMenuPortal",$b=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Pt(t);return f.jsx(LA,{...n,...r})};$b.displayName=JA;var Gb="DropdownMenuContent",Vb=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Fb(Gb,r),i=Pt(r),a=C.useRef(!1);return f.jsx(BA,{id:o.contentId,"aria-labelledby":o.triggerId,...i,...n,ref:t,onCloseAutoFocus:de(e.onCloseAutoFocus,s=>{a.current||o.triggerRef.current?.focus(),a.current=!1,s.preventDefault()}),onInteractOutside:de(e.onInteractOutside,s=>{const l=s.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!o.modal||u)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Vb.displayName=Gb;var eO="DropdownMenuGroup",tO=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Pt(r);return f.jsx(zA,{...o,...n,ref:t})});tO.displayName=eO;var rO="DropdownMenuLabel",Ub=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Pt(r);return f.jsx($A,{...o,...n,ref:t})});Ub.displayName=rO;var nO="DropdownMenuItem",Hb=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Pt(r);return f.jsx(GA,{...o,...n,ref:t})});Hb.displayName=nO;var oO="DropdownMenuCheckboxItem",Wb=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Pt(r);return f.jsx(VA,{...o,...n,ref:t})});Wb.displayName=oO;var iO="DropdownMenuRadioGroup",aO=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Pt(r);return f.jsx(UA,{...o,...n,ref:t})});aO.displayName=iO;var sO="DropdownMenuRadioItem",Yb=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Pt(r);return f.jsx(HA,{...o,...n,ref:t})});Yb.displayName=sO;var lO="DropdownMenuItemIndicator",qb=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Pt(r);return f.jsx(WA,{...o,...n,ref:t})});qb.displayName=lO;var cO="DropdownMenuSeparator",Xb=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Pt(r);return f.jsx(YA,{...o,...n,ref:t})});Xb.displayName=cO;var uO="DropdownMenuArrow",dO=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Pt(r);return f.jsx(qA,{...o,...n,ref:t})});dO.displayName=uO;var fO="DropdownMenuSubTrigger",Kb=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Pt(r);return f.jsx(XA,{...o,...n,ref:t})});Kb.displayName=fO;var hO="DropdownMenuSubContent",Zb=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Pt(r);return f.jsx(KA,{...o,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Zb.displayName=hO;var pO=Lb,vO=zb,gO=$b,Qb=Vb,Jb=Ub,ew=Hb,tw=Wb,rw=Yb,nw=qb,ow=Xb,iw=Kb,aw=Zb;const ac=pO,gh=vO,mO=C.forwardRef(({className:e,inset:t,children:r,...n},o)=>f.jsxs(iw,{ref:o,className:_e("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n,children:[r,f.jsx(Pn,{className:"ml-auto"})]}));mO.displayName=iw.displayName;const xO=C.forwardRef(({className:e,...t},r)=>f.jsx(aw,{ref:r,className:_e("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));xO.displayName=aw.displayName;const Va=C.forwardRef(({className:e,sideOffset:t=4,...r},n)=>f.jsx(gO,{children:f.jsx(Qb,{ref:n,sideOffset:t,className:_e("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Va.displayName=Qb.displayName;const sr=C.forwardRef(({className:e,inset:t,...r},n)=>f.jsx(ew,{ref:n,className:_e("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",t&&"pl-8",e),...r}));sr.displayName=ew.displayName;const yO=C.forwardRef(({className:e,children:t,checked:r,...n},o)=>f.jsxs(tw,{ref:o,className:_e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(nw,{children:f.jsx(ts,{className:"h-4 w-4"})})}),t]}));yO.displayName=tw.displayName;const bO=C.forwardRef(({className:e,children:t,...r},n)=>f.jsxs(rw,{ref:n,className:_e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(nw,{children:f.jsx(CS,{className:"h-2 w-2 fill-current"})})}),t]}));bO.displayName=rw.displayName;const wO=C.forwardRef(({className:e,inset:t,...r},n)=>f.jsx(Jb,{ref:n,className:_e("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));wO.displayName=Jb.displayName;const Ua=C.forwardRef(({className:e,...t},r)=>f.jsx(ow,{ref:r,className:_e("-mx-1 my-1 h-px bg-muted",e),...t}));Ua.displayName=ow.displayName;const Ha=({className:e,...t})=>f.jsx("span",{className:_e("ml-auto text-xs tracking-widest opacity-60",e),...t});Ha.displayName="DropdownMenuShortcut";const SO=()=>{const{nodeContextMenu:e,closeNodeContextMenu:t,removeNode:r}=$t(),{open:n,position:o,node:i}=e,a=je(),s=lp(i?.type||""),l=a.json?.docs?.[0]?.id,c=(u,d)=>{if(!d||!l){alert("No node or page selected!"),t();return}if(u==="Delete"){r(d.id),t();return}if(u==="Duplicate"){a.cloneNode(l,d.id),t();return}if(u==="Lock"||u==="Unlock"){const h=d.position?.locked||!1;a.updateNode(l,d.id,{position:{...d.position,locked:!h}}),t();return}t()};return X.useEffect(()=>{if(!n)return;const u=()=>t();return window.addEventListener("click",u),()=>window.removeEventListener("click",u)},[n,t]),!i||!s?null:f.jsxs(ac,{open:n,onOpenChange:u=>u?void 0:t(),children:[f.jsx("div",{style:{display:"none"}}),f.jsxs(Va,{sideOffset:0,align:"start",style:{position:"fixed",left:o.x,top:o.y,minWidth:200},className:"text-xs",children:[f.jsxs(sr,{"aria-readonly":!0,className:"text-xs",children:[f.jsx(Gh,{className:"!w-4 !h-4 mr-2"}),s?.title]}),f.jsx(Ua,{}),f.jsxs(sr,{onClick:()=>c("Properties",i),className:"text-xs",children:[f.jsx(go,{className:"w-4 h-4 mr-2"}),"Properties"]}),f.jsxs(sr,{onClick:()=>c("Duplicate",i),className:"text-xs",children:[f.jsx(ES,{className:"w-4 h-4 mr-2"}),"Duplicate"]}),f.jsx(Ua,{}),f.jsx(sr,{onClick:()=>c(i.position?.locked?"Unlock":"Lock",i),className:"text-xs",children:i.position?.locked?f.jsxs(f.Fragment,{children:[f.jsx(OS,{className:"w-4 h-4 mr-2"}),"Unlock"]}):f.jsxs(f.Fragment,{children:[f.jsx(Tc,{className:"w-4 h-4 mr-2"}),"Lock"]})}),f.jsx(Ua,{}),f.jsxs(sr,{onClick:()=>c("Delete",i),className:"text-red-600 focus:text-red-600 text-xs",children:[f.jsx(ns,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})},CO=()=>f.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full min-h-[400px] text-center",children:[f.jsxs("div",{className:"mb-6 relative",children:[f.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-dashed border-gray-200 flex items-center justify-center transition-all duration-300 hover:border-gray-300 hover:bg-gradient-to-br hover:from-gray-100 hover:to-gray-150",children:f.jsx(vo,{className:"w-8 h-8 text-gray-400 transition-colors duration-300 hover:text-gray-500"})}),f.jsx("div",{className:"absolute inset-0 w-20 h-20 rounded-full bg-gray-200/20 blur-xl -z-10 scale-75"})]}),f.jsxs("div",{className:"space-y-2 max-w-sm",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"No components yet"}),f.jsx("p",{className:"text-sm text-gray-500 leading-relaxed",children:"Get started by adding your first component to this page. Click the plus button above to begin."})]}),f.jsx("button",{className:"mt-6 px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded-lg hover:bg-gray-800 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2",children:"Add Component"})]}),EO=e=>{let t=`translate(${e.left}px, ${e.top}px)`;return e.rotation&&(t+=` rotate(${e.rotation}deg)`),t},_O=(e,t,r)=>({width:e.width||t.config?.doc?.width,height:e.height||t.config?.doc?.height,background:r.json?.theme?.backgroundColor||"#fff"}),NO=({node:e,docId:t,index:r,onNodeClick:n,onNodeContextMenu:o})=>{const a=qt().get(e.type);if(!a)return null;const s=e.position?.locked===!0,l={position:"absolute",transform:EO(e.position),width:`${e.position.width}px`,height:`${e.position.height}px`},c=d=>{d.preventDefault(),d.stopPropagation(),n(e.id)},u=d=>{d.preventDefault(),d.stopPropagation(),o(d,e)};return X.createElement("div",{[yo]:e.id,"data-type":e.type,"data-veltix-doc-id":t,"data-veltix-node-id":e.id,"data-locked":s,style:l,key:r,onClick:c,onContextMenu:u,className:jr("relative",s&&"opacity-70 hover:opacity-80")},C.createElement(a.main,e.props||{}))},DO=({doc:e,children:t,onViewportContextMenu:r})=>{const n=Ei(),o=je(),i=a=>{a.target.dataset.scenaElementId||r(a)};return f.jsx("div",{className:jr("scena-viewport"),[yo]:"viewport",style:_O(e,n,o),onContextMenu:i,children:t})},TO=()=>f.jsx(CO,{}),MO=({doc:e})=>{const t=$t(l=>l.openNodeContextMenu),r=$t(l=>l.setSelectedNodes),n=C.useCallback(l=>{en.focus.set(!0),en.nodeFocus.set(!0),r([l])},[r]),o=C.useCallback((l,c)=>{r([c.id]),t({x:l.clientX,y:l.clientY},c)},[t,r]),i=C.useCallback(l=>{l.preventDefault(),t({x:l.clientX,y:l.clientY},null)},[t]),a=C.useCallback(l=>{l.preventDefault(),console.log("TODO: handleViewportContextMenu")},[t]),s=C.useMemo(()=>{const l=e.nodes;return!l||l.length===0?f.jsx(TO,{}):l.filter(u=>u.position?.visible!==!1).map((u,d)=>f.jsx(NO,{node:u,docId:e.id,index:d,onNodeClick:n,onNodeContextMenu:o},d))},[e.nodes,e.id,n,o,i]);return f.jsxs(DO,{doc:e,onViewportContextMenu:a,children:[s,f.jsx(SO,{})]})},jO=e=>{const{children:t}=e,r=je(),n=Ei(),o=40,{combinedWidth:i}=dS(o),a=r.json?.docs,s={width:`${i}px`,height:`${n.height}px`};return f.jsxs("div",{className:"veltix-viewport-canvas flex",style:{...s,gap:`${o}px`,...e.style},children:[t,f.jsx("div",{children:a?.map((l,c)=>f.jsx(MO,{doc:l},c))})]})},RO=()=>{const{zoom:e,setZoom:t}=At(),{fitViewport:r}=_y(),n=i=>{t(i/100)},o=[200,100,50];return f.jsxs(ac,{children:[f.jsx(gh,{asChild:!0,children:f.jsxs(Oe,{variant:"outline",size:"sm",className:"h-8 gap-1 shadow-none w-20",children:[f.jsxs("span",{children:[Math.round(e*100),"%"]}),f.jsx(_c,{className:"h-3 w-3"})]})}),f.jsxs(Va,{align:"end",className:"w-[180px]",children:[f.jsxs(sr,{onClick:()=>n(Math.min(e*100+25,200)),children:["Zoom in",f.jsx(Ha,{children:"+"})]}),f.jsxs(sr,{onClick:()=>n(Math.max(e*100-25,25)),children:["Zoom out",f.jsx(Ha,{children:"-"})]}),f.jsxs(sr,{onClick:()=>r(),children:["Zoom to Fit",f.jsx(Ha,{children:"0"})]}),f.jsx(Ua,{}),o.map(i=>f.jsxs(sr,{onClick:()=>n(i),children:[i,"%",i===100&&f.jsx(Ha,{children:"1"})]},i))]})]})};function kO({onClose:e}){const[t,r]=X.useState(""),[n,o]=X.useState(!1),i=X.useRef(null),a=X.useRef(null);X.useEffect(()=>{i.current?.focus()},[]),X.useEffect(()=>{const u=d=>{a.current&&!a.current.contains(d.target)&&e?.()};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[e]);const s=async()=>{!t.trim()||n||(o(!0),setTimeout(()=>{console.log("AI Response:",t.trim()),r(""),o(!1)},1e4))},l=u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),s())},c=u=>{u.stopPropagation()};return f.jsxs("div",{ref:a,onClick:c,className:"flex flex-col w-96 bg-background rounded-lg border",children:[f.jsx("div",{className:"flex-1",children:f.jsx(Io,{ref:i,value:t,onChange:u=>r(u.target.value),onKeyPress:l,placeholder:"Describe what you want to create... (e.g., 'Create a dashboard showing sales data')",className:"w-full resize-none text-sm border-0 transition-all duration-200 focus-visible:ring-0 focus-visible:ring-offset-0",disabled:n,rows:3})}),f.jsxs("div",{className:"flex items-center justify-between px-2 py-2",children:[f.jsx("div",{className:"flex items-center gap-3"}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsx(Oe,{onClick:s,disabled:!t.trim()||n,size:"sm",className:"h-8 w-8 p-0 bg-foreground text-background hover:bg-foreground/90",children:n?f.jsx(Qh,{className:"h-4 w-4 animate-spin"}):f.jsx(yS,{className:"h-4 w-4"})})})]})]})}const io=({icon:e,label:t,onClick:r,active:n=!1,disabled:o=!1})=>f.jsxs(Oe,{variant:n?"secondary":"ghost",size:"sm",className:`h-7 w-7 p-0 flex items-center justify-center relative group ${n?"dark:!bg-gray-600":""}`,onClick:r,disabled:o,children:[f.jsx(e,{className:"h-4 w-4"}),f.jsx("span",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-black dark:bg-slate-700 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:t})]}),PO=()=>{const{isAiChatOpen:e,setIsAiChatOpen:t}=At(),r=()=>{t(!e)};return f.jsx(io,{icon:_i,label:"AI",active:e,onClick:r})},mh=[{title:"Plugins",items:[{label:"Asset Library",icon:Yh,gradient:"from-blue-500 to-blue-600",textColor:"text-gray-700 dark:text-gray-200",onClick:()=>console.log("Asset Library clicked")},{label:"Data Filler",icon:Uh,gradient:"from-green-500 to-green-600",textColor:"text-gray-700 dark:text-gray-200",onClick:()=>console.log("Data Filler clicked")},{label:"Interaction Engine",icon:RS,gradient:"from-purple-500 to-purple-600",textColor:"text-gray-700 dark:text-gray-200",onClick:()=>console.log("Interaction Engine clicked")},{label:"Font Manager",icon:tp,gradient:"from-orange-400 to-orange-500",textColor:"text-gray-700 dark:text-gray-200",onClick:()=>console.log("Font Manager clicked")}]},{title:"Project",items:[{label:"New Page",icon:vo,textColor:"text-gray-700 dark:text-gray-200",onClick:()=>console.log("New Page clicked")},{label:"New Section",icon:vo,textColor:"text-gray-700 dark:text-gray-200",onClick:()=>console.log("New Section clicked")},{label:"Save as Template",icon:Uh,textColor:"text-gray-700 dark:text-gray-200",onClick:()=>console.log("Save as Template clicked")},{label:"Export to Code",icon:Yh,textColor:"text-gray-700 dark:text-gray-200",onClick:()=>console.log("Export to Code clicked")},{label:"Deploy to Web",icon:jS,textColor:"text-gray-700 dark:text-gray-200",shortcut:"P",onClick:()=>console.log("Deploy to Web clicked")}]}];function AO(){const[e,t]=X.useState(-1),r=mh.flatMap(i=>i.items),n=X.useRef([]);X.useEffect(()=>{const i=a=>{if(a.key==="ArrowDown")a.preventDefault(),t(s=>(s+1)%r.length);else if(a.key==="ArrowUp")a.preventDefault(),t(s=>(s-1+r.length)%r.length);else if(a.key==="Enter"){a.preventDefault();const s=r[e];s?.onClick?s.onClick():n.current[e]?.click()}};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[e,r]),X.useEffect(()=>{const i=n.current[e];i&&i.scrollIntoView({block:"nearest"})},[e]);const o=(i,a)=>{t(a),i.onClick?.()};return f.jsx("div",{className:"flex items-start justify-center overflow-hidden bg-background border-none shadow-none",children:f.jsxs("div",{className:"w-full",children:[f.jsx("div",{className:"p-2 border-b border-border",children:f.jsxs("div",{className:"relative",children:[f.jsx(np,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),f.jsx(Ue,{type:"text",placeholder:"Search...",className:"pl-10 bg-muted/50 border-0 rounded-lg h-9 text-sm placeholder:text-muted-foreground focus:bg-background focus:ring-2 focus:ring-ring transition-all duration-200"})]})}),f.jsx("div",{className:"max-h-96 overflow-auto",children:mh.map((i,a)=>f.jsxs("div",{className:jr("p-2 border-border",a!==0&&"border-t"),children:[f.jsx("h3",{className:"text-xs font-semibold text-muted-foreground px-3 py-2 bg-background",children:i.title}),f.jsx("div",{className:"space-y-1",children:i.items.map((s,l)=>{const c=mh.slice(0,a).reduce((d,h)=>d+h.items.length,0)+l,u=c===e;return f.jsxs(Oe,{ref:d=>{n.current[c]=d},onClick:()=>o(s,c),variant:"ghost",className:jr("w-full h-10 px-3 rounded-lg transition-all duration-200",s.shortcut?"justify-between":"justify-start",s.bgColor??"hover:bg-accent",s.textColor??"text-foreground",u&&"bg-accent hover:bg-accent/80"),children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:jr("w-6 h-6 rounded-md mr-3 flex items-center justify-center shadow-sm",s.gradient?`bg-gradient-to-br ${s.gradient}`:"bg-muted"),children:f.jsx(s.icon,{className:jr("w-3.5 h-3.5",s.gradient?"text-white":"text-muted-foreground")})}),f.jsx("span",{className:"text-sm font-medium",children:s.label})]}),s.shortcut&&f.jsx("span",{className:"text-xs text-muted-foreground bg-muted px-1.5 py-0.5 rounded font-mono",children:s.shortcut})]},s.label)})})]},i.title))})]})})}const OO=()=>f.jsxs(ac,{modal:!1,children:[f.jsx(gh,{asChild:!0,children:f.jsx("div",{children:f.jsx(io,{icon:AS,label:"Plugins"})})}),f.jsx(Va,{side:"top",className:"p-0 w-80 overflow-hidden !shadow-none mb-3",children:f.jsx(AO,{})})]});var IO=(e,t,r,n,o,i,a,s)=>{let l=document.documentElement,c=["light","dark"];function u(p){(Array.isArray(e)?e:[e]).forEach(g=>{let v=g==="class",m=v&&i?o.map(x=>i[x]||x):o;v?(l.classList.remove(...m),l.classList.add(i&&i[p]?i[p]:p)):l.setAttribute(g,p)}),d(p)}function d(p){s&&c.includes(p)&&(l.style.colorScheme=p)}function h(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(n)u(n);else try{let p=localStorage.getItem(t)||r,g=a&&p==="system"?h():p;u(g)}catch{}},FO=C.createContext(void 0),LO={setTheme:e=>{},themes:[]},BO=()=>{var e;return(e=C.useContext(FO))!=null?e:LO};C.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:o,defaultTheme:i,value:a,themes:s,nonce:l,scriptProps:c})=>{let u=JSON.stringify([r,t,i,e,s,a,n,o]).slice(1,-1);return C.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${IO.toString()})(${u})`}})});const zO=()=>{const{theme:e,setTheme:t}=BO(),[r,n]=X.useState(!1);X.useEffect(()=>{n(!0)},[]);const o=()=>{t(e==="light"?"dark":"light")};return r?f.jsx(io,{icon:e==="light"?BS:ip,label:e==="light"?"Dark Mode":"Light Mode",onClick:o}):f.jsx(io,{icon:ip,label:"Light Mode",onClick:()=>{}})};function $O(){const{mode:e,setMode:t,isAiChatOpen:r,setIsAiChatOpen:n}=At(),o=()=>{},i=()=>{n(!1)};return f.jsx("footer",{className:"absolute bottom-4 left-2 right-2 h-10 px-4 z-10",children:f.jsxs("div",{className:"relative h-full flex items-center",children:[f.jsx("div",{className:"absolute left-0 z-10"}),f.jsxs("div",{className:"absolute left-0 right-0 flex justify-center",children:[f.jsx("div",{className:`transition-all duration-500 ease-out ${r?"transform translate-y-6 opacity-0 scale-95 pointer-events-none":"transform translate-y-0 opacity-100 scale-100"}`,children:f.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg px-1 py-1",children:[f.jsx(io,{icon:zS,label:"Move",active:e==="select",onClick:()=>t("select")}),f.jsx(io,{icon:kS,label:"Hand Tool",active:e==="hand",onClick:()=>t("hand")}),f.jsx(io,{icon:Xh,label:"Upload",onClick:o}),f.jsx(zO,{}),f.jsx(PO,{}),f.jsx(OO,{})]})}),f.jsx("div",{className:`fixed left-1/2 bottom-2 -translate-x-1/2 transition-all duration-500 ease-out ${r?"transform translate-y-0 opacity-100 scale-100":"transform translate-y-6 opacity-0 scale-95 pointer-events-none"}`,children:f.jsx(kO,{onClose:i})})]}),f.jsx("div",{className:"absolute right-0 flex items-center gap-4 z-10 bg-background",children:f.jsx(RO,{})})]})})}const GO=()=>f.jsx("div",{className:"absolute -top-2 -right-2 w-4 h-4 bg-white/90 rounded-full flex items-center justify-center text-xs z-[1000] shadow-sm",children:f.jsx(Tc,{})}),VO=({position:e,zoom:t})=>{const r=$t(),n=r.selectedNodes,i=r.getCurrentSelection().selectedNodes?.filter(a=>n.includes(a.id)&&a.position?.locked===!0).map(a=>({id:a.id,position:a.position}))||[];return f.jsx(f.Fragment,{children:i.map(a=>f.jsx("div",{className:"absolute",style:{left:`${a.position.left*t+a.position.width*t}px`,top:`${a.position.top*t}px`,transform:`translate(${e.x}px, ${e.y}px) scale(1)`},children:f.jsx(GO,{})},a.id))})};Of.register({id:"canvas.selectAll",keys:ci.CtrlCmd|ze.KEY_A,when:()=>en.focus.get(),handler(e){e.editor.selectAll()},weight:100}),Of.register({id:"canvas.deleteNode",keys:ci.CtrlCmd|ze.Backspace,when:()=>en.focus.get()&&en.nodeFocus.get(),handler:e=>{e.editor.removeSelectedNode()},weight:100});const UO=()=>{const e=Ei(),t=$t(),r=C.useRef(null),{checkBlur:n}=At(),o=C.useRef(null),{ref:i,position:a,spacePressed:s,zoom:l,mode:c}=_y(),u=t.selectedNodes.map(y=>document.querySelector(`[data-veltix-node-id="${y}"]`)).filter(y=>y!==null),{onSelectoDragStart:d,onSelectoScroll:h,onSelectoEnd:p}=lP({selecto:r,moveableManager:o,selectedTargets:u,onCheckBlur:n,onSetSelectedTargets:y=>{const b=y.map(w=>w.dataset.veltixNodeId);return t.setSelectedNodes(b),Promise.resolve()},width:e.width,height:e.height}),g=At(y=>y.horizontalGuides),v=At(y=>y.verticalGuides),{handleDragOver:m,handleDrop:x}=q3();return sP(i,{onFocus(){en.focus.set(!0)},onBlur(){en.focus.set(!1)}}),f.jsxs("div",{className:"veltix-viewport relative flex-1 overflow-hidden",style:{cursor:c==="hand"?"grab":"default",outline:"none"},onDragOver:m,onDrop:x,ref:i,children:[f.jsx("div",{className:"veltix-viewer bg-gray-50 dark:bg-background",children:f.jsxs("div",{className:"w-full h-full",children:[f.jsx(jO,{style:{transformOrigin:"0px 0px",transform:`translate(${a.x}px, ${a.y}px) scale(${l})`},children:f.jsx(sA,{ref:o,selecto:r,selectedTargets:u,verticalGuidelines:v,horizontalGuidelines:g,zoom:l})}),f.jsx(VO,{position:a,zoom:l})]})}),f.jsx(Y3,{ref:r,getElementRect:S3,dragContainer:".veltix-viewer",hitRate:0,selectableTargets:[`.scena-viewport [${yo}]`],selectByClick:!0,selectFromInside:!1,toggleContinueSelect:["shift"],preventDefault:!1,scrollOptions:i.current?{container:i.current,threshold:30,throttleTime:30,getScrollPosition:()=>[a.x,a.y]}:void 0,onDragStart:d,onScroll:h,onSelectEnd:p}),f.jsx($O,{}),(s||c==="hand")&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"absolute top-0 right-0 bottom-0 left-0 cursor-grab"}),f.jsx("div",{className:"cursor-grab"})]})]})},HO=()=>{const{activePanelId:e}=At(),t=HS(e||""),r=X.useMemo(()=>nd(),[]);return X.useMemo(()=>t?f.jsx(f.Fragment,{children:X.createElement(t.viewContainer,{context:r})}):null,[t,r])},WO=()=>{const{status:e,lastSaved:t,error:r,getDiffSummary:n,saveNow:o,pendingSave:i}=Rc(),{json:a}=je(),s=()=>{if(!t)return"";const p=new Date().getTime()-t.getTime();if(p<6e4)return"just now";if(p<36e5){const v=Math.floor(p/6e4);return`${v} ${v===1?"minute":"minutes"} ago`}const g=Math.floor(p/36e5);return`${g} ${g===1?"hour":"hours"} ago`};if(!a)return null;const l=!i&&e!=="error",c=l?"No changes to save":"Save current changes",u=({icon:h,className:p,tooltip:g})=>f.jsxs(Ro,{children:[f.jsx(ko,{asChild:!0,children:f.jsx(Oe,{variant:"outline",size:"sm",className:"h-6 px-2 py-1",children:f.jsx(h,{className:`h-4 w-4 ${p||""}`})})}),g&&f.jsx(Po,{children:g})]}),d=()=>{const h=e==="idle"?"Ready":e==="saving"?"Saving...":e==="saved"?"Saved":"Error",p=e==="saved"?` ${s()}`:"",g=n();return`${h}${p} - ${g}`};return f.jsx("div",{className:"flex items-center gap-2 text-sm","data-save-status":e,"data-save-last-saved":s(),title:d(),children:f.jsxs("div",{className:"flex items-center gap-1",children:[e==="idle"&&f.jsxs(Ro,{children:[f.jsx(ko,{asChild:!0,children:f.jsx(Oe,{variant:"outline",size:"sm",className:"h-6 px-2 py-1",onClick:o,disabled:l,children:f.jsx(zh,{className:"h-4 w-4"})})}),f.jsx(Po,{children:c})]}),e==="saving"&&f.jsx(u,{icon:Qh,className:"animate-spin",tooltip:"Saving changes..."}),e==="saved"&&f.jsx(u,{icon:ts,tooltip:`Saved ${s()}`}),e==="error"&&f.jsx(u,{icon:SS,tooltip:r?.message||"Error saving"})]})})},YO=e=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 216 60",preserveAspectRatio:"xMidYMid meet",...e,children:[f.jsx("path",{fill:"currentColor",d:"m114.853 12.504 4.923.651a222.259 222.259 0 0 1-6.766 16.168 285.418 285.418 0 0 1-7.936 15.712l-6.029-.087c-4.958-10.026-9.107-20.5-12.446-31.424l5.117-.76a174.922 174.922 0 0 0 4.64 14.172 158.802 158.802 0 0 0 5.964 13.78 172.588 172.588 0 0 0 6.852-13.672 154.518 154.518 0 0 0 5.681-14.54ZM130.574 42.409c1.605 0 3.08-.478 4.424-1.432 1.345-.97 2.219-2.315 2.624-4.037l4.185.846a13.021 13.021 0 0 1-1.713 3.581 12.322 12.322 0 0 1-2.581 2.756 11.483 11.483 0 0 1-3.252 1.78c-1.171.42-2.4.63-3.687.63-1.908 0-3.599-.29-5.074-.869-1.474-.579-2.717-1.396-3.729-2.452-2.068-2.156-3.101-5.093-3.101-8.811 0-1.808.303-3.494.911-5.056.621-1.577 1.467-2.944 2.537-4.102a11.798 11.798 0 0 1 3.773-2.734c1.445-.666 3.007-.999 4.683-.999 1.504 0 2.921.297 4.251.89a11.355 11.355 0 0 1 3.534 2.409c1.027 1.042 1.872 2.264 2.537 3.668.665 1.403 1.084 2.922 1.258 4.557l-18.779 2.8c.101 1.026.354 1.952.759 2.777a7.24 7.24 0 0 0 1.562 2.062c1.286 1.157 2.912 1.736 4.878 1.736Zm-7.069-10.59 13.054-1.585-.13-.412c-.549-1.432-1.308-2.553-2.277-3.364-.954-.81-2.146-1.215-3.578-1.215-.607 0-1.272.109-1.994.326-.723.202-1.424.557-2.104 1.063-.679.506-1.294 1.186-1.843 2.04-.535.839-.911 1.888-1.128 3.147ZM155.642 41.15l-.564 4.319c-1.027-.015-1.937-.188-2.732-.521a7.321 7.321 0 0 1-2.06-1.302 8.08 8.08 0 0 1-1.562-1.801 14.694 14.694 0 0 1-1.062-2.062c-.694-1.65-1.128-3.516-1.301-5.599l.585-27.517h4.532l-.195 7.074a1292.69 1292.69 0 0 1-.173 5.86 774.54 774.54 0 0 1-.131 4.73 507.33 507.33 0 0 1-.086 3.668 323.2 323.2 0 0 0-.13 5.881c.014 1.331.209 2.532.585 3.603a6.7 6.7 0 0 0 1.496 2.56c.68.71 1.612 1.078 2.798 1.107ZM163.925 22.943l.173-9.506 4.316-.282-.152 9.7 8.413-.281-.325 4.058-8.131.217-.174 18.924-4.575.108.368-18.902-7.503.174.087-3.993 7.503-.217ZM185.935 15.477c0 .84-.311 1.563-.933 2.17a3.021 3.021 0 0 1-2.19.89 2.996 2.996 0 0 1-2.168-.89 3 3 0 0 1-.889-2.17c0-.853.296-1.584.889-2.191.607-.622 1.33-.934 2.168-.934.853 0 1.583.312 2.19.934.622.607.933 1.338.933 2.191Zm-5.508 7.813 4.488-.174-.216 10.417a422.184 422.184 0 0 0-.13 6.75 226.554 226.554 0 0 0-.066 4.708h-4.445c.015-.78.029-1.635.044-2.56.028-.94.05-1.946.065-3.017.029-1.866.072-4.13.13-6.793l.13-9.331ZM188.819 23.203l4.532-1.063 6.7 8.225 6.571-8.355 4.098 1.605-7.915 10.113 8.349 10.243-3.99 1.628-6.983-8.485-6.527 8.398-4.575-1.237 8.305-10.59-8.565-10.482Z"}),f.jsxs("g",{clipPath:"url(#a)",fill:"currentColor",children:[f.jsx("path",{fill:"currentColor",d:"M0 4a4 4 0 0 1 4-4h51.953a4 4 0 0 1 4 4v52a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4Z"}),f.jsx("path",{fill:"var(--veltix-logo-icon-fill)",d:"M50.474 21.563c.225.153.396.327.523.54.136.228.19.496.19.761-.002.335-.073.642-.294.936-.206.241-.42.473-.64.702-.132.14-.26.284-.388.427-.33.368-.665.73-1 1.093l-.602.652-.512.554c-.195.21-.389.42-.58.633-.293.326-.359.798-.079 1.135l.162.195c.212.254.426.506.64.758.226.266.445.538.662.812.195.241.395.477.596.713.195.229.386.46.576.693.219.269.441.535.666.8.274.323.544.65.812.98.11.133.22.264.333.394 1.25 1.447 1.25 1.447 1.243 2.372-.025.234-.1.409-.213.57-.173.245-.42.434-.697.548-.264.109-.544.158-.845.102-.849-.264-1.346-1.074-1.866-1.745-.22-.282-.447-.558-.674-.834l-.12-.146-.233-.28c-.236-.286-.47-.574-.705-.861l-.139-.17a384.773 384.773 0 0 1-1.558-1.915l-.319-.393c-.432-.535-1.224-.623-1.708-.135a157.54 157.54 0 0 1-.412.414l-.444.446-1.104 1.11a1654.076 1654.076 0 0 1-1.37 1.376l-.27.27-.12.122c-.247.247-.503.48-.767.708-.14.122-.275.248-.411.375-1.127 1.011-2.378 1.876-3.835 2.325l-.217.068c-1.688.445-3.44.05-4.932-.786-.71-.416-1.321-.98-1.912-1.549l-.109-.105c-.43-.415-.835-.838-1.207-1.307-.137-.172-.278-.34-.421-.507-1.384-1.614-1.384-1.614-1.352-2.543.047-.38.206-.607.491-.858.318-.233.609-.309.946-.31.302-.002.608.068.852.246.474.345.827.928 1.159 1.376 1.08 1.454 2.458 3.06 4.304 3.475 1.57.167 2.82-.545 4.007-1.497.253-.21.495-.432.733-.658.14-.131.28-.256.424-.38.35-.305.677-.634 1.005-.963l.2-.2.418-.418a295.7 295.7 0 0 1 1.14-1.14c.335-.336.662-.674.97-1.034.115-.131.236-.252.363-.372l.133-.127c.09-.087.181-.173.273-.258l.13-.127.12-.112c.118-.142.035-.343-.073-.492-.056-.077-.118-.148-.184-.226l-.164-.196c-.083-.1-.083-.1-.169-.2l-.3-.367c-.05-.06-.1-.122-.15-.185l-.287-.35a315.881 315.881 0 0 0-1.573-1.913c-.92-1.106-.92-1.106-.91-1.913.042-.379.21-.609.49-.858.307-.24.576-.341.902-.36a1.44 1.44 0 0 1 .82.19c.319.19.572.46.804.769.284.368.574.73.87 1.087.286.345.567.692.842 1.046l.135.174a1.47 1.47 0 0 0 2.325.011c.226-.276.46-.544.695-.813.215-.248.43-.496.642-.747l.49-.571c.05-.056.05-.056.098-.113.728-.84 1.567-1.536 2.68-.924Z"}),f.jsx("path",{fill:"var(--veltix-logo-icon-fill)",d:"M31.908 22.467c.281.23.541.479.8.733l.115.112c.509.492.982.995 1.417 1.555l.222.28c1.562 1.967 1.562 1.967 1.529 2.716-.071.512-.3.796-.694 1.12a1.098 1.098 0 0 1-.597.17c-.306.01-.62-.05-.87-.227-.428-.304-.745-.811-1.04-1.216-1.336-1.85-1.59-2.12-2.927-3.032l-.149-.102a3.157 3.157 0 0 0-.86-.414 2.696 2.696 0 0 0-2.103.412 7.68 7.68 0 0 0-.438.36l-.154.129c-.336.29-.631.594-.912.937l-.084.102c-.758.92-1.447 1.89-2.118 2.876l-.387.567c-.513.75-1.022 1.5-1.53 2.254l-.374.556c-.357.53-.713 1.06-1.066 1.59-.577.868-1.16 1.728-1.835 2.522l-.129.167c-.493.595-1.146 1.033-1.92 1.13-.622.025-1.067-.11-1.524-.449a2.11 2.11 0 0 1-.407-.406c-.52-.67-.894-1.445-1.286-2.194a140.949 140.949 0 0 0-.477-.902l-.143-.27-.216-.407c-.314-.592-.63-1.183-.947-1.774-.334-.623-.664-1.248-.99-1.876-.22-.424-.445-.843-.675-1.261a84.96 84.96 0 0 1-1.182-2.245c-.134-.262-.27-.522-.412-.779-.222-.407-.402-.78-.39-1.22.005-.211.07-.418.183-.596.118-.185.268-.34.443-.476.17-.132.365-.235.577-.267.19-.03.39-.023.58.01.21.037.41.125.578.257.514.402.795 1.025 1.088 1.608l.229.447.115.223c.159.307.326.61.493.913.366.664.711 1.337 1.056 2.011a68.14 68.14 0 0 0 1 1.886c.305.555.595 1.12.885 1.683.261.506.53 1.006.81 1.5.085.15.16.289.222.443a.288.288 0 0 0 .147.16c.04.018.083.026.124.03.154.014.31-.05.43-.148.29-.234.508-.557.722-.857l.123-.17c.373-.517.735-1.043 1.092-1.571l.48-.704.127-.188c.439-.644.884-1.284 1.33-1.924l.37-.533c.69-.992 1.383-1.988 2.157-2.918l.169-.204c2.435-2.92 5.776-4.816 9.223-2.13Z"})]}),f.jsx("defs",{children:f.jsx("clipPath",{id:"a",children:f.jsx("path",{fill:"currentColor",d:"M0 0h59.953v60H0z"})})})]}),qO=({views:e=[],extraProps:t={},fallback:r=null})=>{if(!e.length)return r??null;const n=[...e].sort((o,i)=>(o.order??0)-(i.order??0));return f.jsx(f.Fragment,{children:n.map(o=>{const i=o.viewContainer;return f.jsxs(Ro,{children:[f.jsx(ko,{asChild:!0,children:f.jsx("span",{children:f.jsx(i,{...t})})}),f.jsx(Po,{children:o.title})]},o.id)})})},XO=()=>{const{json:e}=je(),t=()=>{if(!e)return;const r=JSON.stringify(e,null,2),n=new Blob([r],{type:"application/json"}),o=URL.createObjectURL(n),i=document.createElement("a");i.href=o,i.download=`${e.title||"project"}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)};return f.jsxs(Ro,{children:[f.jsx(ko,{asChild:!0,children:f.jsx(Oe,{variant:"outline",size:"sm",onClick:t,className:"h-8 px-3 shadow-none",children:f.jsx(Vh,{className:"h-4 w-4"})})}),f.jsx(Po,{children:f.jsx("p",{children:"Export Project"})})]})},KO=e=>{const[t,r]=X.useState(e.value),{markForSave:n}=Rc(),o="hover:border hover:border-gray-600 focus:border focus:border-gray-600";return f.jsxs("div",{className:"max-w-[240px] overflow-hidden relative min-w-[120px] text-sm",children:[f.jsx("input",{tabIndex:-1,className:Ni("appearance-none bg-transparent box-border font-[ligatures:none] border border-transparent rounded-md shadow-none  text-ellipsis outline-none absolute left-0 top-0 m-0 w-full h-9 p-2",o),maxLength:255,"aria-label":t,type:"text",autoComplete:"off",value:t,placeholder:"Untitled",onChange:i=>{r(i.target.value)},onBlur:()=>{e.onChange(t),n()},onKeyDown:i=>{const a=i.target;i.key==="Enter"&&(e.onChange(t),n(),a.blur())}}),f.jsx("div",{className:Ni("appearance-none bg-transparent box-border font-[ligatures:none] border border-transparent rounded-md shadow-none text-ellipsis outline-none absolute left-0 top-0 m-0 w-full h-9 p-2 opacity-0 pointer-events-none relative whitespace-pre",o),children:t})]})};var sc="Checkbox",[ZO,fF]=Ot(sc),[QO,xh]=ZO(sc);function JO(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:o,disabled:i,form:a,name:s,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:d}=e,[h,p]=fr({prop:r,defaultProp:o??!1,onChange:l,caller:sc}),[g,v]=C.useState(null),[m,x]=C.useState(null),y=C.useRef(!1),b=g?!!a||!!g.closest("form"):!0,w={checked:h,disabled:i,setChecked:p,control:g,setControl:v,name:s,form:a,value:u,hasConsumerStoppedPropagationRef:y,required:c,defaultChecked:Mn(o)?!1:o,isFormControl:b,bubbleInput:m,setBubbleInput:x};return f.jsx(QO,{scope:t,...w,children:e4(d)?d(w):n})}var sw="CheckboxTrigger",lw=C.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},o)=>{const{control:i,value:a,disabled:s,checked:l,required:c,setControl:u,setChecked:d,hasConsumerStoppedPropagationRef:h,isFormControl:p,bubbleInput:g}=xh(sw,e),v=Ee(o,u),m=C.useRef(l);return C.useEffect(()=>{const x=i?.form;if(x){const y=()=>d(m.current);return x.addEventListener("reset",y),()=>x.removeEventListener("reset",y)}},[i,d]),f.jsx(xe.button,{type:"button",role:"checkbox","aria-checked":Mn(l)?"mixed":l,"aria-required":c,"data-state":pw(l),"data-disabled":s?"":void 0,disabled:s,value:a,...n,ref:v,onKeyDown:de(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:de(r,x=>{d(y=>Mn(y)?!0:!y),g&&p&&(h.current=x.isPropagationStopped(),h.current||x.stopPropagation())})})});lw.displayName=sw;var cw=C.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:o,defaultChecked:i,required:a,disabled:s,value:l,onCheckedChange:c,form:u,...d}=e;return f.jsx(JO,{__scopeCheckbox:r,checked:o,defaultChecked:i,disabled:s,required:a,onCheckedChange:c,name:n,form:u,value:l,internal_do_not_use_render:({isFormControl:h})=>f.jsxs(f.Fragment,{children:[f.jsx(lw,{...d,ref:t,__scopeCheckbox:r}),h&&f.jsx(hw,{__scopeCheckbox:r})]})})});cw.displayName=sc;var uw="CheckboxIndicator",dw=C.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...o}=e,i=xh(uw,r);return f.jsx(St,{present:n||Mn(i.checked)||i.checked===!0,children:f.jsx(xe.span,{"data-state":pw(i.checked),"data-disabled":i.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});dw.displayName=uw;var fw="CheckboxBubbleInput",hw=C.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:o,checked:i,defaultChecked:a,required:s,disabled:l,name:c,value:u,form:d,bubbleInput:h,setBubbleInput:p}=xh(fw,e),g=Ee(r,p),v=As(i),m=Ts(n);C.useEffect(()=>{const y=h;if(!y)return;const b=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(b,"checked").set,T=!o.current;if(v!==i&&_){const j=new Event("click",{bubbles:T});y.indeterminate=Mn(i),_.call(y,Mn(i)?!1:i),y.dispatchEvent(j)}},[h,v,i,o]);const x=C.useRef(Mn(i)?!1:i);return f.jsx(xe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??x.current,required:s,disabled:l,name:c,value:u,form:d,...t,tabIndex:-1,ref:g,style:{...t.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});hw.displayName=fw;function e4(e){return typeof e=="function"}function Mn(e){return e==="indeterminate"}function pw(e){return Mn(e)?"indeterminate":e?"checked":"unchecked"}function vw({className:e,...t}){return f.jsx(cw,{"data-slot":"checkbox",className:_e("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:f.jsx(dw,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:f.jsx(ts,{className:"size-3.5"})})})}const t4=({projectId:e,onGenerateSuccess:t})=>{const[r,n]=X.useState(!1),[o,i]=X.useState(!0),[a,s]=X.useState(!1),[l,c]=X.useState(""),[u,d]=X.useState("7d"),h=async()=>{if(!e){console.error("Project ID is required to generate share link");return}n(!0);try{const p=await fetch("/api/share_links",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({readonly:o,editable:a,password:l,expiresIn:u,projectId:e})}),{url:g}=await p.json();t(g)}catch(p){console.error("Failed to generate share link:",p)}finally{n(!1)}};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Access Permissions"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(vw,{id:"readonly",checked:o,onCheckedChange:p=>i(p)}),f.jsxs(Te,{htmlFor:"readonly",className:"flex items-center gap-2 cursor-pointer",children:[f.jsx(Dc,{className:"h-4 w-4"}),"Read-only Access"]})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(vw,{id:"editable",checked:a,onCheckedChange:p=>s(p)}),f.jsxs(Te,{htmlFor:"editable",className:"flex items-center gap-2 cursor-pointer",children:[f.jsx(VS,{className:"h-4 w-4"}),"Allow Collaborative Editing"]})]})]})]}),f.jsx($n,{}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Security Settings"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsxs(Te,{htmlFor:"password",className:"flex items-center gap-2",children:[f.jsx(Tc,{className:"h-4 w-4"}),"Access Password"]}),f.jsx(Ue,{id:"password",placeholder:"Set access password (optional)",value:l,onChange:p=>c(p.target.value),className:"h-9"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs(Te,{htmlFor:"expiresIn",className:"flex items-center gap-2",children:[f.jsx(wS,{className:"h-4 w-4"}),"Expiration Time"]}),f.jsx(Ue,{id:"expiresIn",placeholder:"e.g., 7d, 30d, 1y",value:u,onChange:p=>d(p.target.value),className:"h-9"})]})]})]}),f.jsx($n,{}),f.jsx(Oe,{onClick:h,disabled:r||!e,className:"w-full h-10",children:r?"Generating...":"Generate Share Link"}),!e&&f.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Please save your project first to generate a share link"})]})},r4=({url:e})=>{const t=`<iframe src="${e}" width="100%" height="600" frameborder="0"></iframe>`;return f.jsxs("div",{className:"h-full w-full",children:[f.jsx("p",{className:"text-sm mb-2",children:"Embed code:"}),f.jsx(Io,{className:"bg-gray-100 p-2 rounded text-xs h-[180px] outline-none resize-none",value:t,readOnly:!0})]})};var n4=Object.defineProperty,lc=Object.getOwnPropertySymbols,gw=Object.prototype.hasOwnProperty,mw=Object.prototype.propertyIsEnumerable,xw=(e,t,r)=>t in e?n4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,yh=(e,t)=>{for(var r in t||(t={}))gw.call(t,r)&&xw(e,r,t[r]);if(lc)for(var r of lc(t))mw.call(t,r)&&xw(e,r,t[r]);return e},bh=(e,t)=>{var r={};for(var n in e)gw.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&lc)for(var n of lc(e))t.indexOf(n)<0&&mw.call(e,n)&&(r[n]=e[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ao;(e=>{const t=class Ie{constructor(l,c,u,d){if(this.version=l,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],l<Ie.MIN_VERSION||l>Ie.MAX_VERSION)throw new RangeError("Version value out of range");if(d<-1||d>7)throw new RangeError("Mask value out of range");this.size=l*4+17;let h=[];for(let g=0;g<this.size;g++)h.push(!1);for(let g=0;g<this.size;g++)this.modules.push(h.slice()),this.isFunction.push(h.slice());this.drawFunctionPatterns();const p=this.addEccAndInterleave(u);if(this.drawCodewords(p),d==-1){let g=1e9;for(let v=0;v<8;v++){this.applyMask(v),this.drawFormatBits(v);const m=this.getPenaltyScore();m<g&&(d=v,g=m),this.applyMask(v)}}o(0<=d&&d<=7),this.mask=d,this.applyMask(d),this.drawFormatBits(d),this.isFunction=[]}static encodeText(l,c){const u=e.QrSegment.makeSegments(l);return Ie.encodeSegments(u,c)}static encodeBinary(l,c){const u=e.QrSegment.makeBytes(l);return Ie.encodeSegments([u],c)}static encodeSegments(l,c,u=1,d=40,h=-1,p=!0){if(!(Ie.MIN_VERSION<=u&&u<=d&&d<=Ie.MAX_VERSION)||h<-1||h>7)throw new RangeError("Invalid value");let g,v;for(g=u;;g++){const b=Ie.getNumDataCodewords(g,c)*8,w=a.getTotalBits(l,g);if(w<=b){v=w;break}if(g>=d)throw new RangeError("Data too long")}for(const b of[Ie.Ecc.MEDIUM,Ie.Ecc.QUARTILE,Ie.Ecc.HIGH])p&&v<=Ie.getNumDataCodewords(g,b)*8&&(c=b);let m=[];for(const b of l){r(b.mode.modeBits,4,m),r(b.numChars,b.mode.numCharCountBits(g),m);for(const w of b.getData())m.push(w)}o(m.length==v);const x=Ie.getNumDataCodewords(g,c)*8;o(m.length<=x),r(0,Math.min(4,x-m.length),m),r(0,(8-m.length%8)%8,m),o(m.length%8==0);for(let b=236;m.length<x;b^=253)r(b,8,m);let y=[];for(;y.length*8<m.length;)y.push(0);return m.forEach((b,w)=>y[w>>>3]|=b<<7-(w&7)),new Ie(g,c,y,h)}getModule(l,c){return 0<=l&&l<this.size&&0<=c&&c<this.size&&this.modules[c][l]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const l=this.getAlignmentPatternPositions(),c=l.length;for(let u=0;u<c;u++)for(let d=0;d<c;d++)u==0&&d==0||u==0&&d==c-1||u==c-1&&d==0||this.drawAlignmentPattern(l[u],l[d]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(l){const c=this.errorCorrectionLevel.formatBits<<3|l;let u=c;for(let h=0;h<10;h++)u=u<<1^(u>>>9)*1335;const d=(c<<10|u)^21522;o(d>>>15==0);for(let h=0;h<=5;h++)this.setFunctionModule(8,h,n(d,h));this.setFunctionModule(8,7,n(d,6)),this.setFunctionModule(8,8,n(d,7)),this.setFunctionModule(7,8,n(d,8));for(let h=9;h<15;h++)this.setFunctionModule(14-h,8,n(d,h));for(let h=0;h<8;h++)this.setFunctionModule(this.size-1-h,8,n(d,h));for(let h=8;h<15;h++)this.setFunctionModule(8,this.size-15+h,n(d,h));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let l=this.version;for(let u=0;u<12;u++)l=l<<1^(l>>>11)*7973;const c=this.version<<12|l;o(c>>>18==0);for(let u=0;u<18;u++){const d=n(c,u),h=this.size-11+u%3,p=Math.floor(u/3);this.setFunctionModule(h,p,d),this.setFunctionModule(p,h,d)}}drawFinderPattern(l,c){for(let u=-4;u<=4;u++)for(let d=-4;d<=4;d++){const h=Math.max(Math.abs(d),Math.abs(u)),p=l+d,g=c+u;0<=p&&p<this.size&&0<=g&&g<this.size&&this.setFunctionModule(p,g,h!=2&&h!=4)}}drawAlignmentPattern(l,c){for(let u=-2;u<=2;u++)for(let d=-2;d<=2;d++)this.setFunctionModule(l+d,c+u,Math.max(Math.abs(d),Math.abs(u))!=1)}setFunctionModule(l,c,u){this.modules[c][l]=u,this.isFunction[c][l]=!0}addEccAndInterleave(l){const c=this.version,u=this.errorCorrectionLevel;if(l.length!=Ie.getNumDataCodewords(c,u))throw new RangeError("Invalid argument");const d=Ie.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c],h=Ie.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c],p=Math.floor(Ie.getNumRawDataModules(c)/8),g=d-p%d,v=Math.floor(p/d);let m=[];const x=Ie.reedSolomonComputeDivisor(h);for(let b=0,w=0;b<d;b++){let _=l.slice(w,w+v-h+(b<g?0:1));w+=_.length;const T=Ie.reedSolomonComputeRemainder(_,x);b<g&&_.push(0),m.push(_.concat(T))}let y=[];for(let b=0;b<m[0].length;b++)m.forEach((w,_)=>{(b!=v-h||_>=g)&&y.push(w[b])});return o(y.length==p),y}drawCodewords(l){if(l.length!=Math.floor(Ie.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let d=0;d<this.size;d++)for(let h=0;h<2;h++){const p=u-h,v=(u+1&2)==0?this.size-1-d:d;!this.isFunction[v][p]&&c<l.length*8&&(this.modules[v][p]=n(l[c>>>3],7-(c&7)),c++)}}o(c==l.length*8)}applyMask(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let u=0;u<this.size;u++){let d;switch(l){case 0:d=(u+c)%2==0;break;case 1:d=c%2==0;break;case 2:d=u%3==0;break;case 3:d=(u+c)%3==0;break;case 4:d=(Math.floor(u/3)+Math.floor(c/2))%2==0;break;case 5:d=u*c%2+u*c%3==0;break;case 6:d=(u*c%2+u*c%3)%2==0;break;case 7:d=((u+c)%2+u*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][u]&&d&&(this.modules[c][u]=!this.modules[c][u])}}getPenaltyScore(){let l=0;for(let h=0;h<this.size;h++){let p=!1,g=0,v=[0,0,0,0,0,0,0];for(let m=0;m<this.size;m++)this.modules[h][m]==p?(g++,g==5?l+=Ie.PENALTY_N1:g>5&&l++):(this.finderPenaltyAddHistory(g,v),p||(l+=this.finderPenaltyCountPatterns(v)*Ie.PENALTY_N3),p=this.modules[h][m],g=1);l+=this.finderPenaltyTerminateAndCount(p,g,v)*Ie.PENALTY_N3}for(let h=0;h<this.size;h++){let p=!1,g=0,v=[0,0,0,0,0,0,0];for(let m=0;m<this.size;m++)this.modules[m][h]==p?(g++,g==5?l+=Ie.PENALTY_N1:g>5&&l++):(this.finderPenaltyAddHistory(g,v),p||(l+=this.finderPenaltyCountPatterns(v)*Ie.PENALTY_N3),p=this.modules[m][h],g=1);l+=this.finderPenaltyTerminateAndCount(p,g,v)*Ie.PENALTY_N3}for(let h=0;h<this.size-1;h++)for(let p=0;p<this.size-1;p++){const g=this.modules[h][p];g==this.modules[h][p+1]&&g==this.modules[h+1][p]&&g==this.modules[h+1][p+1]&&(l+=Ie.PENALTY_N2)}let c=0;for(const h of this.modules)c=h.reduce((p,g)=>p+(g?1:0),c);const u=this.size*this.size,d=Math.ceil(Math.abs(c*20-u*10)/u)-1;return o(0<=d&&d<=9),l+=d*Ie.PENALTY_N4,o(0<=l&&l<=2568888),l}getAlignmentPatternPositions(){if(this.version==1)return[];{const l=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(l*2-2))*2;let u=[6];for(let d=this.size-7;u.length<l;d-=c)u.splice(1,0,d);return u}}static getNumRawDataModules(l){if(l<Ie.MIN_VERSION||l>Ie.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*l+128)*l+64;if(l>=2){const u=Math.floor(l/7)+2;c-=(25*u-10)*u-55,l>=7&&(c-=36)}return o(208<=c&&c<=29648),c}static getNumDataCodewords(l,c){return Math.floor(Ie.getNumRawDataModules(l)/8)-Ie.ECC_CODEWORDS_PER_BLOCK[c.ordinal][l]*Ie.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][l]}static reedSolomonComputeDivisor(l){if(l<1||l>255)throw new RangeError("Degree out of range");let c=[];for(let d=0;d<l-1;d++)c.push(0);c.push(1);let u=1;for(let d=0;d<l;d++){for(let h=0;h<c.length;h++)c[h]=Ie.reedSolomonMultiply(c[h],u),h+1<c.length&&(c[h]^=c[h+1]);u=Ie.reedSolomonMultiply(u,2)}return c}static reedSolomonComputeRemainder(l,c){let u=c.map(d=>0);for(const d of l){const h=d^u.shift();u.push(0),c.forEach((p,g)=>u[g]^=Ie.reedSolomonMultiply(p,h))}return u}static reedSolomonMultiply(l,c){if(l>>>8||c>>>8)throw new RangeError("Byte out of range");let u=0;for(let d=7;d>=0;d--)u=u<<1^(u>>>7)*285,u^=(c>>>d&1)*l;return o(u>>>8==0),u}finderPenaltyCountPatterns(l){const c=l[1];o(c<=this.size*3);const u=c>0&&l[2]==c&&l[3]==c*3&&l[4]==c&&l[5]==c;return(u&&l[0]>=c*4&&l[6]>=c?1:0)+(u&&l[6]>=c*4&&l[0]>=c?1:0)}finderPenaltyTerminateAndCount(l,c,u){return l&&(this.finderPenaltyAddHistory(c,u),c=0),c+=this.size,this.finderPenaltyAddHistory(c,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(l,c){c[0]==0&&(l+=this.size),c.pop(),c.unshift(l)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function r(s,l,c){if(l<0||l>31||s>>>l)throw new RangeError("Value out of range");for(let u=l-1;u>=0;u--)c.push(s>>>u&1)}function n(s,l){return(s>>>l&1)!=0}function o(s){if(!s)throw new Error("Assertion error")}const i=class lt{constructor(l,c,u){if(this.mode=l,this.numChars=c,this.bitData=u,c<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(l){let c=[];for(const u of l)r(u,8,c);return new lt(lt.Mode.BYTE,l.length,c)}static makeNumeric(l){if(!lt.isNumeric(l))throw new RangeError("String contains non-numeric characters");let c=[];for(let u=0;u<l.length;){const d=Math.min(l.length-u,3);r(parseInt(l.substring(u,u+d),10),d*3+1,c),u+=d}return new lt(lt.Mode.NUMERIC,l.length,c)}static makeAlphanumeric(l){if(!lt.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],u;for(u=0;u+2<=l.length;u+=2){let d=lt.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u))*45;d+=lt.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u+1)),r(d,11,c)}return u<l.length&&r(lt.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u)),6,c),new lt(lt.Mode.ALPHANUMERIC,l.length,c)}static makeSegments(l){return l==""?[]:lt.isNumeric(l)?[lt.makeNumeric(l)]:lt.isAlphanumeric(l)?[lt.makeAlphanumeric(l)]:[lt.makeBytes(lt.toUtf8ByteArray(l))]}static makeEci(l){let c=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)r(l,8,c);else if(l<16384)r(2,2,c),r(l,14,c);else if(l<1e6)r(6,3,c),r(l,21,c);else throw new RangeError("ECI assignment value out of range");return new lt(lt.Mode.ECI,0,c)}static isNumeric(l){return lt.NUMERIC_REGEX.test(l)}static isAlphanumeric(l){return lt.ALPHANUMERIC_REGEX.test(l)}getData(){return this.bitData.slice()}static getTotalBits(l,c){let u=0;for(const d of l){const h=d.mode.numCharCountBits(c);if(d.numChars>=1<<h)return 1/0;u+=4+h+d.bitData.length}return u}static toUtf8ByteArray(l){l=encodeURI(l);let c=[];for(let u=0;u<l.length;u++)l.charAt(u)!="%"?c.push(l.charCodeAt(u)):(c.push(parseInt(l.substring(u+1,u+3),16)),u+=2);return c}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=i;e.QrSegment=i})(ao||(ao={})),(e=>{(t=>{const r=class{constructor(o,i){this.ordinal=o,this.formatBits=i}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),t.Ecc=r})(e.QrCode||(e.QrCode={}))})(ao||(ao={})),(e=>{(t=>{const r=class{constructor(o,i){this.modeBits=o,this.numBitsCharCount=i}numCharCountBits(o){return this.numBitsCharCount[Math.floor((o+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),t.Mode=r})(e.QrSegment||(e.QrSegment={}))})(ao||(ao={}));var mi=ao;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var o4={L:mi.QrCode.Ecc.LOW,M:mi.QrCode.Ecc.MEDIUM,Q:mi.QrCode.Ecc.QUARTILE,H:mi.QrCode.Ecc.HIGH},yw=128,bw="L",ww="#FFFFFF",Sw="#000000",Cw=!1,Ew=1,i4=4,a4=0,s4=.1;function _w(e,t=0){const r=[];return e.forEach(function(n,o){let i=null;n.forEach(function(a,s){if(!a&&i!==null){r.push(`M${i+t} ${o+t}h${s-i}v1H${i+t}z`),i=null;return}if(s===n.length-1){if(!a)return;i===null?r.push(`M${s+t},${o+t} h1v1H${s+t}z`):r.push(`M${i+t},${o+t} h${s+1-i}v1H${i+t}z`);return}a&&i===null&&(i=s)})}),r.join("")}function Nw(e,t){return e.slice().map((r,n)=>n<t.y||n>=t.y+t.h?r:r.map((o,i)=>i<t.x||i>=t.x+t.w?o:!1))}function l4(e,t,r,n){if(n==null)return null;const o=e.length+r*2,i=Math.floor(t*s4),a=o/t,s=(n.width||i)*a,l=(n.height||i)*a,c=n.x==null?e.length/2-s/2:n.x*a,u=n.y==null?e.length/2-l/2:n.y*a,d=n.opacity==null?1:n.opacity;let h=null;if(n.excavate){let g=Math.floor(c),v=Math.floor(u),m=Math.ceil(s+c-g),x=Math.ceil(l+u-v);h={x:g,y:v,w:m,h:x}}const p=n.crossOrigin;return{x:c,y:u,h:l,w:s,excavation:h,opacity:d,crossOrigin:p}}function c4(e,t){return t!=null?Math.max(Math.floor(t),0):e?i4:a4}function Dw({value:e,level:t,minVersion:r,includeMargin:n,marginSize:o,imageSettings:i,size:a,boostLevel:s}){let l=X.useMemo(()=>{const g=(Array.isArray(e)?e:[e]).reduce((v,m)=>(v.push(...mi.QrSegment.makeSegments(m)),v),[]);return mi.QrCode.encodeSegments(g,o4[t],r,void 0,void 0,s)},[e,t,r,s]);const{cells:c,margin:u,numCells:d,calculatedImageSettings:h}=X.useMemo(()=>{let p=l.getModules();const g=c4(n,o),v=p.length+g*2,m=l4(p,a,g,i);return{cells:p,margin:g,numCells:v,calculatedImageSettings:m}},[l,a,i,n,o]);return{qrcode:l,margin:u,cells:c,numCells:d,calculatedImageSettings:h}}var u4=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),Tw=X.forwardRef(function(t,r){const n=t,{value:o,size:i=yw,level:a=bw,bgColor:s=ww,fgColor:l=Sw,includeMargin:c=Cw,minVersion:u=Ew,boostLevel:d,marginSize:h,imageSettings:p}=n,v=bh(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:m}=v,x=bh(v,["style"]),y=p?.src,b=X.useRef(null),w=X.useRef(null),_=X.useCallback(P=>{b.current=P,typeof r=="function"?r(P):r&&(r.current=P)},[r]),[T,j]=X.useState(!1),{margin:k,cells:R,numCells:A,calculatedImageSettings:$}=Dw({value:o,level:a,minVersion:u,boostLevel:d,includeMargin:c,marginSize:h,imageSettings:p,size:i});X.useEffect(()=>{if(b.current!=null){const P=b.current,O=P.getContext("2d");if(!O)return;let I=R;const E=w.current,S=$!=null&&E!==null&&E.complete&&E.naturalHeight!==0&&E.naturalWidth!==0;S&&$.excavation!=null&&(I=Nw(R,$.excavation));const M=window.devicePixelRatio||1;P.height=P.width=i*M;const D=i/A*M;O.scale(D,D),O.fillStyle=s,O.fillRect(0,0,A,A),O.fillStyle=l,u4?O.fill(new Path2D(_w(I,k))):R.forEach(function(N,z){N.forEach(function(Y,H){Y&&O.fillRect(H+k,z+k,1,1)})}),$&&(O.globalAlpha=$.opacity),S&&O.drawImage(E,$.x+k,$.y+k,$.w,$.h)}}),X.useEffect(()=>{j(!1)},[y]);const F=yh({height:i,width:i},m);let L=null;return y!=null&&(L=X.createElement("img",{src:y,key:y,style:{display:"none"},onLoad:()=>{j(!0)},ref:w,crossOrigin:$?.crossOrigin})),X.createElement(X.Fragment,null,X.createElement("canvas",yh({style:F,height:i,width:i,ref:_,role:"img"},x)),L)});Tw.displayName="QRCodeCanvas";var d4=X.forwardRef(function(t,r){const n=t,{value:o,size:i=yw,level:a=bw,bgColor:s=ww,fgColor:l=Sw,includeMargin:c=Cw,minVersion:u=Ew,boostLevel:d,title:h,marginSize:p,imageSettings:g}=n,v=bh(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:m,cells:x,numCells:y,calculatedImageSettings:b}=Dw({value:o,level:a,minVersion:u,boostLevel:d,includeMargin:c,marginSize:p,imageSettings:g,size:i});let w=x,_=null;g!=null&&b!=null&&(b.excavation!=null&&(w=Nw(x,b.excavation)),_=X.createElement("image",{href:g.src,height:b.h,width:b.w,x:b.x+m,y:b.y+m,preserveAspectRatio:"none",opacity:b.opacity,crossOrigin:b.crossOrigin}));const T=_w(w,m);return X.createElement("svg",yh({height:i,width:i,viewBox:`0 0 ${y} ${y}`,ref:r,role:"img"},v),!!h&&X.createElement("title",null,h),X.createElement("path",{fill:s,d:`M0,0 h${y}v${y}H0z`,shapeRendering:"crispEdges"}),X.createElement("path",{fill:l,d:T,shapeRendering:"crispEdges"}),_)});d4.displayName="QRCodeSVG";const f4=({url:e})=>f.jsxs("div",{className:"h-full w-full",children:[f.jsx("p",{className:"text-sm mb-2",children:"Scan to preview:"}),f.jsx(Tw,{value:e,size:180,className:"border"})]}),h4=({shareUrl:e,onBack:t,onCopy:r})=>f.jsx(f.Fragment,{children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Share Link Generated"}),f.jsxs(Oe,{variant:"ghost",size:"sm",onClick:t,className:"h-8 px-2",children:[f.jsx(xS,{className:"h-4 w-4 mr-1"}),"Back"]})]}),f.jsx("div",{className:"space-y-3",children:f.jsx("div",{className:"relative",children:f.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg border",children:[f.jsx(Zh,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),f.jsx("span",{className:"text-sm break-all flex-1",children:e}),f.jsx(Oe,{variant:"ghost",size:"sm",onClick:r,className:"h-8 w-8 p-0 flex-shrink-0",children:f.jsx(_S,{className:"h-4 w-4"})})]})})}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsx("div",{className:"h-full",children:f.jsx(f4,{url:e})}),f.jsx("div",{className:"h-full",children:f.jsx(r4,{url:e.replace("/view/","/embed/")})})]})]})}),p4=({trigger:e,projectId:t})=>{const[r,n]=X.useState(!1),[o,i]=X.useState(""),[a,s]=X.useState(!1),l=async()=>{try{await navigator.clipboard.writeText(o)}catch(h){console.error("Failed to copy to clipboard:",h)}},c=()=>{s(!1),i("")},u=h=>{i(h),s(!0)},d=f.jsx(Oe,{variant:"outline",size:"sm",className:"h-8 px-3 shadow-none",children:f.jsx(op,{className:"h-4 w-4"})});return f.jsxs(fv,{open:r,onOpenChange:n,children:[f.jsxs(Ro,{children:[f.jsx(ko,{asChild:!0,children:f.jsx(hv,{asChild:!0,children:e||d})}),f.jsx(Po,{children:"Share Project"})]}),f.jsxs(pv,{children:[f.jsxs(vv,{className:"flex items-center gap-2 text-xl",children:[f.jsx(op,{className:"h-5 w-5"}),"Share Settings"]}),f.jsx("div",{className:"overflow-y-auto",children:f.jsx(In,{className:"border-0 shadow-lg",children:f.jsx(bo,{className:"space-y-6 p-0",children:a?f.jsx(h4,{shareUrl:o,onBack:c,onCopy:l}):f.jsx(t4,{projectId:t,onGenerateSuccess:u})})})})]})]})},v4=()=>{const t=je().json?.id;return f.jsx(p4,{projectId:t})},g4=()=>{const{json:e,update:t}=je(),r=Gt().getViewsByLocation(_t.TitleBar);return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("a",{href:"/projects",title:"Veltix, Making Data Visualization Lightning Fast",className:"inline-block w-28 group relative",children:[f.jsx(YO,{}),f.jsx("span",{className:"absolute top-0 left-0 w-8 h-8 bg-gray-300 opacity-0 group-hover:opacity-100 transition-opacity inline-flex items-center justify-center rounded-xs",children:f.jsx(Bh,{})})]}),f.jsx(WO,{})]}),f.jsx("div",{className:"flex-1"}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(KO,{value:e?.title||"Untitled",onChange:n=>{t({title:n})}}),f.jsx(XO,{}),f.jsx(v4,{}),f.jsx(qO,{views:r})]})]})},Mw=X.memo(()=>{const{layout:e}=At();return f.jsxs("div",{className:"veltix-workbench",children:[f.jsx("header",{className:"flex h-14 items-center justify-between px-4 w-full z-10 bg-gradient-to-r from-blue-500/20 via-purple-500/20 to-pink-500/20",children:f.jsx(g4,{})}),f.jsxs("div",{className:"flex h-[calc(100vh-48px)]",children:[f.jsx("div",{className:"w-16 relative h-full flex flex-col items-center py-4 after:absolute after:top-0 after:right-0 after:w-[1px] after:h-full after:bg-accent after:content-['']",children:f.jsx(tN,{})}),f.jsx("div",{className:jr("w-80 overflow-y-auto h-full p-2",e.sidebar.visible?"block":"hidden"),children:f.jsx(HO,{})}),f.jsx(UO,{}),f.jsx("div",{className:"w-[320px] relative after:absolute after:top-0 after:left-0 after:w-[1px] after:h-full after:bg-accent after:content-['']",children:f.jsx(A0,{})})]})]})});Mw.displayName="Veltix.Layout";const Wa=({children:e,className:t=""})=>f.jsx("span",{className:`animate-pulse bg-gray-200 h-full w-full rounded ${t}`,children:e?f.jsx("span",{className:"opacity-0",children:e}):f.jsx("span",{className:"opacity-0",children:""})});function m4({src:e,alt:t,className:r,...n}){const[o,i]=X.useState(!0);return f.jsxs("div",{className:"relative w-full h-full overflow-hidden bg-muted",children:[o&&f.jsx("div",{className:"absolute inset-0",children:f.jsx(Wa,{className:"w-full h-full"})}),f.jsx("img",{src:e,alt:t,className:_e(r,"transition-all duration-300",o?"opacity-0":"opacity-100"),onLoad:()=>i(!1),...n})]})}const x4=async(e,t=12)=>{await new Promise(n=>setTimeout(n,1e3));const r=e*t+1;return Array.from({length:t},(n,o)=>({id:r+o,title:` ${r+o}`,image:"/placeholder.svg?height=200&width=300",description:` ${r+o} `}))};function y4({data:e=[],fetchMore:t,itemsPerPage:r=12}){const[n,o]=X.useState([]),[i,a]=X.useState(!1),[s,l]=X.useState(!0),[c,u]=X.useState(0),d=X.useRef(null),h=X.useRef([]),p=X.useRef(!1),g=X.useRef(!0),v=X.useRef(0);X.useEffect(()=>{h.current=n,p.current=i,g.current=s,v.current=c},[n,i,s,c]);const m=X.useCallback(async()=>{if(!(p.current||!g.current)){a(!0);try{if(e.length>0&&!t)if(h.current.length>=e.length)l(!1);else{const x=v.current*r,y=Math.min(x+r,e.length),b=e.slice(x,y);o(w=>[...w,...b]),u(w=>w+1),y>=e.length&&l(!1)}else{const y=await(t||x4)(v.current,r);y.length===0?l(!1):(o(b=>[...b,...y]),u(b=>b+1))}}catch(x){console.error(":",x)}finally{a(!1)}}},[e,t,r]);return X.useEffect(()=>{o([]),u(0),l(!0),a(!1),m()},[e,t,r]),X.useEffect(()=>{const x=new IntersectionObserver(y=>{y[0].isIntersecting&&g.current&&!p.current&&m()},{threshold:.1});return d.current&&x.observe(d.current),()=>x.disconnect()},[]),f.jsxs("div",{className:"",children:[f.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[n.map((x,y)=>f.jsxs(In,{className:"overflow-hidden hover:shadow transition-shadow duration-300 rounded shadow-none",children:[f.jsx("div",{className:"aspect-video relative overflow-hidden",children:f.jsx(m4,{src:x.imageUrl||x.image||"/placeholder.svg",alt:x.alt||x.title,className:"w-full h-full object-cover hover:scale-110 transition-all duration-300"})}),f.jsxs(bo,{className:"p-2",children:[f.jsx("h3",{className:"font-semibold text-sm line-clamp-2",children:x.title}),x.description&&f.jsx("p",{className:"text-muted-foreground text-xs mt-2 line-clamp-3",children:x.description})]})]},y)),i&&Array.from({length:8}).map((x,y)=>f.jsxs(In,{className:"overflow-hidden",children:[f.jsx(Wa,{className:"aspect-video w-full"}),f.jsxs(bo,{className:"p-4",children:[f.jsx(Wa,{className:"h-6 w-3/4 mb-2"}),f.jsx(Wa,{className:"h-4 w-full mb-1"}),f.jsx(Wa,{className:"h-4 w-2/3"})]})]},`skeleton-${y}`))]}),f.jsxs("div",{ref:d,className:"h-10 flex items-center justify-center mt-8",children:[i&&f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}),f.jsx("span",{className:"text-muted-foreground",children:"..."})]}),!s&&n.length>0&&f.jsx("p",{className:"text-muted-foreground"})]}),n.length===0&&!i&&f.jsx("div",{className:"text-center py-12",children:f.jsx("p",{className:"text-muted-foreground text-lg",children:""})})]})}const b4=X.memo(({context:e})=>{console.log(e);const t=[{id:"example1",title:"Design example 1",imageUrl:"https://placehold.co/320x170/E9ECEF/495057?text=Design%20example%201",alt:"Design example 1"},{id:"example2",title:"Design example 2",imageUrl:"https://placehold.co/320x170/E9ECEF/495057?text=Design%20example%202",alt:"Design example 2"}];return f.jsxs("div",{children:[f.jsx("header",{className:"sticky top-0 bg-background z-10",children:f.jsx("h2",{className:"text-xl font-bold mb-4",children:"Design"})}),f.jsx("div",{children:f.jsx(y4,{data:t})})]})});dr({id:"design",title:"Design",icon:tp,viewContainer:b4,order:0},_t.Sidebar),dr({id:"ai",title:"AI",icon:_i,hidden:!0,viewContainer:()=>f.jsx("div",{children:f.jsxs("div",{className:"flex items-center",children:[f.jsx(_i,{})," AI"]})})},_t.Sidebar);const w4=[{value:"to right",label:"Left to Right"},{value:"to left",label:"Right to Left"},{value:"to bottom",label:"Top to Bottom"},{value:"to top",label:"Bottom to Top"},{value:"to bottom right",label:"Top Left to Bottom Right"},{value:"to bottom left",label:"Top Right to Bottom Left"},{value:"to top right",label:"Bottom Left to Top Right"},{value:"to top left",label:"Bottom Right to Top Left"}],jw=["linear-gradient(to right, #1a2b3c, #0f172a)","linear-gradient(to right, #111827, #1f2937)","linear-gradient(to right, #0f172a, #312e81)","linear-gradient(to right, #0c0a09, #1c1917)","linear-gradient(to right, #134e5e, #71b280)","linear-gradient(to right, #000428, #004e92)","linear-gradient(to bottom, #0f2027, #203a43)","linear-gradient(to bottom right, #16222a, #3a6073)","radial-gradient(circle, #16222a 0%, #3a6073 100%)","radial-gradient(circle, #0f2027 0%, #203a43 100%)","radial-gradient(circle, #000428 0%, #004e92 100%)","radial-gradient(circle, #134e5e 0%, #71b280 100%)"],S4=["#0F172A","#1E293B","#111827","#1F2937","#0C0A09","#0E7490","#0284C7","#1D4ED8","#4338CA","#7E22CE","#0F766E","#0369A1"],C4=()=>{const e=je(),[t,r]=X.useState("solid"),[n,o]=X.useState("#FFFFFF"),[i,a]=X.useState(["#ff9a9e","#fad0c4"]),[s,l]=X.useState("to right"),[c,u]=X.useState([0,100]);X.useEffect(()=>{if(e.json?.theme){const v=e.json.theme.backgroundColor||"#FFFFFF";if(v.includes("gradient")){if(v.includes("linear-gradient")){r("linear-gradient");const m=v.match(/linear-gradient\(([^,]+),/);m&&m[1]&&l(m[1].trim());const x=v.match(/#[a-fA-F0-9]{3,6}/g);x&&x.length>=2&&a([x[0],x[1]]);const y=v.match(/(\d+)%/g);y&&y.length>=2&&u([parseInt(y[0],10),parseInt(y[1],10)])}else if(v.includes("radial-gradient")){r("radial-gradient");const m=v.match(/#[a-fA-F0-9]{3,6}/g);m&&m.length>=2&&a([m[0],m[1]]);const x=v.match(/(\d+)%/g);x&&x.length>=2&&u([parseInt(x[0],10),parseInt(x[1],10)])}}else r("solid"),o(v)}},[e.json?.theme]);const d=()=>t==="solid"?n:t==="linear-gradient"?`linear-gradient(${s}, ${i[0]} ${c[0]}%, ${i[1]} ${c[1]}%)`:t==="radial-gradient"?`radial-gradient(circle, ${i[0]} ${c[0]}%, ${i[1]} ${c[1]}%)`:n,h=()=>{if(e.json){const v=d();e.update({theme:{...e.json.theme,backgroundColor:v}})}},p=v=>{r("solid"),o(v),e.json&&e.update({theme:{...e.json.theme,backgroundColor:v}})},g=v=>{if(v.includes("linear-gradient")?r("linear-gradient"):v.includes("radial-gradient")&&r("radial-gradient"),v.includes("linear-gradient")){const x=v.match(/linear-gradient\(([^,]+),/);x&&x[1]&&l(x[1].trim())}const m=v.match(/#[a-fA-F0-9]{3,6}/g);m&&m.length>=2&&a([m[0],m[1]]),e.json&&e.update({theme:{...e.json.theme,backgroundColor:v}})};return f.jsxs("div",{className:"space-y-6",children:[f.jsx("h2",{className:"text-xl font-bold",children:"Background"}),f.jsxs(wg,{defaultValue:t,onValueChange:v=>r(v),children:[f.jsxs(wu,{className:"grid w-full grid-cols-3",children:[f.jsx(Fi,{value:"solid",children:"Solid "}),f.jsx(Fi,{value:"linear-gradient",children:"Linear "}),f.jsx(Fi,{value:"radial-gradient",children:"Radial "})]}),f.jsxs(Li,{value:"solid",className:"space-y-4 mt-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(Te,{children:"Preset Colors"}),f.jsx("div",{className:"grid grid-cols-6 gap-2",children:S4.map((v,m)=>f.jsx("div",{className:"w-8 h-8 rounded-md cursor-pointer border border-gray-300 flex items-center justify-center",style:{backgroundColor:v},onClick:()=>p(v),children:t==="solid"&&n===v&&f.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"})},m))})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Te,{children:"Custom Color"}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsx(Ue,{type:"color",value:n,onChange:v=>o(v.target.value),className:"w-12 h-10 p-1"}),f.jsx(Ue,{type:"text",value:n,onChange:v=>o(v.target.value),className:"flex-1"}),f.jsx(Oe,{onClick:()=>p(n),children:"Apply"})]})]})]}),f.jsxs(Li,{value:"linear-gradient",className:"space-y-4 mt-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(Te,{children:"Preset Gradients"}),f.jsx("div",{className:"grid grid-cols-3 gap-2",children:jw.filter(v=>v.includes("linear-gradient")).map((v,m)=>f.jsx("div",{className:"h-12 rounded-md cursor-pointer border border-gray-300",style:{background:v},onClick:()=>g(v)},m))})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Te,{children:"Gradient Direction"}),f.jsxs(Ir,{value:s,onValueChange:l,children:[f.jsx(mr,{children:f.jsx(hn,{placeholder:"Select gradient direction"})}),f.jsx(xr,{children:w4.map(v=>f.jsx(dt,{value:v.value,children:v.label},v.value))})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Te,{children:"Gradient Colors"}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsx(Ue,{type:"color",value:i[0],onChange:v=>a([v.target.value,i[1]]),className:"w-12 h-10 p-1"}),f.jsx(Ue,{type:"color",value:i[1],onChange:v=>a([i[0],v.target.value]),className:"w-12 h-10 p-1"})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs(Te,{children:["Gradient Position (",c[0],"% - ",c[1],"%)"]}),f.jsx(gn,{value:c,min:0,max:100,step:1,onValueChange:u,className:"my-4"})]}),f.jsx(Oe,{onClick:h,children:"Apply Gradient"})]}),f.jsxs(Li,{value:"radial-gradient",className:"space-y-4 mt-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(Te,{children:"Preset Gradients"}),f.jsx("div",{className:"grid grid-cols-3 gap-2",children:jw.filter(v=>v.includes("radial-gradient")).map((v,m)=>f.jsx("div",{className:"h-12 rounded-md cursor-pointer border border-gray-300",style:{background:v},onClick:()=>g(v)},m))})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Te,{children:"Gradient Colors"}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsx(Ue,{type:"color",value:i[0],onChange:v=>a([v.target.value,i[1]]),className:"w-12 h-10 p-1"}),f.jsx(Ue,{type:"color",value:i[1],onChange:v=>a([i[0],v.target.value]),className:"w-12 h-10 p-1"})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs(Te,{children:["Gradient Position (",c[0],"% - ",c[1],"%)"]}),f.jsx(gn,{value:c,min:0,max:100,step:1,onValueChange:u,className:"my-4"})]}),f.jsx(Oe,{onClick:h,children:"Apply Gradient"})]})]})]})};dr({id:"background",title:"Background",icon:IS,viewContainer:()=>f.jsx(C4,{}),order:120},_t.Sidebar);const E4=({layerId:e,duplicateLayer:t,deleteLayer:r})=>f.jsxs(ac,{children:[f.jsx(gh,{asChild:!0,children:f.jsx(Oe,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:n=>n.stopPropagation(),children:f.jsx(DS,{className:"h-3 w-3"})})}),f.jsxs(Va,{align:"end",children:[f.jsx(sr,{onClick:()=>t(e),children:"Duplicate"}),f.jsxs(sr,{onClick:()=>r(e),className:"text-destructive",children:[f.jsx(ns,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]}),_4=()=>{const t=je().json?.docs?.[0]?.id,r=uS(t||""),n=je(R=>R.reorderNode),o=je(R=>R.updateNode),i=je(R=>R.cloneNode),a=je(R=>R.removeNode),s=R=>{if(!t)return;const A=L=>{for(const P of L){if(P.id===R)return P;if(P.children&&P.children.length>0){const O=A(P.children);if(O)return O}}return null},$=A(r);if(!$)return;const F=$.position.visible??!0;o(t,R,{position:{...$.position,visible:!F}})},[l,c]=X.useState(""),[u,d]=X.useState("all"),h=X.useMemo(()=>{const R=new Set,A=$=>{$.forEach(F=>{R.add(F.type),F.children&&A(F.children)})};return A(r),Array.from(R)},[r]),p=R=>{t&&i(t,R)},g=R=>{t&&a(t,R)},v=(R,A,$)=>{R.dataTransfer.setData("text/plain",JSON.stringify([...$,A])),R.currentTarget.classList.add("opacity-50")},m=R=>{R.currentTarget.classList.remove("opacity-50")},x=R=>{R.preventDefault(),R.currentTarget.classList.add("bg-gray-100")},y=R=>{R.currentTarget.classList.remove("bg-gray-100")},b=(R,A)=>R.length===A.length&&R.every(($,F)=>$===A[F]),w=(R,A,$)=>{R.preventDefault();const F=JSON.parse(R.dataTransfer.getData("text/plain"));if(R.currentTarget.classList.remove("bg-gray-100"),t!==void 0&&b(F.slice(0,-1),$)){const L=F[F.length-1];n(t,L,A,$)}},_=(R,A,$)=>R.map(F=>{const L=F.children?_(F.children,A,$):[],P=A?(F.title||F.type).toLowerCase().includes(A.toLowerCase()):!0,O=$==="all"?!0:F.type===$;return P&&O||L.length>0?{...F,children:L}:null}).filter(Boolean),T=({comp:R,path:A,index:$})=>{[...A];const F=A.length*8;return f.jsxs("div",{style:{marginLeft:F},children:[f.jsxs("div",{draggable:!0,onDragStart:L=>v(L,$,A),onDragEnd:m,onDragOver:x,onDragLeave:y,onDrop:L=>w(L,$,A),className:"flex items-center gap-2 p-1.5 rounded-md hover:bg-sidebar-accent/50 cursor-move group",children:[f.jsx(qh,{className:"h-4 w-4 text-muted-foreground cursor-grab"}),f.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded bg-muted",children:R.icon||f.jsx(Kh,{className:"h-4 w-4"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xs font-medium truncate",children:R.title||R.type}),R.position.locked&&f.jsx("div",{className:"w-1 h-1 rounded-full bg-orange-500"})]}),f.jsx("div",{className:"text-xs text-muted-foreground"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Oe,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:L=>{L.stopPropagation(),s(R.id)},children:R.position.visible??!0?f.jsx(Dc,{className:"h-3 w-3"}):f.jsx(TS,{className:"h-3 w-3 text-muted-foreground"})}),f.jsx(E4,{layerId:R.id,duplicateLayer:p,deleteLayer:g})]})]}),R.children&&R.children.length>0&&f.jsx("div",{className:"space-y-1",children:R.children.map((L,P)=>f.jsx(T,{comp:L,path:[...A,$],index:P},L.id))})]})};if(!t)return f.jsx("div",{children:"No page"});const j=Rw(r),k=_(r,l,u);return f.jsxs("div",{children:[f.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[f.jsx("h2",{className:"text-xl font-bold",children:"Layers"}),f.jsx(Ui,{variant:"secondary",children:j})]}),f.jsxs("div",{className:"flex justify-between gap-2",children:[f.jsx(Ue,{value:l,onChange:R=>c(R.target.value),placeholder:"Search layers..."}),f.jsx("div",{className:"w-20",children:f.jsxs(Ir,{value:u,onValueChange:d,children:[f.jsx(mr,{className:"mb-3 text-xs",children:f.jsx(hn,{placeholder:"Filter by type"})}),f.jsxs(xr,{children:[f.jsx(dt,{value:"all",children:"All"}),h.map(R=>f.jsx(dt,{value:R,children:R},R))]})]})})]}),f.jsx("div",{children:k.map((R,A)=>f.jsx(T,{comp:R,path:[],index:A},R.id))})]})},Rw=e=>e.reduce((t,r)=>{let n=1;return r.children&&r.children.length>0&&(n+=Rw(r.children)),t+n},0);dr({id:"layers",title:"Layers",icon:Kh,viewContainer:()=>f.jsx(_4,{}),order:3},_t.Sidebar);const N4=[{id:"1",title:"Mountain Landscape",alt:"Mountain landscape with starry sky",width:800,height:300,bgColor:"4A90E2",textColor:"FFFFFF",tags:["nature","landscape","mountains"],type:"image"},{id:"2",title:"Abstract Pattern",alt:"Abstract geometric pattern",width:300,height:300,bgColor:"FF6B35",textColor:"FFFFFF",tags:["abstract","geometric","orange"],type:"pattern"},{id:"3",title:"Minimal Design",alt:"Minimalist design element",width:250,height:250,bgColor:"F8F9FA",textColor:"6C757D",tags:["minimal","design","clean"],type:"pattern"},{id:"4",title:"Grid Pattern",alt:"3x3 grid pattern",width:320,height:320,bgColor:"E9ECEF",textColor:"495057",tags:["grid","pattern","geometric"],type:"pattern"},{id:"5",title:"Gaming Setup",alt:"Gaming setup with RGB lighting",width:600,height:300,bgColor:"6F42C1",textColor:"FFFFFF",tags:["gaming","rgb","setup"],type:"image"},{id:"6",title:"Pexels Logo",alt:"Pexels stock photo logo",width:280,height:280,bgColor:"F8F9FA",textColor:"000000",tags:["logo","stock","photos"],type:"logo"},{id:"7",title:"Data Chart",alt:"Analytics data visualization",width:350,height:250,bgColor:"F8F9FA",textColor:"495057",tags:["chart","data","analytics"],type:"chart"},{id:"8",title:"Pixel Art",alt:"Pixel art pattern",width:300,height:300,bgColor:"E9ECEF",textColor:"495057",tags:["pixel","art","retro"],type:"pattern"},{id:"9",title:"City Skyline",alt:"Urban city skyline at night",width:900,height:300,bgColor:"2C3E50",textColor:"FFFFFF",tags:["city","urban","night"],type:"image"},{id:"10",title:"Abstract Waves",alt:"Abstract wave pattern",width:320,height:200,bgColor:"00D4AA",textColor:"FFFFFF",tags:["abstract","waves","teal"],type:"pattern"},{id:"11",title:"Tech Interface",alt:"Modern technology interface",width:400,height:250,bgColor:"1A1A1A",textColor:"00FF88",tags:["tech","interface","modern"],type:"image"},{id:"12",title:"Geometric Shapes",alt:"Colorful geometric shapes",width:280,height:280,bgColor:"FFD93D",textColor:"000000",tags:["geometric","shapes","yellow"],type:"pattern"},{id:"13",title:"Wide Banner",alt:"Wide promotional banner",width:1200,height:300,bgColor:"E74C3C",textColor:"FFFFFF",tags:["banner","promo","wide"],type:"image"},{id:"14",title:"Tall Portrait",alt:"Tall portrait photo",width:300,height:600,bgColor:"9B59B6",textColor:"FFFFFF",tags:["portrait","tall","person"],type:"image"},{id:"15",title:"Square Icon",alt:"Square application icon",width:200,height:200,bgColor:"3498DB",textColor:"FFFFFF",tags:["icon","square","app"],type:"logo"},{id:"16",title:"Ultra Wide",alt:"Ultra wide panoramic view",width:1600,height:400,bgColor:"27AE60",textColor:"FFFFFF",tags:["panorama","wide","nature"],type:"image"}];function D4({searchQuery:e}){const t=N4.filter(n=>n.title.toLowerCase().includes(e.toLowerCase())||n.tags.some(o=>o.toLowerCase().includes(e.toLowerCase()))),r=n=>{const o=`${n.width}x${n.height}`,i=`${n.bgColor}/${n.textColor}`,a=encodeURIComponent(n.title);return`https://placehold.co/${o}/${i}?text=${a}`};return f.jsxs("div",{className:"py-2",children:[f.jsx("div",{className:"columns-2 gap-3 space-y-3",children:t.map(n=>{const o=n.width/n.height,i=o>=1.5,a=o<=.7;return f.jsxs("div",{className:`relative rounded-lg overflow-hidden group cursor-pointer hover:shadow-lg transition-shadow break-inside-avoid ${i||a?"aspect-[16/9]":"aspect-square"}`,children:[f.jsx("img",{src:r(n),alt:n.alt,width:n.width,height:n.height,className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-opacity-20 transition-all duration-200"}),f.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[f.jsx("div",{className:"text-white text-xs font-medium truncate",children:n.title}),f.jsx("div",{className:"text-white/80 text-xs truncate",children:n.tags.slice(0,2).join(", ")})]})]},n.id)})}),t.length===0&&f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx("div",{className:"text-lg font-medium mb-2",children:"No images found"}),f.jsx("p",{className:"text-sm",children:"Try adjusting your search terms"})]})]})}const T4=[{id:"1",title:"Getting Started Tutorial",description:"Learn the basics of our platform",duration:"5:32",thumbnail:"https://placehold.co/400x225/4A90E2/FFFFFF?text=Tutorial",tags:["tutorial","beginner","guide"],type:"tutorial"},{id:"2",title:"Advanced Features Demo",description:"Explore advanced functionality",duration:"12:45",thumbnail:"https://placehold.co/400x225/FF6B35/FFFFFF?text=Demo",tags:["demo","advanced","features"],type:"demo"},{id:"3",title:"Product Presentation",description:"Overview of our latest features",duration:"8:20",thumbnail:"https://placehold.co/400x225/6F42C1/FFFFFF?text=Presentation",tags:["presentation","product","overview"],type:"presentation"},{id:"4",title:"Screen Recording",description:"User interaction recording",duration:"3:15",thumbnail:"https://placehold.co/400x225/27AE60/FFFFFF?text=Recording",tags:["recording","screen","interaction"],type:"recording"},{id:"5",title:"Workflow Optimization",description:"Tips for better productivity",duration:"15:30",thumbnail:"https://placehold.co/400x225/E74C3C/FFFFFF?text=Workflow",tags:["workflow","productivity","tips"],type:"tutorial"},{id:"6",title:"API Integration Guide",description:"Connect your applications",duration:"22:10",thumbnail:"https://placehold.co/400x225/9B59B6/FFFFFF?text=API",tags:["api","integration","development"],type:"tutorial"}];function M4({searchQuery:e}){const t=T4.filter(r=>r.title.toLowerCase().includes(e.toLowerCase())||r.description.toLowerCase().includes(e.toLowerCase())||r.tags.some(n=>n.toLowerCase().includes(e.toLowerCase())));return f.jsx("div",{className:"py-2",children:t.length>0?f.jsx("div",{className:"space-y-4",children:t.map(r=>f.jsxs("div",{className:"flex items-center space-x-4 p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[f.jsxs("div",{className:"relative flex-shrink-0",children:[f.jsx("img",{src:r.thumbnail,alt:r.title,className:"w-24 h-16 object-cover rounded-lg"}),f.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:f.jsx(An,{className:"w-6 h-6 text-white drop-shadow-lg"})})]}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:r.title}),f.jsx("p",{className:"text-xs text-gray-500 truncate mt-1",children:r.description}),f.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[f.jsxs("div",{className:"flex items-center text-xs text-gray-400",children:[f.jsx(Nc,{className:"w-3 h-3 mr-1"}),r.duration]}),f.jsxs("div",{className:"flex items-center text-xs text-gray-400",children:[f.jsx(Hh,{className:"w-3 h-3 mr-1"}),r.type]})]})]}),f.jsx("div",{className:"flex-shrink-0",children:f.jsx("div",{className:"text-xs text-gray-400",children:r.tags.slice(0,2).join(", ")})})]},r.id))}):f.jsxs("div",{className:"text-center py-12 text-gray-500",children:[f.jsx("div",{className:"text-lg font-medium mb-2",children:"No videos found"}),f.jsx("p",{className:"text-sm",children:"Try adjusting your search terms"})]})})}const j4=[{id:"1",title:"Ambient Background",artist:"Sound Library",duration:"3:45",waveform:"https://placehold.co/200x40/4A90E2/FFFFFF?text=Waveform",tags:["ambient","background","calm"],type:"music"},{id:"2",title:"Product Demo Voice",artist:"Marketing Team",duration:"2:30",waveform:"https://placehold.co/200x40/FF6B35/FFFFFF?text=Voice",tags:["voice","demo","marketing"],type:"recording"},{id:"3",title:"Tech Podcast Episode",artist:"Tech Talks",duration:"45:20",waveform:"https://placehold.co/200x40/6F42C1/FFFFFF?text=Podcast",tags:["podcast","tech","discussion"],type:"podcast"},{id:"4",title:"Notification Sound",artist:"UI Sounds",duration:"0:05",waveform:"https://placehold.co/200x40/27AE60/FFFFFF?text=Alert",tags:["notification","alert","ui"],type:"sound-effect"},{id:"5",title:"Interview Recording",artist:"User Research",duration:"18:15",waveform:"https://placehold.co/200x40/E74C3C/FFFFFF?text=Interview",tags:["interview","research","user"],type:"recording"},{id:"6",title:"Upbeat Intro",artist:"Music Library",duration:"1:20",waveform:"https://placehold.co/200x40/9B59B6/FFFFFF?text=Intro",tags:["intro","upbeat","energetic"],type:"music"},{id:"7",title:"Button Click Sound",artist:"UI Sounds",duration:"0:02",waveform:"https://placehold.co/200x40/3498DB/FFFFFF?text=Click",tags:["click","button","ui"],type:"sound-effect"},{id:"8",title:"Weekly Update",artist:"Company News",duration:"12:45",waveform:"https://placehold.co/200x40/2ECC71/FFFFFF?text=Update",tags:["update","news","weekly"],type:"podcast"}];function R4({searchQuery:e}){const t=j4.filter(n=>n.title.toLowerCase().includes(e.toLowerCase())||n.artist.toLowerCase().includes(e.toLowerCase())||n.tags.some(o=>o.toLowerCase().includes(e.toLowerCase()))),r=n=>{switch(n){case"music":return f.jsx(ep,{className:"w-4 h-4"});case"podcast":return f.jsx(PS,{className:"w-4 h-4"});case"recording":return f.jsx(LS,{className:"w-4 h-4"});case"sound-effect":return f.jsx(An,{className:"w-4 h-4"});default:return f.jsx(An,{className:"w-4 h-4"})}};return f.jsx("div",{className:"py-2",children:t.length>0?f.jsx("div",{className:"space-y-3",children:t.map(n=>f.jsxs("div",{className:"flex items-center space-x-4 p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:r(n.type)})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:n.title}),f.jsx("p",{className:"text-xs text-gray-500 truncate mt-1",children:n.artist}),f.jsx("div",{className:"mt-2",children:f.jsx("img",{src:n.waveform,alt:"Audio waveform",className:"h-8 w-full object-cover rounded"})})]}),f.jsxs("div",{className:"flex-shrink-0 text-right",children:[f.jsxs("div",{className:"flex items-center text-xs text-gray-400 mb-1",children:[f.jsx(Nc,{className:"w-3 h-3 mr-1"}),n.duration]}),f.jsx("div",{className:"text-xs text-gray-400",children:n.tags.slice(0,2).join(", ")})]})]},n.id))}):f.jsxs("div",{className:"text-center py-12 text-gray-500",children:[f.jsx("div",{className:"text-lg font-medium mb-2",children:"No audio files found"}),f.jsx("p",{className:"text-sm",children:"Try adjusting your search terms"})]})})}const k4=[{id:"img-1",type:"image",title:"Mountain Landscape",width:800,height:300,bgColor:"4A90E2",textColor:"FFFFFF",tags:["nature","landscape","mountains"],thumbnail:"https://placehold.co/400x225/4A90E2/FFFFFF?text=Mountain"},{id:"img-2",type:"image",title:"Abstract Pattern",width:300,height:300,bgColor:"FF6B35",textColor:"FFFFFF",tags:["abstract","geometric","orange"],thumbnail:"https://placehold.co/400x225/FF6B35/FFFFFF?text=Pattern"},{id:"vid-1",type:"video",title:"Getting Started Tutorial",description:"Learn the basics of our platform",duration:"5:32",thumbnail:"https://placehold.co/400x225/4A90E2/FFFFFF?text=Tutorial",tags:["tutorial","beginner","guide"]},{id:"vid-2",type:"video",title:"Advanced Features Demo",description:"Explore advanced functionality",duration:"12:45",thumbnail:"https://placehold.co/400x225/FF6B35/FFFFFF?text=Demo",tags:["demo","advanced","features"]},{id:"aud-1",type:"audio",title:"Ambient Background",artist:"Sound Library",duration:"3:45",waveform:"https://placehold.co/200x40/4A90E2/FFFFFF?text=Waveform",tags:["ambient","background","calm"]},{id:"aud-2",type:"audio",title:"Product Demo Voice",artist:"Marketing Team",duration:"2:30",waveform:"https://placehold.co/200x40/FF6B35/FFFFFF?text=Voice",tags:["voice","demo","marketing"]}];function P4({searchQuery:e}){const t=k4.filter(o=>o.title.toLowerCase().includes(e.toLowerCase())||o.description?.toLowerCase().includes(e.toLowerCase())||o.artist?.toLowerCase().includes(e.toLowerCase())||o.tags.some(i=>i.toLowerCase().includes(e.toLowerCase()))),r=o=>{switch(o){case"image":return f.jsx(Xh,{className:"w-4 h-4"});case"video":return f.jsx(Hh,{className:"w-4 h-4"});case"audio":return f.jsx(ep,{className:"w-4 h-4"});default:return f.jsx(An,{className:"w-4 h-4"})}},n=o=>{switch(o){case"image":return"Image";case"video":return"Video";case"audio":return"Audio";default:return"File"}};return f.jsxs("div",{className:"py-2",children:[f.jsxs("div",{className:"mb-4",children:[f.jsxs("h3",{className:"text-sm font-medium text-gray-900",children:['Search Results for "',e,'"']}),f.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Found ",t.length," results"]})]}),t.length>0?f.jsx("div",{className:"space-y-3",children:t.map(o=>f.jsxs("div",{className:"flex items-center space-x-4 p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:r(o.type)})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:o.title}),f.jsx("span",{className:"text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded",children:n(o.type)})]}),o.description&&f.jsx("p",{className:"text-xs text-gray-500 truncate",children:o.description}),o.artist&&f.jsx("p",{className:"text-xs text-gray-500 truncate",children:o.artist}),o.duration&&f.jsxs("div",{className:"flex items-center text-xs text-gray-400 mt-1",children:[f.jsx(Nc,{className:"w-3 h-3 mr-1"}),o.duration]})]}),f.jsx("div",{className:"flex-shrink-0",children:f.jsx("div",{className:"text-xs text-gray-400",children:o.tags.slice(0,2).join(", ")})})]},o.id))}):f.jsxs("div",{className:"text-center py-12 text-gray-500",children:[f.jsx("div",{className:"text-lg font-medium mb-2",children:"No results found"}),f.jsx("p",{className:"text-sm",children:"Try adjusting your search terms"})]})]})}function A4(){const[e,t]=X.useState("Images"),[r,n]=X.useState(""),[o,i]=X.useState(!1),a=["Images","Videos","Audio"],s=l=>{const c=l.target.value;n(c),c.trim()?i(!0):i(!1)};return f.jsxs("div",{className:"",children:[f.jsx("div",{className:"py-4 border-b",children:f.jsxs("div",{className:"relative",children:[f.jsx(np,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),f.jsx(Ue,{type:"text",placeholder:"Search all files by keyword, tags, color...",className:"pl-10 pr-4 py-2 w-full border rounded-lg text-sm",value:r,onChange:s})]})}),f.jsx("div",{className:"py-4 space-y-4",children:f.jsx(Oe,{className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-medium",children:"Upload files"})}),o?f.jsx(P4,{searchQuery:r}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"px-0 mb-4",children:f.jsx("div",{className:"flex border-b",children:a.map(l=>f.jsx("button",{onClick:()=>t(l),className:`flex-1 pb-2 text-sm font-medium transition-colors ${e===l?"text-black border-b-2 border-black":"text-gray-500 hover:text-gray-700"}`,children:l},l))})}),e==="Images"&&f.jsx(D4,{searchQuery:""}),e==="Videos"&&f.jsx(M4,{searchQuery:""}),e==="Audio"&&f.jsx(R4,{searchQuery:""})]})]})}dr({id:"uploads",title:"Uploads",icon:zh,viewContainer:()=>f.jsx(A4,{}),order:2},_t.Sidebar);var cc={exports:{}},O4=cc.exports,kw;function I4(){return kw||(kw=1,function(e,t){(function(r,n){e.exports=n()})(O4,()=>(()=>{var r={873:(a,s)=>{var l,c,u=function(){var d=function(P,O){var I=P,E=x[O],S=null,M=0,D=null,N=[],z={},Y=function(G,te){S=function(U){for(var ee=new Array(U),ne=0;ne<U;ne+=1){ee[ne]=new Array(U);for(var le=0;le<U;le+=1)ee[ne][le]=null}return ee}(M=4*I+17),H(0,0),H(M-7,0),H(0,M-7),J(),K(),Z(G,te),I>=7&&q(G),D==null&&(D=ie(I,E,N)),oe(D,te)},H=function(G,te){for(var U=-1;U<=7;U+=1)if(!(G+U<=-1||M<=G+U))for(var ee=-1;ee<=7;ee+=1)te+ee<=-1||M<=te+ee||(S[G+U][te+ee]=0<=U&&U<=6&&(ee==0||ee==6)||0<=ee&&ee<=6&&(U==0||U==6)||2<=U&&U<=4&&2<=ee&&ee<=4)},K=function(){for(var G=8;G<M-8;G+=1)S[G][6]==null&&(S[G][6]=G%2==0);for(var te=8;te<M-8;te+=1)S[6][te]==null&&(S[6][te]=te%2==0)},J=function(){for(var G=y.getPatternPosition(I),te=0;te<G.length;te+=1)for(var U=0;U<G.length;U+=1){var ee=G[te],ne=G[U];if(S[ee][ne]==null)for(var le=-2;le<=2;le+=1)for(var fe=-2;fe<=2;fe+=1)S[ee+le][ne+fe]=le==-2||le==2||fe==-2||fe==2||le==0&&fe==0}},q=function(G){for(var te=y.getBCHTypeNumber(I),U=0;U<18;U+=1){var ee=!G&&(te>>U&1)==1;S[Math.floor(U/3)][U%3+M-8-3]=ee}for(U=0;U<18;U+=1)ee=!G&&(te>>U&1)==1,S[U%3+M-8-3][Math.floor(U/3)]=ee},Z=function(G,te){for(var U=E<<3|te,ee=y.getBCHTypeInfo(U),ne=0;ne<15;ne+=1){var le=!G&&(ee>>ne&1)==1;ne<6?S[ne][8]=le:ne<8?S[ne+1][8]=le:S[M-15+ne][8]=le}for(ne=0;ne<15;ne+=1)le=!G&&(ee>>ne&1)==1,ne<8?S[8][M-ne-1]=le:ne<9?S[8][15-ne-1+1]=le:S[8][15-ne-1]=le;S[M-8][8]=!G},oe=function(G,te){for(var U=-1,ee=M-1,ne=7,le=0,fe=y.getMaskFunction(te),ue=M-1;ue>0;ue-=2)for(ue==6&&(ue-=1);;){for(var ve=0;ve<2;ve+=1)if(S[ee][ue-ve]==null){var Se=!1;le<G.length&&(Se=(G[le]>>>ne&1)==1),fe(ee,ue-ve)&&(Se=!Se),S[ee][ue-ve]=Se,(ne-=1)==-1&&(le+=1,ne=7)}if((ee+=U)<0||M<=ee){ee-=U,U=-U;break}}},ie=function(G,te,U){for(var ee=_.getRSBlocks(G,te),ne=T(),le=0;le<U.length;le+=1){var fe=U[le];ne.put(fe.getMode(),4),ne.put(fe.getLength(),y.getLengthInBits(fe.getMode(),G)),fe.write(ne)}var ue=0;for(le=0;le<ee.length;le+=1)ue+=ee[le].dataCount;if(ne.getLengthInBits()>8*ue)throw"code length overflow. ("+ne.getLengthInBits()+">"+8*ue+")";for(ne.getLengthInBits()+4<=8*ue&&ne.put(0,4);ne.getLengthInBits()%8!=0;)ne.putBit(!1);for(;!(ne.getLengthInBits()>=8*ue||(ne.put(236,8),ne.getLengthInBits()>=8*ue));)ne.put(17,8);return function(ve,Se){for(var De=0,Fe=0,Me=0,Ce=new Array(Se.length),ke=new Array(Se.length),me=0;me<Se.length;me+=1){var Ge=Se[me].dataCount,Qe=Se[me].totalCount-Ge;Fe=Math.max(Fe,Ge),Me=Math.max(Me,Qe),Ce[me]=new Array(Ge);for(var we=0;we<Ce[me].length;we+=1)Ce[me][we]=255&ve.getBuffer()[we+De];De+=Ge;var it=y.getErrorCorrectPolynomial(Qe),at=w(Ce[me],it.getLength()-1).mod(it);for(ke[me]=new Array(it.getLength()-1),we=0;we<ke[me].length;we+=1){var gt=we+at.getLength()-ke[me].length;ke[me][we]=gt>=0?at.getAt(gt):0}}var qr=0;for(we=0;we<Se.length;we+=1)qr+=Se[we].totalCount;var zt=new Array(qr),Dt=0;for(we=0;we<Fe;we+=1)for(me=0;me<Se.length;me+=1)we<Ce[me].length&&(zt[Dt]=Ce[me][we],Dt+=1);for(we=0;we<Me;we+=1)for(me=0;me<Se.length;me+=1)we<ke[me].length&&(zt[Dt]=ke[me][we],Dt+=1);return zt}(ne,ee)};z.addData=function(G,te){var U=null;switch(te=te||"Byte"){case"Numeric":U=j(G);break;case"Alphanumeric":U=k(G);break;case"Byte":U=R(G);break;case"Kanji":U=A(G);break;default:throw"mode:"+te}N.push(U),D=null},z.isDark=function(G,te){if(G<0||M<=G||te<0||M<=te)throw G+","+te;return S[G][te]},z.getModuleCount=function(){return M},z.make=function(){if(I<1){for(var G=1;G<40;G++){for(var te=_.getRSBlocks(G,E),U=T(),ee=0;ee<N.length;ee++){var ne=N[ee];U.put(ne.getMode(),4),U.put(ne.getLength(),y.getLengthInBits(ne.getMode(),G)),ne.write(U)}var le=0;for(ee=0;ee<te.length;ee++)le+=te[ee].dataCount;if(U.getLengthInBits()<=8*le)break}I=G}Y(!1,function(){for(var fe=0,ue=0,ve=0;ve<8;ve+=1){Y(!0,ve);var Se=y.getLostPoint(z);(ve==0||fe>Se)&&(fe=Se,ue=ve)}return ue}())},z.createTableTag=function(G,te){G=G||2;var U="";U+='<table style="',U+=" border-width: 0px; border-style: none;",U+=" border-collapse: collapse;",U+=" padding: 0px; margin: "+(te=te===void 0?4*G:te)+"px;",U+='">',U+="<tbody>";for(var ee=0;ee<z.getModuleCount();ee+=1){U+="<tr>";for(var ne=0;ne<z.getModuleCount();ne+=1)U+='<td style="',U+=" border-width: 0px; border-style: none;",U+=" border-collapse: collapse;",U+=" padding: 0px; margin: 0px;",U+=" width: "+G+"px;",U+=" height: "+G+"px;",U+=" background-color: ",U+=z.isDark(ee,ne)?"#000000":"#ffffff",U+=";",U+='"/>';U+="</tr>"}return(U+="</tbody>")+"</table>"},z.createSvgTag=function(G,te,U,ee){var ne={};typeof arguments[0]=="object"&&(G=(ne=arguments[0]).cellSize,te=ne.margin,U=ne.alt,ee=ne.title),G=G||2,te=te===void 0?4*G:te,(U=typeof U=="string"?{text:U}:U||{}).text=U.text||null,U.id=U.text?U.id||"qrcode-description":null,(ee=typeof ee=="string"?{text:ee}:ee||{}).text=ee.text||null,ee.id=ee.text?ee.id||"qrcode-title":null;var le,fe,ue,ve,Se=z.getModuleCount()*G+2*te,De="";for(ve="l"+G+",0 0,"+G+" -"+G+",0 0,-"+G+"z ",De+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',De+=ne.scalable?"":' width="'+Se+'px" height="'+Se+'px"',De+=' viewBox="0 0 '+Se+" "+Se+'" ',De+=' preserveAspectRatio="xMinYMin meet"',De+=ee.text||U.text?' role="img" aria-labelledby="'+re([ee.id,U.id].join(" ").trim())+'"':"",De+=">",De+=ee.text?'<title id="'+re(ee.id)+'">'+re(ee.text)+"</title>":"",De+=U.text?'<description id="'+re(U.id)+'">'+re(U.text)+"</description>":"",De+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',De+='<path d="',fe=0;fe<z.getModuleCount();fe+=1)for(ue=fe*G+te,le=0;le<z.getModuleCount();le+=1)z.isDark(fe,le)&&(De+="M"+(le*G+te)+","+ue+ve);return(De+='" stroke="transparent" fill="black"/>')+"</svg>"},z.createDataURL=function(G,te){G=G||2,te=te===void 0?4*G:te;var U=z.getModuleCount()*G+2*te,ee=te,ne=U-te;return L(U,U,function(le,fe){if(ee<=le&&le<ne&&ee<=fe&&fe<ne){var ue=Math.floor((le-ee)/G),ve=Math.floor((fe-ee)/G);return z.isDark(ve,ue)?0:1}return 1})},z.createImgTag=function(G,te,U){G=G||2,te=te===void 0?4*G:te;var ee=z.getModuleCount()*G+2*te,ne="";return ne+="<img",ne+=' src="',ne+=z.createDataURL(G,te),ne+='"',ne+=' width="',ne+=ee,ne+='"',ne+=' height="',ne+=ee,ne+='"',U&&(ne+=' alt="',ne+=re(U),ne+='"'),ne+"/>"};var re=function(G){for(var te="",U=0;U<G.length;U+=1){var ee=G.charAt(U);switch(ee){case"<":te+="&lt;";break;case">":te+="&gt;";break;case"&":te+="&amp;";break;case'"':te+="&quot;";break;default:te+=ee}}return te};return z.createASCII=function(G,te){if((G=G||1)<2)return function(Ce){Ce=Ce===void 0?2:Ce;var ke,me,Ge,Qe,we,it=1*z.getModuleCount()+2*Ce,at=Ce,gt=it-Ce,qr={"":""," ":""," ":"","  ":" "},zt={"":""," ":""," ":" ","  ":" "},Dt="";for(ke=0;ke<it;ke+=2){for(Ge=Math.floor((ke-at)/1),Qe=Math.floor((ke+1-at)/1),me=0;me<it;me+=1)we="",at<=me&&me<gt&&at<=ke&&ke<gt&&z.isDark(Ge,Math.floor((me-at)/1))&&(we=" "),at<=me&&me<gt&&at<=ke+1&&ke+1<gt&&z.isDark(Qe,Math.floor((me-at)/1))?we+=" ":we+="",Dt+=Ce<1&&ke+1>=gt?zt[we]:qr[we];Dt+=`
`}return it%2&&Ce>0?Dt.substring(0,Dt.length-it-1)+Array(it+1).join(""):Dt.substring(0,Dt.length-1)}(te);G-=1,te=te===void 0?2*G:te;var U,ee,ne,le,fe=z.getModuleCount()*G+2*te,ue=te,ve=fe-te,Se=Array(G+1).join(""),De=Array(G+1).join("  "),Fe="",Me="";for(U=0;U<fe;U+=1){for(ne=Math.floor((U-ue)/G),Me="",ee=0;ee<fe;ee+=1)le=1,ue<=ee&&ee<ve&&ue<=U&&U<ve&&z.isDark(ne,Math.floor((ee-ue)/G))&&(le=0),Me+=le?Se:De;for(ne=0;ne<G;ne+=1)Fe+=Me+`
`}return Fe.substring(0,Fe.length-1)},z.renderTo2dContext=function(G,te){te=te||2;for(var U=z.getModuleCount(),ee=0;ee<U;ee++)for(var ne=0;ne<U;ne++)G.fillStyle=z.isDark(ee,ne)?"black":"white",G.fillRect(ee*te,ne*te,te,te)},z};d.stringToBytes=(d.stringToBytesFuncs={default:function(P){for(var O=[],I=0;I<P.length;I+=1){var E=P.charCodeAt(I);O.push(255&E)}return O}}).default,d.createStringToBytes=function(P,O){var I=function(){for(var S=F(P),M=function(){var K=S.read();if(K==-1)throw"eof";return K},D=0,N={};;){var z=S.read();if(z==-1)break;var Y=M(),H=M()<<8|M();N[String.fromCharCode(z<<8|Y)]=H,D+=1}if(D!=O)throw D+" != "+O;return N}(),E=63;return function(S){for(var M=[],D=0;D<S.length;D+=1){var N=S.charCodeAt(D);if(N<128)M.push(N);else{var z=I[S.charAt(D)];typeof z=="number"?(255&z)==z?M.push(z):(M.push(z>>>8),M.push(255&z)):M.push(E)}}return M}};var h,p,g,v,m,x={L:1,M:0,Q:3,H:2},y=(h=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],p=1335,g=7973,m=function(P){for(var O=0;P!=0;)O+=1,P>>>=1;return O},(v={}).getBCHTypeInfo=function(P){for(var O=P<<10;m(O)-m(p)>=0;)O^=p<<m(O)-m(p);return 21522^(P<<10|O)},v.getBCHTypeNumber=function(P){for(var O=P<<12;m(O)-m(g)>=0;)O^=g<<m(O)-m(g);return P<<12|O},v.getPatternPosition=function(P){return h[P-1]},v.getMaskFunction=function(P){switch(P){case 0:return function(O,I){return(O+I)%2==0};case 1:return function(O,I){return O%2==0};case 2:return function(O,I){return I%3==0};case 3:return function(O,I){return(O+I)%3==0};case 4:return function(O,I){return(Math.floor(O/2)+Math.floor(I/3))%2==0};case 5:return function(O,I){return O*I%2+O*I%3==0};case 6:return function(O,I){return(O*I%2+O*I%3)%2==0};case 7:return function(O,I){return(O*I%3+(O+I)%2)%2==0};default:throw"bad maskPattern:"+P}},v.getErrorCorrectPolynomial=function(P){for(var O=w([1],0),I=0;I<P;I+=1)O=O.multiply(w([1,b.gexp(I)],0));return O},v.getLengthInBits=function(P,O){if(1<=O&&O<10)switch(P){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+P}else if(O<27)switch(P){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+P}else{if(!(O<41))throw"type:"+O;switch(P){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+P}}},v.getLostPoint=function(P){for(var O=P.getModuleCount(),I=0,E=0;E<O;E+=1)for(var S=0;S<O;S+=1){for(var M=0,D=P.isDark(E,S),N=-1;N<=1;N+=1)if(!(E+N<0||O<=E+N))for(var z=-1;z<=1;z+=1)S+z<0||O<=S+z||N==0&&z==0||D==P.isDark(E+N,S+z)&&(M+=1);M>5&&(I+=3+M-5)}for(E=0;E<O-1;E+=1)for(S=0;S<O-1;S+=1){var Y=0;P.isDark(E,S)&&(Y+=1),P.isDark(E+1,S)&&(Y+=1),P.isDark(E,S+1)&&(Y+=1),P.isDark(E+1,S+1)&&(Y+=1),Y!=0&&Y!=4||(I+=3)}for(E=0;E<O;E+=1)for(S=0;S<O-6;S+=1)P.isDark(E,S)&&!P.isDark(E,S+1)&&P.isDark(E,S+2)&&P.isDark(E,S+3)&&P.isDark(E,S+4)&&!P.isDark(E,S+5)&&P.isDark(E,S+6)&&(I+=40);for(S=0;S<O;S+=1)for(E=0;E<O-6;E+=1)P.isDark(E,S)&&!P.isDark(E+1,S)&&P.isDark(E+2,S)&&P.isDark(E+3,S)&&P.isDark(E+4,S)&&!P.isDark(E+5,S)&&P.isDark(E+6,S)&&(I+=40);var H=0;for(S=0;S<O;S+=1)for(E=0;E<O;E+=1)P.isDark(E,S)&&(H+=1);return I+Math.abs(100*H/O/O-50)/5*10},v),b=function(){for(var P=new Array(256),O=new Array(256),I=0;I<8;I+=1)P[I]=1<<I;for(I=8;I<256;I+=1)P[I]=P[I-4]^P[I-5]^P[I-6]^P[I-8];for(I=0;I<255;I+=1)O[P[I]]=I;return{glog:function(E){if(E<1)throw"glog("+E+")";return O[E]},gexp:function(E){for(;E<0;)E+=255;for(;E>=256;)E-=255;return P[E]}}}();function w(P,O){if(P.length===void 0)throw P.length+"/"+O;var I=function(){for(var S=0;S<P.length&&P[S]==0;)S+=1;for(var M=new Array(P.length-S+O),D=0;D<P.length-S;D+=1)M[D]=P[D+S];return M}(),E={getAt:function(S){return I[S]},getLength:function(){return I.length},multiply:function(S){for(var M=new Array(E.getLength()+S.getLength()-1),D=0;D<E.getLength();D+=1)for(var N=0;N<S.getLength();N+=1)M[D+N]^=b.gexp(b.glog(E.getAt(D))+b.glog(S.getAt(N)));return w(M,0)},mod:function(S){if(E.getLength()-S.getLength()<0)return E;for(var M=b.glog(E.getAt(0))-b.glog(S.getAt(0)),D=new Array(E.getLength()),N=0;N<E.getLength();N+=1)D[N]=E.getAt(N);for(N=0;N<S.getLength();N+=1)D[N]^=b.gexp(b.glog(S.getAt(N))+M);return w(D,0).mod(S)}};return E}var _=function(){var P=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],O=function(E,S){var M={};return M.totalCount=E,M.dataCount=S,M},I={getRSBlocks:function(E,S){var M=function(q,Z){switch(Z){case x.L:return P[4*(q-1)+0];case x.M:return P[4*(q-1)+1];case x.Q:return P[4*(q-1)+2];case x.H:return P[4*(q-1)+3];default:return}}(E,S);if(M===void 0)throw"bad rs block @ typeNumber:"+E+"/errorCorrectionLevel:"+S;for(var D=M.length/3,N=[],z=0;z<D;z+=1)for(var Y=M[3*z+0],H=M[3*z+1],K=M[3*z+2],J=0;J<Y;J+=1)N.push(O(H,K));return N}};return I}(),T=function(){var P=[],O=0,I={getBuffer:function(){return P},getAt:function(E){var S=Math.floor(E/8);return(P[S]>>>7-E%8&1)==1},put:function(E,S){for(var M=0;M<S;M+=1)I.putBit((E>>>S-M-1&1)==1)},getLengthInBits:function(){return O},putBit:function(E){var S=Math.floor(O/8);P.length<=S&&P.push(0),E&&(P[S]|=128>>>O%8),O+=1}};return I},j=function(P){var O=P,I={getMode:function(){return 1},getLength:function(M){return O.length},write:function(M){for(var D=O,N=0;N+2<D.length;)M.put(E(D.substring(N,N+3)),10),N+=3;N<D.length&&(D.length-N==1?M.put(E(D.substring(N,N+1)),4):D.length-N==2&&M.put(E(D.substring(N,N+2)),7))}},E=function(M){for(var D=0,N=0;N<M.length;N+=1)D=10*D+S(M.charAt(N));return D},S=function(M){if("0"<=M&&M<="9")return M.charCodeAt(0)-48;throw"illegal char :"+M};return I},k=function(P){var O=P,I={getMode:function(){return 2},getLength:function(S){return O.length},write:function(S){for(var M=O,D=0;D+1<M.length;)S.put(45*E(M.charAt(D))+E(M.charAt(D+1)),11),D+=2;D<M.length&&S.put(E(M.charAt(D)),6)}},E=function(S){if("0"<=S&&S<="9")return S.charCodeAt(0)-48;if("A"<=S&&S<="Z")return S.charCodeAt(0)-65+10;switch(S){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+S}};return I},R=function(P){var O=d.stringToBytes(P);return{getMode:function(){return 4},getLength:function(I){return O.length},write:function(I){for(var E=0;E<O.length;E+=1)I.put(O[E],8)}}},A=function(P){var O=d.stringToBytesFuncs.SJIS;if(!O)throw"sjis not supported.";(function(){var S=O("");if(S.length!=2||(S[0]<<8|S[1])!=38726)throw"sjis not supported."})();var I=O(P),E={getMode:function(){return 8},getLength:function(S){return~~(I.length/2)},write:function(S){for(var M=I,D=0;D+1<M.length;){var N=(255&M[D])<<8|255&M[D+1];if(33088<=N&&N<=40956)N-=33088;else{if(!(57408<=N&&N<=60351))throw"illegal char at "+(D+1)+"/"+N;N-=49472}N=192*(N>>>8&255)+(255&N),S.put(N,13),D+=2}if(D<M.length)throw"illegal char at "+(D+1)}};return E},$=function(){var P=[],O={writeByte:function(I){P.push(255&I)},writeShort:function(I){O.writeByte(I),O.writeByte(I>>>8)},writeBytes:function(I,E,S){E=E||0,S=S||I.length;for(var M=0;M<S;M+=1)O.writeByte(I[M+E])},writeString:function(I){for(var E=0;E<I.length;E+=1)O.writeByte(I.charCodeAt(E))},toByteArray:function(){return P},toString:function(){var I="";I+="[";for(var E=0;E<P.length;E+=1)E>0&&(I+=","),I+=P[E];return I+"]"}};return O},F=function(P){var O=P,I=0,E=0,S=0,M={read:function(){for(;S<8;){if(I>=O.length){if(S==0)return-1;throw"unexpected end of file./"+S}var N=O.charAt(I);if(I+=1,N=="=")return S=0,-1;N.match(/^\s$/)||(E=E<<6|D(N.charCodeAt(0)),S+=6)}var z=E>>>S-8&255;return S-=8,z}},D=function(N){if(65<=N&&N<=90)return N-65;if(97<=N&&N<=122)return N-97+26;if(48<=N&&N<=57)return N-48+52;if(N==43)return 62;if(N==47)return 63;throw"c:"+N};return M},L=function(P,O,I){for(var E=function(H,K){var J=H,q=K,Z=new Array(H*K),oe={setPixel:function(G,te,U){Z[te*J+G]=U},write:function(G){G.writeString("GIF87a"),G.writeShort(J),G.writeShort(q),G.writeByte(128),G.writeByte(0),G.writeByte(0),G.writeByte(0),G.writeByte(0),G.writeByte(0),G.writeByte(255),G.writeByte(255),G.writeByte(255),G.writeString(","),G.writeShort(0),G.writeShort(0),G.writeShort(J),G.writeShort(q),G.writeByte(0);var te=ie(2);G.writeByte(2);for(var U=0;te.length-U>255;)G.writeByte(255),G.writeBytes(te,U,255),U+=255;G.writeByte(te.length-U),G.writeBytes(te,U,te.length-U),G.writeByte(0),G.writeString(";")}},ie=function(G){for(var te=1<<G,U=1+(1<<G),ee=G+1,ne=re(),le=0;le<te;le+=1)ne.add(String.fromCharCode(le));ne.add(String.fromCharCode(te)),ne.add(String.fromCharCode(U));var fe,ue,ve,Se=$(),De=(fe=Se,ue=0,ve=0,{write:function(ke,me){if(ke>>>me)throw"length over";for(;ue+me>=8;)fe.writeByte(255&(ke<<ue|ve)),me-=8-ue,ke>>>=8-ue,ve=0,ue=0;ve|=ke<<ue,ue+=me},flush:function(){ue>0&&fe.writeByte(ve)}});De.write(te,ee);var Fe=0,Me=String.fromCharCode(Z[Fe]);for(Fe+=1;Fe<Z.length;){var Ce=String.fromCharCode(Z[Fe]);Fe+=1,ne.contains(Me+Ce)?Me+=Ce:(De.write(ne.indexOf(Me),ee),ne.size()<4095&&(ne.size()==1<<ee&&(ee+=1),ne.add(Me+Ce)),Me=Ce)}return De.write(ne.indexOf(Me),ee),De.write(U,ee),De.flush(),Se.toByteArray()},re=function(){var G={},te=0,U={add:function(ee){if(U.contains(ee))throw"dup key:"+ee;G[ee]=te,te+=1},size:function(){return te},indexOf:function(ee){return G[ee]},contains:function(ee){return G[ee]!==void 0}};return U};return oe}(P,O),S=0;S<O;S+=1)for(var M=0;M<P;M+=1)E.setPixel(M,S,I(M,S));var D=$();E.write(D);for(var N=function(){var H=0,K=0,J=0,q="",Z={},oe=function(re){q+=String.fromCharCode(ie(63&re))},ie=function(re){if(!(re<0)){if(re<26)return 65+re;if(re<52)return re-26+97;if(re<62)return re-52+48;if(re==62)return 43;if(re==63)return 47}throw"n:"+re};return Z.writeByte=function(re){for(H=H<<8|255&re,K+=8,J+=1;K>=6;)oe(H>>>K-6),K-=6},Z.flush=function(){if(K>0&&(oe(H<<6-K),H=0,K=0),J%3!=0)for(var re=3-J%3,G=0;G<re;G+=1)q+="="},Z.toString=function(){return q},Z}(),z=D.toByteArray(),Y=0;Y<z.length;Y+=1)N.writeByte(z[Y]);return N.flush(),"data:image/gif;base64,"+N};return d}();u.stringToBytesFuncs["UTF-8"]=function(d){return function(h){for(var p=[],g=0;g<h.length;g++){var v=h.charCodeAt(g);v<128?p.push(v):v<2048?p.push(192|v>>6,128|63&v):v<55296||v>=57344?p.push(224|v>>12,128|v>>6&63,128|63&v):(g++,v=65536+((1023&v)<<10|1023&h.charCodeAt(g)),p.push(240|v>>18,128|v>>12&63,128|v>>6&63,128|63&v))}return p}(d)},(c=typeof(l=function(){return u})=="function"?l.apply(s,[]):l)===void 0||(a.exports=c)}},n={};function o(a){var s=n[a];if(s!==void 0)return s.exports;var l=n[a]={exports:{}};return r[a](l,l.exports,o),l.exports}o.n=a=>{var s=a&&a.__esModule?()=>a.default:()=>a;return o.d(s,{a:s}),s},o.d=(a,s)=>{for(var l in s)o.o(s,l)&&!o.o(a,l)&&Object.defineProperty(a,l,{enumerable:!0,get:s[l]})},o.o=(a,s)=>Object.prototype.hasOwnProperty.call(a,s);var i={};return(()=>{o.d(i,{default:()=>O});const a=I=>!!I&&typeof I=="object"&&!Array.isArray(I);function s(I,...E){if(!E.length)return I;const S=E.shift();return S!==void 0&&a(I)&&a(S)?(I=Object.assign({},I),Object.keys(S).forEach(M=>{const D=I[M],N=S[M];Array.isArray(D)&&Array.isArray(N)?I[M]=N:a(D)&&a(N)?I[M]=s(Object.assign({},D),N):I[M]=N}),s(I,...E)):I}function l(I,E){const S=document.createElement("a");S.download=E,S.href=I,document.body.appendChild(S),S.click(),document.body.removeChild(S)}const c={L:.07,M:.15,Q:.25,H:.3};class u{constructor({svg:E,type:S,window:M}){this._svg=E,this._type=S,this._window=M}draw(E,S,M,D){let N;switch(this._type){case"dots":N=this._drawDot;break;case"classy":N=this._drawClassy;break;case"classy-rounded":N=this._drawClassyRounded;break;case"rounded":N=this._drawRounded;break;case"extra-rounded":N=this._drawExtraRounded;break;default:N=this._drawSquare}N.call(this,{x:E,y:S,size:M,getNeighbor:D})}_rotateFigure({x:E,y:S,size:M,rotation:D=0,draw:N}){var z;const Y=E+M/2,H=S+M/2;N(),(z=this._element)===null||z===void 0||z.setAttribute("transform",`rotate(${180*D/Math.PI},${Y},${H})`)}_basicDot(E){const{size:S,x:M,y:D}=E;this._rotateFigure(Object.assign(Object.assign({},E),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(M+S/2)),this._element.setAttribute("cy",String(D+S/2)),this._element.setAttribute("r",String(S/2))}}))}_basicSquare(E){const{size:S,x:M,y:D}=E;this._rotateFigure(Object.assign(Object.assign({},E),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(M)),this._element.setAttribute("y",String(D)),this._element.setAttribute("width",String(S)),this._element.setAttribute("height",String(S))}}))}_basicSideRounded(E){const{size:S,x:M,y:D}=E;this._rotateFigure(Object.assign(Object.assign({},E),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${M} ${D}v ${S}h `+S/2+`a ${S/2} ${S/2}, 0, 0, 0, 0 ${-S}`)}}))}_basicCornerRounded(E){const{size:S,x:M,y:D}=E;this._rotateFigure(Object.assign(Object.assign({},E),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${M} ${D}v ${S}h ${S}v `+-S/2+`a ${S/2} ${S/2}, 0, 0, 0, ${-S/2} ${-S/2}`)}}))}_basicCornerExtraRounded(E){const{size:S,x:M,y:D}=E;this._rotateFigure(Object.assign(Object.assign({},E),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${M} ${D}v ${S}h ${S}a ${S} ${S}, 0, 0, 0, ${-S} ${-S}`)}}))}_basicCornersRounded(E){const{size:S,x:M,y:D}=E;this._rotateFigure(Object.assign(Object.assign({},E),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${M} ${D}v `+S/2+`a ${S/2} ${S/2}, 0, 0, 0, ${S/2} ${S/2}h `+S/2+"v "+-S/2+`a ${S/2} ${S/2}, 0, 0, 0, ${-S/2} ${-S/2}`)}}))}_drawDot({x:E,y:S,size:M}){this._basicDot({x:E,y:S,size:M,rotation:0})}_drawSquare({x:E,y:S,size:M}){this._basicSquare({x:E,y:S,size:M,rotation:0})}_drawRounded({x:E,y:S,size:M,getNeighbor:D}){const N=D?+D(-1,0):0,z=D?+D(1,0):0,Y=D?+D(0,-1):0,H=D?+D(0,1):0,K=N+z+Y+H;if(K!==0)if(K>2||N&&z||Y&&H)this._basicSquare({x:E,y:S,size:M,rotation:0});else{if(K===2){let J=0;return N&&Y?J=Math.PI/2:Y&&z?J=Math.PI:z&&H&&(J=-Math.PI/2),void this._basicCornerRounded({x:E,y:S,size:M,rotation:J})}if(K===1){let J=0;return Y?J=Math.PI/2:z?J=Math.PI:H&&(J=-Math.PI/2),void this._basicSideRounded({x:E,y:S,size:M,rotation:J})}}else this._basicDot({x:E,y:S,size:M,rotation:0})}_drawExtraRounded({x:E,y:S,size:M,getNeighbor:D}){const N=D?+D(-1,0):0,z=D?+D(1,0):0,Y=D?+D(0,-1):0,H=D?+D(0,1):0,K=N+z+Y+H;if(K!==0)if(K>2||N&&z||Y&&H)this._basicSquare({x:E,y:S,size:M,rotation:0});else{if(K===2){let J=0;return N&&Y?J=Math.PI/2:Y&&z?J=Math.PI:z&&H&&(J=-Math.PI/2),void this._basicCornerExtraRounded({x:E,y:S,size:M,rotation:J})}if(K===1){let J=0;return Y?J=Math.PI/2:z?J=Math.PI:H&&(J=-Math.PI/2),void this._basicSideRounded({x:E,y:S,size:M,rotation:J})}}else this._basicDot({x:E,y:S,size:M,rotation:0})}_drawClassy({x:E,y:S,size:M,getNeighbor:D}){const N=D?+D(-1,0):0,z=D?+D(1,0):0,Y=D?+D(0,-1):0,H=D?+D(0,1):0;N+z+Y+H!==0?N||Y?z||H?this._basicSquare({x:E,y:S,size:M,rotation:0}):this._basicCornerRounded({x:E,y:S,size:M,rotation:Math.PI/2}):this._basicCornerRounded({x:E,y:S,size:M,rotation:-Math.PI/2}):this._basicCornersRounded({x:E,y:S,size:M,rotation:Math.PI/2})}_drawClassyRounded({x:E,y:S,size:M,getNeighbor:D}){const N=D?+D(-1,0):0,z=D?+D(1,0):0,Y=D?+D(0,-1):0,H=D?+D(0,1):0;N+z+Y+H!==0?N||Y?z||H?this._basicSquare({x:E,y:S,size:M,rotation:0}):this._basicCornerExtraRounded({x:E,y:S,size:M,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:E,y:S,size:M,rotation:-Math.PI/2}):this._basicCornersRounded({x:E,y:S,size:M,rotation:Math.PI/2})}}const d={dot:"dot",square:"square",extraRounded:"extra-rounded"},h=Object.values(d);class p{constructor({svg:E,type:S,window:M}){this._svg=E,this._type=S,this._window=M}draw(E,S,M,D){let N;switch(this._type){case d.square:N=this._drawSquare;break;case d.extraRounded:N=this._drawExtraRounded;break;default:N=this._drawDot}N.call(this,{x:E,y:S,size:M,rotation:D})}_rotateFigure({x:E,y:S,size:M,rotation:D=0,draw:N}){var z;const Y=E+M/2,H=S+M/2;N(),(z=this._element)===null||z===void 0||z.setAttribute("transform",`rotate(${180*D/Math.PI},${Y},${H})`)}_basicDot(E){const{size:S,x:M,y:D}=E,N=S/7;this._rotateFigure(Object.assign(Object.assign({},E),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${M+S/2} ${D}a ${S/2} ${S/2} 0 1 0 0.1 0zm 0 ${N}a ${S/2-N} ${S/2-N} 0 1 1 -0.1 0Z`)}}))}_basicSquare(E){const{size:S,x:M,y:D}=E,N=S/7;this._rotateFigure(Object.assign(Object.assign({},E),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${M} ${D}v ${S}h ${S}v `+-S+`zM ${M+N} ${D+N}h `+(S-2*N)+"v "+(S-2*N)+"h "+(2*N-S)+"z")}}))}_basicExtraRounded(E){const{size:S,x:M,y:D}=E,N=S/7;this._rotateFigure(Object.assign(Object.assign({},E),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${M} ${D+2.5*N}v `+2*N+`a ${2.5*N} ${2.5*N}, 0, 0, 0, ${2.5*N} ${2.5*N}h `+2*N+`a ${2.5*N} ${2.5*N}, 0, 0, 0, ${2.5*N} ${2.5*-N}v `+-2*N+`a ${2.5*N} ${2.5*N}, 0, 0, 0, ${2.5*-N} ${2.5*-N}h `+-2*N+`a ${2.5*N} ${2.5*N}, 0, 0, 0, ${2.5*-N} ${2.5*N}M ${M+2.5*N} ${D+N}h `+2*N+`a ${1.5*N} ${1.5*N}, 0, 0, 1, ${1.5*N} ${1.5*N}v `+2*N+`a ${1.5*N} ${1.5*N}, 0, 0, 1, ${1.5*-N} ${1.5*N}h `+-2*N+`a ${1.5*N} ${1.5*N}, 0, 0, 1, ${1.5*-N} ${1.5*-N}v `+-2*N+`a ${1.5*N} ${1.5*N}, 0, 0, 1, ${1.5*N} ${1.5*-N}`)}}))}_drawDot({x:E,y:S,size:M,rotation:D}){this._basicDot({x:E,y:S,size:M,rotation:D})}_drawSquare({x:E,y:S,size:M,rotation:D}){this._basicSquare({x:E,y:S,size:M,rotation:D})}_drawExtraRounded({x:E,y:S,size:M,rotation:D}){this._basicExtraRounded({x:E,y:S,size:M,rotation:D})}}const g={dot:"dot",square:"square"},v=Object.values(g);class m{constructor({svg:E,type:S,window:M}){this._svg=E,this._type=S,this._window=M}draw(E,S,M,D){let N;N=this._type===g.square?this._drawSquare:this._drawDot,N.call(this,{x:E,y:S,size:M,rotation:D})}_rotateFigure({x:E,y:S,size:M,rotation:D=0,draw:N}){var z;const Y=E+M/2,H=S+M/2;N(),(z=this._element)===null||z===void 0||z.setAttribute("transform",`rotate(${180*D/Math.PI},${Y},${H})`)}_basicDot(E){const{size:S,x:M,y:D}=E;this._rotateFigure(Object.assign(Object.assign({},E),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(M+S/2)),this._element.setAttribute("cy",String(D+S/2)),this._element.setAttribute("r",String(S/2))}}))}_basicSquare(E){const{size:S,x:M,y:D}=E;this._rotateFigure(Object.assign(Object.assign({},E),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(M)),this._element.setAttribute("y",String(D)),this._element.setAttribute("width",String(S)),this._element.setAttribute("height",String(S))}}))}_drawDot({x:E,y:S,size:M,rotation:D}){this._basicDot({x:E,y:S,size:M,rotation:D})}_drawSquare({x:E,y:S,size:M,rotation:D}){this._basicSquare({x:E,y:S,size:M,rotation:D})}}const x="circle",y=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],b=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class w{constructor(E,S){this._roundSize=M=>this._options.dotsOptions.roundSize?Math.floor(M):M,this._window=S,this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(E.width)),this._element.setAttribute("height",String(E.height)),this._element.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),E.dotsOptions.roundSize||this._element.setAttribute("shape-rendering","crispEdges"),this._element.setAttribute("viewBox",`0 0 ${E.width} ${E.height}`),this._defs=this._window.document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._imageUri=E.image,this._instanceId=w.instanceCount++,this._options=E}get width(){return this._options.width}get height(){return this._options.height}getElement(){return this._element}async drawQR(E){const S=E.getModuleCount(),M=Math.min(this._options.width,this._options.height)-2*this._options.margin,D=this._options.shape===x?M/Math.sqrt(2):M,N=this._roundSize(D/S);let z={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=E,this._options.image){if(await this.loadImage(),!this._image)return;const{imageOptions:Y,qrOptions:H}=this._options,K=Y.imageSize*c[H.errorCorrectionLevel],J=Math.floor(K*S*S);z=function({originalHeight:q,originalWidth:Z,maxHiddenDots:oe,maxHiddenAxisDots:ie,dotSize:re}){const G={x:0,y:0},te={x:0,y:0};if(q<=0||Z<=0||oe<=0||re<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};const U=q/Z;return G.x=Math.floor(Math.sqrt(oe/U)),G.x<=0&&(G.x=1),ie&&ie<G.x&&(G.x=ie),G.x%2==0&&G.x--,te.x=G.x*re,G.y=1+2*Math.ceil((G.x*U-1)/2),te.y=Math.round(te.x*U),(G.y*G.x>oe||ie&&ie<G.y)&&(ie&&ie<G.y?(G.y=ie,G.y%2==0&&G.x--):G.y-=2,te.y=G.y*re,G.x=1+2*Math.ceil((G.y/U-1)/2),te.x=Math.round(te.y/U)),{height:te.y,width:te.x,hideYDots:G.y,hideXDots:G.x}}({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:J,maxHiddenAxisDots:S-14,dotSize:N})}this.drawBackground(),this.drawDots((Y,H)=>{var K,J,q,Z,oe,ie;return!(this._options.imageOptions.hideBackgroundDots&&Y>=(S-z.hideYDots)/2&&Y<(S+z.hideYDots)/2&&H>=(S-z.hideXDots)/2&&H<(S+z.hideXDots)/2||!((K=y[Y])===null||K===void 0)&&K[H]||!((J=y[Y-S+7])===null||J===void 0)&&J[H]||!((q=y[Y])===null||q===void 0)&&q[H-S+7]||!((Z=b[Y])===null||Z===void 0)&&Z[H]||!((oe=b[Y-S+7])===null||oe===void 0)&&oe[H]||!((ie=b[Y])===null||ie===void 0)&&ie[H-S+7])}),this.drawCorners(),this._options.image&&await this.drawImage({width:z.width,height:z.height,count:S,dotSize:N})}drawBackground(){var E,S,M;const D=this._element,N=this._options;if(D){const z=(E=N.backgroundOptions)===null||E===void 0?void 0:E.gradient,Y=(S=N.backgroundOptions)===null||S===void 0?void 0:S.color;let H=N.height,K=N.width;if(z||Y){const J=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id",`clip-path-background-color-${this._instanceId}`),this._defs.appendChild(this._backgroundClipPath),!((M=N.backgroundOptions)===null||M===void 0)&&M.round&&(H=K=Math.min(N.width,N.height),J.setAttribute("rx",String(H/2*N.backgroundOptions.round))),J.setAttribute("x",String(this._roundSize((N.width-K)/2))),J.setAttribute("y",String(this._roundSize((N.height-H)/2))),J.setAttribute("width",String(K)),J.setAttribute("height",String(H)),this._backgroundClipPath.appendChild(J),this._createColor({options:z,color:Y,additionalRotation:0,x:0,y:0,height:N.height,width:N.width,name:`background-color-${this._instanceId}`})}}}drawDots(E){var S,M;if(!this._qr)throw"QR code is not defined";const D=this._options,N=this._qr.getModuleCount();if(N>D.width||N>D.height)throw"The canvas is too small.";const z=Math.min(D.width,D.height)-2*D.margin,Y=D.shape===x?z/Math.sqrt(2):z,H=this._roundSize(Y/N),K=this._roundSize((D.width-N*H)/2),J=this._roundSize((D.height-N*H)/2),q=new u({svg:this._element,type:D.dotsOptions.type,window:this._window});this._dotsClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id",`clip-path-dot-color-${this._instanceId}`),this._defs.appendChild(this._dotsClipPath),this._createColor({options:(S=D.dotsOptions)===null||S===void 0?void 0:S.gradient,color:D.dotsOptions.color,additionalRotation:0,x:0,y:0,height:D.height,width:D.width,name:`dot-color-${this._instanceId}`});for(let Z=0;Z<N;Z++)for(let oe=0;oe<N;oe++)E&&!E(Z,oe)||!((M=this._qr)===null||M===void 0)&&M.isDark(Z,oe)&&(q.draw(K+oe*H,J+Z*H,H,(ie,re)=>!(oe+ie<0||Z+re<0||oe+ie>=N||Z+re>=N)&&!(E&&!E(Z+re,oe+ie))&&!!this._qr&&this._qr.isDark(Z+re,oe+ie)),q._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(q._element));if(D.shape===x){const Z=this._roundSize((z/H-N)/2),oe=N+2*Z,ie=K-Z*H,re=J-Z*H,G=[],te=this._roundSize(oe/2);for(let U=0;U<oe;U++){G[U]=[];for(let ee=0;ee<oe;ee++)U>=Z-1&&U<=oe-Z&&ee>=Z-1&&ee<=oe-Z||Math.sqrt((U-te)*(U-te)+(ee-te)*(ee-te))>te?G[U][ee]=0:G[U][ee]=this._qr.isDark(ee-2*Z<0?ee:ee>=N?ee-2*Z:ee-Z,U-2*Z<0?U:U>=N?U-2*Z:U-Z)?1:0}for(let U=0;U<oe;U++)for(let ee=0;ee<oe;ee++)G[U][ee]&&(q.draw(ie+ee*H,re+U*H,H,(ne,le)=>{var fe;return!!(!((fe=G[U+le])===null||fe===void 0)&&fe[ee+ne])}),q._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(q._element))}}drawCorners(){if(!this._qr)throw"QR code is not defined";const E=this._element,S=this._options;if(!E)throw"Element code is not defined";const M=this._qr.getModuleCount(),D=Math.min(S.width,S.height)-2*S.margin,N=S.shape===x?D/Math.sqrt(2):D,z=this._roundSize(N/M),Y=7*z,H=3*z,K=this._roundSize((S.width-M*z)/2),J=this._roundSize((S.height-M*z)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(([q,Z,oe])=>{var ie,re,G,te,U,ee,ne,le,fe,ue,ve,Se,De,Fe;const Me=K+q*z*(M-7),Ce=J+Z*z*(M-7);let ke=this._dotsClipPath,me=this._dotsClipPath;if((!((ie=S.cornersSquareOptions)===null||ie===void 0)&&ie.gradient||!((re=S.cornersSquareOptions)===null||re===void 0)&&re.color)&&(ke=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),ke.setAttribute("id",`clip-path-corners-square-color-${q}-${Z}-${this._instanceId}`),this._defs.appendChild(ke),this._cornersSquareClipPath=this._cornersDotClipPath=me=ke,this._createColor({options:(G=S.cornersSquareOptions)===null||G===void 0?void 0:G.gradient,color:(te=S.cornersSquareOptions)===null||te===void 0?void 0:te.color,additionalRotation:oe,x:Me,y:Ce,height:Y,width:Y,name:`corners-square-color-${q}-${Z}-${this._instanceId}`})),((U=S.cornersSquareOptions)===null||U===void 0?void 0:U.type)&&h.includes(S.cornersSquareOptions.type)){const Ge=new p({svg:this._element,type:S.cornersSquareOptions.type,window:this._window});Ge.draw(Me,Ce,Y,oe),Ge._element&&ke&&ke.appendChild(Ge._element)}else{const Ge=new u({svg:this._element,type:((ee=S.cornersSquareOptions)===null||ee===void 0?void 0:ee.type)||S.dotsOptions.type,window:this._window});for(let Qe=0;Qe<y.length;Qe++)for(let we=0;we<y[Qe].length;we++)!((ne=y[Qe])===null||ne===void 0)&&ne[we]&&(Ge.draw(Me+we*z,Ce+Qe*z,z,(it,at)=>{var gt;return!!(!((gt=y[Qe+at])===null||gt===void 0)&&gt[we+it])}),Ge._element&&ke&&ke.appendChild(Ge._element))}if((!((le=S.cornersDotOptions)===null||le===void 0)&&le.gradient||!((fe=S.cornersDotOptions)===null||fe===void 0)&&fe.color)&&(me=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),me.setAttribute("id",`clip-path-corners-dot-color-${q}-${Z}-${this._instanceId}`),this._defs.appendChild(me),this._cornersDotClipPath=me,this._createColor({options:(ue=S.cornersDotOptions)===null||ue===void 0?void 0:ue.gradient,color:(ve=S.cornersDotOptions)===null||ve===void 0?void 0:ve.color,additionalRotation:oe,x:Me+2*z,y:Ce+2*z,height:H,width:H,name:`corners-dot-color-${q}-${Z}-${this._instanceId}`})),((Se=S.cornersDotOptions)===null||Se===void 0?void 0:Se.type)&&v.includes(S.cornersDotOptions.type)){const Ge=new m({svg:this._element,type:S.cornersDotOptions.type,window:this._window});Ge.draw(Me+2*z,Ce+2*z,H,oe),Ge._element&&me&&me.appendChild(Ge._element)}else{const Ge=new u({svg:this._element,type:((De=S.cornersDotOptions)===null||De===void 0?void 0:De.type)||S.dotsOptions.type,window:this._window});for(let Qe=0;Qe<b.length;Qe++)for(let we=0;we<b[Qe].length;we++)!((Fe=b[Qe])===null||Fe===void 0)&&Fe[we]&&(Ge.draw(Me+we*z,Ce+Qe*z,z,(it,at)=>{var gt;return!!(!((gt=b[Qe+at])===null||gt===void 0)&&gt[we+it])}),Ge._element&&me&&me.appendChild(Ge._element))}})}loadImage(){return new Promise((E,S)=>{var M;const D=this._options;if(!D.image)return S("Image is not defined");if(!((M=D.nodeCanvas)===null||M===void 0)&&M.loadImage)D.nodeCanvas.loadImage(D.image).then(N=>{var z,Y;if(this._image=N,this._options.imageOptions.saveAsBlob){const H=(z=D.nodeCanvas)===null||z===void 0?void 0:z.createCanvas(this._image.width,this._image.height);(Y=H?.getContext("2d"))===null||Y===void 0||Y.drawImage(N,0,0),this._imageUri=H?.toDataURL()}E()}).catch(S);else{const N=new this._window.Image;typeof D.imageOptions.crossOrigin=="string"&&(N.crossOrigin=D.imageOptions.crossOrigin),this._image=N,N.onload=async()=>{this._options.imageOptions.saveAsBlob&&(this._imageUri=await async function(z,Y){return new Promise(H=>{const K=new Y.XMLHttpRequest;K.onload=function(){const J=new Y.FileReader;J.onloadend=function(){H(J.result)},J.readAsDataURL(K.response)},K.open("GET",z),K.responseType="blob",K.send()})}(D.image||"",this._window)),E()},N.src=D.image}})}async drawImage({width:E,height:S,count:M,dotSize:D}){const N=this._options,z=this._roundSize((N.width-M*D)/2),Y=this._roundSize((N.height-M*D)/2),H=z+this._roundSize(N.imageOptions.margin+(M*D-E)/2),K=Y+this._roundSize(N.imageOptions.margin+(M*D-S)/2),J=E-2*N.imageOptions.margin,q=S-2*N.imageOptions.margin,Z=this._window.document.createElementNS("http://www.w3.org/2000/svg","image");Z.setAttribute("href",this._imageUri||""),Z.setAttribute("xlink:href",this._imageUri||""),Z.setAttribute("x",String(H)),Z.setAttribute("y",String(K)),Z.setAttribute("width",`${J}px`),Z.setAttribute("height",`${q}px`),this._element.appendChild(Z)}_createColor({options:E,color:S,additionalRotation:M,x:D,y:N,height:z,width:Y,name:H}){const K=Y>z?Y:z,J=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");if(J.setAttribute("x",String(D)),J.setAttribute("y",String(N)),J.setAttribute("height",String(z)),J.setAttribute("width",String(Y)),J.setAttribute("clip-path",`url('#clip-path-${H}')`),E){let q;if(E.type==="radial")q=this._window.document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),q.setAttribute("id",H),q.setAttribute("gradientUnits","userSpaceOnUse"),q.setAttribute("fx",String(D+Y/2)),q.setAttribute("fy",String(N+z/2)),q.setAttribute("cx",String(D+Y/2)),q.setAttribute("cy",String(N+z/2)),q.setAttribute("r",String(K/2));else{const Z=((E.rotation||0)+M)%(2*Math.PI),oe=(Z+2*Math.PI)%(2*Math.PI);let ie=D+Y/2,re=N+z/2,G=D+Y/2,te=N+z/2;oe>=0&&oe<=.25*Math.PI||oe>1.75*Math.PI&&oe<=2*Math.PI?(ie-=Y/2,re-=z/2*Math.tan(Z),G+=Y/2,te+=z/2*Math.tan(Z)):oe>.25*Math.PI&&oe<=.75*Math.PI?(re-=z/2,ie-=Y/2/Math.tan(Z),te+=z/2,G+=Y/2/Math.tan(Z)):oe>.75*Math.PI&&oe<=1.25*Math.PI?(ie+=Y/2,re+=z/2*Math.tan(Z),G-=Y/2,te-=z/2*Math.tan(Z)):oe>1.25*Math.PI&&oe<=1.75*Math.PI&&(re+=z/2,ie+=Y/2/Math.tan(Z),te-=z/2,G-=Y/2/Math.tan(Z)),q=this._window.document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),q.setAttribute("id",H),q.setAttribute("gradientUnits","userSpaceOnUse"),q.setAttribute("x1",String(Math.round(ie))),q.setAttribute("y1",String(Math.round(re))),q.setAttribute("x2",String(Math.round(G))),q.setAttribute("y2",String(Math.round(te)))}E.colorStops.forEach(({offset:Z,color:oe})=>{const ie=this._window.document.createElementNS("http://www.w3.org/2000/svg","stop");ie.setAttribute("offset",100*Z+"%"),ie.setAttribute("stop-color",oe),q.appendChild(ie)}),J.setAttribute("fill",`url('#${H}')`),this._defs.appendChild(q)}else S&&J.setAttribute("fill",S);this._element.appendChild(J)}}w.instanceCount=0;const _=w,T="canvas",j={};for(let I=0;I<=40;I++)j[I]=I;const k={type:T,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:j[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{saveAsBlob:!0,hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000",roundSize:!0},backgroundOptions:{round:0,color:"#fff"}};function R(I){const E=Object.assign({},I);if(!E.colorStops||!E.colorStops.length)throw"Field 'colorStops' is required in gradient";return E.rotation?E.rotation=Number(E.rotation):E.rotation=0,E.colorStops=E.colorStops.map(S=>Object.assign(Object.assign({},S),{offset:Number(S.offset)})),E}function A(I){const E=Object.assign({},I);return E.width=Number(E.width),E.height=Number(E.height),E.margin=Number(E.margin),E.imageOptions=Object.assign(Object.assign({},E.imageOptions),{hideBackgroundDots:!!E.imageOptions.hideBackgroundDots,imageSize:Number(E.imageOptions.imageSize),margin:Number(E.imageOptions.margin)}),E.margin>Math.min(E.width,E.height)&&(E.margin=Math.min(E.width,E.height)),E.dotsOptions=Object.assign({},E.dotsOptions),E.dotsOptions.gradient&&(E.dotsOptions.gradient=R(E.dotsOptions.gradient)),E.cornersSquareOptions&&(E.cornersSquareOptions=Object.assign({},E.cornersSquareOptions),E.cornersSquareOptions.gradient&&(E.cornersSquareOptions.gradient=R(E.cornersSquareOptions.gradient))),E.cornersDotOptions&&(E.cornersDotOptions=Object.assign({},E.cornersDotOptions),E.cornersDotOptions.gradient&&(E.cornersDotOptions.gradient=R(E.cornersDotOptions.gradient))),E.backgroundOptions&&(E.backgroundOptions=Object.assign({},E.backgroundOptions),E.backgroundOptions.gradient&&(E.backgroundOptions.gradient=R(E.backgroundOptions.gradient))),E}var $=o(873),F=o.n($);function L(I){if(!I)throw new Error("Extension must be defined");I[0]==="."&&(I=I.substring(1));const E={bmp:"image/bmp",gif:"image/gif",ico:"image/vnd.microsoft.icon",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",webp:"image/webp",pdf:"application/pdf"}[I.toLowerCase()];if(!E)throw new Error(`Extension "${I}" is not supported`);return E}class P{constructor(E){E?.jsdom?this._window=new E.jsdom("",{resources:"usable"}).window:this._window=window,this._options=E?A(s(k,E)):k,this.update()}static _clearContainer(E){E&&(E.innerHTML="")}_setupSvg(){if(!this._qr)return;const E=new _(this._options,this._window);this._svg=E.getElement(),this._svgDrawingPromise=E.drawQR(this._qr).then(()=>{var S;this._svg&&((S=this._extension)===null||S===void 0||S.call(this,E.getElement(),this._options))})}_setupCanvas(){var E,S;this._qr&&(!((E=this._options.nodeCanvas)===null||E===void 0)&&E.createCanvas?(this._nodeCanvas=this._options.nodeCanvas.createCanvas(this._options.width,this._options.height),this._nodeCanvas.width=this._options.width,this._nodeCanvas.height=this._options.height):(this._domCanvas=document.createElement("canvas"),this._domCanvas.width=this._options.width,this._domCanvas.height=this._options.height),this._setupSvg(),this._canvasDrawingPromise=(S=this._svgDrawingPromise)===null||S===void 0?void 0:S.then(()=>{var M;if(!this._svg)return;const D=this._svg,N=new this._window.XMLSerializer().serializeToString(D),z=btoa(N),Y=`data:${L("svg")};base64,${z}`;if(!((M=this._options.nodeCanvas)===null||M===void 0)&&M.loadImage)return this._options.nodeCanvas.loadImage(Y).then(H=>{var K,J;H.width=this._options.width,H.height=this._options.height,(J=(K=this._nodeCanvas)===null||K===void 0?void 0:K.getContext("2d"))===null||J===void 0||J.drawImage(H,0,0)});{const H=new this._window.Image;return new Promise(K=>{H.onload=()=>{var J,q;(q=(J=this._domCanvas)===null||J===void 0?void 0:J.getContext("2d"))===null||q===void 0||q.drawImage(H,0,0),K()},H.src=Y})}}))}async _getElement(E="png"){if(!this._qr)throw"QR code is empty";return E.toLowerCase()==="svg"?(this._svg&&this._svgDrawingPromise||this._setupSvg(),await this._svgDrawingPromise,this._svg):((this._domCanvas||this._nodeCanvas)&&this._canvasDrawingPromise||this._setupCanvas(),await this._canvasDrawingPromise,this._domCanvas||this._nodeCanvas)}update(E){P._clearContainer(this._container),this._options=E?A(s(this._options,E)):this._options,this._options.data&&(this._qr=F()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(S){switch(!0){case/^[0-9]*$/.test(S):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(S):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===T?this._setupCanvas():this._setupSvg(),this.append(this._container))}append(E){if(E){if(typeof E.appendChild!="function")throw"Container should be a single DOM node";this._options.type===T?this._domCanvas&&E.appendChild(this._domCanvas):this._svg&&E.appendChild(this._svg),this._container=E}}applyExtension(E){if(!E)throw"Extension function should be defined.";this._extension=E,this.update()}deleteExtension(){this._extension=void 0,this.update()}async getRawData(E="png"){if(!this._qr)throw"QR code is empty";const S=await this._getElement(E),M=L(E);if(!S)return null;if(E.toLowerCase()==="svg"){const D=`<?xml version="1.0" standalone="no"?>\r
${new this._window.XMLSerializer().serializeToString(S)}`;return typeof Blob>"u"||this._options.jsdom?Buffer.from(D):new Blob([D],{type:M})}return new Promise(D=>{const N=S;if("toBuffer"in N)if(M==="image/png")D(N.toBuffer(M));else if(M==="image/jpeg")D(N.toBuffer(M));else{if(M!=="application/pdf")throw Error("Unsupported extension");D(N.toBuffer(M))}else"toBlob"in N&&N.toBlob(D,M,1)})}async download(E){if(!this._qr)throw"QR code is empty";if(typeof Blob>"u")throw"Cannot download in Node.js, call getRawData instead.";let S="png",M="qr";typeof E=="string"?(S=E,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):typeof E=="object"&&E!==null&&(E.name&&(M=E.name),E.extension&&(S=E.extension));const D=await this._getElement(S);if(D)if(S.toLowerCase()==="svg"){let N=new XMLSerializer().serializeToString(D);N=`<?xml version="1.0" standalone="no"?>\r
`+N,l(`data:${L(S)};charset=utf-8,${encodeURIComponent(N)}`,`${M}.svg`)}else l(D.toDataURL(L(S)),`${M}.${S}`)}}const O=P})(),i.default})())}(cc)),cc.exports}var F4=I4();const Pw=yc(F4),L4={id:"qrcode",title:"QR Code",icon:Mr,viewContainer:({context:e})=>{const[t,r]=X.useState(""),n=i=>{e.editor.add({type:"qrcode",props:{text:t,src:i}},{width:260,height:260})},o=async()=>{const a=await new Pw({data:t}).getRawData();if(a){const s=new FileReader;s.readAsDataURL(a),s.onloadend=()=>{n(s.result)}}};return f.jsxs("div",{className:"p-4",children:[f.jsx("h1",{className:"mb-4 font-extrabold text-gray-900 dark:text-white",children:f.jsx("span",{className:"bg-gradient-to-r from-cyan-200 to-emerald-600 bg-clip-text text-transparent",children:"QR Code"})}),f.jsx("div",{className:"mb-4",children:f.jsx("textarea",{rows:4,className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",onChange:i=>r(i.target.value),value:t,placeholder:"Enter text to generate QR code"})}),f.jsx("button",{onClick:o,className:"mb-2 me-2 w-full rounded-lg bg-[#2557D6] px-5 py-2 text-center text-sm font-medium text-white hover:bg-[#2557D6]/90 focus:outline-none focus:ring-4 focus:ring-[#2557D6]/50 dark:focus:ring-[#2557D6]/50",disabled:!t,children:"Generate"})]})},activate:()=>{},components:[{type:"qrcode",title:"QR Code",description:"QR Code",defaultProps:{},icon:Mr,main:e=>{const[t,r]=X.useState("https://veltix.app");return X.useEffect(()=>{new Pw({data:e.text}).getRawData().then(o=>{if(o){const i=new FileReader;i.readAsDataURL(o),i.onloadend=()=>{r(i.result)}}})},[e.text]),f.jsx("div",{children:t?f.jsx("img",{src:t,alt:"QR Code"}):f.jsx("div",{children:"Loading..."})})}}]};function Aw(){return f.jsx("div",{children:"Hello"})}const B4=ur()(Sc((e,t)=>({extensions:[L4],enabled:{},register:r=>{e(n=>({extensions:[...n.extensions,r]}))},unregister:r=>{e(n=>{const o=n.extensions.filter(a=>a.id!==r),i={...n.enabled};return delete i[r],{extensions:o,enabled:i}})},getExtension:r=>t().extensions.find(n=>n.id===r),enable:r=>{const n=t().extensions.find(o=>o.id===r);n&&n.activate&&n.activate(),e(o=>({enabled:{...o.enabled,[r]:!0}})),n&&(Gt.getState().registerExtensionViewContainer({id:n.id,title:n.title,icon:n.icon,viewContainer:n.viewContainer||Aw}),n.components&&n.components.forEach(o=>{qt.getState().register({type:o.type,title:o.title,description:o.description,icon:o.icon,main:o.main,hidden:!0})}),At.getState().setActivePanel(n.id))},disable:r=>{const n=t().extensions.find(o=>o.id===r);n&&n.deactivate&&n.deactivate(),e(o=>({enabled:{...o.enabled,[r]:!1}})),Gt.getState().unregisterViewContainer(r),n?.components&&n.components.forEach(o=>{qt.getState().unregister(o.type)})},isEnabled:r=>!!t().enabled[r],getEnabled:()=>t().extensions.filter(r=>t().enabled[r.id]),rehydration:()=>{const r=t();r.extensions.filter(o=>r.enabled[o.id]).forEach(o=>{o.activate&&o.activate(),Gt.getState().registerExtensionViewContainer({id:o.id,title:o.title,icon:o.icon,viewContainer:o.viewContainer||Aw}),o.components&&o.components.forEach(i=>{qt.getState().register({type:i.type,title:i.title,description:i.description,icon:i.icon,main:i.main})})})}}),{name:"veltix-extensions",storage:es(()=>localStorage),partialize:e=>({enabled:e.enabled}),onRehydrateStorage:()=>e=>{e&&e.rehydration()}})),z4=({icon:e})=>{let t=null;if(typeof e=="string"){const r=e.startsWith("data:")||e.startsWith("http");t=f.jsx("span",{className:"w-8 h-8 text-lg inline-flex items-center justify-center",children:r?f.jsx("img",{src:e,alt:"Chart icon",className:"w-10 h-10 object-contain"}):e})}else{const r=e;t=f.jsx("span",{className:"w-10 h-10 text-lg inline-flex items-center justify-center",children:f.jsx(r,{className:"w-8 h-8"})})}return f.jsx("div",{className:"flex justify-center items-center",children:t})},Ow=e=>{const{icon:t,title:r,onClick:n,removable:o}=e;return f.jsxs("div",{className:"flex flex-col items-center justify-center p-4 border rounded w-[90px] h-[90px] text-center text-sm flex-shrink-0 hover:bg-gray-50 hover:border-gray-300 hover:shadow-md transition-all duration-200 cursor-pointer",onClick:()=>n?.(e),children:[f.jsx("div",{className:"flex items-center justify-center w-8 h-8 mb-2",children:t?f.jsx(z4,{icon:t}):f.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center",children:f.jsx("span",{className:"text-sm text-gray-500"})})}),f.jsx("span",{className:"text-xs leading-tight",children:r}),o&&f.jsx("span",{className:"mt-1 text-[10px] text-red-400",children:"Removable"})]})};function $4({title:e,description:t,extensions:r,layout:n="grid",scrollable:o=!1,onClick:i}){const a=X.useRef(null),[s,l]=X.useState(!1),[c,u]=X.useState(!1),d=()=>{if(n==="row"&&a.current){const p=a.current;l(p.scrollLeft>0),u(p.scrollLeft+p.clientWidth<p.scrollWidth-1)}};X.useEffect(()=>{if(n==="row"&&a.current){const p=a.current;return d(),p.addEventListener("scroll",d),window.addEventListener("resize",d),()=>{p.removeEventListener("scroll",d),window.removeEventListener("resize",d)}}},[r,n]),X.useEffect(()=>{n==="row"&&a.current&&d()},[r,n]);const h=p=>{a.current&&a.current.scrollBy({left:p==="right"?200:-200,behavior:"smooth"})};return f.jsxs("section",{className:"mb-8",children:[f.jsx("h2",{className:"text-xl font-semibold mb-2",children:e}),t&&f.jsx("p",{className:"text-gray-600 mb-4",children:t}),f.jsx("div",{className:n==="grid"?"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4":"relative",children:n==="row"?f.jsxs(f.Fragment,{children:[o&&s&&f.jsx("button",{type:"button",className:"absolute left-0 top-0 h-full flex items-center bg-gradient-to-r from-white pl-2 pointer-events-auto z-10",onClick:()=>h("left"),tabIndex:-1,"aria-label":"Scroll left",children:f.jsx(Bh,{className:"h-6 w-6 text-gray-500"})}),f.jsx("div",{ref:a,className:"flex overflow-x-auto scrollbar-hide space-x-4 pb-2",children:r.map((p,g)=>f.jsx(Ow,{...p,onClick:i},g))}),o&&c&&f.jsx("button",{type:"button",className:"absolute right-0 top-0 h-full flex items-center bg-gradient-to-l from-white pr-2 pointer-events-auto z-10",onClick:()=>h("right"),tabIndex:-1,"aria-label":"Scroll right",children:f.jsx(Pn,{className:"h-6 w-6 text-gray-500"})})]}):r.map((p,g)=>f.jsx(Ow,{...p,onClick:i},g))})]})}function G4(){const e=B4(),t=[{title:"More from Veltix",description:"",layout:"grid",extensions:e.extensions},{title:"Popular",layout:"row",scrollable:!0,disabled:!0,extensions:[{icon:Mr,name:"QR code"},{icon:Mr,name:"Emoji"},{icon:Mr,name:"Pexels"},{icon:Mr,name:"Pixabay"},{icon:Mr,name:"Giphy"},{icon:Mr,name:"Google Maps"}]},{title:"AI generation",layout:"grid",disabled:!0,extensions:[{image:"/placeholder.svg?height=64&width=64",name:"Magic Morph"}]},{title:"Graphic design",layout:"grid",disabled:!0,extensions:[{icon:Mr,name:"QR code"},{image:"/placeholder.svg?height=64&width=64",name:"Mockups"}]},{title:"Marketing",layout:"grid",disabled:!0,extensions:[{icon:Mr,name:"QR code"},{image:"/placeholder.svg?height=64&width=64",name:"Mockups"}]},{title:"Other apps",layout:"row",scrollable:!0,disabled:!0,extensions:[{image:"/placeholder.svg?height=64&width=64",name:"Pexels"},{image:"/placeholder.svg?height=64&width=64",name:"Pixabay"},{image:"/placeholder.svg?height=64&width=64",name:"Giphy"},{image:"/placeholder.svg?height=64&width=64",name:"Google Maps"},{image:"/placeholder.svg?height=64&width=64",name:"QR code"},{image:"/placeholder.svg?height=64&width=64",name:"Emoji"}]}];return f.jsx("div",{className:"",children:f.jsx("div",{className:"max-w-4xl mx-auto",children:t.filter(r=>!r.disabled).map((r,n)=>f.jsx($4,{title:r.title,description:r.description,extensions:r.extensions,layout:r.layout,scrollable:r.scrollable,onClick:o=>{e.enable(o.id)}},n))})})}dr({id:"apps",title:"Apps",icon:bS,viewContainer:()=>f.jsx(G4,{})},_t.Sidebar);const V4=e=>{C.useEffect(()=>{qt.getState().initialize(e.components||[]),Gt.getState().initialize(e.contributes),e.data&&(je.getState().initialize(e.data),e.data.id&&Rc.getState().watch(e.data.id)),e.api&&is.getState().initialize(e.api),e.onMount&&e.onMount()},[e.components,e.contributes,e.data,e.api,e.onMount]);const t=C.useMemo(()=>({doc:{width:e.config?.doc?.width||1920,height:e.config?.doc?.height||1080}}),[e.config?.doc?.width,e.config?.doc?.height]),r=C.useMemo(()=>e.data?.width||t.doc.width,[e.config?.doc,e.data?.width]),n=C.useMemo(()=>e.data?.height||t.doc.height,[e.config?.doc,e.data?.height]),o=$t.getState(),i=C.useMemo(()=>({config:t,width:r,height:n,editor:o}),[t,r,n,o]);return f.jsx(Ec.Provider,{value:i,children:f.jsx(Mw,{})})},Iw=ur(()=>({version:"0.0.1",registerViewContainer:(e,t)=>{Gt.getState().registerViewContainer(e,t)}})),U4=Iw.getState(),H4=V4;Ve.AdvancedSettings=_0,Ve.EventCard=b0,Ve.EventConfig=D0,Ve.EventConfigFooter=N0,Ve.EventConfigProvider=E0,Ve.EventFieldRenderer=y0,Ve.EventList=w0,Ve.PRESET_SCHEMAS=T0,Ve.TriggerSelector=x0,Ve.Veltix=H4,Ve.ViewContainerLocation=_t,Ve.createClickOnlySchema=SM,Ve.createEventSchema=rd,Ve.createFullEventSchema=CM,Ve.extendEventSchema=EM,Ve.extendPresetSchema=_M,Ve.getPresetSchema=M0,Ve.useEventConfig=tl,Ve.useRegistryStore=qt,Ve.useVeltixStore=Iw,Ve.useViewRegistryStore=Gt,Ve.veltixStore=U4,Object.defineProperty(Ve,Symbol.toStringTag,{value:"Module"})});
